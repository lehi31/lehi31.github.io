import{a as da}from"../chunks/B5LTcAhG.js";import{P as ca,d as Te,e as va}from"../chunks/CzgXdWbt.js";import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as ke,E as f,ah as ma,ai as pa,f as Ne,B as le,m as e,s,c as o,a as Ee,D as a,R as ua,r as l,F as M,ap as ba,u as v}from"../chunks/CvahB0_t.js";import{f as m,a as c,c as fa}from"../chunks/8TW23Vtg.js";import{i as Fe}from"../chunks/BXUriw6V.js";import{P as _a}from"../chunks/B4Li_z2q.js";import{o as ya}from"../chunks/BDhmaeGV.js";import{a as we,i as N,e as S,b as ga,s as _}from"../chunks/B2iOXiG9.js";import{e as ha}from"../chunks/CfLp-eDs.js";import{s as be,r as Y}from"../chunks/BLBRaRwa.js";import{b as T}from"../chunks/Q-SVW1HH.js";import{p as Ga}from"../chunks/CdEA5IGF.js";import{g as xa}from"../chunks/By6S9EZM.js";import{D as wa}from"../chunks/D0ojNa5-.js";const $a=!1,Da=async()=>(da(ca.EditTempleChallenges,"Edit Temple Challenges"),{}),st=Object.freeze(Object.defineProperty({__proto__:null,load:Da,ssr:$a},Symbol.toStringTag,{value:"Module"}));var Sa=m('<div class="alert alert-danger alert-dismissible fade show" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Pa=m('<div class="alert alert-success alert-dismissible fade show" role="alert"><i class="bi bi-check-circle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Ca=m('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>'),La=m('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">Click "Create New Goal" to add your first ward mission goal.</p></div>'),Ma=m('<span class="badge bg-secondary ms-2">Archived</span>'),Na=m('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-success" type="button"><i class="bi bi-arrow-counterclockwise"></i> <span class="d-none d-sm-inline">Restore</span></button> <button class="btn btn-sm btn-danger" type="button"><i class="bi bi-trash-fill"></i> <span class="d-none d-sm-inline">Delete</span></button></div>'),Ta=m('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-pencil"></i> <span class="d-none d-sm-inline">Edit</span></button> <button class="btn btn-sm btn-outline-danger" type="button"><i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Archive</span></button></div>'),ka=m('<tr><td><strong> </strong> <!></td><td> <div class="d-md-none mt-1"><small class="text-muted"> </small></div></td><td class="d-none d-md-table-cell"> </td><td class="d-none d-md-table-cell"> </td><td class="d-none d-lg-table-cell"> </td><td class="d-none d-lg-table-cell"> </td><td class="d-none d-xl-table-cell"><small class="text-muted"> </small></td><td class="text-end"><!></td></tr>'),Ea=m('<div class="table-responsive"><table class="table table-hover align-middle svelte-120cb0p"><thead><tr><th scope="col" class="svelte-120cb0p">Year</th><th scope="col" class="svelte-120cb0p">Period</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Baptisms Goal</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Sealings Goal</th><th scope="col" class="d-none d-lg-table-cell svelte-120cb0p">Ordinances Goal</th><th scope="col" class="d-none d-lg-table-cell svelte-120cb0p">Names Prepared Goal</th><th scope="col" class="d-none d-xl-table-cell svelte-120cb0p">Notes</th><th scope="col" class="text-end svelte-120cb0p">Actions</th></tr></thead><tbody></tbody></table></div>'),Fa=m('<div class="alert alert-danger" role="alert"><small> </small></div>'),Aa=m('<span class="spinner-border spinner-border-sm me-2" role="status"></span>'),Oa=m('<form class="d-flex flex-column gap-3"><!> <div><label class="form-label" for="year">Year *</label> <input type="number" class="form-control" id="year" min="2000" max="2100" required/> <div class="form-text">Calendar year for this goal period</div></div> <div><label class="form-label" for="startDate">Start Date *</label> <input type="date" class="form-control" id="startDate" required/> <div class="form-text">First day of the goal period (inclusive)</div></div> <div><label class="form-label" for="endDate">End Date *</label> <input type="date" class="form-control" id="endDate" required/> <div class="form-text">Last day of the goal period (inclusive)</div></div> <hr/> <div><label class="form-label" for="baptismsGoal">Baptisms Goal</label> <input type="number" class="form-control" id="baptismsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of baptisms (leave empty to display "--")</div></div> <div><label class="form-label" for="familySealingsGoal">Family Sealings Goal</label> <input type="number" class="form-control" id="familySealingsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of family sealings (leave empty to display "--")</div></div> <div><label class="form-label" for="templeOrdinancesGoal">Temple Ordinances Goal</label> <input type="number" class="form-control" id="templeOrdinancesGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of temple ordinances performed (leave empty to display "--")</div></div> <div><label class="form-label" for="namesPreparedGoal">Names Prepared Goal</label> <input type="number" class="form-control" id="namesPreparedGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of names prepared for temple ordinances (leave empty to display "--")</div></div> <div><label class="form-label" for="notes">Notes (Optional)</label> <textarea class="form-control" id="notes" rows="3"></textarea> <div class="form-text">Internal notes about this goal period (for admin reference)</div></div> <div class="d-flex justify-content-end gap-2"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"><!> </button></div></form>'),Ra=m('<div class="ward-mission-goals-admin svelte-120cb0p"><div class="d-flex justify-content-between align-items-center mb-4"><h2>Ward Mission Goals Configuration</h2> <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-plus-circle"></i> Create New Goal</button></div> <!> <!> <!></div> <!>',1);function Ya(fe,_e){ke(_e,!1);const oe=()=>we(We,"$currentUserIsRoot",k),H=()=>we(Ae,"$goals",k),ne=()=>we(Oe,"$loading",k),[k,ye]=ga(),ie=f(),{stores:{data:Ae,loading:Oe},actions:{reload:Re,apiCreate:Ye,apiUpdate:qe,apiDelete:Ue,apiRestore:je,apiHardDelete:Ie}}=xa(),{stores:{currentUserIsRoot:We}}=Te();let d=f(null),p=f(null),de=null,E=f(!1),x=f(new Date().getFullYear()+1),F=f(""),A=f(""),z=f(null),J=f(null),K=f(null),Q=f(null),V=f("");const ce="goal-form-drawer";ya(async()=>{await Re()});function $e(){de=null,a(E,!1),a(x,new Date().getFullYear()+1),a(F,""),a(A,""),a(z,null),a(J,null),a(K,null),a(Q,null),a(V,""),a(d,null)}function Be(){$e(),a(E,!1)}function He(t){de=t,a(E,!0),a(x,t.year),a(F,t.start_date),a(A,t.end_date),a(z,t.baptisms_goal),a(J,t.family_sealings_goal),a(K,t.temple_ordinances_goal),a(Q,t.names_prepared_goal),a(V,t.notes||""),a(d,null)}function De(){document.querySelector(`[data-bs-target="#${ce}"]`)?.click(),$e()}async function ze(){if(a(d,null),a(p,null),!e(x)||e(x)<2e3||e(x)>2100){a(d,"Please enter a valid year between 2000 and 2100");return}if(!e(F)||!e(A)){a(d,"Please select both start and end dates");return}if(e(F)>e(A)){a(d,"Start date must be before or equal to end date");return}try{const t={year:e(x),start_date:e(F),end_date:e(A),baptisms_goal:e(z),family_sealings_goal:e(J),temple_ordinances_goal:e(K),names_prepared_goal:e(Q),is_active:!0,notes:e(V)||null};e(E)&&de?.id?(await qe(de.id,t),a(p,"Goal updated successfully!")):(await Ye(t),a(p,"Goal created successfully!")),De(),setTimeout(()=>{a(p,null)},3e3)}catch(t){a(d,t instanceof Error?t.message:"Failed to save goal")}}async function Je(t){if(confirm(`Are you sure you want to archive the goal for ${t.year}? You can restore it later.`))try{t.id&&(await Ue(t.id),a(p,"Goal archived successfully!"),setTimeout(()=>{a(p,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to archive goal")}}async function Ke(t){if(confirm(`Are you sure you want to restore the goal for ${t.year}?`))try{t.id&&(await je(t.id),a(p,"Goal restored successfully!"),setTimeout(()=>{a(p,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to restore goal")}}async function Qe(t){if(confirm(`Are you sure you want to PERMANENTLY delete the goal for ${t.year}?

This action cannot be undone and will remove the goal from the database forever.`))try{t.id&&(await Ie(t.id),a(p,"Goal permanently deleted!"),setTimeout(()=>{a(p,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to permanently delete goal")}}function Ve(t,n){const[h,u,q]=t.split("-").map(Number),[G,y,P]=n.split("-").map(Number),C=new Date(h,u-1,q),L=new Date(G,y-1,P),r=C.toLocaleDateString("en-US",{month:"short"}),w=L.toLocaleDateString("en-US",{month:"short"});return`${r} to ${w}`}ma(()=>(oe(),H()),()=>{a(ie,oe()?H():H().filter(t=>t.is_active))}),pa(),Fe();var Se=Ra(),ge=Ne(Se),he=o(ge),Ge=s(o(he),2);be(Ge,"data-bs-target","#goal-form-drawer"),be(Ge,"aria-controls",ce),l(he);var Pe=s(he,2);{var Xe=t=>{var n=Sa(),h=s(o(n)),u=s(h);l(n),le(()=>_(h,` ${e(d)??""} `)),S("click",u,()=>a(d,null)),c(t,n)};N(Pe,t=>{e(d)&&t(Xe)})}var Ce=s(Pe,2);{var Ze=t=>{var n=Pa(),h=s(o(n)),u=s(h);l(n),le(()=>_(h,` ${e(p)??""} `)),S("click",u,()=>a(p,null)),c(t,n)};N(Ce,t=>{e(p)&&t(Ze)})}var ea=s(Ce,2);{var aa=t=>{var n=Ca();c(t,n)},ta=t=>{var n=fa(),h=Ne(n);{var u=G=>{var y=La();c(G,y)},q=G=>{var y=Ea(),P=o(y),C=s(o(P));ha(C,5,()=>e(ie),L=>L.id,(L,r)=>{var w=ka();let U;var j=o(w),O=o(j),ve=o(O,!0);l(O);var X=s(O,2);{var me=b=>{var g=Ma();c(b,g)};N(X,b=>{e(r),v(()=>!e(r).is_active)&&b(me)})}l(j);var R=s(j),Z=o(R),I=s(Z),ee=o(I),pe=o(ee);l(ee),l(I),l(R);var W=s(R),ae=o(W,!0);l(W);var B=s(W),xe=o(B,!0);l(B);var te=s(B),i=o(te,!0);l(te);var $=s(te),ue=o($,!0);l($);var se=s($),Le=o(se),ra=o(Le,!0);l(Le),l(se);var Me=s(se),la=o(Me);{var oa=b=>{var g=Na(),D=o(g),re=s(D,2);l(g),S("click",D,()=>Ke(e(r))),S("click",re,()=>Qe(e(r))),c(b,g)},na=b=>{var g=Ta(),D=o(g);be(D,"data-bs-target","#goal-form-drawer"),be(D,"aria-controls",ce);var re=s(D,2);l(g),S("click",D,()=>He(e(r))),S("click",re,()=>Je(e(r))),c(b,g)};N(la,b=>{e(r),v(()=>!e(r).is_active)?b(oa):b(na,!1)})}l(Me),l(w),le((b,g,D,re,ia)=>{U=va(w,1,"",null,U,{"table-secondary":!e(r).is_active}),_(ve,(e(r),v(()=>e(r).year))),_(Z,`${b??""} `),_(pe,`Goals: ${e(r),v(()=>e(r).baptisms_goal??"--")??""} / ${e(r),v(()=>e(r).family_sealings_goal??"--")??""} /
										${g??""} /
										${D??""}`),_(ae,(e(r),v(()=>e(r).baptisms_goal??"--"))),_(xe,(e(r),v(()=>e(r).family_sealings_goal??"--"))),_(i,re),_(ue,ia),_(ra,(e(r),v(()=>e(r).notes||"â€”")))},[()=>(e(r),v(()=>Ve(e(r).start_date,e(r).end_date))),()=>(e(r),v(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).names_prepared_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).names_prepared_goal?.toLocaleString()??"--"))]),c(L,w)}),l(C),l(P),l(y),c(G,y)};N(h,G=>{e(ie),v(()=>e(ie).length===0)?G(u):G(q,!1)},!0)}c(t,n)};N(ea,t=>{ne()?t(aa):t(ta,!1)})}l(ge);var sa=s(ge,2);{let t=ua(()=>e(E)?`Edit Goal for ${e(x)}`:"Create New Goal");wa(sa,{get title(){return e(t)},id:ce,placement:"end",children:(n,h)=>{var u=Oa(),q=o(u);{var G=i=>{var $=Fa(),ue=o($),se=o(ue,!0);l(ue),l($),le(()=>_(se,e(d))),c(i,$)};N(q,i=>{e(d)&&i(G)})}var y=s(q,2),P=s(o(y),2);Y(P),M(2),l(y);var C=s(y,2),L=s(o(C),2);Y(L),M(2),l(C);var r=s(C,2),w=s(o(r),2);Y(w),M(2),l(r);var U=s(r,4),j=s(o(U),2);Y(j),M(2),l(U);var O=s(U,2),ve=s(o(O),2);Y(ve),M(2),l(O);var X=s(O,2),me=s(o(X),2);Y(me),M(2),l(X);var R=s(X,2),Z=s(o(R),2);Y(Z),M(2),l(R);var I=s(R,2),ee=s(o(I),2);ba(ee),M(2),l(I);var pe=s(I,2),W=o(pe),ae=s(W,2),B=o(ae);{var xe=i=>{var $=Aa();c(i,$)};N(B,i=>{ne()&&i(xe)})}var te=s(B);l(ae),l(pe),l(u),le(()=>{P.disabled=e(E),ae.disabled=ne(),_(te,` ${e(E)?"Update Goal":"Create Goal"}`)}),T(P,()=>e(x),i=>a(x,i)),T(L,()=>e(F),i=>a(F,i)),T(w,()=>e(A),i=>a(A,i)),T(j,()=>e(z),i=>a(z,i)),T(ve,()=>e(J),i=>a(J,i)),T(me,()=>e(K),i=>a(K,i)),T(Z,()=>e(Q),i=>a(Q,i)),T(ee,()=>e(V),i=>a(V,i)),S("click",W,De),S("submit",u,Ga(ze)),c(n,u)},$$slots:{default:!0}})}S("click",Ge,Be),c(fe,Se),Ee(),ye()}var qa=m(`<div class="container svelte-1ljfgab"><p class="lead">Configure annual ward mission goals including target dates and goal values. Goals will
			automatically display on the home page for all ward members.</p> <!></div>`);function rt(fe,_e){ke(_e,!1);const{stores:{pageName:oe}}=Te();oe.set("Ward Mission Goals"),Fe(),_a(fe,{pageTitle:"Manage Ward Mission Goals",children:(H,ne)=>{var k=qa(),ye=s(o(k),2);Ya(ye,{}),l(k),c(H,k)},$$slots:{default:!0}}),Ee()}export{rt as component,st as universal};
