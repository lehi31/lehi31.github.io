import{s as lt,d as c,y as ye,z as ce,a as se,i as Y,b as s,A as ee,p as a,c as r,e as v,w as F,g as T,f as J,x as be,h as o,j as w,t as K,k as me,r as st,n as Te,B as it}from"../chunks/pH736Kvp.js";import{S as at,i as nt,d as we,t as Le,a as Ie,m as Ae,c as Ne,b as Ue}from"../chunks/THtqwFCh.js";import{P as ct}from"../chunks/BoOqh_yQ.js";import{e as Ye,u as ut,d as dt}from"../chunks/BWriCB3W.js";import{D as ft}from"../chunks/CghRhIDj.js";import{u as _t}from"../chunks/CrNHsshU.js";import{g as ht,P as vt}from"../chunks/DxPvwIsr.js";import{g as pt}from"../chunks/CTnp2OZ3.js";function Je(i,e,l){const t=i.slice();return t[27]=e[l],t}function Ke(i){let e,l,t,n,f,h;return{c(){e=o("div"),l=K(i[5]),t=w(),n=o("button"),this.h()},l(k){e=r(k,"DIV",{class:!0,role:!0});var m=v(e);l=J(m,i[5]),t=T(m),n=r(m,"BUTTON",{type:!0,class:!0,"aria-label":!0}),v(n).forEach(c),m.forEach(c),this.h()},h(){a(n,"type","button"),a(n,"class","btn-close"),a(n,"aria-label","Close"),a(e,"class","alert alert-danger alert-dismissible fade show"),a(e,"role","alert")},m(k,m){Y(k,e,m),s(e,l),s(e,t),s(e,n),f||(h=ee(n,"click",i[19]),f=!0)},p(k,m){m&32&&se(l,k[5])},d(k){k&&c(e),f=!1,h()}}}function mt(i){let e,l,t,n='<tr><th scope="col">Name</th> <th scope="col" class="d-none d-md-table-cell">Email</th> <th scope="col" class="d-none d-lg-table-cell">Status</th> <th scope="col" class="d-none d-lg-table-cell">Active</th> <th scope="col" class="d-none d-lg-table-cell">Created</th> <th scope="col" class="d-none d-xl-table-cell">Last Login</th> <th scope="col" class="text-end">Actions</th></tr>',f,h,k=[],m=new Map,A,D=Ye(i[4]);const N=p=>p[27].id;for(let p=0;p<D.length;p+=1){let b=Je(i,D,p),g=N(b);m.set(g,k[p]=We(g,b))}let u=i[4].length===0&&Ze();return{c(){e=o("div"),l=o("table"),t=o("thead"),t.innerHTML=n,f=w(),h=o("tbody");for(let p=0;p<k.length;p+=1)k[p].c();A=w(),u&&u.c(),this.h()},l(p){e=r(p,"DIV",{class:!0});var b=v(e);l=r(b,"TABLE",{class:!0});var g=v(l);t=r(g,"THEAD",{"data-svelte-h":!0}),F(t)!=="svelte-1aisb27"&&(t.innerHTML=n),f=T(g),h=r(g,"TBODY",{});var H=v(h);for(let M=0;M<k.length;M+=1)k[M].l(H);H.forEach(c),g.forEach(c),A=T(b),u&&u.l(b),b.forEach(c),this.h()},h(){a(l,"class","table table-hover align-middle"),a(e,"class","table-responsive")},m(p,b){Y(p,e,b),s(e,l),s(l,t),s(l,f),s(l,h);for(let g=0;g<k.length;g+=1)k[g]&&k[g].m(h,null);s(e,A),u&&u.m(e,null)},p(p,b){b&18448&&(D=Ye(p[4]),k=ut(k,b,N,1,p,D,m,h,dt,We,null,Je)),p[4].length===0?u||(u=Ze(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(p){p&&c(e);for(let b=0;b<k.length;b+=1)k[b].d();u&&u.d()}}}function bt(i){let e,l='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=o("div"),e.innerHTML=l,this.h()},l(t){e=r(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-mlx3u2"&&(e.innerHTML=l),this.h()},h(){a(e,"class","text-center py-5")},m(t,n){Y(t,e,n)},p:Te,d(t){t&&c(e)}}}function gt(i){let e,l="Never";return{c(){e=o("span"),e.textContent=l,this.h()},l(t){e=r(t,"SPAN",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1qml2vo"&&(e.textContent=l),this.h()},h(){a(e,"class","text-muted")},m(t,n){Y(t,e,n)},p:Te,d(t){t&&c(e)}}}function yt(i){let e=new Date(i[27].last_login).toLocaleDateString()+"",l;return{c(){l=K(e)},l(t){l=J(t,e)},m(t,n){Y(t,l,n)},p(t,n){n&16&&e!==(e=new Date(t[27].last_login).toLocaleDateString()+"")&&se(l,e)},d(t){t&&c(l)}}}function We(i,e){let l,t,n,f=(e[27].display_name??e[27].email)+"",h,k,m,A=e[27].email+"",D,N,u,p=e[27].email+"",b,g,H,M,B="user",q,G,P,E,j=e[27].is_active?"Active":"Disabled",$,I,Q,x,U,X=e[27].is_active?"Active":"Disabled",_,O,S,C,L,d=new Date(e[27].created_at).toLocaleDateString()+"",y,R,z,W,ie,te,ae,Z,ue,De,oe,Ve="Edit",ke,ne,$e='<i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Delete</span>',Ce,de,Ee,Se;function Me(re,V){return re[27].last_login?yt:gt}let fe=Me(e),le=fe(e);function rt(){return e[21](e[27])}function ot(){return e[22](e[27])}return{key:i,first:null,c(){l=o("tr"),t=o("td"),n=o("div"),h=K(f),k=w(),m=o("small"),D=K(A),N=w(),u=o("td"),b=K(p),g=w(),H=o("td"),M=o("span"),q=K(B),G=w(),P=o("div"),E=o("span"),$=K(j),Q=w(),x=o("td"),U=o("span"),_=K(X),S=w(),C=o("td"),L=o("small"),y=K(d),R=w(),z=o("td"),W=o("small"),le.c(),ie=w(),te=o("td"),ae=o("div"),Z=o("button"),ue=o("i"),De=w(),oe=o("span"),oe.textContent=Ve,ke=w(),ne=o("button"),ne.innerHTML=$e,Ce=w(),this.h()},l(re){l=r(re,"TR",{class:!0});var V=v(l);t=r(V,"TD",{});var _e=v(t);n=r(_e,"DIV",{class:!0});var Pe=v(n);h=J(Pe,f),Pe.forEach(c),k=T(_e),m=r(_e,"SMALL",{class:!0});var Be=v(m);D=J(Be,A),Be.forEach(c),_e.forEach(c),N=T(V),u=r(V,"TD",{class:!0});var He=v(u);b=J(He,p),He.forEach(c),g=T(V),H=r(V,"TD",{});var he=v(H);M=r(he,"SPAN",{class:!0});var xe=v(M);q=J(xe,B),xe.forEach(c),G=T(he),P=r(he,"DIV",{class:!0});var Oe=v(P);E=r(Oe,"SPAN",{class:!0});var qe=v(E);$=J(qe,j),qe.forEach(c),Oe.forEach(c),he.forEach(c),Q=T(V),x=r(V,"TD",{class:!0});var Re=v(x);U=r(Re,"SPAN",{class:!0});var je=v(U);_=J(je,X),je.forEach(c),Re.forEach(c),S=T(V),C=r(V,"TD",{class:!0});var ze=v(C);L=r(ze,"SMALL",{});var Fe=v(L);y=J(Fe,d),Fe.forEach(c),ze.forEach(c),R=T(V),z=r(V,"TD",{class:!0});var Ge=v(z);W=r(Ge,"SMALL",{});var Qe=v(W);le.l(Qe),Qe.forEach(c),Ge.forEach(c),ie=T(V),te=r(V,"TD",{class:!0});var Xe=v(te);ae=r(Xe,"DIV",{class:!0,role:!0});var ve=v(ae);Z=r(ve,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var pe=v(Z);ue=r(pe,"I",{class:!0}),v(ue).forEach(c),De=T(pe),oe=r(pe,"SPAN",{class:!0,"data-svelte-h":!0}),F(oe)!=="svelte-1davzvv"&&(oe.textContent=Ve),pe.forEach(c),ke=T(ve),ne=r(ve,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),F(ne)!=="svelte-fvaa5t"&&(ne.innerHTML=$e),ve.forEach(c),Xe.forEach(c),Ce=T(V),V.forEach(c),this.h()},h(){a(n,"class","fw-semibold"),a(m,"class","d-md-none text-muted d-block"),a(u,"class","d-none d-md-table-cell"),a(M,"class",`badge bg-${Tt("user")} text-uppercase`),a(E,"class",I=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(P,"class","d-lg-none mt-1"),a(U,"class",O=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(x,"class","d-none d-lg-table-cell"),a(C,"class","d-none d-lg-table-cell"),a(z,"class","d-none d-xl-table-cell"),a(ue,"class","bi bi-pencil"),a(oe,"class","d-none d-sm-inline"),a(Z,"class","btn btn-sm btn-outline-primary"),a(Z,"type","button"),a(Z,"data-bs-toggle","offcanvas"),a(Z,"data-bs-target",`#${ge}`),a(Z,"aria-controls",ge),a(ne,"class","btn btn-sm btn-outline-danger"),a(ne,"type","button"),a(ae,"class","btn-group gap-2"),a(ae,"role","group"),a(te,"class","text-end"),a(l,"class",de=e[27].is_active?"":"opacity-75"),this.first=l},m(re,V){Y(re,l,V),s(l,t),s(t,n),s(n,h),s(t,k),s(t,m),s(m,D),s(l,N),s(l,u),s(u,b),s(l,g),s(l,H),s(H,M),s(M,q),s(H,G),s(H,P),s(P,E),s(E,$),s(l,Q),s(l,x),s(x,U),s(U,_),s(l,S),s(l,C),s(C,L),s(L,y),s(l,R),s(l,z),s(z,W),le.m(W,null),s(l,ie),s(l,te),s(te,ae),s(ae,Z),s(Z,ue),s(Z,De),s(Z,oe),s(ae,ke),s(ae,ne),s(l,Ce),Ee||(Se=[ee(Z,"click",rt),ee(ne,"click",ot)],Ee=!0)},p(re,V){e=re,V&16&&f!==(f=(e[27].display_name??e[27].email)+"")&&se(h,f),V&16&&A!==(A=e[27].email+"")&&se(D,A),V&16&&p!==(p=e[27].email+"")&&se(b,p),V&16&&j!==(j=e[27].is_active?"Active":"Disabled")&&se($,j),V&16&&I!==(I=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(E,"class",I),V&16&&X!==(X=e[27].is_active?"Active":"Disabled")&&se(_,X),V&16&&O!==(O=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(U,"class",O),V&16&&d!==(d=new Date(e[27].created_at).toLocaleDateString()+"")&&se(y,d),fe===(fe=Me(e))&&le?le.p(e,V):(le.d(1),le=fe(e),le&&(le.c(),le.m(W,null))),V&16&&de!==(de=e[27].is_active?"":"opacity-75")&&a(l,"class",de)},d(re){re&&c(l),le.d(),Ee=!1,ye(Se)}}}function Ze(i){let e,l="<p>No users found matching your filters.</p>";return{c(){e=o("div"),e.innerHTML=l,this.h()},l(t){e=r(t,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-i4erte"&&(e.innerHTML=l),this.h()},h(){a(e,"class","text-center py-5 text-muted")},m(t,n){Y(t,e,n)},d(t){t&&c(e)}}}function Dt(i){let e,l="Select a user to edit.";return{c(){e=o("p"),e.textContent=l,this.h()},l(t){e=r(t,"P",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-l09ef1"&&(e.textContent=l),this.h()},h(){a(e,"class","text-muted mb-0")},m(t,n){Y(t,e,n)},p:Te,d(t){t&&c(e)}}}function kt(i){let e,l,t,n="Display Name",f,h,k,m,A,D,N,u,p="Active Account",b,g,H="Disabled accounts cannot login",M,B,q,G="Admin Notes",P,E,j,$,I,Q="Cancel",x,U,X="Save Changes",_,O;return{c(){e=o("form"),l=o("div"),t=o("label"),t.textContent=n,f=w(),h=o("input"),k=w(),m=o("div"),A=o("div"),D=o("input"),N=w(),u=o("label"),u.textContent=p,b=w(),g=o("div"),g.textContent=H,M=w(),B=o("div"),q=o("label"),q.textContent=G,P=w(),E=o("textarea"),j=w(),$=o("div"),I=o("button"),I.textContent=Q,x=w(),U=o("button"),U.textContent=X,this.h()},l(S){e=r(S,"FORM",{class:!0});var C=v(e);l=r(C,"DIV",{});var L=v(l);t=r(L,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),F(t)!=="svelte-1qww9aa"&&(t.textContent=n),f=T(L),h=r(L,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),L.forEach(c),k=T(C),m=r(C,"DIV",{});var d=v(m);A=r(d,"DIV",{class:!0});var y=v(A);D=r(y,"INPUT",{class:!0,type:!0,id:!0}),N=T(y),u=r(y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),F(u)!=="svelte-gc2a6c"&&(u.textContent=p),y.forEach(c),b=T(d),g=r(d,"DIV",{class:!0,"data-svelte-h":!0}),F(g)!=="svelte-ip672x"&&(g.textContent=H),d.forEach(c),M=T(C),B=r(C,"DIV",{});var R=v(B);q=r(R,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),F(q)!=="svelte-17a0zww"&&(q.textContent=G),P=T(R),E=r(R,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0}),v(E).forEach(c),R.forEach(c),j=T(C),$=r(C,"DIV",{class:!0});var z=v($);I=r(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(I)!=="svelte-10ov1w5"&&(I.textContent=Q),x=T(z),U=r(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(U)!=="svelte-bcbxuj"&&(U.textContent=X),z.forEach(c),C.forEach(c),this.h()},h(){a(t,"class","form-label"),a(t,"for","displayName"),a(h,"type","text"),a(h,"class","form-control"),a(h,"id","displayName"),a(h,"placeholder","Display name (optional)"),a(D,"class","form-check-input"),a(D,"type","checkbox"),a(D,"id","isActive"),a(u,"class","form-check-label"),a(u,"for","isActive"),a(A,"class","form-check form-switch"),a(g,"class","form-text"),a(q,"class","form-label"),a(q,"for","adminNotes"),a(E,"class","form-control"),a(E,"id","adminNotes"),a(E,"rows","3"),a(E,"placeholder","Internal notes about this user..."),a(I,"type","button"),a(I,"class","btn btn-secondary"),a(U,"type","submit"),a(U,"class","btn btn-primary"),a($,"class","d-flex justify-content-end gap-2"),a(e,"class","d-flex flex-column gap-3")},m(S,C){Y(S,e,C),s(e,l),s(l,t),s(l,f),s(l,h),ce(h,i[1].display_name),s(e,k),s(e,m),s(m,A),s(A,D),D.checked=i[1].is_active,s(A,N),s(A,u),s(m,b),s(m,g),s(e,M),s(e,B),s(B,q),s(B,P),s(B,E),ce(E,i[1].notes),s(e,j),s(e,$),s($,I),s($,x),s($,U),_||(O=[ee(h,"input",i[23]),ee(D,"change",i[24]),ee(E,"input",i[25]),ee(I,"click",i[12]),ee(e,"submit",it(i[13]))],_=!0)},p(S,C){C&2&&h.value!==S[1].display_name&&ce(h,S[1].display_name),C&2&&(D.checked=S[1].is_active),C&2&&ce(E,S[1].notes)},d(S){S&&c(e),_=!1,ye(O)}}}function Ct(i){let e;function l(f,h){return f[1]?kt:Dt}let t=l(i),n=t(i);return{c(){n.c(),e=be()},l(f){n.l(f),e=be()},m(f,h){n.m(f,h),Y(f,e,h)},p(f,h){t===(t=l(f))&&n?n.p(f,h):(n.d(1),n=t(f),n&&(n.c(),n.m(e.parentNode,e)))},d(f){f&&c(e),n.d(f)}}}function et(i){let e,l,t,n,f,h="Confirm Delete",k,m,A,D,N,u,p,b=(i[2].display_name??i[2].email)+"",g,H,M,B,q="This action cannot be undone.",G,P,E,j="Cancel",$,I,Q="Delete User",x,U,X,_;return{c(){e=o("div"),l=o("div"),t=o("div"),n=o("div"),f=o("h5"),f.textContent=h,k=w(),m=o("button"),A=w(),D=o("div"),N=o("p"),u=K("Are you sure you want to delete the user "),p=o("strong"),g=K(b),H=K("?"),M=w(),B=o("p"),B.textContent=q,G=w(),P=o("div"),E=o("button"),E.textContent=j,$=w(),I=o("button"),I.textContent=Q,x=w(),U=o("div"),this.h()},l(O){e=r(O,"DIV",{class:!0,tabindex:!0,role:!0});var S=v(e);l=r(S,"DIV",{class:!0,role:!0});var C=v(l);t=r(C,"DIV",{class:!0});var L=v(t);n=r(L,"DIV",{class:!0});var d=v(n);f=r(d,"H5",{class:!0,"data-svelte-h":!0}),F(f)!=="svelte-mdrdai"&&(f.textContent=h),k=T(d),m=r(d,"BUTTON",{type:!0,class:!0,"aria-label":!0}),v(m).forEach(c),d.forEach(c),A=T(L),D=r(L,"DIV",{class:!0});var y=v(D);N=r(y,"P",{});var R=v(N);u=J(R,"Are you sure you want to delete the user "),p=r(R,"STRONG",{});var z=v(p);g=J(z,b),z.forEach(c),H=J(R,"?"),R.forEach(c),M=T(y),B=r(y,"P",{class:!0,"data-svelte-h":!0}),F(B)!=="svelte-1s9uglb"&&(B.textContent=q),y.forEach(c),G=T(L),P=r(L,"DIV",{class:!0});var W=v(P);E=r(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(E)!=="svelte-1rp5z46"&&(E.textContent=j),$=T(W),I=r(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),F(I)!=="svelte-lwz0rj"&&(I.textContent=Q),W.forEach(c),L.forEach(c),C.forEach(c),S.forEach(c),x=T(O),U=r(O,"DIV",{class:!0}),v(U).forEach(c),this.h()},h(){a(f,"class","modal-title"),a(m,"type","button"),a(m,"class","btn-close"),a(m,"aria-label","Close"),a(n,"class","modal-header"),a(B,"class","text-danger mb-0"),a(D,"class","modal-body"),a(E,"type","button"),a(E,"class","btn btn-secondary"),a(I,"type","button"),a(I,"class","btn btn-danger"),a(P,"class","modal-footer"),a(t,"class","modal-content"),a(l,"class","modal-dialog modal-dialog-centered"),a(l,"role","document"),a(e,"class","modal show d-block"),a(e,"tabindex","-1"),a(e,"role","dialog"),a(U,"class","modal-backdrop show")},m(O,S){Y(O,e,S),s(e,l),s(l,t),s(t,n),s(n,f),s(n,k),s(n,m),s(t,A),s(t,D),s(D,N),s(N,u),s(N,p),s(p,g),s(N,H),s(D,M),s(D,B),s(t,G),s(t,P),s(P,E),s(P,$),s(P,I),Y(O,x,S),Y(O,U,S),X||(_=[ee(m,"click",i[15]),ee(E,"click",i[15]),ee(I,"click",i[16])],X=!0)},p(O,S){S&4&&b!==(b=(O[2].display_name??O[2].email)+"")&&se(g,b)},d(O){O&&(c(e),c(x),c(U)),X=!1,ye(_)}}}function Et(i){let e,l,t,n="User Management",f,h,k='<i class="bi bi-arrow-clockwise"></i> Refresh',m,A,D,N,u,p,b,g,H,M=i[4].length+"",B,q,G=i[4].length!==1?"s":"",P,E,j,$,I,Q,x,U,X,_=i[5]&&Ke(i);function O(d,y){return d[6]?bt:mt}let S=O(i),C=S(i);$=new ft({props:{title:i[3],id:ge,$$slots:{default:[Ct]},$$scope:{ctx:i}}});let L=i[2]&&et(i);return{c(){e=o("div"),l=o("div"),t=o("h2"),t.textContent=n,f=w(),h=o("button"),h.innerHTML=k,m=w(),_&&_.c(),A=w(),D=o("div"),N=o("div"),u=o("input"),p=w(),b=o("div"),g=o("div"),H=K("Total: "),B=K(M),q=K(" user"),P=K(G),E=w(),C.c(),j=w(),Ue($.$$.fragment),I=w(),L&&L.c(),Q=be(),this.h()},l(d){e=r(d,"DIV",{class:!0});var y=v(e);l=r(y,"DIV",{class:!0});var R=v(l);t=r(R,"H2",{"data-svelte-h":!0}),F(t)!=="svelte-1w9k0u8"&&(t.textContent=n),f=T(R),h=r(R,"BUTTON",{class:!0,"data-svelte-h":!0}),F(h)!=="svelte-1t5isil"&&(h.innerHTML=k),R.forEach(c),m=T(y),_&&_.l(y),A=T(y),D=r(y,"DIV",{class:!0});var z=v(D);N=r(z,"DIV",{class:!0});var W=v(N);u=r(W,"INPUT",{type:!0,class:!0,placeholder:!0}),W.forEach(c),p=T(z),b=r(z,"DIV",{class:!0});var ie=v(b);g=r(ie,"DIV",{class:!0});var te=v(g);H=J(te,"Total: "),B=J(te,M),q=J(te," user"),P=J(te,G),te.forEach(c),ie.forEach(c),z.forEach(c),E=T(y),C.l(y),y.forEach(c),j=T(d),Ne($.$$.fragment,d),I=T(d),L&&L.l(d),Q=be(),this.h()},h(){a(h,"class","btn btn-primary"),a(l,"class","d-flex justify-content-between align-items-center mb-4"),a(u,"type","text"),a(u,"class","form-control"),a(u,"placeholder","Search by email or name..."),a(N,"class","col-md-9"),a(g,"class","text-muted mt-2"),a(b,"class","col-md-3"),a(D,"class","row mb-3"),a(e,"class","user-management")},m(d,y){Y(d,e,y),s(e,l),s(l,t),s(l,f),s(l,h),s(e,m),_&&_.m(e,null),s(e,A),s(e,D),s(D,N),s(N,u),ce(u,i[0]),s(D,p),s(D,b),s(b,g),s(g,H),s(g,B),s(g,q),s(g,P),s(e,E),C.m(e,null),Y(d,j,y),Ae($,d,y),Y(d,I,y),L&&L.m(d,y),Y(d,Q,y),x=!0,U||(X=[ee(h,"click",i[18]),ee(u,"input",i[20])],U=!0)},p(d,[y]){d[5]?_?_.p(d,y):(_=Ke(d),_.c(),_.m(e,A)):_&&(_.d(1),_=null),y&1&&u.value!==d[0]&&ce(u,d[0]),(!x||y&16)&&M!==(M=d[4].length+"")&&se(B,M),(!x||y&16)&&G!==(G=d[4].length!==1?"s":"")&&se(P,G),S===(S=O(d))&&C?C.p(d,y):(C.d(1),C=S(d),C&&(C.c(),C.m(e,null)));const R={};y&8&&(R.title=d[3]),y&1073741826&&(R.$$scope={dirty:y,ctx:d}),$.$set(R),d[2]?L?L.p(d,y):(L=et(d),L.c(),L.m(Q.parentNode,Q)):L&&(L.d(1),L=null)},i(d){x||(Ie($.$$.fragment,d),x=!0)},o(d){Le($.$$.fragment,d),x=!1},d(d){d&&(c(e),c(j),c(I),c(Q)),_&&_.d(),C.d(),we($,d),L&&L.d(d),U=!1,ye(X)}}}function Tt(i){switch(i){case"root":return"danger";case"admin":return"primary";case"primary":case"relief-society":case"elders-quorum":case"teachers-quorum":case"young-women":case"sunday-school":return"info";case"authenticated":return"success";case"un-authenticated":return"secondary";default:return"secondary"}}const ge="edit-user-drawer";function tt(){document.querySelector(`[data-bs-target="#${ge}"]`)?.click()}function wt(i,e,l){let t,n,f,h;const{stores:k,actions:m}=_t,{users:A,loading:D,error:N}=k;me(i,A,_=>l(17,n=_)),me(i,D,_=>l(6,h=_)),me(i,N,_=>l(5,f=_));let u=null,p=null,b="",g="Edit User";st(()=>{m.fetchUsers()});function H(_){l(1,u={..._}),l(3,g=`Edit User: ${_.email}`)}function M(){l(1,u=null),tt()}async function B(){if(!u)return;(await m.updateUser(u.id,{is_active:u.is_active,notes:u.notes,display_name:u.display_name})).success&&(tt(),l(1,u=null))}function q(_){l(2,p=_)}function G(){l(2,p=null)}async function P(){if(!p)return;(await m.deleteUser(p.id)).success&&l(2,p=null)}const E=()=>m.fetchUsers(),j=()=>N.set(null);function $(){b=this.value,l(0,b)}const I=_=>H(_),Q=_=>q(_);function x(){u.display_name=this.value,l(1,u)}function U(){u.is_active=this.checked,l(1,u)}function X(){u.notes=this.value,l(1,u)}return i.$$.update=()=>{i.$$.dirty&131073&&l(4,t=n.filter(_=>b===""||_.email.toLowerCase().includes(b.toLowerCase())||_.display_name?.toLowerCase().includes(b.toLowerCase())))},[b,u,p,g,t,f,h,m,A,D,N,H,M,B,q,G,P,n,E,j,$,I,Q,x,U,X]}class Lt extends at{constructor(e){super(),nt(this,e,wt,Et,lt,{})}}function It(i){let e,l;return e=new Lt({}),{c(){Ue(e.$$.fragment)},l(t){Ne(e.$$.fragment,t)},m(t,n){Ae(e,t,n),l=!0},i(t){l||(Ie(e.$$.fragment,t),l=!0)},o(t){Le(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function At(i){let e,l;return e=new ct({props:{pageTitle:"Manage Users",$$slots:{default:[It]},$$scope:{ctx:i}}}),{c(){Ue(e.$$.fragment)},l(t){Ne(e.$$.fragment,t)},m(t,n){Ae(e,t,n),l=!0},p(t,[n]){const f={};n&4&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(Ie(e.$$.fragment,t),l=!0)},o(t){Le(e.$$.fragment,t),l=!1},d(t){we(e,t)}}}function Nt(i,e,l){let t;const{stores:{currentUserHasPermission:n}}=ht();return me(i,n,f=>l(1,t=f)),st(()=>{t(vt.ManageUsers)||pt("/home")}),[n]}class xt extends at{constructor(e){super(),nt(this,e,Nt,At,lt,{})}}export{xt as component};
