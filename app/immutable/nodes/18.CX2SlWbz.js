import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{o as M}from"../chunks/DHXte27T.js";import{p as U,f as k,a as z,D as r,E as p,g as l,s as u,c as n,r as f,F as w,t as A}from"../chunks/CPOcesE7.js";import{i as _,s as C}from"../chunks/opPvMm1W.js";import{c as T,a as t,f as c}from"../chunks/YsHTGu5k.js";import{i as G}from"../chunks/C2Q_9cr2.js";import{g as K}from"../chunks/CHgdEdg_.js";import{p as Q}from"../chunks/BG_FjxcS.js";import{s as W,d as X}from"../chunks/CHS_Tn9E.js";import{L as Z}from"../chunks/oyoccGFO.js";var $=c('<strong>Email already verified!</strong> <p class="mb-0">You can log in now.</p>',1),aa=c('<strong>Email verified successfully!</strong> <p class="mb-0">You can now log in to your account.</p>',1),ea=c('<div class="alert alert-success d-flex align-items-center gap-2" role="alert"><i class="bi bi-check-circle-fill"></i> <div><!></div></div> <p class="text-muted">Redirecting to login...</p>',1),ra=c('<a href="/auth/resend-verification" class="btn btn-primary">Request New Verification Email</a>'),ta=c('<div class="alert alert-danger d-flex align-items-center gap-2" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <div><strong>Verification Failed</strong> <p class="mb-0"> </p></div></div> <!> <a href="/auth/login" class="btn btn-link">Back to Login</a>',1),sa=c('<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-tu9pn8"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none"><img src="/assets/logo.png" alt="logo" class="logo svelte-tu9pn8"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <!></div>');function ua(O,R){U(R,!1);let V=p(!0),L=p(!1),m=p(""),F=p(!1),N=p(!1);M(async()=>{const a=Q.url.searchParams.get("token");if(!a){r(m,"Invalid verification link"),r(V,!1);return}try{const s=await(await fetch(`${W}/functions/v1/auth-verify-email`,{method:"POST",headers:X(),body:JSON.stringify({token:a})})).json();s.success?(r(L,!0),r(F,s.alreadyVerified||!1),setTimeout(()=>{K("/auth/login")},3e3)):(r(m,s.error||"Verification failed"),r(N,s.expired||!1))}catch{r(m,"Network error. Please try again.")}finally{r(V,!1)}}),G();var P=T(),S=k(P);{var Y=a=>{Z(a,{message:"Verifying your email..."})},j=a=>{var h=sa(),s=u(n(h),2);{var q=i=>{var v=ea(),b=k(v),y=u(n(b),2),d=n(y);{var x=e=>{var o=$();w(2),t(e,o)},g=e=>{var o=aa();w(2),t(e,o)};_(d,e=>{l(F)?e(x):e(g,!1)})}f(y),f(b),w(2),t(i,v)},B=i=>{var v=T(),b=k(v);{var y=d=>{var x=ta(),g=k(x),e=u(n(g),2),o=u(n(e),2),D=n(o,!0);f(o),f(e),f(g);var H=u(g,2);{var I=E=>{var J=ra();t(E,J)};_(H,E=>{l(N)&&E(I)})}w(2),A(()=>C(D,l(m))),t(d,x)};_(b,d=>{l(m)&&d(y)},!0)}t(i,v)};_(s,i=>{l(L)?i(q):i(B,!1)})}f(h),t(a,h)};_(S,a=>{l(V)?a(Y):a(j,!1)})}t(O,P),z()}export{ua as component};
