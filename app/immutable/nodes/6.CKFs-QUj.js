import{s as We,n as Ae,r as Pt,k as Ot,b as Qe}from"../chunks/DZwCP9x3.js";import{S as He,i as Pe,d as T,D as je,c as C,e as S,f as H,k as A,l as N,n as ge,g as j,r as U,p as K,B as ke,y as le,F as Mt,E as Ee,C as _e,s as J,o as Z,u as G,t as me,a as ue,w as jt,v as Kt,b as Ke,m as ze,j as qe,q as Be}from"../chunks/BGKO8vuC.js";import{P as zt}from"../chunks/CeDIglpY.js";import{e as fe}from"../chunks/BKch2Da3.js";import{s as Yt}from"../chunks/DsH82brL.js";import{w as qt}from"../chunks/wlhN6vKE.js";import{e as Je,f as re,g as Bt}from"../chunks/nCNJvuQq.js";function Ve(r,e){const t=Je(r),n=Je(e);return+t==+n}const Ft=!0,bn=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ft},Symbol.toStringTag,{value:"Module"})),Te={SacramentBreadAssignments:"Sacrament Bread Assignments"},Zt=["Malakai Kalamafoni","Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],Gt="Sacrament Bread Assignments",$t=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"}];var Ue=["MO","TU","WE","TH","FR","SA","SU"],P=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Ue.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Ue[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}(),x=function(r){return r!=null},X=function(r){return typeof r=="number"},et=function(r){return typeof r=="string"&&Ue.includes(r)},z=Array.isArray,V=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t},O=function(r,e){var t=0,n=[];if(z(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Xt=function(r){return z(r)?r:[r]};function se(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=O(t,e/t.length)),t.slice(0,e)+String(n))}var Qt=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},B=function(r,e){var t=r%e;return t*e<0?t+e:t},Ye=function(r,e){return{div:Math.floor(r/e),mod:B(r,e)}},Q=function(r){return!x(r)||r.length===0},I=function(r){return!Q(r)},L=function(r,e){return I(r)&&r.indexOf(e)!==-1},ie=function(r,e,t,n,a,i){return n===void 0&&(n=0),a===void 0&&(a=0),i===void 0&&(i=0),new Date(Date.UTC(r,e-1,t,n,a,i))},Jt=[31,28,31,30,31,30,31,31,30,31,30,31],Lt=1e3*60*60*24,At=9999,Ut=ie(1970,1,1),Vt=[6,0,1,2,3,4,5],ye=function(r){return r%4===0&&r%100!==0||r%400===0},xt=function(r){return r instanceof Date},de=function(r){return xt(r)&&!isNaN(r.getTime())},er=function(r,e){var t=r.getTime(),n=e.getTime(),a=t-n;return Math.round(a/Lt)},xe=function(r){return er(r,Ut)},Nt=function(r){return new Date(Ut.getTime()+r*Lt)},tr=function(r){var e=r.getUTCMonth();return e===1&&ye(r.getUTCFullYear())?29:Jt[e]},he=function(r){return Vt[r.getUTCDay()]},tt=function(r,e){var t=ie(r,e+1,1);return[he(t),tr(t)]},It=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Ne=function(r){var e=new Date(r.getTime());return e},rt=function(r){for(var e=[],t=0;t<r.length;t++)e.push(Ne(r[t]));return e},pe=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},Fe=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[se(t.getUTCFullYear().toString(),4,"0"),se(t.getUTCMonth()+1,2,"0"),se(t.getUTCDate(),2,"0"),"T",se(t.getUTCHours(),2,"0"),se(t.getUTCMinutes(),2,"0"),se(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},Ze=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},nt=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},rr=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(nt(r,t)),a=new Date(nt(r,e??"UTC")),i=a.getTime()-n.getTime();return new Date(r.getTime()-i)},oe=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Ie=function(r,e){return Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},Ie(r,e)};function Ge(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ie(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var q=function(){return q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},q.apply(this,arguments)};function y(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var at=function(r){Ge(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.iterator=a,i}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(oe),Se={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},it=function(r,e){return r.indexOf(e)!==-1},nr=function(r){return r.toString()},ar=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},te=function(){function r(e,t,n,a){if(t===void 0&&(t=nr),n===void 0&&(n=Se),a===void 0&&(a=ar),this.text=[],this.language=n||Se,this.gettext=t,this.dateFormatter=a,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),u=[].concat(this.options.bynmonthday);i.sort(function(c,h){return c-h}),u.sort(function(c,h){return h-c}),this.bymonthday=i.concat(u),this.bymonthday.length||(this.bymonthday=null)}if(x(this.origOptions.byweekday)){var o=z(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return!!c.n}),isWeekdays:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")===-1&&s.indexOf("SU")===-1,isEveryDay:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")!==-1&&s.indexOf("SU")!==-1};var f=function(c,h){return c.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(it(["dtstart","tzid","wkst","freq"],n))return!0;if(!it(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[b.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var a=Math.abs(e);switch(a){case 1:case 21:case 31:t=a+n("st");break;case 2:case 22:t=a+n("nd");break;case 3:case 23:t=a+n("rd");break;default:t=a+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=X(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,a){var i=this;a===void 0&&(a=","),z(e)||(e=[e]);var u=function(s,f,c){for(var h="",l=0;l<s.length;l++)l!==0&&(l===s.length-1?h+=" "+c+" ":h+=f+" "),h+=s[l];return h};t=t||function(s){return s.toString()};var o=function(s){return t&&t.call(i,s)};return n?u(e.map(o),a,n):e.map(o).join(a+" ")},r}(),ir=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var a in this.rules){n=this.rules[a];var i=n.exec(this.text);i&&(e===null||i[0].length>e[0].length)&&(e=i,t=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Ct(r,e){e===void 0&&(e=Se);var t={},n=new ir(e.tokens);if(!n.start(r))return null;return a(),t;function a(){n.expect("every");var l=n.acceptNumber();if(l&&(t.interval=parseInt(l[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=b.DAILY,n.nextSymbol()&&(u(),h());break;case"weekday(s)":t.freq=b.WEEKLY,t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR],n.nextSymbol(),u(),h();break;case"week(s)":t.freq=b.WEEKLY,n.nextSymbol()&&(i(),u(),h());break;case"hour(s)":t.freq=b.HOURLY,n.nextSymbol()&&(i(),h());break;case"minute(s)":t.freq=b.MINUTELY,n.nextSymbol()&&(i(),h());break;case"month(s)":t.freq=b.MONTHLY,n.nextSymbol()&&(i(),h());break;case"year(s)":t.freq=b.YEARLY,n.nextSymbol()&&(i(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=b.WEEKLY;var d=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[b[d]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var v=s();if(!v)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(b[v]),n.nextSymbol()}u(),c(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=b.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var p=o();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(p),n.nextSymbol()}i(),h();break;default:throw new Error("Unknown symbol")}}function i(){var l=n.accept("on"),d=n.accept("the");if(l||d)do{var v=f(),p=s(),m=o();if(v)p?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(b[p].nth(v))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(v),n.accept("day(s)"));else if(p)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(b[p]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(E[0],10))}}else if(m)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(m);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function u(){var l=n.accept("at");if(l)do{var d=n.acceptNumber();if(!d)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(d[0],10)];n.accept("comma");){if(d=n.acceptNumber(),!d)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(d[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function s(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var l=parseInt(n.value[1],10);if(l<-366||l>366)throw new Error("Nth out of range: "+l);return n.nextSymbol(),n.accept("last")?-l:l;default:return!1}}function c(){n.accept("on"),n.accept("the");var l=f();if(l)for(t.bymonthday=[l],n.nextSymbol();n.accept("comma");){if(l=f(),!l)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(l),n.nextSymbol()}}function h(){if(n.symbol==="until"){var l=Date.parse(n.text);if(!l)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(l)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var M;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(M||(M={}));function $e(r){return r<M.HOURLY}var sr=function(r,e){return e===void 0&&(e=Se),new b(Ct(r,e)||void 0)},ce=["count","until","interval","byweekday","bymonthday","bymonth"];te.IMPLEMENTED=[];te.IMPLEMENTED[M.HOURLY]=ce;te.IMPLEMENTED[M.MINUTELY]=ce;te.IMPLEMENTED[M.DAILY]=["byhour"].concat(ce);te.IMPLEMENTED[M.WEEKLY]=ce;te.IMPLEMENTED[M.MONTHLY]=ce;te.IMPLEMENTED[M.YEARLY]=["byweekno","byyearday"].concat(ce);var or=function(r,e,t,n){return new te(r,e,t,n).toString()},ur=te.isFullyConvertible,De=function(){function r(e,t,n,a){this.hour=e,this.minute=t,this.second=n,this.millisecond=a||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}(),lr=function(r){Ge(e,r);function e(t,n,a,i,u,o,s){var f=r.call(this,i,u,o,s)||this;return f.year=t,f.month=n,f.day=a,f}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return he(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),a=B(this.month,12);this.month=a,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,a){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var i=Ye(this.hour,24),u=i.div,o=i.mod;if(u&&(this.hour=o,this.addDaily(u)),Q(a)||L(a,this.hour))break}},e.prototype.addMinutes=function(t,n,a,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var u=Ye(this.minute,60),o=u.div,s=u.mod;if(o&&(this.minute=s,this.addHours(o,!1,a)),(Q(a)||L(a,this.hour))&&(Q(i)||L(i,this.minute)))break}},e.prototype.addSeconds=function(t,n,a,i,u){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Ye(this.second,60),s=o.div,f=o.mod;if(s&&(this.second=f,this.addMinutes(s,!1,a,i)),(Q(a)||L(a,this.hour))&&(Q(i)||L(i,this.minute))&&(Q(u)||L(u,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=tt(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>At))return;t=tt(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var a=t.freq,i=t.interval,u=t.wkst,o=t.byhour,s=t.byminute,f=t.bysecond;switch(a){case M.YEARLY:return this.addYears(i);case M.MONTHLY:return this.addMonths(i);case M.WEEKLY:return this.addWeekly(i,u);case M.DAILY:return this.addDaily(i);case M.HOURLY:return this.addHours(i,n,o);case M.MINUTELY:return this.addMinutes(i,n,o,s);case M.SECONDLY:return this.addSeconds(i,n,o,s,f)}},e}(De);function Rt(r){for(var e=[],t=Object.keys(r),n=0,a=t;n<a.length;n++){var i=a[n];L(Hr,i)||e.push(i),xt(r[i])&&!de(r[i])&&e.push(i)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return q({},r)}function fr(r){var e=q(q({},Xe),Rt(r));if(x(e.byeaster)&&(e.freq=b.YEARLY),!(x(e.freq)&&b.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),x(e.wkst)?X(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=b.MO.weekday,x(e.bysetpos)){X(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||I(e.byweekno)||I(e.byyearday)||e.bymonthday||I(e.bymonthday)||x(e.byweekday)||x(e.byeaster)))switch(e.freq){case b.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case b.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case b.WEEKLY:e.byweekday=[he(e.dtstart)];break}if(x(e.bymonth)&&!z(e.bymonth)&&(e.bymonth=[e.bymonth]),x(e.byyearday)&&!z(e.byyearday)&&X(e.byyearday)&&(e.byyearday=[e.byyearday]),!x(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(z(e.bymonthday)){for(var a=[],i=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?a.push(n):n<0&&i.push(n)}e.bymonthday=a,e.bynmonthday=i}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(x(e.byweekno)&&!z(e.byweekno)&&(e.byweekno=[e.byweekno]),!x(e.byweekday))e.bynweekday=null;else if(X(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(et(e.byweekday))e.byweekday=[P.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof P)!e.byweekday.n||e.freq>b.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var u=[],o=[],t=0;t<e.byweekday.length;t++){var s=e.byweekday[t];if(X(s)){u.push(s);continue}else if(et(s)){u.push(P.fromStr(s).weekday);continue}!s.n||e.freq>b.MONTHLY?u.push(s.weekday):o.push([s.weekday,s.n])}e.byweekday=I(u)?u:null,e.bynweekday=I(o)?o:null}return x(e.byhour)?X(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<b.HOURLY?[e.dtstart.getUTCHours()]:null,x(e.byminute)?X(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<b.MINUTELY?[e.dtstart.getUTCMinutes()]:null,x(e.bysecond)?X(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<b.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function hr(r){var e=r.dtstart.getTime()%1e3;if(!$e(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(a){r.bysecond.forEach(function(i){t.push(new De(n,a,i,e))})})}),t}function Ce(r){var e=r.split(`
`).map(cr).filter(function(t){return t!==null});return q(q({},e[0]),e[1])}function Oe(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],a=t[2];return n&&(e.tzid=n),e.dtstart=Ze(a),e}function cr(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return st(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return st(r);case"DTSTART":return Oe(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function st(r){var e=r.replace(/^RRULE:/i,""),t=Oe(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(a){var i=a.split("="),u=i[0],o=i[1];switch(u.toUpperCase()){case"FREQ":t.freq=M[o.toUpperCase()];break;case"WKST":t.wkst=F[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var s=dr(o),f=u.toLowerCase();t[f]=s;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=yr(o);break;case"DTSTART":case"TZID":var c=Oe(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=Ze(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+u+"'")}}),t}function dr(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(ot)}return ot(r)}function ot(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function yr(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return F[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var a=Number(n[1]),i=n[2],u=F[i].weekday;return new P(u,a)})}var Me=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=Fe(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:rr(this.date,this.tzid)},r}();function Re(r){for(var e=[],t="",n=Object.keys(r),a=Object.keys(Xe),i=0;i<n.length;i++)if(n[i]!=="tzid"&&L(a,n[i])){var u=n[i].toUpperCase(),o=r[n[i]],s="";if(!(!x(o)||z(o)&&!o.length)){switch(u){case"FREQ":s=b.FREQUENCIES[r.freq];break;case"WKST":X(o)?s=new P(o).toString():s=o.toString();break;case"BYWEEKDAY":u="BYDAY",s=Xt(o).map(function(d){return d instanceof P?d:z(d)?new P(d[0],d[1]):new P(d)}).toString();break;case"DTSTART":t=mr(o,r.tzid);break;case"UNTIL":s=Fe(o,!r.tzid);break;default:if(z(o)){for(var f=[],c=0;c<o.length;c++)f[c]=String(o[c]);s=f.toString()}else s=String(o)}s&&e.push([u,s])}}var h=e.map(function(d){var v=d[0],p=d[1];return"".concat(v,"=").concat(p.toString())}).join(";"),l="";return h!==""&&(l="RRULE:".concat(h)),[t,l].filter(function(d){return!!d}).join(`
`)}function mr(r,e){return r?"DTSTART"+new Me(new Date(r),e).toString():""}function pr(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var vr=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Ne(t):rt(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,a=t?Object.keys(t):[],i=function(c){for(var h=0;h<a.length;h++){var l=a[h];if(!pr(t[l],c[l]))return!0}return!1},u=this[e];if(e==="all")n=this.all;else if(z(u))for(var o=0;o<u.length;o++){var s=u[o];if(!(a.length&&i(s))){n=s._value;break}}if(!n&&this.all){for(var f=new oe(e,t),o=0;o<this.all.length&&f.accept(this.all[o]);o++);n=f.getValue(),this._cacheAdd(e,n,t)}return z(n)?rt(n):n instanceof Date?Ne(n):n},r}(),br=y(y(y(y(y(y(y(y(y(y(y(y(y([],O(1,31),!0),O(2,28),!0),O(3,31),!0),O(4,30),!0),O(5,31),!0),O(6,30),!0),O(7,31),!0),O(8,31),!0),O(9,30),!0),O(10,31),!0),O(11,30),!0),O(12,31),!0),O(1,7),!0),wr=y(y(y(y(y(y(y(y(y(y(y(y(y([],O(1,31),!0),O(2,29),!0),O(3,31),!0),O(4,30),!0),O(5,31),!0),O(6,30),!0),O(7,31),!0),O(8,31),!0),O(9,30),!0),O(10,31),!0),O(11,30),!0),O(12,31),!0),O(1,7),!0),gr=V(1,29),kr=V(1,30),ne=V(1,31),R=V(1,32),Er=y(y(y(y(y(y(y(y(y(y(y(y(y([],R,!0),kr,!0),R,!0),ne,!0),R,!0),ne,!0),R,!0),R,!0),ne,!0),R,!0),ne,!0),R,!0),R.slice(0,7),!0),_r=y(y(y(y(y(y(y(y(y(y(y(y(y([],R,!0),gr,!0),R,!0),ne,!0),R,!0),ne,!0),R,!0),R,!0),ne,!0),R,!0),ne,!0),R,!0),R.slice(0,7),!0),Tr=V(-28,0),Sr=V(-29,0),ae=V(-30,0),W=V(-31,0),Dr=y(y(y(y(y(y(y(y(y(y(y(y(y([],W,!0),Sr,!0),W,!0),ae,!0),W,!0),ae,!0),W,!0),W,!0),ae,!0),W,!0),ae,!0),W,!0),W.slice(0,7),!0),Or=y(y(y(y(y(y(y(y(y(y(y(y(y([],W,!0),Tr,!0),W,!0),ae,!0),W,!0),ae,!0),W,!0),W,!0),ae,!0),W,!0),ae,!0),W,!0),W.slice(0,7),!0),Mr=[0,31,60,91,121,152,182,213,244,274,305,335,366],Yr=[0,31,59,90,120,151,181,212,243,273,304,334,365],ut=function(){for(var r=[],e=0;e<55;e++)r=r.concat(V(7));return r}();function Lr(r,e){var t=ie(r,1,1),n=ye(r)?366:365,a=ye(r+1)?366:365,i=xe(t),u=he(t),o=q(q({yearlen:n,nextyearlen:a,yearordinal:i,yearweekday:u},Ar(r)),{wnomask:null});if(Q(e.byweekno))return o;o.wnomask=O(0,n+7);var s,f,c=s=B(7-u+e.wkst,7);c>=4?(c=0,f=o.yearlen+B(u-e.wkst,7)):f=n-c;for(var h=Math.floor(f/7),l=B(f,7),d=Math.floor(h+l/4),v=0;v<e.byweekno.length;v++){var p=e.byweekno[v];if(p<0&&(p+=d+1),p>0&&p<=d){var m=void 0;p>1?(m=c+(p-1)*7,c!==s&&(m-=7-s)):m=c;for(var E=0;E<7&&(o.wnomask[m]=1,m++,o.wdaymask[m]!==e.wkst);E++);}}if(L(e.byweekno,1)){var m=c+d*7;if(c!==s&&(m-=7-s),m<n)for(var v=0;v<7&&(o.wnomask[m]=1,m+=1,o.wdaymask[m]!==e.wkst);v++);}if(c){var w=void 0;if(L(e.byweekno,-1))w=-1;else{var Y=he(ie(r-1,1,1)),g=B(7-Y.valueOf()+e.wkst,7),_=ye(r-1)?366:365,k=void 0;g>=4?(g=0,k=_+B(Y-e.wkst,7)):k=n-c,w=Math.floor(52+B(k,7)/4)}if(L(e.byweekno,w))for(var m=0;m<c;m++)o.wnomask[m]=1}return o}function Ar(r){var e=ye(r)?366:365,t=ie(r,1,1),n=he(t);return e===365?{mmask:br,mdaymask:_r,nmdaymask:Or,wdaymask:ut.slice(n),mrange:Yr}:{mmask:wr,mdaymask:Er,nmdaymask:Dr,wdaymask:ut.slice(n),mrange:Mr}}function Ur(r,e,t,n,a,i){var u={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(i.freq===b.YEARLY)if(Q(i.bymonth))o=[[0,t]];else for(var s=0;s<i.bymonth.length;s++)e=i.bymonth[s],o.push(n.slice(e-1,e+1));else i.freq===b.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Q(o))return u;u.nwdaymask=O(0,t);for(var s=0;s<o.length;s++)for(var f=o[s],c=f[0],h=f[1]-1,l=0;l<i.bynweekday.length;l++){var d=void 0,v=i.bynweekday[l],p=v[0],m=v[1];m<0?(d=h+(m+1)*7,d-=B(a[d]-p,7)):(d=c+(m-1)*7,d+=B(7-a[d]+p,7)),c<=d&&d<=h&&(u.nwdaymask[d]=1)}return u}function xr(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),a=r%100,i=Math.floor(n/4),u=n%4,o=Math.floor((n+8)/25),s=Math.floor((n-o+1)/3),f=Math.floor(19*t+n-i-s+15)%30,c=Math.floor(a/4),h=a%4,l=Math.floor(32+2*u+2*c-f-h)%7,d=Math.floor((t+11*f+22*l)/451),v=Math.floor((f+l-7*d+114)/31),p=(f+l-7*d+114)%31+1,m=Date.UTC(r,v-1,p+e),E=Date.UTC(r,0,1);return[Math.ceil((m-E)/(1e3*60*60*24))]}var Nr=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Lr(e,n)),I(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var a=this.yearinfo,i=a.yearlen,u=a.mrange,o=a.wdaymask;this.monthinfo=Ur(e,t,i,u,o,n)}x(n.byeaster)&&(this.eastermask=xr(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[V(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],a=this.mrange[t],i=O(null,this.yearlen),u=n;u<a;u++)i[u]=u;return[i,n,a]},r.prototype.wdayset=function(e,t,n){for(var a=O(null,this.yearlen+7),i=xe(ie(e,t,n))-this.yearordinal,u=i,o=0;o<7&&(a[i]=i,++i,this.wdaymask[i]!==this.options.wkst);o++);return[a,u,i]},r.prototype.ddayset=function(e,t,n){var a=O(null,this.yearlen),i=xe(ie(e,t,n))-this.yearordinal;return a[i]=i,[a,i,i+1]},r.prototype.htimeset=function(e,t,n,a){var i=this,u=[];return this.options.byminute.forEach(function(o){u=u.concat(i.mtimeset(e,o,n,a))}),pe(u),u},r.prototype.mtimeset=function(e,t,n,a){var i=this.options.bysecond.map(function(u){return new De(e,t,u,a)});return pe(i),i},r.prototype.stimeset=function(e,t,n,a){return[new De(e,t,n,a)]},r.prototype.getdayset=function(e){switch(e){case M.YEARLY:return this.ydayset.bind(this);case M.MONTHLY:return this.mdayset.bind(this);case M.WEEKLY:return this.wdayset.bind(this);case M.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case M.HOURLY:return this.htimeset.bind(this);case M.MINUTELY:return this.mtimeset.bind(this);case M.SECONDLY:return this.stimeset.bind(this)}},r}();function Ir(r,e,t,n,a,i){for(var u=[],o=0;o<r.length;o++){var s=void 0,f=void 0,c=r[o];c<0?(s=Math.floor(c/e.length),f=B(c,e.length)):(s=Math.floor((c-1)/e.length),f=B(c-1,e.length));for(var h=[],l=t;l<n;l++){var d=i[l];x(d)&&h.push(d)}var v=void 0;s<0?v=h.slice(s)[0]:v=h[s];var p=e[f],m=Nt(a.yearordinal+v),E=It(m,p);L(u,E)||u.push(E)}return pe(u),u}function Wt(r,e){var t=e.dtstart,n=e.freq,a=e.interval,i=e.until,u=e.bysetpos,o=e.count;if(o===0||a===0)return ee(r);var s=lr.fromDate(t),f=new Nr(e);f.rebuild(s.year,s.month);for(var c=Wr(f,s,e);;){var h=f.getdayset(n)(s.year,s.month,s.day),l=h[0],d=h[1],v=h[2],p=Rr(l,d,v,f,e);if(I(u))for(var m=Ir(u,c,d,v,f,l),E=0;E<m.length;E++){var w=m[E];if(i&&w>i)return ee(r);if(w>=t){var Y=lt(w,e);if(!r.accept(Y)||o&&(--o,!o))return ee(r)}}else for(var E=d;E<v;E++){var g=l[E];if(x(g))for(var _=Nt(f.yearordinal+g),k=0;k<c.length;k++){var D=c[k],w=It(_,D);if(i&&w>i)return ee(r);if(w>=t){var Y=lt(w,e);if(!r.accept(Y)||o&&(--o,!o))return ee(r)}}}if(e.interval===0||(s.add(e,p),s.year>At))return ee(r);$e(n)||(c=f.gettimeset(n)(s.hour,s.minute,s.second,0)),f.rebuild(s.year,s.month)}}function Cr(r,e,t){var n=t.bymonth,a=t.byweekno,i=t.byweekday,u=t.byeaster,o=t.bymonthday,s=t.bynmonthday,f=t.byyearday;return I(n)&&!L(n,r.mmask[e])||I(a)&&!r.wnomask[e]||I(i)&&!L(i,r.wdaymask[e])||I(r.nwdaymask)&&!r.nwdaymask[e]||u!==null&&!L(r.eastermask,e)||(I(o)||I(s))&&!L(o,r.mdaymask[e])&&!L(s,r.nmdaymask[e])||I(f)&&(e<r.yearlen&&!L(f,e+1)&&!L(f,-r.yearlen+e)||e>=r.yearlen&&!L(f,e+1-r.yearlen)&&!L(f,-r.nextyearlen+e-r.yearlen))}function lt(r,e){return new Me(r,e.tzid).rezonedDate()}function ee(r){return r.getValue()}function Rr(r,e,t,n,a){for(var i=!1,u=e;u<t;u++){var o=r[u];i=Cr(n,o,a),i&&(r[o]=null)}return i}function Wr(r,e,t){var n=t.freq,a=t.byhour,i=t.byminute,u=t.bysecond;return $e(n)?hr(t):n>=b.HOURLY&&I(a)&&!L(a,e.hour)||n>=b.MINUTELY&&I(i)&&!L(i,e.minute)||n>=b.SECONDLY&&I(u)&&!L(u,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var F={MO:new P(0),TU:new P(1),WE:new P(2),TH:new P(3),FR:new P(4),SA:new P(5),SU:new P(6)},Xe={freq:M.YEARLY,dtstart:null,interval:1,wkst:F.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Hr=Object.keys(Xe),b=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new vr,this.origOptions=Rt(e);var n=fr(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Ct(e,t)},r.fromText=function(e,t){return sr(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Wt(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new at("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new oe("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,a){if(n===void 0&&(n=!1),!de(e)||!de(t))throw new Error("Invalid date passed in to RRule.between");var i={before:t,after:e,inc:n};if(a)return this._iter(new at("between",i,a));var u=this._cacheGet("between",i);return u===!1&&(u=this._iter(new oe("between",i)),this._cacheAdd("between",u,i)),u},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!de(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},a=this._cacheGet("before",n);return a===!1&&(a=this._iter(new oe("before",n)),this._cacheAdd("before",a,n)),a},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!de(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},a=this._cacheGet("after",n);return a===!1&&(a=this._iter(new oe("after",n)),this._cacheAdd("after",a,n)),a},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Re(this.origOptions)},r.prototype.toText=function(e,t,n){return or(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return ur(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=M.YEARLY,r.MONTHLY=M.MONTHLY,r.WEEKLY=M.WEEKLY,r.DAILY=M.DAILY,r.HOURLY=M.HOURLY,r.MINUTELY=M.MINUTELY,r.SECONDLY=M.SECONDLY,r.MO=F.MO,r.TU=F.TU,r.WE=F.WE,r.TH=F.TH,r.FR=F.FR,r.SA=F.SA,r.SU=F.SU,r.parseString=Ce,r.optionsToString=Re,r}();function Pr(r,e,t,n,a,i){var u={},o=r.accept;function s(l,d){t.forEach(function(v){v.between(l,d,!0).forEach(function(p){u[Number(p)]=!0})})}a.forEach(function(l){var d=new Me(l,i).rezonedDate();u[Number(d)]=!0}),r.accept=function(l){var d=Number(l);return isNaN(d)?o.call(this,l):!u[d]&&(s(new Date(d-1),new Date(d+1)),!u[d])?(u[d]=!0,o.call(this,l)):!0},r.method==="between"&&(s(r.args.after,r.args.before),r.accept=function(l){var d=Number(l);return u[d]?!0:(u[d]=!0,o.call(this,l))});for(var f=0;f<n.length;f++){var c=new Me(n[f],i).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(l){Wt(r,l.options)});var h=r._result;switch(pe(h),r.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var ft={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function jr(r,e){var t=[],n=[],a=[],i=[],u=Oe(r),o=u.dtstart,s=u.tzid,f=Fr(r,e.unfold);return f.forEach(function(c){var h;if(c){var l=Br(c),d=l.name,v=l.parms,p=l.value;switch(d.toUpperCase()){case"RRULE":if(v.length)throw new Error("unsupported RRULE parm: ".concat(v.join(",")));t.push(Ce(c));break;case"RDATE":var m=(h=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&h!==void 0?h:[],E=m[1];E&&!s&&(s=E),n=n.concat(ct(p,v));break;case"EXRULE":if(v.length)throw new Error("unsupported EXRULE parm: ".concat(v.join(",")));a.push(Ce(p));break;case"EXDATE":i=i.concat(ct(p,v));break;case"DTSTART":break;default:throw new Error("unsupported property: "+d)}}}),{dtstart:o,tzid:s,rrulevals:t,rdatevals:n,exrulevals:a,exdatevals:i}}function Kr(r,e){var t=jr(r,e),n=t.rrulevals,a=t.rdatevals,i=t.exrulevals,u=t.exdatevals,o=t.dtstart,s=t.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||a.length||i.length||u.length){var c=new Gr(f);return c.dtstart(o),c.tzid(s||void 0),n.forEach(function(l){c.rrule(new b(Le(l,o,s),f))}),a.forEach(function(l){c.rdate(l)}),i.forEach(function(l){c.exrule(new b(Le(l,o,s),f))}),u.forEach(function(l){c.exdate(l)}),e.compatible&&e.dtstart&&c.rdate(o),c}var h=n[0]||{};return new b(Le(h,h.dtstart||e.dtstart||o,h.tzid||e.tzid||s),f)}function ht(r,e){return e===void 0&&(e={}),Kr(r,zr(e))}function Le(r,e,t){return q(q({},r),{dtstart:e,tzid:t})}function zr(r){var e=[],t=Object.keys(r),n=Object.keys(ft);if(t.forEach(function(a){L(n,a)||e.push(a)}),e.length)throw new Error("Invalid options: "+e.join(", "));return q(q({},ft),r)}function qr(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Qt(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Br(r){var e=qr(r),t=e.name,n=e.value,a=t.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:n}}function Fr(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var a=t[n]=t[n].replace(/\s+$/g,"");a?n>0&&a[0]===" "?(t[n-1]+=a.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Zr(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function ct(r,e){return Zr(e),r.split(",").map(function(t){return Ze(t)})}function dt(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var a=e._rrule[n].origOptions[r];if(a)return a}}}var Gr=function(r){Ge(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=dt.apply(n,["dtstart"]),n.tzid=dt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Pr(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){yt(t,this._rrule)},e.prototype.exrule=function(t){yt(t,this._exrule)},e.prototype.rdate=function(t){mt(t,this._rdate)},e.prototype.exdate=function(t){mt(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return ht(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return ht(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Re({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(a){return a.replace(/^RRULE:/,"EXRULE:")}).filter(function(a){return!/^DTSTART/.test(a)}))}),this._rdate.length&&t.push(pt("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(pt("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(b);function yt(r,e){if(!(r instanceof b))throw new TypeError(String(r)+" is not RRule instance");L(e.map(String),String(r))||e.push(r)}function mt(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");L(e.map(Number),Number(r))||(e.push(r),pe(e))}function pt(r,e,t){var n=!t||t.toUpperCase()==="UTC",a=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),i=e.map(function(u){return Fe(u.valueOf(),n)}).join(",");return"".concat(a).concat(i)}const $r={Sundays:({start_date:r,until:e})=>new b({freq:b.WEEKLY,dtstart:r,until:e,byweekday:[b.SU]})},Xr=(r,e)=>r(e).all(),Qr=r=>{const e=r.getMonth(),t=r.getFullYear();let n=0;for(let a=1;a<=31;a++){const i=new Date(t,e,a);if(i.getMonth()!==e)break;if(i.getDay()===0&&(n++,i.getDate()===r.getDate())){const u=["st","nd","rd","th"],o=n<=3?u[n-1]:u[3];return`${n}${o}`}}return""},Jr=qt([]);async function Ht(r){const{data:e,error:t}=await Yt.from("assignments").select("*").eq("list_name",r).order("date");if(t)throw t;const n=e||[];return Jr.set(n),n}async function Vr(r,e,t){const{error:n}=await Yt.from("assignments").upsert([{list_name:r,date:e,overridden_member:t,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(n)throw n;await Ht(r)}function vt(r,e,t){const n=r.slice();return n[13]=e[t],n[14]=e,n[15]=t,n}function bt(r,e,t){const n=r.slice();return n[16]=e[t],n}function en(r){let e,t=re(r[13].date,"MMM dd")+"",n,a,i,u=r[13].sundayNumber+"",o,s,f=re(r[13].date,"EEEE")+"",c,h,l,d,v,p=(r[13].overridden_member?r[13].overridden_member:r[13].member)+"",m,E,w=r[13].overridden_member?"*":"",Y,g,_=r[0]&&wt();return{c(){e=U("td"),n=G(t),a=K(),i=U("small"),o=G(u),s=K(),c=G(f),h=K(),l=U("td"),d=U("div"),v=U("span"),m=G(p),E=K(),Y=G(w),g=K(),_&&_.c(),this.h()},l(k){e=A(k,"TD",{});var D=N(e);n=Z(D,t),a=j(D),i=A(D,"SMALL",{class:!0});var $=N(i);o=Z($,u),s=j($),c=Z($,f),$.forEach(T),D.forEach(T),h=j(k),l=A(k,"TD",{});var ve=N(l);d=A(ve,"DIV",{class:!0});var be=N(d);v=A(be,"SPAN",{});var we=N(v);m=Z(we,p),E=j(we),Y=Z(we,w),we.forEach(T),g=j(be),_&&_.l(be),be.forEach(T),ve.forEach(T),this.h()},h(){H(i,"class","fw-lighter"),H(d,"class","d-flex justify-content-between")},m(k,D){C(k,e,D),S(e,n),S(e,a),S(e,i),S(i,o),S(i,s),S(i,c),C(k,h,D),C(k,l,D),S(l,d),S(d,v),S(v,m),S(v,E),S(v,Y),S(d,g),_&&_.m(d,null)},p(k,D){D&4&&t!==(t=re(k[13].date,"MMM dd")+"")&&J(n,t),D&4&&u!==(u=k[13].sundayNumber+"")&&J(o,u),D&4&&f!==(f=re(k[13].date,"EEEE")+"")&&J(c,f),D&4&&p!==(p=(k[13].overridden_member?k[13].overridden_member:k[13].member)+"")&&J(m,p),D&4&&w!==(w=k[13].overridden_member?"*":"")&&J(Y,w),k[0]?_||(_=wt(),_.c(),_.m(d,null)):_&&(_.d(1),_=null)},d(k){k&&(T(e),T(h),T(l)),_&&_.d()}}}function tn(r){let e,t=re(r[13].date,"MMM dd")+"",n,a,i,u=r[13].sundayNumber+"",o,s,f=re(r[13].date,"EEEE")+"",c,h,l,d=(r[13].event??"")+"",v,p,m,E,w,Y="No Sacrament Services";return{c(){e=U("td"),n=G(t),a=K(),i=U("small"),o=G(u),s=K(),c=G(f),h=K(),l=U("td"),v=G(d),p=K(),m=U("br"),E=K(),w=U("small"),w.textContent=Y,this.h()},l(g){e=A(g,"TD",{});var _=N(e);n=Z(_,t),a=j(_),i=A(_,"SMALL",{class:!0});var k=N(i);o=Z(k,u),s=j(k),c=Z(k,f),k.forEach(T),_.forEach(T),h=j(g),l=A(g,"TD",{});var D=N(l);v=Z(D,d),p=j(D),m=A(D,"BR",{}),E=j(D),w=A(D,"SMALL",{class:!0,"data-svelte-h":!0}),ge(w)!=="svelte-2r8039"&&(w.textContent=Y),D.forEach(T),this.h()},h(){H(i,"class","fw-lighter"),H(w,"class","fw-lighter")},m(g,_){C(g,e,_),S(e,n),S(e,a),S(e,i),S(i,o),S(i,s),S(i,c),C(g,h,_),C(g,l,_),S(l,v),S(l,p),S(l,m),S(l,E),S(l,w)},p(g,_){_&4&&t!==(t=re(g[13].date,"MMM dd")+"")&&J(n,t),_&4&&u!==(u=g[13].sundayNumber+"")&&J(o,u),_&4&&f!==(f=re(g[13].date,"EEEE")+"")&&J(c,f),_&4&&d!==(d=(g[13].event??"")+"")&&J(v,d)},d(g){g&&(T(e),T(h),T(l))}}}function wt(r){let e;return{c(){e=U("i"),this.h()},l(t){e=A(t,"I",{class:!0}),N(e).forEach(T),this.h()},h(){H(e,"class","bi bi-pencil-square")},m(t,n){C(t,e,n)},d(t){t&&T(e)}}}function gt(r){let e,t,n,a,i="Change assignment to:",u,o,s,f="None",c,h,l,d,v=fe(r[1]),p=[];for(let w=0;w<v.length;w+=1)p[w]=Et(bt(r,v,w));function m(){r[9].call(o,r[14],r[15])}function E(){return r[10](r[13],r[15])}return{c(){e=U("tr"),t=U("td"),n=U("div"),a=U("div"),a.textContent=i,u=K(),o=U("select"),s=U("option"),s.textContent=f;for(let w=0;w<p.length;w+=1)p[w].c();c=K(),this.h()},l(w){e=A(w,"TR",{class:!0});var Y=N(e);t=A(Y,"TD",{colspan:!0});var g=N(t);n=A(g,"DIV",{class:!0});var _=N(n);a=A(_,"DIV",{"data-svelte-h":!0}),ge(a)!=="svelte-1t5xiq"&&(a.textContent=i),u=j(_),o=A(_,"SELECT",{class:!0});var k=N(o);s=A(k,"OPTION",{"data-svelte-h":!0}),ge(s)!=="svelte-1vbnolo"&&(s.textContent=f);for(let D=0;D<p.length;D+=1)p[D].l(k);k.forEach(T),_.forEach(T),g.forEach(T),c=j(Y),Y.forEach(T),this.h()},h(){s.__value="",_e(s,s.__value),H(o,"class","form-select form-control-sm"),r[13].overridden_member===void 0&&Ot(m),H(n,"class","d-flex flex-column gap-2 p-2"),H(t,"colspan","2"),H(e,"class",h=r[3][`row-${r[15]}`]?"table-secondary":"d-none")},m(w,Y){C(w,e,Y),S(e,t),S(t,n),S(n,a),S(n,u),S(n,o),S(o,s);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(o,null);Ee(o,r[13].overridden_member,!0),S(e,c),l||(d=[ke(o,"change",m),ke(o,"change",E)],l=!0)},p(w,Y){if(r=w,Y&6){v=fe(r[1]);let g;for(g=0;g<v.length;g+=1){const _=bt(r,v,g);p[g]?p[g].p(_,Y):(p[g]=Et(_),p[g].c(),p[g].m(o,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=v.length}Y&6&&Ee(o,r[13].overridden_member),Y&8&&h!==(h=r[3][`row-${r[15]}`]?"table-secondary":"d-none")&&H(e,"class",h)},d(w){w&&T(e),je(p,w),l=!1,Pt(d)}}}function kt(r){let e,t=r[16]+"",n,a;return{c(){e=U("option"),n=G(t),this.h()},l(i){e=A(i,"OPTION",{});var u=N(e);n=Z(u,t),u.forEach(T),this.h()},h(){e.__value=a=r[16],_e(e,e.__value)},m(i,u){C(i,e,u),S(e,n)},p(i,u){u&2&&t!==(t=i[16]+"")&&J(n,t),u&2&&a!==(a=i[16])&&(e.__value=a,_e(e,e.__value))},d(i){i&&T(e)}}}function Et(r){let e,t=r[16]!==r[13].member&&kt(r);return{c(){t&&t.c(),e=le()},l(n){t&&t.l(n),e=le()},m(n,a){t&&t.m(n,a),C(n,e,a)},p(n,a){n[16]!==n[13].member?t?t.p(n,a):(t=kt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&T(e),t&&t.d(n)}}}function _t(r){let e,t,n,a,i,u;function o(l,d){return l[13]?.event?tn:en}let s=o(r),f=s(r);function c(){return r[8](r[15])}let h=r[0]&&gt(r);return{c(){e=U("tr"),f.c(),n=K(),h&&h.c(),a=le(),this.h()},l(l){e=A(l,"TR",{class:!0});var d=N(e);f.l(d),d.forEach(T),n=j(l),h&&h.l(l),a=le(),this.h()},h(){H(e,"class",t=r[13].member===null?"table-secondary":"")},m(l,d){C(l,e,d),f.m(e,null),C(l,n,d),h&&h.m(l,d),C(l,a,d),i||(u=ke(e,"click",c),i=!0)},p(l,d){r=l,s===(s=o(r))&&f?f.p(r,d):(f.d(1),f=s(r),f&&(f.c(),f.m(e,null))),d&6&&t!==(t=r[13].member===null?"table-secondary":"")&&H(e,"class",t),r[0]?h?h.p(r,d):(h=gt(r),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null)},d(l){l&&(T(e),T(n),T(a)),f.d(),h&&h.d(l),i=!1,u()}}}function rn(r){let e,t,n,a='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',i,u,o=fe(r[2]),s=[];for(let f=0;f<o.length;f+=1)s[f]=_t(vt(r,o,f));return{c(){e=U("div"),t=U("table"),n=U("thead"),n.innerHTML=a,i=K(),u=U("tbody");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=A(f,"DIV",{class:!0});var c=N(e);t=A(c,"TABLE",{class:!0});var h=N(t);n=A(h,"THEAD",{class:!0,"data-svelte-h":!0}),ge(n)!=="svelte-1c8l31s"&&(n.innerHTML=a),i=j(h),u=A(h,"TBODY",{});var l=N(u);for(let d=0;d<s.length;d+=1)s[d].l(l);l.forEach(T),h.forEach(T),c.forEach(T),this.h()},h(){H(n,"class","table-dark"),H(t,"class","table"),H(e,"class","table-responsive")},m(f,c){C(f,e,c),S(e,t),S(t,n),S(t,i),S(t,u);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(u,null)},p(f,[c]){if(c&63){o=fe(f[2]);let h;for(h=0;h<o.length;h+=1){const l=vt(f,o,h);s[h]?s[h].p(l,c):(s[h]=_t(l),s[h].c(),s[h].m(u,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=o.length}},i:Ae,o:Ae,d(f){f&&T(e),je(s,f)}}}function nn(r,e,t){let{editable:n=!1}=e,{listName:a="Some List"}=e,{names:i=[]}=e,{excludedDates:u=[]}=e,o=[],s=[];const f=async(m=new Date(2025,0,1,0,0,0),E=new Date(2025,11,31,0,0,0))=>{const w={start_date:m,until:E};o=Xr($r.Sundays,w);const Y=new Date;Y.setHours(0,0,0,0);const g=o.map((k,D)=>{const $=u.find(ve=>Ve(k,ve.date));return{member:$?null:i[D%i.length],date:k,sundayNumber:Qr(k),event:$?$.event:void 0,overridden_member:null}}).filter(k=>k.date>=Y),_=await Ht(a);return g.map(k=>{const D=_.find($=>Ve(new Date($.date),k.date));return{...k,overridden_member:D?D.overridden_member:null}})},c=m=>{n&&t(3,l[`row-${m}`]=!l[`row-${m}`],l)},h=async(m,E)=>{const w=m.overridden_member||null;await Vr(a,m.date.toISOString(),w),t(3,l[E]=!l[E],l)},l={},d=m=>c(m);function v(m,E){m[E].overridden_member=Mt(this),t(2,s),t(1,i)}const p=(m,E)=>h(m,`row-${E}`);return r.$$set=m=>{"editable"in m&&t(0,n=m.editable),"listName"in m&&t(6,a=m.listName),"names"in m&&t(1,i=m.names),"excludedDates"in m&&t(7,u=m.excludedDates)},f().then(m=>{t(2,s=m)}),[n,i,s,l,c,h,a,u,d,v,p]}class an extends He{constructor(e){super(),Pe(this,e,nn,rn,We,{editable:0,listName:6,names:1,excludedDates:7})}}function Tt(r,e,t){const n=r.slice();return n[7]=e[t],n}function St(r){let e,t=r[7]+"",n;return{c(){e=U("option"),n=G(t),this.h()},l(a){e=A(a,"OPTION",{});var i=N(e);n=Z(i,t),i.forEach(T),this.h()},h(){e.__value=r[7],_e(e,e.__value)},m(a,i){C(a,e,i),S(e,n)},p:Ae,d(a){a&&T(e)}}}function Dt(r){let e,t;return e=new an({props:{editable:r[1]||r[2],listName:Gt,names:Zt,excludedDates:$t}}),{c(){Be(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,a){ze(e,n,a),t=!0},p(n,a){const i={};a&6&&(i.editable=n[1]||n[2]),e.$set(i)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){me(e.$$.fragment,n),t=!1},d(n){Ke(e,n)}}}function sn(r){let e,t,n,a,i,u,o=fe(r[5]),s=[];for(let c=0;c<o.length;c+=1)s[c]=St(Tt(r,o,c));let f=r[0]===Te.SacramentBreadAssignments&&Dt(r);return{c(){e=U("select");for(let c=0;c<s.length;c+=1)s[c].c();t=K(),f&&f.c(),n=le(),this.h()},l(c){e=A(c,"SELECT",{class:!0});var h=N(e);for(let l=0;l<s.length;l+=1)s[l].l(h);h.forEach(T),t=j(c),f&&f.l(c),n=le(),this.h()},h(){H(e,"class","form-select form-control-sm"),r[0]===void 0&&Ot(()=>r[6].call(e))},m(c,h){C(c,e,h);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);Ee(e,r[0],!0),C(c,t,h),f&&f.m(c,h),C(c,n,h),a=!0,i||(u=ke(e,"change",r[6]),i=!0)},p(c,[h]){if(h&32){o=fe(c[5]);let l;for(l=0;l<o.length;l+=1){const d=Tt(c,o,l);s[l]?s[l].p(d,h):(s[l]=St(d),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}h&33&&Ee(e,c[0]),c[0]===Te.SacramentBreadAssignments?f?(f.p(c,h),h&1&&ue(f,1)):(f=Dt(c),f.c(),ue(f,1),f.m(n.parentNode,n)):f&&(jt(),me(f,1,1,()=>{f=null}),Kt())},i(c){a||(ue(f),a=!0)},o(c){me(f),a=!1},d(c){c&&(T(e),T(t),T(n)),je(s,c),f&&f.d(c),i=!1,u()}}}function on(r,e,t){let n,a;const{stores:{currentUserIsRootOrAdmin:i,currentUserIsTeachersQuorum:u}}=Bt();Qe(r,i,c=>t(1,n=c)),Qe(r,u,c=>t(2,a=c));let o=Te.SacramentBreadAssignments;const s=Object.values(Te);function f(){o=Mt(this),t(0,o),t(5,s)}return[o,n,a,i,u,s,f]}class un extends He{constructor(e){super(),Pe(this,e,on,sn,We,{})}}function ln(r){let e,t;return e=new un({}),{c(){Be(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,a){ze(e,n,a),t=!0},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){me(e.$$.fragment,n),t=!1},d(n){Ke(e,n)}}}function fn(r){let e,t;return e=new zt({props:{pageTitle:"Assignments",$$slots:{default:[ln]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,a){ze(e,n,a),t=!0},p(n,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(ue(e.$$.fragment,n),t=!0)},o(n){me(e.$$.fragment,n),t=!1},d(n){Ke(e,n)}}}class wn extends He{constructor(e){super(),Pe(this,e,null,fn,We,{})}}export{wn as component,bn as universal};
