import{s as we,n as H,d as m,r as Oe,i as C,b as _,E as se,p,c as v,e as w,K as Z,g as O,h as b,j as P,M as X,a as J,f as N,t as T,k as ge,x as ot,U as it,y as ye}from"../chunks/C6FTwzLu.js";import{S as De,i as Ce,d as ie,t as A,a as M,g as ne,e as re,m as ce,c as fe,b as ue}from"../chunks/D5_vdDhk.js";import{P as ct}from"../chunks/BBMERNAY.js";import{s as ft,d as ut,A as dt,E as _t}from"../chunks/DRBN2wmZ.js";import{e as ht,g as mt,s as Ee,f as Se,A as pt,d as vt,b as bt,E as kt}from"../chunks/C2TJjA8K.js";import{e as me,u as Ie,o as Me}from"../chunks/BM2VE6Iz.js";import{g as gt,F as yt}from"../chunks/CTcOYAMq.js";import{d as $e}from"../chunks/CC62lZhn.js";import{S as Et}from"../chunks/D19aFHe-.js";import{D as wt,v as Dt}from"../chunks/BDi5ZCyj.js";import{p as he,U as Ct,d as It,f as de}from"../chunks/SQixOUIh.js";function Mt(c,e){return ht(c,-e)}const Nt=!0,ul=Object.freeze(Object.defineProperty({__proto__:null,prerender:Nt},Symbol.toStringTag,{value:"Module"}));function Tt(c){let e,t,l=c[0]>0&&Ae(c),n=c[1]>0&&Re(c);return{c(){l&&l.c(),e=P(),n&&n.c(),t=X()},l(r){l&&l.l(r),e=O(r),n&&n.l(r),t=X()},m(r,f){l&&l.m(r,f),C(r,e,f),n&&n.m(r,f),C(r,t,f)},p(r,f){r[0]>0?l?l.p(r,f):(l=Ae(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),r[1]>0?n?n.p(r,f):(n=Re(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&(m(e),m(t)),l&&l.d(r),n&&n.d(r)}}}function St(c){let e,t="No past events to delete.";return{c(){e=b("p"),e.textContent=t,this.h()},l(l){e=v(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-ggk98f"&&(e.textContent=t),this.h()},h(){p(e,"class","mb-0")},m(l,n){C(l,e,n)},p:H,d(l){l&&m(e)}}}function Ae(c){let e,t,l,n,r,f=c[0]===1?"":"s",i,s;return{c(){e=b("p"),t=b("strong"),l=T("✓ Deleted "),n=T(c[0]),r=T(" past event"),i=T(f),s=T("."),this.h()},l(o){e=v(o,"P",{class:!0});var a=w(e);t=v(a,"STRONG",{});var u=w(t);l=N(u,"✓ Deleted "),n=N(u,c[0]),r=N(u," past event"),i=N(u,f),s=N(u,"."),u.forEach(m),a.forEach(m),this.h()},h(){p(e,"class","mb-2")},m(o,a){C(o,e,a),_(e,t),_(t,l),_(t,n),_(t,r),_(t,i),_(t,s)},p(o,a){a&1&&J(n,o[0]),a&1&&f!==(f=o[0]===1?"":"s")&&J(i,f)},d(o){o&&m(e)}}}function Re(c){let e,t,l,n,r,f,i=c[1]===1?"":"s",s,o,a,u=`These recurring events have active future instances and cannot be deleted until all
								future occurrences have passed.`;return{c(){e=b("div"),t=b("p"),l=b("strong"),n=T("⚠ Skipped "),r=T(c[1]),f=T(" recurring event"),s=T(i),o=P(),a=b("p"),a.textContent=u,this.h()},l(d){e=v(d,"DIV",{class:!0,role:!0});var h=w(e);t=v(h,"P",{class:!0});var k=w(t);l=v(k,"STRONG",{});var D=w(l);n=N(D,"⚠ Skipped "),r=N(D,c[1]),f=N(D," recurring event"),s=N(D,i),D.forEach(m),k.forEach(m),o=O(h),a=v(h,"P",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-14o7gwb"&&(a.textContent=u),h.forEach(m),this.h()},h(){p(t,"class","mb-2"),p(a,"class","mb-0 small"),p(e,"class","alert alert-warning mb-0"),p(e,"role","alert")},m(d,h){C(d,e,h),_(e,t),_(t,l),_(l,n),_(l,r),_(l,f),_(l,s),_(e,o),_(e,a)},p(d,h){h&2&&J(r,d[1]),h&2&&i!==(i=d[1]===1?"":"s")&&J(s,i)},d(d){d&&m(e)}}}function Ot(c){let e,t,l,n,r,f="Delete Past Events - Results",i,s,o,a,u,d,h,k="OK",D,S;function I(g,y){return g[0]===0&&g[1]===0?St:Tt}let F=I(c),W=F(c);return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),r=b("h5"),r.textContent=f,i=P(),s=b("button"),o=P(),a=b("div"),W.c(),u=P(),d=b("div"),h=b("button"),h.textContent=k,this.h()},l(g){e=v(g,"DIV",{class:!0,tabindex:!0});var y=w(e);t=v(y,"DIV",{class:!0});var U=w(t);l=v(U,"DIV",{class:!0});var G=w(l);n=v(G,"DIV",{class:!0});var R=w(n);r=v(R,"H5",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-vyl7za"&&(r.textContent=f),i=O(R),s=v(R,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(s).forEach(m),R.forEach(m),o=O(G),a=v(G,"DIV",{class:!0});var K=w(a);W.l(K),K.forEach(m),u=O(G),d=v(G,"DIV",{class:!0});var j=w(d);h=v(j,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Z(h)!=="svelte-x31r0n"&&(h.textContent=k),j.forEach(m),G.forEach(m),U.forEach(m),y.forEach(m),this.h()},h(){p(r,"class","modal-title"),p(s,"type","button"),p(s,"class","btn-close btn-close-white"),p(s,"aria-label","Close"),p(n,"class","modal-header bg-primary text-white"),p(a,"class","modal-body"),p(h,"type","button"),p(h,"class","btn btn-primary"),p(d,"class","modal-footer"),p(l,"class","modal-content"),p(t,"class","modal-dialog"),p(e,"class","modal svelte-1s1xr1"),p(e,"tabindex","-1")},m(g,y){C(g,e,y),_(e,t),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(l,o),_(l,a),W.m(a,null),_(l,u),_(l,d),_(d,h),D||(S=[se(s,"click",c[2]),se(h,"click",c[2])],D=!0)},p(g,[y]){F===(F=I(g))&&W?W.p(g,y):(W.d(1),W=F(g),W&&(W.c(),W.m(a,null)))},i:H,o:H,d(g){g&&m(e),W.d(),D=!1,Oe(S)}}}function Pt(c,e,t){let{deleted:l}=e,{skipped:n}=e,{callback:r}=e;function f(){r()}return c.$$set=i=>{"deleted"in i&&t(0,l=i.deleted),"skipped"in i&&t(1,n=i.skipped),"callback"in i&&t(3,r=i.callback)},[l,n,f,r]}class Vt extends De{constructor(e){super(),Ce(this,e,Pt,Ot,we,{deleted:0,skipped:1,callback:3})}}function $t(c){let e,t,l,n,r,f="Delete Past Events",i,s,o,a,u,d,h,k,D,S,I,F=`This action cannot be undone. Recurring events with future instances will be skipped
					automatically.`,W,g,y,U="Cancel",G,R,K="Delete",j,Q;return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),r=b("h5"),r.textContent=f,i=P(),s=b("button"),o=P(),a=b("div"),u=b("p"),d=b("strong"),h=T("Are you sure you want to delete all events that occurred before "),k=T(c[0]),D=T("?"),S=P(),I=b("p"),I.textContent=F,W=P(),g=b("div"),y=b("button"),y.textContent=U,G=P(),R=b("button"),R.textContent=K,this.h()},l(x){e=v(x,"DIV",{class:!0,tabindex:!0});var ee=w(e);t=v(ee,"DIV",{class:!0});var B=w(t);l=v(B,"DIV",{class:!0});var V=w(l);n=v(V,"DIV",{class:!0});var L=w(n);r=v(L,"H5",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-1q5kfxz"&&(r.textContent=f),i=O(L),s=v(L,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(s).forEach(m),L.forEach(m),o=O(V),a=v(V,"DIV",{class:!0});var te=w(a);u=v(te,"P",{class:!0});var Y=w(u);d=v(Y,"STRONG",{});var z=w(d);h=N(z,"Are you sure you want to delete all events that occurred before "),k=N(z,c[0]),D=N(z,"?"),z.forEach(m),Y.forEach(m),S=O(te),I=v(te,"P",{class:!0,"data-svelte-h":!0}),Z(I)!=="svelte-xypebr"&&(I.textContent=F),te.forEach(m),W=O(V),g=v(V,"DIV",{class:!0});var ae=w(g);y=v(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Z(y)!=="svelte-82sh3j"&&(y.textContent=U),G=O(ae),R=v(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Z(R)!=="svelte-1iqa8gj"&&(R.textContent=K),ae.forEach(m),V.forEach(m),B.forEach(m),ee.forEach(m),this.h()},h(){p(r,"class","modal-title"),p(s,"type","button"),p(s,"class","btn-close btn-close-white"),p(s,"aria-label","Close"),p(n,"class","modal-header bg-danger text-white"),p(u,"class","mb-3"),p(I,"class","mb-0 text-muted small"),p(a,"class","modal-body"),p(y,"type","button"),p(y,"class","btn btn-secondary"),p(R,"type","button"),p(R,"class","btn btn-danger"),p(g,"class","modal-footer"),p(l,"class","modal-content"),p(t,"class","modal-dialog"),p(e,"class","modal svelte-1s1xr1"),p(e,"tabindex","-1")},m(x,ee){C(x,e,ee),_(e,t),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(l,o),_(l,a),_(a,u),_(u,d),_(d,h),_(d,k),_(d,D),_(a,S),_(a,I),_(l,W),_(l,g),_(g,y),_(g,G),_(g,R),j||(Q=[se(s,"click",c[2]),se(y,"click",c[2]),se(R,"click",c[1])],j=!0)},p(x,[ee]){ee&1&&J(k,x[0])},i:H,o:H,d(x){x&&m(e),j=!1,Oe(Q)}}}function At(c,e,t){let{cutoffDate:l}=e,{callback:n}=e;function r(){n(!0)}function f(){n(!1)}return c.$$set=i=>{"cutoffDate"in i&&t(0,l=i.cutoffDate),"callback"in i&&t(3,n=i.callback)},[l,r,f,n]}class Rt extends De{constructor(e){super(),Ce(this,e,At,$t,we,{cutoffDate:0,callback:3})}}const{Map:Ne}=bt;function Le(c,e,t){const l=c.slice();return l[45]=e[t][0],l[46]=e[t][1],l}function Ue(c,e,t){const l=c.slice();l[49]=e[t];const n=he(l[49].key);l[50]=n;const r=Se(l[50],{weekStartsOn:1});l[51]=r;const f=ft(l[51]);l[52]=f;const i=ut(l[51],l[52],{weekStartsOn:1})+1;l[53]=i;const s=l[17](l[49].key);l[54]=s;const o=l[49].days.reduce((a,u)=>a+u.events.length,0);return l[55]=o,l}function Be(c,e,t){const l=c.slice();return l[58]=e[t],l}function We(c,e,t){const l=c.slice();return l[61]=e[t],l}function Lt(c){let e,t;return e=new pt({props:{eventItem:c[7],drawerId:c[0],name:"past-event-item-form"}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&128&&(r.eventItem=l[7]),n[0]&1&&(r.drawerId=l[0]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function je(c){let e,t,l,n;const r=[Bt,Ut],f=[];function i(s,o){return s[19]?0:1}return e=i(c),t=f[e]=r[e](c),{c(){t.c(),l=X()},l(s){t.l(s),l=X()},m(s,o){f[e].m(s,o),C(s,l,o),n=!0},p(s,o){let a=e;e=i(s),e===a?f[e].p(s,o):(ne(),A(f[a],1,1,()=>{f[a]=null}),re(),t=f[e],t?t.p(s,o):(t=f[e]=r[e](s),t.c()),M(t,1),t.m(l.parentNode,l))},i(s){n||(M(t),n=!0)},o(s){A(t),n=!1},d(s){s&&m(l),f[e].d(s)}}}function Ut(c){let e,t,l;return t=new Et({}),{c(){e=b("div"),ue(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var r=w(e);fe(t.$$.fragment,r),r.forEach(m),this.h()},h(){p(e,"class","d-flex flex-column gap-4")},m(n,r){C(n,e,r),ce(t,e,null),l=!0},p:H,i(n){l||(M(t.$$.fragment,n),l=!0)},o(n){A(t.$$.fragment,n),l=!1},d(n){n&&m(e),ie(t)}}}function Bt(c){let e,t,l,n,r="Past Events",f,i,s,o,a,u=c[18]&&c[13]&&Fe(c);const d=[Gt,Ft],h=[];function k(D,S){return D[2].length?0:1}return s=k(c),o=h[s]=d[s](c),{c(){e=b("div"),t=b("div"),l=b("div"),n=b("span"),n.textContent=r,f=P(),u&&u.c(),i=P(),o.c(),this.h()},l(D){e=v(D,"DIV",{class:!0});var S=w(e);t=v(S,"DIV",{class:!0});var I=w(t);l=v(I,"DIV",{class:!0});var F=w(l);n=v(F,"SPAN",{"data-svelte-h":!0}),Z(n)!=="svelte-15uqv9t"&&(n.textContent=r),f=O(F),u&&u.l(F),F.forEach(m),I.forEach(m),i=O(S),o.l(S),S.forEach(m),this.h()},h(){p(l,"class","d-flex justify-content-between align-items-center gap-3 flex-wrap fw-lighter d-flex justify-content-end"),p(t,"class","card-header"),p(e,"class","card")},m(D,S){C(D,e,S),_(e,t),_(t,l),_(l,n),_(l,f),u&&u.m(l,null),_(e,i),h[s].m(e,null),a=!0},p(D,S){D[18]&&D[13]?u?u.p(D,S):(u=Fe(D),u.c(),u.m(l,null)):u&&(u.d(1),u=null);let I=s;s=k(D),s===I?h[s].p(D,S):(ne(),A(h[I],1,1,()=>{h[I]=null}),re(),o=h[s],o?o.p(D,S):(o=h[s]=d[s](D),o.c()),M(o,1),o.m(e,null))},i(D){a||(M(o),a=!0)},o(D){A(o),a=!1},d(D){D&&m(e),u&&u.d(),h[s].d()}}}function Fe(c){let e,t,l;function n(i,s){return i[5]?jt:Wt}let r=n(c),f=r(c);return{c(){e=b("button"),f.c(),this.h()},l(i){e=v(i,"BUTTON",{class:!0,type:!0});var s=w(e);f.l(s),s.forEach(m),this.h()},h(){p(e,"class","btn btn-sm btn-outline-danger"),p(e,"type","button"),e.disabled=c[5]},m(i,s){C(i,e,s),f.m(e,null),t||(l=se(e,"click",c[29]),t=!0)},p(i,s){r===(r=n(i))&&f?f.p(i,s):(f.d(1),f=r(i),f&&(f.c(),f.m(e,null))),s[0]&32&&(e.disabled=i[5])},d(i){i&&m(e),f.d(),t=!1,l()}}}function Wt(c){let e,t,l;return{c(){e=T("Delete Past Events ("),t=T(c[16]),l=T(")")},l(n){e=N(n,"Delete Past Events ("),t=N(n,c[16]),l=N(n,")")},m(n,r){C(n,e,r),C(n,t,r),C(n,l,r)},p(n,r){r[0]&65536&&J(t,n[16])},d(n){n&&(m(e),m(t),m(l))}}}function jt(c){let e;return{c(){e=T("Deleting…")},l(t){e=N(t,"Deleting…")},m(t,l){C(t,e,l)},p:H,d(t){t&&m(e)}}}function Ft(c){let e,t="No past events available.";return{c(){e=b("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-aczpuf"&&(e.textContent=t),this.h()},h(){p(e,"class","card-body text-muted small")},m(l,n){C(l,e,n)},p:H,i:H,o:H,d(l){l&&m(e)}}}function Gt(c){let e,t=[],l=new Ne,n,r,f,i=me(Object.entries(c[15]));const s=a=>a[45];for(let a=0;a<i.length;a+=1){let u=Le(c,i,a),d=s(u);l.set(d,t[a]=Xe(d,u))}let o=(c[14]||c[12])&&Je(c);return{c(){e=b("ul");for(let a=0;a<t.length;a+=1)t[a].c();n=P(),o&&o.c(),r=X(),this.h()},l(a){e=v(a,"UL",{class:!0});var u=w(e);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(m),n=O(a),o&&o.l(a),r=X(),this.h()},h(){p(e,"class","list-group list-group-flush border-top-0")},m(a,u){C(a,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);C(a,n,u),o&&o.m(a,u),C(a,r,u),f=!0},p(a,u){u[0]&12746769&&(i=me(Object.entries(a[15])),ne(),t=Ie(t,u,s,1,a,i,l,e,Me,Xe,null,Le),re()),a[14]||a[12]?o?o.p(a,u):(o=Je(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(a){if(!f){for(let u=0;u<i.length;u+=1)M(t[u]);f=!0}},o(a){for(let u=0;u<t.length;u+=1)A(t[u]);f=!1},d(a){a&&(m(e),m(n),m(r));for(let u=0;u<t.length;u+=1)t[u].d();o&&o.d(a)}}}function Ge(c){let e,t,l,n;const r=[Kt,qt],f=[];function i(s,o){return s[49].days.length?0:1}return e=i(c),t=f[e]=r[e](c),{c(){t.c(),l=X()},l(s){t.l(s),l=X()},m(s,o){f[e].m(s,o),C(s,l,o),n=!0},p(s,o){let a=e;e=i(s),e===a?f[e].p(s,o):(ne(),A(f[a],1,1,()=>{f[a]=null}),re(),t=f[e],t?t.p(s,o):(t=f[e]=r[e](s),t.c()),M(t,1),t.m(l.parentNode,l))},i(s){n||(M(t),n=!0)},o(s){A(t),n=!1},d(s){s&&m(l),f[e].d(s)}}}function qt(c){let e,t="No events scheduled this week.";return{c(){e=b("li"),e.textContent=t,this.h()},l(l){e=v(l,"LI",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1tq6asq"&&(e.textContent=t),this.h()},h(){p(e,"class","list-group-item py-3 text-muted")},m(l,n){C(l,e,n)},p:H,i:H,o:H,d(l){l&&m(e)}}}function Kt(c){let e=[],t=new Ne,l,n,r=me(c[49].days);const f=i=>i[58].key;for(let i=0;i<r.length;i+=1){let s=Be(c,r,i),o=f(s);t.set(o,e[i]=ze(o,s))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=X()},l(i){for(let s=0;s<e.length;s+=1)e[s].l(i);l=X()},m(i,s){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(i,s);C(i,l,s),n=!0},p(i,s){s[0]&8421393&&(r=me(i[49].days),ne(),e=Ie(e,s,f,1,i,r,t,l.parentNode,Me,ze,l,Be),re())},i(i){if(!n){for(let s=0;s<r.length;s+=1)M(e[s]);n=!0}},o(i){for(let s=0;s<e.length;s+=1)A(e[s]);n=!1},d(i){i&&m(l);for(let s=0;s<e.length;s+=1)e[s].d(i)}}}function qe(c){let e,t,l,n,r,f;function i(){return c[36](c[61])}return{c(){e=b("div"),t=b("button"),l=b("i"),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=w(e);t=v(o,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var a=w(t);l=v(a,"I",{class:!0}),w(l).forEach(m),a.forEach(m),o.forEach(m),this.h()},h(){p(l,"class","bi bi-pencil-square"),p(t,"class","btn btn-sm btn-primary"),p(t,"type","button"),p(t,"data-bs-toggle","offcanvas"),p(t,"data-bs-target",n="#"+c[0]),p(t,"aria-controls",c[0]),p(e,"class","event-actions svelte-b48x49")},m(s,o){C(s,e,o),_(e,t),_(t,l),r||(f=se(t,"click",i),r=!0)},p(s,o){c=s,o[0]&1&&n!==(n="#"+c[0])&&p(t,"data-bs-target",n),o[0]&1&&p(t,"aria-controls",c[0])},d(s){s&&m(e),r=!1,f()}}}function Ke(c,e){let t,l,n,r,f,i;n=new kt({props:{item:e[61],showDate:!1}});let s=e[4]&&qe(e);return{key:c,first:null,c(){t=b("div"),l=b("div"),ue(n.$$.fragment),r=P(),s&&s.c(),f=P(),this.h()},l(o){t=v(o,"DIV",{class:!0});var a=w(t);l=v(a,"DIV",{class:!0});var u=w(l);fe(n.$$.fragment,u),u.forEach(m),r=O(a),s&&s.l(a),f=O(a),a.forEach(m),this.h()},h(){p(l,"class","event-content svelte-b48x49"),p(t,"class","daily-event-row svelte-b48x49"),this.first=t},m(o,a){C(o,t,a),_(t,l),ce(n,l,null),_(t,r),s&&s.m(t,null),_(t,f),i=!0},p(o,a){e=o;const u={};a[0]&32768&&(u.item=e[61]),n.$set(u),e[4]?s?s.p(e,a):(s=qe(e),s.c(),s.m(t,f)):s&&(s.d(1),s=null)},i(o){i||(M(n.$$.fragment,o),i=!0)},o(o){A(n.$$.fragment,o),i=!1},d(o){o&&m(t),ie(n),s&&s.d()}}}function ze(c,e){let t,l,n,r,f=e[58].displayDay+"",i,s,o,a=e[58].displayDate+"",u,d,h,k=[],D=new Ne,S,I,F=me(e[58].events);const W=g=>g[61].id??`${g[61].start_time}-${g[61].meta_data?.recurring_instance_index??0}`;for(let g=0;g<F.length;g+=1){let y=We(e,F,g),U=W(y);D.set(U,k[g]=Ke(U,y))}return{key:c,first:null,c(){t=b("li"),l=b("div"),n=b("div"),r=b("strong"),i=T(f),s=P(),o=b("small"),u=T(a),d=P(),h=b("div");for(let g=0;g<k.length;g+=1)k[g].c();S=P(),this.h()},l(g){t=v(g,"LI",{class:!0});var y=w(t);l=v(y,"DIV",{class:!0});var U=w(l);n=v(U,"DIV",{class:!0});var G=w(n);r=v(G,"STRONG",{});var R=w(r);i=N(R,f),R.forEach(m),s=O(G),o=v(G,"SMALL",{class:!0});var K=w(o);u=N(K,a),K.forEach(m),G.forEach(m),d=O(U),h=v(U,"DIV",{class:!0});var j=w(h);for(let Q=0;Q<k.length;Q+=1)k[Q].l(j);j.forEach(m),U.forEach(m),S=O(y),y.forEach(m),this.h()},h(){p(o,"class","text-muted"),p(n,"class","event-date-column d-flex flex-column align-items-start text-nowrap svelte-b48x49"),p(h,"class","d-flex flex-column gap-3 flex-grow-1"),p(l,"class","d-flex flex-column flex-md-row gap-3"),p(t,"class","list-group-item py-3"),this.first=t},m(g,y){C(g,t,y),_(t,l),_(l,n),_(n,r),_(r,i),_(n,s),_(n,o),_(o,u),_(l,d),_(l,h);for(let U=0;U<k.length;U+=1)k[U]&&k[U].m(h,null);_(t,S),I=!0},p(g,y){e=g,(!I||y[0]&32768)&&f!==(f=e[58].displayDay+"")&&J(i,f),(!I||y[0]&32768)&&a!==(a=e[58].displayDate+"")&&J(u,a),y[0]&8421393&&(F=me(e[58].events),ne(),k=Ie(k,y,W,1,e,F,D,h,Me,Ke,null,We),re())},i(g){if(!I){for(let y=0;y<F.length;y+=1)M(k[y]);I=!0}},o(g){for(let y=0;y<k.length;y+=1)A(k[y]);I=!1},d(g){g&&m(t);for(let y=0;y<k.length;y+=1)k[y].d()}}}function He(c,e){let t,l,n,r,f,i,s,o,a=e[53]+"",u,d,h=e[55]+"",k,D,S=e[55]===1?"":"s",I,F,W,g,y=e[49].label+"",U,G,R,K,j,Q,x;function ee(){return e[35](e[49])}let B=e[54]&&Ge(e);return{key:c,first:null,c(){t=b("li"),l=b("button"),n=b("span"),r=b("i"),i=P(),s=b("span"),o=T("Week "),u=T(a),d=T(" ["),k=T(h),D=T(" Event"),I=T(S),F=T("]"),W=P(),g=b("span"),U=T(y),R=P(),B&&B.c(),K=X(),this.h()},l(V){t=v(V,"LI",{class:!0});var L=w(t);l=v(L,"BUTTON",{class:!0,title:!0});var te=w(l);n=v(te,"SPAN",{class:!0});var Y=w(n);r=v(Y,"I",{class:!0}),w(r).forEach(m),i=O(Y),s=v(Y,"SPAN",{class:!0});var z=w(s);o=N(z,"Week "),u=N(z,a),d=N(z," ["),k=N(z,h),D=N(z," Event"),I=N(z,S),F=N(z,"]"),z.forEach(m),Y.forEach(m),W=O(te),g=v(te,"SPAN",{});var ae=w(g);U=N(ae,y),ae.forEach(m),te.forEach(m),L.forEach(m),R=O(V),B&&B.l(V),K=X(),this.h()},h(){p(r,"class",f="bi "+(e[54]?"bi-chevron-up":"bi-chevron-down")),p(s,"class","text-muted"),p(n,"class","d-flex align-items-center gap-2"),ye(g,"opacity-50",e[55]===0),p(l,"class","week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-b48x49"),p(l,"title",G=e[54]?"Click to collapse week":"Click to expand week"),ye(l,"text-muted",e[55]===0),p(t,"class","list-group-item list-group-item-light text-uppercase small fw-lighter p-0"),this.first=t},m(V,L){C(V,t,L),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(s,o),_(s,u),_(s,d),_(s,k),_(s,D),_(s,I),_(s,F),_(l,W),_(l,g),_(g,U),C(V,R,L),B&&B.m(V,L),C(V,K,L),j=!0,Q||(x=se(l,"click",ee),Q=!0)},p(V,L){e=V,(!j||L[0]&163840&&f!==(f="bi "+(e[54]?"bi-chevron-up":"bi-chevron-down")))&&p(r,"class",f),(!j||L[0]&32768)&&a!==(a=e[53]+"")&&J(u,a),(!j||L[0]&32768)&&h!==(h=e[55]+"")&&J(k,h),(!j||L[0]&32768)&&S!==(S=e[55]===1?"":"s")&&J(I,S),(!j||L[0]&32768)&&y!==(y=e[49].label+"")&&J(U,y),(!j||L[0]&32768)&&ye(g,"opacity-50",e[55]===0),(!j||L[0]&163840&&G!==(G=e[54]?"Click to collapse week":"Click to expand week"))&&p(l,"title",G),(!j||L[0]&32768)&&ye(l,"text-muted",e[55]===0),e[54]?B?(B.p(e,L),L[0]&163840&&M(B,1)):(B=Ge(e),B.c(),M(B,1),B.m(K.parentNode,K)):B&&(ne(),A(B,1,1,()=>{B=null}),re())},i(V){j||(M(B),j=!0)},o(V){A(B),j=!1},d(V){V&&(m(t),m(R),m(K)),B&&B.d(V),Q=!1,x()}}}function Xe(c,e){let t,l=e[46].label+"",n,r,f=[],i=new Ne,s,o,a=me(e[46].weeks);const u=d=>d[49].key;for(let d=0;d<a.length;d+=1){let h=Ue(e,a,d),k=u(h);i.set(k,f[d]=He(k,h))}return{key:c,first:null,c(){t=b("li"),n=T(l),r=P();for(let d=0;d<f.length;d+=1)f[d].c();s=X(),this.h()},l(d){t=v(d,"LI",{class:!0});var h=w(t);n=N(h,l),h.forEach(m),r=O(d);for(let k=0;k<f.length;k+=1)f[k].l(d);s=X(),this.h()},h(){p(t,"class","list-group-item bg-secondary text-white fw-semibold"),this.first=t},m(d,h){C(d,t,h),_(t,n),C(d,r,h);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(d,h);C(d,s,h),o=!0},p(d,h){e=d,(!o||h[0]&32768)&&l!==(l=e[46].label+"")&&J(n,l),h[0]&12746769&&(a=me(e[46].weeks),ne(),f=Ie(f,h,u,1,e,a,i,s.parentNode,Me,He,s,Ue),re())},i(d){if(!o){for(let h=0;h<a.length;h+=1)M(f[h]);o=!0}},o(d){for(let h=0;h<f.length;h+=1)A(f[h]);o=!1},d(d){d&&(m(t),m(r),m(s));for(let h=0;h<f.length;h+=1)f[h].d(d)}}}function Je(c){let e,t,l,n=(c[1]?.length??0)+"",r,f,i=(c[3]?.length??0)+"",s,o;function a(h,k){return h[12]?Ht:zt}let u=a(c),d=u(c);return{c(){e=b("div"),t=b("small"),l=T("Showing "),r=T(n),f=T(" of "),s=T(i),o=P(),d.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var k=w(e);t=v(k,"SMALL",{});var D=w(t);l=N(D,"Showing "),r=N(D,n),f=N(D," of "),s=N(D,i),D.forEach(m),o=O(k),d.l(k),k.forEach(m),this.h()},h(){p(e,"class","card-footer d-flex align-items-center justify-content-between")},m(h,k){C(h,e,k),_(e,t),_(t,l),_(t,r),_(t,f),_(t,s),_(e,o),d.m(e,null)},p(h,k){k[0]&2&&n!==(n=(h[1]?.length??0)+"")&&J(r,n),k[0]&8&&i!==(i=(h[3]?.length??0)+"")&&J(s,i),u===(u=a(h))&&d?d.p(h,k):(d.d(1),d=u(h),d&&(d.c(),d.m(e,null)))},d(h){h&&m(e),d.d()}}}function zt(c){let e,t,l="More",n,r,f="All",i,s;return{c(){e=b("div"),t=b("button"),t.textContent=l,n=P(),r=b("button"),r.textContent=f,this.h()},l(o){e=v(o,"DIV",{class:!0});var a=w(e);t=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1ox9u2o"&&(t.textContent=l),n=O(a),r=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-1w2ej6j"&&(r.textContent=f),a.forEach(m),this.h()},h(){p(t,"class","btn btn-primary btn-sm"),p(r,"class","btn btn-outline-primary btn-sm"),p(e,"class","d-flex gap-2")},m(o,a){C(o,e,a),_(e,t),_(e,n),_(e,r),i||(s=[se(t,"click",c[26]),se(r,"click",c[27])],i=!0)},p:H,d(o){o&&m(e),i=!1,Oe(s)}}}function Ht(c){let e,t="Reset",l,n;return{c(){e=b("button"),e.textContent=t,this.h()},l(r){e=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-161htn1"&&(e.textContent=t),this.h()},h(){p(e,"class","btn btn-outline-secondary btn-sm")},m(r,f){C(r,e,f),l||(n=se(e,"click",c[28]),l=!0)},p:H,d(r){r&&m(e),l=!1,n()}}}function Qe(c){let e,t;return e=new Rt({props:{cutoffDate:c[9],callback:c[30]}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&512&&(r.cutoffDate=l[9]),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Ye(c){let e,t;return e=new Vt({props:{deleted:c[11].deleted,skipped:c[11].skipped,callback:c[31]}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&2048&&(r.deleted=l[11].deleted),n[0]&2048&&(r.skipped=l[11].skipped),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Xt(c){let e,t,l,n,r,f;e=new wt({props:{title:c[6],id:c[0],$$slots:{default:[Lt]},$$scope:{ctx:c}}});let i=c[18]&&je(c),s=c[8]&&Qe(c),o=c[10]&&Ye(c);return{c(){ue(e.$$.fragment),t=P(),i&&i.c(),l=P(),s&&s.c(),n=P(),o&&o.c(),r=X()},l(a){fe(e.$$.fragment,a),t=O(a),i&&i.l(a),l=O(a),s&&s.l(a),n=O(a),o&&o.l(a),r=X()},m(a,u){ce(e,a,u),C(a,t,u),i&&i.m(a,u),C(a,l,u),s&&s.m(a,u),C(a,n,u),o&&o.m(a,u),C(a,r,u),f=!0},p(a,u){const d={};u[0]&64&&(d.title=a[6]),u[0]&1&&(d.id=a[0]),u[0]&129|u[2]&4&&(d.$$scope={dirty:u,ctx:a}),e.$set(d),a[18]?i?(i.p(a,u),u[0]&262144&&M(i,1)):(i=je(a),i.c(),M(i,1),i.m(l.parentNode,l)):i&&(ne(),A(i,1,1,()=>{i=null}),re()),a[8]?s?(s.p(a,u),u[0]&256&&M(s,1)):(s=Qe(a),s.c(),M(s,1),s.m(n.parentNode,n)):s&&(ne(),A(s,1,1,()=>{s=null}),re()),a[10]?o?(o.p(a,u),u[0]&1024&&M(o,1)):(o=Ye(a),o.c(),M(o,1),o.m(r.parentNode,r)):o&&(ne(),A(o,1,1,()=>{o=null}),re())},i(a){f||(M(e.$$.fragment,a),M(i),M(s),M(o),f=!0)},o(a){A(e.$$.fragment,a),A(i),A(s),A(o),f=!1},d(a){a&&(m(t),m(l),m(n),m(r)),ie(e,a),i&&i.d(a),s&&s.d(a),o&&o.d(a)}}}const Ze=4,Jt=4;function Qt(c,e,t){let l,n,r,f,i,s,o,a,u,d,h,k;const{actions:{featureIsEnabled:D},stores:{currentUser:S}}=gt(),{stores:{ready:I,dbData:F,weeksExpanded:W},actions:{reload:g}}=mt();ge(c,I,E=>t(19,k=E)),ge(c,W,E=>t(34,d=E));const y={title:"Event",description:"",location:"",event_type:"calendar_event"};let{formId:U=Dt()}=e,G=!1,R=!1,K="",j={...y},Q=!1,x="",ee=!1,B={deleted:0,skipped:0},V=Ze,L=!1;const te=Ee();let Y={};function z(E){return l.includes(E)}function ae(E){const q=Y[E]??z(E);t(33,Y={...Y,[E]:!q})}const Pe=E=>{t(6,K="Event Item"),t(7,j={...E,category:E?.meta_data?.category})},Ve=$e(F,E=>{const q=Ee();return(E??[]).filter($=>!($.event_type!=="calendar_event"||!$.start_time||he($.start_time)>=q||$.recurrence_rule&&(!$.recurrence_end_date||$.recurrence_end_date&&he($.recurrence_end_date)>=q)))});ge(c,Ve,E=>t(3,u=E));const Te=$e(S,E=>E.role===Ct.Root);ge(c,Te,E=>t(18,h=E));function xe(){t(32,V+=Jt)}function et(){t(32,V=520),t(12,L=!0)}function tt(){t(32,V=Ze),t(12,L=!1)}const lt=()=>{if(!G||R||!it(Te)||!o)return;const E=Ee();t(9,x=de(E,"MMM d, yyyy")),t(8,Q=!0)};async function st(E){if(t(8,Q=!1),!E)return;const q=Ee();t(5,R=!0);try{const $=await vt(q);await g(),t(11,B=$),t(10,ee=!0)}catch($){console.error("Failed to delete past events",$),alert("Failed to delete past events. Please try again.")}finally{t(5,R=!1)}}function nt(){t(10,ee=!1)}ot(async()=>{t(4,G=D(yt.EditDBCalendarEvent)),await g()});const rt=E=>ae(E.key),at=E=>Pe(E);return c.$$set=E=>{"formId"in E&&t(0,U=E.formId)},c.$$.update=()=>{c.$$.dirty[0]&8|c.$$.dirty[1]&2&&t(1,r=(u??[]).filter(E=>{if(!E.start_time)return!1;const q=he(E.start_time),$=Mt(te,V);return q>=$&&q<te})),c.$$.dirty[0]&2&&t(2,i=(()=>{const E=new Map;for(const q of r){if(!q.start_time)continue;const $=he(q.start_time),le=It($,{weekStartsOn:1}),oe=Se($,{weekStartsOn:1}),_e=de(le,"yyyy-MM-dd"),be=`${de(le,"MMM d")} – ${de(oe,"MMM d")}`;let pe=E.get(_e);pe||(pe={key:_e,label:be,days:new Map},E.set(_e,pe));const ve=de($,"yyyy-MM-dd");let ke=pe.days.get(ve);ke||(ke={key:ve,displayDay:de($,"EEE"),displayDate:de($,"MMM d"),events:[]},pe.days.set(ve,ke)),ke.events.push(q)}return Array.from(E.values()).sort((q,$)=>q.key<$.key?1:-1).map(q=>({key:q.key,label:q.label,days:Array.from(q.days.values()).sort(($,le)=>$.key<le.key?1:-1).map($=>({...$,events:$.events.slice().sort((le,oe)=>{const _e=le.is_all_day?0:1,be=oe.is_all_day?0:1;if(_e!==be)return _e-be;const pe=le.start_time?he(le.start_time).getTime():Number.MAX_SAFE_INTEGER,ve=oe.start_time?he(oe.start_time).getTime():Number.MAX_SAFE_INTEGER;return pe-ve})}))}))})()),c.$$.dirty[0]&4&&(l=(()=>{if(i.length===0)return[];const E=[];return i[0]&&E.push(i[0].key),i[1]&&E.push(i[1].key),E})()),c.$$.dirty[1]&12&&t(17,n=E=>d?!0:Y[E]!==void 0?Y[E]:z(E)),c.$$.dirty[0]&2&&t(16,f=r.length),c.$$.dirty[0]&4&&t(15,s=i.reduce((E,q)=>{const $=he(q.key),le=Se($,{weekStartsOn:1}),oe=de(le,"yyyy-MM"),_e=de(le,"MMMM yyyy");return E[oe]||(E[oe]={label:_e,weeks:[]}),E[oe].weeks.push(q),E},{})),c.$$.dirty[0]&2&&t(13,o=r.length>0),c.$$.dirty[0]&10&&t(14,a=u.length>r.length)},[U,r,i,u,G,R,K,j,Q,x,ee,B,L,o,a,s,f,n,h,k,I,W,ae,Pe,Ve,Te,xe,et,tt,lt,st,nt,V,Y,d,rt,at]}class Yt extends De{constructor(e){super(),Ce(this,e,Qt,Xt,we,{formId:0},null,[-1,-1,-1])}}function Zt(c){let e,t,l,n,r,f,i;return t=new dt({}),n=new _t({}),f=new Yt({}),{c(){e=b("div"),ue(t.$$.fragment),l=P(),ue(n.$$.fragment),r=P(),ue(f.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=w(e);fe(t.$$.fragment,o),l=O(o),fe(n.$$.fragment,o),r=O(o),fe(f.$$.fragment,o),o.forEach(m),this.h()},h(){p(e,"class","d-flex flex-column gap-4")},m(s,o){C(s,e,o),ce(t,e,null),_(e,l),ce(n,e,null),_(e,r),ce(f,e,null),i=!0},p:H,i(s){i||(M(t.$$.fragment,s),M(n.$$.fragment,s),M(f.$$.fragment,s),i=!0)},o(s){A(t.$$.fragment,s),A(n.$$.fragment,s),A(f.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),ie(n),ie(f)}}}function xt(c){let e,t;return e=new ct({props:{pageTitle:"Announcements & Events",$$slots:{default:[Zt]},$$scope:{ctx:c}}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,[n]){const r={};n&1&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}class dl extends De{constructor(e){super(),Ce(this,e,null,xt,we,{})}}export{dl as component,ul as universal};
