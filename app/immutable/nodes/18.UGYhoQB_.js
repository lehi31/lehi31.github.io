import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{o as M}from"../chunks/B8gJkoMb.js";import{p as z,f as k,a as A,a8 as r,U as p,g as l,s as u,c as n,r as f,aa as w,t as C}from"../chunks/D6GkHfO-.js";import{i as _,s as D}from"../chunks/DYmw-k_K.js";import{c as F,a as t,f as c}from"../chunks/D8wZRsgK.js";import{i as G}from"../chunks/XlJfi8GN.js";import{g as K}from"../chunks/BoxDUlBh.js";import{p as Q}from"../chunks/Cjdtvmgk.js";import{s as W,d as X}from"../chunks/vFKQls-f.js";import{L as Z}from"../chunks/f46sgKzV.js";var $=c('<strong>Email already verified!</strong> <p class="mb-0">You can log in now.</p>',1),aa=c('<strong>Email verified successfully!</strong> <p class="mb-0">You can now log in to your account.</p>',1),ea=c('<div class="alert alert-success d-flex align-items-center gap-2" role="alert"><i class="bi bi-check-circle-fill"></i> <div><!></div></div> <p class="text-muted">Redirecting to login...</p>',1),ra=c('<a href="/auth/resend-verification" class="btn btn-primary">Request New Verification Email</a>'),ta=c('<div class="alert alert-danger d-flex align-items-center gap-2" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <div><strong>Verification Failed</strong> <p class="mb-0"> </p></div></div> <!> <a href="/auth/login" class="btn btn-link">Back to Login</a>',1),sa=c('<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-tu9pn8"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none"><img src="/assets/logo.png" alt="logo" class="logo svelte-tu9pn8"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <!></div>');function ua(O,R){z(R,!1);let V=p(!0),L=p(!1),m=p(""),N=p(!1),P=p(!1);M(async()=>{const a=Q.url.searchParams.get("token");if(!a){r(m,"Invalid verification link"),r(V,!1);return}try{const s=await(await fetch(`${W}/functions/v1/auth-verify-email`,{method:"POST",headers:X(),body:JSON.stringify({token:a})})).json();s.success?(r(L,!0),r(N,s.alreadyVerified||!1),setTimeout(()=>{K("/auth/login")},3e3)):(r(m,s.error||"Verification failed"),r(P,s.expired||!1))}catch{r(m,"Network error. Please try again.")}finally{r(V,!1)}}),G();var T=F(),S=k(T);{var U=a=>{Z(a,{message:"Verifying your email..."})},Y=a=>{var h=sa(),s=u(n(h),2);{var j=i=>{var v=ea(),b=k(v),y=u(n(b),2),d=n(y);{var x=e=>{var o=$();w(2),t(e,o)},g=e=>{var o=aa();w(2),t(e,o)};_(d,e=>{l(N)?e(x):e(g,!1)})}f(y),f(b),w(2),t(i,v)},q=i=>{var v=F(),b=k(v);{var y=d=>{var x=ta(),g=k(x),e=u(n(g),2),o=u(n(e),2),B=n(o,!0);f(o),f(e),f(g);var H=u(g,2);{var I=E=>{var J=ra();t(E,J)};_(H,E=>{l(P)&&E(I)})}w(2),C(()=>D(B,l(m))),t(d,x)};_(b,d=>{l(m)&&d(y)},!0)}t(i,v)};_(s,i=>{l(L)?i(j):i(q,!1)})}f(h),t(a,h)};_(S,a=>{l(V)?a(U):a(Y,!1)})}t(O,T),A()}export{ua as component};
