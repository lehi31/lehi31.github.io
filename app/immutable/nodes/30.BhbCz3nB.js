import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{c,r as o,s as r,t as Z,p as Ae,E as T,x as Ee,D as b,ah as ne,g as e,o as X,ai as Ze,u as a,F as Ie,a as Re,as as Pe,f as be,i as Xe,R as oe}from"../chunks/D2Wl5k_M.js";import{f as P,a as p,c as Le,t as _e}from"../chunks/DfqsuKYE.js";import{p as z,s as ae,i as K,e as ue,a as Ne,b as ca,q as le}from"../chunks/Dp64CMOB.js";import{i as Me}from"../chunks/CPbJ_PqI.js";import{o as ea,a as Da}from"../chunks/DB0qkhVq.js";import{e as Be,i as je}from"../chunks/DrikPB-j.js";import{s as fe,r as Qe,b as la}from"../chunks/Df79sd2X.js";import{t as ya,e as pe,d as ha,h as Ca,P as Na,W as He}from"../chunks/HmHUL7PJ.js";import{b as sa,a as Aa}from"../chunks/CMEL2kP5.js";import{b as ia}from"../chunks/vhQtniU6.js";import{P as ua,u as Ra,H as ce,a as Ma,b as Ea,c as _a,d as La,e as Ba,f as ja,g as Ye,B as oa,h as ba,i as Je,j as Oa,k as Ua,l as Fa,m as $a,n as Wa,S as De,o as Ce,p as Ke,C as qa}from"../chunks/CxeSNZAx.js";import{S as da}from"../chunks/Ba1mIk_A.js";import{t as Oe}from"../chunks/D5tvMO_e.js";import{A as za,a as de}from"../chunks/CaSs8TdL.js";import{D as Ya}from"../chunks/qUTCKSPF.js";import{a as Ja}from"../chunks/DpxOcZ60.js";import{P as Ka}from"../chunks/C9TIr6ei.js";import{W as Ga,S as Va}from"../chunks/BEd5HsMJ.js";import{A as Qa,E as Xa}from"../chunks/C4UzbJZF.js";function Za(B){return ya(B).getDay()===0}function et(B){return ya(B).getDay()}function at(B,f){let t=f-et(B);return t<=0&&(t+=7),Ja(B,t)}function tt(B){return at(B,0)}const rt=!0,mr=Object.freeze(Object.defineProperty({__proto__:null,prerender:rt},Symbol.toStringTag,{value:"Module"}));var nt=P('<div class="d-flex justify-content-between"><div> </div> <div class="text-end"> <br/> <div class="d-flex align-items-center justify-content-end flex-row gap-2"><small class="small fw-lighter"> </small> <a class="btn btn-primary btn-sm d-print-none" target="_blank" tabindex="-1" role="button" style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .70rem;">Lyrics</a></div></div></div>');function Ge(B,f){let t=z(f,"assignment",8,""),u=z(f,"title",8,""),n=z(f,"language",8,""),U=z(f,"page",8,0),i=z(f,"link",8,"");var m=nt(),v=c(m),S=c(v,!0);o(v);var d=r(v,2),D=c(d,!0),I=r(D,3),j=c(I),F=c(j);o(j);var N=r(j,2);o(I),o(d),o(m),Z(()=>{ae(S,t()),ae(D,u()),ae(F,`${n()??""} Hymn No. ${U()??""}`),fe(N,"href",i())}),p(B,m)}var st=P('<div class="d-flex justify-content-between"><div> </div> <div class="text-end"> <br/> <em class="small fw-lighter"> </em></div></div>');function Se(B,f){let t=z(f,"assignment",8,""),u=z(f,"name",8,""),n=z(f,"details",8,"");var U=st(),i=c(U),m=c(i,!0);o(i);var v=r(i,2),S=c(v,!0),d=r(S,3),D=c(d,!0);o(d),o(v),o(U),Z(()=>{ae(m,t()),ae(S,u()),ae(D,n())}),p(B,U)}var it=P("<div><strong> </strong></div>"),ot=P("<span> </span>"),lt=P("<div><small><em>Presets</em></small> <div></div></div>"),ct=P('<div class="d-flex flex-column gap-2"><div>Role</div> <input type="text" placeholder="Participant role" required/> <small class="fw-lighter fst-italic">Participant sacrament role. i.e. Speaker, Musical number, Pianist</small></div>'),dt=P('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),vt=P(`<div class="wrapper d-flex flex-column gap-4"><!> <!> <!> <div class="d-flex flex-column gap-2"><div>Name</div> <input type="text" placeholder="Participant name" required/> <small class="fw-lighter fst-italic">Full name with title. Examples: Sister Jane Doe, Brother John Smith, Bishop David Lee</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <input type="text" placeholder="Participant description" required/> <small class="fw-lighter fst-italic">Current calling or family relationship. Examples: Relief Society President, Visiting from Orem
			5th Ward</small></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span> <button class="btn btn-primary position-relative"><span>Save</span> <!></button></div></div>`);function we(B,f){Ae(f,!1);const t=T(),u=T(),n=T(),U=T(),i=T();let m=z(f,"label",8,""),v=z(f,"editableRole",8,!1),S=z(f,"presets",24,()=>[]),d=z(f,"participant",28,()=>({name:"",description:"",role:ua.Unknown})),D=T(!1),I=d().id,j=T(),F=T(),N=T(),k=T({message:"",type:"info"}),G=T({name:"",description:"",role:ua.Unknown});const se=g=>{d({...g,id:I})},Y=(g,C=0,E="info")=>{Pe(k,e(k).message=g),Pe(k,e(k).type=E),C&&setTimeout(()=>{Pe(k,e(k).message="")},C)},ie=async()=>{if(!e(t)){Y("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!I){Y("ID is not defined",0,"danger");return}if(!e(i)){let g=[];e(n)&&g.push("Name is invalid"),e(U)&&g.push("Description is invalid"),Y(g.join(". ")+".  Please address accordingly.",0,"danger")}try{Y("Saving ..."),b(D,!0);const g={description:d().description,member_given_name:d().name,role:v()?d().role:m()};await Ra(I,g),console.log("Participant updated successfully"),Oe("set_sacrament_participant_success","interaction",`Set Sacrament Participant Successful ${v()?d().role:m()}`,1),setTimeout(()=>{b(D,!1),b(G,{...d(),id:I}),Y("Saved",3e3,"success")},800)}catch(g){Oe("set_sacrament_participant_failed","interaction",`Set Sacrament Participant Failed ${v()?d().role:m()}`,1),setTimeout(()=>{b(D,!1),console.error("Participant update failed",g),Y("Save failed, please reload browser and try again.",7e3,"danger")},800)}};ea(async()=>{await Ee(),b(G,{...d(),id:I})}),ne(()=>(e(G),X(d())),()=>{b(t,e(G).role!==d().role||e(G).name!==d().name||e(G).description!==d().description)}),ne(()=>X(d()),()=>{b(u,d().role==="")}),ne(()=>X(d()),()=>{b(n,d().name==="")}),ne(()=>X(d()),()=>{b(U,d().description==="")}),ne(()=>X(d()),()=>{b(i,!!(I&&d()&&d().name.length&&d().description.length))}),Ze(),Me();var te=vt(),y=c(te);{var $=g=>{var C=it(),E=c(C),ve=c(E,!0);o(E),o(C),Z(()=>ae(ve,m())),p(g,C)};K(y,g=>{m()&&g($)})}var w=r(y,2);{var V=g=>{var C=lt();let E;var ve=r(c(C),2);Be(ve,5,S,je,(he,ke)=>{var $e=ot();let qe;var Ue=c($e,!0);o($e),Z(()=>{qe=pe($e,1,"badge me-2 cursor-pointer svelte-mo0ot3",null,qe,{"text-bg-secondary":e(ke).description!==d().description,"text-bg-warning":e(ke).description===d().description}),ae(Ue,(e(ke),a(()=>e(ke).description)))}),ue("click",$e,()=>se(e(ke))),p(he,$e)}),o(ve),o(C),Z(()=>E=pe(C,1,"",null,E,{loading:e(D)})),p(g,C)};K(w,g=>{X(S()),a(()=>S()?.length)&&g(V)})}var W=r(w,2);{var A=g=>{var C=ct(),E=r(c(C),2);Qe(E);let ve;ia(E,he=>b(j,he),()=>e(j)),Ie(2),o(C),Z(()=>{fe(E,"name",`${m()??""}-role`),ve=pe(E,1,"form-control",null,ve,{"is-invalid":e(u)}),E.disabled=e(D)}),ue("focus",E,()=>e(j).select()),sa(E,()=>d().role,he=>d(d().role=he,!0)),p(g,C)};K(W,g=>{v()&&g(A)})}var R=r(W,2),M=r(c(R),2);Qe(M);let q;ia(M,g=>b(F,g),()=>e(F)),Ie(2),o(R);var x=r(R,2),_=r(c(x),2);Qe(_);let L;ia(_,g=>b(N,g),()=>e(N)),Ie(2),o(x);var ee=r(x,2),s=c(ee),h=c(s,!0);o(s);var l=r(s,2);let me;var re=c(l);da(re,{size:"xs"}),o(l);var ye=r(l,2),Q=r(c(ye),2);{var J=g=>{var C=dt();p(g,C)};K(Q,g=>{e(t)&&g(J)})}o(ye),o(ee),o(te),Z(()=>{fe(M,"name",`${m()??""}-name`),q=pe(M,1,"form-control",null,q,{"is-invalid":e(n)}),M.disabled=e(D),fe(_,"name",`${m()??""}-description`),L=pe(_,1,"form-control",null,L,{"is-invalid":e(U)}),_.disabled=e(D),pe(s,1,`fw-lighter fst-italic text-${e(k),a(()=>e(k).type)??""}`,"svelte-mo0ot3"),ae(h,(e(k),a(()=>e(k).message))),me=pe(l,1,"",null,me,{"d-none":!e(D)})}),ue("focus",M,()=>e(F).select()),sa(M,()=>d().name,g=>d(d().name=g,!0)),ue("focus",_,()=>e(N).select()),sa(_,()=>d().description,g=>d(d().description=g,!0)),ue("click",ye,ie),p(B,te),Re()}var pt=P('<div><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">None</label></div> <small class="fw-lighter fst-italic">Check if this hymn is not needed</small></div>'),mt=P("<option> </option>"),gt=P("<option> </option>"),ut=P('<div class="d-flex flex-column gap-2"><div>Language</div> <select aria-label="Hymn Language"><option selected></option><!></select></div> <div class="d-flex flex-column gap-2"><div>Hymn</div> <select aria-label="Hymn List"></select></div>',1),_t=P('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),bt=P('<div class="d-flex flex-column gap-4"><!> <!> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span> <button type="button" class="btn btn btn-primary position-relative"><span>Save</span> <!></button></div></div>');function Ve(B,f){Ae(f,!1);const t=T(),u=T(),n=T(),U=T();let i=z(f,"hymn",28,()=>({page_number:0,language:ce.English})),m=z(f,"name",8,""),v=z(f,"nullable",8,!1),S=i().id,d=T(!1),D=T(!1),I=T({message:"",type:"info"}),j=T({page_number:0,language:ce.English});const F=[{label:"English",value:ce.English},{label:"Tongan",value:ce.Tongan},{label:"Samoan",value:ce.Samoan}];let N=T([]);const k=(_,L=0,ee="info")=>{Pe(I,e(I).message=_),Pe(I,e(I).type=ee),L&&setTimeout(()=>{Pe(I,e(I).message="")},L)},G=async()=>{if(!e(t)){k("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!S){k("ID is not defined",0,"danger");return}if(!e(D)){let _=[];e(n)&&_.push("Page number is invalid"),e(u)&&_.push("Language is invalid"),k(_.join(". ")+".  Please address accordingly.",0,"danger");return}try{k("Saving ..."),b(d,!0);const _={page_number:i().blank?0:i().page_number,language:i().blank?ce.None:i().language,blank:i().blank};await La(S,_),console.log("Hymn updated successfully"),Oe("set_sacrament_hymn_success","interaction",`Set Sacrament Hymn Successful: Page:${i().blank?0:i().page_number} | Lang:${i().blank?ce.None:i().language}`,1),setTimeout(()=>{b(d,!1),b(j,{...i(),id:S}),k("Saved",3e3,"success")},800)}catch(_){Oe("set_sacrament_hymn_failed","interaction",`Set Sacrament Hymn Failed: Page:${i().blank?0:i().page_number} | Lang:${i().blank?ce.None:i().language}`,1),setTimeout(()=>{b(d,!1),console.error("Hymn update failed",_),k("Save failed, please reload browser and try again.",7e3,"danger")},800)}};ea(async()=>{await Ee(),b(j,{...i(),id:S})}),ne(()=>(e(j),X(i())),()=>{b(t,e(j).page_number!==i().page_number||e(j).language!==i().language||e(j).blank!==i().blank)}),ne(()=>(X(i()),ce),()=>{b(u,i().language===ce.None)}),ne(()=>X(i()),()=>{b(n,i().page_number===0)}),ne(()=>(X(i()),e(u),e(n)),()=>{b(D,i().blank||!!(S&&!i().blank&&!e(u)&&!e(n)))}),ne(()=>(X(i()),ce),()=>{i().blank&&(i(i().page_number=0,!0),i(i().language=ce.None,!0))}),ne(()=>(X(i()),_a),()=>{i().language===ce.English?b(N,Ma):i().language===ce.Samoan?b(N,Ea):i().language===ce.Tongan&&b(N,_a)}),ne(()=>e(N),()=>{b(U,e(N).map(_=>({label:`${_.page}. ${_.title}`,value:_.page})))}),Ze(),Me();var se=bt(),Y=c(se);{var ie=_=>{var L=pt(),ee=c(L),s=c(ee);Qe(s);var h=r(s,2);o(ee),Ie(2),o(L),Z(()=>{fe(s,"name",`${m()??""}-none-check`),fe(h,"for",`${m()??""}-none-check`)}),Aa(s,()=>i().blank,l=>i(i().blank=l,!0)),p(_,L)};K(Y,_=>{v()&&_(ie)})}var te=r(Y,2);{var y=_=>{var L=ut(),ee=be(L),s=r(c(ee),2);Z(()=>{i(),Xe(()=>{m(),e(d),e(u)})});let h;var l=r(c(s));Be(l,1,()=>F,je,(Q,J)=>{var g=mt(),C=c(g,!0);o(g);var E={};Z(()=>{ae(C,(e(J),a(()=>e(J).label))),E!==(E=(e(J),a(()=>e(J).value)))&&(g.value=(g.__value=(e(J),a(()=>e(J).value)))??"")}),p(Q,g)}),o(s),o(ee);var me=r(ee,2),re=r(c(me),2);Z(()=>{i(),Xe(()=>{m(),e(d),e(n),e(U)})});let ye;Be(re,5,()=>e(U),je,(Q,J)=>{var g=gt(),C=c(g,!0);o(g);var E={};Z(()=>{ae(C,(e(J),a(()=>e(J).label))),E!==(E=(e(J),a(()=>e(J).value)))&&(g.value=(g.__value=(e(J),a(()=>e(J).value)))??"")}),p(Q,g)}),o(re),o(me),Z(()=>{h=pe(s,1,"form-select",null,h,{"is-invalid":e(u)}),fe(s,"name",`${m()??""}-language`),s.disabled=e(d),ye=pe(re,1,"form-select",null,ye,{"is-invalid":e(n)}),fe(re,"name",m()),re.disabled=(e(d),X(i()),a(()=>e(d)||!i().language))}),la(s,()=>i().language,Q=>i(i().language=Q,!0)),la(re,()=>i().page_number,Q=>i(i().page_number=Q,!0)),p(_,L)};K(te,_=>{X(i()),a(()=>!i().blank)&&_(y)})}var $=r(te,2),w=c($),V=c(w,!0);o(w);var W=r(w,2);let A;var R=c(W);da(R,{size:"xs"}),o(W);var M=r(W,2),q=r(c(M),2);{var x=_=>{var L=_t();p(_,L)};K(q,_=>{e(t)&&_(x)})}o(M),o($),o(se),Z(()=>{pe(w,1,`fw-lighter fst-italic text-${e(I),a(()=>e(I).type)??""}`),ae(V,(e(I),a(()=>e(I).message))),A=pe(W,1,"",null,A,{"d-none":!e(d)})}),ue("click",M,G),p(B,se),Re()}var ft=P('<div class="text-center py-3"><div class="spinner-border spinner-border-sm text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),yt=P('<div class="card-body"><div class="d-flex flex-column gap-3"><div class="btn-group btn-group-sm" role="group" aria-label="Reorder controls"><button type="button" class="btn btn-outline-secondary" title="Move up" aria-label="Move speaker up"><i class="bi bi-arrow-up-circle"></i></button> <button type="button" class="btn btn-outline-secondary" title="Move down" aria-label="Move speaker down"><i class="bi bi-arrow-down-circle"></i></button> <button type="button" class="btn btn-outline-danger" title="Remove" aria-label="Remove speaker"><i class="bi bi-trash"></i></button></div> <!></div></div>'),ht=P('<div class="card border"><div class="card-header bg-secondary bg-opacity-10 d-flex justify-content-between align-items-center py-2 px-3 svelte-1lpd9wu" role="button" tabindex="0"><div class="d-flex align-items-center gap-2 min-w-0" style="max-width: calc(100% - 30px);"><strong class="flex-shrink-0"></strong> <span class="text-body-secondary text-truncate"> </span></div> <i></i></div> <!></div>'),$t=P('<div class="d-flex flex-column gap-3"></div>'),xt=P('<div class="card bg-body-tertiary border-0"><div class="card-body text-center py-4"><i class="bi bi-person-plus fs-1 text-body-secondary mb-3 d-block"></i> <p class="text-body-secondary mb-0">No speakers or musical numbers yet <br/> <small>Click the "Add" button above to get started</small></p></div></div>'),Pt=P('<div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center"><div class="fw-semibold"> </div> <button type="button" class="btn btn-success btn-sm" title="Add participant"><i class="bi bi-plus-circle me-1"></i> Add</button></div> <!></div>');function fa(B,f){Ae(f,!1);let t=z(f,"sacramentProgramId",8,0),u=z(f,"participants",28,()=>[]),n=z(f,"position",8,"after-rest-hymn"),U=z(f,"label",8,""),i=z(f,"max",8,50),m=T(!1),v=T([]);const S=async()=>{if(u().length>=i())return;b(m,!0);const y={description:oa.description,member_given_name:oa.name,role:oa.role},$=await Ba(y);if(!$?.id)return;const w={sacrament_program_id:t(),participant_id:$.id,position:n(),sort_index:u().length};await ja(w),u(await Ye(t(),n())),await Ee(),b(m,!1)},d=async y=>{b(m,!0);const $=u()[y];$?.id&&(await Oa(t(),$.id),await Ua($.id),u(await Ye(t(),n())),await Ee(),b(m,!1))},D=y=>{d(y)},I=async y=>{if(y!==0){b(m,!0);try{const $=u()[y],w=u()[y-1];if(!$?.id||!w?.id){console.error("Missing participant IDs",{current:$,previous:w});return}const V=$.sort_index??y,W=w.sort_index??y-1;await Je(t(),$.id,{sort_index:W}),await Je(t(),w.id,{sort_index:V}),await new Promise(A=>setTimeout(A,1e3)),u(await Ye(t(),n()))}catch($){console.error("Error moving participant up:",$)}finally{await Ee(),b(m,!1)}}},j=async y=>{if(y!==u().length-1){b(m,!0);try{const $=u()[y],w=u()[y+1];if(!$?.id||!w?.id){console.error("Missing participant IDs",{current:$,next:w});return}const V=$.sort_index??y,W=w.sort_index??y+1;await Je(t(),$.id,{sort_index:W}),await Je(t(),w.id,{sort_index:V}),await new Promise(A=>setTimeout(A,1e3)),u(await Ye(t(),n()))}catch($){console.error("Error moving participant down:",$)}finally{await Ee(),b(m,!1)}}};Me();var F=Pt(),N=c(F),k=c(N),G=c(k,!0);o(k);var se=r(k,2);o(N);var Y=r(N,2);{var ie=y=>{var $=ft();p(y,$)},te=y=>{var $=Le(),w=be($);{var V=A=>{var R=$t();Be(R,5,u,je,(M,q,x)=>{var _=ht(),L=c(_),ee=c(L),s=c(ee);s.textContent=`#${x+1}`;var h=r(s,2),l=c(h);o(h),o(ee);var me=r(ee,2);o(L);var re=r(L,2);{var ye=Q=>{var J=yt(),g=c(J),C=c(g),E=c(C),ve=r(E,2),he=r(ve,2);o(C);var ke=r(C,2);we(ke,{label:`Participant #${x+1}`,get presets(){return X(ba),a(()=>ba.speaker)},editableRole:!0,get participant(){return u()[x]},set participant($e){u()[x]=$e,Xe(()=>u())},$$legacy:!0}),o(g),o(J),Z(()=>{E.disabled=x===0||e(m),ve.disabled=(X(u()),e(m),a(()=>x===u().length-1||e(m))),he.disabled=e(m)}),ue("click",E,()=>I(x)),ue("click",ve,()=>j(x)),ue("click",he,()=>D(x)),p(Q,J)};K(re,Q=>{e(v),a(()=>e(v)[x])&&Q(ye)})}o(_),Z(()=>{ae(l,`${u()[x],a(()=>u()[x].name||"TBD")??""}
								${u()[x],a(()=>u()[x].role?` â€¢ ${u()[x].role}`:"")??""}`),pe(me,1,`bi bi-chevron-${e(v),a(()=>e(v)[x]?"up":"down")??""} flex-shrink-0`)}),ue("click",L,()=>Pe(v,e(v)[x]=!e(v)[x])),ue("keydown",L,Q=>{(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),Pe(v,e(v)[x]=!e(v)[x]))}),p(M,_)}),o(R),p(A,R)},W=A=>{var R=xt();p(A,R)};K(w,A=>{X(u()),a(()=>u().length>0)?A(V):A(W,!1)},!0)}p(y,$)};K(Y,y=>{e(m)?y(ie):y(te,!1)})}o(F),Z(()=>{ae(G,U()),se.disabled=e(m)}),ue("click",se,S),p(B,F),Re()}var St=P('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),kt=P('<div class="d-flex flex-column gap-2"><div><label class="form-label"> </label> <select class="form-select"><option>Regular Program</option><option>Fast Sunday</option><option>Primary Program</option><option>Ward Conference</option></select></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span> <button class="btn btn-primary position-relative"><span>Save</span> <!></button></div></div>');function wt(B,f){Ae(f,!1);const t=T();let u=z(f,"sacramentProgramId",8,0),n=z(f,"programType",12,"regular"),U=z(f,"label",8,"Program Type"),i=z(f,"name",8,""),m=T(!1),v=T({message:"",type:"info"}),S=T(n());const d=(q,x=0,_="info")=>{Pe(v,e(v).message=q),Pe(v,e(v).type=_),x&&setTimeout(()=>{Pe(v,e(v).message="")},x)},D=async()=>{if(!e(t)){d("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}try{d("Saving ..."),b(m,!0);const q={program_type:n()};await Fa(u(),q),console.log("Sacrament Program Type updated successfully"),Oe("set_sacrament_program_type_success","interaction",`Set Sacrament Program Type Successful ${n()}`,1),setTimeout(()=>{b(m,!1),b(S,n()),d("Saved",3e3,"success")},800)}catch(q){Oe("set_sacrament_program_type_failed","interaction",`Set Sacrament Program Type Failed ${n()}`,1),setTimeout(()=>{b(m,!1),console.error("Sacrament Program update failed",q),d("Save failed, please reload browser and try again.",7e3,"danger")},800)}};ne(()=>(e(S),X(n())),()=>{b(t,e(S)!==n())}),Ze(),Me();var I=kt(),j=c(I),F=c(j),N=c(F,!0);o(F);var k=r(F,2);Z(()=>{n(),Xe(()=>{i()})});var G=c(k);G.value=G.__value="regular";var se=r(G);se.value=se.__value="fast-sunday";var Y=r(se);Y.value=Y.__value="primary-program";var ie=r(Y);ie.value=ie.__value="ward-conference",o(k),o(j);var te=r(j,2),y=c(te),$=c(y,!0);o(y);var w=r(y,2);let V;var W=c(w);da(W,{size:"xs"}),o(w);var A=r(w,2),R=r(c(A),2);{var M=q=>{var x=St();p(q,x)};K(R,q=>{e(t)&&q(M)})}o(A),o(te),o(I),Z(()=>{fe(F,"for",`${i()??""}-program-type`),ae(N,U()),fe(k,"id",`${i()??""}-program-type`),fe(k,"name",`${i()??""}-program-type`),pe(y,1,`fw-lighter fst-italic text-${e(v),a(()=>e(v).type)??""}`),ae($,(e(v),a(()=>e(v).message))),V=pe(w,1,"",null,V,{"d-none":!e(m)})}),la(k,n),ue("click",A,D),p(B,I),Re()}var It=P('Ward Business <span class="badge bg-secondary-subtle text-secondary-emphasis">Optional</span>',1),Tt=P('Stake Business <span class="badge bg-secondary-subtle text-secondary-emphasis">Optional</span>',1),Ht=P('<div class="text-body-secondary small mb-3">Add speakers, youth speakers, and musical numbers that occur before the rest hymn</div> <!>',1),Dt=P('Rest Hymn <span class="badge bg-secondary-subtle text-secondary-emphasis">Optional</span>',1),Ct=P('<div class="text-body-secondary small mb-3">Add speakers, youth speakers, and musical numbers that occur after the rest hymn</div> <!>',1),Nt=P('<div class="card-header bg-secondary bg-opacity-25 rounded-top py-3 px-4 mt-3"><h6 class="text-uppercase fw-semibold mb-0">Meeting Leadership</h6></div> <!> <!> <!> <!> <!> <div class="card-header bg-secondary bg-opacity-25 rounded-top py-3 px-4 mt-4"><h6 class="text-uppercase fw-semibold mb-0">Opening Portion</h6></div> <!> <!> <!> <!> <div class="card-header bg-secondary bg-opacity-25 rounded-top py-3 px-4 mt-4"><h6 class="text-uppercase fw-semibold mb-0">Sacrament & Program</h6></div> <!> <!> <!> <!> <div class="card-header bg-secondary bg-opacity-25 rounded-top py-3 px-4 mt-4"><h6 class="text-uppercase fw-semibold mb-0">Closing Portion</h6></div> <!> <!>',1),At=P('<div class="d-flex flex-column gap-3"><!></div>');function Rt(B,f){Ae(f,!1);const t=()=>Ne(m,"$ready",U),u=()=>Ne(S,"$currentSacramentId",U),n=()=>Ne(v,"$data",U),[U,i]=ca(),{stores:{ready:m,data:v,currentSacramentId:S},actions:{init:d}}=$a();ea(d),Da(Wa),Me();var D=Le(),I=be(D);{var j=F=>{var N=At(),k=c(N);za(k,{id:"sacrament-form",children:(G,se)=>{var Y=Nt(),ie=r(be(Y),2);de(ie,{id:"testimony-sunday",$$slots:{heading:(s,h)=>{var l=_e("Program Type");p(s,l)},body:(s,h)=>{wt(s,{get sacramentProgramId(){return u()},name:"testimony-sunday",label:"Select the type of Sacrament Program",get programType(){return n().program_type},set programType(l){le(v,a(n).program_type=l,a(n))},$$legacy:!0})}}});var te=r(ie,2);de(te,{id:"presiding",$$slots:{heading:(s,h)=>{var l=_e("Presiding");p(s,l)},body:(s,h)=>{we(s,{label:"Presiding",get presets(){return De.presiding},get participant(){return n().presiding_participant},set participant(l){le(v,a(n).presiding_participant=l,a(n))},$$legacy:!0})}}});var y=r(te,2);de(y,{id:"conducting",$$slots:{heading:(s,h)=>{var l=_e("Conducting");p(s,l)},body:(s,h)=>{we(s,{label:"Conducting",get presets(){return De.conducting},get participant(){return n().conducting_participant},set participant(l){le(v,a(n).conducting_participant=l,a(n))},$$legacy:!0})}}});var $=r(y,2);de($,{id:"chorister",$$slots:{heading:(s,h)=>{var l=_e("Chorister");p(s,l)},body:(s,h)=>{we(s,{label:"Chorister",get presets(){return De.chorister},get participant(){return n().chorister_participant},set participant(l){le(v,a(n).chorister_participant=l,a(n))},$$legacy:!0})}}});var w=r($,2);de(w,{id:"organist",$$slots:{heading:(s,h)=>{var l=_e("Accompanist");p(s,l)},body:(s,h)=>{we(s,{label:"Accompanist",get presets(){return De.organist},get participant(){return n().organist_participant},set participant(l){le(v,a(n).organist_participant=l,a(n))},$$legacy:!0})}}});var V=r(w,4);de(V,{id:"opening-hymn",$$slots:{heading:(s,h)=>{var l=_e("Opening Hymn");p(s,l)},body:(s,h)=>{Ve(s,{name:"sacrament-form-opening-hymn",get hymn(){return n().opening_hymn},set hymn(l){le(v,a(n).opening_hymn=l,a(n))},$$legacy:!0})}}});var W=r(V,2);de(W,{id:"invocation",$$slots:{heading:(s,h)=>{var l=_e("Opening Prayer");p(s,l)},body:(s,h)=>{we(s,{label:"Opening Prayer",get presets(){return De.prayer},get participant(){return n().invocation_participant},set participant(l){le(v,a(n).invocation_participant=l,a(n))},$$legacy:!0})}}});var A=r(W,2);de(A,{id:"conducting-ward-business",$$slots:{heading:(s,h)=>{var l=It();Ie(),p(s,l)},body:(s,h)=>{we(s,{label:"Ward Business",get presets(){return De.wardBusiness},get participant(){return n().conduct_ward_business_participant},set participant(l){le(v,a(n).conduct_ward_business_participant=l,a(n))},$$legacy:!0})}}});var R=r(A,2);de(R,{id:"conducting-stake-business",$$slots:{heading:(s,h)=>{var l=Tt();Ie(),p(s,l)},body:(s,h)=>{we(s,{label:"Stake Business",get presets(){return De.stakeBusiness},get participant(){return n().conduct_stake_business_participant},set participant(l){le(v,a(n).conduct_stake_business_participant=l,a(n))},$$legacy:!0})}}});var M=r(R,4);de(M,{id:"sacrament-hymn",$$slots:{heading:(s,h)=>{var l=_e("Sacrament Hymn");p(s,l)},body:(s,h)=>{Ve(s,{name:"sacrament-form-sacrament-hymn",get hymn(){return n().sacrament_hymn},set hymn(l){le(v,a(n).sacrament_hymn=l,a(n))},$$legacy:!0})}}});var q=r(M,2);de(q,{id:"participants-before-rest-hymn",$$slots:{heading:(s,h)=>{var l=_e("Speakers & Musical Numbers (Part 1)");p(s,l)},body:(s,h)=>{var l=Ht(),me=r(be(l),2);fa(me,{label:"Speakers & Musical Numbers (Part 1)",position:"before-rest-hymn",get sacramentProgramId(){return u()},get participants(){return n().participants_before_rest_hymn},set participants(re){le(v,a(n).participants_before_rest_hymn=re,a(n))},$$legacy:!0}),p(s,l)}}});var x=r(q,2);de(x,{id:"rest-hymn",$$slots:{heading:(s,h)=>{var l=Dt();Ie(),p(s,l)},body:(s,h)=>{Ve(s,{name:"sacrament-form-rest-hymn",nullable:!0,get hymn(){return n().rest_hymn},set hymn(l){le(v,a(n).rest_hymn=l,a(n))},$$legacy:!0})}}});var _=r(x,2);de(_,{id:"participants-after-rest-hymn",$$slots:{heading:(s,h)=>{var l=_e("Speakers & Musical Numbers (Part 2)");p(s,l)},body:(s,h)=>{var l=Ct(),me=r(be(l),2);fa(me,{label:"Speakers & Musical Numbers (Part 2)",position:"after-rest-hymn",get sacramentProgramId(){return u()},get participants(){return n().participants_after_rest_hymn},set participants(re){le(v,a(n).participants_after_rest_hymn=re,a(n))},$$legacy:!0}),p(s,l)}}});var L=r(_,4);de(L,{id:"closing-hymn",$$slots:{heading:(s,h)=>{var l=_e("Closing Hymn");p(s,l)},body:(s,h)=>{Ve(s,{name:"sacrament-form-closing-hymn",get hymn(){return n().closing_hymn},set hymn(l){le(v,a(n).closing_hymn=l,a(n))},$$legacy:!0})}}});var ee=r(L,2);de(ee,{id:"benediction",$$slots:{heading:(s,h)=>{var l=_e("Closing Prayer");p(s,l)},body:(s,h)=>{we(s,{label:"Closing Prayer",get presets(){return De.prayer},get participant(){return n().benediction_participant},set participant(l){le(v,a(n).benediction_participant=l,a(n))},$$legacy:!0})}}}),p(G,Y)},$$slots:{default:!0}}),o(N),p(F,N)};K(I,F=>{t()&&F(j)})}p(B,D),Re(),i()}var Mt=P('<i slot="label" class="bi bi-pencil-square"></i>'),Et=P("<div><!></div>"),Lt=P('<div class="text-center border-top pt-3"><h5>Ward Conference</h5></div>'),Bt=P('<div class="text-center"><h5>Fast Sunday: Bearing of Testimonies</h5></div>'),jt=P('<div class="text-center"><h5>Primary Program</h5></div>'),Ot=P("<!> <!> <!>",1),Ut=P('<div><div class="d-flex justify-content-between"><p class="w-75"> <br/> <small> <a target="_blank"> </a></small></p> <!></div> <!> <div class="d-flex flex-column gap-1 border-top pt-3"><!> <!> <!> <!></div> <div class="d-flex flex-column gap-1 border-top pt-3"><!> <!> <!> <!></div> <div class="d-flex flex-column gap-1 border-top pt-3"><!> <div class="text-center"><h5>Administration of Sacrament</h5></div></div> <div class="d-flex flex-column gap-1 border-top pt-3"><!></div> <div class="d-flex flex-column gap-1 border-top pt-3"><!> <!></div></div>');function Ft(B,f){Ae(f,!1);const t=()=>Ne(I,"$sacramentData",n),u=()=>Ne(j,"$currentUserHasPermission",n),[n,U]=ca(),i=T(),m=T(),v=T(),S=T(),d=T(),{actions:{init:D},stores:{data:I}}=$a(),{stores:{currentUserHasPermission:j}}=ha();let F=T(!1);const N=new Date,k=Za(N),G=tt(N),Y=Ca(k?N:G,"cccc dd MMM"),ie={reference:He.chapel.address.full,link:He.chapel.mapLink},te=He.meetingTimes.sacrament.start,y=He.meetingTimes.sacrament.end;ea(async()=>{await D(),b(F,u()(Na.EditSacramentPrograms))}),ne(()=>t(),()=>{b(i,t()?.program_type||"regular")}),ne(()=>(t(),Ce),()=>{b(m,t()?.opening_hymn?Ke(t().opening_hymn?.page_number,t().opening_hymn.language):Ce)}),ne(()=>(t(),Ce),()=>{b(v,t()?.sacrament_hymn?Ke(t().sacrament_hymn?.page_number,t().sacrament_hymn.language):Ce)}),ne(()=>(t(),Ce),()=>{b(S,t()?.rest_hymn?Ke(t()?.rest_hymn?.page_number,t()?.rest_hymn?.language):Ce)}),ne(()=>(t(),Ce),()=>{b(d,t()?.closing_hymn?Ke(t().closing_hymn?.page_number,t().closing_hymn.language):Ce)}),Ze(),Me();var $=Le(),w=be($);{var V=W=>{var A=Ut(),R=c(A),M=c(R),q=c(M),x=r(q,3),_=c(x),L=r(_),ee=c(L,!0);o(L),o(x),o(M);var s=r(M,2);{var h=H=>{var O=Et(),aa=c(O);Ya(aa,{drawerTitle:"Sacrament Program",id:"sacrament-form",children:(Fe,ta)=>{Rt(Fe,{})},$$slots:{default:!0,label:(Fe,ta)=>{var Te=Mt();p(Fe,Te)}}}),o(O),p(H,O)};K(s,H=>{e(F)&&H(h)})}o(R);var l=r(R,2);{var me=H=>{var O=Lt();p(H,O)};K(l,H=>{e(i)==="ward-conference"&&H(me)})}var re=r(l,2),ye=c(re);{let H=oe(()=>(t(),a(()=>t().presiding_participant?.name))),O=oe(()=>(t(),a(()=>t().presiding_participant?.description)));Se(ye,{assignment:"Presiding",get name(){return e(H)},get details(){return e(O)}})}var Q=r(ye,2);{let H=oe(()=>(t(),a(()=>t().conducting_participant?.name))),O=oe(()=>(t(),a(()=>t().conducting_participant?.description)));Se(Q,{assignment:"Conducting",get name(){return e(H)},get details(){return e(O)}})}var J=r(Q,2);{let H=oe(()=>(t(),a(()=>t().chorister_participant?.name))),O=oe(()=>(t(),a(()=>t().chorister_participant?.description)));Se(J,{assignment:"Chorister",get name(){return e(H)},get details(){return e(O)}})}var g=r(J,2);{let H=oe(()=>(t(),a(()=>t().organist_participant?.name))),O=oe(()=>(t(),a(()=>t().organist_participant?.description)));Se(g,{assignment:"Organist",get name(){return e(H)},get details(){return e(O)}})}o(re);var C=r(re,2),E=c(C);Ge(E,{assignment:"Opening Hymn",get title(){return e(m),a(()=>e(m).title)},get page(){return e(m),a(()=>e(m).page)},get language(){return e(m),a(()=>e(m).language)},get link(){return e(m),a(()=>e(m).link)}});var ve=r(E,2);{let H=oe(()=>(t(),a(()=>t().invocation_participant?.name))),O=oe(()=>(t(),a(()=>t().invocation_participant?.description)));Se(ve,{assignment:"Invocation",get name(){return e(H)},get details(){return e(O)}})}var he=r(ve,2);{let H=oe(()=>(t(),a(()=>t().conduct_ward_business_participant?.name))),O=oe(()=>(t(),a(()=>t().conduct_ward_business_participant?.description)));Se(he,{assignment:"Ward Business",get name(){return e(H)},get details(){return e(O)}})}var ke=r(he,2);{let H=oe(()=>(t(),a(()=>t().conduct_stake_business_participant?.name))),O=oe(()=>(t(),a(()=>t().conduct_stake_business_participant?.description)));Se(ke,{assignment:"Stake Business",get name(){return e(H)},get details(){return e(O)}})}o(C);var $e=r(C,2),qe=c($e);Ge(qe,{assignment:"Sacrament Hymn",get title(){return e(v),a(()=>e(v).title)},get page(){return e(v),a(()=>e(v).page)},get language(){return e(v),a(()=>e(v).language)},get link(){return e(v),a(()=>e(v).link)}}),Ie(2),o($e);var Ue=r($e,2),xa=c(Ue);{var Pa=H=>{var O=Bt();p(H,O)},Sa=H=>{var O=Le(),aa=be(O);{var Fe=Te=>{var ze=jt();p(Te,ze)},ta=Te=>{var ze=Ot(),ma=be(ze);{var wa=xe=>{var We=Le(),ra=be(We);Be(ra,1,()=>(t(),a(()=>t().participants_before_rest_hymn)),je,(na,ge)=>{Se(na,{get assignment(){return e(ge),a(()=>e(ge).role)},get name(){return e(ge),a(()=>e(ge).name)},get details(){return e(ge),a(()=>e(ge).description)}})}),p(xe,We)};K(ma,xe=>{t(),a(()=>t().participants_before_rest_hymn?.length)&&xe(wa)})}var ga=r(ma,2);{var Ia=xe=>{Ge(xe,{assignment:"Rest Hymn",get title(){return e(S),a(()=>e(S).title)},get page(){return e(S),a(()=>e(S).page)},get language(){return e(S),a(()=>e(S).language)},get link(){return e(S),a(()=>e(S).link)}})};K(ga,xe=>{e(S),a(()=>e(S)&&e(S).page!==0)&&xe(Ia)})}var Ta=r(ga,2);{var Ha=xe=>{var We=Le(),ra=be(We);Be(ra,1,()=>(t(),a(()=>t().participants_after_rest_hymn)),je,(na,ge)=>{Se(na,{get assignment(){return e(ge),a(()=>e(ge).role)},get name(){return e(ge),a(()=>e(ge).name)},get details(){return e(ge),a(()=>e(ge).description)}})}),p(xe,We)};K(Ta,xe=>{t(),a(()=>t().participants_after_rest_hymn?.length)&&xe(Ha)})}p(Te,ze)};K(aa,Te=>{e(i)==="primary-program"?Te(Fe):Te(ta,!1)},!0)}p(H,O)};K(xa,H=>{e(i)==="fast-sunday"?H(Pa):H(Sa,!1)})}o(Ue);var va=r(Ue,2),pa=c(va);Ge(pa,{assignment:"Closing Hymn",get title(){return e(d),a(()=>e(d).title)},get page(){return e(d),a(()=>e(d).page)},get language(){return e(d),a(()=>e(d).language)},get link(){return e(d),a(()=>e(d).link)}});var ka=r(pa,2);{let H=oe(()=>(t(),a(()=>t().benediction_participant?.name))),O=oe(()=>(t(),a(()=>t().benediction_participant?.description)));Se(ka,{assignment:"Benediction",get name(){return e(H)},get details(){return e(O)}})}o(va),o(A),Z(()=>{ae(q,`${X(He),a(()=>He.name)??""} | ${X(He),a(()=>He.stake)??""}`),ae(_,`${Y??""},
					${te??""} to ${y??""}, `),fe(L,"href",a(()=>ie?.link)),ae(ee,a(()=>ie?.reference))}),p(W,A)};K(w,W=>{t()&&W(V)})}p(B,$),Re(),U()}var Wt=P('<button class="nav-link" id="nav-cheat-sheet-tab" data-bs-toggle="tab" data-bs-target="#nav-cheat-sheet" type="button" role="tab" aria-controls="nav-cheat-sheet" aria-selected="false">Cheat Sheet</button>'),qt=P('<div class="tab-pane fade" id="nav-cheat-sheet" role="tabpanel" aria-labelledby="nav-cheat-sheet-tab" tabindex="0"><div class="d-flex gap-4 flex-column"><!></div></div>'),zt=P('<nav class="d-print-none"><div class="nav nav-tabs" id="nav-tab" role="tablist"><button class="nav-link active" id="nav-sacrament-program-tab" data-bs-toggle="tab" data-bs-target="#nav-sacrament-program" type="button" role="tab" aria-controls="nav-sacrament-program" aria-selected="true">Program</button> <!> <button class="nav-link" id="nav-announcements-tab" data-bs-toggle="tab" data-bs-target="#nav-announcements" type="button" role="tab" aria-controls="nav-announcements" aria-selected="false">Calendar</button></div></nav> <div class="tab-content" id="nav-tabContent"><div class="tab-pane fade show active" id="nav-sacrament-program" role="tabpanel" aria-labelledby="nav-sacrament-program-tab" tabindex="0"><div class="d-flex gap-4 flex-column"><!> <div class="d-flex flex-column flex-md-row gap-4 olay-info-block svelte-16jl7eu"><!> <!></div></div></div> <!> <div class="tab-pane fade" id="nav-announcements" role="tabpanel" aria-labelledby="nav-announcements-tab" tabindex="0"><div class="d-flex flex-column gap-4"><!> <!></div></div></div>',1);function gr(B,f){Ae(f,!1);const t=()=>Ne(i,"$currentUserIsAdmin",n),u=()=>Ne(m,"$currentUserIsRoot",n),[n,U]=ca(),{stores:{currentUserIsAdmin:i,currentUserIsRoot:m}}=ha();Me(),Ka(B,{pageTitle:"Sacrament",children:(v,S)=>{var d=zt(),D=be(d),I=c(D),j=r(c(I),2);{var F=R=>{var M=Wt();p(R,M)};K(j,R=>{(t()||u())&&R(F)})}Ie(2),o(I),o(D);var N=r(D,2),k=c(N),G=c(k),se=c(G);Ft(se,{});var Y=r(se,2),ie=c(Y);Ga(ie,{});var te=r(ie,2);Va(te,{}),o(Y),o(G),o(k);var y=r(k,2);{var $=R=>{var M=qt(),q=c(M),x=c(q);qa(x,{}),o(q),o(M),p(R,M)};K(y,R=>{(t()||u())&&R($)})}var w=r(y,2),V=c(w),W=c(V);Qa(W,{});var A=r(W,2);Xa(A,{}),o(V),o(w),o(N),p(v,d)},$$slots:{default:!0}}),Re(),U()}export{gr as component,mr as universal};
