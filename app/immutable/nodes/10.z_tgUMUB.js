import{s as ue,d as b,i as P,y as D,B as ne,r as ge,n as $,v as F,p as r,b as f,D as ve,c as _,e as E,A as q,g as H,f as ee,h,j as U,t as te,a as ye,w as V,R as ce}from"../chunks/BRwtC7dL.js";import{S as fe,i as de,t as K,a as Q,g as ke,e as we,d as pe,m as me,c as _e,b as he}from"../chunks/jH9XunBy.js";import{g as be}from"../chunks/DebXK80o.js";import{g as Te}from"../chunks/By7HBROr.js";import{L as Ee}from"../chunks/DRfu6ZcP.js";const Le=!0,Re=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le},Symbol.toStringTag,{value:"Module"}));function Ie(n){let e,t,l='<img src="/assets/logo.png" alt="logo" class="logo svelte-1n4t3wo"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',s,a,o,u,i,c,d,g,v,S,z,C,R,O,k,j,B,N,W='<a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Submit</button>',L,X,le,w=n[7]&&ie(),y=n[6]&&ae(n);function se(p,m){return p[1]==="email"?Ue:He}let Y=se(n),I=Y(n);function re(p,m){return p[5]?Ne:De}let G=re(n),M=G(n),T=n[1]==="email"&&oe();return{c(){e=h("div"),t=h("a"),t.innerHTML=l,s=U(),w&&w.c(),a=U(),o=h("div"),u=h("button"),i=h("i"),c=te(" Email"),g=U(),v=h("button"),S=h("i"),z=te(" Username"),R=U(),y&&y.c(),O=U(),k=h("form"),I.c(),j=U(),M.c(),B=U(),N=h("div"),N.innerHTML=W,L=U(),T&&T.c(),this.h()},l(p){e=_(p,"DIV",{class:!0});var m=E(e);t=_(m,"A",{href:!0,class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1inzn7"&&(t.innerHTML=l),s=H(m),w&&w.l(m),a=H(m),o=_(m,"DIV",{class:!0,role:!0,"aria-label":!0});var J=E(o);u=_(J,"BUTTON",{type:!0,class:!0});var Z=E(u);i=_(Z,"I",{class:!0}),E(i).forEach(b),c=ee(Z," Email"),Z.forEach(b),g=H(J),v=_(J,"BUTTON",{type:!0,class:!0});var x=E(v);S=_(x,"I",{class:!0}),E(S).forEach(b),z=ee(x," Username"),x.forEach(b),J.forEach(b),R=H(m),y&&y.l(m),O=H(m),k=_(m,"FORM",{class:!0});var A=E(k);I.l(A),j=H(A),M.l(A),B=H(A),N=_(A,"DIV",{class:!0,"data-svelte-h":!0}),q(N)!=="svelte-1jydk9b"&&(N.innerHTML=W),A.forEach(b),L=H(m),T&&T.l(m),m.forEach(b),this.h()},h(){r(t,"href","/home"),r(t,"class","header-content d-flex align-items-center gap-2 text-decoration-none svelte-1n4t3wo"),r(i,"class","bi bi-envelope"),r(u,"type","button"),r(u,"class",d="btn "+(n[1]==="email"?"btn-primary":"btn-outline-primary")),r(S,"class","bi bi-person"),r(v,"type","button"),r(v,"class",C="btn "+(n[1]==="username"?"btn-primary":"btn-outline-primary")),r(o,"class","btn-group w-100"),r(o,"role","group"),r(o,"aria-label","Login method"),r(N,"class","d-flex justify-content-between"),r(k,"class","d-flex gap-3 flex-column"),r(e,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-1n4t3wo")},m(p,m){P(p,e,m),f(e,t),f(e,s),w&&w.m(e,null),f(e,a),f(e,o),f(o,u),f(u,i),f(u,c),f(o,g),f(o,v),f(v,S),f(v,z),f(e,R),y&&y.m(e,null),f(e,O),f(e,k),I.m(k,null),f(k,j),M.m(k,null),f(k,B),f(k,N),f(e,L),T&&T.m(e,null),X||(le=[D(u,"click",n[12]),D(v,"click",n[13]),D(k,"submit",ve(n[8]))],X=!0)},p(p,m){p[7]?w||(w=ie(),w.c(),w.m(e,a)):w&&(w.d(1),w=null),m&2&&d!==(d="btn "+(p[1]==="email"?"btn-primary":"btn-outline-primary"))&&r(u,"class",d),m&2&&C!==(C="btn "+(p[1]==="username"?"btn-primary":"btn-outline-primary"))&&r(v,"class",C),p[6]?y?y.p(p,m):(y=ae(p),y.c(),y.m(e,O)):y&&(y.d(1),y=null),Y===(Y=se(p))&&I?I.p(p,m):(I.d(1),I=Y(p),I&&(I.c(),I.m(k,j))),G===(G=re(p))&&M?M.p(p,m):(M.d(1),M=G(p),M&&(M.c(),M.m(k,B))),p[1]==="email"?T||(T=oe(),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:$,o:$,d(p){p&&b(e),w&&w.d(),y&&y.d(),I.d(),M.d(),T&&T.d(),X=!1,F(le)}}}function Me(n){let e,t;return e=new Ee({props:{message:n[6]}}),{c(){he(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,s){me(e,l,s),t=!0},p(l,s){const a={};s&64&&(a.message=l[6]),e.$set(a)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){pe(e,l)}}}function ie(n){let e,t=`<i class="bi bi-clock-history"></i> <div><strong>Session Expired</strong><br/>
					Your authentication token has expired. Please log in again to continue.</div>`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=_(l,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),q(e)!=="svelte-16x316n"&&(e.innerHTML=t),this.h()},h(){r(e,"class","alert alert-warning d-flex align-items-center gap-2"),r(e,"role","alert")},m(l,s){P(l,e,s)},d(l){l&&b(e)}}}function ae(n){let e,t,l,s,a;return{c(){e=h("div"),t=h("i"),l=U(),s=h("div"),a=te(n[6]),this.h()},l(o){e=_(o,"DIV",{class:!0,role:!0});var u=E(e);t=_(u,"I",{class:!0}),E(t).forEach(b),l=H(u),s=_(u,"DIV",{});var i=E(s);a=ee(i,n[6]),i.forEach(b),u.forEach(b),this.h()},h(){r(t,"class","bi bi-exclamation-triangle-fill"),r(e,"class","alert alert-danger d-flex align-items-center gap-2"),r(e,"role","alert")},m(o,u){P(o,e,u),f(e,t),f(e,l),f(e,s),f(s,a)},p(o,u){u&64&&ye(a,o[6])},d(o){o&&b(e)}}}function He(n){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=_(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","text"),r(e,"class","form-control"),r(e,"placeholder","Username"),r(e,"id","user-name"),r(e,"aria-describedby","username")},m(s,a){P(s,e,a),V(e,n[3]),t||(l=[D(e,"input",n[15]),ce(n[11].call(null,e))],t=!0)},p(s,a){a&8&&e.value!==s[3]&&V(e,s[3])},d(s){s&&b(e),t=!1,F(l)}}}function Ue(n){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=_(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","email"),r(e,"class","form-control"),r(e,"placeholder","Email"),r(e,"id","email"),r(e,"aria-describedby","email")},m(s,a){P(s,e,a),V(e,n[2]),t||(l=[D(e,"input",n[14]),ce(n[11].call(null,e))],t=!0)},p(s,a){a&4&&e.value!==s[2]&&V(e,s[2])},d(s){s&&b(e),t=!1,F(l)}}}function De(n){let e,t,l,s,a='<i class="bi bi-eye"></i>',o,u;return{c(){e=h("div"),t=h("input"),l=U(),s=h("button"),s.innerHTML=a,this.h()},l(i){e=_(i,"DIV",{class:!0});var c=E(e);t=_(c,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=H(c),s=_(c,"BUTTON",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-mjb1ay"&&(s.innerHTML=a),c.forEach(b),this.h()},h(){r(t,"type","password"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(i,c){P(i,e,c),f(e,t),V(t,n[4]),f(e,l),f(e,s),o||(u=[D(t,"input",n[17]),D(s,"click",n[9])],o=!0)},p(i,c){c&16&&t.value!==i[4]&&V(t,i[4])},d(i){i&&b(e),o=!1,F(u)}}}function Ne(n){let e,t,l,s,a='<i class="bi bi-eye-slash"></i>',o,u;return{c(){e=h("div"),t=h("input"),l=U(),s=h("button"),s.innerHTML=a,this.h()},l(i){e=_(i,"DIV",{class:!0});var c=E(e);t=_(c,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=H(c),s=_(c,"BUTTON",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-63xbvi"&&(s.innerHTML=a),c.forEach(b),this.h()},h(){r(t,"type","text"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(i,c){P(i,e,c),f(e,t),V(t,n[4]),f(e,l),f(e,s),o||(u=[D(t,"input",n[16]),D(s,"click",n[9])],o=!0)},p(i,c){c&16&&t.value!==i[4]&&V(t,i[4])},d(i){i&&b(e),o=!1,F(u)}}}function oe(n){let e,t=`<small class="text-muted">Don&#39;t have an account?
					<a href="/auth/signup" class="link-primary">Sign up</a></small>`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=_(l,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1gmdti8"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center")},m(l,s){P(l,e,s)},d(l){l&&b(e)}}}function Pe(n){let e,t,l,s,a,o;const u=[Me,Ie],i=[];function c(d,g){return d[0]?0:1}return e=c(n),t=i[e]=u[e](n),{c(){t.c(),l=ne()},l(d){t.l(d),l=ne()},m(d,g){i[e].m(d,g),P(d,l,g),s=!0,a||(o=D(window,"keydown",n[10]),a=!0)},p(d,[g]){let v=e;e=c(d),e===v?i[e].p(d,g):(ke(),K(i[v],1,1,()=>{i[v]=null}),we(),t=i[e],t?t.p(d,g):(t=i[e]=u[e](d),t.c()),Q(t,1),t.m(l.parentNode,l))},i(d){s||(Q(t),s=!0)},o(d){K(t),s=!1},d(d){d&&b(l),i[e].d(d),a=!1,o()}}}function Se(n,e,t){const{actions:{login:l,loginWithEmail:s}}=be();let a=!1,o="email",u="",i="",c="",d=!1,g="",v=!1;ge(()=>{sessionStorage.getItem("authExpired")==="true"&&(t(7,v=!0),sessionStorage.removeItem("authExpired"))});const S=async()=>{t(0,a=!0),t(6,g="");let L=!1;if(o==="email"){if(!u||!c){t(6,g="Email and password are required"),t(0,a=!1);return}L=await s(u,c)}else{if(!i||!c){t(6,g="Username and password are required"),t(0,a=!1);return}L=await l(i,c)}L?(t(6,g="Logging you in ..."),setTimeout(()=>{Te("/home")},1e3)):(t(6,g="Login failed, please try again"),setTimeout(()=>{t(0,a=!1)},1e3))},z=()=>{t(5,d=!d)},C=L=>{L.key==="Enter"&&S()},R=L=>{L.focus()},O=()=>t(1,o="email"),k=()=>t(1,o="username");function j(){u=this.value,t(2,u)}function B(){i=this.value,t(3,i)}function N(){c=this.value,t(4,c)}function W(){c=this.value,t(4,c)}return[a,o,u,i,c,d,g,v,S,z,C,R,O,k,j,B,N,W]}class Ve extends fe{constructor(e){super(),de(this,e,Se,Pe,ue,{})}}function Ce(n){let e,t;return e=new Ve({}),{c(){he(e.$$.fragment)},l(l){_e(e.$$.fragment,l)},m(l,s){me(e,l,s),t=!0},p:$,i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){K(e.$$.fragment,l),t=!1},d(l){pe(e,l)}}}function Oe(n){const{stores:{pageName:e}}=be();return e.set("Auth - Login"),[]}class Fe extends fe{constructor(e){super(),de(this,e,Oe,Ce,ue,{})}}export{Fe as component,Re as universal};
