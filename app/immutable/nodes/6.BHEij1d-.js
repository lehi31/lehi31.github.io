import{s as je,n as Ne,r as jt,k as Mt}from"../chunks/DZwCP9x3.js";import{S as Ke,i as ze,d as k,D as qe,c as H,e as E,f as K,k as x,l as R,n as _e,g as q,r as Y,p as F,E as Te,B as Ee,C as be,F as Lt,y as De,s as ee,o as G,u as X,t as we,a as he,w as Kt,v as zt,b as Fe,m as $e,j as Be,q as Ze}from"../chunks/BGKO8vuC.js";import{P as qt}from"../chunks/FIdkLYcU.js";import{e as ce}from"../chunks/Bjb8qSwe.js";import{s as xt}from"../chunks/DsH82brL.js";import{w as Ft}from"../chunks/wlhN6vKE.js";import{e as et,f as ae}from"../chunks/Coagd8R8.js";function tt(r,e){const t=et(r),n=et(e);return+t==+n}const $t=!0,bn=Object.freeze(Object.defineProperty({__proto__:null,prerender:$t},Symbol.toStringTag,{value:"Module"})),Bt=["Malakai Kalamafoni","Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],Zt="Sacrament Bread Assignments",Gt=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"},{date:new Date(2025,3,20),event:"Easter Sunday"},{date:new Date(2025,11,21),event:"Christmas Sunday"}];var Ce=["MO","TU","WE","TH","FR","SA","SU"],z=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Ce.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Ce[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}(),C=function(r){return r!=null},J=function(r){return typeof r=="number"},rt=function(r){return typeof r=="string"&&Ce.includes(r)},$=Array.isArray,te=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t},_=function(r,e){var t=0,n=[];if($(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},Xt=function(r){return $(r)?r:[r]};function le(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=_(t,e/t.length)),t.slice(0,e)+String(n))}var Qt=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Z=function(r,e){var t=r%e;return t*e<0?t+e:t},Ae=function(r,e){return{div:Math.floor(r/e),mod:Z(r,e)}},V=function(r){return!C(r)||r.length===0},W=function(r){return!V(r)},S=function(r,e){return W(r)&&r.indexOf(e)!==-1},oe=function(r,e,t,n,a,i){return n===void 0&&(n=0),a===void 0&&(a=0),i===void 0&&(i=0),new Date(Date.UTC(r,e-1,t,n,a,i))},Jt=[31,28,31,30,31,30,31,31,30,31,30,31],Yt=1e3*60*60*24,At=9999,Ut=oe(1970,1,1),Vt=[6,0,1,2,3,4,5],pe=function(r){return r%4===0&&r%100!==0||r%400===0},Nt=function(r){return r instanceof Date},ve=function(r){return Nt(r)&&!isNaN(r.getTime())},er=function(r,e){var t=r.getTime(),n=e.getTime(),a=t-n;return Math.round(a/Yt)},Re=function(r){return er(r,Ut)},Ct=function(r){return new Date(Ut.getTime()+r*Yt)},tr=function(r){var e=r.getUTCMonth();return e===1&&pe(r.getUTCFullYear())?29:Jt[e]},de=function(r){return Vt[r.getUTCDay()]},nt=function(r,e){var t=oe(r,e+1,1);return[de(t),tr(t)]},Rt=function(r,e){return e=e||r,new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Ie=function(r){var e=new Date(r.getTime());return e},at=function(r){for(var e=[],t=0;t<r.length;t++)e.push(Ie(r[t]));return e},ge=function(r){r.sort(function(e,t){return e.getTime()-t.getTime()})},Ge=function(r,e){e===void 0&&(e=!0);var t=new Date(r);return[le(t.getUTCFullYear().toString(),4,"0"),le(t.getUTCMonth()+1,2,"0"),le(t.getUTCDate(),2,"0"),"T",le(t.getUTCHours(),2,"0"),le(t.getUTCMinutes(),2,"0"),le(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},Xe=function(r){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(r);if(!t)throw new Error("Invalid UNTIL value: ".concat(r));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},it=function(r,e){var t=r.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},rr=function(r,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(it(r,t)),a=new Date(it(r,e??"UTC")),i=a.getTime()-n.getTime();return new Date(r.getTime()-i)},fe=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),We=function(r,e){return We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])},We(r,e)};function Qe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");We(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var B=function(){return B=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},B.apply(this,arguments)};function p(r,e,t){if(t||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))}var st=function(r){Qe(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.iterator=a,i}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(fe),Se={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},ot=function(r,e){return r.indexOf(e)!==-1},nr=function(r){return r.toString()},ar=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},ne=function(){function r(e,t,n,a){if(t===void 0&&(t=nr),n===void 0&&(n=Se),a===void 0&&(a=ar),this.text=[],this.language=n||Se,this.gettext=t,this.dateFormatter=a,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var i=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);i.sort(function(h,l){return h-l}),s.sort(function(h,l){return l-h}),this.bymonthday=i.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(C(this.origOptions.byweekday)){var o=$(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(h){return!h.n}),someWeeks:o.filter(function(h){return!!h.n}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var d=function(h,l){return h.weekday-l.weekday};this.byweekday.allWeeks.sort(d),this.byweekday.someWeeks.sort(d),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(ot(["dtstart","tzid","wkst","freq"],n))return!0;if(!ot(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[b.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var a=Math.abs(e);switch(a){case 1:case 21:case 31:t=a+n("st");break;case 2:case 22:t=a+n("nd");break;case 3:case 23:t=a+n("rd");break;default:t=a+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=J(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,a){var i=this;a===void 0&&(a=","),$(e)||(e=[e]);var s=function(u,d,h){for(var l="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?l+=" "+h+" ":l+=d+" "),l+=u[f];return l};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(i,u)};return n?s(e.map(o),a,n):e.map(o).join(a+" ")},r}(),ir=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var a in this.rules){n=this.rules[a];var i=n.exec(this.text);i&&(e===null||i[0].length>e[0].length)&&(e=i,t=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function It(r,e){e===void 0&&(e=Se);var t={},n=new ir(e.tokens);if(!n.start(r))return null;return a(),t;function a(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=b.DAILY,n.nextSymbol()&&(s(),l());break;case"weekday(s)":t.freq=b.WEEKLY,t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR],n.nextSymbol(),s(),l();break;case"week(s)":t.freq=b.WEEKLY,n.nextSymbol()&&(i(),s(),l());break;case"hour(s)":t.freq=b.HOURLY,n.nextSymbol()&&(i(),l());break;case"minute(s)":t.freq=b.MINUTELY,n.nextSymbol()&&(i(),l());break;case"month(s)":t.freq=b.MONTHLY,n.nextSymbol()&&(i(),l());break;case"year(s)":t.freq=b.YEARLY,n.nextSymbol()&&(i(),l());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=b.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[b[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var c=u();if(!c)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(b[c]),n.nextSymbol()}s(),h(),l();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=b.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}i(),l();break;default:throw new Error("Unknown symbol")}}function i(){var f=n.accept("on"),y=n.accept("the");if(f||y)do{var c=d(),m=u(),v=o();if(c)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(b[m].nth(c))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(c),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(b[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[b.MO,b.TU,b.WE,b.TH,b.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var g=n.acceptNumber();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(g[0],10)];n.accept("comma");){if(g=n.acceptNumber(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(g[0],10))}}else if(v)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(v);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var f=n.accept("at");if(f)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function d(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function h(){n.accept("on"),n.accept("the");var f=d();if(f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=d(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function l(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var T;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(T||(T={}));function Je(r){return r<T.HOURLY}var sr=function(r,e){return e===void 0&&(e=Se),new b(It(r,e)||void 0)},ye=["count","until","interval","byweekday","bymonthday","bymonth"];ne.IMPLEMENTED=[];ne.IMPLEMENTED[T.HOURLY]=ye;ne.IMPLEMENTED[T.MINUTELY]=ye;ne.IMPLEMENTED[T.DAILY]=["byhour"].concat(ye);ne.IMPLEMENTED[T.WEEKLY]=ye;ne.IMPLEMENTED[T.MONTHLY]=ye;ne.IMPLEMENTED[T.YEARLY]=["byweekno","byyearday"].concat(ye);var or=function(r,e,t,n){return new ne(r,e,t,n).toString()},ur=ne.isFullyConvertible,Oe=function(){function r(e,t,n,a){this.hour=e,this.minute=t,this.second=n,this.millisecond=a||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}(),lr=function(r){Qe(e,r);function e(t,n,a,i,s,o,u){var d=r.call(this,i,s,o,u)||this;return d.year=t,d.month=n,d.day=a,d}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return de(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),a=Z(this.month,12);this.month=a,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,a){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var i=Ae(this.hour,24),s=i.div,o=i.mod;if(s&&(this.hour=o,this.addDaily(s)),V(a)||S(a,this.hour))break}},e.prototype.addMinutes=function(t,n,a,i){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var s=Ae(this.minute,60),o=s.div,u=s.mod;if(o&&(this.minute=u,this.addHours(o,!1,a)),(V(a)||S(a,this.hour))&&(V(i)||S(i,this.minute)))break}},e.prototype.addSeconds=function(t,n,a,i,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Ae(this.second,60),u=o.div,d=o.mod;if(u&&(this.second=d,this.addMinutes(u,!1,a,i)),(V(a)||S(a,this.hour))&&(V(i)||S(i,this.minute))&&(V(s)||S(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=nt(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>At))return;t=nt(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var a=t.freq,i=t.interval,s=t.wkst,o=t.byhour,u=t.byminute,d=t.bysecond;switch(a){case T.YEARLY:return this.addYears(i);case T.MONTHLY:return this.addMonths(i);case T.WEEKLY:return this.addWeekly(i,s);case T.DAILY:return this.addDaily(i);case T.HOURLY:return this.addHours(i,n,o);case T.MINUTELY:return this.addMinutes(i,n,o,u);case T.SECONDLY:return this.addSeconds(i,n,o,u,d)}},e}(Oe);function Wt(r){for(var e=[],t=Object.keys(r),n=0,a=t;n<a.length;n++){var i=a[n];S(Hr,i)||e.push(i),Nt(r[i])&&!ve(r[i])&&e.push(i)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return B({},r)}function fr(r){var e=B(B({},Ve),Wt(r));if(C(e.byeaster)&&(e.freq=b.YEARLY),!(C(e.freq)&&b.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),C(e.wkst)?J(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=b.MO.weekday,C(e.bysetpos)){J(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||W(e.byweekno)||W(e.byyearday)||e.bymonthday||W(e.bymonthday)||C(e.byweekday)||C(e.byeaster)))switch(e.freq){case b.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case b.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case b.WEEKLY:e.byweekday=[de(e.dtstart)];break}if(C(e.bymonth)&&!$(e.bymonth)&&(e.bymonth=[e.bymonth]),C(e.byyearday)&&!$(e.byyearday)&&J(e.byyearday)&&(e.byyearday=[e.byyearday]),!C(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if($(e.bymonthday)){for(var a=[],i=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?a.push(n):n<0&&i.push(n)}e.bymonthday=a,e.bynmonthday=i}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(C(e.byweekno)&&!$(e.byweekno)&&(e.byweekno=[e.byweekno]),!C(e.byweekday))e.bynweekday=null;else if(J(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(rt(e.byweekday))e.byweekday=[z.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof z)!e.byweekday.n||e.freq>b.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(J(u)){s.push(u);continue}else if(rt(u)){s.push(z.fromStr(u).weekday);continue}!u.n||e.freq>b.MONTHLY?s.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=W(s)?s:null,e.bynweekday=W(o)?o:null}return C(e.byhour)?J(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<b.HOURLY?[e.dtstart.getUTCHours()]:null,C(e.byminute)?J(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<b.MINUTELY?[e.dtstart.getUTCMinutes()]:null,C(e.bysecond)?J(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<b.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function hr(r){var e=r.dtstart.getTime()%1e3;if(!Je(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(a){r.bysecond.forEach(function(i){t.push(new Oe(n,a,i,e))})})}),t}function He(r){var e=r.split(`
`).map(cr).filter(function(t){return t!==null});return B(B({},e[0]),e[1])}function Me(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],a=t[2];return n&&(e.tzid=n),e.dtstart=Xe(a),e}function cr(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return ut(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return ut(r);case"DTSTART":return Me(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function ut(r){var e=r.replace(/^RRULE:/i,""),t=Me(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(a){var i=a.split("="),s=i[0],o=i[1];switch(s.toUpperCase()){case"FREQ":t.freq=T[o.toUpperCase()];break;case"WKST":t.wkst=Q[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=dr(o),d=s.toLowerCase();t[d]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=yr(o);break;case"DTSTART":case"TZID":var h=Me(r);t.tzid=h.tzid,t.dtstart=h.dtstart;break;case"UNTIL":t.until=Xe(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),t}function dr(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(lt)}return lt(r)}function lt(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function yr(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return Q[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var a=Number(n[1]),i=n[2],s=Q[i].weekday;return new z(s,a)})}var Le=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=Ge(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){return this.isUTC?this.date:rr(this.date,this.tzid)},r}();function Pe(r){for(var e=[],t="",n=Object.keys(r),a=Object.keys(Ve),i=0;i<n.length;i++)if(n[i]!=="tzid"&&S(a,n[i])){var s=n[i].toUpperCase(),o=r[n[i]],u="";if(!(!C(o)||$(o)&&!o.length)){switch(s){case"FREQ":u=b.FREQUENCIES[r.freq];break;case"WKST":J(o)?u=new z(o).toString():u=o.toString();break;case"BYWEEKDAY":s="BYDAY",u=Xt(o).map(function(y){return y instanceof z?y:$(y)?new z(y[0],y[1]):new z(y)}).toString();break;case"DTSTART":t=mr(o,r.tzid);break;case"UNTIL":u=Ge(o,!r.tzid);break;default:if($(o)){for(var d=[],h=0;h<o.length;h++)d[h]=String(o[h]);u=d.toString()}else u=String(o)}u&&e.push([s,u])}}var l=e.map(function(y){var c=y[0],m=y[1];return"".concat(c,"=").concat(m.toString())}).join(";"),f="";return l!==""&&(f="RRULE:".concat(l)),[t,f].filter(function(y){return!!y}).join(`
`)}function mr(r,e){return r?"DTSTART"+new Le(new Date(r),e).toString():""}function vr(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var pr=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?Ie(t):at(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,a=t?Object.keys(t):[],i=function(h){for(var l=0;l<a.length;l++){var f=a[l];if(!vr(t[f],h[f]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if($(s))for(var o=0;o<s.length;o++){var u=s[o];if(!(a.length&&i(u))){n=u._value;break}}if(!n&&this.all){for(var d=new fe(e,t),o=0;o<this.all.length&&d.accept(this.all[o]);o++);n=d.getValue(),this._cacheAdd(e,n,t)}return $(n)?at(n):n instanceof Date?Ie(n):n},r}(),br=p(p(p(p(p(p(p(p(p(p(p(p(p([],_(1,31),!0),_(2,28),!0),_(3,31),!0),_(4,30),!0),_(5,31),!0),_(6,30),!0),_(7,31),!0),_(8,31),!0),_(9,30),!0),_(10,31),!0),_(11,30),!0),_(12,31),!0),_(1,7),!0),wr=p(p(p(p(p(p(p(p(p(p(p(p(p([],_(1,31),!0),_(2,29),!0),_(3,31),!0),_(4,30),!0),_(5,31),!0),_(6,30),!0),_(7,31),!0),_(8,31),!0),_(9,30),!0),_(10,31),!0),_(11,30),!0),_(12,31),!0),_(1,7),!0),gr=te(1,29),kr=te(1,30),ie=te(1,31),P=te(1,32),Er=p(p(p(p(p(p(p(p(p(p(p(p(p([],P,!0),kr,!0),P,!0),ie,!0),P,!0),ie,!0),P,!0),P,!0),ie,!0),P,!0),ie,!0),P,!0),P.slice(0,7),!0),_r=p(p(p(p(p(p(p(p(p(p(p(p(p([],P,!0),gr,!0),P,!0),ie,!0),P,!0),ie,!0),P,!0),P,!0),ie,!0),P,!0),ie,!0),P,!0),P.slice(0,7),!0),Tr=te(-28,0),Dr=te(-29,0),se=te(-30,0),j=te(-31,0),Sr=p(p(p(p(p(p(p(p(p(p(p(p(p([],j,!0),Dr,!0),j,!0),se,!0),j,!0),se,!0),j,!0),j,!0),se,!0),j,!0),se,!0),j,!0),j.slice(0,7),!0),Or=p(p(p(p(p(p(p(p(p(p(p(p(p([],j,!0),Tr,!0),j,!0),se,!0),j,!0),se,!0),j,!0),j,!0),se,!0),j,!0),se,!0),j,!0),j.slice(0,7),!0),Mr=[0,31,60,91,121,152,182,213,244,274,305,335,366],Lr=[0,31,59,90,120,151,181,212,243,273,304,334,365],ft=function(){for(var r=[],e=0;e<55;e++)r=r.concat(te(7));return r}();function xr(r,e){var t=oe(r,1,1),n=pe(r)?366:365,a=pe(r+1)?366:365,i=Re(t),s=de(t),o=B(B({yearlen:n,nextyearlen:a,yearordinal:i,yearweekday:s},Yr(r)),{wnomask:null});if(V(e.byweekno))return o;o.wnomask=_(0,n+7);var u,d,h=u=Z(7-s+e.wkst,7);h>=4?(h=0,d=o.yearlen+Z(s-e.wkst,7)):d=n-h;for(var l=Math.floor(d/7),f=Z(d,7),y=Math.floor(l+f/4),c=0;c<e.byweekno.length;c++){var m=e.byweekno[c];if(m<0&&(m+=y+1),m>0&&m<=y){var v=void 0;m>1?(v=h+(m-1)*7,h!==u&&(v-=7-u)):v=h;for(var g=0;g<7&&(o.wnomask[v]=1,v++,o.wdaymask[v]!==e.wkst);g++);}}if(S(e.byweekno,1)){var v=h+y*7;if(h!==u&&(v-=7-u),v<n)for(var c=0;c<7&&(o.wnomask[v]=1,v+=1,o.wdaymask[v]!==e.wkst);c++);}if(h){var D=void 0;if(S(e.byweekno,-1))D=-1;else{var L=de(oe(r-1,1,1)),N=Z(7-L.valueOf()+e.wkst,7),A=pe(r-1)?366:365,w=void 0;N>=4?(N=0,w=A+Z(L-e.wkst,7)):w=n-h,D=Math.floor(52+Z(w,7)/4)}if(S(e.byweekno,D))for(var v=0;v<h;v++)o.wnomask[v]=1}return o}function Yr(r){var e=pe(r)?366:365,t=oe(r,1,1),n=de(t);return e===365?{mmask:br,mdaymask:_r,nmdaymask:Or,wdaymask:ft.slice(n),mrange:Lr}:{mmask:wr,mdaymask:Er,nmdaymask:Sr,wdaymask:ft.slice(n),mrange:Mr}}function Ar(r,e,t,n,a,i){var s={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(i.freq===b.YEARLY)if(V(i.bymonth))o=[[0,t]];else for(var u=0;u<i.bymonth.length;u++)e=i.bymonth[u],o.push(n.slice(e-1,e+1));else i.freq===b.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(V(o))return s;s.nwdaymask=_(0,t);for(var u=0;u<o.length;u++)for(var d=o[u],h=d[0],l=d[1]-1,f=0;f<i.bynweekday.length;f++){var y=void 0,c=i.bynweekday[f],m=c[0],v=c[1];v<0?(y=l+(v+1)*7,y-=Z(a[y]-m,7)):(y=h+(v-1)*7,y+=Z(7-a[y]+m,7)),h<=y&&y<=l&&(s.nwdaymask[y]=1)}return s}function Ur(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),a=r%100,i=Math.floor(n/4),s=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),d=Math.floor(19*t+n-i-u+15)%30,h=Math.floor(a/4),l=a%4,f=Math.floor(32+2*s+2*h-d-l)%7,y=Math.floor((t+11*d+22*f)/451),c=Math.floor((d+f-7*y+114)/31),m=(d+f-7*y+114)%31+1,v=Date.UTC(r,c-1,m+e),g=Date.UTC(r,0,1);return[Math.ceil((v-g)/(1e3*60*60*24))]}var Nr=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=xr(e,n)),W(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var a=this.yearinfo,i=a.yearlen,s=a.mrange,o=a.wdaymask;this.monthinfo=Ar(e,t,i,s,o,n)}C(n.byeaster)&&(this.eastermask=Ur(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[te(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],a=this.mrange[t],i=_(null,this.yearlen),s=n;s<a;s++)i[s]=s;return[i,n,a]},r.prototype.wdayset=function(e,t,n){for(var a=_(null,this.yearlen+7),i=Re(oe(e,t,n))-this.yearordinal,s=i,o=0;o<7&&(a[i]=i,++i,this.wdaymask[i]!==this.options.wkst);o++);return[a,s,i]},r.prototype.ddayset=function(e,t,n){var a=_(null,this.yearlen),i=Re(oe(e,t,n))-this.yearordinal;return a[i]=i,[a,i,i+1]},r.prototype.htimeset=function(e,t,n,a){var i=this,s=[];return this.options.byminute.forEach(function(o){s=s.concat(i.mtimeset(e,o,n,a))}),ge(s),s},r.prototype.mtimeset=function(e,t,n,a){var i=this.options.bysecond.map(function(s){return new Oe(e,t,s,a)});return ge(i),i},r.prototype.stimeset=function(e,t,n,a){return[new Oe(e,t,n,a)]},r.prototype.getdayset=function(e){switch(e){case T.YEARLY:return this.ydayset.bind(this);case T.MONTHLY:return this.mdayset.bind(this);case T.WEEKLY:return this.wdayset.bind(this);case T.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case T.HOURLY:return this.htimeset.bind(this);case T.MINUTELY:return this.mtimeset.bind(this);case T.SECONDLY:return this.stimeset.bind(this)}},r}();function Cr(r,e,t,n,a,i){for(var s=[],o=0;o<r.length;o++){var u=void 0,d=void 0,h=r[o];h<0?(u=Math.floor(h/e.length),d=Z(h,e.length)):(u=Math.floor((h-1)/e.length),d=Z(h-1,e.length));for(var l=[],f=t;f<n;f++){var y=i[f];C(y)&&l.push(y)}var c=void 0;u<0?c=l.slice(u)[0]:c=l[u];var m=e[d],v=Ct(a.yearordinal+c),g=Rt(v,m);S(s,g)||s.push(g)}return ge(s),s}function Ht(r,e){var t=e.dtstart,n=e.freq,a=e.interval,i=e.until,s=e.bysetpos,o=e.count;if(o===0||a===0)return re(r);var u=lr.fromDate(t),d=new Nr(e);d.rebuild(u.year,u.month);for(var h=Wr(d,u,e);;){var l=d.getdayset(n)(u.year,u.month,u.day),f=l[0],y=l[1],c=l[2],m=Ir(f,y,c,d,e);if(W(s))for(var v=Cr(s,h,y,c,d,f),g=0;g<v.length;g++){var D=v[g];if(i&&D>i)return re(r);if(D>=t){var L=ht(D,e);if(!r.accept(L)||o&&(--o,!o))return re(r)}}else for(var g=y;g<c;g++){var N=f[g];if(C(N))for(var A=Ct(d.yearordinal+N),w=0;w<h.length;w++){var U=h[w],D=Rt(A,U);if(i&&D>i)return re(r);if(D>=t){var L=ht(D,e);if(!r.accept(L)||o&&(--o,!o))return re(r)}}}if(e.interval===0||(u.add(e,m),u.year>At))return re(r);Je(n)||(h=d.gettimeset(n)(u.hour,u.minute,u.second,0)),d.rebuild(u.year,u.month)}}function Rr(r,e,t){var n=t.bymonth,a=t.byweekno,i=t.byweekday,s=t.byeaster,o=t.bymonthday,u=t.bynmonthday,d=t.byyearday;return W(n)&&!S(n,r.mmask[e])||W(a)&&!r.wnomask[e]||W(i)&&!S(i,r.wdaymask[e])||W(r.nwdaymask)&&!r.nwdaymask[e]||s!==null&&!S(r.eastermask,e)||(W(o)||W(u))&&!S(o,r.mdaymask[e])&&!S(u,r.nmdaymask[e])||W(d)&&(e<r.yearlen&&!S(d,e+1)&&!S(d,-r.yearlen+e)||e>=r.yearlen&&!S(d,e+1-r.yearlen)&&!S(d,-r.nextyearlen+e-r.yearlen))}function ht(r,e){return new Le(r,e.tzid).rezonedDate()}function re(r){return r.getValue()}function Ir(r,e,t,n,a){for(var i=!1,s=e;s<t;s++){var o=r[s];i=Rr(n,o,a),i&&(r[o]=null)}return i}function Wr(r,e,t){var n=t.freq,a=t.byhour,i=t.byminute,s=t.bysecond;return Je(n)?hr(t):n>=b.HOURLY&&W(a)&&!S(a,e.hour)||n>=b.MINUTELY&&W(i)&&!S(i,e.minute)||n>=b.SECONDLY&&W(s)&&!S(s,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var Q={MO:new z(0),TU:new z(1),WE:new z(2),TH:new z(3),FR:new z(4),SA:new z(5),SU:new z(6)},Ve={freq:T.YEARLY,dtstart:null,interval:1,wkst:Q.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Hr=Object.keys(Ve),b=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new pr,this.origOptions=Wt(e);var n=fr(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return It(e,t)},r.fromText=function(e,t){return sr(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Ht(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new st("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new fe("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,a){if(n===void 0&&(n=!1),!ve(e)||!ve(t))throw new Error("Invalid date passed in to RRule.between");var i={before:t,after:e,inc:n};if(a)return this._iter(new st("between",i,a));var s=this._cacheGet("between",i);return s===!1&&(s=this._iter(new fe("between",i)),this._cacheAdd("between",s,i)),s},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!ve(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},a=this._cacheGet("before",n);return a===!1&&(a=this._iter(new fe("before",n)),this._cacheAdd("before",a,n)),a},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!ve(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},a=this._cacheGet("after",n);return a===!1&&(a=this._iter(new fe("after",n)),this._cacheAdd("after",a,n)),a},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Pe(this.origOptions)},r.prototype.toText=function(e,t,n){return or(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return ur(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=T.YEARLY,r.MONTHLY=T.MONTHLY,r.WEEKLY=T.WEEKLY,r.DAILY=T.DAILY,r.HOURLY=T.HOURLY,r.MINUTELY=T.MINUTELY,r.SECONDLY=T.SECONDLY,r.MO=Q.MO,r.TU=Q.TU,r.WE=Q.WE,r.TH=Q.TH,r.FR=Q.FR,r.SA=Q.SA,r.SU=Q.SU,r.parseString=He,r.optionsToString=Pe,r}();function Pr(r,e,t,n,a,i){var s={},o=r.accept;function u(f,y){t.forEach(function(c){c.between(f,y,!0).forEach(function(m){s[Number(m)]=!0})})}a.forEach(function(f){var y=new Le(f,i).rezonedDate();s[Number(y)]=!0}),r.accept=function(f){var y=Number(f);return isNaN(y)?o.call(this,f):!s[y]&&(u(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var y=Number(f);return s[y]?!0:(s[y]=!0,o.call(this,f))});for(var d=0;d<n.length;d++){var h=new Le(n[d],i).rezonedDate();if(!r.accept(new Date(h.getTime())))break}e.forEach(function(f){Ht(r,f.options)});var l=r._result;switch(ge(l),r.method){case"all":case"between":return l;case"before":return l.length&&l[l.length-1]||null;case"after":default:return l.length&&l[0]||null}}var ct={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function jr(r,e){var t=[],n=[],a=[],i=[],s=Me(r),o=s.dtstart,u=s.tzid,d=$r(r,e.unfold);return d.forEach(function(h){var l;if(h){var f=Fr(h),y=f.name,c=f.parms,m=f.value;switch(y.toUpperCase()){case"RRULE":if(c.length)throw new Error("unsupported RRULE parm: ".concat(c.join(",")));t.push(He(h));break;case"RDATE":var v=(l=/RDATE(?:;TZID=([^:=]+))?/i.exec(h))!==null&&l!==void 0?l:[],g=v[1];g&&!u&&(u=g),n=n.concat(yt(m,c));break;case"EXRULE":if(c.length)throw new Error("unsupported EXRULE parm: ".concat(c.join(",")));a.push(He(m));break;case"EXDATE":i=i.concat(yt(m,c));break;case"DTSTART":break;default:throw new Error("unsupported property: "+y)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:a,exdatevals:i}}function Kr(r,e){var t=jr(r,e),n=t.rrulevals,a=t.rdatevals,i=t.exrulevals,s=t.exdatevals,o=t.dtstart,u=t.tzid,d=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||a.length||i.length||s.length){var h=new Zr(d);return h.dtstart(o),h.tzid(u||void 0),n.forEach(function(f){h.rrule(new b(Ue(f,o,u),d))}),a.forEach(function(f){h.rdate(f)}),i.forEach(function(f){h.exrule(new b(Ue(f,o,u),d))}),s.forEach(function(f){h.exdate(f)}),e.compatible&&e.dtstart&&h.rdate(o),h}var l=n[0]||{};return new b(Ue(l,l.dtstart||e.dtstart||o,l.tzid||e.tzid||u),d)}function dt(r,e){return e===void 0&&(e={}),Kr(r,zr(e))}function Ue(r,e,t){return B(B({},r),{dtstart:e,tzid:t})}function zr(r){var e=[],t=Object.keys(r),n=Object.keys(ct);if(t.forEach(function(a){S(n,a)||e.push(a)}),e.length)throw new Error("Invalid options: "+e.join(", "));return B(B({},ct),r)}function qr(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=Qt(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function Fr(r){var e=qr(r),t=e.name,n=e.value,a=t.split(";");if(!a)throw new Error("empty property name");return{name:a[0].toUpperCase(),parms:a.slice(1),value:n}}function $r(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var a=t[n]=t[n].replace(/\s+$/g,"");a?n>0&&a[0]===" "?(t[n-1]+=a.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function Br(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function yt(r,e){return Br(e),r.split(",").map(function(t){return Xe(t)})}function mt(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var a=e._rrule[n].origOptions[r];if(a)return a}}}var Zr=function(r){Qe(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=mt.apply(n,["dtstart"]),n.tzid=mt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return Pr(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){vt(t,this._rrule)},e.prototype.exrule=function(t){vt(t,this._exrule)},e.prototype.rdate=function(t){pt(t,this._rdate)},e.prototype.exdate=function(t){pt(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return dt(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return dt(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Pe({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(a){return a.replace(/^RRULE:/,"EXRULE:")}).filter(function(a){return!/^DTSTART/.test(a)}))}),this._rdate.length&&t.push(bt("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(bt("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(b);function vt(r,e){if(!(r instanceof b))throw new TypeError(String(r)+" is not RRule instance");S(e.map(String),String(r))||e.push(r)}function pt(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");S(e.map(Number),Number(r))||(e.push(r),ge(e))}function bt(r,e,t){var n=!t||t.toUpperCase()==="UTC",a=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),i=e.map(function(s){return Ge(s.valueOf(),n)}).join(",");return"".concat(a).concat(i)}const Gr={Sundays:({start_date:r,until:e})=>new b({freq:b.WEEKLY,dtstart:r,until:e,byweekday:[b.SU]})},Xr=(r,e)=>r(e).all(),Qr=r=>{const e=r.getMonth(),t=r.getFullYear();let n=0;for(let a=1;a<=31;a++){const i=new Date(t,e,a);if(i.getMonth()!==e)break;if(i.getDay()===0&&(n++,i.getDate()===r.getDate())){const s=["st","nd","rd","th"],o=n<=3?s[n-1]:s[3];return`${n}${o}`}}return""},Jr=Ft([]);async function Pt(r){const{data:e,error:t}=await xt.from("assignments").select("*").eq("list_name",r).order("date");if(t)throw t;const n=e||[];return Jr.set(n),n}async function Vr(r,e,t){const{error:n}=await xt.from("assignments").upsert([{list_name:r,date:e,overridden_member:t,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(n)throw n;await Pt(r)}function wt(r,e,t){const n=r.slice();return n[11]=e[t],n[12]=e,n[13]=t,n}function gt(r,e,t){const n=r.slice();return n[14]=e[t],n}function en(r){let e,t=ae(r[11].date,"MMM dd")+"",n,a,i,s=r[11].sundayNumber+"",o,u,d=ae(r[11].date,"EEEE")+"",h,l,f,y,c,m=(r[11].overridden_member?r[11].overridden_member:r[11].member)+"",v,g,D=r[11].overridden_member?"*":"",L,N,A;return{c(){e=Y("td"),n=X(t),a=F(),i=Y("small"),o=X(s),u=F(),h=X(d),l=F(),f=Y("td"),y=Y("div"),c=Y("span"),v=X(m),g=F(),L=X(D),N=F(),A=Y("i"),this.h()},l(w){e=x(w,"TD",{});var U=R(e);n=G(U,t),a=q(U),i=x(U,"SMALL",{class:!0});var ue=R(i);o=G(ue,s),u=q(ue),h=G(ue,d),ue.forEach(k),U.forEach(k),l=q(w),f=x(w,"TD",{});var O=R(f);y=x(O,"DIV",{class:!0});var I=R(y);c=x(I,"SPAN",{});var M=R(c);v=G(M,m),g=q(M),L=G(M,D),M.forEach(k),N=q(I),A=x(I,"I",{class:!0}),R(A).forEach(k),I.forEach(k),O.forEach(k),this.h()},h(){K(i,"class","fw-lighter"),K(A,"class","bi bi-pencil-square"),K(y,"class","d-flex justify-content-between")},m(w,U){H(w,e,U),E(e,n),E(e,a),E(e,i),E(i,o),E(i,u),E(i,h),H(w,l,U),H(w,f,U),E(f,y),E(y,c),E(c,v),E(c,g),E(c,L),E(y,N),E(y,A)},p(w,U){U&2&&t!==(t=ae(w[11].date,"MMM dd")+"")&&ee(n,t),U&2&&s!==(s=w[11].sundayNumber+"")&&ee(o,s),U&2&&d!==(d=ae(w[11].date,"EEEE")+"")&&ee(h,d),U&2&&m!==(m=(w[11].overridden_member?w[11].overridden_member:w[11].member)+"")&&ee(v,m),U&2&&D!==(D=w[11].overridden_member?"*":"")&&ee(L,D)},d(w){w&&(k(e),k(l),k(f))}}}function tn(r){let e,t=ae(r[11].date,"MMM dd")+"",n,a,i,s=r[11].sundayNumber+"",o,u,d=ae(r[11].date,"EEEE")+"",h,l,f,y=(r[11].event??"")+"",c;return{c(){e=Y("td"),n=X(t),a=F(),i=Y("small"),o=X(s),u=F(),h=X(d),l=F(),f=Y("td"),c=X(y),this.h()},l(m){e=x(m,"TD",{});var v=R(e);n=G(v,t),a=q(v),i=x(v,"SMALL",{class:!0});var g=R(i);o=G(g,s),u=q(g),h=G(g,d),g.forEach(k),v.forEach(k),l=q(m),f=x(m,"TD",{});var D=R(f);c=G(D,y),D.forEach(k),this.h()},h(){K(i,"class","fw-lighter")},m(m,v){H(m,e,v),E(e,n),E(e,a),E(e,i),E(i,o),E(i,u),E(i,h),H(m,l,v),H(m,f,v),E(f,c)},p(m,v){v&2&&t!==(t=ae(m[11].date,"MMM dd")+"")&&ee(n,t),v&2&&s!==(s=m[11].sundayNumber+"")&&ee(o,s),v&2&&d!==(d=ae(m[11].date,"EEEE")+"")&&ee(h,d),v&2&&y!==(y=(m[11].event??"")+"")&&ee(c,y)},d(m){m&&(k(e),k(l),k(f))}}}function kt(r){let e,t=r[14]+"",n,a;return{c(){e=Y("option"),n=X(t),this.h()},l(i){e=x(i,"OPTION",{});var s=R(e);n=G(s,t),s.forEach(k),this.h()},h(){e.__value=a=r[14],be(e,e.__value)},m(i,s){H(i,e,s),E(e,n)},p(i,s){s&1&&t!==(t=i[14]+"")&&ee(n,t),s&1&&a!==(a=i[14])&&(e.__value=a,be(e,e.__value))},d(i){i&&k(e)}}}function Et(r){let e,t=r[14]!==r[11].member&&kt(r);return{c(){t&&t.c(),e=De()},l(n){t&&t.l(n),e=De()},m(n,a){t&&t.m(n,a),H(n,e,a)},p(n,a){n[14]!==n[11].member?t?t.p(n,a):(t=kt(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function _t(r){let e,t,n,a,i,s,o,u="Change assignment to:",d,h,l,f="None",y,c,m,v;function g(O,I){return O[11]?.event?tn:en}let D=g(r),L=D(r);function N(){return r[6](r[13])}let A=ce(r[0]),w=[];for(let O=0;O<A.length;O+=1)w[O]=Et(gt(r,A,O));function U(){r[7].call(h,r[12],r[13])}function ue(){return r[8](r[11],r[13])}return{c(){e=Y("tr"),L.c(),n=F(),a=Y("tr"),i=Y("td"),s=Y("div"),o=Y("div"),o.textContent=u,d=F(),h=Y("select"),l=Y("option"),l.textContent=f;for(let O=0;O<w.length;O+=1)w[O].c();y=F(),this.h()},l(O){e=x(O,"TR",{class:!0});var I=R(e);L.l(I),I.forEach(k),n=q(O),a=x(O,"TR",{class:!0});var M=R(a);i=x(M,"TD",{colspan:!0});var me=R(i);s=x(me,"DIV",{class:!0});var ke=R(s);o=x(ke,"DIV",{"data-svelte-h":!0}),_e(o)!=="svelte-1t5xiq"&&(o.textContent=u),d=q(ke),h=x(ke,"SELECT",{class:!0});var xe=R(h);l=x(xe,"OPTION",{"data-svelte-h":!0}),_e(l)!=="svelte-1vbnolo"&&(l.textContent=f);for(let Ye=0;Ye<w.length;Ye+=1)w[Ye].l(xe);xe.forEach(k),ke.forEach(k),me.forEach(k),y=q(M),M.forEach(k),this.h()},h(){K(e,"class",t=r[11].member===null?"table-secondary":""),l.__value="",be(l,l.__value),K(h,"class","form-select form-control-sm"),r[11].overridden_member===void 0&&Mt(U),K(s,"class","d-flex flex-column gap-2 p-2"),K(i,"colspan","2"),K(a,"class",c=r[2][`row-${r[13]}`]?"table-secondary":"d-none")},m(O,I){H(O,e,I),L.m(e,null),H(O,n,I),H(O,a,I),E(a,i),E(i,s),E(s,o),E(s,d),E(s,h),E(h,l);for(let M=0;M<w.length;M+=1)w[M]&&w[M].m(h,null);Te(h,r[11].overridden_member,!0),E(a,y),m||(v=[Ee(e,"click",N),Ee(h,"change",U),Ee(h,"change",ue)],m=!0)},p(O,I){if(r=O,D===(D=g(r))&&L?L.p(r,I):(L.d(1),L=D(r),L&&(L.c(),L.m(e,null))),I&3&&t!==(t=r[11].member===null?"table-secondary":"")&&K(e,"class",t),I&3){A=ce(r[0]);let M;for(M=0;M<A.length;M+=1){const me=gt(r,A,M);w[M]?w[M].p(me,I):(w[M]=Et(me),w[M].c(),w[M].m(h,null))}for(;M<w.length;M+=1)w[M].d(1);w.length=A.length}I&3&&Te(h,r[11].overridden_member),I&4&&c!==(c=r[2][`row-${r[13]}`]?"table-secondary":"d-none")&&K(a,"class",c)},d(O){O&&(k(e),k(n),k(a)),L.d(),qe(w,O),m=!1,jt(v)}}}function rn(r){let e,t,n,a='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',i,s,o=ce(r[1]),u=[];for(let d=0;d<o.length;d+=1)u[d]=_t(wt(r,o,d));return{c(){e=Y("div"),t=Y("table"),n=Y("thead"),n.innerHTML=a,i=F(),s=Y("tbody");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=x(d,"DIV",{class:!0});var h=R(e);t=x(h,"TABLE",{class:!0});var l=R(t);n=x(l,"THEAD",{class:!0,"data-svelte-h":!0}),_e(n)!=="svelte-1c8l31s"&&(n.innerHTML=a),i=q(l),s=x(l,"TBODY",{});var f=R(s);for(let y=0;y<u.length;y+=1)u[y].l(f);f.forEach(k),l.forEach(k),h.forEach(k),this.h()},h(){K(n,"class","table-dark"),K(t,"class","table"),K(e,"class","table-responsive")},m(d,h){H(d,e,h),E(e,t),E(t,n),E(t,i),E(t,s);for(let l=0;l<u.length;l+=1)u[l]&&u[l].m(s,null)},p(d,[h]){if(h&15){o=ce(d[1]);let l;for(l=0;l<o.length;l+=1){const f=wt(d,o,l);u[l]?u[l].p(f,h):(u[l]=_t(f),u[l].c(),u[l].m(s,null))}for(;l<u.length;l+=1)u[l].d(1);u.length=o.length}},i:Ne,o:Ne,d(d){d&&k(e),qe(u,d)}}}function nn(r,e,t){let{listName:n="Some List"}=e,{names:a=[]}=e,{excludedDates:i=[]}=e,s=[],o=[];const u=async(c=new Date(2025,0,1,0,0,0),m=new Date(2025,11,31,0,0,0))=>{const v={start_date:c,until:m};s=Xr(Gr.Sundays,v);const g=new Date;g.setHours(0,0,0,0);const D=s.map((N,A)=>{const w=i.find(U=>tt(N,U.date));return{member:w?null:a[A%a.length],date:N,sundayNumber:Qr(N),event:w?w.event:void 0,overridden_member:null}}).filter(N=>N.date>=g),L=await Pt(n);return D.map(N=>{const A=L.find(w=>tt(new Date(w.date),N.date));return{...N,overridden_member:A?A.overridden_member:null}})},d=async(c,m)=>{const v=c.overridden_member||null;await Vr(n,c.date.toISOString(),v),t(2,h[m]=!h[m],h)},h={},l=c=>t(2,h[`row-${c}`]=!h[`row-${c}`],h);function f(c,m){c[m].overridden_member=Lt(this),t(1,o),t(0,a)}const y=(c,m)=>d(c,`row-${m}`);return r.$$set=c=>{"listName"in c&&t(4,n=c.listName),"names"in c&&t(0,a=c.names),"excludedDates"in c&&t(5,i=c.excludedDates)},u().then(c=>{t(1,o=c)}),[a,o,h,d,n,i,l,f,y]}class an extends Ke{constructor(e){super(),ze(this,e,nn,rn,je,{listName:4,names:0,excludedDates:5})}}function Tt(r,e,t){const n=r.slice();return n[3]=e[t],n}function Dt(r){let e,t=r[3]+"",n;return{c(){e=Y("option"),n=X(t),this.h()},l(a){e=x(a,"OPTION",{});var i=R(e);n=G(i,t),i.forEach(k),this.h()},h(){e.__value=r[3],be(e,e.__value)},m(a,i){H(a,e,i),E(e,n)},p:Ne,d(a){a&&k(e)}}}function St(r){let e,t;return e=new an({props:{listName:Zt,names:Bt,excludedDates:Gt}}),{c(){Ze(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,a){$e(e,n,a),t=!0},i(n){t||(he(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Ot(r){let e;return{c(){e=X("Coming Soon")},l(t){e=G(t,"Coming Soon")},m(t,n){H(t,e,n)},d(t){t&&k(e)}}}function sn(r){let e,t,n="None",a,i,s,o,u,d,h=ce(r[1]),l=[];for(let c=0;c<h.length;c+=1)l[c]=Dt(Tt(r,h,c));let f=r[0]==="Sacrament Bread Assignments"&&St(),y=(r[0]==="Teachers Lesson Assignments"||r[0]==="Teachers Adult Leaders Lesson Assignments")&&Ot();return{c(){e=Y("select"),t=Y("option"),t.textContent=n;for(let c=0;c<l.length;c+=1)l[c].c();a=F(),f&&f.c(),i=F(),y&&y.c(),s=De(),this.h()},l(c){e=x(c,"SELECT",{class:!0});var m=R(e);t=x(m,"OPTION",{"data-svelte-h":!0}),_e(t)!=="svelte-1vbnolo"&&(t.textContent=n);for(let v=0;v<l.length;v+=1)l[v].l(m);m.forEach(k),a=q(c),f&&f.l(c),i=q(c),y&&y.l(c),s=De(),this.h()},h(){t.__value="",be(t,t.__value),K(e,"class","form-select form-control-sm"),r[0]===void 0&&Mt(()=>r[2].call(e))},m(c,m){H(c,e,m),E(e,t);for(let v=0;v<l.length;v+=1)l[v]&&l[v].m(e,null);Te(e,r[0],!0),H(c,a,m),f&&f.m(c,m),H(c,i,m),y&&y.m(c,m),H(c,s,m),o=!0,u||(d=Ee(e,"change",r[2]),u=!0)},p(c,[m]){if(m&2){h=ce(c[1]);let v;for(v=0;v<h.length;v+=1){const g=Tt(c,h,v);l[v]?l[v].p(g,m):(l[v]=Dt(g),l[v].c(),l[v].m(e,null))}for(;v<l.length;v+=1)l[v].d(1);l.length=h.length}m&3&&Te(e,c[0]),c[0]==="Sacrament Bread Assignments"?f?m&1&&he(f,1):(f=St(),f.c(),he(f,1),f.m(i.parentNode,i)):f&&(Kt(),we(f,1,1,()=>{f=null}),zt()),c[0]==="Teachers Lesson Assignments"||c[0]==="Teachers Adult Leaders Lesson Assignments"?y||(y=Ot(),y.c(),y.m(s.parentNode,s)):y&&(y.d(1),y=null)},i(c){o||(he(f),o=!0)},o(c){we(f),o=!1},d(c){c&&(k(e),k(a),k(i),k(s)),qe(l,c),f&&f.d(c),y&&y.d(c),u=!1,d()}}}function on(r,e,t){let n="";const a=["Sacrament Bread Assignments","Teachers Lesson Assignments","Teachers Adult Leaders Lesson Assignments"];function i(){n=Lt(this),t(0,n),t(1,a)}return r.$$.update=()=>{r.$$.dirty&1&&console.log("assignment lists",n)},[n,a,i]}class un extends Ke{constructor(e){super(),ze(this,e,on,sn,je,{})}}function ln(r){let e,t;return e=new un({}),{c(){Ze(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,a){$e(e,n,a),t=!0},i(n){t||(he(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function fn(r){let e,t;return e=new qt({props:{pageTitle:"Assignments",$$slots:{default:[ln]},$$scope:{ctx:r}}}),{c(){Ze(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,a){$e(e,n,a),t=!0},p(n,[a]){const i={};a&1&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){t||(he(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}class wn extends Ke{constructor(e){super(),ze(this,e,null,fn,je,{})}}export{wn as component,bn as universal};
