import{s as et,d,v as tt,w as D,x as Pe,a as xe,i as Ce,b as t,y as Te,p as o,z as lt,c as s,e as p,A as g,g as T,f as he,h as n,j as E,t as pe,k as Ae,r as at,B as Qe,C as Ye,n as $e,D as ot}from"../chunks/BRwtC7dL.js";import{S as st,i as nt,d as Ue,t as Ve,a as qe,m as Me,c as Re,b as Be}from"../chunks/jH9XunBy.js";import{P as rt}from"../chunks/e4N0RvMD.js";import{e as Fe,u as it,d as ct}from"../chunks/Dzz_nbWy.js";import{D as ut}from"../chunks/BQSWs0ya.js";import{u as dt}from"../chunks/fa2YytWJ.js";import{g as _t}from"../chunks/DebXK80o.js";import{g as ft}from"../chunks/By7HBROr.js";function We(c,e,l){const a=c.slice();return a[25]=e[l],a}function Xe(c){let e,l,a,u,h,v;return{c(){e=n("div"),l=pe(c[5]),a=E(),u=n("button"),this.h()},l(y){e=s(y,"DIV",{class:!0,role:!0});var b=p(e);l=he(b,c[5]),a=T(b),u=s(b,"BUTTON",{type:!0,class:!0,"aria-label":!0}),p(u).forEach(d),b.forEach(d),this.h()},h(){o(u,"type","button"),o(u,"class","btn-close"),o(u,"aria-label","Close"),o(e,"class","alert alert-danger alert-dismissible fade show"),o(e,"role","alert")},m(y,b){Ce(y,e,b),t(e,l),t(e,a),t(e,u),h||(v=Te(u,"click",c[16]),h=!0)},p(y,b){b&32&&xe(l,y[5])},d(y){y&&d(e),h=!1,v()}}}function vt(c){let e,l,a,u='<tr><th scope="col">Name</th> <th scope="col" class="d-none d-md-table-cell">Email</th> <th scope="col">Role</th> <th scope="col" class="d-none d-lg-table-cell">Status</th> <th scope="col" class="d-none d-lg-table-cell">Created</th> <th scope="col" class="d-none d-xl-table-cell">Last Login</th> <th scope="col" class="text-end">Actions</th></tr>',h,v,y=[],b=new Map,O,I=Fe(c[4]);const M=f=>f[25].id;for(let f=0;f<I.length;f+=1){let m=We(c,I,f),_=M(m);b.set(_,y[f]=Ge(_,m))}let r=c[4].length===0&&Je();return{c(){e=n("div"),l=n("table"),a=n("thead"),a.innerHTML=u,h=E(),v=n("tbody");for(let f=0;f<y.length;f+=1)y[f].c();O=E(),r&&r.c(),this.h()},l(f){e=s(f,"DIV",{class:!0});var m=p(e);l=s(m,"TABLE",{class:!0});var _=p(l);a=s(_,"THEAD",{"data-svelte-h":!0}),g(a)!=="svelte-1v9y2q7"&&(a.innerHTML=u),h=T(_),v=s(_,"TBODY",{class:!0});var w=p(v);for(let N=0;N<y.length;N+=1)y[N].l(w);w.forEach(d),_.forEach(d),O=T(m),r&&r.l(m),m.forEach(d),this.h()},h(){o(v,"class","table-group-divider"),o(l,"class","table table-hover align-middle"),o(e,"class","table-responsive")},m(f,m){Ce(f,e,m),t(e,l),t(l,a),t(l,h),t(l,v);for(let _=0;_<y.length;_+=1)y[_]&&y[_].m(v,null);t(e,O),r&&r.m(e,null)},p(f,m){m&2064&&(I=Fe(f[4]),y=it(y,m,M,1,f,I,b,v,ct,Ge,null,We)),f[4].length===0?r||(r=Je(),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(f){f&&d(e);for(let m=0;m<y.length;m+=1)y[m].d();r&&r.d()}}}function ht(c){let e,l='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=n("div"),e.innerHTML=l,this.h()},l(a){e=s(a,"DIV",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-mlx3u2"&&(e.innerHTML=l),this.h()},h(){o(e,"class","text-center py-5")},m(a,u){Ce(a,e,u)},p:$e,d(a){a&&d(e)}}}function pt(c){let e,l="Never";return{c(){e=n("span"),e.textContent=l,this.h()},l(a){e=s(a,"SPAN",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-1qml2vo"&&(e.textContent=l),this.h()},h(){o(e,"class","text-muted")},m(a,u){Ce(a,e,u)},p:$e,d(a){a&&d(e)}}}function mt(c){let e=new Date(c[25].last_login).toLocaleDateString()+"",l;return{c(){l=pe(e)},l(a){l=he(a,e)},m(a,u){Ce(a,l,u)},p(a,u){u&16&&e!==(e=new Date(a[25].last_login).toLocaleDateString()+"")&&xe(l,e)},d(a){a&&d(l)}}}function Ge(c,e){let l,a,u,h=(e[25].display_name??e[25].email)+"",v,y,b,O=e[25].email+"",I,M,r,f=e[25].email+"",m,_,w,N,B=e[25].role+"",F,W,K,R,U,H=e[25].is_active?"Active":"Disabled",X,G,Z,C,V,z=e[25].is_active?"Active":"Disabled",te,le,Ee,P,ye,J=new Date(e[25].created_at).toLocaleDateString()+"",ue,oe,$,j,re,de,q,ae,me,ie,fe="Edit",se,ce,ve,ee;function ke(L,i){return L[25].last_login?mt:pt}let k=ke(e),S=k(e);function De(){return e[19](e[25])}return{key:c,first:null,c(){l=n("tr"),a=n("td"),u=n("div"),v=pe(h),y=E(),b=n("small"),I=pe(O),M=E(),r=n("td"),m=pe(f),_=E(),w=n("td"),N=n("span"),F=pe(B),K=E(),R=n("div"),U=n("span"),X=pe(H),Z=E(),C=n("td"),V=n("span"),te=pe(z),Ee=E(),P=n("td"),ye=n("small"),ue=pe(J),oe=E(),$=n("td"),j=n("small"),S.c(),re=E(),de=n("td"),q=n("button"),ae=n("i"),me=E(),ie=n("span"),ie.textContent=fe,se=E(),this.h()},l(L){l=s(L,"TR",{class:!0});var i=p(l);a=s(i,"TD",{});var x=p(a);u=s(x,"DIV",{class:!0});var _e=p(u);v=he(_e,h),_e.forEach(d),y=T(x),b=s(x,"SMALL",{class:!0});var be=p(b);I=he(be,O),be.forEach(d),x.forEach(d),M=T(i),r=s(i,"TD",{class:!0});var ne=p(r);m=he(ne,f),ne.forEach(d),_=T(i),w=s(i,"TD",{});var A=p(w);N=s(A,"SPAN",{class:!0});var Q=p(N);F=he(Q,B),Q.forEach(d),K=T(A),R=s(A,"DIV",{class:!0});var ge=p(R);U=s(ge,"SPAN",{class:!0});var Y=p(U);X=he(Y,H),Y.forEach(d),ge.forEach(d),A.forEach(d),Z=T(i),C=s(i,"TD",{class:!0});var Oe=p(C);V=s(Oe,"SPAN",{class:!0});var Ie=p(V);te=he(Ie,z),Ie.forEach(d),Oe.forEach(d),Ee=T(i),P=s(i,"TD",{class:!0});var we=p(P);ye=s(we,"SMALL",{});var Ne=p(ye);ue=he(Ne,J),Ne.forEach(d),we.forEach(d),oe=T(i),$=s(i,"TD",{class:!0});var He=p($);j=s(He,"SMALL",{});var ze=p(j);S.l(ze),ze.forEach(d),He.forEach(d),re=T(i),de=s(i,"TD",{class:!0});var je=p(de);q=s(je,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var Le=p(q);ae=s(Le,"I",{class:!0}),p(ae).forEach(d),me=T(Le),ie=s(Le,"SPAN",{class:!0,"data-svelte-h":!0}),g(ie)!=="svelte-1davzvv"&&(ie.textContent=fe),Le.forEach(d),je.forEach(d),se=T(i),i.forEach(d),this.h()},h(){o(u,"class","fw-semibold"),o(b,"class","d-md-none text-muted d-block"),o(r,"class","d-none d-md-table-cell"),o(N,"class",W=`badge bg-${Ke(e[25].role)} text-uppercase`),o(U,"class",G=`badge ${e[25].is_active?"bg-success":"bg-danger"}`),o(R,"class","d-lg-none mt-1"),o(V,"class",le=`badge ${e[25].is_active?"bg-success":"bg-danger"}`),o(C,"class","d-none d-lg-table-cell"),o(P,"class","d-none d-lg-table-cell"),o($,"class","d-none d-xl-table-cell"),o(ae,"class","bi bi-pencil"),o(ie,"class","d-none d-sm-inline"),o(q,"class","btn btn-sm btn-outline-primary"),o(q,"type","button"),o(q,"data-bs-toggle","offcanvas"),o(q,"data-bs-target",`#${Se}`),o(q,"aria-controls",Se),o(de,"class","text-end"),o(l,"class",ce=e[25].is_active?"":"opacity-75"),this.first=l},m(L,i){Ce(L,l,i),t(l,a),t(a,u),t(u,v),t(a,y),t(a,b),t(b,I),t(l,M),t(l,r),t(r,m),t(l,_),t(l,w),t(w,N),t(N,F),t(w,K),t(w,R),t(R,U),t(U,X),t(l,Z),t(l,C),t(C,V),t(V,te),t(l,Ee),t(l,P),t(P,ye),t(ye,ue),t(l,oe),t(l,$),t($,j),S.m(j,null),t(l,re),t(l,de),t(de,q),t(q,ae),t(q,me),t(q,ie),t(l,se),ve||(ee=Te(q,"click",De),ve=!0)},p(L,i){e=L,i&16&&h!==(h=(e[25].display_name??e[25].email)+"")&&xe(v,h),i&16&&O!==(O=e[25].email+"")&&xe(I,O),i&16&&f!==(f=e[25].email+"")&&xe(m,f),i&16&&B!==(B=e[25].role+"")&&xe(F,B),i&16&&W!==(W=`badge bg-${Ke(e[25].role)} text-uppercase`)&&o(N,"class",W),i&16&&H!==(H=e[25].is_active?"Active":"Disabled")&&xe(X,H),i&16&&G!==(G=`badge ${e[25].is_active?"bg-success":"bg-danger"}`)&&o(U,"class",G),i&16&&z!==(z=e[25].is_active?"Active":"Disabled")&&xe(te,z),i&16&&le!==(le=`badge ${e[25].is_active?"bg-success":"bg-danger"}`)&&o(V,"class",le),i&16&&J!==(J=new Date(e[25].created_at).toLocaleDateString()+"")&&xe(ue,J),k===(k=ke(e))&&S?S.p(e,i):(S.d(1),S=k(e),S&&(S.c(),S.m(j,null))),i&16&&ce!==(ce=e[25].is_active?"":"opacity-75")&&o(l,"class",ce)},d(L){L&&d(l),S.d(),ve=!1,ee()}}}function Je(c){let e,l="<p>No users found matching your filters.</p>";return{c(){e=n("div"),e.innerHTML=l,this.h()},l(a){e=s(a,"DIV",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-i4erte"&&(e.innerHTML=l),this.h()},h(){o(e,"class","text-center py-5 text-muted")},m(a,u){Ce(a,e,u)},d(a){a&&d(e)}}}function bt(c){let e,l="Select a user to edit.";return{c(){e=n("p"),e.textContent=l,this.h()},l(a){e=s(a,"P",{class:!0,"data-svelte-h":!0}),g(e)!=="svelte-l09ef1"&&(e.textContent=l),this.h()},h(){o(e,"class","text-muted mb-0")},m(a,u){Ce(a,e,u)},p:$e,d(a){a&&d(e)}}}function gt(c){let e,l,a,u="Display Name",h,v,y,b,O,I="Role",M,r,f,m="Root",_,w="Admin",N,B="Primary",F,W="Relief Society",K,R="Elders Quorum",U,H="Teachers Quorum",X,G="Young Women",Z,C="Sunday School",V,z="Authenticated",te,le="Un-Authenticated",Ee,P,ye="Assign a church calling role to grant permissions",J,ue,oe,$,j,re,de="Active Account",q,ae,me="Disabled accounts cannot login",ie,fe,se,ce="Admin Notes",ve,ee,ke,k,S,De="Cancel",L,i,x="Save Changes",_e,be;return{c(){e=n("form"),l=n("div"),a=n("label"),a.textContent=u,h=E(),v=n("input"),y=E(),b=n("div"),O=n("label"),O.textContent=I,M=E(),r=n("select"),f=n("option"),f.textContent=m,_=n("option"),_.textContent=w,N=n("option"),N.textContent=B,F=n("option"),F.textContent=W,K=n("option"),K.textContent=R,U=n("option"),U.textContent=H,X=n("option"),X.textContent=G,Z=n("option"),Z.textContent=C,V=n("option"),V.textContent=z,te=n("option"),te.textContent=le,Ee=E(),P=n("div"),P.textContent=ye,J=E(),ue=n("div"),oe=n("div"),$=n("input"),j=E(),re=n("label"),re.textContent=de,q=E(),ae=n("div"),ae.textContent=me,ie=E(),fe=n("div"),se=n("label"),se.textContent=ce,ve=E(),ee=n("textarea"),ke=E(),k=n("div"),S=n("button"),S.textContent=De,L=E(),i=n("button"),i.textContent=x,this.h()},l(ne){e=s(ne,"FORM",{class:!0});var A=p(e);l=s(A,"DIV",{});var Q=p(l);a=s(Q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),g(a)!=="svelte-1qww9aa"&&(a.textContent=u),h=T(Q),v=s(Q,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),Q.forEach(d),y=T(A),b=s(A,"DIV",{});var ge=p(b);O=s(ge,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),g(O)!=="svelte-qedzc3"&&(O.textContent=I),M=T(ge),r=s(ge,"SELECT",{class:!0,id:!0});var Y=p(r);f=s(Y,"OPTION",{"data-svelte-h":!0}),g(f)!=="svelte-j6h65q"&&(f.textContent=m),_=s(Y,"OPTION",{"data-svelte-h":!0}),g(_)!=="svelte-17op260"&&(_.textContent=w),N=s(Y,"OPTION",{"data-svelte-h":!0}),g(N)!=="svelte-afolwu"&&(N.textContent=B),F=s(Y,"OPTION",{"data-svelte-h":!0}),g(F)!=="svelte-caqcsh"&&(F.textContent=W),K=s(Y,"OPTION",{"data-svelte-h":!0}),g(K)!=="svelte-z5bf0h"&&(K.textContent=R),U=s(Y,"OPTION",{"data-svelte-h":!0}),g(U)!=="svelte-h2ndd"&&(U.textContent=H),X=s(Y,"OPTION",{"data-svelte-h":!0}),g(X)!=="svelte-13e2z3"&&(X.textContent=G),Z=s(Y,"OPTION",{"data-svelte-h":!0}),g(Z)!=="svelte-1gqwsr1"&&(Z.textContent=C),V=s(Y,"OPTION",{"data-svelte-h":!0}),g(V)!=="svelte-1hh738g"&&(V.textContent=z),te=s(Y,"OPTION",{"data-svelte-h":!0}),g(te)!=="svelte-1nm0qee"&&(te.textContent=le),Y.forEach(d),Ee=T(ge),P=s(ge,"DIV",{class:!0,"data-svelte-h":!0}),g(P)!=="svelte-adi1xr"&&(P.textContent=ye),ge.forEach(d),J=T(A),ue=s(A,"DIV",{});var Oe=p(ue);oe=s(Oe,"DIV",{class:!0});var Ie=p(oe);$=s(Ie,"INPUT",{class:!0,type:!0,id:!0}),j=T(Ie),re=s(Ie,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),g(re)!=="svelte-gc2a6c"&&(re.textContent=de),Ie.forEach(d),q=T(Oe),ae=s(Oe,"DIV",{class:!0,"data-svelte-h":!0}),g(ae)!=="svelte-ip672x"&&(ae.textContent=me),Oe.forEach(d),ie=T(A),fe=s(A,"DIV",{});var we=p(fe);se=s(we,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),g(se)!=="svelte-17a0zww"&&(se.textContent=ce),ve=T(we),ee=s(we,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0}),p(ee).forEach(d),we.forEach(d),ke=T(A),k=s(A,"DIV",{class:!0});var Ne=p(k);S=s(Ne,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),g(S)!=="svelte-10ov1w5"&&(S.textContent=De),L=T(Ne),i=s(Ne,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),g(i)!=="svelte-bcbxuj"&&(i.textContent=x),Ne.forEach(d),A.forEach(d),this.h()},h(){o(a,"class","form-label"),o(a,"for","displayName"),o(v,"type","text"),o(v,"class","form-control"),o(v,"id","displayName"),o(v,"placeholder","Display name (optional)"),o(O,"class","form-label"),o(O,"for","userRole"),f.__value="root",D(f,f.__value),_.__value="admin",D(_,_.__value),N.__value="primary",D(N,N.__value),F.__value="relief-society",D(F,F.__value),K.__value="elders-quorum",D(K,K.__value),U.__value="teachers-quorum",D(U,U.__value),X.__value="young-women",D(X,X.__value),Z.__value="sunday-school",D(Z,Z.__value),V.__value="authenticated",D(V,V.__value),te.__value="un-authenticated",D(te,te.__value),o(r,"class","form-select"),o(r,"id","userRole"),c[2].role===void 0&&lt(()=>c[21].call(r)),o(P,"class","form-text"),o($,"class","form-check-input"),o($,"type","checkbox"),o($,"id","isActive"),o(re,"class","form-check-label"),o(re,"for","isActive"),o(oe,"class","form-check form-switch"),o(ae,"class","form-text"),o(se,"class","form-label"),o(se,"for","adminNotes"),o(ee,"class","form-control"),o(ee,"id","adminNotes"),o(ee,"rows","3"),o(ee,"placeholder","Internal notes about this user..."),o(S,"type","button"),o(S,"class","btn btn-secondary"),o(i,"type","submit"),o(i,"class","btn btn-primary"),o(k,"class","d-flex justify-content-end gap-2"),o(e,"class","d-flex flex-column gap-3")},m(ne,A){Ce(ne,e,A),t(e,l),t(l,a),t(l,h),t(l,v),D(v,c[2].display_name),t(e,y),t(e,b),t(b,O),t(b,M),t(b,r),t(r,f),t(r,_),t(r,N),t(r,F),t(r,K),t(r,U),t(r,X),t(r,Z),t(r,V),t(r,te),Pe(r,c[2].role,!0),t(b,Ee),t(b,P),t(e,J),t(e,ue),t(ue,oe),t(oe,$),$.checked=c[2].is_active,t(oe,j),t(oe,re),t(ue,q),t(ue,ae),t(e,ie),t(e,fe),t(fe,se),t(fe,ve),t(fe,ee),D(ee,c[2].notes),t(e,ke),t(e,k),t(k,S),t(k,L),t(k,i),_e||(be=[Te(v,"input",c[20]),Te(r,"change",c[21]),Te($,"change",c[22]),Te(ee,"input",c[23]),Te(S,"click",c[12]),Te(e,"submit",ot(c[13]))],_e=!0)},p(ne,A){A&4&&v.value!==ne[2].display_name&&D(v,ne[2].display_name),A&4&&Pe(r,ne[2].role),A&4&&($.checked=ne[2].is_active),A&4&&D(ee,ne[2].notes)},d(ne){ne&&d(e),_e=!1,tt(be)}}}function Ct(c){let e;function l(h,v){return h[2]?gt:bt}let a=l(c),u=a(c);return{c(){u.c(),e=Qe()},l(h){u.l(h),e=Qe()},m(h,v){u.m(h,v),Ce(h,e,v)},p(h,v){a===(a=l(h))&&u?u.p(h,v):(u.d(1),u=a(h),u&&(u.c(),u.m(e.parentNode,e)))},d(h){h&&d(e),u.d(h)}}}function yt(c){let e,l,a,u="User Management",h,v,y='<i class="bi bi-arrow-clockwise"></i> Refresh',b,O,I,M,r,f,m,_,w,N="All Roles",B,F="Root",W,K="Admin",R,U="Primary",H,X="Relief Society",G,Z="Elders Quorum",C,V="Teachers Quorum",z,te="Young Women",le,Ee="Sunday School",P,ye="Authenticated",J,ue="Un-Authenticated",oe,$,j,re,de=c[4].length+"",q,ae,me=c[4].length!==1?"s":"",ie,fe,se,ce,ve,ee,ke,k=c[5]&&Xe(c);function S(i,x){return i[6]?ht:vt}let De=S(c),L=De(c);return ce=new ut({props:{title:c[3],id:Se,$$slots:{default:[Ct]},$$scope:{ctx:c}}}),{c(){e=n("div"),l=n("div"),a=n("h2"),a.textContent=u,h=E(),v=n("button"),v.innerHTML=y,b=E(),k&&k.c(),O=E(),I=n("div"),M=n("div"),r=n("input"),f=E(),m=n("div"),_=n("select"),w=n("option"),w.textContent=N,B=n("option"),B.textContent=F,W=n("option"),W.textContent=K,R=n("option"),R.textContent=U,H=n("option"),H.textContent=X,G=n("option"),G.textContent=Z,C=n("option"),C.textContent=V,z=n("option"),z.textContent=te,le=n("option"),le.textContent=Ee,P=n("option"),P.textContent=ye,J=n("option"),J.textContent=ue,oe=E(),$=n("div"),j=n("div"),re=pe("Total: "),q=pe(de),ae=pe(" user"),ie=pe(me),fe=E(),L.c(),se=E(),Be(ce.$$.fragment),this.h()},l(i){e=s(i,"DIV",{class:!0});var x=p(e);l=s(x,"DIV",{class:!0});var _e=p(l);a=s(_e,"H2",{"data-svelte-h":!0}),g(a)!=="svelte-1w9k0u8"&&(a.textContent=u),h=T(_e),v=s(_e,"BUTTON",{class:!0,"data-svelte-h":!0}),g(v)!=="svelte-1t5isil"&&(v.innerHTML=y),_e.forEach(d),b=T(x),k&&k.l(x),O=T(x),I=s(x,"DIV",{class:!0});var be=p(I);M=s(be,"DIV",{class:!0});var ne=p(M);r=s(ne,"INPUT",{type:!0,class:!0,placeholder:!0}),ne.forEach(d),f=T(be),m=s(be,"DIV",{class:!0});var A=p(m);_=s(A,"SELECT",{class:!0});var Q=p(_);w=s(Q,"OPTION",{"data-svelte-h":!0}),g(w)!=="svelte-1yhiy9v"&&(w.textContent=N),B=s(Q,"OPTION",{"data-svelte-h":!0}),g(B)!=="svelte-j6h65q"&&(B.textContent=F),W=s(Q,"OPTION",{"data-svelte-h":!0}),g(W)!=="svelte-17op260"&&(W.textContent=K),R=s(Q,"OPTION",{"data-svelte-h":!0}),g(R)!=="svelte-afolwu"&&(R.textContent=U),H=s(Q,"OPTION",{"data-svelte-h":!0}),g(H)!=="svelte-caqcsh"&&(H.textContent=X),G=s(Q,"OPTION",{"data-svelte-h":!0}),g(G)!=="svelte-z5bf0h"&&(G.textContent=Z),C=s(Q,"OPTION",{"data-svelte-h":!0}),g(C)!=="svelte-h2ndd"&&(C.textContent=V),z=s(Q,"OPTION",{"data-svelte-h":!0}),g(z)!=="svelte-13e2z3"&&(z.textContent=te),le=s(Q,"OPTION",{"data-svelte-h":!0}),g(le)!=="svelte-1gqwsr1"&&(le.textContent=Ee),P=s(Q,"OPTION",{"data-svelte-h":!0}),g(P)!=="svelte-1hh738g"&&(P.textContent=ye),J=s(Q,"OPTION",{"data-svelte-h":!0}),g(J)!=="svelte-1nm0qee"&&(J.textContent=ue),Q.forEach(d),A.forEach(d),oe=T(be),$=s(be,"DIV",{class:!0});var ge=p($);j=s(ge,"DIV",{class:!0});var Y=p(j);re=he(Y,"Total: "),q=he(Y,de),ae=he(Y," user"),ie=he(Y,me),Y.forEach(d),ge.forEach(d),be.forEach(d),fe=T(x),L.l(x),x.forEach(d),se=T(i),Re(ce.$$.fragment,i),this.h()},h(){o(v,"class","btn btn-primary"),o(l,"class","d-flex justify-content-between align-items-center mb-4"),o(r,"type","text"),o(r,"class","form-control"),o(r,"placeholder","Search by email or name..."),o(M,"class","col-md-6"),w.__value="all",D(w,w.__value),B.__value="root",D(B,B.__value),W.__value="admin",D(W,W.__value),R.__value="primary",D(R,R.__value),H.__value="relief-society",D(H,H.__value),G.__value="elders-quorum",D(G,G.__value),C.__value="teachers-quorum",D(C,C.__value),z.__value="young-women",D(z,z.__value),le.__value="sunday-school",D(le,le.__value),P.__value="authenticated",D(P,P.__value),J.__value="un-authenticated",D(J,J.__value),o(_,"class","form-select"),c[0]===void 0&&lt(()=>c[18].call(_)),o(m,"class","col-md-3"),o(j,"class","text-muted mt-2"),o($,"class","col-md-3"),o(I,"class","row mb-3"),o(e,"class","user-management")},m(i,x){Ce(i,e,x),t(e,l),t(l,a),t(l,h),t(l,v),t(e,b),k&&k.m(e,null),t(e,O),t(e,I),t(I,M),t(M,r),D(r,c[1]),t(I,f),t(I,m),t(m,_),t(_,w),t(_,B),t(_,W),t(_,R),t(_,H),t(_,G),t(_,C),t(_,z),t(_,le),t(_,P),t(_,J),Pe(_,c[0],!0),t(I,oe),t(I,$),t($,j),t(j,re),t(j,q),t(j,ae),t(j,ie),t(e,fe),L.m(e,null),Ce(i,se,x),Me(ce,i,x),ve=!0,ee||(ke=[Te(v,"click",c[15]),Te(r,"input",c[17]),Te(_,"change",c[18])],ee=!0)},p(i,[x]){i[5]?k?k.p(i,x):(k=Xe(i),k.c(),k.m(e,O)):k&&(k.d(1),k=null),x&2&&r.value!==i[1]&&D(r,i[1]),x&1&&Pe(_,i[0]),(!ve||x&16)&&de!==(de=i[4].length+"")&&xe(q,de),(!ve||x&16)&&me!==(me=i[4].length!==1?"s":"")&&xe(ie,me),De===(De=S(i))&&L?L.p(i,x):(L.d(1),L=De(i),L&&(L.c(),L.m(e,null)));const _e={};x&8&&(_e.title=i[3]),x&268435460&&(_e.$$scope={dirty:x,ctx:i}),ce.$set(_e)},i(i){ve||(qe(ce.$$.fragment,i),ve=!0)},o(i){Ve(ce.$$.fragment,i),ve=!1},d(i){i&&(d(e),d(se)),k&&k.d(),L.d(),Ue(ce,i),ee=!1,tt(ke)}}}function Ke(c){switch(c){case"root":return"danger";case"admin":return"primary";case"primary":case"relief-society":case"elders-quorum":case"teachers-quorum":case"young-women":case"sunday-school":return"info";case"authenticated":return"success";case"un-authenticated":return"secondary";default:return"secondary"}}const Se="edit-user-drawer";function Ze(){document.querySelector(`[data-bs-target="#${Se}"]`)?.click()}function xt(c,e,l){let a,u,h,v;const{stores:y,actions:b}=dt,{users:O,loading:I,error:M}=y;Ae(c,O,C=>l(14,u=C)),Ae(c,I,C=>l(6,v=C)),Ae(c,M,C=>l(5,h=C));let r=null,f="all",m="",_="Edit User";at(()=>{b.fetchUsers()});function w(C){l(2,r={...C}),l(3,_=`Edit User: ${C.email}`)}function N(){l(2,r=null),Ze()}async function B(){if(!r)return;(await b.updateUser(r.id,{role:r.role,is_active:r.is_active,notes:r.notes,display_name:r.display_name})).success&&(Ze(),l(2,r=null))}const F=()=>b.fetchUsers(),W=()=>M.set(null);function K(){m=this.value,l(1,m)}function R(){f=Ye(this),l(0,f)}const U=C=>w(C);function H(){r.display_name=this.value,l(2,r)}function X(){r.role=Ye(this),l(2,r)}function G(){r.is_active=this.checked,l(2,r)}function Z(){r.notes=this.value,l(2,r)}return c.$$.update=()=>{c.$$.dirty&16387&&l(4,a=u.filter(C=>{const V=f==="all"||C.role===f,z=m===""||C.email.toLowerCase().includes(m.toLowerCase())||C.display_name?.toLowerCase().includes(m.toLowerCase());return V&&z}))},[f,m,r,_,a,h,v,b,O,I,M,w,N,B,u,F,W,K,R,U,H,X,G,Z]}class Tt extends st{constructor(e){super(),nt(this,e,xt,yt,et,{})}}function Et(c){let e,l;return e=new Tt({}),{c(){Be(e.$$.fragment)},l(a){Re(e.$$.fragment,a)},m(a,u){Me(e,a,u),l=!0},i(a){l||(qe(e.$$.fragment,a),l=!0)},o(a){Ve(e.$$.fragment,a),l=!1},d(a){Ue(e,a)}}}function kt(c){let e,l;return e=new rt({props:{pageTitle:"Manage Users",$$slots:{default:[Et]},$$scope:{ctx:c}}}),{c(){Be(e.$$.fragment)},l(a){Re(e.$$.fragment,a)},m(a,u){Me(e,a,u),l=!0},p(a,[u]){const h={};u&4&&(h.$$scope={dirty:u,ctx:a}),e.$set(h)},i(a){l||(qe(e.$$.fragment,a),l=!0)},o(a){Ve(e.$$.fragment,a),l=!1},d(a){Ue(e,a)}}}function Dt(c,e,l){let a;const{stores:{currentUser:u}}=_t();return Ae(c,u,h=>l(1,a=h)),at(()=>{a?.role!=="root"&&a?.role!=="admin"&&ft("/home")}),[u]}class $t extends st{constructor(e){super(),nt(this,e,Dt,kt,et,{})}}export{$t as component};
