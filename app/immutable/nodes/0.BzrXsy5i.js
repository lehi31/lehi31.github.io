import{s as M,n as I,d as m,v as Y,a as d,i as k,q as b,z as N,U as G,c as g,k as y,l as w,w as J,e as v,m as T,x as K,t as C,B as P,f as Q,u as W,h as X,j as Z,p as x,o as ee,r as te,g as L}from"../chunks/Is0eQybD.js";import{S,i as V,t as A,a as U,g as se,e as le,d as q,m as F,c as z,b as R}from"../chunks/DtCfv1Xo.js";import{g as ae}from"../chunks/B7muYh3r.js";import{e as H,u as ie,o as re}from"../chunks/CTDgMtPg.js";import{d as ne,t as oe}from"../chunks/60no64Jq.js";const ce=!0,Ce=Object.freeze(Object.defineProperty({__proto__:null,prerender:ce},Symbol.toStringTag,{value:"Module"}));function fe(o){let e;return{c(){e=v("i"),this.h()},l(t){e=g(t,"I",{class:!0}),y(e).forEach(m),this.h()},h(){d(e,"class","bi bi-check-circle")},m(t,i){k(t,e,i)},d(t){t&&m(e)}}}function ue(o){let e;return{c(){e=v("i"),this.h()},l(t){e=g(t,"I",{class:!0}),y(e).forEach(m),this.h()},h(){d(e,"class","bi bi-x-circle")},m(t,i){k(t,e,i)},d(t){t&&m(e)}}}function he(o){let e;return{c(){e=v("i"),this.h()},l(t){e=g(t,"I",{class:!0}),y(e).forEach(m),this.h()},h(){d(e,"class","bi bi-exclamation-triangle")},m(t,i){k(t,e,i)},d(t){t&&m(e)}}}function pe(o){let e;return{c(){e=v("i"),this.h()},l(t){e=g(t,"I",{class:!0}),y(e).forEach(m),this.h()},h(){d(e,"class","bi bi-info-circle")},m(t,i){k(t,e,i)},d(t){t&&m(e)}}}function me(o){let e,t,i,c,f,n,s,l,u;function _(r,p){if(r[1]==="info")return pe;if(r[1]==="warning")return he;if(r[1]==="danger")return ue;if(r[1]==="success")return fe}let h=_(o),a=h&&h(o);return{c(){e=v("div"),a&&a.c(),t=T(),i=v("div"),c=K(o[0]),f=T(),n=v("button"),this.h()},l(r){e=g(r,"DIV",{class:!0,role:!0});var p=y(e);a&&a.l(p),t=w(p),i=g(p,"DIV",{class:!0});var E=y(i);c=J(E,o[0]),E.forEach(m),f=w(p),n=g(p,"BUTTON",{type:!0,class:!0,"aria-label":!0}),y(n).forEach(m),p.forEach(m),this.h()},h(){d(i,"class","flex-grow-1"),d(n,"type","button"),d(n,"class","btn-close"),d(n,"aria-label","Close"),d(e,"class",s="alert alert-"+o[1]+" alert-dismissible d-flex align-items-center gap-2 svelte-1pys3av"),d(e,"role","alert")},m(r,p){k(r,e,p),a&&a.m(e,null),b(e,t),b(e,i),b(i,c),b(e,f),b(e,n),l||(u=N(n,"click",function(){G(o[2])&&o[2].apply(this,arguments)}),l=!0)},p(r,[p]){o=r,h!==(h=_(o))&&(a&&a.d(1),a=h&&h(o),a&&(a.c(),a.m(e,t))),p&1&&Y(c,o[0]),p&2&&s!==(s="alert alert-"+o[1]+" alert-dismissible d-flex align-items-center gap-2 svelte-1pys3av")&&d(e,"class",s)},i:I,o:I,d(r){r&&m(e),a&&a.d(),l=!1,u()}}}function de(o,e,t){let{message:i}=e,{type:c="info"}=e,{onClose:f}=e;return setTimeout(()=>f(),5e3),o.$$set=n=>{"message"in n&&t(0,i=n.message),"type"in n&&t(1,c=n.type),"onClose"in n&&t(2,f=n.onClose)},[i,c,f]}class _e extends S{constructor(e){super(),V(this,e,de,me,M,{message:0,type:1,onClose:2})}}function O(o,e,t){const i=o.slice();return i[2]=e[t],i}function B(o,e){let t,i,c;function f(){return e[1](e[2])}return i=new _e({props:{message:e[2].message,type:e[2].type,onClose:f}}),{key:o,first:null,c(){t=C(),R(i.$$.fragment),this.h()},l(n){t=C(),z(i.$$.fragment,n),this.h()},h(){this.first=t},m(n,s){k(n,t,s),F(i,n,s),c=!0},p(n,s){e=n;const l={};s&1&&(l.message=e[2].message),s&1&&(l.type=e[2].type),s&1&&(l.onClose=f),i.$set(l)},i(n){c||(U(i.$$.fragment,n),c=!0)},o(n){A(i.$$.fragment,n),c=!1},d(n){n&&m(t),q(i,n)}}}function be(o){let e=[],t=new Map,i,c,f=H(o[0]);const n=s=>s[2].id;for(let s=0;s<f.length;s+=1){let l=O(o,f,s),u=n(l);t.set(u,e[s]=B(u,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=C()},l(s){for(let l=0;l<e.length;l+=1)e[l].l(s);i=C()},m(s,l){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,l);k(s,i,l),c=!0},p(s,[l]){l&1&&(f=H(s[0]),se(),e=ie(e,l,n,1,s,f,t,i.parentNode,re,B,i,O),le())},i(s){if(!c){for(let l=0;l<f.length;l+=1)U(e[l]);c=!0}},o(s){for(let l=0;l<e.length;l+=1)A(e[l]);c=!1},d(s){s&&m(i);for(let l=0;l<e.length;l+=1)e[l].d(s)}}}function ge(o,e,t){let i;return P(o,oe,f=>t(0,i=f)),[i,f=>ne(f.id)]}class ve extends S{constructor(e){super(),V(this,e,ge,be,M,{})}}function $(o){let e,t,i,c,f=`<strong>Update Available</strong><br/>
			A new version of the app is available. Please reload to get the latest features and bug fixes.`,n,s,l='<i class="bi bi-arrow-clockwise"></i> Reload Now',u,_,h,a;return{c(){e=v("div"),t=v("i"),i=T(),c=v("div"),c.innerHTML=f,n=T(),s=v("button"),s.innerHTML=l,u=T(),_=v("button"),this.h()},l(r){e=g(r,"DIV",{class:!0,role:!0});var p=y(e);t=g(p,"I",{class:!0}),y(t).forEach(m),i=w(p),c=g(p,"DIV",{class:!0,"data-svelte-h":!0}),L(c)!=="svelte-deeehk"&&(c.innerHTML=f),n=w(p),s=g(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),L(s)!=="svelte-1fsc537"&&(s.innerHTML=l),u=w(p),_=g(p,"BUTTON",{type:!0,class:!0,"aria-label":!0}),y(_).forEach(m),p.forEach(m),this.h()},h(){d(t,"class","bi bi-arrow-clockwise"),d(c,"class","flex-grow-1"),d(s,"type","button"),d(s,"class","btn btn-sm btn-primary"),d(_,"type","button"),d(_,"class","btn-close"),d(_,"aria-label","Close"),d(e,"class","alert alert-info alert-dismissible d-flex align-items-center gap-2 m-3"),d(e,"role","alert")},m(r,p){k(r,e,p),b(e,t),b(e,i),b(e,c),b(e,n),b(e,s),b(e,u),b(e,_),h||(a=[N(s,"click",o[5]),N(_,"click",o[8])],h=!0)},p:I,d(r){r&&m(e),h=!1,te(a)}}}function j(o){let e,t,i,c,f=`<strong>Session Expired</strong><br/>
			Your authentication token has expired. Please log in again to continue.`,n,s,l,u;return{c(){e=v("div"),t=v("i"),i=T(),c=v("div"),c.innerHTML=f,n=T(),s=v("button"),this.h()},l(_){e=g(_,"DIV",{class:!0,role:!0});var h=y(e);t=g(h,"I",{class:!0}),y(t).forEach(m),i=w(h),c=g(h,"DIV",{"data-svelte-h":!0}),L(c)!=="svelte-1pap48h"&&(c.innerHTML=f),n=w(h),s=g(h,"BUTTON",{type:!0,class:!0,"aria-label":!0}),y(s).forEach(m),h.forEach(m),this.h()},h(){d(t,"class","bi bi-clock-history"),d(s,"type","button"),d(s,"class","btn-close"),d(s,"aria-label","Close"),d(e,"class","alert alert-warning alert-dismissible d-flex align-items-center gap-2 m-3"),d(e,"role","alert")},m(_,h){k(_,e,h),b(e,t),b(e,i),b(e,c),b(e,n),b(e,s),l||(u=N(s,"click",o[4]),l=!0)},p:I,d(_){_&&m(e),l=!1,u()}}}function ke(o){let e,t,i,c,f,n,s;document.title=e="Lehi31 | "+o[2];let l=o[1]&&$(o),u=o[0]&&j(o);f=new ve({});const _=o[7].default,h=Q(_,o,o[6],null);return{c(){t=T(),l&&l.c(),i=T(),u&&u.c(),c=T(),R(f.$$.fragment),n=T(),h&&h.c()},l(a){x("svelte-1y0838e",document.head).forEach(m),t=w(a),l&&l.l(a),i=w(a),u&&u.l(a),c=w(a),z(f.$$.fragment,a),n=w(a),h&&h.l(a)},m(a,r){k(a,t,r),l&&l.m(a,r),k(a,i,r),u&&u.m(a,r),k(a,c,r),F(f,a,r),k(a,n,r),h&&h.m(a,r),s=!0},p(a,[r]){(!s||r&4)&&e!==(e="Lehi31 | "+a[2])&&(document.title=e),a[1]?l?l.p(a,r):(l=$(a),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),a[0]?u?u.p(a,r):(u=j(a),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null),h&&h.p&&(!s||r&64)&&W(h,_,a,a[6],s?Z(_,a[6],r,null):X(a[6]),null)},i(a){s||(U(f.$$.fragment,a),U(h,a),s=!0)},o(a){A(f.$$.fragment,a),A(h,a),s=!1},d(a){a&&(m(t),m(i),m(c),m(n)),l&&l.d(a),u&&u.d(a),q(f,a),h&&h.d(a)}}}function ye(o,e,t){let i,{$$slots:c={},$$scope:f}=e;const{stores:{pageName:n}}=ae();P(o,n,r=>t(2,i=r));let s=!1,l=!1;const u=async()=>{try{const r=await fetch("/api/version"),{version:p}=await r.json(),E=parseInt(p),D=parseInt("1767424844324");return!isNaN(E)&&!isNaN(D)&&E>D?(console.warn("[App] New version available:",p,"current:","1767424844324","(server is newer)"),!0):(p!=="1767424844324"&&console.log("[App] Version mismatch but client is newer or equal:","server:",p,"client:","1767424844324"),!1)}catch(r){return console.error("[App] Failed to check for updates:",r),!1}};ee(()=>{{sessionStorage.getItem("authExpired")==="true"&&(t(0,s=!0),setTimeout(()=>{t(0,s=!1),sessionStorage.removeItem("authExpired")},1e4));{const r=async()=>{await u()&&t(1,l=!0)};r();const p=setInterval(r,5*60*1e3);return()=>clearInterval(p)}}});const _=()=>{t(0,s=!1),sessionStorage.removeItem("authExpired")},h=async()=>{try{if("caches"in window){const r=await caches.keys();await Promise.all(r.map(p=>caches.delete(p))),console.log("[App] Cleared service worker caches")}}catch(r){console.error("[App] Failed to clear caches:",r)}finally{window.location.href=window.location.href}},a=()=>t(1,l=!1);return o.$$set=r=>{"$$scope"in r&&t(6,f=r.$$scope)},[s,l,i,n,_,h,f,c,a]}class Ae extends S{constructor(e){super(),V(this,e,ye,ke,M,{})}}export{Ae as component,Ce as universal};
