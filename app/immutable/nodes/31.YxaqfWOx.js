import{s as gt,d as f,i as le,b as l,A as Z,p as s,c as r,e as E,w as V,g as v,f as W,h as o,j as g,t as X,k as ze,r as yt,a as re,y as Qe,T as ke,z as ae,B as Tt,n as Ze,M as ut}from"../chunks/Dvm0vAjZ.js";import{S as Ct,i as Et,d as $e,t as et,a as tt,m as lt,c as st,b as at}from"../chunks/C0L9un44.js";import{P as kt}from"../chunks/PezoJxsC.js";import{e as ct,u as wt,d as Lt}from"../chunks/BmMNP55p.js";import{g as Gt}from"../chunks/D74i2Ncs.js";import{g as Dt,P as It}from"../chunks/C2RU1P_n.js";import{D as Nt}from"../chunks/75J_HFy9.js";import{g as Mt}from"../chunks/BPuhDRUd.js";function dt(n,e,t){const a=n.slice();return a[45]=e[t],a}function ft(n){let e,t,a,i,c,d,u,y;return{c(){e=o("div"),t=o("i"),a=g(),i=X(n[0]),c=g(),d=o("button"),this.h()},l(p){e=r(p,"DIV",{class:!0,role:!0});var _=E(e);t=r(_,"I",{class:!0}),E(t).forEach(f),a=v(_),i=W(_,n[0]),c=v(_),d=r(_,"BUTTON",{type:!0,class:!0,"aria-label":!0}),E(d).forEach(f),_.forEach(f),this.h()},h(){s(t,"class","bi bi-exclamation-triangle-fill"),s(d,"type","button"),s(d,"class","btn-close"),s(d,"aria-label","Close"),s(e,"class","alert alert-danger alert-dismissible fade show"),s(e,"role","alert")},m(p,_){le(p,e,_),l(e,t),l(e,a),l(e,i),l(e,c),l(e,d),u||(y=Z(d,"click",n[24]),u=!0)},p(p,_){_[0]&1&&re(i,p[0])},d(p){p&&f(e),u=!1,y()}}}function mt(n){let e,t,a,i,c,d,u,y;return{c(){e=o("div"),t=o("i"),a=g(),i=X(n[1]),c=g(),d=o("button"),this.h()},l(p){e=r(p,"DIV",{class:!0,role:!0});var _=E(e);t=r(_,"I",{class:!0}),E(t).forEach(f),a=v(_),i=W(_,n[1]),c=v(_),d=r(_,"BUTTON",{type:!0,class:!0,"aria-label":!0}),E(d).forEach(f),_.forEach(f),this.h()},h(){s(t,"class","bi bi-check-circle-fill"),s(d,"type","button"),s(d,"class","btn-close"),s(d,"aria-label","Close"),s(e,"class","alert alert-success alert-dismissible fade show"),s(e,"role","alert")},m(p,_){le(p,e,_),l(e,t),l(e,a),l(e,i),l(e,c),l(e,d),u||(y=Z(d,"click",n[25]),u=!0)},p(p,_){_[0]&2&&re(i,p[1])},d(p){p&&f(e),u=!1,y()}}}function St(n){let e,t,a,i='<tr><th scope="col" class="svelte-1bmabql">Year</th> <th scope="col" class="svelte-1bmabql">Period</th> <th scope="col" class="d-none d-md-table-cell svelte-1bmabql">Baptisms Goal</th> <th scope="col" class="d-none d-md-table-cell svelte-1bmabql">Sealings Goal</th> <th scope="col" class="d-none d-lg-table-cell svelte-1bmabql">Ordinances Goal</th> <th scope="col" class="d-none d-xl-table-cell svelte-1bmabql">Notes</th> <th scope="col" class="text-end svelte-1bmabql">Actions</th></tr>',c,d,u=[],y=new Map,p=ct(n[10]);const _=b=>b[45].id;for(let b=0;b<p.length;b+=1){let C=dt(n,p,b),T=_(C);y.set(T,u[b]=pt(T,C))}return{c(){e=o("div"),t=o("table"),a=o("thead"),a.innerHTML=i,c=g(),d=o("tbody");for(let b=0;b<u.length;b+=1)u[b].c();this.h()},l(b){e=r(b,"DIV",{class:!0});var C=E(e);t=r(C,"TABLE",{class:!0});var T=E(t);a=r(T,"THEAD",{"data-svelte-h":!0}),V(a)!=="svelte-2d79ds"&&(a.innerHTML=i),c=v(T),d=r(T,"TBODY",{});var M=E(d);for(let A=0;A<u.length;A+=1)u[A].l(M);M.forEach(f),T.forEach(f),C.forEach(f),this.h()},h(){s(t,"class","table table-hover align-middle svelte-1bmabql"),s(e,"class","table-responsive")},m(b,C){le(b,e,C),l(e,t),l(t,a),l(t,c),l(t,d);for(let T=0;T<u.length;T+=1)u[T]&&u[T].m(d,null)},p(b,C){C[0]&3736576&&(p=ct(b[10]),u=wt(u,C,_,1,b,p,y,d,Lt,pt,null,dt))},d(b){b&&f(e);for(let C=0;C<u.length;C+=1)u[C].d()}}}function At(n){let e,t='<h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">Click &quot;Create New Goal&quot; to add your first ward mission goal.</p>';return{c(){e=o("div"),e.innerHTML=t,this.h()},l(a){e=r(a,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),V(e)!=="svelte-1f0ba3m"&&(e.innerHTML=t),this.h()},h(){s(e,"class","alert alert-info"),s(e,"role","alert")},m(a,i){le(a,e,i)},p:Ze,d(a){a&&f(e)}}}function Vt(n){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=o("div"),e.innerHTML=t,this.h()},l(a){e=r(a,"DIV",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-mlx3u2"&&(e.innerHTML=t),this.h()},h(){s(e,"class","text-center py-5")},m(a,i){le(a,e,i)},p:Ze,d(a){a&&f(e)}}}function ht(n){let e,t="Archived";return{c(){e=o("span"),e.textContent=t,this.h()},l(a){e=r(a,"SPAN",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-rsgyej"&&(e.textContent=t),this.h()},h(){s(e,"class","badge bg-secondary ms-2")},m(a,i){le(a,e,i)},d(a){a&&f(e)}}}function Ut(n){let e,t,a,i,c,d="Edit",u,y,p='<i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Archive</span>',_,b;function C(){return n[28](n[45])}function T(){return n[29](n[45])}return{c(){e=o("div"),t=o("button"),a=o("i"),i=g(),c=o("span"),c.textContent=d,u=g(),y=o("button"),y.innerHTML=p,this.h()},l(M){e=r(M,"DIV",{class:!0,role:!0});var A=E(e);t=r(A,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var w=E(t);a=r(w,"I",{class:!0}),E(a).forEach(f),i=v(w),c=r(w,"SPAN",{class:!0,"data-svelte-h":!0}),V(c)!=="svelte-1davzvv"&&(c.textContent=d),w.forEach(f),u=v(A),y=r(A,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),V(y)!=="svelte-ip4l3"&&(y.innerHTML=p),A.forEach(f),this.h()},h(){s(a,"class","bi bi-pencil"),s(c,"class","d-none d-sm-inline"),s(t,"class","btn btn-sm btn-outline-primary"),s(t,"type","button"),s(t,"data-bs-toggle","offcanvas"),s(t,"data-bs-target","#"+qe),s(t,"aria-controls",qe),s(y,"class","btn btn-sm btn-outline-danger"),s(y,"type","button"),s(e,"class","btn-group gap-2"),s(e,"role","group")},m(M,A){le(M,e,A),l(e,t),l(t,a),l(t,i),l(t,c),l(e,u),l(e,y),_||(b=[Z(t,"click",C),Z(y,"click",T)],_=!0)},p(M,A){n=M},d(M){M&&f(e),_=!1,Qe(b)}}}function Pt(n){let e,t,a='<i class="bi bi-arrow-counterclockwise"></i> <span class="d-none d-sm-inline">Restore</span>',i,c,d='<i class="bi bi-trash-fill"></i> <span class="d-none d-sm-inline">Delete</span>',u,y;function p(){return n[26](n[45])}function _(){return n[27](n[45])}return{c(){e=o("div"),t=o("button"),t.innerHTML=a,i=g(),c=o("button"),c.innerHTML=d,this.h()},l(b){e=r(b,"DIV",{class:!0,role:!0});var C=E(e);t=r(C,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),V(t)!=="svelte-1dyahff"&&(t.innerHTML=a),i=v(C),c=r(C,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),V(c)!=="svelte-kg0y9k"&&(c.innerHTML=d),C.forEach(f),this.h()},h(){s(t,"class","btn btn-sm btn-success"),s(t,"type","button"),s(c,"class","btn btn-sm btn-danger"),s(c,"type","button"),s(e,"class","btn-group gap-2"),s(e,"role","group")},m(b,C){le(b,e,C),l(e,t),l(e,i),l(e,c),u||(y=[Z(t,"click",p),Z(c,"click",_)],u=!0)},p(b,C){n=b},d(b){b&&f(e),u=!1,Qe(y)}}}function pt(n,e){let t,a,i,c=e[45].year+"",d,u,y,p,_=vt(e[45].start_date,e[45].end_date)+"",b,C,T,M,A,w=(e[45].baptisms_goal??"--")+"",k,N,j=(e[45].family_sealings_goal??"--")+"",P,G,h=(e[45].temple_ordinances_goal?.toLocaleString()??"--")+"",L,B,S,x=(e[45].baptisms_goal??"--")+"",$,Ee,ne,oe=(e[45].family_sealings_goal??"--")+"",he,J,R,de=(e[45].temple_ordinances_goal?.toLocaleString()??"--")+"",pe,F,ie,K,_e=(e[45].notes||"—")+"",be,ee,Y,De,q=!e[45].is_active&&ht();function z(m,D){return m[45].is_active?Ut:Pt}let ve=z(e),H=ve(e);return{key:n,first:null,c(){t=o("tr"),a=o("td"),i=o("strong"),d=X(c),u=g(),q&&q.c(),y=g(),p=o("td"),b=X(_),C=g(),T=o("div"),M=o("small"),A=X("Goals: "),k=X(w),N=X(" / "),P=X(j),G=X(` /
										`),L=X(h),B=g(),S=o("td"),$=X(x),Ee=g(),ne=o("td"),he=X(oe),J=g(),R=o("td"),pe=X(de),F=g(),ie=o("td"),K=o("small"),be=X(_e),ee=g(),Y=o("td"),H.c(),De=g(),this.h()},l(m){t=r(m,"TR",{});var D=E(t);a=r(D,"TD",{});var se=E(a);i=r(se,"STRONG",{});var fe=E(i);d=W(fe,c),fe.forEach(f),u=v(se),q&&q.l(se),se.forEach(f),y=v(D),p=r(D,"TD",{});var we=E(p);b=W(we,_),C=v(we),T=r(we,"DIV",{class:!0});var Ge=E(T);M=r(Ge,"SMALL",{class:!0});var O=E(M);A=W(O,"Goals: "),k=W(O,w),N=W(O," / "),P=W(O,j),G=W(O,` /
										`),L=W(O,h),O.forEach(f),Ge.forEach(f),we.forEach(f),B=v(D),S=r(D,"TD",{class:!0});var Ie=E(S);$=W(Ie,x),Ie.forEach(f),Ee=v(D),ne=r(D,"TD",{class:!0});var ge=E(ne);he=W(ge,oe),ge.forEach(f),J=v(D),R=r(D,"TD",{class:!0});var He=E(R);pe=W(He,de),He.forEach(f),F=v(D),ie=r(D,"TD",{class:!0});var Ne=E(ie);K=r(Ne,"SMALL",{class:!0});var ue=E(K);be=W(ue,_e),ue.forEach(f),Ne.forEach(f),ee=v(D),Y=r(D,"TD",{class:!0});var me=E(Y);H.l(me),me.forEach(f),De=v(D),D.forEach(f),this.h()},h(){s(M,"class","text-muted"),s(T,"class","d-md-none mt-1"),s(S,"class","d-none d-md-table-cell"),s(ne,"class","d-none d-md-table-cell"),s(R,"class","d-none d-lg-table-cell"),s(K,"class","text-muted"),s(ie,"class","d-none d-xl-table-cell"),s(Y,"class","text-end"),ut(t,"table-secondary",!e[45].is_active),this.first=t},m(m,D){le(m,t,D),l(t,a),l(a,i),l(i,d),l(a,u),q&&q.m(a,null),l(t,y),l(t,p),l(p,b),l(p,C),l(p,T),l(T,M),l(M,A),l(M,k),l(M,N),l(M,P),l(M,G),l(M,L),l(t,B),l(t,S),l(S,$),l(t,Ee),l(t,ne),l(ne,he),l(t,J),l(t,R),l(R,pe),l(t,F),l(t,ie),l(ie,K),l(K,be),l(t,ee),l(t,Y),H.m(Y,null),l(t,De)},p(m,D){e=m,D[0]&1024&&c!==(c=e[45].year+"")&&re(d,c),e[45].is_active?q&&(q.d(1),q=null):q||(q=ht(),q.c(),q.m(a,null)),D[0]&1024&&_!==(_=vt(e[45].start_date,e[45].end_date)+"")&&re(b,_),D[0]&1024&&w!==(w=(e[45].baptisms_goal??"--")+"")&&re(k,w),D[0]&1024&&j!==(j=(e[45].family_sealings_goal??"--")+"")&&re(P,j),D[0]&1024&&h!==(h=(e[45].temple_ordinances_goal?.toLocaleString()??"--")+"")&&re(L,h),D[0]&1024&&x!==(x=(e[45].baptisms_goal??"--")+"")&&re($,x),D[0]&1024&&oe!==(oe=(e[45].family_sealings_goal??"--")+"")&&re(he,oe),D[0]&1024&&de!==(de=(e[45].temple_ordinances_goal?.toLocaleString()??"--")+"")&&re(pe,de),D[0]&1024&&_e!==(_e=(e[45].notes||"—")+"")&&re(be,_e),ve===(ve=z(e))&&H?H.p(e,D):(H.d(1),H=ve(e),H&&(H.c(),H.m(Y,null))),D[0]&1024&&ut(t,"table-secondary",!e[45].is_active)},d(m){m&&f(t),q&&q.d(),H.d()}}}function _t(n){let e,t,a;return{c(){e=o("div"),t=o("small"),a=X(n[0]),this.h()},l(i){e=r(i,"DIV",{class:!0,role:!0});var c=E(e);t=r(c,"SMALL",{});var d=E(t);a=W(d,n[0]),d.forEach(f),c.forEach(f),this.h()},h(){s(e,"class","alert alert-danger"),s(e,"role","alert")},m(i,c){le(i,e,c),l(e,t),l(t,a)},p(i,c){c[0]&1&&re(a,i[0])},d(i){i&&f(e)}}}function bt(n){let e;return{c(){e=o("span"),this.h()},l(t){e=r(t,"SPAN",{class:!0,role:!0}),E(e).forEach(f),this.h()},h(){s(e,"class","spinner-border spinner-border-sm me-2"),s(e,"role","status")},m(t,a){le(t,e,a)},d(t){t&&f(e)}}}function Bt(n){let e,t,a,i,c="Year *",d,u,y,p,_="Calendar year for this goal period",b,C,T,M="Start Date *",A,w,k,N,j="First day of the goal period (inclusive)",P,G,h,L="End Date *",B,S,x,$,Ee="Last day of the goal period (inclusive)",ne,oe,he,J,R,de="Baptisms Goal",pe,F,ie,K,_e='Target number of baptisms (leave empty to display "--")',be,ee,Y,De="Family Sealings Goal",q,z,ve,H,m='Target number of family sealings (leave empty to display "--")',D,se,fe,we="Temple Ordinances Goal",Ge,O,Ie,ge,He='Target number of temple ordinances performed (leave empty to display "--")',Ne,ue,me,nt="Notes (Optional)",We,ye,Xe,Le,rt="Internal notes about this goal period (for admin reference)",xe,Te,Ce,ot="Cancel",Je,ce,Re,Oe=n[2]?"Update Goal":"Create Goal",Fe,Ke,it,Q=n[0]&&_t(n),te=n[11]&&bt();return{c(){e=o("form"),Q&&Q.c(),t=g(),a=o("div"),i=o("label"),i.textContent=c,d=g(),u=o("input"),y=g(),p=o("div"),p.textContent=_,b=g(),C=o("div"),T=o("label"),T.textContent=M,A=g(),w=o("input"),k=g(),N=o("div"),N.textContent=j,P=g(),G=o("div"),h=o("label"),h.textContent=L,B=g(),S=o("input"),x=g(),$=o("div"),$.textContent=Ee,ne=g(),oe=o("hr"),he=g(),J=o("div"),R=o("label"),R.textContent=de,pe=g(),F=o("input"),ie=g(),K=o("div"),K.textContent=_e,be=g(),ee=o("div"),Y=o("label"),Y.textContent=De,q=g(),z=o("input"),ve=g(),H=o("div"),H.textContent=m,D=g(),se=o("div"),fe=o("label"),fe.textContent=we,Ge=g(),O=o("input"),Ie=g(),ge=o("div"),ge.textContent=He,Ne=g(),ue=o("div"),me=o("label"),me.textContent=nt,We=g(),ye=o("textarea"),Xe=g(),Le=o("div"),Le.textContent=rt,xe=g(),Te=o("div"),Ce=o("button"),Ce.textContent=ot,Je=g(),ce=o("button"),te&&te.c(),Re=g(),Fe=X(Oe),this.h()},l(U){e=r(U,"FORM",{class:!0});var I=E(e);Q&&Q.l(I),t=v(I),a=r(I,"DIV",{});var Me=E(a);i=r(Me,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(i)!=="svelte-d48a68"&&(i.textContent=c),d=v(Me),u=r(Me,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),y=v(Me),p=r(Me,"DIV",{class:!0,"data-svelte-h":!0}),V(p)!=="svelte-4ht43z"&&(p.textContent=_),Me.forEach(f),b=v(I),C=r(I,"DIV",{});var Se=E(C);T=r(Se,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(T)!=="svelte-1ysthgo"&&(T.textContent=M),A=v(Se),w=r(Se,"INPUT",{type:!0,class:!0,id:!0}),k=v(Se),N=r(Se,"DIV",{class:!0,"data-svelte-h":!0}),V(N)!=="svelte-p2msbi"&&(N.textContent=j),Se.forEach(f),P=v(I),G=r(I,"DIV",{});var Ae=E(G);h=r(Ae,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(h)!=="svelte-6g5902"&&(h.textContent=L),B=v(Ae),S=r(Ae,"INPUT",{type:!0,class:!0,id:!0}),x=v(Ae),$=r(Ae,"DIV",{class:!0,"data-svelte-h":!0}),V($)!=="svelte-hnkrbk"&&($.textContent=Ee),Ae.forEach(f),ne=v(I),oe=r(I,"HR",{}),he=v(I),J=r(I,"DIV",{});var Ve=E(J);R=r(Ve,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(R)!=="svelte-1qd99o0"&&(R.textContent=de),pe=v(Ve),F=r(Ve,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),ie=v(Ve),K=r(Ve,"DIV",{class:!0,"data-svelte-h":!0}),V(K)!=="svelte-dj0c6x"&&(K.textContent=_e),Ve.forEach(f),be=v(I),ee=r(I,"DIV",{});var Ue=E(ee);Y=r(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(Y)!=="svelte-10hiahm"&&(Y.textContent=De),q=v(Ue),z=r(Ue,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),ve=v(Ue),H=r(Ue,"DIV",{class:!0,"data-svelte-h":!0}),V(H)!=="svelte-1btwl9a"&&(H.textContent=m),Ue.forEach(f),D=v(I),se=r(I,"DIV",{});var Pe=E(se);fe=r(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(fe)!=="svelte-tu4x4e"&&(fe.textContent=we),Ge=v(Pe),O=r(Pe,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),Ie=v(Pe),ge=r(Pe,"DIV",{class:!0,"data-svelte-h":!0}),V(ge)!=="svelte-zwed0g"&&(ge.textContent=He),Pe.forEach(f),Ne=v(I),ue=r(I,"DIV",{});var Be=E(ue);me=r(Be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),V(me)!=="svelte-hwoi47"&&(me.textContent=nt),We=v(Be),ye=r(Be,"TEXTAREA",{class:!0,id:!0,rows:!0}),E(ye).forEach(f),Xe=v(Be),Le=r(Be,"DIV",{class:!0,"data-svelte-h":!0}),V(Le)!=="svelte-186z59a"&&(Le.textContent=rt),Be.forEach(f),xe=v(I),Te=r(I,"DIV",{class:!0});var Ye=E(Te);Ce=r(Ye,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),V(Ce)!=="svelte-klcbsm"&&(Ce.textContent=ot),Je=v(Ye),ce=r(Ye,"BUTTON",{type:!0,class:!0});var je=E(ce);te&&te.l(je),Re=v(je),Fe=W(je,Oe),je.forEach(f),Ye.forEach(f),I.forEach(f),this.h()},h(){s(i,"class","form-label"),s(i,"for","year"),s(u,"type","number"),s(u,"class","form-control"),s(u,"id","year"),s(u,"min","2000"),s(u,"max","2100"),u.required=!0,u.disabled=n[2],s(p,"class","form-text"),s(T,"class","form-label"),s(T,"for","startDate"),s(w,"type","date"),s(w,"class","form-control"),s(w,"id","startDate"),w.required=!0,s(N,"class","form-text"),s(h,"class","form-label"),s(h,"for","endDate"),s(S,"type","date"),s(S,"class","form-control"),s(S,"id","endDate"),S.required=!0,s($,"class","form-text"),s(R,"class","form-label"),s(R,"for","baptismsGoal"),s(F,"type","number"),s(F,"class","form-control"),s(F,"id","baptismsGoal"),s(F,"min","0"),s(F,"placeholder","Leave empty for no goal"),s(K,"class","form-text"),s(Y,"class","form-label"),s(Y,"for","familySealingsGoal"),s(z,"type","number"),s(z,"class","form-control"),s(z,"id","familySealingsGoal"),s(z,"min","0"),s(z,"placeholder","Leave empty for no goal"),s(H,"class","form-text"),s(fe,"class","form-label"),s(fe,"for","templeOrdinancesGoal"),s(O,"type","number"),s(O,"class","form-control"),s(O,"id","templeOrdinancesGoal"),s(O,"min","0"),s(O,"placeholder","Leave empty for no goal"),s(ge,"class","form-text"),s(me,"class","form-label"),s(me,"for","notes"),s(ye,"class","form-control"),s(ye,"id","notes"),s(ye,"rows","3"),s(Le,"class","form-text"),s(Ce,"type","button"),s(Ce,"class","btn btn-secondary"),s(ce,"type","submit"),s(ce,"class","btn btn-primary"),ce.disabled=n[11],s(Te,"class","d-flex justify-content-end gap-2"),s(e,"class","d-flex flex-column gap-3")},m(U,I){le(U,e,I),Q&&Q.m(e,null),l(e,t),l(e,a),l(a,i),l(a,d),l(a,u),ae(u,n[3]),l(a,y),l(a,p),l(e,b),l(e,C),l(C,T),l(C,A),l(C,w),ae(w,n[4]),l(C,k),l(C,N),l(e,P),l(e,G),l(G,h),l(G,B),l(G,S),ae(S,n[5]),l(G,x),l(G,$),l(e,ne),l(e,oe),l(e,he),l(e,J),l(J,R),l(J,pe),l(J,F),ae(F,n[6]),l(J,ie),l(J,K),l(e,be),l(e,ee),l(ee,Y),l(ee,q),l(ee,z),ae(z,n[7]),l(ee,ve),l(ee,H),l(e,D),l(e,se),l(se,fe),l(se,Ge),l(se,O),ae(O,n[8]),l(se,Ie),l(se,ge),l(e,Ne),l(e,ue),l(ue,me),l(ue,We),l(ue,ye),ae(ye,n[9]),l(ue,Xe),l(ue,Le),l(e,xe),l(e,Te),l(Te,Ce),l(Te,Je),l(Te,ce),te&&te.m(ce,null),l(ce,Re),l(ce,Fe),Ke||(it=[Z(u,"input",n[30]),Z(w,"input",n[31]),Z(S,"input",n[32]),Z(F,"input",n[33]),Z(z,"input",n[34]),Z(O,"input",n[35]),Z(ye,"input",n[36]),Z(Ce,"click",n[17]),Z(e,"submit",Tt(n[18]))],Ke=!0)},p(U,I){U[0]?Q?Q.p(U,I):(Q=_t(U),Q.c(),Q.m(e,t)):Q&&(Q.d(1),Q=null),I[0]&4&&(u.disabled=U[2]),I[0]&8&&ke(u.value)!==U[3]&&ae(u,U[3]),I[0]&16&&ae(w,U[4]),I[0]&32&&ae(S,U[5]),I[0]&64&&ke(F.value)!==U[6]&&ae(F,U[6]),I[0]&128&&ke(z.value)!==U[7]&&ae(z,U[7]),I[0]&256&&ke(O.value)!==U[8]&&ae(O,U[8]),I[0]&512&&ae(ye,U[9]),U[11]?te||(te=bt(),te.c(),te.m(ce,Re)):te&&(te.d(1),te=null),I[0]&4&&Oe!==(Oe=U[2]?"Update Goal":"Create Goal")&&re(Fe,Oe),I[0]&2048&&(ce.disabled=U[11])},d(U){U&&f(e),Q&&Q.d(),te&&te.d(),Ke=!1,Qe(it)}}}function qt(n){let e,t,a,i="Ward Mission Goals Configuration",c,d,u,y,p,_,b,C,T,M,A,w,k=n[0]&&ft(n),N=n[1]&&mt(n);function j(h,L){return h[11]?Vt:h[10].length===0?At:St}let P=j(n),G=P(n);return T=new Nt({props:{title:n[2]?`Edit Goal for ${n[3]}`:"Create New Goal",id:qe,placement:"end",$$slots:{default:[Bt]},$$scope:{ctx:n}}}),{c(){e=o("div"),t=o("div"),a=o("h2"),a.textContent=i,c=g(),d=o("button"),u=o("i"),y=X(" Create New Goal"),p=g(),k&&k.c(),_=g(),N&&N.c(),b=g(),G.c(),C=g(),at(T.$$.fragment),this.h()},l(h){e=r(h,"DIV",{class:!0});var L=E(e);t=r(L,"DIV",{class:!0});var B=E(t);a=r(B,"H2",{"data-svelte-h":!0}),V(a)!=="svelte-1a0qak8"&&(a.textContent=i),c=v(B),d=r(B,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var S=E(d);u=r(S,"I",{class:!0}),E(u).forEach(f),y=W(S," Create New Goal"),S.forEach(f),B.forEach(f),p=v(L),k&&k.l(L),_=v(L),N&&N.l(L),b=v(L),G.l(L),L.forEach(f),C=v(h),st(T.$$.fragment,h),this.h()},h(){s(u,"class","bi bi-plus-circle"),s(d,"class","btn btn-primary"),s(d,"type","button"),s(d,"data-bs-toggle","offcanvas"),s(d,"data-bs-target","#"+qe),s(d,"aria-controls",qe),s(t,"class","d-flex justify-content-between align-items-center mb-4"),s(e,"class","ward-mission-goals-admin svelte-1bmabql")},m(h,L){le(h,e,L),l(e,t),l(t,a),l(t,c),l(t,d),l(d,u),l(d,y),l(e,p),k&&k.m(e,null),l(e,_),N&&N.m(e,null),l(e,b),G.m(e,null),le(h,C,L),lt(T,h,L),M=!0,A||(w=Z(d,"click",n[15]),A=!0)},p(h,L){h[0]?k?k.p(h,L):(k=ft(h),k.c(),k.m(e,_)):k&&(k.d(1),k=null),h[1]?N?N.p(h,L):(N=mt(h),N.c(),N.m(e,b)):N&&(N.d(1),N=null),P===(P=j(h))&&G?G.p(h,L):(G.d(1),G=P(h),G&&(G.c(),G.m(e,null)));const B={};L[0]&12&&(B.title=h[2]?`Edit Goal for ${h[3]}`:"Create New Goal"),L[0]&3069|L[1]&131072&&(B.$$scope={dirty:L,ctx:h}),T.$set(B)},i(h){M||(tt(T.$$.fragment,h),M=!0)},o(h){et(T.$$.fragment,h),M=!1},d(h){h&&(f(e),f(C)),k&&k.d(),N&&N.d(),G.d(),$e(T,h),A=!1,w()}}}const qe="goal-form-drawer";function vt(n,e){const[t,a,i]=n.split("-").map(Number),[c,d,u]=e.split("-").map(Number),y=new Date(t,a-1,i),p=new Date(c,d-1,u),_=y.toLocaleDateString("en-US",{month:"short"}),b=p.toLocaleDateString("en-US",{month:"short"});return`${_} to ${b}`}function Ht(n,e,t){let a,i,c,d;const{stores:{data:u,loading:y},actions:{reload:p,apiCreate:_,apiUpdate:b,apiDelete:C,apiRestore:T,apiHardDelete:M}}=Gt();ze(n,u,m=>t(22,i=m)),ze(n,y,m=>t(11,d=m));const{stores:{currentUserIsRoot:A}}=Dt();ze(n,A,m=>t(23,c=m));let w=null,k=null,N=null,j=!1,P=new Date().getFullYear()+1,G="",h="",L=null,B=null,S=null,x="";yt(async()=>{await p()});function $(){N=null,t(2,j=!1),t(3,P=new Date().getFullYear()+1),t(4,G=""),t(5,h=""),t(6,L=null),t(7,B=null),t(8,S=null),t(9,x=""),t(0,w=null)}function Ee(){$(),t(2,j=!1)}function ne(m){N=m,t(2,j=!0),t(3,P=m.year),t(4,G=m.start_date),t(5,h=m.end_date),t(6,L=m.baptisms_goal),t(7,B=m.family_sealings_goal),t(8,S=m.temple_ordinances_goal),t(9,x=m.notes||""),t(0,w=null)}function oe(){document.querySelector(`[data-bs-target="#${qe}"]`)?.click(),$()}async function he(){if(t(0,w=null),t(1,k=null),!P||P<2e3||P>2100){t(0,w="Please enter a valid year between 2000 and 2100");return}if(!G||!h){t(0,w="Please select both start and end dates");return}if(G>h){t(0,w="Start date must be before or equal to end date");return}try{const m={year:P,start_date:G,end_date:h,baptisms_goal:L,family_sealings_goal:B,temple_ordinances_goal:S,is_active:!0,notes:x||null};j&&N?.id?(await b(N.id,m),t(1,k="Goal updated successfully!")):(await _(m),t(1,k="Goal created successfully!")),oe(),setTimeout(()=>{t(1,k=null)},3e3)}catch(m){t(0,w=m instanceof Error?m.message:"Failed to save goal")}}async function J(m){if(confirm(`Are you sure you want to archive the goal for ${m.year}? You can restore it later.`))try{m.id&&(await C(m.id),t(1,k="Goal archived successfully!"),setTimeout(()=>{t(1,k=null)},3e3))}catch(D){t(0,w=D instanceof Error?D.message:"Failed to archive goal")}}async function R(m){if(confirm(`Are you sure you want to restore the goal for ${m.year}?`))try{m.id&&(await T(m.id),t(1,k="Goal restored successfully!"),setTimeout(()=>{t(1,k=null)},3e3))}catch(D){t(0,w=D instanceof Error?D.message:"Failed to restore goal")}}async function de(m){if(confirm(`Are you sure you want to PERMANENTLY delete the goal for ${m.year}?

This action cannot be undone and will remove the goal from the database forever.`))try{m.id&&(await M(m.id),t(1,k="Goal permanently deleted!"),setTimeout(()=>{t(1,k=null)},3e3))}catch(D){t(0,w=D instanceof Error?D.message:"Failed to permanently delete goal")}}const pe=()=>t(0,w=null),F=()=>t(1,k=null),ie=m=>R(m),K=m=>de(m),_e=m=>ne(m),be=m=>J(m);function ee(){P=ke(this.value),t(3,P)}function Y(){G=this.value,t(4,G)}function De(){h=this.value,t(5,h)}function q(){L=ke(this.value),t(6,L)}function z(){B=ke(this.value),t(7,B)}function ve(){S=ke(this.value),t(8,S)}function H(){x=this.value,t(9,x)}return n.$$.update=()=>{n.$$.dirty[0]&12582912&&t(10,a=c?i:i.filter(m=>m.is_active))},[w,k,j,P,G,h,L,B,S,x,a,d,u,y,A,Ee,ne,oe,he,J,R,de,i,c,pe,F,ie,K,_e,be,ee,Y,De,q,z,ve,H]}class Ot extends Ct{constructor(e){super(),Et(this,e,Ht,qt,gt,{},null,[-1,-1])}}function Rt(n){let e,t,a=`Configure annual ward mission goals including target dates and goal values. Goals will
			automatically display on the home page for all ward members.`,i,c,d;return c=new Ot({}),{c(){e=o("div"),t=o("p"),t.textContent=a,i=g(),at(c.$$.fragment),this.h()},l(u){e=r(u,"DIV",{class:!0});var y=E(e);t=r(y,"P",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-5kjh6h"&&(t.textContent=a),i=v(y),st(c.$$.fragment,y),y.forEach(f),this.h()},h(){s(t,"class","lead"),s(e,"class","container svelte-y958z5")},m(u,y){le(u,e,y),l(e,t),l(e,i),lt(c,e,null),d=!0},p:Ze,i(u){d||(tt(c.$$.fragment,u),d=!0)},o(u){et(c.$$.fragment,u),d=!1},d(u){u&&f(e),$e(c)}}}function Ft(n){let e,t;return e=new kt({props:{pageTitle:"Manage Ward Mission Goals",$$slots:{default:[Rt]},$$scope:{ctx:n}}}),{c(){at(e.$$.fragment)},l(a){st(e.$$.fragment,a)},m(a,i){lt(e,a,i),t=!0},p(a,[i]){const c={};i&8&&(c.$$scope={dirty:i,ctx:a}),e.$set(c)},i(a){t||(tt(e.$$.fragment,a),t=!0)},o(a){et(e.$$.fragment,a),t=!1},d(a){$e(e,a)}}}function Yt(n,e,t){let a;const{stores:{currentUserHasPermission:i,pageName:c}}=Dt();return ze(n,i,d=>t(1,a=d)),c.set("Ward Mission Goals"),yt(()=>{a(It.EditTempleChallenges)||Mt("/home")}),[i]}class Zt extends Ct{constructor(e){super(),Et(this,e,Yt,Ft,gt,{})}}export{Zt as component};
