import{s as M,l as U,d as b,u as A,m as C,o as H,i as y,q as O,g,j as k,k as j,r as D,n as S,I as V,b as _,C as E,p as d,c as h,e as w,w as I,h as v}from"../chunks/BQ7GsIJB.js";import{S as B,i as P,t as q,a as F}from"../chunks/BJAXi6Wx.js";import{g as z}from"../chunks/DCPE_XBY.js";const R=!0,X=Object.freeze(Object.defineProperty({__proto__:null,prerender:R},Symbol.toStringTag,{value:"Module"}));function N(n){let s,r,c,o,f=`<strong>Update Available</strong><br/>
			A new version of the app is available. Please reload to get the latest features and bug fixes.`,a,t,m='<i class="bi bi-arrow-clockwise"></i> Reload Now',i,e,l,T;return{c(){s=v("div"),r=v("i"),c=k(),o=v("div"),o.innerHTML=f,a=k(),t=v("button"),t.innerHTML=m,i=k(),e=v("button"),this.h()},l(u){s=h(u,"DIV",{class:!0,role:!0});var p=w(s);r=h(p,"I",{class:!0}),w(r).forEach(b),c=g(p),o=h(p,"DIV",{class:!0,"data-svelte-h":!0}),I(o)!=="svelte-deeehk"&&(o.innerHTML=f),a=g(p),t=h(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),I(t)!=="svelte-1fsc537"&&(t.innerHTML=m),i=g(p),e=h(p,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(e).forEach(b),p.forEach(b),this.h()},h(){d(r,"class","bi bi-arrow-clockwise"),d(o,"class","flex-grow-1"),d(t,"type","button"),d(t,"class","btn btn-sm btn-primary"),d(e,"type","button"),d(e,"class","btn-close"),d(e,"aria-label","Close"),d(s,"class","alert alert-info alert-dismissible d-flex align-items-center gap-2 m-3"),d(s,"role","alert")},m(u,p){y(u,s,p),_(s,r),_(s,c),_(s,o),_(s,a),_(s,t),_(s,i),_(s,e),l||(T=[E(t,"click",n[5]),E(e,"click",n[8])],l=!0)},p:S,d(u){u&&b(s),l=!1,V(T)}}}function L(n){let s,r,c,o,f=`<strong>Session Expired</strong><br/>
			Your authentication token has expired. Please log in again to continue.`,a,t,m,i;return{c(){s=v("div"),r=v("i"),c=k(),o=v("div"),o.innerHTML=f,a=k(),t=v("button"),this.h()},l(e){s=h(e,"DIV",{class:!0,role:!0});var l=w(s);r=h(l,"I",{class:!0}),w(r).forEach(b),c=g(l),o=h(l,"DIV",{"data-svelte-h":!0}),I(o)!=="svelte-1pap48h"&&(o.innerHTML=f),a=g(l),t=h(l,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(t).forEach(b),l.forEach(b),this.h()},h(){d(r,"class","bi bi-clock-history"),d(t,"type","button"),d(t,"class","btn-close"),d(t,"aria-label","Close"),d(s,"class","alert alert-warning alert-dismissible d-flex align-items-center gap-2 m-3"),d(s,"role","alert")},m(e,l){y(e,s,l),_(s,r),_(s,c),_(s,o),_(s,a),_(s,t),m||(i=E(t,"click",n[4]),m=!0)},p:S,d(e){e&&b(s),m=!1,i()}}}function Y(n){let s,r,c,o,f;document.title=s="Lehi31 | "+n[2];let a=n[1]&&N(n),t=n[0]&&L(n);const m=n[7].default,i=U(m,n,n[6],null);return{c(){r=k(),a&&a.c(),c=k(),t&&t.c(),o=k(),i&&i.c()},l(e){O("svelte-1y0838e",document.head).forEach(b),r=g(e),a&&a.l(e),c=g(e),t&&t.l(e),o=g(e),i&&i.l(e)},m(e,l){y(e,r,l),a&&a.m(e,l),y(e,c,l),t&&t.m(e,l),y(e,o,l),i&&i.m(e,l),f=!0},p(e,[l]){(!f||l&4)&&s!==(s="Lehi31 | "+e[2])&&(document.title=s),e[1]?a?a.p(e,l):(a=N(e),a.c(),a.m(c.parentNode,c)):a&&(a.d(1),a=null),e[0]?t?t.p(e,l):(t=L(e),t.c(),t.m(o.parentNode,o)):t&&(t.d(1),t=null),i&&i.p&&(!f||l&64)&&A(i,m,e,e[6],f?H(m,e[6],l,null):C(e[6]),null)},i(e){f||(F(i,e),f=!0)},o(e){q(i,e),f=!1},d(e){e&&(b(r),b(c),b(o)),a&&a.d(e),t&&t.d(e),i&&i.d(e)}}}function G(n,s,r){let c,{$$slots:o={},$$scope:f}=s;const{stores:{pageName:a}}=z();j(n,a,u=>r(2,c=u));let t=!1,m=!1;const i=async()=>{try{const u=await fetch("/api/version"),{version:p}=await u.json();return p!=="1765611720735"?(console.warn("[App] New version available:",p,"current:","1765611720735"),!0):!1}catch(u){return console.error("[App] Failed to check for updates:",u),!1}};D(()=>{{sessionStorage.getItem("authExpired")==="true"&&(r(0,t=!0),setTimeout(()=>{r(0,t=!1),sessionStorage.removeItem("authExpired")},1e4));const u=async()=>{await i()&&r(1,m=!0)};u();const p=setInterval(u,5*60*1e3);return()=>clearInterval(p)}});const e=()=>{r(0,t=!1),sessionStorage.removeItem("authExpired")},l=()=>{window.location.reload()},T=()=>r(1,m=!1);return n.$$set=u=>{"$$scope"in u&&r(6,f=u.$$scope)},[t,m,c,a,e,l,f,o,T]}class Z extends B{constructor(s){super(),P(this,s,G,Y,M,{})}}export{Z as component,X as universal};
