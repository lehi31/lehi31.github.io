import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as D,f as L,a as I,ak as J,m as t,E as g,D as e,s as m,c as d,F as w,r as f,B as K,e as M}from"../chunks/SWWSvUpQ.js";import{i as T}from"../chunks/Bgyk9asy.js";import{e as P,i as R,s as O}from"../chunks/CU3XCoqN.js";import{c as Q,a as b,f as x}from"../chunks/D8ekX_8E.js";import{a as U}from"../chunks/BHr55d2J.js";import{r as V}from"../chunks/CopVGF8H.js";import{e as A,f as q}from"../chunks/5a-TXARV.js";import{b as X}from"../chunks/CvxMDV_e.js";import{p as Y}from"../chunks/CdEA5IGF.js";import{L as Z}from"../chunks/BywNJUYJ.js";var ee=x('<div role="alert"><i></i> <div> </div></div>'),ae=x(`<form class="d-flex gap-3 flex-column"><div><label for="email" class="form-label">Email address</label> <input type="email" class="form-control" placeholder="your.email@example.com" id="email" aria-describedby="email" required/> <small class="text-muted">We'll send a password reset link to this email address</small></div> <div class="d-flex justify-content-between align-items-center"><a href="/auth/login" class="btn-link btn">Back to login</a> <button type="submit" class="btn btn-primary">Send Reset Link</button></div></form>`),se=x(`<div class="alert alert-info d-flex align-items-center gap-2" role="alert"><i class="bi bi-info-circle-fill"></i> <div><strong>Check your email</strong><br/> If an account exists with the email address you provided, you'll receive a password reset link
					shortly. The link will expire in 1 hour.</div></div> <div class="d-flex flex-column gap-2"><a href="/auth/login" class="btn btn-primary">Return to Login</a> <button type="button" class="btn btn-link">Send another reset link</button></div>`,1),te=x(`<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-ka1uvc"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none svelte-ka1uvc"><img src="/assets/logo.png" alt="logo" class="logo svelte-ka1uvc"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <h2 class="h5">Forgot Password</h2> <p class="text-muted small">Enter your email address and we'll send you a link to reset your password.</p> <!> <!> <div class="text-center"><small class="text-muted">Don't have an account? <a href="/auth/signup" class="link-primary">Sign up</a></small></div></div>`);function re(k,_){D(_,!1);const{actions:{requestPasswordReset:y}}=A();let u=g(!1),c=g(""),i=g(""),v=g("error"),h=g(!1);const S=async()=>{if(e(u,!0),e(i,""),e(v,"error"),!t(c)){e(i,"Email is required"),e(u,!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t(c))){e(i,"Please enter a valid email address"),e(u,!1);return}const n=await y(t(c));n.success?(e(v,"success"),e(i,n.message||"If an account exists with this email, a password reset link has been sent."),e(h,!0)):(e(v,"error"),e(i,n.error||"Failed to send password reset email")),e(u,!1)},B=s=>{s.key==="Enter"&&!t(h)&&S()},j=s=>{s.focus()};T();var E=Q();P("keydown",J,B);var C=L(E);{var N=s=>{Z(s,{message:"Sending password reset email..."})},W=s=>{var n=te(),F=m(d(n),6);{var $=r=>{var a=ee(),l=d(a),o=m(l,2),p=d(o,!0);f(o),f(a),K(()=>{q(a,1,`alert ${t(v)==="success"?"alert-success":"alert-danger"} d-flex align-items-center gap-2`),q(l,1,`bi ${t(v)==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"}`),O(p,t(i))}),b(r,a)};R(F,r=>{t(i)&&r($)})}var z=m(F,2);{var G=r=>{var a=ae(),l=d(a),o=m(d(l),2);V(o),M(()=>X(o,()=>t(c),p=>e(c,p))),U(o,p=>j?.(p)),w(2),f(l),w(2),f(a),P("submit",a,Y(S)),b(r,a)},H=r=>{var a=se(),l=m(L(a),2),o=m(d(l),2);f(l),P("click",o,()=>{e(h,!1),e(c,""),e(i,"")}),b(r,a)};R(z,r=>{t(h)?r(H,!1):r(G)})}w(2),f(n),b(s,n)};R(C,s=>{t(u)?s(N):s(W,!1)})}b(k,E),I()}function be(k,_){D(_,!1);const{stores:{pageName:y}}=A();y.set("Auth - Forgot Password"),T(),re(k,{}),I()}export{be as component};
