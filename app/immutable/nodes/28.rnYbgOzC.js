import{a as vt}from"../chunks/CnC24E_g.js";import{P as mt}from"../chunks/Bg5r8v_7.js";import{s as ut,d as i,r as ke,y as fe,v as te,i as J,q as s,z as ee,a,c as n,k as _,g as R,l as T,w as X,t as Ee,e as r,m as w,x as Y,N as Ae,o as pt,n as Ue,A as bt}from"../chunks/XwK7VtW3.js";import{S as dt,i as ft,d as Ve,t as Se,a as Me,m as $e,c as Pe,b as Be}from"../chunks/e-rlo9AR.js";import{P as gt}from"../chunks/Di5POjJr.js";import{e as st,u as yt,d as Et}from"../chunks/BXYRyfL2.js";import{D as Dt}from"../chunks/Ct6k4Xpq.js";import{u as kt}from"../chunks/Dv2RnQqr.js";const Ct=!1,Tt=async()=>(vt(mt.ManageUsers,"Manage Users"),{}),Qt=Object.freeze(Object.defineProperty({__proto__:null,load:Tt,ssr:Ct},Symbol.toStringTag,{value:"Module"}));function at(c,e,t){const l=c.slice();return l[27]=e[t],l}function nt(c){let e,t,l,o,f,v;return{c(){e=r("div"),t=Y(c[5]),l=w(),o=r("button"),this.h()},l(D){e=n(D,"DIV",{class:!0,role:!0});var p=_(e);t=X(p,c[5]),l=T(p),o=n(p,"BUTTON",{type:!0,class:!0,"aria-label":!0}),_(o).forEach(i),p.forEach(i),this.h()},h(){a(o,"type","button"),a(o,"class","btn-close"),a(o,"aria-label","Close"),a(e,"class","alert alert-danger alert-dismissible fade show"),a(e,"role","alert")},m(D,p){J(D,e,p),s(e,t),s(e,l),s(e,o),f||(v=ee(o,"click",c[19]),f=!0)},p(D,p){p&32&&te(t,D[5])},d(D){D&&i(e),f=!1,v()}}}function wt(c){let e,t,l,o='<tr><th scope="col">Name</th> <th scope="col" class="d-none d-md-table-cell">Email</th> <th scope="col" class="d-none d-lg-table-cell">Status</th> <th scope="col" class="d-none d-lg-table-cell">Active</th> <th scope="col" class="d-none d-lg-table-cell">Email Verified</th> <th scope="col" class="d-none d-lg-table-cell">Created</th> <th scope="col" class="d-none d-xl-table-cell">Last Login</th> <th scope="col" class="text-end">Actions</th></tr>',f,v,D=[],p=new Map,A,E=st(c[4]);const U=m=>m[27].id;for(let m=0;m<E.length;m+=1){let b=at(c,E,m),g=U(b);p.set(g,D[m]=rt(g,b))}let u=c[4].length===0&&ot();return{c(){e=r("div"),t=r("table"),l=r("thead"),l.innerHTML=o,f=w(),v=r("tbody");for(let m=0;m<D.length;m+=1)D[m].c();A=w(),u&&u.c(),this.h()},l(m){e=n(m,"DIV",{class:!0});var b=_(e);t=n(b,"TABLE",{class:!0});var g=_(t);l=n(g,"THEAD",{"data-svelte-h":!0}),R(l)!=="svelte-1r5sp6t"&&(l.innerHTML=o),f=T(g),v=n(g,"TBODY",{});var O=_(v);for(let $=0;$<D.length;$+=1)D[$].l(O);O.forEach(i),g.forEach(i),A=T(b),u&&u.l(b),b.forEach(i),this.h()},h(){a(t,"class","table table-hover align-middle"),a(e,"class","table-responsive")},m(m,b){J(m,e,b),s(e,t),s(t,l),s(t,f),s(t,v);for(let g=0;g<D.length;g+=1)D[g]&&D[g].m(v,null);s(e,A),u&&u.m(e,null)},p(m,b){b&18448&&(E=st(m[4]),D=yt(D,b,U,1,m,E,p,v,Et,rt,null,at)),m[4].length===0?u||(u=ot(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(m){m&&i(e);for(let b=0;b<D.length;b+=1)D[b].d();u&&u.d()}}}function Lt(c){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=r("div"),e.innerHTML=t,this.h()},l(l){e=n(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-mlx3u2"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-5")},m(l,o){J(l,e,o)},p:Ue,d(l){l&&i(e)}}}function It(c){let e,t="Never";return{c(){e=r("span"),e.textContent=t,this.h()},l(l){e=n(l,"SPAN",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1qml2vo"&&(e.textContent=t),this.h()},h(){a(e,"class","text-muted")},m(l,o){J(l,e,o)},p:Ue,d(l){l&&i(e)}}}function Nt(c){let e=new Date(c[27].last_login).toLocaleDateString()+"",t;return{c(){t=Y(e)},l(l){t=X(l,e)},m(l,o){J(l,t,o)},p(l,o){o&16&&e!==(e=new Date(l[27].last_login).toLocaleDateString()+"")&&te(t,e)},d(l){l&&i(t)}}}function rt(c,e){let t,l,o,f=(e[27].display_name??e[27].email)+"",v,D,p,A=e[27].email+"",E,U,u,m=e[27].email+"",b,g,O,$,B="user",j,F,P,L,z=e[27].is_active?"Active":"Disabled",S,N,G,H,V,Q=e[27].is_active?"Active":"Disabled",h,q,M,k,C,d=e[27].email_confirmed?"Verified":"Unverified",y,x,K,W,oe,le=new Date(e[27].created_at).toLocaleDateString()+"",he,Ce,ce,ue,Te,de,ae,Z,_e,we,ie,Oe="Edit",Le,ne,He='<i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Delete</span>',Ie,ve,Ne,qe;function xe(re,I){return re[27].last_login?Nt:It}let me=xe(e),se=me(e);function _t(){return e[21](e[27])}function ht(){return e[22](e[27])}return{key:c,first:null,c(){t=r("tr"),l=r("td"),o=r("div"),v=Y(f),D=w(),p=r("small"),E=Y(A),U=w(),u=r("td"),b=Y(m),g=w(),O=r("td"),$=r("span"),j=Y(B),F=w(),P=r("div"),L=r("span"),S=Y(z),G=w(),H=r("td"),V=r("span"),h=Y(Q),M=w(),k=r("td"),C=r("span"),y=Y(d),K=w(),W=r("td"),oe=r("small"),he=Y(le),Ce=w(),ce=r("td"),ue=r("small"),se.c(),Te=w(),de=r("td"),ae=r("div"),Z=r("button"),_e=r("i"),we=w(),ie=r("span"),ie.textContent=Oe,Le=w(),ne=r("button"),ne.innerHTML=He,Ie=w(),this.h()},l(re){t=n(re,"TR",{class:!0});var I=_(t);l=n(I,"TD",{});var pe=_(l);o=n(pe,"DIV",{class:!0});var je=_(o);v=X(je,f),je.forEach(i),D=T(pe),p=n(pe,"SMALL",{class:!0});var ze=_(p);E=X(ze,A),ze.forEach(i),pe.forEach(i),U=T(I),u=n(I,"TD",{class:!0});var Re=_(u);b=X(Re,m),Re.forEach(i),g=T(I),O=n(I,"TD",{});var be=_(O);$=n(be,"SPAN",{class:!0});var Fe=_($);j=X(Fe,B),Fe.forEach(i),F=T(be),P=n(be,"DIV",{class:!0});var Ge=_(P);L=n(Ge,"SPAN",{class:!0});var Qe=_(L);S=X(Qe,z),Qe.forEach(i),Ge.forEach(i),be.forEach(i),G=T(I),H=n(I,"TD",{class:!0});var Xe=_(H);V=n(Xe,"SPAN",{class:!0});var Ye=_(V);h=X(Ye,Q),Ye.forEach(i),Xe.forEach(i),M=T(I),k=n(I,"TD",{class:!0});var Je=_(k);C=n(Je,"SPAN",{class:!0});var Ke=_(C);y=X(Ke,d),Ke.forEach(i),Je.forEach(i),K=T(I),W=n(I,"TD",{class:!0});var We=_(W);oe=n(We,"SMALL",{});var Ze=_(oe);he=X(Ze,le),Ze.forEach(i),We.forEach(i),Ce=T(I),ce=n(I,"TD",{class:!0});var et=_(ce);ue=n(et,"SMALL",{});var tt=_(ue);se.l(tt),tt.forEach(i),et.forEach(i),Te=T(I),de=n(I,"TD",{class:!0});var lt=_(de);ae=n(lt,"DIV",{class:!0,role:!0});var ge=_(ae);Z=n(ge,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var ye=_(Z);_e=n(ye,"I",{class:!0}),_(_e).forEach(i),we=T(ye),ie=n(ye,"SPAN",{class:!0,"data-svelte-h":!0}),R(ie)!=="svelte-1davzvv"&&(ie.textContent=Oe),ye.forEach(i),Le=T(ge),ne=n(ge,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),R(ne)!=="svelte-fvaa5t"&&(ne.innerHTML=He),ge.forEach(i),lt.forEach(i),Ie=T(I),I.forEach(i),this.h()},h(){a(o,"class","fw-semibold"),a(p,"class","d-md-none text-muted d-block"),a(u,"class","d-none d-md-table-cell"),a($,"class",`badge bg-${Mt("user")} text-uppercase`),a(L,"class",N=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(P,"class","d-lg-none mt-1"),a(V,"class",q=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(H,"class","d-none d-lg-table-cell"),a(C,"class",x=`badge ${e[27].email_confirmed?"bg-success":"bg-warning"}`),a(k,"class","d-none d-lg-table-cell"),a(W,"class","d-none d-lg-table-cell"),a(ce,"class","d-none d-xl-table-cell"),a(_e,"class","bi bi-pencil"),a(ie,"class","d-none d-sm-inline"),a(Z,"class","btn btn-sm btn-outline-primary"),a(Z,"type","button"),a(Z,"data-bs-toggle","offcanvas"),a(Z,"data-bs-target",`#${De}`),a(Z,"aria-controls",De),a(ne,"class","btn btn-sm btn-outline-danger"),a(ne,"type","button"),a(ae,"class","btn-group gap-2"),a(ae,"role","group"),a(de,"class","text-end"),a(t,"class",ve=e[27].is_active?"":"opacity-75"),this.first=t},m(re,I){J(re,t,I),s(t,l),s(l,o),s(o,v),s(l,D),s(l,p),s(p,E),s(t,U),s(t,u),s(u,b),s(t,g),s(t,O),s(O,$),s($,j),s(O,F),s(O,P),s(P,L),s(L,S),s(t,G),s(t,H),s(H,V),s(V,h),s(t,M),s(t,k),s(k,C),s(C,y),s(t,K),s(t,W),s(W,oe),s(oe,he),s(t,Ce),s(t,ce),s(ce,ue),se.m(ue,null),s(t,Te),s(t,de),s(de,ae),s(ae,Z),s(Z,_e),s(Z,we),s(Z,ie),s(ae,Le),s(ae,ne),s(t,Ie),Ne||(qe=[ee(Z,"click",_t),ee(ne,"click",ht)],Ne=!0)},p(re,I){e=re,I&16&&f!==(f=(e[27].display_name??e[27].email)+"")&&te(v,f),I&16&&A!==(A=e[27].email+"")&&te(E,A),I&16&&m!==(m=e[27].email+"")&&te(b,m),I&16&&z!==(z=e[27].is_active?"Active":"Disabled")&&te(S,z),I&16&&N!==(N=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(L,"class",N),I&16&&Q!==(Q=e[27].is_active?"Active":"Disabled")&&te(h,Q),I&16&&q!==(q=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(V,"class",q),I&16&&d!==(d=e[27].email_confirmed?"Verified":"Unverified")&&te(y,d),I&16&&x!==(x=`badge ${e[27].email_confirmed?"bg-success":"bg-warning"}`)&&a(C,"class",x),I&16&&le!==(le=new Date(e[27].created_at).toLocaleDateString()+"")&&te(he,le),me===(me=xe(e))&&se?se.p(e,I):(se.d(1),se=me(e),se&&(se.c(),se.m(ue,null))),I&16&&ve!==(ve=e[27].is_active?"":"opacity-75")&&a(t,"class",ve)},d(re){re&&i(t),se.d(),Ne=!1,ke(qe)}}}function ot(c){let e,t="<p>No users found matching your filters.</p>";return{c(){e=r("div"),e.innerHTML=t,this.h()},l(l){e=n(l,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-i4erte"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-5 text-muted")},m(l,o){J(l,e,o)},d(l){l&&i(e)}}}function At(c){let e,t="Select a user to edit.";return{c(){e=r("p"),e.textContent=t,this.h()},l(l){e=n(l,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-l09ef1"&&(e.textContent=t),this.h()},h(){a(e,"class","text-muted mb-0")},m(l,o){J(l,e,o)},p:Ue,d(l){l&&i(e)}}}function Ut(c){let e,t,l,o="Display Name",f,v,D,p,A,E,U,u,m="Active Account",b,g,O="Disabled accounts cannot login",$,B,j,F="Admin Notes",P,L,z,S,N,G="Cancel",H,V,Q="Save Changes",h,q;return{c(){e=r("form"),t=r("div"),l=r("label"),l.textContent=o,f=w(),v=r("input"),D=w(),p=r("div"),A=r("div"),E=r("input"),U=w(),u=r("label"),u.textContent=m,b=w(),g=r("div"),g.textContent=O,$=w(),B=r("div"),j=r("label"),j.textContent=F,P=w(),L=r("textarea"),z=w(),S=r("div"),N=r("button"),N.textContent=G,H=w(),V=r("button"),V.textContent=Q,this.h()},l(M){e=n(M,"FORM",{class:!0});var k=_(e);t=n(k,"DIV",{});var C=_(t);l=n(C,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(l)!=="svelte-1qww9aa"&&(l.textContent=o),f=T(C),v=n(C,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),C.forEach(i),D=T(k),p=n(k,"DIV",{});var d=_(p);A=n(d,"DIV",{class:!0});var y=_(A);E=n(y,"INPUT",{class:!0,type:!0,id:!0}),U=T(y),u=n(y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(u)!=="svelte-gc2a6c"&&(u.textContent=m),y.forEach(i),b=T(d),g=n(d,"DIV",{class:!0,"data-svelte-h":!0}),R(g)!=="svelte-ip672x"&&(g.textContent=O),d.forEach(i),$=T(k),B=n(k,"DIV",{});var x=_(B);j=n(x,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(j)!=="svelte-17a0zww"&&(j.textContent=F),P=T(x),L=n(x,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0}),_(L).forEach(i),x.forEach(i),z=T(k),S=n(k,"DIV",{class:!0});var K=_(S);N=n(K,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(N)!=="svelte-10ov1w5"&&(N.textContent=G),H=T(K),V=n(K,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(V)!=="svelte-bcbxuj"&&(V.textContent=Q),K.forEach(i),k.forEach(i),this.h()},h(){a(l,"class","form-label"),a(l,"for","displayName"),a(v,"type","text"),a(v,"class","form-control"),a(v,"id","displayName"),a(v,"placeholder","Display name (optional)"),a(E,"class","form-check-input"),a(E,"type","checkbox"),a(E,"id","isActive"),a(u,"class","form-check-label"),a(u,"for","isActive"),a(A,"class","form-check form-switch"),a(g,"class","form-text"),a(j,"class","form-label"),a(j,"for","adminNotes"),a(L,"class","form-control"),a(L,"id","adminNotes"),a(L,"rows","3"),a(L,"placeholder","Internal notes about this user..."),a(N,"type","button"),a(N,"class","btn btn-secondary"),a(V,"type","submit"),a(V,"class","btn btn-primary"),a(S,"class","d-flex justify-content-end gap-2"),a(e,"class","d-flex flex-column gap-3")},m(M,k){J(M,e,k),s(e,t),s(t,l),s(t,f),s(t,v),fe(v,c[1].display_name),s(e,D),s(e,p),s(p,A),s(A,E),E.checked=c[1].is_active,s(A,U),s(A,u),s(p,b),s(p,g),s(e,$),s(e,B),s(B,j),s(B,P),s(B,L),fe(L,c[1].notes),s(e,z),s(e,S),s(S,N),s(S,H),s(S,V),h||(q=[ee(v,"input",c[23]),ee(E,"change",c[24]),ee(L,"input",c[25]),ee(N,"click",c[12]),ee(e,"submit",bt(c[13]))],h=!0)},p(M,k){k&2&&v.value!==M[1].display_name&&fe(v,M[1].display_name),k&2&&(E.checked=M[1].is_active),k&2&&fe(L,M[1].notes)},d(M){M&&i(e),h=!1,ke(q)}}}function Vt(c){let e;function t(f,v){return f[1]?Ut:At}let l=t(c),o=l(c);return{c(){o.c(),e=Ee()},l(f){o.l(f),e=Ee()},m(f,v){o.m(f,v),J(f,e,v)},p(f,v){l===(l=t(f))&&o?o.p(f,v):(o.d(1),o=l(f),o&&(o.c(),o.m(e.parentNode,e)))},d(f){f&&i(e),o.d(f)}}}function it(c){let e,t,l,o,f,v="Confirm Delete",D,p,A,E,U,u,m,b=(c[2].display_name??c[2].email)+"",g,O,$,B,j="This action cannot be undone.",F,P,L,z="Cancel",S,N,G="Delete User",H,V,Q,h;return{c(){e=r("div"),t=r("div"),l=r("div"),o=r("div"),f=r("h5"),f.textContent=v,D=w(),p=r("button"),A=w(),E=r("div"),U=r("p"),u=Y("Are you sure you want to delete the user "),m=r("strong"),g=Y(b),O=Y("?"),$=w(),B=r("p"),B.textContent=j,F=w(),P=r("div"),L=r("button"),L.textContent=z,S=w(),N=r("button"),N.textContent=G,H=w(),V=r("div"),this.h()},l(q){e=n(q,"DIV",{class:!0,tabindex:!0,role:!0});var M=_(e);t=n(M,"DIV",{class:!0,role:!0});var k=_(t);l=n(k,"DIV",{class:!0});var C=_(l);o=n(C,"DIV",{class:!0});var d=_(o);f=n(d,"H5",{class:!0,"data-svelte-h":!0}),R(f)!=="svelte-mdrdai"&&(f.textContent=v),D=T(d),p=n(d,"BUTTON",{type:!0,class:!0,"aria-label":!0}),_(p).forEach(i),d.forEach(i),A=T(C),E=n(C,"DIV",{class:!0});var y=_(E);U=n(y,"P",{});var x=_(U);u=X(x,"Are you sure you want to delete the user "),m=n(x,"STRONG",{});var K=_(m);g=X(K,b),K.forEach(i),O=X(x,"?"),x.forEach(i),$=T(y),B=n(y,"P",{class:!0,"data-svelte-h":!0}),R(B)!=="svelte-1s9uglb"&&(B.textContent=j),y.forEach(i),F=T(C),P=n(C,"DIV",{class:!0});var W=_(P);L=n(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(L)!=="svelte-1rp5z46"&&(L.textContent=z),S=T(W),N=n(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(N)!=="svelte-lwz0rj"&&(N.textContent=G),W.forEach(i),C.forEach(i),k.forEach(i),M.forEach(i),H=T(q),V=n(q,"DIV",{class:!0}),_(V).forEach(i),this.h()},h(){a(f,"class","modal-title"),a(p,"type","button"),a(p,"class","btn-close"),a(p,"aria-label","Close"),a(o,"class","modal-header"),a(B,"class","text-danger mb-0"),a(E,"class","modal-body"),a(L,"type","button"),a(L,"class","btn btn-secondary"),a(N,"type","button"),a(N,"class","btn btn-danger"),a(P,"class","modal-footer"),a(l,"class","modal-content"),a(t,"class","modal-dialog modal-dialog-centered"),a(t,"role","document"),a(e,"class","modal show d-block"),a(e,"tabindex","-1"),a(e,"role","dialog"),a(V,"class","modal-backdrop show")},m(q,M){J(q,e,M),s(e,t),s(t,l),s(l,o),s(o,f),s(o,D),s(o,p),s(l,A),s(l,E),s(E,U),s(U,u),s(U,m),s(m,g),s(U,O),s(E,$),s(E,B),s(l,F),s(l,P),s(P,L),s(P,S),s(P,N),J(q,H,M),J(q,V,M),Q||(h=[ee(p,"click",c[15]),ee(L,"click",c[15]),ee(N,"click",c[16])],Q=!0)},p(q,M){M&4&&b!==(b=(q[2].display_name??q[2].email)+"")&&te(g,b)},d(q){q&&(i(e),i(H),i(V)),Q=!1,ke(h)}}}function St(c){let e,t,l,o="User Management",f,v,D='<i class="bi bi-arrow-clockwise"></i> Refresh',p,A,E,U,u,m,b,g,O,$=c[4].length+"",B,j,F=c[4].length!==1?"s":"",P,L,z,S,N,G,H,V,Q,h=c[5]&&nt(c);function q(d,y){return d[6]?Lt:wt}let M=q(c),k=M(c);S=new Dt({props:{title:c[3],id:De,$$slots:{default:[Vt]},$$scope:{ctx:c}}});let C=c[2]&&it(c);return{c(){e=r("div"),t=r("div"),l=r("h2"),l.textContent=o,f=w(),v=r("button"),v.innerHTML=D,p=w(),h&&h.c(),A=w(),E=r("div"),U=r("div"),u=r("input"),m=w(),b=r("div"),g=r("div"),O=Y("Total: "),B=Y($),j=Y(" user"),P=Y(F),L=w(),k.c(),z=w(),Be(S.$$.fragment),N=w(),C&&C.c(),G=Ee(),this.h()},l(d){e=n(d,"DIV",{class:!0});var y=_(e);t=n(y,"DIV",{class:!0});var x=_(t);l=n(x,"H2",{"data-svelte-h":!0}),R(l)!=="svelte-1w9k0u8"&&(l.textContent=o),f=T(x),v=n(x,"BUTTON",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-1t5isil"&&(v.innerHTML=D),x.forEach(i),p=T(y),h&&h.l(y),A=T(y),E=n(y,"DIV",{class:!0});var K=_(E);U=n(K,"DIV",{class:!0});var W=_(U);u=n(W,"INPUT",{type:!0,class:!0,placeholder:!0}),W.forEach(i),m=T(K),b=n(K,"DIV",{class:!0});var oe=_(b);g=n(oe,"DIV",{class:!0});var le=_(g);O=X(le,"Total: "),B=X(le,$),j=X(le," user"),P=X(le,F),le.forEach(i),oe.forEach(i),K.forEach(i),L=T(y),k.l(y),y.forEach(i),z=T(d),Pe(S.$$.fragment,d),N=T(d),C&&C.l(d),G=Ee(),this.h()},h(){a(v,"class","btn btn-primary"),a(t,"class","d-flex justify-content-between align-items-center mb-4"),a(u,"type","text"),a(u,"class","form-control"),a(u,"placeholder","Search by email or name..."),a(U,"class","col-md-9"),a(g,"class","text-muted mt-2"),a(b,"class","col-md-3"),a(E,"class","row mb-3"),a(e,"class","user-management")},m(d,y){J(d,e,y),s(e,t),s(t,l),s(t,f),s(t,v),s(e,p),h&&h.m(e,null),s(e,A),s(e,E),s(E,U),s(U,u),fe(u,c[0]),s(E,m),s(E,b),s(b,g),s(g,O),s(g,B),s(g,j),s(g,P),s(e,L),k.m(e,null),J(d,z,y),$e(S,d,y),J(d,N,y),C&&C.m(d,y),J(d,G,y),H=!0,V||(Q=[ee(v,"click",c[18]),ee(u,"input",c[20])],V=!0)},p(d,[y]){d[5]?h?h.p(d,y):(h=nt(d),h.c(),h.m(e,A)):h&&(h.d(1),h=null),y&1&&u.value!==d[0]&&fe(u,d[0]),(!H||y&16)&&$!==($=d[4].length+"")&&te(B,$),(!H||y&16)&&F!==(F=d[4].length!==1?"s":"")&&te(P,F),M===(M=q(d))&&k?k.p(d,y):(k.d(1),k=M(d),k&&(k.c(),k.m(e,null)));const x={};y&8&&(x.title=d[3]),y&1073741826&&(x.$$scope={dirty:y,ctx:d}),S.$set(x),d[2]?C?C.p(d,y):(C=it(d),C.c(),C.m(G.parentNode,G)):C&&(C.d(1),C=null)},i(d){H||(Me(S.$$.fragment,d),H=!0)},o(d){Se(S.$$.fragment,d),H=!1},d(d){d&&(i(e),i(z),i(N),i(G)),h&&h.d(),k.d(),Ve(S,d),C&&C.d(d),V=!1,ke(Q)}}}function Mt(c){switch(c){case"root":return"danger";case"admin":return"primary";case"primary":case"relief-society":case"elders-quorum":case"teachers-quorum":case"young-women":case"sunday-school":return"info";case"authenticated":return"success";case"un-authenticated":return"secondary";default:return"secondary"}}const De="edit-user-drawer";function ct(){document.querySelector(`[data-bs-target="#${De}"]`)?.click()}function $t(c,e,t){let l,o,f,v;const{stores:D,actions:p}=kt,{users:A,loading:E,error:U}=D;Ae(c,A,h=>t(17,o=h)),Ae(c,E,h=>t(6,v=h)),Ae(c,U,h=>t(5,f=h));let u=null,m=null,b="",g="Edit User";pt(()=>{p.fetchUsers()});function O(h){t(1,u={...h}),t(3,g=`Edit User: ${h.email}`)}function $(){t(1,u=null),ct()}async function B(){if(!u)return;(await p.updateUser(u.id,{is_active:u.is_active,notes:u.notes,display_name:u.display_name})).success&&(ct(),t(1,u=null))}function j(h){t(2,m=h)}function F(){t(2,m=null)}async function P(){if(!m)return;(await p.deleteUser(m.id)).success&&t(2,m=null)}const L=()=>p.fetchUsers(),z=()=>U.set(null);function S(){b=this.value,t(0,b)}const N=h=>O(h),G=h=>j(h);function H(){u.display_name=this.value,t(1,u)}function V(){u.is_active=this.checked,t(1,u)}function Q(){u.notes=this.value,t(1,u)}return c.$$.update=()=>{c.$$.dirty&131073&&t(4,l=o.filter(h=>b===""||h.email.toLowerCase().includes(b.toLowerCase())||h.display_name?.toLowerCase().includes(b.toLowerCase())))},[b,u,m,g,l,f,v,p,A,E,U,O,$,B,j,F,P,o,L,z,S,N,G,H,V,Q]}class Pt extends dt{constructor(e){super(),ft(this,e,$t,St,ut,{})}}function Bt(c){let e,t;return e=new Pt({}),{c(){Be(e.$$.fragment)},l(l){Pe(e.$$.fragment,l)},m(l,o){$e(e,l,o),t=!0},i(l){t||(Me(e.$$.fragment,l),t=!0)},o(l){Se(e.$$.fragment,l),t=!1},d(l){Ve(e,l)}}}function Ot(c){let e,t;return e=new gt({props:{pageTitle:"Manage Users",$$slots:{default:[Bt]},$$scope:{ctx:c}}}),{c(){Be(e.$$.fragment)},l(l){Pe(e.$$.fragment,l)},m(l,o){$e(e,l,o),t=!0},p(l,[o]){const f={};o&1&&(f.$$scope={dirty:o,ctx:l}),e.$set(f)},i(l){t||(Me(e.$$.fragment,l),t=!0)},o(l){Se(e.$$.fragment,l),t=!1},d(l){Ve(e,l)}}}class Xt extends dt{constructor(e){super(),ft(this,e,null,Ot,ut,{})}}export{Xt as component,Qt as universal};
