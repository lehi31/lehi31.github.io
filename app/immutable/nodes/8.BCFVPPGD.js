import{s as U,c as ye,i as ze,u as Le,g as Me,a as Oe,B as ae,k as Ae,n as W,C as re,D as Pe,j as R,E as Y,r as Ce,o as Ee,b as oe}from"../chunks/scheduler.C8jfK40o.js";import{S as G,i as J,e as w,s as y,n as F,c as P,b as C,d as D,g as z,q as j,f as p,h as q,p as $,j as E,x as le,k as L,r as b,m as V,C as Z,u as H,t as M,a as O,l as B,D as K,H as fe,I as ue,E as te,B as Ie,F as qe,J as Q,w as Ve,v as Be,y as ce}from"../chunks/index.BDZj5h3h.js";import{e as ne}from"../chunks/Header.CVa0VfJY.js";import{w as x}from"../chunks/index.BO5Edc8W.js";import{s as Se}from"../chunks/supabase-config.CfWUfwF8.js";import{D as Fe}from"../chunks/DrawerTrigger._qkO5gv4.js";import{S as je}from"../chunks/Spinner.DG5M_eW_.js";import{t as de}from"../chunks/Drawer.7eYRaBnP.js";import{C as He}from"../chunks/CallingsLayout.bnhUX5pK.js";function Re(l,e){const n={},t={},i={$$scope:1};let s=l.length;for(;s--;){const r=l[s],u=e[s];if(u){for(const f in r)f in u||(t[f]=1);for(const f in u)i[f]||(n[f]=u[f],i[f]=1);l[s]=u}else for(const f in r)i[f]=1}for(const r in t)r in n||(n[r]=void 0);return n}const Ue=!0,Mt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ue},Symbol.toStringTag,{value:"Module"}));async function Ge(){const{data:l,error:e}=await Se.from("callings").select(`
            id,
            name,
            organization,
            sort_order,
            calling_records (
                member_id,
                sustain_status,
                is_set_apart,
                is_sustaining_reported_to_lcr,
                is_set_apart_reported_to_lcr,
                calling:callings (name,organization),
                member:members (name)
            )
        `);if(e)throw e;return l?.length?l:[]}const Je=()=>{const l=x(!1),e=x(!1),n=x([]);return{stores:{ready:l,loading:e,data:n},actions:{init:async()=>{const i=await Ge();i?.length&&n.set(i)}}}},Ye=()=>Je();function Qe(l,e,n){var t=n||{},i=t.noTrailing,s=i===void 0?!1:i,r=t.noLeading,u=r===void 0?!1:r,f=t.debounceMode,o=f===void 0?void 0:f,a,c=!1,g=0;function h(){a&&clearTimeout(a)}function m(_){var T=_||{},N=T.upcomingOnly,I=N===void 0?!1:N;h(),c=!I}function d(){for(var _=arguments.length,T=new Array(_),N=0;N<_;N++)T[N]=arguments[N];var I=this,k=Date.now()-g;if(c)return;function v(){g=Date.now(),e.apply(I,T)}function S(){a=void 0}!u&&o&&!a&&v(),h(),o===void 0&&k>l?u?(g=Date.now(),s||(a=setTimeout(o?S:v,l))):v():s!==!0&&(a=setTimeout(o?S:v,o===void 0?l-k:l))}return d.cancel=m,d}function We(l,e,n){var t={},i=t.atBegin,s=i===void 0?!1:i;return Qe(l,e,{debounceMode:s!==!1})}function me(l){let e,n='<span class="visually-hidden">Item not saved</span>';return{c(){e=w("span"),e.innerHTML=n,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1g0a6ie"&&(e.innerHTML=n),this.h()},h(){E(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(t,i){L(t,e,i)},d(t){t&&p(e)}}}function Ze(l){let e,n,t,i,s=l[3].message+"",r,u,f,o,a,c,g,h,m="Save",d,_,T,N;const I=l[6].default,k=ye(I,l,l[5],null);a=new je({props:{size:"xs"}});let v=l[0]&&me();return{c(){e=w("div"),k&&k.c(),n=y(),t=w("div"),i=w("small"),r=F(s),f=y(),o=w("span"),P(a.$$.fragment),c=y(),g=w("button"),h=w("span"),h.textContent=m,d=y(),v&&v.c(),this.h()},l(S){e=C(S,"DIV",{class:!0});var A=D(e);k&&k.l(A),n=z(A),t=C(A,"DIV",{class:!0});var X=D(t);i=C(X,"SMALL",{class:!0});var ie=D(i);r=j(ie,s),ie.forEach(p),f=z(X),o=C(X,"SPAN",{});var se=D(o);q(a.$$.fragment,se),se.forEach(p),c=z(X),g=C(X,"BUTTON",{class:!0});var ee=D(g);h=C(ee,"SPAN",{"data-svelte-h":!0}),$(h)!=="svelte-l126tb"&&(h.textContent=m),d=z(ee),v&&v.l(ee),ee.forEach(p),X.forEach(p),A.forEach(p),this.h()},h(){E(i,"class",u="fw-lighter fst-italic text-"+l[3].type),le(o,"d-none",!l[1]),E(g,"class","btn btn-primary position-relative"),E(t,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),E(e,"class","d-flex flex-column gap-4")},m(S,A){L(S,e,A),k&&k.m(e,null),b(e,n),b(e,t),b(t,i),b(i,r),b(t,f),b(t,o),V(a,o,null),b(t,c),b(t,g),b(g,h),b(g,d),v&&v.m(g,null),_=!0,T||(N=Z(g,"click",function(){ze(l[2])&&l[2].apply(this,arguments)}),T=!0)},p(S,[A]){l=S,k&&k.p&&(!_||A&32)&&Le(k,I,l,l[5],_?Oe(I,l[5],A,null):Me(l[5]),null),(!_||A&8)&&s!==(s=l[3].message+"")&&H(r,s),(!_||A&8&&u!==(u="fw-lighter fst-italic text-"+l[3].type))&&E(i,"class",u),(!_||A&2)&&le(o,"d-none",!l[1]),l[0]?v||(v=me(),v.c(),v.m(g,null)):v&&(v.d(1),v=null)},i(S){_||(M(k,S),M(a.$$.fragment,S),_=!0)},o(S){O(k,S),O(a.$$.fragment,S),_=!1},d(S){S&&p(e),k&&k.d(S),B(a),v&&v.d(),T=!1,N()}}}function Ke(l,e,n){let{$$slots:t={},$$scope:i}=e,{valueChanged:s=!1}=e,{loading:r=!1}=e,{save:u}=e,f={message:"",type:"info"};const o=a=>{a.type=a.type?a.type:"info",a.message=a.message?a.message:"",n(3,f.message=a.message,f),n(3,f.type=a.type,f),a.duration&&setTimeout(()=>{n(3,f.message="",f)},a.duration)};return l.$$set=a=>{"valueChanged"in a&&n(0,s=a.valueChanged),"loading"in a&&n(1,r=a.loading),"save"in a&&n(2,u=a.save),"$$scope"in a&&n(5,i=a.$$scope)},[s,r,u,f,o,i,t]}class Xe extends G{constructor(e){super(),J(this,e,Ke,Ze,U,{valueChanged:0,loading:1,save:2,setNotice:4})}get setNotice(){return this.$$.ctx[4]}}function ge(l,e,n){const t=l.slice();return t[8]=e[n],t}function _e(l){let e,n;return{c(){e=w("div"),n=F(l[1])},l(t){e=C(t,"DIV",{});var i=D(e);n=j(i,l[1]),i.forEach(p)},m(t,i){L(t,e,i),b(e,n)},p(t,i){i&2&&H(n,t[1])},d(t){t&&p(e)}}}function he(l){let e,n=l[8].key+"",t,i;return{c(){e=w("option"),t=F(n),this.h()},l(s){e=C(s,"OPTION",{});var r=D(e);t=j(r,n),r.forEach(p),this.h()},h(){e.__value=i=l[8].value,K(e,e.__value)},m(s,r){L(s,e,r),b(e,t)},p(s,r){r&4&&n!==(n=s[8].key+"")&&H(t,n),r&4&&i!==(i=s[8].value)&&(e.__value=i,K(e,e.__value))},d(s){s&&p(e)}}}function be(l){let e,n;return{c(){e=w("small"),n=F(l[5]),this.h()},l(t){e=C(t,"SMALL",{class:!0});var i=D(e);n=j(i,l[5]),i.forEach(p),this.h()},h(){E(e,"class","fw-lighter fst-italic")},m(t,i){L(t,e,i),b(e,n)},p(t,i){i&32&&H(n,t[5])},d(t){t&&p(e)}}}function $e(l){let e,n,t,i,s,r,u,f,o=l[1]&&_e(l),a=ne(l[2]),c=[];for(let d=0;d<a.length;d+=1)c[d]=he(ge(l,a,d));let g=[l[6],{class:"form-select"},{disabled:s=l[3]||l[4]},{"aria-label":l[1]}],h={};for(let d=0;d<g.length;d+=1)h=ae(h,g[d]);let m=l[5]&&be(l);return{c(){e=w("div"),o&&o.c(),n=y(),t=w("select"),i=w("option");for(let d=0;d<c.length;d+=1)c[d].c();r=y(),m&&m.c(),this.h()},l(d){e=C(d,"DIV",{class:!0});var _=D(e);o&&o.l(_),n=z(_),t=C(_,"SELECT",{class:!0,"aria-label":!0});var T=D(t);i=C(T,"OPTION",{}),D(i).forEach(p);for(let N=0;N<c.length;N+=1)c[N].l(T);T.forEach(p),r=z(_),m&&m.l(_),_.forEach(p),this.h()},h(){i.__value="",K(i,i.__value),fe(t,h),l[0]===void 0&&Ae(()=>l[7].call(t)),E(e,"class","d-flex flex-column gap-2")},m(d,_){L(d,e,_),o&&o.m(e,null),b(e,n),b(e,t),b(t,i);for(let T=0;T<c.length;T+=1)c[T]&&c[T].m(t,null);"value"in h&&(h.multiple?ue:te)(t,h.value),t.autofocus&&t.focus(),te(t,l[0],!0),b(e,r),m&&m.m(e,null),u||(f=Z(t,"change",l[7]),u=!0)},p(d,[_]){if(d[1]?o?o.p(d,_):(o=_e(d),o.c(),o.m(e,n)):o&&(o.d(1),o=null),_&4){a=ne(d[2]);let T;for(T=0;T<a.length;T+=1){const N=ge(d,a,T);c[T]?c[T].p(N,_):(c[T]=he(N),c[T].c(),c[T].m(t,null))}for(;T<c.length;T+=1)c[T].d(1);c.length=a.length}fe(t,h=Re(g,[_&64&&d[6],{class:"form-select"},_&24&&s!==(s=d[3]||d[4])&&{disabled:s},_&2&&{"aria-label":d[1]}])),_&90&&"value"in h&&(h.multiple?ue:te)(t,h.value),_&5&&te(t,d[0]),d[5]?m?m.p(d,_):(m=be(d),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:W,o:W,d(d){d&&p(e),o&&o.d(),Ie(c,d),m&&m.d(),u=!1,f()}}}function xe(l,e,n){const t=["label","options","value","loading","disabled","helperText"];let i=re(e,t),{label:s=""}=e,{options:r}=e,{value:u}=e,{loading:f}=e,{disabled:o}=e,{helperText:a=""}=e;function c(){u=qe(this),n(0,u),n(2,r)}return l.$$set=g=>{e=ae(ae({},e),Pe(g)),n(6,i=re(e,t)),"label"in g&&n(1,s=g.label),"options"in g&&n(2,r=g.options),"value"in g&&n(0,u=g.value),"loading"in g&&n(3,f=g.loading),"disabled"in g&&n(4,o=g.disabled),"helperText"in g&&n(5,a=g.helperText)},[u,s,r,f,o,a,i,c]}class De extends G{constructor(e){super(),J(this,e,xe,$e,U,{label:1,options:2,value:0,loading:3,disabled:4,helperText:5})}}function et(l){let e,n,t;function i(r){l[4](r)}let s={options:l[3],disabled:l[2],label:"Organization",helperText:"",loading:l[1]};return l[0]!==void 0&&(s.value=l[0]),e=new De({props:s}),R.push(()=>Q(e,"value",i)),{c(){P(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,u){V(e,r,u),t=!0},p(r,[u]){const f={};u&4&&(f.disabled=r[2]),u&2&&(f.loading=r[1]),!n&&u&1&&(n=!0,f.value=r[0],Y(()=>n=!1)),e.$set(f)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function tt(l,e,n){let{organization:t}=e,{loading:i}=e,{disabled:s}=e;const u=["Elders Quorum","Primary","Relief Society","Sunday School","Young Men","Young Women"].map(o=>({key:o,value:o}));function f(o){t=o,n(0,t)}return l.$$set=o=>{"organization"in o&&n(0,t=o.organization),"loading"in o&&n(1,i=o.loading),"disabled"in o&&n(2,s=o.disabled)},[t,i,s,u,f]}class lt extends G{constructor(e){super(),J(this,e,tt,et,U,{organization:0,loading:1,disabled:2})}}function pe(l){let e,n;return{c(){e=w("small"),n=F(l[3]),this.h()},l(t){e=C(t,"SMALL",{class:!0});var i=D(e);n=j(i,l[3]),i.forEach(p),this.h()},h(){E(e,"class","fw-lighter fst-italic")},m(t,i){L(t,e,i),b(e,n)},p(t,i){i&8&&H(n,t[3])},d(t){t&&p(e)}}}function nt(l){let e,n,t,i,s,r,u,f,o=l[3]&&pe(l);return{c(){e=w("div"),n=w("div"),t=F(l[1]),i=y(),s=w("input"),r=y(),o&&o.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=D(e);n=C(c,"DIV",{});var g=D(n);t=j(g,l[1]),g.forEach(p),i=z(c),s=C(c,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),r=z(c),o&&o.l(c),c.forEach(p),this.h()},h(){E(s,"name",l[2]),E(s,"type","text"),E(s,"class","form-control"),E(s,"placeholder",l[4]),s.disabled=l[5],s.required=l[6],le(s,"is-invalid",l[7]),E(e,"class","d-flex flex-column gap-2")},m(a,c){L(a,e,c),b(e,n),b(n,t),b(e,i),b(e,s),l[9](s),K(s,l[0]),b(e,r),o&&o.m(e,null),u||(f=[Z(s,"focus",l[10]),Z(s,"input",l[11])],u=!0)},p(a,[c]){c&2&&H(t,a[1]),c&4&&E(s,"name",a[2]),c&16&&E(s,"placeholder",a[4]),c&32&&(s.disabled=a[5]),c&64&&(s.required=a[6]),c&1&&s.value!==a[0]&&K(s,a[0]),c&128&&le(s,"is-invalid",a[7]),a[3]?o?o.p(a,c):(o=pe(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:W,o:W,d(a){a&&p(e),l[9](null),o&&o.d(),u=!1,Ce(f)}}}function at(l,e,n){let{label:t=""}=e,{name:i=""}=e,{helperText:s=""}=e,{placeholder:r=""}=e,{value:u}=e,{loading:f}=e,{required:o}=e,{isInvalid:a}=e,c;function g(d){R[d?"unshift":"push"](()=>{c=d,n(8,c)})}const h=()=>c.select();function m(){u=this.value,n(0,u)}return l.$$set=d=>{"label"in d&&n(1,t=d.label),"name"in d&&n(2,i=d.name),"helperText"in d&&n(3,s=d.helperText),"placeholder"in d&&n(4,r=d.placeholder),"value"in d&&n(0,u=d.value),"loading"in d&&n(5,f=d.loading),"required"in d&&n(6,o=d.required),"isInvalid"in d&&n(7,a=d.isInvalid)},[u,t,i,s,r,f,o,a,c,g,h,m]}class Ne extends G{constructor(e){super(),J(this,e,at,nt,U,{label:1,name:2,helperText:3,placeholder:4,value:0,loading:5,required:6,isInvalid:7})}}const it=x([]);async function st(){const{data:l,error:e}=await Se.from("members").select("*");if(e)throw e;const n=l||[];return it.set(n),n}function ve(l){let e,n,t;function i(r){l[8](r)}let s={placeholder:"Members name",name:"member-name",isInvalid:l[4],loading:l[1],helperText:"Brother John Smith or Sister Jane Smith",required:!0};return l[0].name!==void 0&&(s.value=l[0].name),e=new Ne({props:s}),R.push(()=>Q(e,"value",i)),{c(){P(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,u){V(e,r,u),t=!0},p(r,u){const f={};u&16&&(f.isInvalid=r[4]),u&2&&(f.loading=r[1]),!n&&u&1&&(n=!0,f.value=r[0].name,Y(()=>n=!1)),e.$set(f)},i(r){t||(M(e.$$.fragment,r),t=!0)},o(r){O(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function rt(l){let e,n,t="Member",i,s,r,u,f,o,a,c,g="Member not found in the list, lets create a new record.",h,m,d,_;function T(k){l[6](k)}let N={options:l[3],loading:l[1],disabled:l[2],helperText:""};l[0].name!==void 0&&(N.value=l[0].name),s=new De({props:N}),R.push(()=>Q(s,"value",T));let I=l[2]&&ve(l);return{c(){e=w("div"),n=w("div"),n.textContent=t,i=y(),P(s.$$.fragment),u=y(),f=w("div"),o=w("input"),a=y(),c=w("label"),c.textContent=g,h=y(),I&&I.c(),this.h()},l(k){e=C(k,"DIV",{class:!0});var v=D(e);n=C(v,"DIV",{"data-svelte-h":!0}),$(n)!=="svelte-xk8odi"&&(n.textContent=t),i=z(v),q(s.$$.fragment,v),u=z(v),f=C(v,"DIV",{class:!0});var S=D(f);o=C(S,"INPUT",{class:!0,type:!0,id:!0}),a=z(S),c=C(S,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),$(c)!=="svelte-1y6ka2h"&&(c.textContent=g),S.forEach(p),h=z(v),I&&I.l(v),v.forEach(p),this.h()},h(){E(o,"class","form-check-input"),E(o,"type","checkbox"),E(o,"id","is-new-member"),E(c,"class","form-check-label"),E(c,"for","is-new-member"),E(f,"class","form-check"),E(e,"class","d-flex flex-column gap-2")},m(k,v){L(k,e,v),b(e,n),b(e,i),V(s,e,null),b(e,u),b(e,f),b(f,o),o.checked=l[2],b(f,a),b(f,c),b(e,h),I&&I.m(e,null),m=!0,d||(_=Z(o,"change",l[7]),d=!0)},p(k,[v]){const S={};v&8&&(S.options=k[3]),v&2&&(S.loading=k[1]),v&4&&(S.disabled=k[2]),!r&&v&1&&(r=!0,S.value=k[0].name,Y(()=>r=!1)),s.$set(S),v&4&&(o.checked=k[2]),k[2]?I?(I.p(k,v),v&4&&M(I,1)):(I=ve(k),I.c(),M(I,1),I.m(e,null)):I&&(Ve(),O(I,1,1,()=>{I=null}),Be())},i(k){m||(M(s.$$.fragment,k),M(I),m=!0)},o(k){O(s.$$.fragment,k),O(I),m=!1},d(k){k&&p(e),B(s),I&&I.d(),d=!1,_()}}}function ot(l,e,n){let t,i,{member:s}=e,{loading:r}=e,u=[],f;Ee(async()=>{n(5,u=await st())});function o(g){l.$$.not_equal(s.name,g)&&(s.name=g,n(0,s))}function a(){f=this.checked,n(2,f)}function c(g){l.$$.not_equal(s.name,g)&&(s.name=g,n(0,s))}return l.$$set=g=>{"member"in g&&n(0,s=g.member),"loading"in g&&n(1,r=g.loading)},l.$$.update=()=>{l.$$.dirty&1&&n(4,t=s.name===""),l.$$.dirty&32&&n(3,i=u?.length?u.map(g=>({key:g.name,value:g.name})):[])},[s,r,f,i,t,u,o,a,c]}class ft extends G{constructor(e){super(),J(this,e,ot,rt,U,{member:0,loading:1})}}function ut(l){let e,n,t,i,s,r,u;function f(a){l[7](a)}let o={label:"Name",name:"calling-name",placeholder:"Calling Name",loading:l[3],isInvalid:l[5],helperText:"Elders Quorum Secretary, Primary Teacher, etc",required:!0};return l[0].name!==void 0&&(o.value=l[0].name),e=new Ne({props:o}),R.push(()=>Q(e,"value",f)),i=new lt({props:{loading:l[3],disabled:l[3],organization:l[0].organization}}),r=new ft({props:{loading:l[3],member:l[1]}}),{c(){P(e.$$.fragment),t=y(),P(i.$$.fragment),s=y(),P(r.$$.fragment)},l(a){q(e.$$.fragment,a),t=z(a),q(i.$$.fragment,a),s=z(a),q(r.$$.fragment,a)},m(a,c){V(e,a,c),L(a,t,c),V(i,a,c),L(a,s,c),V(r,a,c),u=!0},p(a,c){const g={};c&8&&(g.loading=a[3]),c&32&&(g.isInvalid=a[5]),!n&&c&1&&(n=!0,g.value=a[0].name,Y(()=>n=!1)),e.$set(g);const h={};c&8&&(h.loading=a[3]),c&8&&(h.disabled=a[3]),c&1&&(h.organization=a[0].organization),i.$set(h);const m={};c&8&&(m.loading=a[3]),c&2&&(m.member=a[1]),r.$set(m)},i(a){u||(M(e.$$.fragment,a),M(i.$$.fragment,a),M(r.$$.fragment,a),u=!0)},o(a){O(e.$$.fragment,a),O(i.$$.fragment,a),O(r.$$.fragment,a),u=!1},d(a){a&&(p(t),p(s)),B(e,a),B(i,a),B(r,a)}}}function ct(l){let e,n,t,i,s;function r(a){l[8](a)}function u(a){l[9](a)}function f(a){l[10](a)}let o={save:l[6],$$slots:{default:[ut]},$$scope:{ctx:l}};return l[3]!==void 0&&(o.loading=l[3]),l[2]!==void 0&&(o.valueChanged=l[2]),l[4]!==void 0&&(o.setNotice=l[4]),e=new Xe({props:o}),R.push(()=>Q(e,"loading",r)),R.push(()=>Q(e,"valueChanged",u)),R.push(()=>Q(e,"setNotice",f)),{c(){P(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,c){V(e,a,c),s=!0},p(a,[c]){const g={};c&2091&&(g.$$scope={dirty:c,ctx:a}),!n&&c&8&&(n=!0,g.loading=a[3],Y(()=>n=!1)),!t&&c&4&&(t=!0,g.valueChanged=a[2],Y(()=>t=!1)),!i&&c&16&&(i=!0,g.setNotice=a[4],Y(()=>i=!1)),e.$set(g)},i(a){s||(M(e.$$.fragment,a),s=!0)},o(a){O(e.$$.fragment,a),s=!1},d(a){B(e,a)}}}function dt(l,e,n){let t,{calling:i}=e,{member:s}=e,r=!1,u=!1,f;const o=async()=>{if(!r){f({message:"Sorry nothing has changed, therefore, there is nothing to save.",duration:700});return}try{f({message:"Saving ..."}),n(3,u=!0),de("set_sacrament_testimony_success","interaction","Set Successful",1),setTimeout(()=>{n(3,u=!1),f({message:"Saved",duration:3e3,type:"success"})},800)}catch(m){de("set_sacrament_testimony_failed","interaction","Set Failed",1),setTimeout(()=>{n(3,u=!1),console.error("Sacrament Program update failed",m),f({message:"Save failed, please reload browser and try again.",duration:7e3,type:"danger"})},800)}};function a(m){l.$$.not_equal(i.name,m)&&(i.name=m,n(0,i))}function c(m){u=m,n(3,u)}function g(m){r=m,n(2,r)}function h(m){f=m,n(4,f)}return l.$$set=m=>{"calling"in m&&n(0,i=m.calling),"member"in m&&n(1,s=m.member)},l.$$.update=()=>{l.$$.dirty&1&&n(5,t=i.name!=="")},[i,s,r,u,f,t,o,a,c,g,h]}class mt extends G{constructor(e){super(),J(this,e,dt,ct,U,{calling:0,member:1})}}function ke(l,e,n){const t=l.slice();return t[12]=e[n],t}function gt(l){let e,n;return e=new mt({props:{member:l[6],calling:l[5]}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p:W,i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function _t(l){let e;return{c(){e=w("i"),this.h()},l(n){e=C(n,"I",{slot:!0,class:!0}),D(e).forEach(p),this.h()},h(){E(e,"slot","label"),E(e,"class","bi bi-plus")},m(n,t){L(n,e,t)},p:W,d(n){n&&p(e)}}}function ht(l){let e,n="No Data Found";return{c(){e=w("div"),e.textContent=n,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-mjkjd"&&(e.textContent=n),this.h()},h(){E(e,"class","p-4 d-block bg-dark-subtle")},m(t,i){L(t,e,i)},p:W,d(t){t&&p(e)}}}function bt(l){let e,n,t='<tr><th scope="col">Organization</th> <th scope="col">Calling</th> <th scope="col">Member</th> <th scope="col">Actions</th></tr>',i,s,r=ne(l[1]),u=[];for(let f=0;f<r.length;f+=1)u[f]=we(ke(l,r,f));return{c(){e=w("table"),n=w("thead"),n.innerHTML=t,i=y(),s=w("tbody");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=C(f,"TABLE",{class:!0});var o=D(e);n=C(o,"THEAD",{"data-svelte-h":!0}),$(n)!=="svelte-1ufgq2d"&&(n.innerHTML=t),i=z(o),s=C(o,"TBODY",{});var a=D(s);for(let c=0;c<u.length;c+=1)u[c].l(a);a.forEach(p),o.forEach(p),this.h()},h(){E(e,"class","table")},m(f,o){L(f,e,o),b(e,n),b(e,i),b(e,s);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(s,null)},p(f,o){if(o&2){r=ne(f[1]);let a;for(a=0;a<r.length;a+=1){const c=ke(f,r,a);u[a]?u[a].p(c,o):(u[a]=we(c),u[a].c(),u[a].m(s,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=r.length}},d(f){f&&p(e),Ie(u,f)}}}function Te(l){let e=l[12].calling_records[0].member.name+"",n;return{c(){n=F(e)},l(t){n=j(t,e)},m(t,i){L(t,n,i)},p(t,i){i&2&&e!==(e=t[12].calling_records[0].member.name+"")&&H(n,e)},d(t){t&&p(n)}}}function we(l){let e,n,t=l[12].organization+"",i,s,r,u=l[12].name+"",f,o,a,c,g,h,m=l[12].calling_records?.length&&Te(l);return{c(){e=w("tr"),n=w("td"),i=F(t),s=y(),r=w("td"),f=F(u),o=y(),a=w("td"),m&&m.c(),c=y(),g=w("td"),h=y()},l(d){e=C(d,"TR",{});var _=D(e);n=C(_,"TD",{});var T=D(n);i=j(T,t),T.forEach(p),s=z(_),r=C(_,"TD",{});var N=D(r);f=j(N,u),N.forEach(p),o=z(_),a=C(_,"TD",{});var I=D(a);m&&m.l(I),I.forEach(p),c=z(_),g=C(_,"TD",{}),D(g).forEach(p),h=z(_),_.forEach(p)},m(d,_){L(d,e,_),b(e,n),b(n,i),b(e,s),b(e,r),b(r,f),b(e,o),b(e,a),m&&m.m(a,null),b(e,c),b(e,g),b(e,h)},p(d,_){_&2&&t!==(t=d[12].organization+"")&&H(i,t),_&2&&u!==(u=d[12].name+"")&&H(f,u),d[12].calling_records?.length?m?m.p(d,_):(m=Te(d),m.c(),m.m(a,null)):m&&(m.d(1),m=null)},d(d){d&&p(e),m&&m.d()}}}function pt(l){let e,n,t,i,s,r,u,f,o,a;s=new Fe({props:{drawerTitle:"New Calling",id:"new-calling-trigger-button",$$slots:{label:[_t],default:[gt]},$$scope:{ctx:l}}});function c(m,d){return m[1]?.length?bt:ht}let g=c(l),h=g(l);return{c(){e=w("div"),n=w("div"),t=w("input"),i=y(),P(s.$$.fragment),r=y(),h.c(),u=ce(),this.h()},l(m){e=C(m,"DIV",{class:!0});var d=D(e);n=C(d,"DIV",{class:!0});var _=D(n);t=C(_,"INPUT",{class:!0,type:!0,placeholder:!0}),_.forEach(p),i=z(d),q(s.$$.fragment,d),d.forEach(p),r=z(m),h.l(m),u=ce(),this.h()},h(){E(t,"class","form-control"),E(t,"type","text"),E(t,"placeholder","search"),E(n,"class","w-50"),E(e,"class","d-flex justify-content-end gap-3")},m(m,d){L(m,e,d),b(e,n),b(n,t),K(t,l[0]),b(e,i),V(s,e,null),L(m,r,d),h.m(m,d),L(m,u,d),f=!0,o||(a=[Z(t,"keyup",l[4]),Z(t,"input",l[7])],o=!0)},p(m,[d]){d&1&&t.value!==m[0]&&K(t,m[0]);const _={};d&32768&&(_.$$scope={dirty:d,ctx:m}),s.$set(_),g===(g=c(m))&&h?h.p(m,d):(h.d(1),h=g(m),h&&(h.c(),h.m(u.parentNode,u)))},i(m){f||(M(s.$$.fragment,m),f=!0)},o(m){O(s.$$.fragment,m),f=!1},d(m){m&&(p(e),p(r),p(u)),B(s),h.d(m),o=!1,Ce(a)}}}function vt(l,e,n){let t,i;const{stores:{loading:s,data:r},actions:{init:u}}=Ye();oe(l,r,d=>n(8,t=d));let f;const o=x([]);oe(l,o,d=>n(1,i=d));const a=()=>{let d=t.map(_=>({..._,searchStr:`${_.name}${_.organization}${_.calling_records?.length?_.calling_records[0]?.member?.name:""}`.toLowerCase()}));f?.length&&(d=d.filter(_=>_.searchStr.includes(f.toLowerCase()))),o.set(d)},c=We(400,()=>{s.set(!0),a(),s.set(!1)});Ee(async()=>{await u(),a()});let g={name:"",organization:"",sort_order:1},h={name:""};function m(){f=this.value,n(0,f)}return[f,i,r,o,c,g,h,m]}class kt extends G{constructor(e){super(),J(this,e,vt,pt,U,{})}}function Tt(l){let e,n;return e=new kt({}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function wt(l){let e,n;return e=new He({props:{pageTitle:"Callings",$$slots:{default:[Tt]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,i){V(e,t,i),n=!0},p(t,[i]){const s={};i&1&&(s.$$scope={dirty:i,ctx:t}),e.$set(s)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}class Ot extends G{constructor(e){super(),J(this,e,null,wt,U,{})}}export{Ot as component,Mt as universal};
