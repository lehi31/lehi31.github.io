import{s as he,d as b,i as D,A as U,x as oe,k as Le,n as le,y as J,p as r,b as d,B as Ee,c as p,e as H,w as O,g as I,f as se,h,j as M,t as ie,a as Ie,z as j,R as _e}from"../chunks/pH736Kvp.js";import{S as be,i as ge,t as Y,a as Z,g as Me,e as He,d as ve,m as ye,c as ke,b as we}from"../chunks/THtqwFCh.js";import{g as Te}from"../chunks/DxPvwIsr.js";import{g as ue}from"../chunks/CTnp2OZ3.js";import{p as Ce}from"../chunks/CDySlBtg.js";import{L as Pe}from"../chunks/QJNTbXsP.js";const De=!1,Xe=Object.freeze(Object.defineProperty({__proto__:null,prerender:De},Symbol.toStringTag,{value:"Module"}));function Ue(i){let e,t,l='<img src="/assets/logo.png" alt="logo" class="logo svelte-1n4t3wo"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',s,o,f,u,n,a,c,g,v,S,A,W,G=i[8].url.searchParams.get("verified")==="pending",B,R,y,q,z,F,V,E='<a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Submit</button>',x,$,re,w=G&&ce(),k=i[6]&&fe(i);function ne(m,_){return m[1]==="email"?Oe:Ne}let K=ne(i),C=K(i);function ae(m,_){return m[5]?Se:je}let Q=ae(i),P=Q(i),T=i[1]==="email"&&me(),L=i[1]==="email"&&pe();return{c(){e=h("div"),t=h("a"),t.innerHTML=l,s=M(),o=h("div"),f=h("button"),u=h("i"),n=ie(" Email"),c=M(),g=h("button"),v=h("i"),S=ie(" Username"),W=M(),w&&w.c(),B=M(),k&&k.c(),R=M(),y=h("form"),C.c(),q=M(),P.c(),z=M(),T&&T.c(),F=M(),V=h("div"),V.innerHTML=E,x=M(),L&&L.c(),this.h()},l(m){e=p(m,"DIV",{class:!0});var _=H(e);t=p(_,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1inzn7"&&(t.innerHTML=l),s=I(_),o=p(_,"DIV",{class:!0,role:!0,"aria-label":!0});var X=H(o);f=p(X,"BUTTON",{type:!0,class:!0});var ee=H(f);u=p(ee,"I",{class:!0}),H(u).forEach(b),n=se(ee," Email"),ee.forEach(b),c=I(X),g=p(X,"BUTTON",{type:!0,class:!0});var te=H(g);v=p(te,"I",{class:!0}),H(v).forEach(b),S=se(te," Username"),te.forEach(b),X.forEach(b),W=I(_),w&&w.l(_),B=I(_),k&&k.l(_),R=I(_),y=p(_,"FORM",{class:!0});var N=H(y);C.l(N),q=I(N),P.l(N),z=I(N),T&&T.l(N),F=I(N),V=p(N,"DIV",{class:!0,"data-svelte-h":!0}),O(V)!=="svelte-1jydk9b"&&(V.innerHTML=E),N.forEach(b),x=I(_),L&&L.l(_),_.forEach(b),this.h()},h(){r(t,"href","/home"),r(t,"class","header-content d-flex align-items-center gap-2 text-decoration-none svelte-1n4t3wo"),r(u,"class","bi bi-envelope"),r(f,"type","button"),r(f,"class",a="btn "+(i[1]==="email"?"btn-primary":"btn-outline-primary")),r(v,"class","bi bi-person"),r(g,"type","button"),r(g,"class",A="btn "+(i[1]==="username"?"btn-primary":"btn-outline-primary")),r(o,"class","btn-group w-100"),r(o,"role","group"),r(o,"aria-label","Login method"),r(V,"class","d-flex justify-content-between"),r(y,"class","d-flex gap-3 flex-column"),r(e,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-1n4t3wo")},m(m,_){D(m,e,_),d(e,t),d(e,s),d(e,o),d(o,f),d(f,u),d(f,n),d(o,c),d(o,g),d(g,v),d(g,S),d(e,W),w&&w.m(e,null),d(e,B),k&&k.m(e,null),d(e,R),d(e,y),C.m(y,null),d(y,q),P.m(y,null),d(y,z),T&&T.m(y,null),d(y,F),d(y,V),d(e,x),L&&L.m(e,null),$||(re=[U(f,"click",i[13]),U(g,"click",i[14]),U(y,"submit",Ee(i[9]))],$=!0)},p(m,_){_&2&&a!==(a="btn "+(m[1]==="email"?"btn-primary":"btn-outline-primary"))&&r(f,"class",a),_&2&&A!==(A="btn "+(m[1]==="username"?"btn-primary":"btn-outline-primary"))&&r(g,"class",A),_&256&&(G=m[8].url.searchParams.get("verified")==="pending"),G?w||(w=ce(),w.c(),w.m(e,B)):w&&(w.d(1),w=null),m[6]?k?k.p(m,_):(k=fe(m),k.c(),k.m(e,R)):k&&(k.d(1),k=null),K===(K=ne(m))&&C?C.p(m,_):(C.d(1),C=K(m),C&&(C.c(),C.m(y,q))),Q===(Q=ae(m))&&P?P.p(m,_):(P.d(1),P=Q(m),P&&(P.c(),P.m(y,z))),m[1]==="email"?T||(T=me(),T.c(),T.m(y,F)):T&&(T.d(1),T=null),m[1]==="email"?L||(L=pe(),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},i:le,o:le,d(m){m&&b(e),w&&w.d(),k&&k.d(),C.d(),P.d(),T&&T.d(),L&&L.d(),$=!1,J(re)}}}function Ve(i){let e,t;return e=new Pe({props:{message:i[6]}}),{c(){we(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,s){ye(e,l,s),t=!0},p(l,s){const o={};s&64&&(o.message=l[6]),e.$set(o)},i(l){t||(Z(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){ve(e,l)}}}function ce(i){let e,t='<i class="bi bi-info-circle-fill"></i> <div>Please check your email and click the verification link before logging in.</div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),O(e)!=="svelte-1jocvpv"&&(e.innerHTML=t),this.h()},h(){r(e,"class","alert alert-info d-flex align-items-center gap-2"),r(e,"role","alert")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function fe(i){let e,t,l,s,o,f,u=i[7]&&de();return{c(){e=h("div"),t=h("i"),l=M(),s=h("div"),o=ie(i[6]),f=M(),u&&u.c(),this.h()},l(n){e=p(n,"DIV",{class:!0,role:!0});var a=H(e);t=p(a,"I",{class:!0}),H(t).forEach(b),l=I(a),s=p(a,"DIV",{});var c=H(s);o=se(c,i[6]),f=I(c),u&&u.l(c),c.forEach(b),a.forEach(b),this.h()},h(){r(t,"class","bi bi-exclamation-triangle-fill"),r(e,"class","alert alert-danger d-flex align-items-center gap-2"),r(e,"role","alert")},m(n,a){D(n,e,a),d(e,t),d(e,l),d(e,s),d(s,o),d(s,f),u&&u.m(s,null)},p(n,a){a&64&&Ie(o,n[6]),n[7]?u||(u=de(),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},d(n){n&&b(e),u&&u.d()}}}function de(i){let e,t="Resend verification email";return{c(){e=h("a"),e.textContent=t,this.h()},l(l){e=p(l,"A",{href:!0,class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1r8sp99"&&(e.textContent=t),this.h()},h(){r(e,"href","/auth/resend-verification"),r(e,"class","alert-link")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function Ne(i){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","text"),r(e,"class","form-control"),r(e,"placeholder","Username"),r(e,"id","user-name"),r(e,"aria-describedby","username")},m(s,o){D(s,e,o),j(e,i[3]),t||(l=[U(e,"input",i[16]),_e(i[12].call(null,e))],t=!0)},p(s,o){o&8&&e.value!==s[3]&&j(e,s[3])},d(s){s&&b(e),t=!1,J(l)}}}function Oe(i){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","email"),r(e,"class","form-control"),r(e,"placeholder","Email"),r(e,"id","email"),r(e,"aria-describedby","email")},m(s,o){D(s,e,o),j(e,i[2]),t||(l=[U(e,"input",i[15]),_e(i[12].call(null,e))],t=!0)},p(s,o){o&4&&e.value!==s[2]&&j(e,s[2])},d(s){s&&b(e),t=!1,J(l)}}}function je(i){let e,t,l,s,o='<i class="bi bi-eye"></i>',f,u;return{c(){e=h("div"),t=h("input"),l=M(),s=h("button"),s.innerHTML=o,this.h()},l(n){e=p(n,"DIV",{class:!0});var a=H(e);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=I(a),s=p(a,"BUTTON",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-mjb1ay"&&(s.innerHTML=o),a.forEach(b),this.h()},h(){r(t,"type","password"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(n,a){D(n,e,a),d(e,t),j(t,i[4]),d(e,l),d(e,s),f||(u=[U(t,"input",i[18]),U(s,"click",i[10])],f=!0)},p(n,a){a&16&&t.value!==n[4]&&j(t,n[4])},d(n){n&&b(e),f=!1,J(u)}}}function Se(i){let e,t,l,s,o='<i class="bi bi-eye-slash"></i>',f,u;return{c(){e=h("div"),t=h("input"),l=M(),s=h("button"),s.innerHTML=o,this.h()},l(n){e=p(n,"DIV",{class:!0});var a=H(e);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=I(a),s=p(a,"BUTTON",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-63xbvi"&&(s.innerHTML=o),a.forEach(b),this.h()},h(){r(t,"type","text"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(n,a){D(n,e,a),d(e,t),j(t,i[4]),d(e,l),d(e,s),f||(u=[U(t,"input",i[17]),U(s,"click",i[10])],f=!0)},p(n,a){a&16&&t.value!==n[4]&&j(t,n[4])},d(n){n&&b(e),f=!1,J(u)}}}function me(i){let e,t='<a href="/auth/forgot-password" class="link-primary small">Forgot password?</a>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-k22wwf"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-end")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function pe(i){let e,t=`<small class="text-muted">Don&#39;t have an account?
					<a href="/auth/signup" class="link-primary">Sign up</a></small>`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1gmdti8"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function Ae(i){let e,t,l,s,o,f;const u=[Ve,Ue],n=[];function a(c,g){return c[0]?0:1}return e=a(i),t=n[e]=u[e](i),{c(){t.c(),l=oe()},l(c){t.l(c),l=oe()},m(c,g){n[e].m(c,g),D(c,l,g),s=!0,o||(f=U(window,"keydown",i[11]),o=!0)},p(c,[g]){let v=e;e=a(c),e===v?n[e].p(c,g):(Me(),Y(n[v],1,1,()=>{n[v]=null}),He(),t=n[e],t?t.p(c,g):(t=n[e]=u[e](c),t.c()),Z(t,1),t.m(l.parentNode,l))},i(c){s||(Z(t),s=!0)},o(c){Y(t),s=!1},d(c){c&&b(l),n[e].d(c),o=!1,f()}}}function Be(i,e,t){let l;Le(i,Ce,E=>t(8,l=E));const{actions:{login:s,loginWithEmail:o}}=Te();let f=!1,u="email",n="",a="",c="",g=!1,v="",S=!1;const A=async()=>{if(t(0,f=!0),t(6,v=""),t(7,S=!1),u==="email"){if(!n||!c){t(6,v="Email and password are required"),t(0,f=!1);return}const E=await o(n,c);E.success?(t(6,v="Logging you in ..."),setTimeout(()=>{ue("/home")},1e3)):(E.code==="EMAIL_NOT_VERIFIED"?(t(6,v="Please verify your email first."),t(7,S=!0)):t(6,v=E.error||"Login failed, please try again"),setTimeout(()=>{t(0,f=!1)},1e3))}else{if(!a||!c){t(6,v="Username and password are required"),t(0,f=!1);return}await s(a,c)?(t(6,v="Logging you in ..."),setTimeout(()=>{ue("/home")},1e3)):(t(6,v="Login failed, please try again"),setTimeout(()=>{t(0,f=!1)},1e3))}},W=()=>{t(5,g=!g)},G=E=>{E.key==="Enter"&&A()},B=E=>{E.focus()},R=()=>t(1,u="email"),y=()=>t(1,u="username");function q(){n=this.value,t(2,n)}function z(){a=this.value,t(3,a)}function F(){c=this.value,t(4,c)}function V(){c=this.value,t(4,c)}return[f,u,n,a,c,g,v,S,l,A,W,G,B,R,y,q,z,F,V]}class Re extends be{constructor(e){super(),ge(this,e,Be,Ae,he,{})}}function qe(i){let e,t;return e=new Re({}),{c(){we(e.$$.fragment)},l(l){ke(e.$$.fragment,l)},m(l,s){ye(e,l,s),t=!0},p:le,i(l){t||(Z(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){ve(e,l)}}}function ze(i){const{stores:{pageName:e}}=Te();return e.set("Auth - Login"),[]}class Ye extends be{constructor(e){super(),ge(this,e,ze,qe,he,{})}}export{Ye as component,Xe as universal};
