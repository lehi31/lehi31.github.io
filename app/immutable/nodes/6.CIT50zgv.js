import{s as je,n as Ye,r as Jt,l as Ce,b as ht}from"../chunks/DFi_IyuO.js";import{S as ze,i as Ke,d as E,A as Se,c as x,e as _,f as U,k as M,l as Y,n as se,g as I,r as O,p as R,z as we,y as ge,G as Ie,F as me,E as fe,s as Z,o as B,u as q,B as mr,H as vr,t as ve,a as le,w as dt,v as yt,b as Be,m as qe,j as Fe,q as Ze}from"../chunks/BBNWy_L1.js";import{P as br}from"../chunks/DnDISCp5.js";import{e as ae}from"../chunks/BvTvgmSa.js";import{s as $t}from"../chunks/DsH82brL.js";import{w as pr}from"../chunks/DIoSxB7H.js";import{s as mt,f as Q,g as _r}from"../chunks/7vQcJKzB.js";function Re(t,e){const r=mt(t),n=mt(e);return+r==+n}const wr=!0,Bn=Object.freeze(Object.defineProperty({__proto__:null,prerender:wr},Symbol.toStringTag,{value:"Module"})),be={SacramentBreadAssignments:"Sacrament Bread Assignments",SacramentPreparationAssignments:"Sacrament Preparation Assignments"},er=["Malakai Kalamafoni","Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],tr=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"}];var $e=["MO","TU","WE","TH","FR","SA","SU"],J=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t($e.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=$e[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}(),F=function(t){return t!=null},oe=function(t){return typeof t=="number"},vt=function(t){return typeof t=="string"&&$e.includes(t)},ee=Array.isArray,ce=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r},W=function(t,e){var r=0,n=[];if(ee(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},gr=function(t){return ee(t)?t:[t]};function Te(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=W(r,e/r.length)),r.slice(0,e)+String(n))}var Er=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},ne=function(t,e){var r=t%e;return r*e<0?r+e:r},Qe=function(t,e){return{div:Math.floor(t/e),mod:ne(t,e)}},ue=function(t){return!F(t)||t.length===0},G=function(t){return!ue(t)},z=function(t,e){return G(t)&&t.indexOf(e)!==-1},ke=function(t,e,r,n,i,a){return n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=0),new Date(Date.UTC(t,e-1,r,n,i,a))},kr=[31,28,31,30,31,30,31,31,30,31,30,31],rr=1e3*60*60*24,nr=9999,ar=ke(1970,1,1),Tr=[6,0,1,2,3,4,5],Ae=function(t){return t%4===0&&t%100!==0||t%400===0},ir=function(t){return t instanceof Date},Le=function(t){return ir(t)&&!isNaN(t.getTime())},Dr=function(t,e){var r=t.getTime(),n=e.getTime(),i=r-n;return Math.round(i/rr)},et=function(t){return Dr(t,ar)},sr=function(t){return new Date(ar.getTime()+t*rr)},Sr=function(t){var e=t.getUTCMonth();return e===1&&Ae(t.getUTCFullYear())?29:kr[e]},Me=function(t){return Tr[t.getUTCDay()]},bt=function(t,e){var r=ke(t,e+1,1);return[Me(r),Sr(r)]},or=function(t,e){return e=e||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},tt=function(t){var e=new Date(t.getTime());return e},pt=function(t){for(var e=[],r=0;r<t.length;r++)e.push(tt(t[r]));return e},Ne=function(t){t.sort(function(e,r){return e.getTime()-r.getTime()})},it=function(t,e){e===void 0&&(e=!0);var r=new Date(t);return[Te(r.getUTCFullYear().toString(),4,"0"),Te(r.getUTCMonth()+1,2,"0"),Te(r.getUTCDate(),2,"0"),"T",Te(r.getUTCHours(),2,"0"),Te(r.getUTCMinutes(),2,"0"),Te(r.getUTCSeconds(),2,"0"),e?"Z":""].join("")},st=function(t){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=e.exec(t);if(!r)throw new Error("Invalid UNTIL value: ".concat(t));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},_t=function(t,e){var r=t.toLocaleString("sv-SE",{timeZone:e});return r.replace(" ","T")+"Z"},Mr=function(t,e){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(_t(t,r)),i=new Date(_t(t,e??"UTC")),a=i.getTime()-n.getTime();return new Date(t.getTime()-a)},De=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),rt=function(t,e){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},rt(t,e)};function ot(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");rt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var te=function(){return te=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},te.apply(this,arguments)};function g(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var wt=function(t){ot(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(De),xe={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},gt=function(t,e){return t.indexOf(e)!==-1},Or=function(t){return t.toString()},Lr=function(t,e,r){return"".concat(e," ").concat(r,", ").concat(t)},de=function(){function t(e,r,n,i){if(r===void 0&&(r=Or),n===void 0&&(n=xe),i===void 0&&(i=Lr),this.text=[],this.language=n||xe,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),l=[].concat(this.options.bynmonthday);a.sort(function(d,f){return d-f}),l.sort(function(d,f){return f-d}),this.bymonthday=a.concat(l),this.bymonthday.length||(this.bymonthday=null)}if(F(this.origOptions.byweekday)){var c=ee(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],o=String(c);this.byweekday={allWeeks:c.filter(function(d){return!d.n}),someWeeks:c.filter(function(d){return!!d.n}),isWeekdays:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")===-1&&o.indexOf("SU")===-1,isEveryDay:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")!==-1&&o.indexOf("SU")!==-1};var u=function(d,f){return d.weekday-f.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(gt(["dtstart","tzid","wkst","freq"],n))return!0;if(!gt(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[A.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:r=i+n("st");break;case 2:case 22:r=i+n("nd");break;case 3:case 23:r=i+n("rd");break;default:r=i+n("th")}return e<0?r+" "+n("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=oe(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!==1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){var a=this;i===void 0&&(i=","),ee(e)||(e=[e]);var l=function(o,u,d){for(var f="",s=0;s<o.length;s++)s!==0&&(s===o.length-1?f+=" "+d+" ":f+=u+" "),f+=o[s];return f};r=r||function(o){return o.toString()};var c=function(o){return r&&r.call(a,o)};return n?l(e.map(c),i,n):e.map(c).join(i+" ")},t}(),Ar=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var a=n.exec(this.text);a&&(e===null||a[0].length>e[0].length)&&(e=a,r=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function lr(t,e){e===void 0&&(e=xe);var r={},n=new Ar(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var s=n.acceptNumber();if(s&&(r.interval=parseInt(s[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=A.DAILY,n.nextSymbol()&&(l(),f());break;case"weekday(s)":r.freq=A.WEEKLY,r.byweekday=[A.MO,A.TU,A.WE,A.TH,A.FR],n.nextSymbol(),l(),f();break;case"week(s)":r.freq=A.WEEKLY,n.nextSymbol()&&(a(),l(),f());break;case"hour(s)":r.freq=A.HOURLY,n.nextSymbol()&&(a(),f());break;case"minute(s)":r.freq=A.MINUTELY,n.nextSymbol()&&(a(),f());break;case"month(s)":r.freq=A.MONTHLY,n.nextSymbol()&&(a(),f());break;case"year(s)":r.freq=A.YEARLY,n.nextSymbol()&&(a(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=A.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[A[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=o();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(A[y]),n.nextSymbol()}l(),d(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=A.YEARLY,r.bymonth=[c()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var k=c();if(!k)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(k),n.nextSymbol()}a(),f();break;default:throw new Error("Unknown symbol")}}function a(){var s=n.accept("on"),h=n.accept("the");if(s||h)do{var y=u(),k=o(),v=c();if(y)k?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(A[k].nth(y))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(y),n.accept("day(s)"));else if(k)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(A[k]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[A.MO,A.TU,A.WE,A.TH,A.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var D=n.acceptNumber();if(!D)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(D[0],10)];n.accept("comma");){if(D=n.acceptNumber(),!D)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(D[0],10))}}else if(v)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(v);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function l(){var s=n.accept("at");if(s)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function c(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function o(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var s=parseInt(n.value[1],10);if(s<-366||s>366)throw new Error("Nth out of range: "+s);return n.nextSymbol(),n.accept("last")?-s:s;default:return!1}}function d(){n.accept("on"),n.accept("the");var s=u();if(s)for(r.bymonthday=[s],n.nextSymbol();n.accept("comma");){if(s=u(),!s)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(s),n.nextSymbol()}}function f(){if(n.symbol==="until"){var s=Date.parse(n.text);if(!s)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(s)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var H;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(H||(H={}));function lt(t){return t<H.HOURLY}var Yr=function(t,e){return e===void 0&&(e=xe),new A(lr(t,e)||void 0)},Oe=["count","until","interval","byweekday","bymonthday","bymonth"];de.IMPLEMENTED=[];de.IMPLEMENTED[H.HOURLY]=Oe;de.IMPLEMENTED[H.MINUTELY]=Oe;de.IMPLEMENTED[H.DAILY]=["byhour"].concat(Oe);de.IMPLEMENTED[H.WEEKLY]=Oe;de.IMPLEMENTED[H.MONTHLY]=Oe;de.IMPLEMENTED[H.YEARLY]=["byweekno","byyearday"].concat(Oe);var Nr=function(t,e,r,n){return new de(t,e,r,n).toString()},Ur=de.isFullyConvertible,We=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}(),Cr=function(t){ot(e,t);function e(r,n,i,a,l,c,o){var u=t.call(this,a,l,c,o)||this;return u.year=r,u.month=n,u.day=i,u}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return Me(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=ne(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Qe(this.hour,24),l=a.div,c=a.mod;if(l&&(this.hour=c,this.addDaily(l)),ue(i)||z(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var l=Qe(this.minute,60),c=l.div,o=l.mod;if(c&&(this.minute=o,this.addHours(c,!1,i)),(ue(i)||z(i,this.hour))&&(ue(a)||z(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,l){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var c=Qe(this.second,60),o=c.div,u=c.mod;if(o&&(this.second=u,this.addMinutes(o,!1,i,a)),(ue(i)||z(i,this.hour))&&(ue(a)||z(a,this.minute))&&(ue(l)||z(l,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=bt(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>nr))return;r=bt(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,l=r.wkst,c=r.byhour,o=r.byminute,u=r.bysecond;switch(i){case H.YEARLY:return this.addYears(a);case H.MONTHLY:return this.addMonths(a);case H.WEEKLY:return this.addWeekly(a,l);case H.DAILY:return this.addDaily(a);case H.HOURLY:return this.addHours(a,n,c);case H.MINUTELY:return this.addMinutes(a,n,c,o);case H.SECONDLY:return this.addSeconds(a,n,c,o,u)}},e}(We);function ur(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];z(cn,a)||e.push(a),ir(t[a])&&!Le(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return te({},t)}function Ir(t){var e=te(te({},ut),ur(t));if(F(e.byeaster)&&(e.freq=A.YEARLY),!(F(e.freq)&&A.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(t.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),F(e.wkst)?oe(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=A.MO.weekday,F(e.bysetpos)){oe(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||G(e.byweekno)||G(e.byyearday)||e.bymonthday||G(e.bymonthday)||F(e.byweekday)||F(e.byeaster)))switch(e.freq){case A.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case A.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case A.WEEKLY:e.byweekday=[Me(e.dtstart)];break}if(F(e.bymonth)&&!ee(e.bymonth)&&(e.bymonth=[e.bymonth]),F(e.byyearday)&&!ee(e.byyearday)&&oe(e.byyearday)&&(e.byyearday=[e.byyearday]),!F(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(ee(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(F(e.byweekno)&&!ee(e.byweekno)&&(e.byweekno=[e.byweekno]),!F(e.byweekday))e.bynweekday=null;else if(oe(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(vt(e.byweekday))e.byweekday=[J.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof J)!e.byweekday.n||e.freq>A.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var l=[],c=[],r=0;r<e.byweekday.length;r++){var o=e.byweekday[r];if(oe(o)){l.push(o);continue}else if(vt(o)){l.push(J.fromStr(o).weekday);continue}!o.n||e.freq>A.MONTHLY?l.push(o.weekday):c.push([o.weekday,o.n])}e.byweekday=G(l)?l:null,e.bynweekday=G(c)?c:null}return F(e.byhour)?oe(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<A.HOURLY?[e.dtstart.getUTCHours()]:null,F(e.byminute)?oe(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<A.MINUTELY?[e.dtstart.getUTCMinutes()]:null,F(e.bysecond)?oe(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<A.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Rr(t){var e=t.dtstart.getTime()%1e3;if(!lt(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new We(n,i,a,e))})})}),r}function nt(t){var e=t.split(`
`).map(xr).filter(function(r){return r!==null});return te(te({},e[0]),e[1])}function He(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[1],i=r[2];return n&&(e.tzid=n),e.dtstart=st(i),e}function xr(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return Et(t);var r=e[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return Et(t);case"DTSTART":return He(t);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(t))}}function Et(t){var e=t.replace(/^RRULE:/i,""),r=He(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),l=a[0],c=a[1];switch(l.toUpperCase()){case"FREQ":r.freq=H[c.toUpperCase()];break;case"WKST":r.wkst=ie[c.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=Wr(c),u=l.toLowerCase();r[u]=o;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=Hr(c);break;case"DTSTART":case"TZID":var d=He(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=st(c);break;case"BYEASTER":r.byeaster=Number(c);break;default:throw new Error("Unknown RRULE property '"+l+"'")}}),r}function Wr(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(kt)}return kt(t)}function kt(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function Hr(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return ie[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var i=Number(n[1]),a=n[2],l=ie[a].weekday;return new J(l,i)})}var Pe=function(){function t(e,r){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var e=it(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){return this.isUTC?this.date:Mr(this.date,this.tzid)},t}();function at(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(ut),a=0;a<n.length;a++)if(n[a]!=="tzid"&&z(i,n[a])){var l=n[a].toUpperCase(),c=t[n[a]],o="";if(!(!F(c)||ee(c)&&!c.length)){switch(l){case"FREQ":o=A.FREQUENCIES[t.freq];break;case"WKST":oe(c)?o=new J(c).toString():o=c.toString();break;case"BYWEEKDAY":l="BYDAY",o=gr(c).map(function(h){return h instanceof J?h:ee(h)?new J(h[0],h[1]):new J(h)}).toString();break;case"DTSTART":r=Pr(c,t.tzid);break;case"UNTIL":o=it(c,!t.tzid);break;default:if(ee(c)){for(var u=[],d=0;d<c.length;d++)u[d]=String(c[d]);o=u.toString()}else o=String(c)}o&&e.push([l,o])}}var f=e.map(function(h){var y=h[0],k=h[1];return"".concat(y,"=").concat(k.toString())}).join(";"),s="";return f!==""&&(s="RRULE:".concat(f)),[r,s].filter(function(h){return!!h}).join(`
`)}function Pr(t,e){return t?"DTSTART"+new Pe(new Date(t),e).toString():""}function jr(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var zr=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?tt(r):pt(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var f=0;f<i.length;f++){var s=i[f];if(!jr(r[s],d[s]))return!0}return!1},l=this[e];if(e==="all")n=this.all;else if(ee(l))for(var c=0;c<l.length;c++){var o=l[c];if(!(i.length&&a(o))){n=o._value;break}}if(!n&&this.all){for(var u=new De(e,r),c=0;c<this.all.length&&u.accept(this.all[c]);c++);n=u.getValue(),this._cacheAdd(e,n,r)}return ee(n)?pt(n):n instanceof Date?tt(n):n},t}(),Kr=g(g(g(g(g(g(g(g(g(g(g(g(g([],W(1,31),!0),W(2,28),!0),W(3,31),!0),W(4,30),!0),W(5,31),!0),W(6,30),!0),W(7,31),!0),W(8,31),!0),W(9,30),!0),W(10,31),!0),W(11,30),!0),W(12,31),!0),W(1,7),!0),Br=g(g(g(g(g(g(g(g(g(g(g(g(g([],W(1,31),!0),W(2,29),!0),W(3,31),!0),W(4,30),!0),W(5,31),!0),W(6,30),!0),W(7,31),!0),W(8,31),!0),W(9,30),!0),W(10,31),!0),W(11,30),!0),W(12,31),!0),W(1,7),!0),qr=ce(1,29),Fr=ce(1,30),pe=ce(1,31),V=ce(1,32),Zr=g(g(g(g(g(g(g(g(g(g(g(g(g([],V,!0),Fr,!0),V,!0),pe,!0),V,!0),pe,!0),V,!0),V,!0),pe,!0),V,!0),pe,!0),V,!0),V.slice(0,7),!0),Gr=g(g(g(g(g(g(g(g(g(g(g(g(g([],V,!0),qr,!0),V,!0),pe,!0),V,!0),pe,!0),V,!0),V,!0),pe,!0),V,!0),pe,!0),V,!0),V.slice(0,7),!0),Vr=ce(-28,0),Xr=ce(-29,0),_e=ce(-30,0),X=ce(-31,0),Qr=g(g(g(g(g(g(g(g(g(g(g(g(g([],X,!0),Xr,!0),X,!0),_e,!0),X,!0),_e,!0),X,!0),X,!0),_e,!0),X,!0),_e,!0),X,!0),X.slice(0,7),!0),Jr=g(g(g(g(g(g(g(g(g(g(g(g(g([],X,!0),Vr,!0),X,!0),_e,!0),X,!0),_e,!0),X,!0),X,!0),_e,!0),X,!0),_e,!0),X,!0),X.slice(0,7),!0),$r=[0,31,60,91,121,152,182,213,244,274,305,335,366],en=[0,31,59,90,120,151,181,212,243,273,304,334,365],Tt=function(){for(var t=[],e=0;e<55;e++)t=t.concat(ce(7));return t}();function tn(t,e){var r=ke(t,1,1),n=Ae(t)?366:365,i=Ae(t+1)?366:365,a=et(r),l=Me(r),c=te(te({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:l},rn(t)),{wnomask:null});if(ue(e.byweekno))return c;c.wnomask=W(0,n+7);var o,u,d=o=ne(7-l+e.wkst,7);d>=4?(d=0,u=c.yearlen+ne(l-e.wkst,7)):u=n-d;for(var f=Math.floor(u/7),s=ne(u,7),h=Math.floor(f+s/4),y=0;y<e.byweekno.length;y++){var k=e.byweekno[y];if(k<0&&(k+=h+1),k>0&&k<=h){var v=void 0;k>1?(v=d+(k-1)*7,d!==o&&(v-=7-o)):v=d;for(var D=0;D<7&&(c.wnomask[v]=1,v++,c.wdaymask[v]!==e.wkst);D++);}}if(z(e.byweekno,1)){var v=d+h*7;if(d!==o&&(v-=7-o),v<n)for(var y=0;y<7&&(c.wnomask[v]=1,v+=1,c.wdaymask[v]!==e.wkst);y++);}if(d){var L=void 0;if(z(e.byweekno,-1))L=-1;else{var b=Me(ke(t-1,1,1)),T=ne(7-b.valueOf()+e.wkst,7),p=Ae(t-1)?366:365,m=void 0;T>=4?(T=0,m=p+ne(b-e.wkst,7)):m=n-d,L=Math.floor(52+ne(m,7)/4)}if(z(e.byweekno,L))for(var v=0;v<d;v++)c.wnomask[v]=1}return c}function rn(t){var e=Ae(t)?366:365,r=ke(t,1,1),n=Me(r);return e===365?{mmask:Kr,mdaymask:Gr,nmdaymask:Jr,wdaymask:Tt.slice(n),mrange:en}:{mmask:Br,mdaymask:Zr,nmdaymask:Qr,wdaymask:Tt.slice(n),mrange:$r}}function nn(t,e,r,n,i,a){var l={lastyear:t,lastmonth:e,nwdaymask:[]},c=[];if(a.freq===A.YEARLY)if(ue(a.bymonth))c=[[0,r]];else for(var o=0;o<a.bymonth.length;o++)e=a.bymonth[o],c.push(n.slice(e-1,e+1));else a.freq===A.MONTHLY&&(c=[n.slice(e-1,e+1)]);if(ue(c))return l;l.nwdaymask=W(0,r);for(var o=0;o<c.length;o++)for(var u=c[o],d=u[0],f=u[1]-1,s=0;s<a.bynweekday.length;s++){var h=void 0,y=a.bynweekday[s],k=y[0],v=y[1];v<0?(h=f+(v+1)*7,h-=ne(i[h]-k,7)):(h=d+(v-1)*7,h+=ne(7-i[h]+k,7)),d<=h&&h<=f&&(l.nwdaymask[h]=1)}return l}function an(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),l=n%4,c=Math.floor((n+8)/25),o=Math.floor((n-c+1)/3),u=Math.floor(19*r+n-a-o+15)%30,d=Math.floor(i/4),f=i%4,s=Math.floor(32+2*l+2*d-u-f)%7,h=Math.floor((r+11*u+22*s)/451),y=Math.floor((u+s-7*h+114)/31),k=(u+s-7*h+114)%31+1,v=Date.UTC(t,y-1,k+e),D=Date.UTC(t,0,1);return[Math.ceil((v-D)/(1e3*60*60*24))]}var sn=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=tn(e,n)),G(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,l=i.mrange,c=i.wdaymask;this.monthinfo=nn(e,r,a,l,c,n)}F(n.byeaster)&&(this.eastermask=an(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),t.prototype.ydayset=function(){return[ce(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r){for(var n=this.mrange[r-1],i=this.mrange[r],a=W(null,this.yearlen),l=n;l<i;l++)a[l]=l;return[a,n,i]},t.prototype.wdayset=function(e,r,n){for(var i=W(null,this.yearlen+7),a=et(ke(e,r,n))-this.yearordinal,l=a,c=0;c<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);c++);return[i,l,a]},t.prototype.ddayset=function(e,r,n){var i=W(null,this.yearlen),a=et(ke(e,r,n))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,l=[];return this.options.byminute.forEach(function(c){l=l.concat(a.mtimeset(e,c,n,i))}),Ne(l),l},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(l){return new We(e,r,l,i)});return Ne(a),a},t.prototype.stimeset=function(e,r,n,i){return[new We(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case H.YEARLY:return this.ydayset.bind(this);case H.MONTHLY:return this.mdayset.bind(this);case H.WEEKLY:return this.wdayset.bind(this);case H.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case H.HOURLY:return this.htimeset.bind(this);case H.MINUTELY:return this.mtimeset.bind(this);case H.SECONDLY:return this.stimeset.bind(this)}},t}();function on(t,e,r,n,i,a){for(var l=[],c=0;c<t.length;c++){var o=void 0,u=void 0,d=t[c];d<0?(o=Math.floor(d/e.length),u=ne(d,e.length)):(o=Math.floor((d-1)/e.length),u=ne(d-1,e.length));for(var f=[],s=r;s<n;s++){var h=a[s];F(h)&&f.push(h)}var y=void 0;o<0?y=f.slice(o)[0]:y=f[o];var k=e[u],v=sr(i.yearordinal+y),D=or(v,k);z(l,D)||l.push(D)}return Ne(l),l}function fr(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,l=e.bysetpos,c=e.count;if(c===0||i===0)return he(t);var o=Cr.fromDate(r),u=new sn(e);u.rebuild(o.year,o.month);for(var d=fn(u,o,e);;){var f=u.getdayset(n)(o.year,o.month,o.day),s=f[0],h=f[1],y=f[2],k=un(s,h,y,u,e);if(G(l))for(var v=on(l,d,h,y,u,s),D=0;D<v.length;D++){var L=v[D];if(a&&L>a)return he(t);if(L>=r){var b=Dt(L,e);if(!t.accept(b)||c&&(--c,!c))return he(t)}}else for(var D=h;D<y;D++){var T=s[D];if(F(T))for(var p=sr(u.yearordinal+T),m=0;m<d.length;m++){var w=d[m],L=or(p,w);if(a&&L>a)return he(t);if(L>=r){var b=Dt(L,e);if(!t.accept(b)||c&&(--c,!c))return he(t)}}}if(e.interval===0||(o.add(e,k),o.year>nr))return he(t);lt(n)||(d=u.gettimeset(n)(o.hour,o.minute,o.second,0)),u.rebuild(o.year,o.month)}}function ln(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,l=r.byeaster,c=r.bymonthday,o=r.bynmonthday,u=r.byyearday;return G(n)&&!z(n,t.mmask[e])||G(i)&&!t.wnomask[e]||G(a)&&!z(a,t.wdaymask[e])||G(t.nwdaymask)&&!t.nwdaymask[e]||l!==null&&!z(t.eastermask,e)||(G(c)||G(o))&&!z(c,t.mdaymask[e])&&!z(o,t.nmdaymask[e])||G(u)&&(e<t.yearlen&&!z(u,e+1)&&!z(u,-t.yearlen+e)||e>=t.yearlen&&!z(u,e+1-t.yearlen)&&!z(u,-t.nextyearlen+e-t.yearlen))}function Dt(t,e){return new Pe(t,e.tzid).rezonedDate()}function he(t){return t.getValue()}function un(t,e,r,n,i){for(var a=!1,l=e;l<r;l++){var c=t[l];a=ln(n,c,i),a&&(t[c]=null)}return a}function fn(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,l=r.bysecond;return lt(n)?Rr(r):n>=A.HOURLY&&G(i)&&!z(i,e.hour)||n>=A.MINUTELY&&G(a)&&!z(a,e.minute)||n>=A.SECONDLY&&G(l)&&!z(l,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ie={MO:new J(0),TU:new J(1),WE:new J(2),TH:new J(3),FR:new J(4),SA:new J(5),SU:new J(6)},ut={freq:H.YEARLY,dtstart:null,interval:1,wkst:ie.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},cn=Object.keys(ut),A=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new zr,this.origOptions=ur(e);var n=Ir(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return lr(e,r)},t.fromText=function(e,r){return Yr(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return fr(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new wt("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new De("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!Le(e)||!Le(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new wt("between",a,i));var l=this._cacheGet("between",a);return l===!1&&(l=this._iter(new De("between",a)),this._cacheAdd("between",l,a)),l},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!Le(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new De("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!Le(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new De("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return at(this.origOptions)},t.prototype.toText=function(e,r,n){return Nr(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return Ur(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=H.YEARLY,t.MONTHLY=H.MONTHLY,t.WEEKLY=H.WEEKLY,t.DAILY=H.DAILY,t.HOURLY=H.HOURLY,t.MINUTELY=H.MINUTELY,t.SECONDLY=H.SECONDLY,t.MO=ie.MO,t.TU=ie.TU,t.WE=ie.WE,t.TH=ie.TH,t.FR=ie.FR,t.SA=ie.SA,t.SU=ie.SU,t.parseString=nt,t.optionsToString=at,t}();function hn(t,e,r,n,i,a){var l={},c=t.accept;function o(s,h){r.forEach(function(y){y.between(s,h,!0).forEach(function(k){l[Number(k)]=!0})})}i.forEach(function(s){var h=new Pe(s,a).rezonedDate();l[Number(h)]=!0}),t.accept=function(s){var h=Number(s);return isNaN(h)?c.call(this,s):!l[h]&&(o(new Date(h-1),new Date(h+1)),!l[h])?(l[h]=!0,c.call(this,s)):!0},t.method==="between"&&(o(t.args.after,t.args.before),t.accept=function(s){var h=Number(s);return l[h]?!0:(l[h]=!0,c.call(this,s))});for(var u=0;u<n.length;u++){var d=new Pe(n[u],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(s){fr(t,s.options)});var f=t._result;switch(Ne(f),t.method){case"all":case"between":return f;case"before":return f.length&&f[f.length-1]||null;case"after":default:return f.length&&f[0]||null}}var St={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function dn(t,e){var r=[],n=[],i=[],a=[],l=He(t),c=l.dtstart,o=l.tzid,u=pn(t,e.unfold);return u.forEach(function(d){var f;if(d){var s=bn(d),h=s.name,y=s.parms,k=s.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));r.push(nt(d));break;case"RDATE":var v=(f=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&f!==void 0?f:[],D=v[1];D&&!o&&(o=D),n=n.concat(Ot(k,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(nt(k));break;case"EXDATE":a=a.concat(Ot(k,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:c,tzid:o,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function yn(t,e){var r=dn(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,l=r.exdatevals,c=r.dtstart,o=r.tzid,u=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||l.length){var d=new wn(u);return d.dtstart(c),d.tzid(o||void 0),n.forEach(function(s){d.rrule(new A(Je(s,c,o),u))}),i.forEach(function(s){d.rdate(s)}),a.forEach(function(s){d.exrule(new A(Je(s,c,o),u))}),l.forEach(function(s){d.exdate(s)}),e.compatible&&e.dtstart&&d.rdate(c),d}var f=n[0]||{};return new A(Je(f,f.dtstart||e.dtstart||c,f.tzid||e.tzid||o),u)}function Mt(t,e){return e===void 0&&(e={}),yn(t,mn(e))}function Je(t,e,r){return te(te({},t),{dtstart:e,tzid:r})}function mn(t){var e=[],r=Object.keys(t),n=Object.keys(St);if(r.forEach(function(i){z(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return te(te({},St),t)}function vn(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=Er(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function bn(t){var e=vn(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function pn(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function _n(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Ot(t,e){return _n(e),t.split(",").map(function(r){return st(r)})}function Lt(t){var e=this;return function(r){if(r!==void 0&&(e["_".concat(t)]=r),e["_".concat(t)]!==void 0)return e["_".concat(t)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var wn=function(t){ot(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=Lt.apply(n,["dtstart"]),n.tzid=Lt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return hn(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){At(r,this._rrule)},e.prototype.exrule=function(r){At(r,this._exrule)},e.prototype.rdate=function(r){Yt(r,this._rdate)},e.prototype.exdate=function(r){Yt(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return Mt(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return Mt(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(at({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(Nt("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(Nt("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(A);function At(t,e){if(!(t instanceof A))throw new TypeError(String(t)+" is not RRule instance");z(e.map(String),String(t))||e.push(t)}function Yt(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");z(e.map(Number),Number(t))||(e.push(t),Ne(e))}function Nt(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?"".concat(t,":"):"".concat(t,";TZID=").concat(r,":"),a=e.map(function(l){return it(l.valueOf(),n)}).join(",");return"".concat(i).concat(a)}const cr={Sundays:({start_date:t,until:e})=>new A({freq:A.WEEKLY,dtstart:t,until:e,byweekday:[A.SU]})},hr=(t,e)=>t(e).all(),dr=t=>{const e=t.getMonth(),r=t.getFullYear();let n=0;for(let i=1;i<=31;i++){const a=new Date(r,e,i);if(a.getMonth()!==e)break;if(a.getDay()===0&&(n++,a.getDate()===t.getDate())){const l=["st","nd","rd","th"],c=n<=3?l[n-1]:l[3];return`${n}${c}`}}return""},gn=pr([]);async function ft(t){const{data:e,error:r}=await $t.from("assignments").select("*").eq("list_name",t).order("date");if(r)throw r;const n=e||[];return gn.set(n),n}async function yr(t,e,r){const{error:n}=await $t.from("assignments").upsert([{list_name:t,date:e,overridden_member:r,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(n)throw n;await ft(t)}function Ut(t,e,r){const n=t.slice();return n[13]=e[r],n[14]=e,n[15]=r,n}function Ct(t,e,r){const n=t.slice();return n[16]=e[r],n}function En(t){let e,r=Q(t[13].date,"MMM dd")+"",n,i,a,l=t[13].sundayNumber+"",c,o,u=Q(t[13].date,"EEEE")+"",d,f,s,h,y,k=(t[13].overridden_member?t[13].overridden_member:t[13].member)+"",v,D,L=t[13].overridden_member?"*":"",b,T,p=t[0]&&It();return{c(){e=O("td"),n=q(r),i=R(),a=O("small"),c=q(l),o=R(),d=q(u),f=R(),s=O("td"),h=O("div"),y=O("span"),v=q(k),D=R(),b=q(L),T=R(),p&&p.c(),this.h()},l(m){e=M(m,"TD",{});var w=Y(e);n=B(w,r),i=I(w),a=M(w,"SMALL",{class:!0});var S=Y(a);c=B(S,l),o=I(S),d=B(S,u),S.forEach(E),w.forEach(E),f=I(m),s=M(m,"TD",{});var P=Y(s);h=M(P,"DIV",{class:!0});var K=Y(h);y=M(K,"SPAN",{});var C=Y(y);v=B(C,k),D=I(C),b=B(C,L),C.forEach(E),T=I(K),p&&p.l(K),K.forEach(E),P.forEach(E),this.h()},h(){U(a,"class","fw-lighter"),U(h,"class","d-flex justify-content-between")},m(m,w){x(m,e,w),_(e,n),_(e,i),_(e,a),_(a,c),_(a,o),_(a,d),x(m,f,w),x(m,s,w),_(s,h),_(h,y),_(y,v),_(y,D),_(y,b),_(h,T),p&&p.m(h,null)},p(m,w){w&4&&r!==(r=Q(m[13].date,"MMM dd")+"")&&Z(n,r),w&4&&l!==(l=m[13].sundayNumber+"")&&Z(c,l),w&4&&u!==(u=Q(m[13].date,"EEEE")+"")&&Z(d,u),w&4&&k!==(k=(m[13].overridden_member?m[13].overridden_member:m[13].member)+"")&&Z(v,k),w&4&&L!==(L=m[13].overridden_member?"*":"")&&Z(b,L),m[0]?p||(p=It(),p.c(),p.m(h,null)):p&&(p.d(1),p=null)},d(m){m&&(E(e),E(f),E(s)),p&&p.d()}}}function kn(t){let e,r=Q(t[13].date,"MMM dd")+"",n,i,a,l=t[13].sundayNumber+"",c,o,u=Q(t[13].date,"EEEE")+"",d,f,s,h=(t[13].event??"")+"",y,k,v,D,L,b="No Sacrament Services";return{c(){e=O("td"),n=q(r),i=R(),a=O("small"),c=q(l),o=R(),d=q(u),f=R(),s=O("td"),y=q(h),k=R(),v=O("br"),D=R(),L=O("small"),L.textContent=b,this.h()},l(T){e=M(T,"TD",{});var p=Y(e);n=B(p,r),i=I(p),a=M(p,"SMALL",{class:!0});var m=Y(a);c=B(m,l),o=I(m),d=B(m,u),m.forEach(E),p.forEach(E),f=I(T),s=M(T,"TD",{});var w=Y(s);y=B(w,h),k=I(w),v=M(w,"BR",{}),D=I(w),L=M(w,"SMALL",{class:!0,"data-svelte-h":!0}),se(L)!=="svelte-2r8039"&&(L.textContent=b),w.forEach(E),this.h()},h(){U(a,"class","fw-lighter"),U(L,"class","fw-lighter")},m(T,p){x(T,e,p),_(e,n),_(e,i),_(e,a),_(a,c),_(a,o),_(a,d),x(T,f,p),x(T,s,p),_(s,y),_(s,k),_(s,v),_(s,D),_(s,L)},p(T,p){p&4&&r!==(r=Q(T[13].date,"MMM dd")+"")&&Z(n,r),p&4&&l!==(l=T[13].sundayNumber+"")&&Z(c,l),p&4&&u!==(u=Q(T[13].date,"EEEE")+"")&&Z(d,u),p&4&&h!==(h=(T[13].event??"")+"")&&Z(y,h)},d(T){T&&(E(e),E(f),E(s))}}}function It(t){let e;return{c(){e=O("i"),this.h()},l(r){e=M(r,"I",{class:!0}),Y(e).forEach(E),this.h()},h(){U(e,"class","bi bi-pencil-square")},m(r,n){x(r,e,n)},d(r){r&&E(e)}}}function Rt(t){let e,r,n,i,a="Change assignment to:",l,c,o,u="Default",d,f,s,h="Save",y,k,v,D,L=ae(t[1]),b=[];for(let m=0;m<L.length;m+=1)b[m]=Wt(Ct(t,L,m));function T(){t[9].call(c,t[14],t[15])}function p(){return t[10](t[13],t[15])}return{c(){e=O("tr"),r=O("td"),n=O("div"),i=O("div"),i.textContent=a,l=R(),c=O("select"),o=O("option"),o.textContent=u;for(let m=0;m<b.length;m+=1)b[m].c();d=R(),f=O("div"),s=O("button"),s.textContent=h,y=R(),this.h()},l(m){e=M(m,"TR",{class:!0});var w=Y(e);r=M(w,"TD",{colspan:!0});var S=Y(r);n=M(S,"DIV",{class:!0});var P=Y(n);i=M(P,"DIV",{"data-svelte-h":!0}),se(i)!=="svelte-1t5xiq"&&(i.textContent=a),l=I(P),c=M(P,"SELECT",{class:!0});var K=Y(c);o=M(K,"OPTION",{"data-svelte-h":!0}),se(o)!=="svelte-zvp3al"&&(o.textContent=u);for(let ye=0;ye<b.length;ye+=1)b[ye].l(K);K.forEach(E),d=I(P),f=M(P,"DIV",{class:!0});var C=Y(f);s=M(C,"BUTTON",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-rtvwan"&&(s.textContent=h),C.forEach(E),P.forEach(E),S.forEach(E),y=I(w),w.forEach(E),this.h()},h(){o.__value="",fe(o,o.__value),U(c,"class","form-select form-control-sm"),t[13].overridden_member===void 0&&Ce(T),U(s,"class","btn btn-sm btn-primary"),U(f,"class","d-flex justify-content-end"),U(n,"class","d-flex flex-column gap-2 p-2"),U(r,"colspan","2"),U(e,"class",k=t[3][`row-${t[15]}`]?"table-light":"d-none")},m(m,w){x(m,e,w),_(e,r),_(r,n),_(n,i),_(n,l),_(n,c),_(c,o);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(c,null);me(c,t[13].overridden_member,!0),_(n,d),_(n,f),_(f,s),_(e,y),v||(D=[we(c,"change",T),we(s,"click",p)],v=!0)},p(m,w){if(t=m,w&6){L=ae(t[1]);let S;for(S=0;S<L.length;S+=1){const P=Ct(t,L,S);b[S]?b[S].p(P,w):(b[S]=Wt(P),b[S].c(),b[S].m(c,null))}for(;S<b.length;S+=1)b[S].d(1);b.length=L.length}w&6&&me(c,t[13].overridden_member),w&8&&k!==(k=t[3][`row-${t[15]}`]?"table-light":"d-none")&&U(e,"class",k)},d(m){m&&E(e),Se(b,m),v=!1,Jt(D)}}}function xt(t){let e,r=t[16]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=Y(e);n=B(l,r),l.forEach(E),this.h()},h(){e.__value=i=t[16],fe(e,e.__value)},m(a,l){x(a,e,l),_(e,n)},p(a,l){l&2&&r!==(r=a[16]+"")&&Z(n,r),l&2&&i!==(i=a[16])&&(e.__value=i,fe(e,e.__value))},d(a){a&&E(e)}}}function Wt(t){let e,r=t[16]!==t[13].member&&xt(t);return{c(){r&&r.c(),e=ge()},l(n){r&&r.l(n),e=ge()},m(n,i){r&&r.m(n,i),x(n,e,i)},p(n,i){n[16]!==n[13].member?r?r.p(n,i):(r=xt(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){n&&E(e),r&&r.d(n)}}}function Ht(t){let e,r,n,i,a,l;function c(s,h){return s[13]?.event?kn:En}let o=c(t),u=o(t);function d(){return t[8](t[15])}let f=t[0]&&Rt(t);return{c(){e=O("tr"),u.c(),n=R(),f&&f.c(),i=ge(),this.h()},l(s){e=M(s,"TR",{class:!0});var h=Y(e);u.l(h),h.forEach(E),n=I(s),f&&f.l(s),i=ge(),this.h()},h(){U(e,"class",r=t[13].member===null?"table-secondary":"")},m(s,h){x(s,e,h),u.m(e,null),x(s,n,h),f&&f.m(s,h),x(s,i,h),a||(l=we(e,"click",d),a=!0)},p(s,h){t=s,o===(o=c(t))&&u?u.p(t,h):(u.d(1),u=o(t),u&&(u.c(),u.m(e,null))),h&6&&r!==(r=t[13].member===null?"table-secondary":"")&&U(e,"class",r),t[0]?f?f.p(t,h):(f=Rt(t),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(s){s&&(E(e),E(n),E(i)),u.d(),f&&f.d(s),a=!1,l()}}}function Tn(t){let e,r,n,i='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',a,l,c=ae(t[2]),o=[];for(let u=0;u<c.length;u+=1)o[u]=Ht(Ut(t,c,u));return{c(){e=O("div"),r=O("table"),n=O("thead"),n.innerHTML=i,a=R(),l=O("tbody");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var d=Y(e);r=M(d,"TABLE",{class:!0});var f=Y(r);n=M(f,"THEAD",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1c8l31s"&&(n.innerHTML=i),a=I(f),l=M(f,"TBODY",{});var s=Y(l);for(let h=0;h<o.length;h+=1)o[h].l(s);s.forEach(E),f.forEach(E),d.forEach(E),this.h()},h(){U(n,"class","table-dark"),U(r,"class","table"),U(e,"class","table-responsive")},m(u,d){x(u,e,d),_(e,r),_(r,n),_(r,a),_(r,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,null)},p(u,[d]){if(d&63){c=ae(u[2]);let f;for(f=0;f<c.length;f+=1){const s=Ut(u,c,f);o[f]?o[f].p(s,d):(o[f]=Ht(s),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=c.length}},i:Ye,o:Ye,d(u){u&&E(e),Se(o,u)}}}function Dn(t,e,r){let{editable:n=!1}=e,{listName:i="Some List"}=e,{names:a=[]}=e,{excludedDates:l=[]}=e,c=[],o=[];const u=async(v=new Date(2025,0,1,0,0,0),D=new Date(2025,11,31,0,0,0))=>{const L={start_date:v,until:D};c=hr(cr.Sundays,L);const b=new Date;b.setHours(0,0,0,0);const T=c.map((m,w)=>{const S=l.find(P=>Re(m,P.date));return{member:S?null:a[w%a.length],date:m,sundayNumber:dr(m),event:S?S.event:void 0,overridden_member:null}}).filter(m=>m.date>=b),p=await ft(i);return T.map(m=>{const w=p.find(S=>Re(new Date(S.date),m.date));return{...m,overridden_member:w?w.overridden_member:null}})},d=v=>{n&&r(3,s[`row-${v}`]=!s[`row-${v}`],s)},f=async(v,D)=>{const L=v.overridden_member||null;await yr(i,v.date.toISOString(),L),r(3,s[D]=!s[D],s),u().then(b=>{r(2,o=b)})},s={},h=v=>d(v);function y(v,D){v[D].overridden_member=Ie(this),r(2,o),r(1,a)}const k=(v,D)=>f(v,`row-${D}`);return t.$$set=v=>{"editable"in v&&r(0,n=v.editable),"listName"in v&&r(6,i=v.listName),"names"in v&&r(1,a=v.names),"excludedDates"in v&&r(7,l=v.excludedDates)},u().then(v=>{r(2,o=v)}),[n,a,o,s,d,f,i,l,h,y,k]}class Sn extends ze{constructor(e){super(),Ke(this,e,Dn,Tn,je,{editable:0,listName:6,names:1,excludedDates:7})}}function Pt(t,e,r){const n=t.slice();return n[16]=e[r],n[17]=e,n[18]=r,n}function jt(t,e,r){const n=t.slice();return n[19]=e[r],n}function zt(t,e,r){const n=t.slice();return n[19]=e[r],n}function Mn(t){let e,r=Q(t[16].date,"MMM dd")+"",n,i,a,l=t[16].sundayNumber+"",c,o,u=Q(t[16].date,"EEEE")+"",d,f,s,h,y,k,v=t[7](t[16].overridden_member?t[16].overridden_member:t[16].member)+"",D,L=t[16].overridden_member?"*":"",b,T,p=t[0]&&Kt();return{c(){e=O("td"),n=q(r),i=R(),a=O("small"),c=q(l),o=R(),d=q(u),f=R(),s=O("td"),h=O("div"),y=O("span"),k=new vr(!1),D=R(),b=q(L),T=R(),p&&p.c(),this.h()},l(m){e=M(m,"TD",{});var w=Y(e);n=B(w,r),i=I(w),a=M(w,"SMALL",{class:!0});var S=Y(a);c=B(S,l),o=I(S),d=B(S,u),S.forEach(E),w.forEach(E),f=I(m),s=M(m,"TD",{});var P=Y(s);h=M(P,"DIV",{class:!0});var K=Y(h);y=M(K,"SPAN",{});var C=Y(y);k=mr(C,!1),D=I(C),b=B(C,L),C.forEach(E),T=I(K),p&&p.l(K),K.forEach(E),P.forEach(E),this.h()},h(){U(a,"class","fw-lighter"),k.a=D,U(h,"class","d-flex justify-content-between")},m(m,w){x(m,e,w),_(e,n),_(e,i),_(e,a),_(a,c),_(a,o),_(a,d),x(m,f,w),x(m,s,w),_(s,h),_(h,y),k.m(v,y),_(y,D),_(y,b),_(h,T),p&&p.m(h,null)},p(m,w){w&4&&r!==(r=Q(m[16].date,"MMM dd")+"")&&Z(n,r),w&4&&l!==(l=m[16].sundayNumber+"")&&Z(c,l),w&4&&u!==(u=Q(m[16].date,"EEEE")+"")&&Z(d,u),w&4&&v!==(v=m[7](m[16].overridden_member?m[16].overridden_member:m[16].member)+"")&&k.p(v),w&4&&L!==(L=m[16].overridden_member?"*":"")&&Z(b,L),m[0]?p||(p=Kt(),p.c(),p.m(h,null)):p&&(p.d(1),p=null)},d(m){m&&(E(e),E(f),E(s)),p&&p.d()}}}function On(t){let e,r=Q(t[16].date,"MMM dd")+"",n,i,a,l=t[16].sundayNumber+"",c,o,u=Q(t[16].date,"EEEE")+"",d,f,s,h=(t[16].event??"")+"",y,k,v,D,L,b="No Sacrament Services";return{c(){e=O("td"),n=q(r),i=R(),a=O("small"),c=q(l),o=R(),d=q(u),f=R(),s=O("td"),y=q(h),k=R(),v=O("br"),D=R(),L=O("small"),L.textContent=b,this.h()},l(T){e=M(T,"TD",{});var p=Y(e);n=B(p,r),i=I(p),a=M(p,"SMALL",{class:!0});var m=Y(a);c=B(m,l),o=I(m),d=B(m,u),m.forEach(E),p.forEach(E),f=I(T),s=M(T,"TD",{});var w=Y(s);y=B(w,h),k=I(w),v=M(w,"BR",{}),D=I(w),L=M(w,"SMALL",{class:!0,"data-svelte-h":!0}),se(L)!=="svelte-2r8039"&&(L.textContent=b),w.forEach(E),this.h()},h(){U(a,"class","fw-lighter"),U(L,"class","fw-lighter")},m(T,p){x(T,e,p),_(e,n),_(e,i),_(e,a),_(a,c),_(a,o),_(a,d),x(T,f,p),x(T,s,p),_(s,y),_(s,k),_(s,v),_(s,D),_(s,L)},p(T,p){p&4&&r!==(r=Q(T[16].date,"MMM dd")+"")&&Z(n,r),p&4&&l!==(l=T[16].sundayNumber+"")&&Z(c,l),p&4&&u!==(u=Q(T[16].date,"EEEE")+"")&&Z(d,u),p&4&&h!==(h=(T[16].event??"")+"")&&Z(y,h)},d(T){T&&(E(e),E(f),E(s))}}}function Kt(t){let e;return{c(){e=O("i"),this.h()},l(r){e=M(r,"I",{class:!0}),Y(e).forEach(E),this.h()},h(){U(e,"class","bi bi-pencil-square")},m(r,n){x(r,e,n)},d(r){r&&E(e)}}}function Bt(t){let e,r,n,i,a="Change assignments:",l,c,o,u,d="Default",f,s,h,y="Default",k,v,D,L="Save",b,T,p,m,w=ae(t[1]),S=[];for(let j=0;j<w.length;j+=1)S[j]=qt(zt(t,w,j));function P(){t[11].call(o,t[18])}let K=ae(t[1]),C=[];for(let j=0;j<K.length;j+=1)C[j]=Ft(jt(t,K,j));function ye(){t[12].call(s,t[18])}function Ge(){return t[13](t[16],t[18])}return{c(){e=O("tr"),r=O("td"),n=O("div"),i=O("div"),i.textContent=a,l=R(),c=O("div"),o=O("select"),u=O("option"),u.textContent=d;for(let j=0;j<S.length;j+=1)S[j].c();f=R(),s=O("select"),h=O("option"),h.textContent=y;for(let j=0;j<C.length;j+=1)C[j].c();k=R(),v=O("div"),D=O("button"),D.textContent=L,b=R(),this.h()},l(j){e=M(j,"TR",{class:!0});var $=Y(e);r=M($,"TD",{colspan:!0});var N=Y(r);n=M(N,"DIV",{class:!0});var re=Y(n);i=M(re,"DIV",{"data-svelte-h":!0}),se(i)!=="svelte-eq75xm"&&(i.textContent=a),l=I(re),c=M(re,"DIV",{class:!0});var Ue=Y(c);o=M(Ue,"SELECT",{class:!0});var Ve=Y(o);u=M(Ve,"OPTION",{"data-svelte-h":!0}),se(u)!=="svelte-zvp3al"&&(u.textContent=d);for(let Ee=0;Ee<S.length;Ee+=1)S[Ee].l(Ve);Ve.forEach(E),f=I(Ue),s=M(Ue,"SELECT",{class:!0});var Xe=Y(s);h=M(Xe,"OPTION",{"data-svelte-h":!0}),se(h)!=="svelte-zvp3al"&&(h.textContent=y);for(let Ee=0;Ee<C.length;Ee+=1)C[Ee].l(Xe);Xe.forEach(E),Ue.forEach(E),k=I(re),v=M(re,"DIV",{class:!0});var ct=Y(v);D=M(ct,"BUTTON",{class:!0,"data-svelte-h":!0}),se(D)!=="svelte-rtvwan"&&(D.textContent=L),ct.forEach(E),re.forEach(E),N.forEach(E),b=I($),$.forEach(E),this.h()},h(){u.__value="",fe(u,u.__value),U(o,"class","form-select form-control-sm"),t[3][`row-${t[18]}`].first===void 0&&Ce(P),h.__value="",fe(h,h.__value),U(s,"class","form-select form-control-sm"),t[3][`row-${t[18]}`].second===void 0&&Ce(ye),U(c,"class","d-flex gap-2"),U(D,"class","btn btn-sm btn-primary"),U(v,"class","d-flex justify-content-end"),U(n,"class","d-flex flex-column gap-2 p-2"),U(r,"colspan","2"),U(e,"class",T=t[4][`row-${t[18]}`]?"table-light":"d-none")},m(j,$){x(j,e,$),_(e,r),_(r,n),_(n,i),_(n,l),_(n,c),_(c,o),_(o,u);for(let N=0;N<S.length;N+=1)S[N]&&S[N].m(o,null);me(o,t[3][`row-${t[18]}`].first,!0),_(c,f),_(c,s),_(s,h);for(let N=0;N<C.length;N+=1)C[N]&&C[N].m(s,null);me(s,t[3][`row-${t[18]}`].second,!0),_(n,k),_(n,v),_(v,D),_(e,b),p||(m=[we(o,"change",P),we(s,"change",ye),we(D,"click",Ge)],p=!0)},p(j,$){if(t=j,$&2){w=ae(t[1]);let N;for(N=0;N<w.length;N+=1){const re=zt(t,w,N);S[N]?S[N].p(re,$):(S[N]=qt(re),S[N].c(),S[N].m(o,null))}for(;N<S.length;N+=1)S[N].d(1);S.length=w.length}if($&10&&me(o,t[3][`row-${t[18]}`].first),$&2){K=ae(t[1]);let N;for(N=0;N<K.length;N+=1){const re=jt(t,K,N);C[N]?C[N].p(re,$):(C[N]=Ft(re),C[N].c(),C[N].m(s,null))}for(;N<C.length;N+=1)C[N].d(1);C.length=K.length}$&10&&me(s,t[3][`row-${t[18]}`].second),$&16&&T!==(T=t[4][`row-${t[18]}`]?"table-light":"d-none")&&U(e,"class",T)},d(j){j&&E(e),Se(S,j),Se(C,j),p=!1,Jt(m)}}}function qt(t){let e,r=t[19]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=Y(e);n=B(l,r),l.forEach(E),this.h()},h(){e.__value=i=t[19],fe(e,e.__value)},m(a,l){x(a,e,l),_(e,n)},p(a,l){l&2&&r!==(r=a[19]+"")&&Z(n,r),l&2&&i!==(i=a[19])&&(e.__value=i,fe(e,e.__value))},d(a){a&&E(e)}}}function Ft(t){let e,r=t[19]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=Y(e);n=B(l,r),l.forEach(E),this.h()},h(){e.__value=i=t[19],fe(e,e.__value)},m(a,l){x(a,e,l),_(e,n)},p(a,l){l&2&&r!==(r=a[19]+"")&&Z(n,r),l&2&&i!==(i=a[19])&&(e.__value=i,fe(e,e.__value))},d(a){a&&E(e)}}}function Zt(t){let e,r,n,i,a,l;function c(s,h){return s[16]?.event?On:Mn}let o=c(t),u=o(t);function d(){return t[10](t[18])}let f=t[0]&&Bt(t);return{c(){e=O("tr"),u.c(),n=R(),f&&f.c(),i=ge(),this.h()},l(s){e=M(s,"TR",{class:!0});var h=Y(e);u.l(h),h.forEach(E),n=I(s),f&&f.l(s),i=ge(),this.h()},h(){U(e,"class",r=t[16].member===null?"table-secondary":"")},m(s,h){x(s,e,h),u.m(e,null),x(s,n,h),f&&f.m(s,h),x(s,i,h),a||(l=we(e,"click",d),a=!0)},p(s,h){t=s,o===(o=c(t))&&u?u.p(t,h):(u.d(1),u=o(t),u&&(u.c(),u.m(e,null))),h&4&&r!==(r=t[16].member===null?"table-secondary":"")&&U(e,"class",r),t[0]?f?f.p(t,h):(f=Bt(t),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(s){s&&(E(e),E(n),E(i)),u.d(),f&&f.d(s),a=!1,l()}}}function Ln(t){let e,r,n,i='<tr><td class="small">Date</td> <td class="small">Assignments</td></tr>',a,l,c=ae(t[2]),o=[];for(let u=0;u<c.length;u+=1)o[u]=Zt(Pt(t,c,u));return{c(){e=O("div"),r=O("table"),n=O("thead"),n.innerHTML=i,a=R(),l=O("tbody");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var d=Y(e);r=M(d,"TABLE",{class:!0});var f=Y(r);n=M(f,"THEAD",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-mvygor"&&(n.innerHTML=i),a=I(f),l=M(f,"TBODY",{});var s=Y(l);for(let h=0;h<o.length;h+=1)o[h].l(s);s.forEach(E),f.forEach(E),d.forEach(E),this.h()},h(){U(n,"class","table-dark"),U(r,"class","table"),U(e,"class","table-responsive")},m(u,d){x(u,e,d),_(e,r),_(r,n),_(r,a),_(r,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,null)},p(u,[d]){if(d&255){c=ae(u[2]);let f;for(f=0;f<c.length;f+=1){const s=Pt(u,c,f);o[f]?o[f].p(s,d):(o[f]=Zt(s),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=c.length}},i:Ye,o:Ye,d(u){u&&E(e),Se(o,u)}}}function An(t,e,r){let{editable:n=!1}=e,{listName:i="Some List"}=e,{names:a=[]}=e,{excludedDates:l=[]}=e,c=[],o=[],u={};const d=async(b=new Date(2025,0,1,0,0,0),T=new Date(2025,11,31,0,0,0))=>{const p={start_date:b,until:T};c=hr(cr.Sundays,p);const m=new Date;m.setHours(0,0,0,0);const w=c.map((P,K)=>{const C=l.find(j=>Re(P,j.date)),ye=a[K%a.length],Ge=a.length>1?a[(K+1)%a.length]:"";return{member:C?null:`${ye}, ${Ge}`,date:P,sundayNumber:dr(P),event:C?C.event:void 0,overridden_member:null}}).filter(P=>P.date>=m),S=await ft(i);return w.map(P=>{const K=S.find(C=>Re(new Date(C.date),P.date));return{...P,overridden_member:K?K.overridden_member:null}})},f=b=>{if(!n)return;const T=`row-${b}`;r(4,h[T]=!h[T],h)},s=async(b,T)=>{const{first:p,second:m}=u[T];let w="";p&&m?w=`${p}, ${m}`:(p||m)&&(w=p||m);const S=w.trim()===""?null:w;b.overridden_member=S,await yr(i,b.date.toISOString(),S),r(4,h[T]=!h[T],h),d().then(P=>{r(2,o=P)})},h={},y=b=>b?b.split(",").join("<br />"):"",k=b=>f(b);function v(b){u[`row-${b}`].first=Ie(this),r(3,u),r(2,o),r(0,n),r(1,a)}function D(b){u[`row-${b}`].second=Ie(this),r(3,u),r(2,o),r(0,n),r(1,a)}const L=(b,T)=>s(b,`row-${T}`);return t.$$set=b=>{"editable"in b&&r(0,n=b.editable),"listName"in b&&r(8,i=b.listName),"names"in b&&r(1,a=b.names),"excludedDates"in b&&r(9,l=b.excludedDates)},t.$$.update=()=>{t.$$.dirty&13&&o.length&&n&&o.forEach((b,T)=>{const p=`row-${T}`;if(!u[p]){const w=(b.overridden_member?b.overridden_member:b.member||"").split(",").map(S=>S.trim());r(3,u[p]={first:w[0]||"",second:w[1]||""},u)}})},d().then(b=>{r(2,o=b)}),[n,a,o,u,h,f,s,y,i,l,k,v,D,L]}class Yn extends ze{constructor(e){super(),Ke(this,e,An,Ln,je,{editable:0,listName:8,names:1,excludedDates:9})}}function Gt(t,e,r){const n=t.slice();return n[7]=e[r],n}function Vt(t){let e,r=t[7]+"",n;return{c(){e=O("option"),n=q(r),this.h()},l(i){e=M(i,"OPTION",{});var a=Y(e);n=B(a,r),a.forEach(E),this.h()},h(){e.__value=t[7],fe(e,e.__value)},m(i,a){x(i,e,a),_(e,n)},p:Ye,d(i){i&&E(e)}}}function Xt(t){let e,r;return e=new Sn({props:{editable:t[1]||t[2],listName:be.SacramentBreadAssignments,names:er,excludedDates:tr}}),{c(){Ze(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&6&&(a.editable=n[1]||n[2]),e.$set(a)},i(n){r||(le(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){Be(e,n)}}}function Qt(t){let e,r;return e=new Yn({props:{editable:t[1]||t[2],listName:be.SacramentPreparationAssignments,names:er,excludedDates:tr}}),{c(){Ze(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&6&&(a.editable=n[1]||n[2]),e.$set(a)},i(n){r||(le(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){Be(e,n)}}}function Nn(t){let e,r,n,i,a,l,c,o=ae(t[5]),u=[];for(let s=0;s<o.length;s+=1)u[s]=Vt(Gt(t,o,s));let d=t[0]===be.SacramentBreadAssignments&&Xt(t),f=t[0]===be.SacramentPreparationAssignments&&Qt(t);return{c(){e=O("select");for(let s=0;s<u.length;s+=1)u[s].c();r=R(),d&&d.c(),n=R(),f&&f.c(),i=ge(),this.h()},l(s){e=M(s,"SELECT",{class:!0});var h=Y(e);for(let y=0;y<u.length;y+=1)u[y].l(h);h.forEach(E),r=I(s),d&&d.l(s),n=I(s),f&&f.l(s),i=ge(),this.h()},h(){U(e,"class","form-select form-control-sm"),t[0]===void 0&&Ce(()=>t[6].call(e))},m(s,h){x(s,e,h);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(e,null);me(e,t[0],!0),x(s,r,h),d&&d.m(s,h),x(s,n,h),f&&f.m(s,h),x(s,i,h),a=!0,l||(c=we(e,"change",t[6]),l=!0)},p(s,[h]){if(h&32){o=ae(s[5]);let y;for(y=0;y<o.length;y+=1){const k=Gt(s,o,y);u[y]?u[y].p(k,h):(u[y]=Vt(k),u[y].c(),u[y].m(e,null))}for(;y<u.length;y+=1)u[y].d(1);u.length=o.length}h&33&&me(e,s[0]),s[0]===be.SacramentBreadAssignments?d?(d.p(s,h),h&1&&le(d,1)):(d=Xt(s),d.c(),le(d,1),d.m(n.parentNode,n)):d&&(dt(),ve(d,1,1,()=>{d=null}),yt()),s[0]===be.SacramentPreparationAssignments?f?(f.p(s,h),h&1&&le(f,1)):(f=Qt(s),f.c(),le(f,1),f.m(i.parentNode,i)):f&&(dt(),ve(f,1,1,()=>{f=null}),yt())},i(s){a||(le(d),le(f),a=!0)},o(s){ve(d),ve(f),a=!1},d(s){s&&(E(e),E(r),E(n),E(i)),Se(u,s),d&&d.d(s),f&&f.d(s),l=!1,c()}}}function Un(t,e,r){let n,i;const{stores:{currentUserIsRootOrAdmin:a,currentUserIsTeachersQuorum:l}}=_r();ht(t,a,d=>r(1,n=d)),ht(t,l,d=>r(2,i=d));let c=be.SacramentBreadAssignments;const o=Object.values(be);function u(){c=Ie(this),r(0,c),r(5,o)}return[c,n,i,a,l,o,u]}class Cn extends ze{constructor(e){super(),Ke(this,e,Un,Nn,je,{})}}function In(t){let e,r;return e=new Cn({}),{c(){Ze(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(le(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){Be(e,n)}}}function Rn(t){let e,r;return e=new br({props:{pageTitle:"Assignments",$$slots:{default:[In]},$$scope:{ctx:t}}}),{c(){Ze(e.$$.fragment)},l(n){Fe(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(le(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){Be(e,n)}}}class qn extends ze{constructor(e){super(),Ke(this,e,null,Rn,je,{})}}export{qn as component,Bn as universal};
