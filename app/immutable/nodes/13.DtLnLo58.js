import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as C,f as se,a as M,ak as ie,m as s,E as m,D as i,s as l,c as p,e as te,F as R,r as v,B as re}from"../chunks/SWWSvUpQ.js";import{i as N}from"../chunks/Bgyk9asy.js";import{e as y,i as h,s as oe}from"../chunks/CU3XCoqN.js";import{c as le,a as c,f as u}from"../chunks/D8ekX_8E.js";import{a as ne}from"../chunks/BHr55d2J.js";import{r as z}from"../chunks/D94nO4CJ.js";import{b as D}from"../chunks/CvxMDV_e.js";import{p as ce}from"../chunks/CdEA5IGF.js";import{e as V}from"../chunks/D2wf5F5N.js";import{g as B}from"../chunks/DlQZC_tq.js";import{p as de}from"../chunks/CkaQ-lk8.js";import{L as fe}from"../chunks/CU9Fjeu0.js";const me=!1,Fe=Object.freeze(Object.defineProperty({__proto__:null,prerender:me},Symbol.toStringTag,{value:"Module"}));var pe=u('<div class="alert alert-info d-flex align-items-center gap-2" role="alert"><i class="bi bi-info-circle-fill"></i> <div>Please check your email and click the verification link before logging in.</div></div>'),ve=u('<a href="/auth/resend-verification" class="alert-link">Resend verification email</a>'),ue=u('<div class="alert alert-danger d-flex align-items-center gap-2" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <div> <!></div></div>'),ge=u('<div class="input-group"><input type="text" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Hide password"><i class="bi bi-eye-slash"></i></button></div>'),be=u('<div class="input-group"><input type="password" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Show password"><i class="bi bi-eye"></i></button></div>'),he=u(`<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-1lcbzi1"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none svelte-1lcbzi1"><img src="/assets/logo.png" alt="logo" class="logo svelte-1lcbzi1"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <!> <!> <form class="d-flex gap-3 flex-column"><input type="text" class="form-control" placeholder="Email or Username" id="identifier" aria-describedby="identifier"/> <!> <div class="text-end"><a href="/auth/forgot-password" class="link-primary small">Forgot password?</a></div> <div class="d-flex justify-content-between"><a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Login</button></div></form> <div class="text-center"><small class="text-muted">Don't have an account? <a href="/auth/signup" class="link-primary">Sign up</a></small></div></div>`);function _e(w,x){C(x,!1);const{actions:{login:k,loginWithEmail:q}}=V();let g=m(!1),d=m(""),n=m(""),L=m(!1),r=m(""),E=m(!1);const H=a=>a.includes("@"),I=async()=>{if(i(g,!0),i(r,""),i(E,!1),!s(d)||!s(n)){i(r,"Email/username and password are required"),i(g,!1);return}if(H(s(d))){const a=await q(s(d),s(n));a.success?(i(r,"Logging you in ..."),setTimeout(()=>{B("/home")},1e3)):(a.code==="EMAIL_NOT_VERIFIED"?(i(r,"Please verify your email first."),i(E,!0)):i(r,a.error||"Login failed, please try again"),setTimeout(()=>{i(g,!1)},1e3))}else await k(s(d),s(n))?(i(r,"Logging you in ..."),setTimeout(()=>{B("/home")},1e3)):(i(r,"Login failed, please try again"),setTimeout(()=>{i(g,!1)},1e3))},j=()=>{i(L,!s(L))},U=a=>{a.key==="Enter"&&I()},W=a=>{a.focus()};N();var A=le();y("keydown",ie,U);var G=se(A);{var J=a=>{fe(a,{get message(){return s(r)}})},K=a=>{var P=he(),F=l(p(P),2);{var Q=e=>{var t=pe();c(e,t)};h(F,e=>{de.url.searchParams.get("verified")==="pending"&&e(Q)})}var O=l(F,2);{var X=e=>{var t=ue(),o=l(p(t),2),f=p(o),b=l(f);{var ee=S=>{var ae=ve();c(S,ae)};h(b,S=>{s(E)&&S(ee)})}v(o),v(t),re(()=>oe(f,`${s(r)??""} `)),c(e,t)};h(O,e=>{s(r)&&e(X)})}var T=l(O,2),_=p(T);z(_),te(()=>D(_,()=>s(d),e=>i(d,e))),ne(_,e=>W?.(e));var Y=l(_,2);{var Z=e=>{var t=ge(),o=p(t);z(o);var f=l(o,2);v(t),D(o,()=>s(n),b=>i(n,b)),y("click",f,j),c(e,t)},$=e=>{var t=be(),o=p(t);z(o);var f=l(o,2);v(t),D(o,()=>s(n),b=>i(n,b)),y("click",f,j),c(e,t)};h(Y,e=>{s(L)?e(Z):e($,!1)})}R(4),v(T),R(2),v(P),y("submit",T,ce(I)),c(a,P)};h(G,a=>{s(g)?a(J):a(K,!1)})}c(w,A),M()}function Oe(w,x){C(x,!1);const{stores:{pageName:k}}=V();k.set("Auth - Login"),N(),_e(w,{}),M()}export{Oe as component,Fe as universal};
