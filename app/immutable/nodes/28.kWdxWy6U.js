import{s as ut,d as i,y as Ce,z as fe,a as te,i as J,b as s,A as ee,p as a,c as r,e as _,w as z,g as T,f as X,x as De,h as o,j as w,t as Y,k as Ee,r as dt,n as Ue,B as mt}from"../chunks/Dvm0vAjZ.js";import{S as ft,i as _t,d as Ve,t as $e,a as Se,m as Me,c as Pe,b as Be}from"../chunks/C0L9un44.js";import{P as pt}from"../chunks/X3quwrks.js";import{e as st,u as bt,d as gt}from"../chunks/BGClpEll.js";import{D as yt}from"../chunks/75J_HFy9.js";import{u as Et}from"../chunks/DyeyWJ6d.js";import{g as Dt,P as kt}from"../chunks/CZoEfXh9.js";import{g as Ct}from"../chunks/C2VKED_S.js";function at(c,e,t){const l=c.slice();return l[27]=e[t],l}function nt(c){let e,t,l,n,f,v;return{c(){e=o("div"),t=Y(c[5]),l=w(),n=o("button"),this.h()},l(D){e=r(D,"DIV",{class:!0,role:!0});var p=_(e);t=X(p,c[5]),l=T(p),n=r(p,"BUTTON",{type:!0,class:!0,"aria-label":!0}),_(n).forEach(i),p.forEach(i),this.h()},h(){a(n,"type","button"),a(n,"class","btn-close"),a(n,"aria-label","Close"),a(e,"class","alert alert-danger alert-dismissible fade show"),a(e,"role","alert")},m(D,p){J(D,e,p),s(e,t),s(e,l),s(e,n),f||(v=ee(n,"click",c[19]),f=!0)},p(D,p){p&32&&te(t,D[5])},d(D){D&&i(e),f=!1,v()}}}function Tt(c){let e,t,l,n='<tr><th scope="col">Name</th> <th scope="col" class="d-none d-md-table-cell">Email</th> <th scope="col" class="d-none d-lg-table-cell">Status</th> <th scope="col" class="d-none d-lg-table-cell">Active</th> <th scope="col" class="d-none d-lg-table-cell">Email Verified</th> <th scope="col" class="d-none d-lg-table-cell">Created</th> <th scope="col" class="d-none d-xl-table-cell">Last Login</th> <th scope="col" class="text-end">Actions</th></tr>',f,v,D=[],p=new Map,N,E=st(c[4]);const U=m=>m[27].id;for(let m=0;m<E.length;m+=1){let b=at(c,E,m),g=U(b);p.set(g,D[m]=rt(g,b))}let u=c[4].length===0&&ot();return{c(){e=o("div"),t=o("table"),l=o("thead"),l.innerHTML=n,f=w(),v=o("tbody");for(let m=0;m<D.length;m+=1)D[m].c();N=w(),u&&u.c(),this.h()},l(m){e=r(m,"DIV",{class:!0});var b=_(e);t=r(b,"TABLE",{class:!0});var g=_(t);l=r(g,"THEAD",{"data-svelte-h":!0}),z(l)!=="svelte-1r5sp6t"&&(l.innerHTML=n),f=T(g),v=r(g,"TBODY",{});var H=_(v);for(let M=0;M<D.length;M+=1)D[M].l(H);H.forEach(i),g.forEach(i),N=T(b),u&&u.l(b),b.forEach(i),this.h()},h(){a(t,"class","table table-hover align-middle"),a(e,"class","table-responsive")},m(m,b){J(m,e,b),s(e,t),s(t,l),s(t,f),s(t,v);for(let g=0;g<D.length;g+=1)D[g]&&D[g].m(v,null);s(e,N),u&&u.m(e,null)},p(m,b){b&18448&&(E=st(m[4]),D=bt(D,b,U,1,m,E,p,v,gt,rt,null,at)),m[4].length===0?u||(u=ot(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(m){m&&i(e);for(let b=0;b<D.length;b+=1)D[b].d();u&&u.d()}}}function wt(c){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=o("div"),e.innerHTML=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-mlx3u2"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-5")},m(l,n){J(l,e,n)},p:Ue,d(l){l&&i(e)}}}function Lt(c){let e,t="Never";return{c(){e=o("span"),e.textContent=t,this.h()},l(l){e=r(l,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1qml2vo"&&(e.textContent=t),this.h()},h(){a(e,"class","text-muted")},m(l,n){J(l,e,n)},p:Ue,d(l){l&&i(e)}}}function It(c){let e=new Date(c[27].last_login).toLocaleDateString()+"",t;return{c(){t=Y(e)},l(l){t=X(l,e)},m(l,n){J(l,t,n)},p(l,n){n&16&&e!==(e=new Date(l[27].last_login).toLocaleDateString()+"")&&te(t,e)},d(l){l&&i(t)}}}function rt(c,e){let t,l,n,f=(e[27].display_name??e[27].email)+"",v,D,p,N=e[27].email+"",E,U,u,m=e[27].email+"",b,g,H,M,B="user",R,F,P,L,j=e[27].is_active?"Active":"Disabled",$,A,G,O,V,Q=e[27].is_active?"Active":"Disabled",h,x,S,k,C,d=e[27].email_confirmed?"Verified":"Unverified",y,q,K,W,oe,le=new Date(e[27].created_at).toLocaleDateString()+"",he,Te,ce,ue,we,de,ae,Z,_e,Le,ie,He="Edit",Ie,ne,Oe='<i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Delete</span>',Ae,ve,Ne,xe;function qe(re,I){return re[27].last_login?It:Lt}let me=qe(e),se=me(e);function ht(){return e[21](e[27])}function vt(){return e[22](e[27])}return{key:c,first:null,c(){t=o("tr"),l=o("td"),n=o("div"),v=Y(f),D=w(),p=o("small"),E=Y(N),U=w(),u=o("td"),b=Y(m),g=w(),H=o("td"),M=o("span"),R=Y(B),F=w(),P=o("div"),L=o("span"),$=Y(j),G=w(),O=o("td"),V=o("span"),h=Y(Q),S=w(),k=o("td"),C=o("span"),y=Y(d),K=w(),W=o("td"),oe=o("small"),he=Y(le),Te=w(),ce=o("td"),ue=o("small"),se.c(),we=w(),de=o("td"),ae=o("div"),Z=o("button"),_e=o("i"),Le=w(),ie=o("span"),ie.textContent=He,Ie=w(),ne=o("button"),ne.innerHTML=Oe,Ae=w(),this.h()},l(re){t=r(re,"TR",{class:!0});var I=_(t);l=r(I,"TD",{});var pe=_(l);n=r(pe,"DIV",{class:!0});var Re=_(n);v=X(Re,f),Re.forEach(i),D=T(pe),p=r(pe,"SMALL",{class:!0});var je=_(p);E=X(je,N),je.forEach(i),pe.forEach(i),U=T(I),u=r(I,"TD",{class:!0});var ze=_(u);b=X(ze,m),ze.forEach(i),g=T(I),H=r(I,"TD",{});var be=_(H);M=r(be,"SPAN",{class:!0});var Fe=_(M);R=X(Fe,B),Fe.forEach(i),F=T(be),P=r(be,"DIV",{class:!0});var Ge=_(P);L=r(Ge,"SPAN",{class:!0});var Qe=_(L);$=X(Qe,j),Qe.forEach(i),Ge.forEach(i),be.forEach(i),G=T(I),O=r(I,"TD",{class:!0});var Xe=_(O);V=r(Xe,"SPAN",{class:!0});var Ye=_(V);h=X(Ye,Q),Ye.forEach(i),Xe.forEach(i),S=T(I),k=r(I,"TD",{class:!0});var Je=_(k);C=r(Je,"SPAN",{class:!0});var Ke=_(C);y=X(Ke,d),Ke.forEach(i),Je.forEach(i),K=T(I),W=r(I,"TD",{class:!0});var We=_(W);oe=r(We,"SMALL",{});var Ze=_(oe);he=X(Ze,le),Ze.forEach(i),We.forEach(i),Te=T(I),ce=r(I,"TD",{class:!0});var et=_(ce);ue=r(et,"SMALL",{});var tt=_(ue);se.l(tt),tt.forEach(i),et.forEach(i),we=T(I),de=r(I,"TD",{class:!0});var lt=_(de);ae=r(lt,"DIV",{class:!0,role:!0});var ge=_(ae);Z=r(ge,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var ye=_(Z);_e=r(ye,"I",{class:!0}),_(_e).forEach(i),Le=T(ye),ie=r(ye,"SPAN",{class:!0,"data-svelte-h":!0}),z(ie)!=="svelte-1davzvv"&&(ie.textContent=He),ye.forEach(i),Ie=T(ge),ne=r(ge,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),z(ne)!=="svelte-fvaa5t"&&(ne.innerHTML=Oe),ge.forEach(i),lt.forEach(i),Ae=T(I),I.forEach(i),this.h()},h(){a(n,"class","fw-semibold"),a(p,"class","d-md-none text-muted d-block"),a(u,"class","d-none d-md-table-cell"),a(M,"class",`badge bg-${$t("user")} text-uppercase`),a(L,"class",A=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(P,"class","d-lg-none mt-1"),a(V,"class",x=`badge ${e[27].is_active?"bg-success":"bg-danger"}`),a(O,"class","d-none d-lg-table-cell"),a(C,"class",q=`badge ${e[27].email_confirmed?"bg-success":"bg-warning"}`),a(k,"class","d-none d-lg-table-cell"),a(W,"class","d-none d-lg-table-cell"),a(ce,"class","d-none d-xl-table-cell"),a(_e,"class","bi bi-pencil"),a(ie,"class","d-none d-sm-inline"),a(Z,"class","btn btn-sm btn-outline-primary"),a(Z,"type","button"),a(Z,"data-bs-toggle","offcanvas"),a(Z,"data-bs-target",`#${ke}`),a(Z,"aria-controls",ke),a(ne,"class","btn btn-sm btn-outline-danger"),a(ne,"type","button"),a(ae,"class","btn-group gap-2"),a(ae,"role","group"),a(de,"class","text-end"),a(t,"class",ve=e[27].is_active?"":"opacity-75"),this.first=t},m(re,I){J(re,t,I),s(t,l),s(l,n),s(n,v),s(l,D),s(l,p),s(p,E),s(t,U),s(t,u),s(u,b),s(t,g),s(t,H),s(H,M),s(M,R),s(H,F),s(H,P),s(P,L),s(L,$),s(t,G),s(t,O),s(O,V),s(V,h),s(t,S),s(t,k),s(k,C),s(C,y),s(t,K),s(t,W),s(W,oe),s(oe,he),s(t,Te),s(t,ce),s(ce,ue),se.m(ue,null),s(t,we),s(t,de),s(de,ae),s(ae,Z),s(Z,_e),s(Z,Le),s(Z,ie),s(ae,Ie),s(ae,ne),s(t,Ae),Ne||(xe=[ee(Z,"click",ht),ee(ne,"click",vt)],Ne=!0)},p(re,I){e=re,I&16&&f!==(f=(e[27].display_name??e[27].email)+"")&&te(v,f),I&16&&N!==(N=e[27].email+"")&&te(E,N),I&16&&m!==(m=e[27].email+"")&&te(b,m),I&16&&j!==(j=e[27].is_active?"Active":"Disabled")&&te($,j),I&16&&A!==(A=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(L,"class",A),I&16&&Q!==(Q=e[27].is_active?"Active":"Disabled")&&te(h,Q),I&16&&x!==(x=`badge ${e[27].is_active?"bg-success":"bg-danger"}`)&&a(V,"class",x),I&16&&d!==(d=e[27].email_confirmed?"Verified":"Unverified")&&te(y,d),I&16&&q!==(q=`badge ${e[27].email_confirmed?"bg-success":"bg-warning"}`)&&a(C,"class",q),I&16&&le!==(le=new Date(e[27].created_at).toLocaleDateString()+"")&&te(he,le),me===(me=qe(e))&&se?se.p(e,I):(se.d(1),se=me(e),se&&(se.c(),se.m(ue,null))),I&16&&ve!==(ve=e[27].is_active?"":"opacity-75")&&a(t,"class",ve)},d(re){re&&i(t),se.d(),Ne=!1,Ce(xe)}}}function ot(c){let e,t="<p>No users found matching your filters.</p>";return{c(){e=o("div"),e.innerHTML=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-i4erte"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-5 text-muted")},m(l,n){J(l,e,n)},d(l){l&&i(e)}}}function At(c){let e,t="Select a user to edit.";return{c(){e=o("p"),e.textContent=t,this.h()},l(l){e=r(l,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-l09ef1"&&(e.textContent=t),this.h()},h(){a(e,"class","text-muted mb-0")},m(l,n){J(l,e,n)},p:Ue,d(l){l&&i(e)}}}function Nt(c){let e,t,l,n="Display Name",f,v,D,p,N,E,U,u,m="Active Account",b,g,H="Disabled accounts cannot login",M,B,R,F="Admin Notes",P,L,j,$,A,G="Cancel",O,V,Q="Save Changes",h,x;return{c(){e=o("form"),t=o("div"),l=o("label"),l.textContent=n,f=w(),v=o("input"),D=w(),p=o("div"),N=o("div"),E=o("input"),U=w(),u=o("label"),u.textContent=m,b=w(),g=o("div"),g.textContent=H,M=w(),B=o("div"),R=o("label"),R.textContent=F,P=w(),L=o("textarea"),j=w(),$=o("div"),A=o("button"),A.textContent=G,O=w(),V=o("button"),V.textContent=Q,this.h()},l(S){e=r(S,"FORM",{class:!0});var k=_(e);t=r(k,"DIV",{});var C=_(t);l=r(C,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),z(l)!=="svelte-1qww9aa"&&(l.textContent=n),f=T(C),v=r(C,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),C.forEach(i),D=T(k),p=r(k,"DIV",{});var d=_(p);N=r(d,"DIV",{class:!0});var y=_(N);E=r(y,"INPUT",{class:!0,type:!0,id:!0}),U=T(y),u=r(y,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),z(u)!=="svelte-gc2a6c"&&(u.textContent=m),y.forEach(i),b=T(d),g=r(d,"DIV",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-ip672x"&&(g.textContent=H),d.forEach(i),M=T(k),B=r(k,"DIV",{});var q=_(B);R=r(q,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),z(R)!=="svelte-17a0zww"&&(R.textContent=F),P=T(q),L=r(q,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0}),_(L).forEach(i),q.forEach(i),j=T(k),$=r(k,"DIV",{class:!0});var K=_($);A=r(K,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(A)!=="svelte-10ov1w5"&&(A.textContent=G),O=T(K),V=r(K,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(V)!=="svelte-bcbxuj"&&(V.textContent=Q),K.forEach(i),k.forEach(i),this.h()},h(){a(l,"class","form-label"),a(l,"for","displayName"),a(v,"type","text"),a(v,"class","form-control"),a(v,"id","displayName"),a(v,"placeholder","Display name (optional)"),a(E,"class","form-check-input"),a(E,"type","checkbox"),a(E,"id","isActive"),a(u,"class","form-check-label"),a(u,"for","isActive"),a(N,"class","form-check form-switch"),a(g,"class","form-text"),a(R,"class","form-label"),a(R,"for","adminNotes"),a(L,"class","form-control"),a(L,"id","adminNotes"),a(L,"rows","3"),a(L,"placeholder","Internal notes about this user..."),a(A,"type","button"),a(A,"class","btn btn-secondary"),a(V,"type","submit"),a(V,"class","btn btn-primary"),a($,"class","d-flex justify-content-end gap-2"),a(e,"class","d-flex flex-column gap-3")},m(S,k){J(S,e,k),s(e,t),s(t,l),s(t,f),s(t,v),fe(v,c[1].display_name),s(e,D),s(e,p),s(p,N),s(N,E),E.checked=c[1].is_active,s(N,U),s(N,u),s(p,b),s(p,g),s(e,M),s(e,B),s(B,R),s(B,P),s(B,L),fe(L,c[1].notes),s(e,j),s(e,$),s($,A),s($,O),s($,V),h||(x=[ee(v,"input",c[23]),ee(E,"change",c[24]),ee(L,"input",c[25]),ee(A,"click",c[12]),ee(e,"submit",mt(c[13]))],h=!0)},p(S,k){k&2&&v.value!==S[1].display_name&&fe(v,S[1].display_name),k&2&&(E.checked=S[1].is_active),k&2&&fe(L,S[1].notes)},d(S){S&&i(e),h=!1,Ce(x)}}}function Ut(c){let e;function t(f,v){return f[1]?Nt:At}let l=t(c),n=l(c);return{c(){n.c(),e=De()},l(f){n.l(f),e=De()},m(f,v){n.m(f,v),J(f,e,v)},p(f,v){l===(l=t(f))&&n?n.p(f,v):(n.d(1),n=l(f),n&&(n.c(),n.m(e.parentNode,e)))},d(f){f&&i(e),n.d(f)}}}function it(c){let e,t,l,n,f,v="Confirm Delete",D,p,N,E,U,u,m,b=(c[2].display_name??c[2].email)+"",g,H,M,B,R="This action cannot be undone.",F,P,L,j="Cancel",$,A,G="Delete User",O,V,Q,h;return{c(){e=o("div"),t=o("div"),l=o("div"),n=o("div"),f=o("h5"),f.textContent=v,D=w(),p=o("button"),N=w(),E=o("div"),U=o("p"),u=Y("Are you sure you want to delete the user "),m=o("strong"),g=Y(b),H=Y("?"),M=w(),B=o("p"),B.textContent=R,F=w(),P=o("div"),L=o("button"),L.textContent=j,$=w(),A=o("button"),A.textContent=G,O=w(),V=o("div"),this.h()},l(x){e=r(x,"DIV",{class:!0,tabindex:!0,role:!0});var S=_(e);t=r(S,"DIV",{class:!0,role:!0});var k=_(t);l=r(k,"DIV",{class:!0});var C=_(l);n=r(C,"DIV",{class:!0});var d=_(n);f=r(d,"H5",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-mdrdai"&&(f.textContent=v),D=T(d),p=r(d,"BUTTON",{type:!0,class:!0,"aria-label":!0}),_(p).forEach(i),d.forEach(i),N=T(C),E=r(C,"DIV",{class:!0});var y=_(E);U=r(y,"P",{});var q=_(U);u=X(q,"Are you sure you want to delete the user "),m=r(q,"STRONG",{});var K=_(m);g=X(K,b),K.forEach(i),H=X(q,"?"),q.forEach(i),M=T(y),B=r(y,"P",{class:!0,"data-svelte-h":!0}),z(B)!=="svelte-1s9uglb"&&(B.textContent=R),y.forEach(i),F=T(C),P=r(C,"DIV",{class:!0});var W=_(P);L=r(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(L)!=="svelte-1rp5z46"&&(L.textContent=j),$=T(W),A=r(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(A)!=="svelte-lwz0rj"&&(A.textContent=G),W.forEach(i),C.forEach(i),k.forEach(i),S.forEach(i),O=T(x),V=r(x,"DIV",{class:!0}),_(V).forEach(i),this.h()},h(){a(f,"class","modal-title"),a(p,"type","button"),a(p,"class","btn-close"),a(p,"aria-label","Close"),a(n,"class","modal-header"),a(B,"class","text-danger mb-0"),a(E,"class","modal-body"),a(L,"type","button"),a(L,"class","btn btn-secondary"),a(A,"type","button"),a(A,"class","btn btn-danger"),a(P,"class","modal-footer"),a(l,"class","modal-content"),a(t,"class","modal-dialog modal-dialog-centered"),a(t,"role","document"),a(e,"class","modal show d-block"),a(e,"tabindex","-1"),a(e,"role","dialog"),a(V,"class","modal-backdrop show")},m(x,S){J(x,e,S),s(e,t),s(t,l),s(l,n),s(n,f),s(n,D),s(n,p),s(l,N),s(l,E),s(E,U),s(U,u),s(U,m),s(m,g),s(U,H),s(E,M),s(E,B),s(l,F),s(l,P),s(P,L),s(P,$),s(P,A),J(x,O,S),J(x,V,S),Q||(h=[ee(p,"click",c[15]),ee(L,"click",c[15]),ee(A,"click",c[16])],Q=!0)},p(x,S){S&4&&b!==(b=(x[2].display_name??x[2].email)+"")&&te(g,b)},d(x){x&&(i(e),i(O),i(V)),Q=!1,Ce(h)}}}function Vt(c){let e,t,l,n="User Management",f,v,D='<i class="bi bi-arrow-clockwise"></i> Refresh',p,N,E,U,u,m,b,g,H,M=c[4].length+"",B,R,F=c[4].length!==1?"s":"",P,L,j,$,A,G,O,V,Q,h=c[5]&&nt(c);function x(d,y){return d[6]?wt:Tt}let S=x(c),k=S(c);$=new yt({props:{title:c[3],id:ke,$$slots:{default:[Ut]},$$scope:{ctx:c}}});let C=c[2]&&it(c);return{c(){e=o("div"),t=o("div"),l=o("h2"),l.textContent=n,f=w(),v=o("button"),v.innerHTML=D,p=w(),h&&h.c(),N=w(),E=o("div"),U=o("div"),u=o("input"),m=w(),b=o("div"),g=o("div"),H=Y("Total: "),B=Y(M),R=Y(" user"),P=Y(F),L=w(),k.c(),j=w(),Be($.$$.fragment),A=w(),C&&C.c(),G=De(),this.h()},l(d){e=r(d,"DIV",{class:!0});var y=_(e);t=r(y,"DIV",{class:!0});var q=_(t);l=r(q,"H2",{"data-svelte-h":!0}),z(l)!=="svelte-1w9k0u8"&&(l.textContent=n),f=T(q),v=r(q,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1t5isil"&&(v.innerHTML=D),q.forEach(i),p=T(y),h&&h.l(y),N=T(y),E=r(y,"DIV",{class:!0});var K=_(E);U=r(K,"DIV",{class:!0});var W=_(U);u=r(W,"INPUT",{type:!0,class:!0,placeholder:!0}),W.forEach(i),m=T(K),b=r(K,"DIV",{class:!0});var oe=_(b);g=r(oe,"DIV",{class:!0});var le=_(g);H=X(le,"Total: "),B=X(le,M),R=X(le," user"),P=X(le,F),le.forEach(i),oe.forEach(i),K.forEach(i),L=T(y),k.l(y),y.forEach(i),j=T(d),Pe($.$$.fragment,d),A=T(d),C&&C.l(d),G=De(),this.h()},h(){a(v,"class","btn btn-primary"),a(t,"class","d-flex justify-content-between align-items-center mb-4"),a(u,"type","text"),a(u,"class","form-control"),a(u,"placeholder","Search by email or name..."),a(U,"class","col-md-9"),a(g,"class","text-muted mt-2"),a(b,"class","col-md-3"),a(E,"class","row mb-3"),a(e,"class","user-management")},m(d,y){J(d,e,y),s(e,t),s(t,l),s(t,f),s(t,v),s(e,p),h&&h.m(e,null),s(e,N),s(e,E),s(E,U),s(U,u),fe(u,c[0]),s(E,m),s(E,b),s(b,g),s(g,H),s(g,B),s(g,R),s(g,P),s(e,L),k.m(e,null),J(d,j,y),Me($,d,y),J(d,A,y),C&&C.m(d,y),J(d,G,y),O=!0,V||(Q=[ee(v,"click",c[18]),ee(u,"input",c[20])],V=!0)},p(d,[y]){d[5]?h?h.p(d,y):(h=nt(d),h.c(),h.m(e,N)):h&&(h.d(1),h=null),y&1&&u.value!==d[0]&&fe(u,d[0]),(!O||y&16)&&M!==(M=d[4].length+"")&&te(B,M),(!O||y&16)&&F!==(F=d[4].length!==1?"s":"")&&te(P,F),S===(S=x(d))&&k?k.p(d,y):(k.d(1),k=S(d),k&&(k.c(),k.m(e,null)));const q={};y&8&&(q.title=d[3]),y&1073741826&&(q.$$scope={dirty:y,ctx:d}),$.$set(q),d[2]?C?C.p(d,y):(C=it(d),C.c(),C.m(G.parentNode,G)):C&&(C.d(1),C=null)},i(d){O||(Se($.$$.fragment,d),O=!0)},o(d){$e($.$$.fragment,d),O=!1},d(d){d&&(i(e),i(j),i(A),i(G)),h&&h.d(),k.d(),Ve($,d),C&&C.d(d),V=!1,Ce(Q)}}}function $t(c){switch(c){case"root":return"danger";case"admin":return"primary";case"primary":case"relief-society":case"elders-quorum":case"teachers-quorum":case"young-women":case"sunday-school":return"info";case"authenticated":return"success";case"un-authenticated":return"secondary";default:return"secondary"}}const ke="edit-user-drawer";function ct(){document.querySelector(`[data-bs-target="#${ke}"]`)?.click()}function St(c,e,t){let l,n,f,v;const{stores:D,actions:p}=Et,{users:N,loading:E,error:U}=D;Ee(c,N,h=>t(17,n=h)),Ee(c,E,h=>t(6,v=h)),Ee(c,U,h=>t(5,f=h));let u=null,m=null,b="",g="Edit User";dt(()=>{p.fetchUsers()});function H(h){t(1,u={...h}),t(3,g=`Edit User: ${h.email}`)}function M(){t(1,u=null),ct()}async function B(){if(!u)return;(await p.updateUser(u.id,{is_active:u.is_active,notes:u.notes,display_name:u.display_name})).success&&(ct(),t(1,u=null))}function R(h){t(2,m=h)}function F(){t(2,m=null)}async function P(){if(!m)return;(await p.deleteUser(m.id)).success&&t(2,m=null)}const L=()=>p.fetchUsers(),j=()=>U.set(null);function $(){b=this.value,t(0,b)}const A=h=>H(h),G=h=>R(h);function O(){u.display_name=this.value,t(1,u)}function V(){u.is_active=this.checked,t(1,u)}function Q(){u.notes=this.value,t(1,u)}return c.$$.update=()=>{c.$$.dirty&131073&&t(4,l=n.filter(h=>b===""||h.email.toLowerCase().includes(b.toLowerCase())||h.display_name?.toLowerCase().includes(b.toLowerCase())))},[b,u,m,g,l,f,v,p,N,E,U,H,M,B,R,F,P,n,L,j,$,A,G,O,V,Q]}class Mt extends ft{constructor(e){super(),_t(this,e,St,Vt,ut,{})}}function Pt(c){let e,t;return e=new Mt({}),{c(){Be(e.$$.fragment)},l(l){Pe(e.$$.fragment,l)},m(l,n){Me(e,l,n),t=!0},i(l){t||(Se(e.$$.fragment,l),t=!0)},o(l){$e(e.$$.fragment,l),t=!1},d(l){Ve(e,l)}}}function Bt(c){let e,t;return e=new pt({props:{pageTitle:"Manage Users",$$slots:{default:[Pt]},$$scope:{ctx:c}}}),{c(){Be(e.$$.fragment)},l(l){Pe(e.$$.fragment,l)},m(l,n){Me(e,l,n),t=!0},p(l,[n]){const f={};n&4&&(f.$$scope={dirty:n,ctx:l}),e.$set(f)},i(l){t||(Se(e.$$.fragment,l),t=!0)},o(l){$e(e.$$.fragment,l),t=!1},d(l){Ve(e,l)}}}function Ht(c,e,t){let l;const{stores:{currentUserHasPermission:n}}=Dt();return Ee(c,n,f=>t(1,l=f)),dt(()=>{l(kt.ManageUsers)||Ct("/home")}),[n]}class Qt extends ft{constructor(e){super(),_t(this,e,Ht,Bt,ut,{})}}export{Qt as component};
