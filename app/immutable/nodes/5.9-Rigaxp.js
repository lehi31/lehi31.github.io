import{S as Ue,i as Be,s as Re,d as h,e as le,t as T,a as C,H as Z,G as x,m as ne,h as I,n as se,l as U,W as R,q as re,p as B,A as ve,B as Je,a0 as Qe,v,f as b,j as k,k as $,x as ue,o as g,C as K,O as _e,r as Y,y as j,z as F,E as Ye}from"../chunks/C5twpB8P.js";import"../chunks/IHki7fMi.js";import{P as Ze}from"../chunks/DFI0woS6.js";import{s as xe,d as et,A as tt,E as lt}from"../chunks/Dni9H5Rw.js";import{e as nt,g as st,s as Ee,f as we,A as rt,b as at,E as ot,d as it}from"../chunks/DQVecoP_.js";import{e as ae,u as be,o as ke}from"../chunks/BVU-SBqd.js";import{g as ct,F as ft}from"../chunks/I3k67RAl.js";import{d as Ie}from"../chunks/DzDB5CMn.js";import{S as ut}from"../chunks/CDcZWSVK.js";import{D as _t,v as dt}from"../chunks/CgPuVtgq.js";import{p as fe,U as ht,s as mt,f as Q}from"../chunks/BNNq8oat.js";function pt(c,e){return nt(c,-e)}const vt=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:vt},Symbol.toStringTag,{value:"Module"})),{Map:ge}=at;function $e(c,e,t){const l=c.slice();return l[39]=e[t][0],l[40]=e[t][1],l}function Me(c,e,t){const l=c.slice();l[43]=e[t];const s=fe(l[43].key);l[44]=s;const r=we(l[44],{weekStartsOn:1});l[45]=r;const a=xe(l[45]);l[46]=a;const i=et(l[45],l[46],{weekStartsOn:1})+1;l[47]=i;const n=l[13](l[43].key);l[48]=n;const o=l[43].days.reduce((f,u)=>f+u.events.length,0);return l[49]=o,l}function Ce(c,e,t){const l=c.slice();return l[52]=e[t],l}function Ne(c,e,t){const l=c.slice();return l[55]=e[t],l}function bt(c){let e,t;return e=new rt({props:{eventItem:c[7],drawerId:c[0],name:"past-event-item-form"}}),{c(){re(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,s){ne(e,l,s),t=!0},p(l,s){const r={};s[0]&128&&(r.eventItem=l[7]),s[0]&1&&(r.drawerId=l[0]),e.$set(r)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function Se(c){let e,t,l,s;const r=[gt,kt],a=[];function i(n,o){return n[15]?0:1}return e=i(c),t=a[e]=r[e](c),{c(){t.c(),l=R()},l(n){t.l(n),l=R()},m(n,o){a[e].m(n,o),I(n,l,o),s=!0},p(n,o){let f=e;e=i(n),e===f?a[e].p(n,o):(Z(),T(a[f],1,1,()=>{a[f]=null}),x(),t=a[e],t?t.p(n,o):(t=a[e]=r[e](n),t.c()),C(t,1),t.m(l.parentNode,l))},i(n){s||(C(t),s=!0)},o(n){T(t),s=!1},d(n){n&&h(l),a[e].d(n)}}}function kt(c){let e,t,l;return t=new ut({}),{c(){e=g("div"),re(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0});var r=$(e);se(t.$$.fragment,r),r.forEach(h),this.h()},h(){b(e,"class","d-flex flex-column gap-4")},m(s,r){I(s,e,r),ne(t,e,null),l=!0},p:K,i(s){l||(C(t.$$.fragment,s),l=!0)},o(s){T(t.$$.fragment,s),l=!1},d(s){s&&h(e),le(t)}}}function gt(c){let e,t,l,s,r="Past Events",a,i,n,o,f,u=c[14]&&c[9]&&Te(c);const d=[Dt,wt],_=[];function m(y,A){return y[2].length?0:1}return n=m(c),o=_[n]=d[n](c),{c(){e=g("div"),t=g("div"),l=g("div"),s=g("span"),s.textContent=r,a=B(),u&&u.c(),i=B(),o.c(),this.h()},l(y){e=k(y,"DIV",{class:!0});var A=$(e);t=k(A,"DIV",{class:!0});var N=$(t);l=k(N,"DIV",{class:!0});var L=$(l);s=k(L,"SPAN",{"data-svelte-h":!0}),ue(s)!=="svelte-15uqv9t"&&(s.textContent=r),a=U(L),u&&u.l(L),L.forEach(h),N.forEach(h),i=U(A),o.l(A),A.forEach(h),this.h()},h(){b(l,"class","d-flex justify-content-between align-items-center gap-3 flex-wrap fw-lighter d-flex justify-content-end"),b(t,"class","card-header"),b(e,"class","card")},m(y,A){I(y,e,A),v(e,t),v(t,l),v(l,s),v(l,a),u&&u.m(l,null),v(e,i),_[n].m(e,null),f=!0},p(y,A){y[14]&&y[9]?u?u.p(y,A):(u=Te(y),u.c(),u.m(l,null)):u&&(u.d(1),u=null);let N=n;n=m(y),n===N?_[n].p(y,A):(Z(),T(_[N],1,1,()=>{_[N]=null}),x(),o=_[n],o?o.p(y,A):(o=_[n]=d[n](y),o.c()),C(o,1),o.m(e,null))},i(y){f||(C(o),f=!0)},o(y){T(o),f=!1},d(y){y&&h(e),u&&u.d(),_[n].d()}}}function Te(c){let e,t,l;function s(i,n){return i[5]?Et:yt}let r=s(c),a=r(c);return{c(){e=g("button"),a.c(),this.h()},l(i){e=k(i,"BUTTON",{class:!0,type:!0});var n=$(e);a.l(n),n.forEach(h),this.h()},h(){b(e,"class","btn btn-sm btn-outline-danger"),b(e,"type","button"),e.disabled=c[5]},m(i,n){I(i,e,n),a.m(e,null),t||(l=_e(e,"click",c[25]),t=!0)},p(i,n){r===(r=s(i))&&a?a.p(i,n):(a.d(1),a=r(i),a&&(a.c(),a.m(e,null))),n[0]&32&&(e.disabled=i[5])},d(i){i&&h(e),a.d(),t=!1,l()}}}function yt(c){let e,t,l;return{c(){e=F("Delete Past Events ("),t=F(c[12]),l=F(")")},l(s){e=j(s,"Delete Past Events ("),t=j(s,c[12]),l=j(s,")")},m(s,r){I(s,e,r),I(s,t,r),I(s,l,r)},p(s,r){r[0]&4096&&Y(t,s[12])},d(s){s&&(h(e),h(t),h(l))}}}function Et(c){let e;return{c(){e=F("Deleting…")},l(t){e=j(t,"Deleting…")},m(t,l){I(t,e,l)},p:K,d(t){t&&h(e)}}}function wt(c){let e,t="No past events available.";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-aczpuf"&&(e.textContent=t),this.h()},h(){b(e,"class","card-body text-muted small")},m(l,s){I(l,e,s)},p:K,i:K,o:K,d(l){l&&h(e)}}}function Dt(c){let e,t=[],l=new ge,s,r,a,i=ae(Object.entries(c[11]));const n=f=>f[39];for(let f=0;f<i.length;f+=1){let u=$e(c,i,f),d=n(u);l.set(d,t[f]=We(d,u))}let o=(c[10]||c[8])&&je(c);return{c(){e=g("ul");for(let f=0;f<t.length;f+=1)t[f].c();s=B(),o&&o.c(),r=R(),this.h()},l(f){e=k(f,"UL",{class:!0});var u=$(e);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(h),s=U(f),o&&o.l(f),r=R(),this.h()},h(){b(e,"class","list-group list-group-flush border-top-0")},m(f,u){I(f,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);I(f,s,u),o&&o.m(f,u),I(f,r,u),a=!0},p(f,u){u[0]&796689&&(i=ae(Object.entries(f[11])),Z(),t=be(t,u,n,1,f,i,l,e,ke,We,null,$e),x()),f[10]||f[8]?o?o.p(f,u):(o=je(f),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(f){if(!a){for(let u=0;u<i.length;u+=1)C(t[u]);a=!0}},o(f){for(let u=0;u<t.length;u+=1)T(t[u]);a=!1},d(f){f&&(h(e),h(s),h(r));for(let u=0;u<t.length;u+=1)t[u].d();o&&o.d(f)}}}function Ae(c){let e,t,l,s;const r=[$t,It],a=[];function i(n,o){return n[43].days.length?0:1}return e=i(c),t=a[e]=r[e](c),{c(){t.c(),l=R()},l(n){t.l(n),l=R()},m(n,o){a[e].m(n,o),I(n,l,o),s=!0},p(n,o){let f=e;e=i(n),e===f?a[e].p(n,o):(Z(),T(a[f],1,1,()=>{a[f]=null}),x(),t=a[e],t?t.p(n,o):(t=a[e]=r[e](n),t.c()),C(t,1),t.m(l.parentNode,l))},i(n){s||(C(t),s=!0)},o(n){T(t),s=!1},d(n){n&&h(l),a[e].d(n)}}}function It(c){let e,t="No events scheduled this week.";return{c(){e=g("li"),e.textContent=t,this.h()},l(l){e=k(l,"LI",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1tq6asq"&&(e.textContent=t),this.h()},h(){b(e,"class","list-group-item py-3 text-muted")},m(l,s){I(l,e,s)},p:K,i:K,o:K,d(l){l&&h(e)}}}function $t(c){let e=[],t=new ge,l,s,r=ae(c[43].days);const a=i=>i[52].key;for(let i=0;i<r.length;i+=1){let n=Ce(c,r,i),o=a(n);t.set(o,e[i]=Le(o,n))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=R()},l(i){for(let n=0;n<e.length;n+=1)e[n].l(i);l=R()},m(i,n){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(i,n);I(i,l,n),s=!0},p(i,n){n[0]&526353&&(r=ae(i[43].days),Z(),e=be(e,n,a,1,i,r,t,l.parentNode,ke,Le,l,Ce),x())},i(i){if(!s){for(let n=0;n<r.length;n+=1)C(e[n]);s=!0}},o(i){for(let n=0;n<e.length;n+=1)T(e[n]);s=!1},d(i){i&&h(l);for(let n=0;n<e.length;n+=1)e[n].d(i)}}}function Pe(c){let e,t,l,s,r,a;function i(){return c[30](c[55])}return{c(){e=g("div"),t=g("button"),l=g("i"),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=$(e);t=k(o,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var f=$(t);l=k(f,"I",{class:!0}),$(l).forEach(h),f.forEach(h),o.forEach(h),this.h()},h(){b(l,"class","bi bi-pencil-square"),b(t,"class","btn btn-sm btn-primary"),b(t,"type","button"),b(t,"data-bs-toggle","offcanvas"),b(t,"data-bs-target",s="#"+c[0]),b(t,"aria-controls",c[0]),b(e,"class","event-actions svelte-b48x49")},m(n,o){I(n,e,o),v(e,t),v(t,l),r||(a=_e(t,"click",i),r=!0)},p(n,o){c=n,o[0]&1&&s!==(s="#"+c[0])&&b(t,"data-bs-target",s),o[0]&1&&b(t,"aria-controls",c[0])},d(n){n&&h(e),r=!1,a()}}}function Oe(c,e){let t,l,s,r,a,i;s=new ot({props:{item:e[55],showDate:!1}});let n=e[4]&&Pe(e);return{key:c,first:null,c(){t=g("div"),l=g("div"),re(s.$$.fragment),r=B(),n&&n.c(),a=B(),this.h()},l(o){t=k(o,"DIV",{class:!0});var f=$(t);l=k(f,"DIV",{class:!0});var u=$(l);se(s.$$.fragment,u),u.forEach(h),r=U(f),n&&n.l(f),a=U(f),f.forEach(h),this.h()},h(){b(l,"class","event-content svelte-b48x49"),b(t,"class","daily-event-row svelte-b48x49"),this.first=t},m(o,f){I(o,t,f),v(t,l),ne(s,l,null),v(t,r),n&&n.m(t,null),v(t,a),i=!0},p(o,f){e=o;const u={};f[0]&2048&&(u.item=e[55]),s.$set(u),e[4]?n?n.p(e,f):(n=Pe(e),n.c(),n.m(t,a)):n&&(n.d(1),n=null)},i(o){i||(C(s.$$.fragment,o),i=!0)},o(o){T(s.$$.fragment,o),i=!1},d(o){o&&h(t),le(s),n&&n.d()}}}function Le(c,e){let t,l,s,r,a=e[52].displayDay+"",i,n,o,f=e[52].displayDate+"",u,d,_,m=[],y=new ge,A,N,L=ae(e[52].events);const X=w=>w[55].id??`${w[55].start_time}-${w[55].meta_data?.recurring_instance_index??0}`;for(let w=0;w<L.length;w+=1){let E=Ne(e,L,w),S=X(E);y.set(S,m[w]=Oe(S,E))}return{key:c,first:null,c(){t=g("li"),l=g("div"),s=g("div"),r=g("strong"),i=F(a),n=B(),o=g("small"),u=F(f),d=B(),_=g("div");for(let w=0;w<m.length;w+=1)m[w].c();A=B(),this.h()},l(w){t=k(w,"LI",{class:!0});var E=$(t);l=k(E,"DIV",{class:!0});var S=$(l);s=k(S,"DIV",{class:!0});var V=$(s);r=k(V,"STRONG",{});var q=$(r);i=j(q,a),q.forEach(h),n=U(V),o=k(V,"SMALL",{class:!0});var ee=$(o);u=j(ee,f),ee.forEach(h),V.forEach(h),d=U(S),_=k(S,"DIV",{class:!0});var oe=$(_);for(let D=0;D<m.length;D+=1)m[D].l(oe);oe.forEach(h),S.forEach(h),A=U(E),E.forEach(h),this.h()},h(){b(o,"class","text-muted"),b(s,"class","event-date-column d-flex flex-column align-items-start text-nowrap svelte-b48x49"),b(_,"class","d-flex flex-column gap-3 flex-grow-1"),b(l,"class","d-flex flex-column flex-md-row gap-3"),b(t,"class","list-group-item py-3"),this.first=t},m(w,E){I(w,t,E),v(t,l),v(l,s),v(s,r),v(r,i),v(s,n),v(s,o),v(o,u),v(l,d),v(l,_);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(_,null);v(t,A),N=!0},p(w,E){e=w,(!N||E[0]&2048)&&a!==(a=e[52].displayDay+"")&&Y(i,a),(!N||E[0]&2048)&&f!==(f=e[52].displayDate+"")&&Y(u,f),E[0]&526353&&(L=ae(e[52].events),Z(),m=be(m,E,X,1,e,L,y,_,ke,Oe,null,Ne),x())},i(w){if(!N){for(let E=0;E<L.length;E+=1)C(m[E]);N=!0}},o(w){for(let E=0;E<m.length;E+=1)T(m[E]);N=!1},d(w){w&&h(t);for(let E=0;E<m.length;E+=1)m[E].d()}}}function Ve(c,e){let t,l,s,r,a,i,n,o,f=e[47]+"",u,d,_=e[49]+"",m,y,A,N,L=e[43].label+"",X,w,E,S,V,q,ee;function oe(){return e[29](e[43])}let D=e[48]&&Ae(e);return{key:c,first:null,c(){t=g("li"),l=g("button"),s=g("span"),r=g("i"),i=B(),n=g("span"),o=F("Week "),u=F(f),d=F(" ("),m=F(_),y=F(")"),A=B(),N=g("span"),X=F(L),E=B(),D&&D.c(),S=R(),this.h()},l(O){t=k(O,"LI",{class:!0});var W=$(t);l=k(W,"BUTTON",{class:!0,title:!0});var z=$(l);s=k(z,"SPAN",{class:!0});var ie=$(s);r=k(ie,"I",{class:!0}),$(r).forEach(h),i=U(ie),n=k(ie,"SPAN",{class:!0});var H=$(n);o=j(H,"Week "),u=j(H,f),d=j(H," ("),m=j(H,_),y=j(H,")"),H.forEach(h),ie.forEach(h),A=U(z),N=k(z,"SPAN",{});var de=$(N);X=j(de,L),de.forEach(h),z.forEach(h),W.forEach(h),E=U(O),D&&D.l(O),S=R(),this.h()},h(){b(r,"class",a="bi "+(e[48]?"bi-chevron-up":"bi-chevron-down")),b(n,"class","text-muted"),b(s,"class","d-flex align-items-center gap-2"),b(l,"class","week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-b48x49"),b(l,"title",w=e[48]?"Click to collapse week":"Click to expand week"),b(t,"class","list-group-item list-group-item-light text-uppercase small fw-lighter p-0"),this.first=t},m(O,W){I(O,t,W),v(t,l),v(l,s),v(s,r),v(s,i),v(s,n),v(n,o),v(n,u),v(n,d),v(n,m),v(n,y),v(l,A),v(l,N),v(N,X),I(O,E,W),D&&D.m(O,W),I(O,S,W),V=!0,q||(ee=_e(l,"click",oe),q=!0)},p(O,W){e=O,(!V||W[0]&10240&&a!==(a="bi "+(e[48]?"bi-chevron-up":"bi-chevron-down")))&&b(r,"class",a),(!V||W[0]&2048)&&f!==(f=e[47]+"")&&Y(u,f),(!V||W[0]&2048)&&_!==(_=e[49]+"")&&Y(m,_),(!V||W[0]&2048)&&L!==(L=e[43].label+"")&&Y(X,L),(!V||W[0]&10240&&w!==(w=e[48]?"Click to collapse week":"Click to expand week"))&&b(l,"title",w),e[48]?D?(D.p(e,W),W[0]&10240&&C(D,1)):(D=Ae(e),D.c(),C(D,1),D.m(S.parentNode,S)):D&&(Z(),T(D,1,1,()=>{D=null}),x())},i(O){V||(C(D),V=!0)},o(O){T(D),V=!1},d(O){O&&(h(t),h(E),h(S)),D&&D.d(O),q=!1,ee()}}}function We(c,e){let t,l=e[40].label+"",s,r,a=[],i=new ge,n,o,f=ae(e[40].weeks);const u=d=>d[43].key;for(let d=0;d<f.length;d+=1){let _=Me(e,f,d),m=u(_);i.set(m,a[d]=Ve(m,_))}return{key:c,first:null,c(){t=g("li"),s=F(l),r=B();for(let d=0;d<a.length;d+=1)a[d].c();n=R(),this.h()},l(d){t=k(d,"LI",{class:!0});var _=$(t);s=j(_,l),_.forEach(h),r=U(d);for(let m=0;m<a.length;m+=1)a[m].l(d);n=R(),this.h()},h(){b(t,"class","list-group-item bg-secondary text-white fw-semibold"),this.first=t},m(d,_){I(d,t,_),v(t,s),I(d,r,_);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(d,_);I(d,n,_),o=!0},p(d,_){e=d,(!o||_[0]&2048)&&l!==(l=e[40].label+"")&&Y(s,l),_[0]&796689&&(f=ae(e[40].weeks),Z(),a=be(a,_,u,1,e,f,i,n.parentNode,ke,Ve,n,Me),x())},i(d){if(!o){for(let _=0;_<f.length;_+=1)C(a[_]);o=!0}},o(d){for(let _=0;_<a.length;_+=1)T(a[_]);o=!1},d(d){d&&(h(t),h(r),h(n));for(let _=0;_<a.length;_+=1)a[_].d(d)}}}function je(c){let e,t,l,s=(c[1]?.length??0)+"",r,a,i=(c[3]?.length??0)+"",n,o;function f(_,m){return _[8]?Ct:Mt}let u=f(c),d=u(c);return{c(){e=g("div"),t=g("small"),l=F("Showing "),r=F(s),a=F(" of "),n=F(i),o=B(),d.c(),this.h()},l(_){e=k(_,"DIV",{class:!0});var m=$(e);t=k(m,"SMALL",{});var y=$(t);l=j(y,"Showing "),r=j(y,s),a=j(y," of "),n=j(y,i),y.forEach(h),o=U(m),d.l(m),m.forEach(h),this.h()},h(){b(e,"class","card-footer d-flex align-items-center justify-content-between")},m(_,m){I(_,e,m),v(e,t),v(t,l),v(t,r),v(t,a),v(t,n),v(e,o),d.m(e,null)},p(_,m){m[0]&2&&s!==(s=(_[1]?.length??0)+"")&&Y(r,s),m[0]&8&&i!==(i=(_[3]?.length??0)+"")&&Y(n,i),u===(u=f(_))&&d?d.p(_,m):(d.d(1),d=u(_),d&&(d.c(),d.m(e,null)))},d(_){_&&h(e),d.d()}}}function Mt(c){let e,t,l="More",s,r,a="All",i,n;return{c(){e=g("div"),t=g("button"),t.textContent=l,s=B(),r=g("button"),r.textContent=a,this.h()},l(o){e=k(o,"DIV",{class:!0});var f=$(e);t=k(f,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1ox9u2o"&&(t.textContent=l),s=U(f),r=k(f,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(r)!=="svelte-1w2ej6j"&&(r.textContent=a),f.forEach(h),this.h()},h(){b(t,"class","btn btn-primary btn-sm"),b(r,"class","btn btn-outline-primary btn-sm"),b(e,"class","d-flex gap-2")},m(o,f){I(o,e,f),v(e,t),v(e,s),v(e,r),i||(n=[_e(t,"click",c[22]),_e(r,"click",c[23])],i=!0)},p:K,d(o){o&&h(e),i=!1,Ye(n)}}}function Ct(c){let e,t="Reset",l,s;return{c(){e=g("button"),e.textContent=t,this.h()},l(r){e=k(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-161htn1"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-outline-secondary btn-sm")},m(r,a){I(r,e,a),l||(s=_e(e,"click",c[24]),l=!0)},p:K,d(r){r&&h(e),l=!1,s()}}}function Nt(c){let e,t,l,s;e=new _t({props:{title:c[6],id:c[0],$$slots:{default:[bt]},$$scope:{ctx:c}}});let r=c[14]&&Se(c);return{c(){re(e.$$.fragment),t=B(),r&&r.c(),l=R()},l(a){se(e.$$.fragment,a),t=U(a),r&&r.l(a),l=R()},m(a,i){ne(e,a,i),I(a,t,i),r&&r.m(a,i),I(a,l,i),s=!0},p(a,i){const n={};i[0]&64&&(n.title=a[6]),i[0]&1&&(n.id=a[0]),i[0]&129|i[1]&134217728&&(n.$$scope={dirty:i,ctx:a}),e.$set(n),a[14]?r?(r.p(a,i),i[0]&16384&&C(r,1)):(r=Se(a),r.c(),C(r,1),r.m(l.parentNode,l)):r&&(Z(),T(r,1,1,()=>{r=null}),x())},i(a){s||(C(e.$$.fragment,a),C(r),s=!0)},o(a){T(e.$$.fragment,a),T(r),s=!1},d(a){a&&(h(t),h(l)),le(e,a),r&&r.d(a)}}}const Fe=4,St=4;function Tt(c,e,t){let l,s,r,a,i,n,o,f,u,d,_,m;const{actions:{featureIsEnabled:y},stores:{currentUser:A}}=ct(),{stores:{ready:N,dbData:L,weeksExpanded:X},actions:{reload:w}}=st();ve(c,N,p=>t(15,m=p)),ve(c,X,p=>t(28,d=p));const E={title:"Event",description:"",location:"",event_type:"calendar_event"};let{formId:S=dt()}=e,V=!1,q=!1,ee="",oe={...E},D=Fe,O=!1;const W=Ee();let z={};function ie(p){return l.includes(p)}function H(p){const P=z[p]??ie(p);t(27,z={...z,[p]:!P})}const de=p=>{t(6,ee="Event Item"),t(7,oe={...p,category:p?.meta_data?.category})},De=Ie(L,p=>{const P=Ee();return(p??[]).filter(M=>M.event_type!=="calendar_event"||!M.start_time?!1:fe(M.start_time)<P)});ve(c,De,p=>t(3,u=p));const ye=Ie(A,p=>p.role===ht.Root);ve(c,ye,p=>t(14,_=p));function Ge(){t(26,D+=St)}function qe(){t(26,D=520),t(8,O=!0)}function ze(){t(26,D=Fe),t(8,O=!1)}const Ke=async()=>{if(!V||q||!Qe(ye)||!o)return;const p=Ee(),P=Q(p,"MMM d, yyyy");if(confirm(`Delete all events that occurred before ${P}?`)){t(5,q=!0);try{const M=await it(p);await w(),M>0?alert(`Deleted ${M} past event${M===1?"":"s"}.`):alert("No past events to delete.")}catch(M){console.error("Failed to delete past events",M),alert("Failed to delete past events. Please try again.")}finally{t(5,q=!1)}}};Je(async()=>{t(4,V=y(ft.EditDBCalendarEvent)),await w()});const Xe=p=>H(p.key),He=p=>de(p);return c.$$set=p=>{"formId"in p&&t(0,S=p.formId)},c.$$.update=()=>{c.$$.dirty[0]&67108872&&t(1,r=(u??[]).filter(p=>{if(!p.start_time)return!1;const P=fe(p.start_time),M=pt(W,D);return P>=M&&P<W})),c.$$.dirty[0]&2&&t(2,i=(()=>{const p=new Map;for(const P of r){if(!P.start_time)continue;const M=fe(P.start_time),G=mt(M,{weekStartsOn:1}),J=we(M,{weekStartsOn:1}),te=Q(G,"yyyy-MM-dd"),me=`${Q(G,"EEE MMM d")} – ${Q(J,"EEE MMM d, yyyy")}`;let ce=p.get(te);ce||(ce={key:te,label:me,days:new Map},p.set(te,ce));const he=Q(M,"yyyy-MM-dd");let pe=ce.days.get(he);pe||(pe={key:he,displayDay:Q(M,"EEE"),displayDate:Q(M,"MMM d"),events:[]},ce.days.set(he,pe)),pe.events.push(P)}return Array.from(p.values()).sort((P,M)=>P.key<M.key?1:-1).map(P=>({key:P.key,label:P.label,days:Array.from(P.days.values()).sort((M,G)=>M.key<G.key?1:-1).map(M=>({...M,events:M.events.slice().sort((G,J)=>{const te=G.is_all_day?0:1,me=J.is_all_day?0:1;if(te!==me)return te-me;const ce=G.start_time?fe(G.start_time).getTime():Number.MAX_SAFE_INTEGER,he=J.start_time?fe(J.start_time).getTime():Number.MAX_SAFE_INTEGER;return ce-he})}))}))})()),c.$$.dirty[0]&4&&(l=(()=>{if(i.length===0)return[];const p=[];return i[0]&&p.push(i[0].key),i[1]&&p.push(i[1].key),p})()),c.$$.dirty[0]&402653184&&t(13,s=p=>d?!0:z[p]!==void 0?z[p]:ie(p)),c.$$.dirty[0]&2&&t(12,a=r.length),c.$$.dirty[0]&4&&t(11,n=i.reduce((p,P)=>{const M=fe(P.key),G=we(M,{weekStartsOn:1}),J=Q(G,"yyyy-MM"),te=Q(G,"MMMM yyyy");return p[J]||(p[J]={label:te,weeks:[]}),p[J].weeks.push(P),p},{})),c.$$.dirty[0]&2&&t(9,o=r.length>0),c.$$.dirty[0]&10&&t(10,f=u.length>r.length)},[S,r,i,u,V,q,ee,oe,O,o,f,n,a,s,_,m,N,X,H,de,De,ye,Ge,qe,ze,Ke,D,z,d,Xe,He]}class At extends Ue{constructor(e){super(),Be(this,e,Tt,Nt,Re,{formId:0},null,[-1,-1])}}function Pt(c){let e,t,l,s,r,a,i;return t=new tt({}),s=new lt({}),a=new At({}),{c(){e=g("div"),re(t.$$.fragment),l=B(),re(s.$$.fragment),r=B(),re(a.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var o=$(e);se(t.$$.fragment,o),l=U(o),se(s.$$.fragment,o),r=U(o),se(a.$$.fragment,o),o.forEach(h),this.h()},h(){b(e,"class","d-flex flex-column gap-4")},m(n,o){I(n,e,o),ne(t,e,null),v(e,l),ne(s,e,null),v(e,r),ne(a,e,null),i=!0},p:K,i(n){i||(C(t.$$.fragment,n),C(s.$$.fragment,n),C(a.$$.fragment,n),i=!0)},o(n){T(t.$$.fragment,n),T(s.$$.fragment,n),T(a.$$.fragment,n),i=!1},d(n){n&&h(e),le(t),le(s),le(a)}}}function Ot(c){let e,t;return e=new Ze({props:{pageTitle:"Announcements & Events",$$slots:{default:[Pt]},$$scope:{ctx:c}}}),{c(){re(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,s){ne(e,l,s),t=!0},p(l,[s]){const r={};s&1&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}class Xt extends Ue{constructor(e){super(),Be(this,e,null,Ot,Re,{})}}export{Xt as component,Kt as universal};
