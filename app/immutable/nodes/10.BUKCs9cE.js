import{s as xe,d as k,i as Q,F as q,M as Ce,v as fe,x as pe,G as H,m as n,S as Me,T as Ne,b as s,e as d,f as P,o as L,h as v,j as f,k as g,l as De,p as He,t as Se}from"../chunks/BYtip6lc.js";import{S as Le,i as Te,t as te,a as se,g as Ve,e as qe,d as Ee,m as Ie,c as Pe,b as Ae}from"../chunks/gPhqvztC.js";import{g as Be}from"../chunks/DB4ffF7h.js";import{g as Ue}from"../chunks/CRPC0YNE.js";import{L as Oe}from"../chunks/g4vszHz4.js";function Re(o){let t,e,a='<img src="/assets/logo.png" alt="logo" class="logo svelte-1n4t3wo"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',r,u,m="Create Account",p,l,i=`Sign up to create an account. An administrator will assign your permissions after
			registration.`,c,y,h,S,A,X="Email address",W,w,K,E,M,V="Display Name (Optional)",le,T,re,O,me="This will be shown instead of your email",ae,N,B,he="Password",ne,Y,R,_e="Minimum 8 characters",ie,j,U,be="Confirm Password",oe,x,ue,F,ve='<a href="/auth/login" class="btn-link btn">Back to login</a> <button type="submit" class="btn btn-primary">Create Account</button>',ce,z,ge=`<small class="text-muted">Already have an account?
				<a href="/auth/login" class="link-primary">Sign in</a></small>`,de,ye,C=o[6]&&ke(o);function we(b,_){return b[5]?ze:Fe}let Z=we(o),I=Z(o);return{c(){t=f("div"),e=f("a"),e.innerHTML=a,r=g(),u=f("h2"),u.textContent=m,p=g(),l=f("p"),l.textContent=i,c=g(),C&&C.c(),y=g(),h=f("form"),S=f("div"),A=f("label"),A.textContent=X,W=g(),w=f("input"),K=g(),E=f("div"),M=f("label"),M.textContent=V,le=g(),T=f("input"),re=g(),O=f("small"),O.textContent=me,ae=g(),N=f("div"),B=f("label"),B.textContent=he,ne=g(),I.c(),Y=g(),R=f("small"),R.textContent=_e,ie=g(),j=f("div"),U=f("label"),U.textContent=be,oe=g(),x=f("input"),ue=g(),F=f("div"),F.innerHTML=ve,ce=g(),z=f("div"),z.innerHTML=ge,this.h()},l(b){t=d(b,"DIV",{class:!0});var _=P(t);e=d(_,"A",{href:!0,class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1inzn7"&&(e.innerHTML=a),r=v(_),u=d(_,"H2",{class:!0,"data-svelte-h":!0}),L(u)!=="svelte-1bkrvel"&&(u.textContent=m),p=v(_),l=d(_,"P",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-19n8q35"&&(l.textContent=i),c=v(_),C&&C.l(_),y=v(_),h=d(_,"FORM",{class:!0});var D=P(h);S=d(D,"DIV",{});var $=P(S);A=d($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(A)!=="svelte-4w1dqu"&&(A.textContent=X),W=v($),w=d($,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),$.forEach(k),K=v(D),E=d(D,"DIV",{});var G=P(E);M=d(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(M)!=="svelte-1npybh"&&(M.textContent=V),le=v(G),T=d(G,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),re=v(G),O=d(G,"SMALL",{class:!0,"data-svelte-h":!0}),L(O)!=="svelte-xtrwy0"&&(O.textContent=me),G.forEach(k),ae=v(D),N=d(D,"DIV",{});var J=P(N);B=d(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(B)!=="svelte-tyrfrg"&&(B.textContent=he),ne=v(J),I.l(J),Y=v(J),R=d(J,"SMALL",{class:!0,"data-svelte-h":!0}),L(R)!=="svelte-txew5q"&&(R.textContent=_e),J.forEach(k),ie=v(D),j=d(D,"DIV",{});var ee=P(j);U=d(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(U)!=="svelte-1f0nq9o"&&(U.textContent=be),oe=v(ee),x=d(ee,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),ee.forEach(k),ue=v(D),F=d(D,"DIV",{class:!0,"data-svelte-h":!0}),L(F)!=="svelte-yxo7lv"&&(F.innerHTML=ve),D.forEach(k),ce=v(_),z=d(_,"DIV",{class:!0,"data-svelte-h":!0}),L(z)!=="svelte-1y70ov0"&&(z.innerHTML=ge),_.forEach(k),this.h()},h(){s(e,"href","/home"),s(e,"class","header-content d-flex align-items-center gap-2 text-decoration-none svelte-1n4t3wo"),s(u,"class","h5"),s(l,"class","text-muted small"),s(A,"for","email"),s(A,"class","form-label"),s(w,"type","email"),s(w,"class","form-control"),s(w,"placeholder","your.email@example.com"),s(w,"id","email"),s(w,"aria-describedby","email"),w.required=!0,s(M,"for","displayName"),s(M,"class","form-label"),s(T,"type","text"),s(T,"class","form-control"),s(T,"placeholder","John Smith"),s(T,"id","displayName"),s(T,"aria-describedby","displayName"),s(O,"class","text-muted"),s(B,"for","password"),s(B,"class","form-label"),s(R,"class","text-muted"),s(U,"for","confirmPassword"),s(U,"class","form-label"),s(x,"type","password"),s(x,"class","form-control"),s(x,"placeholder","Re-enter password"),s(x,"id","confirmPassword"),s(x,"aria-describedby","confirmPassword"),x.required=!0,s(F,"class","d-flex justify-content-between align-items-center"),s(h,"class","d-flex gap-3 flex-column"),s(z,"class","text-center"),s(t,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-1n4t3wo")},m(b,_){Q(b,t,_),n(t,e),n(t,r),n(t,u),n(t,p),n(t,l),n(t,c),C&&C.m(t,null),n(t,y),n(t,h),n(h,S),n(S,A),n(S,W),n(S,w),H(w,o[1]),n(h,K),n(h,E),n(E,M),n(E,le),n(E,T),H(T,o[2]),n(E,re),n(E,O),n(h,ae),n(h,N),n(N,B),n(N,ne),I.m(N,null),n(N,Y),n(N,R),n(h,ie),n(h,j),n(j,U),n(j,oe),n(j,x),H(x,o[4]),n(h,ue),n(h,F),n(t,ce),n(t,z),de||(ye=[q(w,"input",o[12]),Me(o[11].call(null,w)),q(T,"input",o[13]),q(x,"input",o[16]),q(h,"submit",Ne(o[8]))],de=!0)},p(b,_){b[6]?C?C.p(b,_):(C=ke(b),C.c(),C.m(t,y)):C&&(C.d(1),C=null),_&2&&w.value!==b[1]&&H(w,b[1]),_&4&&T.value!==b[2]&&H(T,b[2]),Z===(Z=we(b))&&I?I.p(b,_):(I.d(1),I=Z(b),I&&(I.c(),I.m(N,Y))),_&16&&x.value!==b[4]&&H(x,b[4])},i:fe,o:fe,d(b){b&&k(t),C&&C.d(),I.d(),de=!1,pe(ye)}}}function je(o){let t,e;return t=new Oe({props:{message:o[6]}}),{c(){Ae(t.$$.fragment)},l(a){Pe(t.$$.fragment,a)},m(a,r){Ie(t,a,r),e=!0},p(a,r){const u={};r&64&&(u.message=a[6]),t.$set(u)},i(a){e||(se(t.$$.fragment,a),e=!0)},o(a){te(t.$$.fragment,a),e=!1},d(a){Ee(t,a)}}}function ke(o){let t,e,a,r,u,m,p;return{c(){t=f("div"),e=f("i"),r=g(),u=f("div"),m=Se(o[6]),this.h()},l(l){t=d(l,"DIV",{class:!0,role:!0});var i=P(t);e=d(i,"I",{class:!0}),P(e).forEach(k),r=v(i),u=d(i,"DIV",{});var c=P(u);m=He(c,o[6]),c.forEach(k),i.forEach(k),this.h()},h(){s(e,"class",a="bi "+(o[7]==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill")),s(t,"class",p="alert "+(o[7]==="success"?"alert-success":"alert-danger")+" d-flex align-items-center gap-2"),s(t,"role","alert")},m(l,i){Q(l,t,i),n(t,e),n(t,r),n(t,u),n(u,m)},p(l,i){i&128&&a!==(a="bi "+(l[7]==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"))&&s(e,"class",a),i&64&&De(m,l[6]),i&128&&p!==(p="alert "+(l[7]==="success"?"alert-success":"alert-danger")+" d-flex align-items-center gap-2")&&s(t,"class",p)},d(l){l&&k(t)}}}function Fe(o){let t,e,a,r,u='<i class="bi bi-eye"></i>',m,p;return{c(){t=f("div"),e=f("input"),a=g(),r=f("button"),r.innerHTML=u,this.h()},l(l){t=d(l,"DIV",{class:!0});var i=P(t);e=d(i,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),a=v(i),r=d(i,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),L(r)!=="svelte-1xq8rxc"&&(r.innerHTML=u),i.forEach(k),this.h()},h(){s(e,"type","password"),s(e,"class","form-control"),s(e,"placeholder","At least 8 characters"),s(e,"id","password"),s(e,"aria-describedby","password"),e.required=!0,s(r,"type","button"),s(r,"class","input-group-text"),s(r,"aria-label","Show password"),s(t,"class","input-group")},m(l,i){Q(l,t,i),n(t,e),H(e,o[3]),n(t,a),n(t,r),m||(p=[q(e,"input",o[15]),q(r,"click",o[9])],m=!0)},p(l,i){i&8&&e.value!==l[3]&&H(e,l[3])},d(l){l&&k(t),m=!1,pe(p)}}}function ze(o){let t,e,a,r,u='<i class="bi bi-eye-slash"></i>',m,p;return{c(){t=f("div"),e=f("input"),a=g(),r=f("button"),r.innerHTML=u,this.h()},l(l){t=d(l,"DIV",{class:!0});var i=P(t);e=d(i,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),a=v(i),r=d(i,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),L(r)!=="svelte-1dhefwr"&&(r.innerHTML=u),i.forEach(k),this.h()},h(){s(e,"type","text"),s(e,"class","form-control"),s(e,"placeholder","At least 8 characters"),s(e,"id","password"),s(e,"aria-describedby","password"),e.required=!0,s(r,"type","button"),s(r,"class","input-group-text"),s(r,"aria-label","Hide password"),s(t,"class","input-group")},m(l,i){Q(l,t,i),n(t,e),H(e,o[3]),n(t,a),n(t,r),m||(p=[q(e,"input",o[14]),q(r,"click",o[9])],m=!0)},p(l,i){i&8&&e.value!==l[3]&&H(e,l[3])},d(l){l&&k(t),m=!1,pe(p)}}}function Ge(o){let t,e,a,r,u,m;const p=[je,Re],l=[];function i(c,y){return c[0]?0:1}return t=i(o),e=l[t]=p[t](o),{c(){e.c(),a=Ce()},l(c){e.l(c),a=Ce()},m(c,y){l[t].m(c,y),Q(c,a,y),r=!0,u||(m=q(window,"keydown",o[10]),u=!0)},p(c,[y]){let h=t;t=i(c),t===h?l[t].p(c,y):(Ve(),te(l[h],1,1,()=>{l[h]=null}),qe(),e=l[t],e?e.p(c,y):(e=l[t]=p[t](c),e.c()),se(e,1),e.m(a.parentNode,a))},i(c){r||(se(e),r=!0)},o(c){te(e),r=!1},d(c){c&&k(a),l[t].d(c),u=!1,m()}}}function Je(o,t,e){const{actions:{registerWithEmail:a}}=Be();let r=!1,u="",m="",p="",l="",i=!1,c="",y="error";const h=async()=>{if(e(0,r=!0),e(6,c=""),e(7,y="error"),!u||!p||!l){e(6,c="Email, password, and password confirmation are required"),e(0,r=!1);return}if(p!==l){e(6,c="Passwords do not match"),e(0,r=!1);return}if(p.length<8){e(6,c="Password must be at least 8 characters"),e(0,r=!1);return}const V=await a(u,p,m);V.success?(e(7,y="success"),e(6,c="Account created! Redirecting to login..."),setTimeout(()=>{Ue("/auth/login")},2e3)):(e(7,y="error"),e(6,c=V.error||"Registration failed"),e(0,r=!1))},S=()=>{e(5,i=!i)},A=V=>{V.key==="Enter"&&h()},X=V=>{V.focus()};function W(){u=this.value,e(1,u)}function w(){m=this.value,e(2,m)}function K(){p=this.value,e(3,p)}function E(){p=this.value,e(3,p)}function M(){l=this.value,e(4,l)}return[r,u,m,p,l,i,c,y,h,S,A,X,W,w,K,E,M]}class We extends Le{constructor(t){super(),Te(this,t,Je,Ge,xe,{})}}function Ke(o){let t,e;return t=new We({}),{c(){Ae(t.$$.fragment)},l(a){Pe(t.$$.fragment,a)},m(a,r){Ie(t,a,r),e=!0},p:fe,i(a){e||(se(t.$$.fragment,a),e=!0)},o(a){te(t.$$.fragment,a),e=!1},d(a){Ee(t,a)}}}class et extends Le{constructor(t){super(),Te(this,t,null,Ke,xe,{})}}export{et as component};
