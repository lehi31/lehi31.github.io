import{s as ie,n as ne,d as g,E as le,i as R,b as _,p as L,c as S,e as A,w as Y,g as I,h as k,j as P,z as x,A as ee,L as ae,x as Ge,H as X,y as J,I as re,a as q,f as U,t as j,a4 as $e,a5 as xe,k as we}from"../chunks/D1pHg4Vz.js";import{S as ce,i as fe,t as Z,a as Q,g as De,e as Se,d as ue,m as de,c as _e,b as me}from"../chunks/C8yGzMhi.js";import{P as et}from"../chunks/BDAVlMiF.js";import{e as K}from"../chunks/C2S-Jmaj.js";import{R as ge}from"../chunks/BjZa1uNn.js";import{l as ke,f as Ke,h as F,g as tt}from"../chunks/DpaUoFz9.js";import{w as lt}from"../chunks/DutuwB8Y.js";function oe(n,e){const l=ke(n),t=ke(e);return+l==+t}const nt=!0,At=Object.freeze(Object.defineProperty({__proto__:null,prerender:nt},Symbol.toStringTag,{value:"Module"})),$={SacramentBreadAssignments:"Sacrament Bread Assignments",SacramentPreparationAssignments:"Sacrament Preparation Assignments"},Ye=["Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],Qe=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"}],Je={Sundays:({start_date:n,until:e})=>new ge({freq:ge.WEEKLY,dtstart:n,until:e,byweekday:[ge.SU]})},We=(n,e)=>n(e).all(),Xe=n=>{const e=n.getMonth(),l=n.getFullYear();let t=0;for(let i=1;i<=31;i++){const o=new Date(l,e,i);if(o.getMonth()!==e)break;if(o.getDay()===0&&(t++,o.getDate()===n.getDate())){const u=["st","nd","rd","th"],v=t<=3?u[t-1]:u[3];return`${t}${v}`}}return""},st=lt([]);async function pe(n){const{data:e,error:l}=await Ke.from("assignments").select("*").eq("list_name",n).order("date");if(l)throw l;const t=e||[];return st.set(t),t}async function Ze(n,e,l){const{error:t}=await Ke.from("assignments").upsert([{list_name:n,date:e,overridden_member:l,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(t)throw t;await pe(n)}function Te(n,e,l){const t=n.slice();return t[13]=e[l],t[14]=e,t[15]=l,t}function Ce(n,e,l){const t=n.slice();return t[16]=e[l],t}function at(n){let e,l=F(n[13].date,"MMM dd")+"",t,i,o,u=n[13].sundayNumber+"",v,c,r=F(n[13].date,"EEEE")+"",m,a,s,f,D,y=(n[13].overridden_member?n[13].overridden_member:n[13].member)+"",T,M,C=n[13].overridden_member?"*":"",p,w,h=n[0]&&Ae();return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),f=k("div"),D=k("span"),T=j(y),M=P(),p=j(C),w=P(),h&&h.c(),this.h()},l(d){e=S(d,"TD",{});var b=A(e);t=U(b,l),i=I(b),o=S(b,"SMALL",{class:!0});var E=A(o);v=U(E,u),c=I(E),m=U(E,r),E.forEach(g),b.forEach(g),a=I(d),s=S(d,"TD",{});var B=A(s);f=S(B,"DIV",{class:!0});var H=A(f);D=S(H,"SPAN",{});var O=A(D);T=U(O,y),M=I(O),p=U(O,C),O.forEach(g),w=I(H),h&&h.l(H),H.forEach(g),B.forEach(g),this.h()},h(){L(o,"class","fw-lighter"),L(f,"class","d-flex justify-content-between")},m(d,b){R(d,e,b),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(d,a,b),R(d,s,b),_(s,f),_(f,D),_(D,T),_(D,M),_(D,p),_(f,w),h&&h.m(f,null)},p(d,b){b&4&&l!==(l=F(d[13].date,"MMM dd")+"")&&q(t,l),b&4&&u!==(u=d[13].sundayNumber+"")&&q(v,u),b&4&&r!==(r=F(d[13].date,"EEEE")+"")&&q(m,r),b&4&&y!==(y=(d[13].overridden_member?d[13].overridden_member:d[13].member)+"")&&q(T,y),b&4&&C!==(C=d[13].overridden_member?"*":"")&&q(p,C),d[0]?h||(h=Ae(),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},d(d){d&&(g(e),g(a),g(s)),h&&h.d()}}}function rt(n){let e,l=F(n[13].date,"MMM dd")+"",t,i,o,u=n[13].sundayNumber+"",v,c,r=F(n[13].date,"EEEE")+"",m,a,s,f=(n[13].event??"")+"",D,y,T,M,C,p="No Sacrament Services";return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),D=j(f),y=P(),T=k("br"),M=P(),C=k("small"),C.textContent=p,this.h()},l(w){e=S(w,"TD",{});var h=A(e);t=U(h,l),i=I(h),o=S(h,"SMALL",{class:!0});var d=A(o);v=U(d,u),c=I(d),m=U(d,r),d.forEach(g),h.forEach(g),a=I(w),s=S(w,"TD",{});var b=A(s);D=U(b,f),y=I(b),T=S(b,"BR",{}),M=I(b),C=S(b,"SMALL",{class:!0,"data-svelte-h":!0}),Y(C)!=="svelte-2r8039"&&(C.textContent=p),b.forEach(g),this.h()},h(){L(o,"class","fw-lighter"),L(C,"class","fw-lighter")},m(w,h){R(w,e,h),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(w,a,h),R(w,s,h),_(s,D),_(s,y),_(s,T),_(s,M),_(s,C)},p(w,h){h&4&&l!==(l=F(w[13].date,"MMM dd")+"")&&q(t,l),h&4&&u!==(u=w[13].sundayNumber+"")&&q(v,u),h&4&&r!==(r=F(w[13].date,"EEEE")+"")&&q(m,r),h&4&&f!==(f=(w[13].event??"")+"")&&q(D,f)},d(w){w&&(g(e),g(a),g(s))}}}function Ae(n){let e;return{c(){e=k("i"),this.h()},l(l){e=S(l,"I",{class:!0}),A(e).forEach(g),this.h()},h(){L(e,"class","bi bi-pencil-square")},m(l,t){R(l,e,t)},d(l){l&&g(e)}}}function Me(n){let e,l,t,i,o="Change assignment to:",u,v,c,r="Default",m,a,s,f="Save",D,y,T,M,C=K(n[1]),p=[];for(let d=0;d<C.length;d+=1)p[d]=Le(Ce(n,C,d));function w(){n[9].call(v,n[14],n[15])}function h(){return n[10](n[13],n[15])}return{c(){e=k("tr"),l=k("td"),t=k("div"),i=k("div"),i.textContent=o,u=P(),v=k("select"),c=k("option"),c.textContent=r;for(let d=0;d<p.length;d+=1)p[d].c();m=P(),a=k("div"),s=k("button"),s.textContent=f,D=P(),this.h()},l(d){e=S(d,"TR",{class:!0});var b=A(e);l=S(b,"TD",{colspan:!0});var E=A(l);t=S(E,"DIV",{class:!0});var B=A(t);i=S(B,"DIV",{"data-svelte-h":!0}),Y(i)!=="svelte-1t5xiq"&&(i.textContent=o),u=I(B),v=S(B,"SELECT",{class:!0});var H=A(v);c=S(H,"OPTION",{"data-svelte-h":!0}),Y(c)!=="svelte-zvp3al"&&(c.textContent=r);for(let W=0;W<p.length;W+=1)p[W].l(H);H.forEach(g),m=I(B),a=S(B,"DIV",{class:!0});var O=A(a);s=S(O,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-rtvwan"&&(s.textContent=f),O.forEach(g),B.forEach(g),E.forEach(g),D=I(b),b.forEach(g),this.h()},h(){c.__value="",J(c,c.__value),L(v,"class","form-select form-control-sm"),n[13].overridden_member===void 0&&re(w),L(s,"class","btn btn-sm btn-primary"),L(a,"class","d-flex justify-content-end"),L(t,"class","d-flex flex-column gap-2 p-2"),L(l,"colspan","2"),L(e,"class",y=n[3][`row-${n[15]}`]?"table-light":"d-none")},m(d,b){R(d,e,b),_(e,l),_(l,t),_(t,i),_(t,u),_(t,v),_(v,c);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(v,null);X(v,n[13].overridden_member,!0),_(t,m),_(t,a),_(a,s),_(e,D),T||(M=[x(v,"change",w),x(s,"click",h)],T=!0)},p(d,b){if(n=d,b&6){C=K(n[1]);let E;for(E=0;E<C.length;E+=1){const B=Ce(n,C,E);p[E]?p[E].p(B,b):(p[E]=Le(B),p[E].c(),p[E].m(v,null))}for(;E<p.length;E+=1)p[E].d(1);p.length=C.length}b&6&&X(v,n[13].overridden_member),b&8&&y!==(y=n[3][`row-${n[15]}`]?"table-light":"d-none")&&L(e,"class",y)},d(d){d&&g(e),le(p,d),T=!1,Ge(M)}}}function Ne(n){let e,l=n[16]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[16],J(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[16]+"")&&q(t,l),u&2&&i!==(i=o[16])&&(e.__value=i,J(e,e.__value))},d(o){o&&g(e)}}}function Le(n){let e,l=n[16]!==n[13].member&&Ne(n);return{c(){l&&l.c(),e=ee()},l(t){l&&l.l(t),e=ee()},m(t,i){l&&l.m(t,i),R(t,e,i)},p(t,i){t[16]!==t[13].member?l?l.p(t,i):(l=Ne(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&g(e),l&&l.d(t)}}}function Oe(n){let e,l,t,i,o,u;function v(s,f){return s[13]?.event?rt:at}let c=v(n),r=c(n);function m(){return n[8](n[15])}let a=n[0]&&Me(n);return{c(){e=k("tr"),r.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"TR",{class:!0});var f=A(e);r.l(f),f.forEach(g),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){L(e,"class",l=n[13].member===null?"table-secondary":"")},m(s,f){R(s,e,f),r.m(e,null),R(s,t,f),a&&a.m(s,f),R(s,i,f),o||(u=x(e,"click",m),o=!0)},p(s,f){n=s,c===(c=v(n))&&r?r.p(n,f):(r.d(1),r=c(n),r&&(r.c(),r.m(e,null))),f&6&&l!==(l=n[13].member===null?"table-secondary":"")&&L(e,"class",l),n[0]?a?a.p(n,f):(a=Me(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(s){s&&(g(e),g(t),g(i)),r.d(),a&&a.d(s),o=!1,u()}}}function ot(n){let e,l,t,i='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',o,u,v=K(n[2]),c=[];for(let r=0;r<v.length;r+=1)c[r]=Oe(Te(n,v,r));return{c(){e=k("div"),l=k("table"),t=k("thead"),t.innerHTML=i,o=P(),u=k("tbody");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var m=A(e);l=S(m,"TABLE",{class:!0});var a=A(l);t=S(a,"THEAD",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1c8l31s"&&(t.innerHTML=i),o=I(a),u=S(a,"TBODY",{});var s=A(u);for(let f=0;f<c.length;f+=1)c[f].l(s);s.forEach(g),a.forEach(g),m.forEach(g),this.h()},h(){L(t,"class","table-dark"),L(l,"class","table"),L(e,"class","table-responsive")},m(r,m){R(r,e,m),_(e,l),_(l,t),_(l,o),_(l,u);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(u,null)},p(r,[m]){if(m&63){v=K(r[2]);let a;for(a=0;a<v.length;a+=1){const s=Te(r,v,a);c[a]?c[a].p(s,m):(c[a]=Oe(s),c[a].c(),c[a].m(u,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=v.length}},i:ne,o:ne,d(r){r&&g(e),le(c,r)}}}function it(n,e,l){let{editable:t=!1}=e,{listName:i="Some List"}=e,{names:o=[]}=e,{excludedDates:u=[]}=e,v=[],c=[];const r=async(T=new Date(2025,0,1,0,0,0),M=new Date(2025,11,31,0,0,0))=>{const C={start_date:T,until:M};v=We(Je.Sundays,C);const p=new Date;p.setHours(0,0,0,0);const w=v.map((d,b)=>{const E=u.find(B=>oe(d,B.date));return{member:E?null:o[b%o.length],date:d,sundayNumber:Xe(d),event:E?E.event:void 0,overridden_member:null}}).filter(d=>d.date>=p),h=await pe(i);return w.map(d=>{const b=h.find(E=>oe(new Date(E.date),d.date));return{...d,overridden_member:b?b.overridden_member:null}})},m=T=>{t&&l(3,s[`row-${T}`]=!s[`row-${T}`],s)},a=async(T,M)=>{const C=T.overridden_member||null;await Ze(i,T.date.toISOString(),C),l(3,s[M]=!s[M],s),r().then(p=>{l(2,c=p)})},s={},f=T=>m(T);function D(T,M){T[M].overridden_member=ae(this),l(2,c),l(1,o)}const y=(T,M)=>a(T,`row-${M}`);return n.$$set=T=>{"editable"in T&&l(0,t=T.editable),"listName"in T&&l(6,i=T.listName),"names"in T&&l(1,o=T.names),"excludedDates"in T&&l(7,u=T.excludedDates)},r().then(T=>{l(2,c=T)}),[t,o,c,s,m,a,i,u,f,D,y]}class ct extends ce{constructor(e){super(),fe(this,e,it,ot,ie,{editable:0,listName:6,names:1,excludedDates:7})}}function ye(n,e,l){const t=n.slice();return t[16]=e[l],t[17]=e,t[18]=l,t}function Ie(n,e,l){const t=n.slice();return t[19]=e[l],t}function Pe(n,e,l){const t=n.slice();return t[19]=e[l],t}function ft(n){let e,l=F(n[16].date,"MMM dd")+"",t,i,o,u=n[16].sundayNumber+"",v,c,r=F(n[16].date,"EEEE")+"",m,a,s,f,D,y,T=n[7](n[16].overridden_member?n[16].overridden_member:n[16].member)+"",M,C=n[16].overridden_member?"*":"",p,w,h=n[0]&&Re();return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),f=k("div"),D=k("span"),y=new xe(!1),M=P(),p=j(C),w=P(),h&&h.c(),this.h()},l(d){e=S(d,"TD",{});var b=A(e);t=U(b,l),i=I(b),o=S(b,"SMALL",{class:!0});var E=A(o);v=U(E,u),c=I(E),m=U(E,r),E.forEach(g),b.forEach(g),a=I(d),s=S(d,"TD",{});var B=A(s);f=S(B,"DIV",{class:!0});var H=A(f);D=S(H,"SPAN",{});var O=A(D);y=$e(O,!1),M=I(O),p=U(O,C),O.forEach(g),w=I(H),h&&h.l(H),H.forEach(g),B.forEach(g),this.h()},h(){L(o,"class","fw-lighter"),y.a=M,L(f,"class","d-flex justify-content-between")},m(d,b){R(d,e,b),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(d,a,b),R(d,s,b),_(s,f),_(f,D),y.m(T,D),_(D,M),_(D,p),_(f,w),h&&h.m(f,null)},p(d,b){b&4&&l!==(l=F(d[16].date,"MMM dd")+"")&&q(t,l),b&4&&u!==(u=d[16].sundayNumber+"")&&q(v,u),b&4&&r!==(r=F(d[16].date,"EEEE")+"")&&q(m,r),b&4&&T!==(T=d[7](d[16].overridden_member?d[16].overridden_member:d[16].member)+"")&&y.p(T),b&4&&C!==(C=d[16].overridden_member?"*":"")&&q(p,C),d[0]?h||(h=Re(),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},d(d){d&&(g(e),g(a),g(s)),h&&h.d()}}}function ut(n){let e,l=F(n[16].date,"MMM dd")+"",t,i,o,u=n[16].sundayNumber+"",v,c,r=F(n[16].date,"EEEE")+"",m,a,s,f=(n[16].event??"")+"",D,y,T,M,C,p="No Sacrament Services";return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),D=j(f),y=P(),T=k("br"),M=P(),C=k("small"),C.textContent=p,this.h()},l(w){e=S(w,"TD",{});var h=A(e);t=U(h,l),i=I(h),o=S(h,"SMALL",{class:!0});var d=A(o);v=U(d,u),c=I(d),m=U(d,r),d.forEach(g),h.forEach(g),a=I(w),s=S(w,"TD",{});var b=A(s);D=U(b,f),y=I(b),T=S(b,"BR",{}),M=I(b),C=S(b,"SMALL",{class:!0,"data-svelte-h":!0}),Y(C)!=="svelte-2r8039"&&(C.textContent=p),b.forEach(g),this.h()},h(){L(o,"class","fw-lighter"),L(C,"class","fw-lighter")},m(w,h){R(w,e,h),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(w,a,h),R(w,s,h),_(s,D),_(s,y),_(s,T),_(s,M),_(s,C)},p(w,h){h&4&&l!==(l=F(w[16].date,"MMM dd")+"")&&q(t,l),h&4&&u!==(u=w[16].sundayNumber+"")&&q(v,u),h&4&&r!==(r=F(w[16].date,"EEEE")+"")&&q(m,r),h&4&&f!==(f=(w[16].event??"")+"")&&q(D,f)},d(w){w&&(g(e),g(a),g(s))}}}function Re(n){let e;return{c(){e=k("i"),this.h()},l(l){e=S(l,"I",{class:!0}),A(e).forEach(g),this.h()},h(){L(e,"class","bi bi-pencil-square")},m(l,t){R(l,e,t)},d(l){l&&g(e)}}}function Be(n){let e,l,t,i,o="Change assignments:",u,v,c,r,m="Default",a,s,f,D="Default",y,T,M,C="Save",p,w,h,d,b=K(n[1]),E=[];for(let V=0;V<b.length;V+=1)E[V]=Ve(Pe(n,b,V));function B(){n[11].call(c,n[18])}let H=K(n[1]),O=[];for(let V=0;V<H.length;V+=1)O[V]=He(Ie(n,H,V));function W(){n[12].call(s,n[18])}function he(){return n[13](n[16],n[18])}return{c(){e=k("tr"),l=k("td"),t=k("div"),i=k("div"),i.textContent=o,u=P(),v=k("div"),c=k("select"),r=k("option"),r.textContent=m;for(let V=0;V<E.length;V+=1)E[V].c();a=P(),s=k("select"),f=k("option"),f.textContent=D;for(let V=0;V<O.length;V+=1)O[V].c();y=P(),T=k("div"),M=k("button"),M.textContent=C,p=P(),this.h()},l(V){e=S(V,"TR",{class:!0});var z=A(e);l=S(z,"TD",{colspan:!0});var N=A(l);t=S(N,"DIV",{class:!0});var G=A(t);i=S(G,"DIV",{"data-svelte-h":!0}),Y(i)!=="svelte-eq75xm"&&(i.textContent=o),u=I(G),v=S(G,"DIV",{class:!0});var se=A(v);c=S(se,"SELECT",{class:!0});var ve=A(c);r=S(ve,"OPTION",{"data-svelte-h":!0}),Y(r)!=="svelte-zvp3al"&&(r.textContent=m);for(let te=0;te<E.length;te+=1)E[te].l(ve);ve.forEach(g),a=I(se),s=S(se,"SELECT",{class:!0});var be=A(s);f=S(be,"OPTION",{"data-svelte-h":!0}),Y(f)!=="svelte-zvp3al"&&(f.textContent=D);for(let te=0;te<O.length;te+=1)O[te].l(be);be.forEach(g),se.forEach(g),y=I(G),T=S(G,"DIV",{class:!0});var Ee=A(T);M=S(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(M)!=="svelte-rtvwan"&&(M.textContent=C),Ee.forEach(g),G.forEach(g),N.forEach(g),p=I(z),z.forEach(g),this.h()},h(){r.__value="",J(r,r.__value),L(c,"class","form-select form-control-sm"),n[3][`row-${n[18]}`].first===void 0&&re(B),f.__value="",J(f,f.__value),L(s,"class","form-select form-control-sm"),n[3][`row-${n[18]}`].second===void 0&&re(W),L(v,"class","d-flex gap-2"),L(M,"class","btn btn-sm btn-primary"),L(T,"class","d-flex justify-content-end"),L(t,"class","d-flex flex-column gap-2 p-2"),L(l,"colspan","2"),L(e,"class",w=n[4][`row-${n[18]}`]?"table-light":"d-none")},m(V,z){R(V,e,z),_(e,l),_(l,t),_(t,i),_(t,u),_(t,v),_(v,c),_(c,r);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(c,null);X(c,n[3][`row-${n[18]}`].first,!0),_(v,a),_(v,s),_(s,f);for(let N=0;N<O.length;N+=1)O[N]&&O[N].m(s,null);X(s,n[3][`row-${n[18]}`].second,!0),_(t,y),_(t,T),_(T,M),_(e,p),h||(d=[x(c,"change",B),x(s,"change",W),x(M,"click",he)],h=!0)},p(V,z){if(n=V,z&2){b=K(n[1]);let N;for(N=0;N<b.length;N+=1){const G=Pe(n,b,N);E[N]?E[N].p(G,z):(E[N]=Ve(G),E[N].c(),E[N].m(c,null))}for(;N<E.length;N+=1)E[N].d(1);E.length=b.length}if(z&10&&X(c,n[3][`row-${n[18]}`].first),z&2){H=K(n[1]);let N;for(N=0;N<H.length;N+=1){const G=Ie(n,H,N);O[N]?O[N].p(G,z):(O[N]=He(G),O[N].c(),O[N].m(s,null))}for(;N<O.length;N+=1)O[N].d(1);O.length=H.length}z&10&&X(s,n[3][`row-${n[18]}`].second),z&16&&w!==(w=n[4][`row-${n[18]}`]?"table-light":"d-none")&&L(e,"class",w)},d(V){V&&g(e),le(E,V),le(O,V),h=!1,Ge(d)}}}function Ve(n){let e,l=n[19]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[19],J(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[19]+"")&&q(t,l),u&2&&i!==(i=o[19])&&(e.__value=i,J(e,e.__value))},d(o){o&&g(e)}}}function He(n){let e,l=n[19]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[19],J(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[19]+"")&&q(t,l),u&2&&i!==(i=o[19])&&(e.__value=i,J(e,e.__value))},d(o){o&&g(e)}}}function Ue(n){let e,l,t,i,o,u;function v(s,f){return s[16]?.event?ut:ft}let c=v(n),r=c(n);function m(){return n[10](n[18])}let a=n[0]&&Be(n);return{c(){e=k("tr"),r.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"TR",{class:!0});var f=A(e);r.l(f),f.forEach(g),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){L(e,"class",l=n[16].member===null?"table-secondary":"")},m(s,f){R(s,e,f),r.m(e,null),R(s,t,f),a&&a.m(s,f),R(s,i,f),o||(u=x(e,"click",m),o=!0)},p(s,f){n=s,c===(c=v(n))&&r?r.p(n,f):(r.d(1),r=c(n),r&&(r.c(),r.m(e,null))),f&4&&l!==(l=n[16].member===null?"table-secondary":"")&&L(e,"class",l),n[0]?a?a.p(n,f):(a=Be(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(s){s&&(g(e),g(t),g(i)),r.d(),a&&a.d(s),o=!1,u()}}}function dt(n){let e,l,t,i='<tr><td class="small">Date</td> <td class="small">Assignments</td></tr>',o,u,v=K(n[2]),c=[];for(let r=0;r<v.length;r+=1)c[r]=Ue(ye(n,v,r));return{c(){e=k("div"),l=k("table"),t=k("thead"),t.innerHTML=i,o=P(),u=k("tbody");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var m=A(e);l=S(m,"TABLE",{class:!0});var a=A(l);t=S(a,"THEAD",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-mvygor"&&(t.innerHTML=i),o=I(a),u=S(a,"TBODY",{});var s=A(u);for(let f=0;f<c.length;f+=1)c[f].l(s);s.forEach(g),a.forEach(g),m.forEach(g),this.h()},h(){L(t,"class","table-dark"),L(l,"class","table"),L(e,"class","table-responsive")},m(r,m){R(r,e,m),_(e,l),_(l,t),_(l,o),_(l,u);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(u,null)},p(r,[m]){if(m&255){v=K(r[2]);let a;for(a=0;a<v.length;a+=1){const s=ye(r,v,a);c[a]?c[a].p(s,m):(c[a]=Ue(s),c[a].c(),c[a].m(u,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=v.length}},i:ne,o:ne,d(r){r&&g(e),le(c,r)}}}function _t(n,e,l){let{editable:t=!1}=e,{listName:i="Some List"}=e,{names:o=[]}=e,{excludedDates:u=[]}=e,v=[],c=[],r={};const m=async(p=new Date(2025,0,1,0,0,0),w=new Date(2025,11,31,0,0,0))=>{const h={start_date:p,until:w};v=We(Je.Sundays,h);const d=new Date;d.setHours(0,0,0,0);const b=v.map((B,H)=>{const O=u.find(V=>oe(B,V.date)),W=o[H%o.length],he=o.length>1?o[(H+1)%o.length]:"";return{member:O?null:`${W}, ${he}`,date:B,sundayNumber:Xe(B),event:O?O.event:void 0,overridden_member:null}}).filter(B=>B.date>=d),E=await pe(i);return b.map(B=>{const H=E.find(O=>oe(new Date(O.date),B.date));return{...B,overridden_member:H?H.overridden_member:null}})},a=p=>{if(!t)return;const w=`row-${p}`;l(4,f[w]=!f[w],f)},s=async(p,w)=>{const{first:h,second:d}=r[w];let b="";h&&d?b=`${h}, ${d}`:(h||d)&&(b=h||d);const E=b.trim()===""?null:b;p.overridden_member=E,await Ze(i,p.date.toISOString(),E),l(4,f[w]=!f[w],f),m().then(B=>{l(2,c=B)})},f={},D=p=>p?p.split(",").join("<br />"):"",y=p=>a(p);function T(p){r[`row-${p}`].first=ae(this),l(3,r),l(2,c),l(0,t),l(1,o)}function M(p){r[`row-${p}`].second=ae(this),l(3,r),l(2,c),l(0,t),l(1,o)}const C=(p,w)=>s(p,`row-${w}`);return n.$$set=p=>{"editable"in p&&l(0,t=p.editable),"listName"in p&&l(8,i=p.listName),"names"in p&&l(1,o=p.names),"excludedDates"in p&&l(9,u=p.excludedDates)},n.$$.update=()=>{n.$$.dirty&13&&c.length&&t&&c.forEach((p,w)=>{const h=`row-${w}`;if(!r[h]){const b=(p.overridden_member?p.overridden_member:p.member||"").split(",").map(E=>E.trim());l(3,r[h]={first:b[0]||"",second:b[1]||""},r)}})},m().then(p=>{l(2,c=p)}),[t,o,c,r,f,a,s,D,i,u,y,T,M,C]}class mt extends ce{constructor(e){super(),fe(this,e,_t,dt,ie,{editable:0,listName:8,names:1,excludedDates:9})}}function je(n,e,l){const t=n.slice();return t[7]=e[l],t}function qe(n){let e,l=n[7]+"",t;return{c(){e=k("option"),t=j(l),this.h()},l(i){e=S(i,"OPTION",{});var o=A(e);t=U(o,l),o.forEach(g),this.h()},h(){e.__value=n[7],J(e,e.__value)},m(i,o){R(i,e,o),_(e,t)},p:ne,d(i){i&&g(e)}}}function Fe(n){let e,l;return e=new ct({props:{editable:n[1]||n[2],listName:$.SacramentBreadAssignments,names:Ye,excludedDates:Qe}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,i){const o={};i&6&&(o.editable=t[1]||t[2]),e.$set(o)},i(t){l||(Q(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ze(n){let e,l;return e=new mt({props:{editable:n[1]||n[2],listName:$.SacramentPreparationAssignments,names:Ye,excludedDates:Qe}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,i){const o={};i&6&&(o.editable=t[1]||t[2]),e.$set(o)},i(t){l||(Q(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ht(n){let e,l,t,i,o,u,v,c=K(n[5]),r=[];for(let s=0;s<c.length;s+=1)r[s]=qe(je(n,c,s));let m=n[0]===$.SacramentBreadAssignments&&Fe(n),a=n[0]===$.SacramentPreparationAssignments&&ze(n);return{c(){e=k("select");for(let s=0;s<r.length;s+=1)r[s].c();l=P(),m&&m.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"SELECT",{class:!0});var f=A(e);for(let D=0;D<r.length;D+=1)r[D].l(f);f.forEach(g),l=I(s),m&&m.l(s),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){L(e,"class","form-select form-control-sm"),n[0]===void 0&&re(()=>n[6].call(e))},m(s,f){R(s,e,f);for(let D=0;D<r.length;D+=1)r[D]&&r[D].m(e,null);X(e,n[0],!0),R(s,l,f),m&&m.m(s,f),R(s,t,f),a&&a.m(s,f),R(s,i,f),o=!0,u||(v=x(e,"change",n[6]),u=!0)},p(s,[f]){if(f&32){c=K(s[5]);let D;for(D=0;D<c.length;D+=1){const y=je(s,c,D);r[D]?r[D].p(y,f):(r[D]=qe(y),r[D].c(),r[D].m(e,null))}for(;D<r.length;D+=1)r[D].d(1);r.length=c.length}f&33&&X(e,s[0]),s[0]===$.SacramentBreadAssignments?m?(m.p(s,f),f&1&&Q(m,1)):(m=Fe(s),m.c(),Q(m,1),m.m(t.parentNode,t)):m&&(De(),Z(m,1,1,()=>{m=null}),Se()),s[0]===$.SacramentPreparationAssignments?a?(a.p(s,f),f&1&&Q(a,1)):(a=ze(s),a.c(),Q(a,1),a.m(i.parentNode,i)):a&&(De(),Z(a,1,1,()=>{a=null}),Se())},i(s){o||(Q(m),Q(a),o=!0)},o(s){Z(m),Z(a),o=!1},d(s){s&&(g(e),g(l),g(t),g(i)),le(r,s),m&&m.d(s),a&&a.d(s),u=!1,v()}}}function vt(n,e,l){let t,i;const{stores:{currentUserIsRootOrAdmin:o,currentUserIsTeachersQuorum:u}}=tt();we(n,o,m=>l(1,t=m)),we(n,u,m=>l(2,i=m));let v=$.SacramentBreadAssignments;const c=Object.values($);function r(){v=ae(this),l(0,v),l(5,c)}return[v,t,i,o,u,c,r]}class bt extends ce{constructor(e){super(),fe(this,e,vt,ht,ie,{})}}function gt(n){let e,l;return e=new bt({}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},i(t){l||(Q(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function pt(n){let e,l;return e=new et({props:{pageTitle:"Assignments",$$slots:{default:[gt]},$$scope:{ctx:n}}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,[i]){const o={};i&1&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(Q(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}class Mt extends ce{constructor(e){super(),fe(this,e,null,pt,ie,{})}}export{Mt as component,At as universal};
