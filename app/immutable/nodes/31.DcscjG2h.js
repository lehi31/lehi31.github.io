import{s as _t,d,i as fe,b as l,A as le,p as a,c as n,e as g,w as P,g as p,f as x,h as r,j as _,t as Y,k as $e,r as bt,a as re,y as vt,T as Le,z as te,B as yt,n as et}from"../chunks/Dvm0vAjZ.js";import{S as gt,i as Ct,d as tt,t as lt,a as at,m as st,c as nt,b as rt}from"../chunks/C0L9un44.js";import{P as Et}from"../chunks/T1DABCdF.js";import{e as it,u as Dt,d as Tt}from"../chunks/DYdwcP7M.js";import{g as kt}from"../chunks/B1UEbBwb.js";import{D as wt}from"../chunks/75J_HFy9.js";import{g as Lt,P as Gt}from"../chunks/8H_U7C9I.js";import{g as It}from"../chunks/Dbrxt59H.js";function ut(o,e,t){const s=o.slice();return s[36]=e[t],s}function ct(o){let e,t,s,c,f,i,u,D;return{c(){e=r("div"),t=r("i"),s=_(),c=Y(o[0]),f=_(),i=r("button"),this.h()},l(C){e=n(C,"DIV",{class:!0,role:!0});var y=g(e);t=n(y,"I",{class:!0}),g(t).forEach(d),s=p(y),c=x(y,o[0]),f=p(y),i=n(y,"BUTTON",{type:!0,class:!0,"aria-label":!0}),g(i).forEach(d),y.forEach(d),this.h()},h(){a(t,"class","bi bi-exclamation-triangle-fill"),a(i,"type","button"),a(i,"class","btn-close"),a(i,"aria-label","Close"),a(e,"class","alert alert-danger alert-dismissible fade show"),a(e,"role","alert")},m(C,y){fe(C,e,y),l(e,t),l(e,s),l(e,c),l(e,f),l(e,i),u||(D=le(i,"click",o[19]),u=!0)},p(C,y){y[0]&1&&re(c,C[0])},d(C){C&&d(e),u=!1,D()}}}function dt(o){let e,t,s,c,f,i,u,D;return{c(){e=r("div"),t=r("i"),s=_(),c=Y(o[1]),f=_(),i=r("button"),this.h()},l(C){e=n(C,"DIV",{class:!0,role:!0});var y=g(e);t=n(y,"I",{class:!0}),g(t).forEach(d),s=p(y),c=x(y,o[1]),f=p(y),i=n(y,"BUTTON",{type:!0,class:!0,"aria-label":!0}),g(i).forEach(d),y.forEach(d),this.h()},h(){a(t,"class","bi bi-check-circle-fill"),a(i,"type","button"),a(i,"class","btn-close"),a(i,"aria-label","Close"),a(e,"class","alert alert-success alert-dismissible fade show"),a(e,"role","alert")},m(C,y){fe(C,e,y),l(e,t),l(e,s),l(e,c),l(e,f),l(e,i),u||(D=le(i,"click",o[20]),u=!0)},p(C,y){y[0]&2&&re(c,C[1])},d(C){C&&d(e),u=!1,D()}}}function Nt(o){let e,t,s,c='<tr><th scope="col" class="svelte-1bmabql">Year</th> <th scope="col" class="svelte-1bmabql">Period</th> <th scope="col" class="d-none d-md-table-cell svelte-1bmabql">Baptisms Goal</th> <th scope="col" class="d-none d-md-table-cell svelte-1bmabql">Sealings Goal</th> <th scope="col" class="d-none d-lg-table-cell svelte-1bmabql">Ordinances Goal</th> <th scope="col" class="d-none d-xl-table-cell svelte-1bmabql">Notes</th> <th scope="col" class="text-end svelte-1bmabql">Actions</th></tr>',f,i,u=[],D=new Map,C=it(o[11]);const y=b=>b[36].id;for(let b=0;b<C.length;b+=1){let v=ut(o,C,b),m=y(v);D.set(m,u[b]=ft(m,v))}return{c(){e=r("div"),t=r("table"),s=r("thead"),s.innerHTML=c,f=_(),i=r("tbody");for(let b=0;b<u.length;b+=1)u[b].c();this.h()},l(b){e=n(b,"DIV",{class:!0});var v=g(e);t=n(v,"TABLE",{class:!0});var m=g(t);s=n(m,"THEAD",{"data-svelte-h":!0}),P(s)!=="svelte-2d79ds"&&(s.innerHTML=c),f=p(m),i=n(m,"TBODY",{});var q=g(i);for(let N=0;N<u.length;N+=1)u[N].l(q);q.forEach(d),m.forEach(d),v.forEach(d),this.h()},h(){a(t,"class","table table-hover align-middle svelte-1bmabql"),a(e,"class","table-responsive")},m(b,v){fe(b,e,v),l(e,t),l(t,s),l(t,f),l(t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(i,null)},p(b,v){v[0]&296960&&(C=it(b[11]),u=Dt(u,v,y,1,b,C,D,i,Tt,ft,null,ut))},d(b){b&&d(e);for(let v=0;v<u.length;v+=1)u[v].d()}}}function St(o){let e,t='<h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">Click &quot;Create New Goal&quot; to add your first ward mission goal.</p>';return{c(){e=r("div"),e.innerHTML=t,this.h()},l(s){e=n(s,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),P(e)!=="svelte-1f0ba3m"&&(e.innerHTML=t),this.h()},h(){a(e,"class","alert alert-info"),a(e,"role","alert")},m(s,c){fe(s,e,c)},p:et,d(s){s&&d(e)}}}function Mt(o){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=r("div"),e.innerHTML=t,this.h()},l(s){e=n(s,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-mlx3u2"&&(e.innerHTML=t),this.h()},h(){a(e,"class","text-center py-5")},m(s,c){fe(s,e,c)},p:et,d(s){s&&d(e)}}}function ft(o,e){let t,s,c,f=e[36].year+"",i,u,D,C=pt(e[36].start_date,e[36].end_date)+"",y,b,v,m,q,N=(e[36].baptisms_goal??"--")+"",S,L,E=(e[36].family_sealings_goal??"--")+"",F,B,k=(e[36].temple_ordinances_goal?.toLocaleString()??"--")+"",h,G,A,V=(e[36].baptisms_goal??"--")+"",ve,Z,me,he=(e[36].family_sealings_goal??"--")+"",ge,De,O,j=(e[36].temple_ordinances_goal?.toLocaleString()??"--")+"",Te,ke,U,oe,J=(e[36].notes||"—")+"",T,Ce,z,H,R,we,W,pe,ye="Edit",Ie,ae,ie='<i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Delete</span>',ue,Ne,Se;function $(){return e[21](e[36])}function Ye(){return e[22](e[36])}return{key:o,first:null,c(){t=r("tr"),s=r("td"),c=r("strong"),i=Y(f),u=_(),D=r("td"),y=Y(C),b=_(),v=r("div"),m=r("small"),q=Y("Goals: "),S=Y(N),L=Y(" / "),F=Y(E),B=Y(` /
										`),h=Y(k),G=_(),A=r("td"),ve=Y(V),Z=_(),me=r("td"),ge=Y(he),De=_(),O=r("td"),Te=Y(j),ke=_(),U=r("td"),oe=r("small"),T=Y(J),Ce=_(),z=r("td"),H=r("div"),R=r("button"),we=r("i"),W=_(),pe=r("span"),pe.textContent=ye,Ie=_(),ae=r("button"),ae.innerHTML=ie,ue=_(),this.h()},l(K){t=n(K,"TR",{});var I=g(t);s=n(I,"TD",{});var Me=g(s);c=n(Me,"STRONG",{});var ce=g(c);i=x(ce,f),ce.forEach(d),Me.forEach(d),u=p(I),D=n(I,"TD",{});var se=g(D);y=x(se,C),b=p(se),v=n(se,"DIV",{class:!0});var je=g(v);m=n(je,"SMALL",{class:!0});var _e=g(m);q=x(_e,"Goals: "),S=x(_e,N),L=x(_e," / "),F=x(_e,E),B=x(_e,` /
										`),h=x(_e,k),_e.forEach(d),je.forEach(d),se.forEach(d),G=p(I),A=n(I,"TD",{class:!0});var ne=g(A);ve=x(ne,V),ne.forEach(d),Z=p(I),me=n(I,"TD",{class:!0});var Ve=g(me);ge=x(Ve,he),Ve.forEach(d),De=p(I),O=n(I,"TD",{class:!0});var Ee=g(O);Te=x(Ee,j),Ee.forEach(d),ke=p(I),U=n(I,"TD",{class:!0});var ze=g(U);oe=n(ze,"SMALL",{class:!0});var Ae=g(oe);T=x(Ae,J),Ae.forEach(d),ze.forEach(d),Ce=p(I),z=n(I,"TD",{class:!0});var be=g(z);H=n(be,"DIV",{class:!0,role:!0});var ee=g(H);R=n(ee,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var Ge=g(R);we=n(Ge,"I",{class:!0}),g(we).forEach(d),W=p(Ge),pe=n(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),P(pe)!=="svelte-1davzvv"&&(pe.textContent=ye),Ge.forEach(d),Ie=p(ee),ae=n(ee,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),P(ae)!=="svelte-1jlwkrv"&&(ae.innerHTML=ie),ee.forEach(d),be.forEach(d),ue=p(I),I.forEach(d),this.h()},h(){a(m,"class","text-muted"),a(v,"class","d-md-none mt-1"),a(A,"class","d-none d-md-table-cell"),a(me,"class","d-none d-md-table-cell"),a(O,"class","d-none d-lg-table-cell"),a(oe,"class","text-muted"),a(U,"class","d-none d-xl-table-cell"),a(we,"class","bi bi-pencil"),a(pe,"class","d-none d-sm-inline"),a(R,"class","btn btn-sm btn-outline-primary"),a(R,"type","button"),a(R,"data-bs-toggle","offcanvas"),a(R,"data-bs-target","#"+xe),a(R,"aria-controls",xe),a(ae,"class","btn btn-sm btn-outline-danger"),a(ae,"type","button"),a(H,"class","btn-group gap-2"),a(H,"role","group"),a(z,"class","text-end"),this.first=t},m(K,I){fe(K,t,I),l(t,s),l(s,c),l(c,i),l(t,u),l(t,D),l(D,y),l(D,b),l(D,v),l(v,m),l(m,q),l(m,S),l(m,L),l(m,F),l(m,B),l(m,h),l(t,G),l(t,A),l(A,ve),l(t,Z),l(t,me),l(me,ge),l(t,De),l(t,O),l(O,Te),l(t,ke),l(t,U),l(U,oe),l(oe,T),l(t,Ce),l(t,z),l(z,H),l(H,R),l(R,we),l(R,W),l(R,pe),l(H,Ie),l(H,ae),l(t,ue),Ne||(Se=[le(R,"click",$),le(ae,"click",Ye)],Ne=!0)},p(K,I){e=K,I[0]&2048&&f!==(f=e[36].year+"")&&re(i,f),I[0]&2048&&C!==(C=pt(e[36].start_date,e[36].end_date)+"")&&re(y,C),I[0]&2048&&N!==(N=(e[36].baptisms_goal??"--")+"")&&re(S,N),I[0]&2048&&E!==(E=(e[36].family_sealings_goal??"--")+"")&&re(F,E),I[0]&2048&&k!==(k=(e[36].temple_ordinances_goal?.toLocaleString()??"--")+"")&&re(h,k),I[0]&2048&&V!==(V=(e[36].baptisms_goal??"--")+"")&&re(ve,V),I[0]&2048&&he!==(he=(e[36].family_sealings_goal??"--")+"")&&re(ge,he),I[0]&2048&&j!==(j=(e[36].temple_ordinances_goal?.toLocaleString()??"--")+"")&&re(Te,j),I[0]&2048&&J!==(J=(e[36].notes||"—")+"")&&re(T,J)},d(K){K&&d(t),Ne=!1,vt(Se)}}}function mt(o){let e,t,s;return{c(){e=r("div"),t=r("small"),s=Y(o[0]),this.h()},l(c){e=n(c,"DIV",{class:!0,role:!0});var f=g(e);t=n(f,"SMALL",{});var i=g(t);s=x(i,o[0]),i.forEach(d),f.forEach(d),this.h()},h(){a(e,"class","alert alert-danger"),a(e,"role","alert")},m(c,f){fe(c,e,f),l(e,t),l(t,s)},p(c,f){f[0]&1&&re(s,c[0])},d(c){c&&d(e)}}}function ht(o){let e;return{c(){e=r("span"),this.h()},l(t){e=n(t,"SPAN",{class:!0,role:!0}),g(e).forEach(d),this.h()},h(){a(e,"class","spinner-border spinner-border-sm me-2"),a(e,"role","status")},m(t,s){fe(t,e,s)},d(t){t&&d(e)}}}function Vt(o){let e,t,s,c,f="Year *",i,u,D,C,y="Calendar year for this goal period",b,v,m,q="Start Date *",N,S,L,E,F="First day of the goal period (inclusive)",B,k,h,G="End Date *",A,V,ve,Z,me="Last day of the goal period (inclusive)",he,ge,De,O,j,Te="Baptisms Goal",ke,U,oe,J,T='Target number of baptisms (leave empty to display "--")',Ce,z,H,R="Family Sealings Goal",we,W,pe,ye,Ie='Target number of family sealings (leave empty to display "--")',ae,ie,ue,Ne="Temple Ordinances Goal",Se,$,Ye,K,I='Target number of temple ordinances performed (leave empty to display "--")',Me,ce,se,je="Notes (Optional)",_e,ne,Ve,Ee,ze="Internal notes about this goal period (for admin reference)",Ae,be,ee,Ge="Cancel",Qe,de,We,Re=o[2]?"Update Goal":"Create Goal",Xe,Ze,ot,X=o[0]&&mt(o),Q=o[10]&&ht();return{c(){e=r("form"),X&&X.c(),t=_(),s=r("div"),c=r("label"),c.textContent=f,i=_(),u=r("input"),D=_(),C=r("div"),C.textContent=y,b=_(),v=r("div"),m=r("label"),m.textContent=q,N=_(),S=r("input"),L=_(),E=r("div"),E.textContent=F,B=_(),k=r("div"),h=r("label"),h.textContent=G,A=_(),V=r("input"),ve=_(),Z=r("div"),Z.textContent=me,he=_(),ge=r("hr"),De=_(),O=r("div"),j=r("label"),j.textContent=Te,ke=_(),U=r("input"),oe=_(),J=r("div"),J.textContent=T,Ce=_(),z=r("div"),H=r("label"),H.textContent=R,we=_(),W=r("input"),pe=_(),ye=r("div"),ye.textContent=Ie,ae=_(),ie=r("div"),ue=r("label"),ue.textContent=Ne,Se=_(),$=r("input"),Ye=_(),K=r("div"),K.textContent=I,Me=_(),ce=r("div"),se=r("label"),se.textContent=je,_e=_(),ne=r("textarea"),Ve=_(),Ee=r("div"),Ee.textContent=ze,Ae=_(),be=r("div"),ee=r("button"),ee.textContent=Ge,Qe=_(),de=r("button"),Q&&Q.c(),We=_(),Xe=Y(Re),this.h()},l(M){e=n(M,"FORM",{class:!0});var w=g(e);X&&X.l(w),t=p(w),s=n(w,"DIV",{});var Pe=g(s);c=n(Pe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(c)!=="svelte-d48a68"&&(c.textContent=f),i=p(Pe),u=n(Pe,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0}),D=p(Pe),C=n(Pe,"DIV",{class:!0,"data-svelte-h":!0}),P(C)!=="svelte-4ht43z"&&(C.textContent=y),Pe.forEach(d),b=p(w),v=n(w,"DIV",{});var Ue=g(v);m=n(Ue,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(m)!=="svelte-1ysthgo"&&(m.textContent=q),N=p(Ue),S=n(Ue,"INPUT",{type:!0,class:!0,id:!0}),L=p(Ue),E=n(Ue,"DIV",{class:!0,"data-svelte-h":!0}),P(E)!=="svelte-p2msbi"&&(E.textContent=F),Ue.forEach(d),B=p(w),k=n(w,"DIV",{});var qe=g(k);h=n(qe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(h)!=="svelte-6g5902"&&(h.textContent=G),A=p(qe),V=n(qe,"INPUT",{type:!0,class:!0,id:!0}),ve=p(qe),Z=n(qe,"DIV",{class:!0,"data-svelte-h":!0}),P(Z)!=="svelte-hnkrbk"&&(Z.textContent=me),qe.forEach(d),he=p(w),ge=n(w,"HR",{}),De=p(w),O=n(w,"DIV",{});var Be=g(O);j=n(Be,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(j)!=="svelte-1qd99o0"&&(j.textContent=Te),ke=p(Be),U=n(Be,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),oe=p(Be),J=n(Be,"DIV",{class:!0,"data-svelte-h":!0}),P(J)!=="svelte-dj0c6x"&&(J.textContent=T),Be.forEach(d),Ce=p(w),z=n(w,"DIV",{});var Oe=g(z);H=n(Oe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(H)!=="svelte-10hiahm"&&(H.textContent=R),we=p(Oe),W=n(Oe,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),pe=p(Oe),ye=n(Oe,"DIV",{class:!0,"data-svelte-h":!0}),P(ye)!=="svelte-1btwl9a"&&(ye.textContent=Ie),Oe.forEach(d),ae=p(w),ie=n(w,"DIV",{});var He=g(ie);ue=n(He,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(ue)!=="svelte-tu4x4e"&&(ue.textContent=Ne),Se=p(He),$=n(He,"INPUT",{type:!0,class:!0,id:!0,min:!0,placeholder:!0}),Ye=p(He),K=n(He,"DIV",{class:!0,"data-svelte-h":!0}),P(K)!=="svelte-zwed0g"&&(K.textContent=I),He.forEach(d),Me=p(w),ce=n(w,"DIV",{});var Fe=g(ce);se=n(Fe,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),P(se)!=="svelte-hwoi47"&&(se.textContent=je),_e=p(Fe),ne=n(Fe,"TEXTAREA",{class:!0,id:!0,rows:!0}),g(ne).forEach(d),Ve=p(Fe),Ee=n(Fe,"DIV",{class:!0,"data-svelte-h":!0}),P(Ee)!=="svelte-186z59a"&&(Ee.textContent=ze),Fe.forEach(d),Ae=p(w),be=n(w,"DIV",{class:!0});var Je=g(be);ee=n(Je,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),P(ee)!=="svelte-klcbsm"&&(ee.textContent=Ge),Qe=p(Je),de=n(Je,"BUTTON",{type:!0,class:!0});var Ke=g(de);Q&&Q.l(Ke),We=p(Ke),Xe=x(Ke,Re),Ke.forEach(d),Je.forEach(d),w.forEach(d),this.h()},h(){a(c,"class","form-label"),a(c,"for","year"),a(u,"type","number"),a(u,"class","form-control"),a(u,"id","year"),a(u,"min","2000"),a(u,"max","2100"),u.required=!0,u.disabled=o[2],a(C,"class","form-text"),a(m,"class","form-label"),a(m,"for","startDate"),a(S,"type","date"),a(S,"class","form-control"),a(S,"id","startDate"),S.required=!0,a(E,"class","form-text"),a(h,"class","form-label"),a(h,"for","endDate"),a(V,"type","date"),a(V,"class","form-control"),a(V,"id","endDate"),V.required=!0,a(Z,"class","form-text"),a(j,"class","form-label"),a(j,"for","baptismsGoal"),a(U,"type","number"),a(U,"class","form-control"),a(U,"id","baptismsGoal"),a(U,"min","0"),a(U,"placeholder","Leave empty for no goal"),a(J,"class","form-text"),a(H,"class","form-label"),a(H,"for","familySealingsGoal"),a(W,"type","number"),a(W,"class","form-control"),a(W,"id","familySealingsGoal"),a(W,"min","0"),a(W,"placeholder","Leave empty for no goal"),a(ye,"class","form-text"),a(ue,"class","form-label"),a(ue,"for","templeOrdinancesGoal"),a($,"type","number"),a($,"class","form-control"),a($,"id","templeOrdinancesGoal"),a($,"min","0"),a($,"placeholder","Leave empty for no goal"),a(K,"class","form-text"),a(se,"class","form-label"),a(se,"for","notes"),a(ne,"class","form-control"),a(ne,"id","notes"),a(ne,"rows","3"),a(Ee,"class","form-text"),a(ee,"type","button"),a(ee,"class","btn btn-secondary"),a(de,"type","submit"),a(de,"class","btn btn-primary"),de.disabled=o[10],a(be,"class","d-flex justify-content-end gap-2"),a(e,"class","d-flex flex-column gap-3")},m(M,w){fe(M,e,w),X&&X.m(e,null),l(e,t),l(e,s),l(s,c),l(s,i),l(s,u),te(u,o[3]),l(s,D),l(s,C),l(e,b),l(e,v),l(v,m),l(v,N),l(v,S),te(S,o[4]),l(v,L),l(v,E),l(e,B),l(e,k),l(k,h),l(k,A),l(k,V),te(V,o[5]),l(k,ve),l(k,Z),l(e,he),l(e,ge),l(e,De),l(e,O),l(O,j),l(O,ke),l(O,U),te(U,o[6]),l(O,oe),l(O,J),l(e,Ce),l(e,z),l(z,H),l(z,we),l(z,W),te(W,o[7]),l(z,pe),l(z,ye),l(e,ae),l(e,ie),l(ie,ue),l(ie,Se),l(ie,$),te($,o[8]),l(ie,Ye),l(ie,K),l(e,Me),l(e,ce),l(ce,se),l(ce,_e),l(ce,ne),te(ne,o[9]),l(ce,Ve),l(ce,Ee),l(e,Ae),l(e,be),l(be,ee),l(be,Qe),l(be,de),Q&&Q.m(de,null),l(de,We),l(de,Xe),Ze||(ot=[le(u,"input",o[23]),le(S,"input",o[24]),le(V,"input",o[25]),le(U,"input",o[26]),le(W,"input",o[27]),le($,"input",o[28]),le(ne,"input",o[29]),le(ee,"click",o[16]),le(e,"submit",yt(o[17]))],Ze=!0)},p(M,w){M[0]?X?X.p(M,w):(X=mt(M),X.c(),X.m(e,t)):X&&(X.d(1),X=null),w[0]&4&&(u.disabled=M[2]),w[0]&8&&Le(u.value)!==M[3]&&te(u,M[3]),w[0]&16&&te(S,M[4]),w[0]&32&&te(V,M[5]),w[0]&64&&Le(U.value)!==M[6]&&te(U,M[6]),w[0]&128&&Le(W.value)!==M[7]&&te(W,M[7]),w[0]&256&&Le($.value)!==M[8]&&te($,M[8]),w[0]&512&&te(ne,M[9]),M[10]?Q||(Q=ht(),Q.c(),Q.m(de,We)):Q&&(Q.d(1),Q=null),w[0]&4&&Re!==(Re=M[2]?"Update Goal":"Create Goal")&&re(Xe,Re),w[0]&1024&&(de.disabled=M[10])},d(M){M&&d(e),X&&X.d(),Q&&Q.d(),Ze=!1,vt(ot)}}}function At(o){let e,t,s,c="Ward Mission Goals Configuration",f,i,u,D,C,y,b,v,m,q,N,S,L=o[0]&&ct(o),E=o[1]&&dt(o);function F(h,G){return h[10]?Mt:h[11].length===0?St:Nt}let B=F(o),k=B(o);return m=new wt({props:{title:o[2]?`Edit Goal for ${o[3]}`:"Create New Goal",id:xe,placement:"end",$$slots:{default:[Vt]},$$scope:{ctx:o}}}),{c(){e=r("div"),t=r("div"),s=r("h2"),s.textContent=c,f=_(),i=r("button"),u=r("i"),D=Y(" Create New Goal"),C=_(),L&&L.c(),y=_(),E&&E.c(),b=_(),k.c(),v=_(),rt(m.$$.fragment),this.h()},l(h){e=n(h,"DIV",{class:!0});var G=g(e);t=n(G,"DIV",{class:!0});var A=g(t);s=n(A,"H2",{"data-svelte-h":!0}),P(s)!=="svelte-1a0qak8"&&(s.textContent=c),f=p(A),i=n(A,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var V=g(i);u=n(V,"I",{class:!0}),g(u).forEach(d),D=x(V," Create New Goal"),V.forEach(d),A.forEach(d),C=p(G),L&&L.l(G),y=p(G),E&&E.l(G),b=p(G),k.l(G),G.forEach(d),v=p(h),nt(m.$$.fragment,h),this.h()},h(){a(u,"class","bi bi-plus-circle"),a(i,"class","btn btn-primary"),a(i,"type","button"),a(i,"data-bs-toggle","offcanvas"),a(i,"data-bs-target","#"+xe),a(i,"aria-controls",xe),a(t,"class","d-flex justify-content-between align-items-center mb-4"),a(e,"class","ward-mission-goals-admin svelte-1bmabql")},m(h,G){fe(h,e,G),l(e,t),l(t,s),l(t,f),l(t,i),l(i,u),l(i,D),l(e,C),L&&L.m(e,null),l(e,y),E&&E.m(e,null),l(e,b),k.m(e,null),fe(h,v,G),st(m,h,G),q=!0,N||(S=le(i,"click",o[14]),N=!0)},p(h,G){h[0]?L?L.p(h,G):(L=ct(h),L.c(),L.m(e,y)):L&&(L.d(1),L=null),h[1]?E?E.p(h,G):(E=dt(h),E.c(),E.m(e,b)):E&&(E.d(1),E=null),B===(B=F(h))&&k?k.p(h,G):(k.d(1),k=B(h),k&&(k.c(),k.m(e,null)));const A={};G[0]&12&&(A.title=h[2]?`Edit Goal for ${h[3]}`:"Create New Goal"),G[0]&2045|G[1]&256&&(A.$$scope={dirty:G,ctx:h}),m.$set(A)},i(h){q||(at(m.$$.fragment,h),q=!0)},o(h){lt(m.$$.fragment,h),q=!1},d(h){h&&(d(e),d(v)),L&&L.d(),E&&E.d(),k.d(),tt(m,h),N=!1,S()}}}const xe="goal-form-drawer";function pt(o,e){const[t,s,c]=o.split("-").map(Number),[f,i,u]=e.split("-").map(Number),D=new Date(t,s-1,c),C=new Date(f,i-1,u),y=D.toLocaleDateString("en-US",{month:"short"}),b=C.toLocaleDateString("en-US",{month:"short"});return`${y} to ${b}`}function Pt(o,e,t){let s,c;const{stores:{data:f,loading:i},actions:{reload:u,apiCreate:D,apiUpdate:C,apiDelete:y}}=kt();$e(o,f,T=>t(11,c=T)),$e(o,i,T=>t(10,s=T));let b=null,v=null,m=null,q=!1,N=new Date().getFullYear()+1,S="",L="",E=null,F=null,B=null,k="";bt(async()=>{await u()});function h(){m=null,t(2,q=!1),t(3,N=new Date().getFullYear()+1),t(4,S=""),t(5,L=""),t(6,E=null),t(7,F=null),t(8,B=null),t(9,k=""),t(0,b=null)}function G(){h(),t(2,q=!1)}function A(T){m=T,t(2,q=!0),t(3,N=T.year),t(4,S=T.start_date),t(5,L=T.end_date),t(6,E=T.baptisms_goal),t(7,F=T.family_sealings_goal),t(8,B=T.temple_ordinances_goal),t(9,k=T.notes||""),t(0,b=null)}function V(){document.querySelector(`[data-bs-target="#${xe}"]`)?.click(),h()}async function ve(){if(t(0,b=null),t(1,v=null),!N||N<2e3||N>2100){t(0,b="Please enter a valid year between 2000 and 2100");return}if(!S||!L){t(0,b="Please select both start and end dates");return}if(S>L){t(0,b="Start date must be before or equal to end date");return}try{const T={year:N,start_date:S,end_date:L,baptisms_goal:E,family_sealings_goal:F,temple_ordinances_goal:B,is_active:!0,notes:k||null};q&&m?.id?(await C(m.id,T),t(1,v="Goal updated successfully!")):(await D(T),t(1,v="Goal created successfully!")),V(),setTimeout(()=>{t(1,v=null)},3e3)}catch(T){t(0,b=T instanceof Error?T.message:"Failed to save goal")}}async function Z(T){if(confirm(`Are you sure you want to delete the goal for ${T.year}? This action cannot be undone.`))try{T.id&&(await y(T.id),t(1,v="Goal deleted successfully!"),setTimeout(()=>{t(1,v=null)},3e3))}catch(Ce){t(0,b=Ce instanceof Error?Ce.message:"Failed to delete goal")}}const me=()=>t(0,b=null),he=()=>t(1,v=null),ge=T=>A(T),De=T=>Z(T);function O(){N=Le(this.value),t(3,N)}function j(){S=this.value,t(4,S)}function Te(){L=this.value,t(5,L)}function ke(){E=Le(this.value),t(6,E)}function U(){F=Le(this.value),t(7,F)}function oe(){B=Le(this.value),t(8,B)}function J(){k=this.value,t(9,k)}return[b,v,q,N,S,L,E,F,B,k,s,c,f,i,G,A,V,ve,Z,me,he,ge,De,O,j,Te,ke,U,oe,J]}class Ut extends gt{constructor(e){super(),Ct(this,e,Pt,At,_t,{},null,[-1,-1])}}function qt(o){let e,t,s=`Configure annual ward mission goals including target dates and goal values. Goals will
			automatically display on the home page for all ward members.`,c,f,i;return f=new Ut({}),{c(){e=r("div"),t=r("p"),t.textContent=s,c=_(),rt(f.$$.fragment),this.h()},l(u){e=n(u,"DIV",{class:!0});var D=g(e);t=n(D,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-5kjh6h"&&(t.textContent=s),c=p(D),nt(f.$$.fragment,D),D.forEach(d),this.h()},h(){a(t,"class","lead"),a(e,"class","container svelte-y958z5")},m(u,D){fe(u,e,D),l(e,t),l(e,c),st(f,e,null),i=!0},p:et,i(u){i||(at(f.$$.fragment,u),i=!0)},o(u){lt(f.$$.fragment,u),i=!1},d(u){u&&d(e),tt(f)}}}function Bt(o){let e,t;return e=new Et({props:{pageTitle:"Manage Ward Mission Goals",$$slots:{default:[qt]},$$scope:{ctx:o}}}),{c(){rt(e.$$.fragment)},l(s){nt(e.$$.fragment,s)},m(s,c){st(e,s,c),t=!0},p(s,[c]){const f={};c&8&&(f.$$scope={dirty:c,ctx:s}),e.$set(f)},i(s){t||(at(e.$$.fragment,s),t=!0)},o(s){lt(e.$$.fragment,s),t=!1},d(s){tt(e,s)}}}function Ot(o,e,t){let s;const{stores:{currentUserHasPermission:c,pageName:f}}=Lt();return $e(o,c,i=>t(1,s=i)),f.set("Ward Mission Goals"),bt(()=>{s(Gt.EditTempleChallenges)||It("/home")}),[c]}class Xt extends gt{constructor(e){super(),Ct(this,e,Ot,Bt,_t,{})}}export{Xt as component};
