import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as I,f as E,a as T,aw as H,g as t,U as g,a8 as e,s as m,c as d,aa as w,r as f,t as J,e as K}from"../chunks/D6GkHfO-.js";import{i as A}from"../chunks/XlJfi8GN.js";import{e as P,i as R,s as M}from"../chunks/DYmw-k_K.js";import{c as O,a as b,f as x}from"../chunks/D8wZRsgK.js";import{a as Q}from"../chunks/ByZFmqoY.js";import{r as V}from"../chunks/BzM8VPE5.js";import{g as D,c as F}from"../chunks/vFKQls-f.js";import{b as X}from"../chunks/6wL3GoW6.js";import{p as Y}from"../chunks/CdEA5IGF.js";import{L as Z}from"../chunks/f46sgKzV.js";var ee=x('<div role="alert"><i></i> <div> </div></div>'),ae=x(`<form class="d-flex gap-3 flex-column"><div><label for="email" class="form-label">Email address</label> <input type="email" class="form-control" placeholder="your.email@example.com" id="email" aria-describedby="email" required/> <small class="text-muted">We'll send a password reset link to this email address</small></div> <div class="d-flex justify-content-between align-items-center"><a href="/auth/login" class="btn-link btn">Back to login</a> <button type="submit" class="btn btn-primary">Send Reset Link</button></div></form>`),se=x(`<div class="alert alert-info d-flex align-items-center gap-2" role="alert"><i class="bi bi-info-circle-fill"></i> <div><strong>Check your email</strong><br/> If an account exists with the email address you provided, you'll receive a password reset link
					shortly. The link will expire in 1 hour.</div></div> <div class="d-flex flex-column gap-2"><a href="/auth/login" class="btn btn-primary">Return to Login</a> <button type="button" class="btn btn-link">Send another reset link</button></div>`,1),te=x(`<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-ka1uvc"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none svelte-ka1uvc"><img src="/assets/logo.png" alt="logo" class="logo svelte-ka1uvc"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <h2 class="h5">Forgot Password</h2> <p class="text-muted small">Enter your email address and we'll send you a link to reset your password.</p> <!> <!> <div class="text-center"><small class="text-muted">Don't have an account? <a href="/auth/signup" class="link-primary">Sign up</a></small></div></div>`);function re(_,k){I(k,!1);const{actions:{requestPasswordReset:y}}=D();let u=g(!1),c=g(""),i=g(""),v=g("error"),h=g(!1);const S=async()=>{if(e(u,!0),e(i,""),e(v,"error"),!t(c)){e(i,"Email is required"),e(u,!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t(c))){e(i,"Please enter a valid email address"),e(u,!1);return}const n=await y(t(c));n.success?(e(v,"success"),e(i,n.message||"If an account exists with this email, a password reset link has been sent."),e(h,!0)):(e(v,"error"),e(i,n.error||"Failed to send password reset email")),e(u,!1)},j=s=>{s.key==="Enter"&&!t(h)&&S()},B=s=>{s.focus()};A();var L=O();P("keydown",H,j);var C=E(L);{var N=s=>{Z(s,{message:"Sending password reset email..."})},U=s=>{var n=te(),q=m(d(n),6);{var W=r=>{var a=ee(),l=d(a),o=m(l,2),p=d(o,!0);f(o),f(a),J(()=>{F(a,1,`alert ${t(v)==="success"?"alert-success":"alert-danger"} d-flex align-items-center gap-2`),F(l,1,`bi ${t(v)==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"}`),M(p,t(i))}),b(r,a)};R(q,r=>{t(i)&&r(W)})}var $=m(q,2);{var z=r=>{var a=ae(),l=d(a),o=m(d(l),2);V(o),K(()=>X(o,()=>t(c),p=>e(c,p))),Q(o,p=>B?.(p)),w(2),f(l),w(2),f(a),P("submit",a,Y(S)),b(r,a)},G=r=>{var a=se(),l=m(E(a),2),o=m(d(l),2);f(l),P("click",o,()=>{e(h,!1),e(c,""),e(i,"")}),b(r,a)};R($,r=>{t(h)?r(G,!1):r(z)})}w(2),f(n),b(s,n)};R(C,s=>{t(u)?s(N):s(U,!1)})}b(_,L),T()}function be(_,k){I(k,!1);const{stores:{pageName:y}}=D();y.set("Auth - Forgot Password"),A(),re(_,{}),T()}export{be as component};
