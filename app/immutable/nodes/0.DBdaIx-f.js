import{s as S,l as C,d as _,u as M,m as U,o as H,i as y,q as O,g,j as w,k as j,r as D,n as L,I as P,b as m,C as E,p as d,c as b,e as k,w as I,h as v}from"../chunks/BQ7GsIJB.js";import{S as V,i as B,t as F,a as q}from"../chunks/BJAXi6Wx.js";import{g as z}from"../chunks/4GBrEyEq.js";const R=!0,X=Object.freeze(Object.defineProperty({__proto__:null,prerender:R},Symbol.toStringTag,{value:"Module"}));function N(c){let s,r,u,o,p=`<strong>Update Available</strong><br/>
			A new version of the app is available. Please reload to get the latest features and bug fixes.`,l,t,h='<i class="bi bi-arrow-clockwise"></i> Reload Now',i,e,a,T;return{c(){s=v("div"),r=v("i"),u=w(),o=v("div"),o.innerHTML=p,l=w(),t=v("button"),t.innerHTML=h,i=w(),e=v("button"),this.h()},l(n){s=b(n,"DIV",{class:!0,role:!0});var f=k(s);r=b(f,"I",{class:!0}),k(r).forEach(_),u=g(f),o=b(f,"DIV",{class:!0,"data-svelte-h":!0}),I(o)!=="svelte-deeehk"&&(o.innerHTML=p),l=g(f),t=b(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),I(t)!=="svelte-1fsc537"&&(t.innerHTML=h),i=g(f),e=b(f,"BUTTON",{type:!0,class:!0,"aria-label":!0}),k(e).forEach(_),f.forEach(_),this.h()},h(){d(r,"class","bi bi-arrow-clockwise"),d(o,"class","flex-grow-1"),d(t,"type","button"),d(t,"class","btn btn-sm btn-primary"),d(e,"type","button"),d(e,"class","btn-close"),d(e,"aria-label","Close"),d(s,"class","alert alert-info alert-dismissible d-flex align-items-center gap-2 m-3"),d(s,"role","alert")},m(n,f){y(n,s,f),m(s,r),m(s,u),m(s,o),m(s,l),m(s,t),m(s,i),m(s,e),a||(T=[E(t,"click",c[5]),E(e,"click",c[8])],a=!0)},p:L,d(n){n&&_(s),a=!1,P(T)}}}function A(c){let s,r,u,o,p=`<strong>Session Expired</strong><br/>
			Your authentication token has expired. Please log in again to continue.`,l,t,h,i;return{c(){s=v("div"),r=v("i"),u=w(),o=v("div"),o.innerHTML=p,l=w(),t=v("button"),this.h()},l(e){s=b(e,"DIV",{class:!0,role:!0});var a=k(s);r=b(a,"I",{class:!0}),k(r).forEach(_),u=g(a),o=b(a,"DIV",{"data-svelte-h":!0}),I(o)!=="svelte-1pap48h"&&(o.innerHTML=p),l=g(a),t=b(a,"BUTTON",{type:!0,class:!0,"aria-label":!0}),k(t).forEach(_),a.forEach(_),this.h()},h(){d(r,"class","bi bi-clock-history"),d(t,"type","button"),d(t,"class","btn-close"),d(t,"aria-label","Close"),d(s,"class","alert alert-warning alert-dismissible d-flex align-items-center gap-2 m-3"),d(s,"role","alert")},m(e,a){y(e,s,a),m(s,r),m(s,u),m(s,o),m(s,l),m(s,t),h||(i=E(t,"click",c[4]),h=!0)},p:L,d(e){e&&_(s),h=!1,i()}}}function Y(c){let s,r,u,o,p;document.title=s="Lehi31 | "+c[2];let l=c[1]&&N(c),t=c[0]&&A(c);const h=c[7].default,i=C(h,c,c[6],null);return{c(){r=w(),l&&l.c(),u=w(),t&&t.c(),o=w(),i&&i.c()},l(e){O("svelte-1y0838e",document.head).forEach(_),r=g(e),l&&l.l(e),u=g(e),t&&t.l(e),o=g(e),i&&i.l(e)},m(e,a){y(e,r,a),l&&l.m(e,a),y(e,u,a),t&&t.m(e,a),y(e,o,a),i&&i.m(e,a),p=!0},p(e,[a]){(!p||a&4)&&s!==(s="Lehi31 | "+e[2])&&(document.title=s),e[1]?l?l.p(e,a):(l=N(e),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null),e[0]?t?t.p(e,a):(t=A(e),t.c(),t.m(o.parentNode,o)):t&&(t.d(1),t=null),i&&i.p&&(!p||a&64)&&M(i,h,e,e[6],p?H(h,e[6],a,null):U(e[6]),null)},i(e){p||(q(i,e),p=!0)},o(e){F(i,e),p=!1},d(e){e&&(_(r),_(u),_(o)),l&&l.d(e),t&&t.d(e),i&&i.d(e)}}}function G(c,s,r){let u,{$$slots:o={},$$scope:p}=s;const{stores:{pageName:l}}=z();j(c,l,n=>r(2,u=n));let t=!1,h=!1;const i=async()=>{try{const n=await fetch("/api/version"),{version:f}=await n.json();return f!=="1765654746040"?(console.warn("[App] New version available:",f,"current:","1765654746040"),!0):!1}catch(n){return console.error("[App] Failed to check for updates:",n),!1}};D(()=>{{sessionStorage.getItem("authExpired")==="true"&&(r(0,t=!0),setTimeout(()=>{r(0,t=!1),sessionStorage.removeItem("authExpired")},1e4));{const n=async()=>{await i()&&r(1,h=!0)};n();const f=setInterval(n,5*60*1e3);return()=>clearInterval(f)}}});const e=()=>{r(0,t=!1),sessionStorage.removeItem("authExpired")},a=async()=>{try{if("caches"in window){const n=await caches.keys();await Promise.all(n.map(f=>caches.delete(f))),console.log("[App] Cleared service worker caches")}}catch(n){console.error("[App] Failed to clear caches:",n)}finally{window.location.href=window.location.href}},T=()=>r(1,h=!1);return c.$$set=n=>{"$$scope"in n&&r(6,p=n.$$scope)},[t,h,u,l,e,a,p,o,T]}class Z extends V{constructor(s){super(),B(this,s,G,Y,S,{})}}export{Z as component,X as universal};
