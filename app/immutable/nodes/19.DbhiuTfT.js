import{s as q,d as f,i as b,x as L,k as D,r as O,n as N,b as k,p,c as h,e as V,w as E,g as y,h as v,j as C,a as R,f as A,t as G}from"../chunks/Dvm0vAjZ.js";import{S as H,i as M,t as P,a as T,e as F,d as Y,m as z,c as B,b as J,g as U}from"../chunks/C0L9un44.js";import{p as K}from"../chunks/CiqSpLTR.js";import{g as Q}from"../chunks/BmyHjkTP.js";import{s as W,b as X}from"../chunks/DeHuGeGc.js";import{L as Z}from"../chunks/myPzA-gB.js";function $(m){let e,t,n='<img src="/assets/logo.png" alt="logo" class="logo svelte-aqjxex"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',s;function o(r,a){if(r[1])return le;if(r[2])return te}let l=o(m),i=l&&l(m);return{c(){e=v("div"),t=v("a"),t.innerHTML=n,s=C(),i&&i.c(),this.h()},l(r){e=h(r,"DIV",{class:!0});var a=V(e);t=h(a,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(t)!=="svelte-1inzn7"&&(t.innerHTML=n),s=y(a),i&&i.l(a),a.forEach(f),this.h()},h(){p(t,"href","/home"),p(t,"class","header-content d-flex align-items-center gap-2 text-decoration-none"),p(e,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-aqjxex")},m(r,a){b(r,e,a),k(e,t),k(e,s),i&&i.m(e,null)},p(r,a){l===(l=o(r))&&i?i.p(r,a):(i&&i.d(1),i=l&&l(r),i&&(i.c(),i.m(e,null)))},i:N,o:N,d(r){r&&f(e),i&&i.d()}}}function ee(m){let e,t;return e=new Z({props:{message:"Verifying your email..."}}),{c(){J(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,s){z(e,n,s),t=!0},p:N,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){Y(e,n)}}}function te(m){let e,t,n,s,o,l="Verification Failed",i,r,a,d,c,u,w="Back to Login",g=m[4]&&j();return{c(){e=v("div"),t=v("i"),n=C(),s=v("div"),o=v("strong"),o.textContent=l,i=C(),r=v("p"),a=G(m[2]),d=C(),g&&g.c(),c=C(),u=v("a"),u.textContent=w,this.h()},l(_){e=h(_,"DIV",{class:!0,role:!0});var x=V(e);t=h(x,"I",{class:!0}),V(t).forEach(f),n=y(x),s=h(x,"DIV",{});var I=V(s);o=h(I,"STRONG",{"data-svelte-h":!0}),E(o)!=="svelte-uh34xm"&&(o.textContent=l),i=y(I),r=h(I,"P",{class:!0});var S=V(r);a=A(S,m[2]),S.forEach(f),I.forEach(f),x.forEach(f),d=y(_),g&&g.l(_),c=y(_),u=h(_,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(u)!=="svelte-r5u2t8"&&(u.textContent=w),this.h()},h(){p(t,"class","bi bi-exclamation-triangle-fill"),p(r,"class","mb-0"),p(e,"class","alert alert-danger d-flex align-items-center gap-2"),p(e,"role","alert"),p(u,"href","/auth/login"),p(u,"class","btn btn-link")},m(_,x){b(_,e,x),k(e,t),k(e,n),k(e,s),k(s,o),k(s,i),k(s,r),k(r,a),b(_,d,x),g&&g.m(_,x),b(_,c,x),b(_,u,x)},p(_,x){x&4&&R(a,_[2]),_[4]?g||(g=j(),g.c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null)},d(_){_&&(f(e),f(d),f(c),f(u)),g&&g.d(_)}}}function le(m){let e,t,n,s,o,l,i="Redirecting to login...";function r(c,u){return c[3]?ne:se}let a=r(m),d=a(m);return{c(){e=v("div"),t=v("i"),n=C(),s=v("div"),d.c(),o=C(),l=v("p"),l.textContent=i,this.h()},l(c){e=h(c,"DIV",{class:!0,role:!0});var u=V(e);t=h(u,"I",{class:!0}),V(t).forEach(f),n=y(u),s=h(u,"DIV",{});var w=V(s);d.l(w),w.forEach(f),u.forEach(f),o=y(c),l=h(c,"P",{class:!0,"data-svelte-h":!0}),E(l)!=="svelte-1icd19m"&&(l.textContent=i),this.h()},h(){p(t,"class","bi bi-check-circle-fill"),p(e,"class","alert alert-success d-flex align-items-center gap-2"),p(e,"role","alert"),p(l,"class","text-muted")},m(c,u){b(c,e,u),k(e,t),k(e,n),k(e,s),d.m(s,null),b(c,o,u),b(c,l,u)},p(c,u){a!==(a=r(c))&&(d.d(1),d=a(c),d&&(d.c(),d.m(s,null)))},d(c){c&&(f(e),f(o),f(l)),d.d()}}}function j(m){let e,t="Request New Verification Email";return{c(){e=v("a"),e.textContent=t,this.h()},l(n){e=h(n,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(e)!=="svelte-e8ivio"&&(e.textContent=t),this.h()},h(){p(e,"href","/auth/resend-verification"),p(e,"class","btn btn-primary")},m(n,s){b(n,e,s)},d(n){n&&f(e)}}}function se(m){let e,t="Email verified successfully!",n,s,o="You can now log in to your account.";return{c(){e=v("strong"),e.textContent=t,n=C(),s=v("p"),s.textContent=o,this.h()},l(l){e=h(l,"STRONG",{"data-svelte-h":!0}),E(e)!=="svelte-8w6q7c"&&(e.textContent=t),n=y(l),s=h(l,"P",{class:!0,"data-svelte-h":!0}),E(s)!=="svelte-1tp2y14"&&(s.textContent=o),this.h()},h(){p(s,"class","mb-0")},m(l,i){b(l,e,i),b(l,n,i),b(l,s,i)},d(l){l&&(f(e),f(n),f(s))}}}function ne(m){let e,t="Email already verified!",n,s,o="You can log in now.";return{c(){e=v("strong"),e.textContent=t,n=C(),s=v("p"),s.textContent=o,this.h()},l(l){e=h(l,"STRONG",{"data-svelte-h":!0}),E(e)!=="svelte-om5mfj"&&(e.textContent=t),n=y(l),s=h(l,"P",{class:!0,"data-svelte-h":!0}),E(s)!=="svelte-mr2mgn"&&(s.textContent=o),this.h()},h(){p(s,"class","mb-0")},m(l,i){b(l,e,i),b(l,n,i),b(l,s,i)},d(l){l&&(f(e),f(n),f(s))}}}function re(m){let e,t,n,s;const o=[ee,$],l=[];function i(r,a){return r[0]?0:1}return e=i(m),t=l[e]=o[e](m),{c(){t.c(),n=L()},l(r){t.l(r),n=L()},m(r,a){l[e].m(r,a),b(r,n,a),s=!0},p(r,[a]){let d=e;e=i(r),e===d?l[e].p(r,a):(U(),P(l[d],1,1,()=>{l[d]=null}),F(),t=l[e],t?t.p(r,a):(t=l[e]=o[e](r),t.c()),T(t,1),t.m(n.parentNode,n))},i(r){s||(T(t),s=!0)},o(r){P(t),s=!1},d(r){r&&f(n),l[e].d(r)}}}function ie(m,e,t){let n;D(m,K,a=>t(5,n=a));let s=!0,o=!1,l="",i=!1,r=!1;return O(async()=>{const a=n.url.searchParams.get("token");if(!a){t(2,l="Invalid verification link"),t(0,s=!1);return}try{const c=await(await fetch(`${W}/functions/v1/auth-verify-email`,{method:"POST",headers:X(),body:JSON.stringify({token:a})})).json();c.success?(t(1,o=!0),t(3,i=c.alreadyVerified||!1),setTimeout(()=>{Q("/auth/login")},3e3)):(t(2,l=c.error||"Verification failed"),t(4,r=c.expired||!1))}catch{t(2,l="Network error. Please try again.")}finally{t(0,s=!1)}}),[s,o,l,i,r]}class de extends H{constructor(e){super(),M(this,e,ie,re,q,{})}}export{de as component};
