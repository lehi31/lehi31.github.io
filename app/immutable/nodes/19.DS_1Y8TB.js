import{s as D,d as c,i as b,t as q,o as O,n as N,q as k,a as h,c as p,k as V,g as E,l as y,e as v,m as C,v as R,w as j,x as A}from"../chunks/XwK7VtW3.js";import{S as G,i as H,t as P,a as T,e as M,d as F,m as Y,c as z,b as B,g as J}from"../chunks/e-rlo9AR.js";import{g as U}from"../chunks/BVhfD6B8.js";import{p as K}from"../chunks/DJto7mnq.js";import{s as Q,b as W}from"../chunks/Bg5r8v_7.js";import{L as X}from"../chunks/BK_LxYuA.js";function Z(d){let e,t,n='<img src="/assets/logo.png" alt="logo" class="logo svelte-aqjxex"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',s;function a(r,o){if(r[1])return te;if(r[2])return ee}let l=a(d),i=l&&l(d);return{c(){e=v("div"),t=v("a"),t.innerHTML=n,s=C(),i&&i.c(),this.h()},l(r){e=p(r,"DIV",{class:!0});var o=V(e);t=p(o,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(t)!=="svelte-1inzn7"&&(t.innerHTML=n),s=y(o),i&&i.l(o),o.forEach(c),this.h()},h(){h(t,"href","/home"),h(t,"class","header-content d-flex align-items-center gap-2 text-decoration-none"),h(e,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-aqjxex")},m(r,o){b(r,e,o),k(e,t),k(e,s),i&&i.m(e,null)},p(r,o){l===(l=a(r))&&i?i.p(r,o):(i&&i.d(1),i=l&&l(r),i&&(i.c(),i.m(e,null)))},i:N,o:N,d(r){r&&c(e),i&&i.d()}}}function $(d){let e,t;return e=new X({props:{message:"Verifying your email..."}}),{c(){B(e.$$.fragment)},l(n){z(e.$$.fragment,n)},m(n,s){Y(e,n,s),t=!0},p:N,i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){P(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ee(d){let e,t,n,s,a,l="Verification Failed",i,r,o,f,u,m,w="Back to Login",g=d[4]&&L();return{c(){e=v("div"),t=v("i"),n=C(),s=v("div"),a=v("strong"),a.textContent=l,i=C(),r=v("p"),o=A(d[2]),f=C(),g&&g.c(),u=C(),m=v("a"),m.textContent=w,this.h()},l(_){e=p(_,"DIV",{class:!0,role:!0});var x=V(e);t=p(x,"I",{class:!0}),V(t).forEach(c),n=y(x),s=p(x,"DIV",{});var I=V(s);a=p(I,"STRONG",{"data-svelte-h":!0}),E(a)!=="svelte-uh34xm"&&(a.textContent=l),i=y(I),r=p(I,"P",{class:!0});var S=V(r);o=j(S,d[2]),S.forEach(c),I.forEach(c),x.forEach(c),f=y(_),g&&g.l(_),u=y(_),m=p(_,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(m)!=="svelte-r5u2t8"&&(m.textContent=w),this.h()},h(){h(t,"class","bi bi-exclamation-triangle-fill"),h(r,"class","mb-0"),h(e,"class","alert alert-danger d-flex align-items-center gap-2"),h(e,"role","alert"),h(m,"href","/auth/login"),h(m,"class","btn btn-link")},m(_,x){b(_,e,x),k(e,t),k(e,n),k(e,s),k(s,a),k(s,i),k(s,r),k(r,o),b(_,f,x),g&&g.m(_,x),b(_,u,x),b(_,m,x)},p(_,x){x&4&&R(o,_[2]),_[4]?g||(g=L(),g.c(),g.m(u.parentNode,u)):g&&(g.d(1),g=null)},d(_){_&&(c(e),c(f),c(u),c(m)),g&&g.d(_)}}}function te(d){let e,t,n,s,a,l,i="Redirecting to login...";function r(u,m){return u[3]?se:le}let o=r(d),f=o(d);return{c(){e=v("div"),t=v("i"),n=C(),s=v("div"),f.c(),a=C(),l=v("p"),l.textContent=i,this.h()},l(u){e=p(u,"DIV",{class:!0,role:!0});var m=V(e);t=p(m,"I",{class:!0}),V(t).forEach(c),n=y(m),s=p(m,"DIV",{});var w=V(s);f.l(w),w.forEach(c),m.forEach(c),a=y(u),l=p(u,"P",{class:!0,"data-svelte-h":!0}),E(l)!=="svelte-1icd19m"&&(l.textContent=i),this.h()},h(){h(t,"class","bi bi-check-circle-fill"),h(e,"class","alert alert-success d-flex align-items-center gap-2"),h(e,"role","alert"),h(l,"class","text-muted")},m(u,m){b(u,e,m),k(e,t),k(e,n),k(e,s),f.m(s,null),b(u,a,m),b(u,l,m)},p(u,m){o!==(o=r(u))&&(f.d(1),f=o(u),f&&(f.c(),f.m(s,null)))},d(u){u&&(c(e),c(a),c(l)),f.d()}}}function L(d){let e,t="Request New Verification Email";return{c(){e=v("a"),e.textContent=t,this.h()},l(n){e=p(n,"A",{href:!0,class:!0,"data-svelte-h":!0}),E(e)!=="svelte-e8ivio"&&(e.textContent=t),this.h()},h(){h(e,"href","/auth/resend-verification"),h(e,"class","btn btn-primary")},m(n,s){b(n,e,s)},d(n){n&&c(e)}}}function le(d){let e,t="Email verified successfully!",n,s,a="You can now log in to your account.";return{c(){e=v("strong"),e.textContent=t,n=C(),s=v("p"),s.textContent=a,this.h()},l(l){e=p(l,"STRONG",{"data-svelte-h":!0}),E(e)!=="svelte-8w6q7c"&&(e.textContent=t),n=y(l),s=p(l,"P",{class:!0,"data-svelte-h":!0}),E(s)!=="svelte-1tp2y14"&&(s.textContent=a),this.h()},h(){h(s,"class","mb-0")},m(l,i){b(l,e,i),b(l,n,i),b(l,s,i)},d(l){l&&(c(e),c(n),c(s))}}}function se(d){let e,t="Email already verified!",n,s,a="You can log in now.";return{c(){e=v("strong"),e.textContent=t,n=C(),s=v("p"),s.textContent=a,this.h()},l(l){e=p(l,"STRONG",{"data-svelte-h":!0}),E(e)!=="svelte-om5mfj"&&(e.textContent=t),n=y(l),s=p(l,"P",{class:!0,"data-svelte-h":!0}),E(s)!=="svelte-mr2mgn"&&(s.textContent=a),this.h()},h(){h(s,"class","mb-0")},m(l,i){b(l,e,i),b(l,n,i),b(l,s,i)},d(l){l&&(c(e),c(n),c(s))}}}function ne(d){let e,t,n,s;const a=[$,Z],l=[];function i(r,o){return r[0]?0:1}return e=i(d),t=l[e]=a[e](d),{c(){t.c(),n=q()},l(r){t.l(r),n=q()},m(r,o){l[e].m(r,o),b(r,n,o),s=!0},p(r,[o]){let f=e;e=i(r),e===f?l[e].p(r,o):(J(),P(l[f],1,1,()=>{l[f]=null}),M(),t=l[e],t?t.p(r,o):(t=l[e]=a[e](r),t.c()),T(t,1),t.m(n.parentNode,n))},i(r){s||(T(t),s=!0)},o(r){P(t),s=!1},d(r){r&&c(n),l[e].d(r)}}}function re(d,e,t){let n=!0,s=!1,a="",l=!1,i=!1;return O(async()=>{const r=K.url.searchParams.get("token");if(!r){t(2,a="Invalid verification link"),t(0,n=!1);return}try{const f=await(await fetch(`${Q}/functions/v1/auth-verify-email`,{method:"POST",headers:W(),body:JSON.stringify({token:r})})).json();f.success?(t(1,s=!0),t(3,l=f.alreadyVerified||!1),setTimeout(()=>{U("/auth/login")},3e3)):(t(2,a=f.error||"Verification failed"),t(4,i=f.expired||!1))}catch{t(2,a="Network error. Please try again.")}finally{t(0,n=!1)}}),[n,s,a,l,i]}class me extends G{constructor(e){super(),H(this,e,re,ne,D,{})}}export{me as component};
