import{s as pe,d as b,i as D,z as P,t as oe,n as te,r as W,a as r,q as f,A as Te,c as p,k as M,g as N,l as E,w as le,e as h,m as I,x as se,v as Le,y as O,S as he}from"../chunks/XwK7VtW3.js";import{S as _e,i as be,t as Q,a as X,g as Ee,e as Ie,d as ge,m as ve,c as ye,b as ke}from"../chunks/e-rlo9AR.js";import{g as we}from"../chunks/Bg5r8v_7.js";import{g as ue}from"../chunks/BVhfD6B8.js";import{p as Me}from"../chunks/DJto7mnq.js";import{L as He}from"../chunks/BK_LxYuA.js";const Ce=!1,Qe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ce},Symbol.toStringTag,{value:"Module"}));function De(i){let e,t,l='<img src="/assets/logo.png" alt="logo" class="logo svelte-1n4t3wo"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',s,o,c,u,n,a,d,m,L,S,j,z,Y=Me.url.searchParams.get("verified")==="pending",F,A,v,B,q,R,y,re='<a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Submit</button>',Z,x,ie,U=Y&&Ue(),k=i[6]&&ce(i);function ne(_,g){return _[1]==="email"?Ne:Ve}let G=ne(i),H=G(i);function ae(_,g){return _[5]?Se:Oe}let J=ae(i),C=J(i),w=i[1]==="email"&&de(),T=i[1]==="email"&&me();return{c(){e=h("div"),t=h("a"),t.innerHTML=l,s=I(),o=h("div"),c=h("button"),u=h("i"),n=se(" Username"),d=I(),m=h("button"),L=h("i"),S=se(" Email"),z=I(),U&&U.c(),F=I(),k&&k.c(),A=I(),v=h("form"),H.c(),B=I(),C.c(),q=I(),w&&w.c(),R=I(),y=h("div"),y.innerHTML=re,Z=I(),T&&T.c(),this.h()},l(_){e=p(_,"DIV",{class:!0});var g=M(e);t=p(g,"A",{href:!0,class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1inzn7"&&(t.innerHTML=l),s=E(g),o=p(g,"DIV",{class:!0,role:!0,"aria-label":!0});var K=M(o);c=p(K,"BUTTON",{type:!0,class:!0});var $=M(c);u=p($,"I",{class:!0}),M(u).forEach(b),n=le($," Username"),$.forEach(b),d=E(K),m=p(K,"BUTTON",{type:!0,class:!0});var ee=M(m);L=p(ee,"I",{class:!0}),M(L).forEach(b),S=le(ee," Email"),ee.forEach(b),K.forEach(b),z=E(g),U&&U.l(g),F=E(g),k&&k.l(g),A=E(g),v=p(g,"FORM",{class:!0});var V=M(v);H.l(V),B=E(V),C.l(V),q=E(V),w&&w.l(V),R=E(V),y=p(V,"DIV",{class:!0,"data-svelte-h":!0}),N(y)!=="svelte-1jydk9b"&&(y.innerHTML=re),V.forEach(b),Z=E(g),T&&T.l(g),g.forEach(b),this.h()},h(){r(t,"href","/home"),r(t,"class","header-content d-flex align-items-center gap-2 text-decoration-none svelte-1n4t3wo"),r(u,"class","bi bi-person"),r(c,"type","button"),r(c,"class",a="btn "+(i[1]==="username"?"btn-primary":"btn-outline-primary")),r(L,"class","bi bi-envelope"),r(m,"type","button"),r(m,"class",j="btn "+(i[1]==="email"?"btn-primary":"btn-outline-primary")),r(o,"class","btn-group w-100"),r(o,"role","group"),r(o,"aria-label","Login method"),r(y,"class","d-flex justify-content-between"),r(v,"class","d-flex gap-3 flex-column"),r(e,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-1n4t3wo")},m(_,g){D(_,e,g),f(e,t),f(e,s),f(e,o),f(o,c),f(c,u),f(c,n),f(o,d),f(o,m),f(m,L),f(m,S),f(e,z),U&&U.m(e,null),f(e,F),k&&k.m(e,null),f(e,A),f(e,v),H.m(v,null),f(v,B),C.m(v,null),f(v,q),w&&w.m(v,null),f(v,R),f(v,y),f(e,Z),T&&T.m(e,null),x||(ie=[P(c,"click",i[12]),P(m,"click",i[13]),P(v,"submit",Te(i[8]))],x=!0)},p(_,g){g&2&&a!==(a="btn "+(_[1]==="username"?"btn-primary":"btn-outline-primary"))&&r(c,"class",a),g&2&&j!==(j="btn "+(_[1]==="email"?"btn-primary":"btn-outline-primary"))&&r(m,"class",j),_[6]?k?k.p(_,g):(k=ce(_),k.c(),k.m(e,A)):k&&(k.d(1),k=null),G===(G=ne(_))&&H?H.p(_,g):(H.d(1),H=G(_),H&&(H.c(),H.m(v,B))),J===(J=ae(_))&&C?C.p(_,g):(C.d(1),C=J(_),C&&(C.c(),C.m(v,q))),_[1]==="email"?w||(w=de(),w.c(),w.m(v,R)):w&&(w.d(1),w=null),_[1]==="email"?T||(T=me(),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:te,o:te,d(_){_&&b(e),U&&U.d(),k&&k.d(),H.d(),C.d(),w&&w.d(),T&&T.d(),x=!1,W(ie)}}}function Pe(i){let e,t;return e=new He({props:{message:i[6]}}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,s){ve(e,l,s),t=!0},p(l,s){const o={};s&64&&(o.message=l[6]),e.$set(o)},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Ue(i){let e,t='<i class="bi bi-info-circle-fill"></i> <div>Please check your email and click the verification link before logging in.</div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),N(e)!=="svelte-1jocvpv"&&(e.innerHTML=t),this.h()},h(){r(e,"class","alert alert-info d-flex align-items-center gap-2"),r(e,"role","alert")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function ce(i){let e,t,l,s,o,c,u=i[7]&&fe();return{c(){e=h("div"),t=h("i"),l=I(),s=h("div"),o=se(i[6]),c=I(),u&&u.c(),this.h()},l(n){e=p(n,"DIV",{class:!0,role:!0});var a=M(e);t=p(a,"I",{class:!0}),M(t).forEach(b),l=E(a),s=p(a,"DIV",{});var d=M(s);o=le(d,i[6]),c=E(d),u&&u.l(d),d.forEach(b),a.forEach(b),this.h()},h(){r(t,"class","bi bi-exclamation-triangle-fill"),r(e,"class","alert alert-danger d-flex align-items-center gap-2"),r(e,"role","alert")},m(n,a){D(n,e,a),f(e,t),f(e,l),f(e,s),f(s,o),f(s,c),u&&u.m(s,null)},p(n,a){a&64&&Le(o,n[6]),n[7]?u||(u=fe(),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},d(n){n&&b(e),u&&u.d()}}}function fe(i){let e,t="Resend verification email";return{c(){e=h("a"),e.textContent=t,this.h()},l(l){e=p(l,"A",{href:!0,class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1r8sp99"&&(e.textContent=t),this.h()},h(){r(e,"href","/auth/resend-verification"),r(e,"class","alert-link")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function Ve(i){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","text"),r(e,"class","form-control"),r(e,"placeholder","Username"),r(e,"id","user-name"),r(e,"aria-describedby","username")},m(s,o){D(s,e,o),O(e,i[3]),t||(l=[P(e,"input",i[15]),he(i[11].call(null,e))],t=!0)},p(s,o){o&8&&e.value!==s[3]&&O(e,s[3])},d(s){s&&b(e),t=!1,W(l)}}}function Ne(i){let e,t,l;return{c(){e=h("input"),this.h()},l(s){e=p(s,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),this.h()},h(){r(e,"type","email"),r(e,"class","form-control"),r(e,"placeholder","Email"),r(e,"id","email"),r(e,"aria-describedby","email")},m(s,o){D(s,e,o),O(e,i[2]),t||(l=[P(e,"input",i[14]),he(i[11].call(null,e))],t=!0)},p(s,o){o&4&&e.value!==s[2]&&O(e,s[2])},d(s){s&&b(e),t=!1,W(l)}}}function Oe(i){let e,t,l,s,o='<i class="bi bi-eye"></i>',c,u;return{c(){e=h("div"),t=h("input"),l=I(),s=h("button"),s.innerHTML=o,this.h()},l(n){e=p(n,"DIV",{class:!0});var a=M(e);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=E(a),s=p(a,"BUTTON",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-mjb1ay"&&(s.innerHTML=o),a.forEach(b),this.h()},h(){r(t,"type","password"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(n,a){D(n,e,a),f(e,t),O(t,i[4]),f(e,l),f(e,s),c||(u=[P(t,"input",i[17]),P(s,"click",i[9])],c=!0)},p(n,a){a&16&&t.value!==n[4]&&O(t,n[4])},d(n){n&&b(e),c=!1,W(u)}}}function Se(i){let e,t,l,s,o='<i class="bi bi-eye-slash"></i>',c,u;return{c(){e=h("div"),t=h("input"),l=I(),s=h("button"),s.innerHTML=o,this.h()},l(n){e=p(n,"DIV",{class:!0});var a=M(e);t=p(a,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),l=E(a),s=p(a,"BUTTON",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-63xbvi"&&(s.innerHTML=o),a.forEach(b),this.h()},h(){r(t,"type","text"),r(t,"class","form-control"),r(t,"placeholder","password"),r(t,"id","password"),r(t,"aria-describedby","password"),r(s,"class","input-group-text"),r(e,"class","input-group")},m(n,a){D(n,e,a),f(e,t),O(t,i[4]),f(e,l),f(e,s),c||(u=[P(t,"input",i[16]),P(s,"click",i[9])],c=!0)},p(n,a){a&16&&t.value!==n[4]&&O(t,n[4])},d(n){n&&b(e),c=!1,W(u)}}}function de(i){let e,t='<a href="/auth/forgot-password" class="link-primary small">Forgot password?</a>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-k22wwf"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-end")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function me(i){let e,t=`<small class="text-muted">Don&#39;t have an account?
					<a href="/auth/signup" class="link-primary">Sign up</a></small>`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1gmdti8"&&(e.innerHTML=t),this.h()},h(){r(e,"class","text-center")},m(l,s){D(l,e,s)},d(l){l&&b(e)}}}function je(i){let e,t,l,s,o,c;const u=[Pe,De],n=[];function a(d,m){return d[0]?0:1}return e=a(i),t=n[e]=u[e](i),{c(){t.c(),l=oe()},l(d){t.l(d),l=oe()},m(d,m){n[e].m(d,m),D(d,l,m),s=!0,o||(c=P(window,"keydown",i[10]),o=!0)},p(d,[m]){let L=e;e=a(d),e===L?n[e].p(d,m):(Ee(),Q(n[L],1,1,()=>{n[L]=null}),Ie(),t=n[e],t?t.p(d,m):(t=n[e]=u[e](d),t.c()),X(t,1),t.m(l.parentNode,l))},i(d){s||(X(t),s=!0)},o(d){Q(t),s=!1},d(d){d&&b(l),n[e].d(d),o=!1,c()}}}function Ae(i,e,t){const{actions:{login:l,loginWithEmail:s}}=we();let o=!1,c="username",u="",n="",a="",d=!1,m="",L=!1;const S=async()=>{if(t(0,o=!0),t(6,m=""),t(7,L=!1),c==="email"){if(!u||!a){t(6,m="Email and password are required"),t(0,o=!1);return}const y=await s(u,a);y.success?(t(6,m="Logging you in ..."),setTimeout(()=>{ue("/home")},1e3)):(y.code==="EMAIL_NOT_VERIFIED"?(t(6,m="Please verify your email first."),t(7,L=!0)):t(6,m=y.error||"Login failed, please try again"),setTimeout(()=>{t(0,o=!1)},1e3))}else{if(!n||!a){t(6,m="Username and password are required"),t(0,o=!1);return}await l(n,a)?(t(6,m="Logging you in ..."),setTimeout(()=>{ue("/home")},1e3)):(t(6,m="Login failed, please try again"),setTimeout(()=>{t(0,o=!1)},1e3))}},j=()=>{t(5,d=!d)},z=y=>{y.key==="Enter"&&S()},Y=y=>{y.focus()},F=()=>t(1,c="username"),A=()=>t(1,c="email");function v(){u=this.value,t(2,u)}function B(){n=this.value,t(3,n)}function q(){a=this.value,t(4,a)}function R(){a=this.value,t(4,a)}return[o,c,u,n,a,d,m,L,S,j,z,Y,F,A,v,B,q,R]}class Be extends _e{constructor(e){super(),be(this,e,Ae,je,pe,{})}}function qe(i){let e,t;return e=new Be({}),{c(){ke(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,s){ve(e,l,s),t=!0},p:te,i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Re(i){const{stores:{pageName:e}}=we();return e.set("Auth - Login"),[]}class Xe extends _e{constructor(e){super(),be(this,e,Re,qe,pe,{})}}export{Xe as component,Qe as universal};
