import{S as ie,i as ce,s as fe,C as ne,d as g,K as le,h as R,v as _,f as O,j as S,k as A,x as Q,l as I,o as k,p as P,O as x,W as ee,U as ae,E as ze,N as X,P as W,Q as re,r as q,y as U,z as j,a3 as $e,a4 as xe,t as Z,a as Y,H as De,G as we,A as Se,e as ue,m as de,n as _e,q as me}from"../chunks/C5twpB8P.js";import"../chunks/IHki7fMi.js";import{P as et}from"../chunks/BP8_DY6H.js";import{e as K}from"../chunks/COJ7dMie.js";import{R as ge}from"../chunks/1t9PYzFY.js";import{s as Ke}from"../chunks/Bnt-d026.js";import{w as tt}from"../chunks/DzDB5CMn.js";import{b as ke,f as F,g as lt}from"../chunks/BVnRNqiH.js";function oe(n,e){const l=ke(n),t=ke(e);return+l==+t}const nt=!0,Mt=Object.freeze(Object.defineProperty({__proto__:null,prerender:nt},Symbol.toStringTag,{value:"Module"})),$={SacramentBreadAssignments:"Sacrament Bread Assignments",SacramentPreparationAssignments:"Sacrament Preparation Assignments"},Qe=["Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],Ye=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"}],We={Sundays:({start_date:n,until:e})=>new ge({freq:ge.WEEKLY,dtstart:n,until:e,byweekday:[ge.SU]})},Je=(n,e)=>n(e).all(),Xe=n=>{const e=n.getMonth(),l=n.getFullYear();let t=0;for(let i=1;i<=31;i++){const o=new Date(l,e,i);if(o.getMonth()!==e)break;if(o.getDay()===0&&(t++,o.getDate()===n.getDate())){const u=["st","nd","rd","th"],v=t<=3?u[t-1]:u[3];return`${t}${v}`}}return""},st=tt([]);async function pe(n){const{data:e,error:l}=await Ke.from("assignments").select("*").eq("list_name",n).order("date");if(l)throw l;const t=e||[];return st.set(t),t}async function Ze(n,e,l){const{error:t}=await Ke.from("assignments").upsert([{list_name:n,date:e,overridden_member:l,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(t)throw t;await pe(n)}function Te(n,e,l){const t=n.slice();return t[13]=e[l],t[14]=e,t[15]=l,t}function Ce(n,e,l){const t=n.slice();return t[16]=e[l],t}function at(n){let e,l=F(n[13].date,"MMM dd")+"",t,i,o,u=n[13].sundayNumber+"",v,c,r=F(n[13].date,"EEEE")+"",m,a,s,f,w,y=(n[13].overridden_member?n[13].overridden_member:n[13].member)+"",T,M,C=n[13].overridden_member?"*":"",p,D,h=n[0]&&Ae();return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),f=k("div"),w=k("span"),T=j(y),M=P(),p=j(C),D=P(),h&&h.c(),this.h()},l(d){e=S(d,"TD",{});var b=A(e);t=U(b,l),i=I(b),o=S(b,"SMALL",{class:!0});var E=A(o);v=U(E,u),c=I(E),m=U(E,r),E.forEach(g),b.forEach(g),a=I(d),s=S(d,"TD",{});var B=A(s);f=S(B,"DIV",{class:!0});var H=A(f);w=S(H,"SPAN",{});var L=A(w);T=U(L,y),M=I(L),p=U(L,C),L.forEach(g),D=I(H),h&&h.l(H),H.forEach(g),B.forEach(g),this.h()},h(){O(o,"class","fw-lighter"),O(f,"class","d-flex justify-content-between")},m(d,b){R(d,e,b),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(d,a,b),R(d,s,b),_(s,f),_(f,w),_(w,T),_(w,M),_(w,p),_(f,D),h&&h.m(f,null)},p(d,b){b&4&&l!==(l=F(d[13].date,"MMM dd")+"")&&q(t,l),b&4&&u!==(u=d[13].sundayNumber+"")&&q(v,u),b&4&&r!==(r=F(d[13].date,"EEEE")+"")&&q(m,r),b&4&&y!==(y=(d[13].overridden_member?d[13].overridden_member:d[13].member)+"")&&q(T,y),b&4&&C!==(C=d[13].overridden_member?"*":"")&&q(p,C),d[0]?h||(h=Ae(),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},d(d){d&&(g(e),g(a),g(s)),h&&h.d()}}}function rt(n){let e,l=F(n[13].date,"MMM dd")+"",t,i,o,u=n[13].sundayNumber+"",v,c,r=F(n[13].date,"EEEE")+"",m,a,s,f=(n[13].event??"")+"",w,y,T,M,C,p="No Sacrament Services";return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),w=j(f),y=P(),T=k("br"),M=P(),C=k("small"),C.textContent=p,this.h()},l(D){e=S(D,"TD",{});var h=A(e);t=U(h,l),i=I(h),o=S(h,"SMALL",{class:!0});var d=A(o);v=U(d,u),c=I(d),m=U(d,r),d.forEach(g),h.forEach(g),a=I(D),s=S(D,"TD",{});var b=A(s);w=U(b,f),y=I(b),T=S(b,"BR",{}),M=I(b),C=S(b,"SMALL",{class:!0,"data-svelte-h":!0}),Q(C)!=="svelte-2r8039"&&(C.textContent=p),b.forEach(g),this.h()},h(){O(o,"class","fw-lighter"),O(C,"class","fw-lighter")},m(D,h){R(D,e,h),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(D,a,h),R(D,s,h),_(s,w),_(s,y),_(s,T),_(s,M),_(s,C)},p(D,h){h&4&&l!==(l=F(D[13].date,"MMM dd")+"")&&q(t,l),h&4&&u!==(u=D[13].sundayNumber+"")&&q(v,u),h&4&&r!==(r=F(D[13].date,"EEEE")+"")&&q(m,r),h&4&&f!==(f=(D[13].event??"")+"")&&q(w,f)},d(D){D&&(g(e),g(a),g(s))}}}function Ae(n){let e;return{c(){e=k("i"),this.h()},l(l){e=S(l,"I",{class:!0}),A(e).forEach(g),this.h()},h(){O(e,"class","bi bi-pencil-square")},m(l,t){R(l,e,t)},d(l){l&&g(e)}}}function Me(n){let e,l,t,i,o="Change assignment to:",u,v,c,r="Default",m,a,s,f="Save",w,y,T,M,C=K(n[1]),p=[];for(let d=0;d<C.length;d+=1)p[d]=Oe(Ce(n,C,d));function D(){n[9].call(v,n[14],n[15])}function h(){return n[10](n[13],n[15])}return{c(){e=k("tr"),l=k("td"),t=k("div"),i=k("div"),i.textContent=o,u=P(),v=k("select"),c=k("option"),c.textContent=r;for(let d=0;d<p.length;d+=1)p[d].c();m=P(),a=k("div"),s=k("button"),s.textContent=f,w=P(),this.h()},l(d){e=S(d,"TR",{class:!0});var b=A(e);l=S(b,"TD",{colspan:!0});var E=A(l);t=S(E,"DIV",{class:!0});var B=A(t);i=S(B,"DIV",{"data-svelte-h":!0}),Q(i)!=="svelte-1t5xiq"&&(i.textContent=o),u=I(B),v=S(B,"SELECT",{class:!0});var H=A(v);c=S(H,"OPTION",{"data-svelte-h":!0}),Q(c)!=="svelte-zvp3al"&&(c.textContent=r);for(let J=0;J<p.length;J+=1)p[J].l(H);H.forEach(g),m=I(B),a=S(B,"DIV",{class:!0});var L=A(a);s=S(L,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-rtvwan"&&(s.textContent=f),L.forEach(g),B.forEach(g),E.forEach(g),w=I(b),b.forEach(g),this.h()},h(){c.__value="",W(c,c.__value),O(v,"class","form-select form-control-sm"),n[13].overridden_member===void 0&&re(D),O(s,"class","btn btn-sm btn-primary"),O(a,"class","d-flex justify-content-end"),O(t,"class","d-flex flex-column gap-2 p-2"),O(l,"colspan","2"),O(e,"class",y=n[3][`row-${n[15]}`]?"table-light":"d-none")},m(d,b){R(d,e,b),_(e,l),_(l,t),_(t,i),_(t,u),_(t,v),_(v,c);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(v,null);X(v,n[13].overridden_member,!0),_(t,m),_(t,a),_(a,s),_(e,w),T||(M=[x(v,"change",D),x(s,"click",h)],T=!0)},p(d,b){if(n=d,b&6){C=K(n[1]);let E;for(E=0;E<C.length;E+=1){const B=Ce(n,C,E);p[E]?p[E].p(B,b):(p[E]=Oe(B),p[E].c(),p[E].m(v,null))}for(;E<p.length;E+=1)p[E].d(1);p.length=C.length}b&6&&X(v,n[13].overridden_member),b&8&&y!==(y=n[3][`row-${n[15]}`]?"table-light":"d-none")&&O(e,"class",y)},d(d){d&&g(e),le(p,d),T=!1,ze(M)}}}function Ne(n){let e,l=n[16]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[16],W(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[16]+"")&&q(t,l),u&2&&i!==(i=o[16])&&(e.__value=i,W(e,e.__value))},d(o){o&&g(e)}}}function Oe(n){let e,l=n[16]!==n[13].member&&Ne(n);return{c(){l&&l.c(),e=ee()},l(t){l&&l.l(t),e=ee()},m(t,i){l&&l.m(t,i),R(t,e,i)},p(t,i){t[16]!==t[13].member?l?l.p(t,i):(l=Ne(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(t){t&&g(e),l&&l.d(t)}}}function Le(n){let e,l,t,i,o,u;function v(s,f){return s[13]?.event?rt:at}let c=v(n),r=c(n);function m(){return n[8](n[15])}let a=n[0]&&Me(n);return{c(){e=k("tr"),r.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"TR",{class:!0});var f=A(e);r.l(f),f.forEach(g),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){O(e,"class",l=n[13].member===null?"table-secondary":"")},m(s,f){R(s,e,f),r.m(e,null),R(s,t,f),a&&a.m(s,f),R(s,i,f),o||(u=x(e,"click",m),o=!0)},p(s,f){n=s,c===(c=v(n))&&r?r.p(n,f):(r.d(1),r=c(n),r&&(r.c(),r.m(e,null))),f&6&&l!==(l=n[13].member===null?"table-secondary":"")&&O(e,"class",l),n[0]?a?a.p(n,f):(a=Me(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(s){s&&(g(e),g(t),g(i)),r.d(),a&&a.d(s),o=!1,u()}}}function ot(n){let e,l,t,i='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',o,u,v=K(n[2]),c=[];for(let r=0;r<v.length;r+=1)c[r]=Le(Te(n,v,r));return{c(){e=k("div"),l=k("table"),t=k("thead"),t.innerHTML=i,o=P(),u=k("tbody");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var m=A(e);l=S(m,"TABLE",{class:!0});var a=A(l);t=S(a,"THEAD",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-1c8l31s"&&(t.innerHTML=i),o=I(a),u=S(a,"TBODY",{});var s=A(u);for(let f=0;f<c.length;f+=1)c[f].l(s);s.forEach(g),a.forEach(g),m.forEach(g),this.h()},h(){O(t,"class","table-dark"),O(l,"class","table"),O(e,"class","table-responsive")},m(r,m){R(r,e,m),_(e,l),_(l,t),_(l,o),_(l,u);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(u,null)},p(r,[m]){if(m&63){v=K(r[2]);let a;for(a=0;a<v.length;a+=1){const s=Te(r,v,a);c[a]?c[a].p(s,m):(c[a]=Le(s),c[a].c(),c[a].m(u,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=v.length}},i:ne,o:ne,d(r){r&&g(e),le(c,r)}}}function it(n,e,l){let{editable:t=!1}=e,{listName:i="Some List"}=e,{names:o=[]}=e,{excludedDates:u=[]}=e,v=[],c=[];const r=async(T=new Date(2025,0,1,0,0,0),M=new Date(2025,11,31,0,0,0))=>{const C={start_date:T,until:M};v=Je(We.Sundays,C);const p=new Date;p.setHours(0,0,0,0);const D=v.map((d,b)=>{const E=u.find(B=>oe(d,B.date));return{member:E?null:o[b%o.length],date:d,sundayNumber:Xe(d),event:E?E.event:void 0,overridden_member:null}}).filter(d=>d.date>=p),h=await pe(i);return D.map(d=>{const b=h.find(E=>oe(new Date(E.date),d.date));return{...d,overridden_member:b?b.overridden_member:null}})},m=T=>{t&&l(3,s[`row-${T}`]=!s[`row-${T}`],s)},a=async(T,M)=>{const C=T.overridden_member||null;await Ze(i,T.date.toISOString(),C),l(3,s[M]=!s[M],s),r().then(p=>{l(2,c=p)})},s={},f=T=>m(T);function w(T,M){T[M].overridden_member=ae(this),l(2,c),l(1,o)}const y=(T,M)=>a(T,`row-${M}`);return n.$$set=T=>{"editable"in T&&l(0,t=T.editable),"listName"in T&&l(6,i=T.listName),"names"in T&&l(1,o=T.names),"excludedDates"in T&&l(7,u=T.excludedDates)},r().then(T=>{l(2,c=T)}),[t,o,c,s,m,a,i,u,f,w,y]}class ct extends ie{constructor(e){super(),ce(this,e,it,ot,fe,{editable:0,listName:6,names:1,excludedDates:7})}}function ye(n,e,l){const t=n.slice();return t[16]=e[l],t[17]=e,t[18]=l,t}function Ie(n,e,l){const t=n.slice();return t[19]=e[l],t}function Pe(n,e,l){const t=n.slice();return t[19]=e[l],t}function ft(n){let e,l=F(n[16].date,"MMM dd")+"",t,i,o,u=n[16].sundayNumber+"",v,c,r=F(n[16].date,"EEEE")+"",m,a,s,f,w,y,T=n[7](n[16].overridden_member?n[16].overridden_member:n[16].member)+"",M,C=n[16].overridden_member?"*":"",p,D,h=n[0]&&Re();return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),f=k("div"),w=k("span"),y=new xe(!1),M=P(),p=j(C),D=P(),h&&h.c(),this.h()},l(d){e=S(d,"TD",{});var b=A(e);t=U(b,l),i=I(b),o=S(b,"SMALL",{class:!0});var E=A(o);v=U(E,u),c=I(E),m=U(E,r),E.forEach(g),b.forEach(g),a=I(d),s=S(d,"TD",{});var B=A(s);f=S(B,"DIV",{class:!0});var H=A(f);w=S(H,"SPAN",{});var L=A(w);y=$e(L,!1),M=I(L),p=U(L,C),L.forEach(g),D=I(H),h&&h.l(H),H.forEach(g),B.forEach(g),this.h()},h(){O(o,"class","fw-lighter"),y.a=M,O(f,"class","d-flex justify-content-between")},m(d,b){R(d,e,b),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(d,a,b),R(d,s,b),_(s,f),_(f,w),y.m(T,w),_(w,M),_(w,p),_(f,D),h&&h.m(f,null)},p(d,b){b&4&&l!==(l=F(d[16].date,"MMM dd")+"")&&q(t,l),b&4&&u!==(u=d[16].sundayNumber+"")&&q(v,u),b&4&&r!==(r=F(d[16].date,"EEEE")+"")&&q(m,r),b&4&&T!==(T=d[7](d[16].overridden_member?d[16].overridden_member:d[16].member)+"")&&y.p(T),b&4&&C!==(C=d[16].overridden_member?"*":"")&&q(p,C),d[0]?h||(h=Re(),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},d(d){d&&(g(e),g(a),g(s)),h&&h.d()}}}function ut(n){let e,l=F(n[16].date,"MMM dd")+"",t,i,o,u=n[16].sundayNumber+"",v,c,r=F(n[16].date,"EEEE")+"",m,a,s,f=(n[16].event??"")+"",w,y,T,M,C,p="No Sacrament Services";return{c(){e=k("td"),t=j(l),i=P(),o=k("small"),v=j(u),c=P(),m=j(r),a=P(),s=k("td"),w=j(f),y=P(),T=k("br"),M=P(),C=k("small"),C.textContent=p,this.h()},l(D){e=S(D,"TD",{});var h=A(e);t=U(h,l),i=I(h),o=S(h,"SMALL",{class:!0});var d=A(o);v=U(d,u),c=I(d),m=U(d,r),d.forEach(g),h.forEach(g),a=I(D),s=S(D,"TD",{});var b=A(s);w=U(b,f),y=I(b),T=S(b,"BR",{}),M=I(b),C=S(b,"SMALL",{class:!0,"data-svelte-h":!0}),Q(C)!=="svelte-2r8039"&&(C.textContent=p),b.forEach(g),this.h()},h(){O(o,"class","fw-lighter"),O(C,"class","fw-lighter")},m(D,h){R(D,e,h),_(e,t),_(e,i),_(e,o),_(o,v),_(o,c),_(o,m),R(D,a,h),R(D,s,h),_(s,w),_(s,y),_(s,T),_(s,M),_(s,C)},p(D,h){h&4&&l!==(l=F(D[16].date,"MMM dd")+"")&&q(t,l),h&4&&u!==(u=D[16].sundayNumber+"")&&q(v,u),h&4&&r!==(r=F(D[16].date,"EEEE")+"")&&q(m,r),h&4&&f!==(f=(D[16].event??"")+"")&&q(w,f)},d(D){D&&(g(e),g(a),g(s))}}}function Re(n){let e;return{c(){e=k("i"),this.h()},l(l){e=S(l,"I",{class:!0}),A(e).forEach(g),this.h()},h(){O(e,"class","bi bi-pencil-square")},m(l,t){R(l,e,t)},d(l){l&&g(e)}}}function Be(n){let e,l,t,i,o="Change assignments:",u,v,c,r,m="Default",a,s,f,w="Default",y,T,M,C="Save",p,D,h,d,b=K(n[1]),E=[];for(let V=0;V<b.length;V+=1)E[V]=Ve(Pe(n,b,V));function B(){n[11].call(c,n[18])}let H=K(n[1]),L=[];for(let V=0;V<H.length;V+=1)L[V]=He(Ie(n,H,V));function J(){n[12].call(s,n[18])}function he(){return n[13](n[16],n[18])}return{c(){e=k("tr"),l=k("td"),t=k("div"),i=k("div"),i.textContent=o,u=P(),v=k("div"),c=k("select"),r=k("option"),r.textContent=m;for(let V=0;V<E.length;V+=1)E[V].c();a=P(),s=k("select"),f=k("option"),f.textContent=w;for(let V=0;V<L.length;V+=1)L[V].c();y=P(),T=k("div"),M=k("button"),M.textContent=C,p=P(),this.h()},l(V){e=S(V,"TR",{class:!0});var G=A(e);l=S(G,"TD",{colspan:!0});var N=A(l);t=S(N,"DIV",{class:!0});var z=A(t);i=S(z,"DIV",{"data-svelte-h":!0}),Q(i)!=="svelte-eq75xm"&&(i.textContent=o),u=I(z),v=S(z,"DIV",{class:!0});var se=A(v);c=S(se,"SELECT",{class:!0});var ve=A(c);r=S(ve,"OPTION",{"data-svelte-h":!0}),Q(r)!=="svelte-zvp3al"&&(r.textContent=m);for(let te=0;te<E.length;te+=1)E[te].l(ve);ve.forEach(g),a=I(se),s=S(se,"SELECT",{class:!0});var be=A(s);f=S(be,"OPTION",{"data-svelte-h":!0}),Q(f)!=="svelte-zvp3al"&&(f.textContent=w);for(let te=0;te<L.length;te+=1)L[te].l(be);be.forEach(g),se.forEach(g),y=I(z),T=S(z,"DIV",{class:!0});var Ee=A(T);M=S(Ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(M)!=="svelte-rtvwan"&&(M.textContent=C),Ee.forEach(g),z.forEach(g),N.forEach(g),p=I(G),G.forEach(g),this.h()},h(){r.__value="",W(r,r.__value),O(c,"class","form-select form-control-sm"),n[3][`row-${n[18]}`].first===void 0&&re(B),f.__value="",W(f,f.__value),O(s,"class","form-select form-control-sm"),n[3][`row-${n[18]}`].second===void 0&&re(J),O(v,"class","d-flex gap-2"),O(M,"class","btn btn-sm btn-primary"),O(T,"class","d-flex justify-content-end"),O(t,"class","d-flex flex-column gap-2 p-2"),O(l,"colspan","2"),O(e,"class",D=n[4][`row-${n[18]}`]?"table-light":"d-none")},m(V,G){R(V,e,G),_(e,l),_(l,t),_(t,i),_(t,u),_(t,v),_(v,c),_(c,r);for(let N=0;N<E.length;N+=1)E[N]&&E[N].m(c,null);X(c,n[3][`row-${n[18]}`].first,!0),_(v,a),_(v,s),_(s,f);for(let N=0;N<L.length;N+=1)L[N]&&L[N].m(s,null);X(s,n[3][`row-${n[18]}`].second,!0),_(t,y),_(t,T),_(T,M),_(e,p),h||(d=[x(c,"change",B),x(s,"change",J),x(M,"click",he)],h=!0)},p(V,G){if(n=V,G&2){b=K(n[1]);let N;for(N=0;N<b.length;N+=1){const z=Pe(n,b,N);E[N]?E[N].p(z,G):(E[N]=Ve(z),E[N].c(),E[N].m(c,null))}for(;N<E.length;N+=1)E[N].d(1);E.length=b.length}if(G&10&&X(c,n[3][`row-${n[18]}`].first),G&2){H=K(n[1]);let N;for(N=0;N<H.length;N+=1){const z=Ie(n,H,N);L[N]?L[N].p(z,G):(L[N]=He(z),L[N].c(),L[N].m(s,null))}for(;N<L.length;N+=1)L[N].d(1);L.length=H.length}G&10&&X(s,n[3][`row-${n[18]}`].second),G&16&&D!==(D=n[4][`row-${n[18]}`]?"table-light":"d-none")&&O(e,"class",D)},d(V){V&&g(e),le(E,V),le(L,V),h=!1,ze(d)}}}function Ve(n){let e,l=n[19]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[19],W(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[19]+"")&&q(t,l),u&2&&i!==(i=o[19])&&(e.__value=i,W(e,e.__value))},d(o){o&&g(e)}}}function He(n){let e,l=n[19]+"",t,i;return{c(){e=k("option"),t=j(l),this.h()},l(o){e=S(o,"OPTION",{});var u=A(e);t=U(u,l),u.forEach(g),this.h()},h(){e.__value=i=n[19],W(e,e.__value)},m(o,u){R(o,e,u),_(e,t)},p(o,u){u&2&&l!==(l=o[19]+"")&&q(t,l),u&2&&i!==(i=o[19])&&(e.__value=i,W(e,e.__value))},d(o){o&&g(e)}}}function Ue(n){let e,l,t,i,o,u;function v(s,f){return s[16]?.event?ut:ft}let c=v(n),r=c(n);function m(){return n[10](n[18])}let a=n[0]&&Be(n);return{c(){e=k("tr"),r.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"TR",{class:!0});var f=A(e);r.l(f),f.forEach(g),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){O(e,"class",l=n[16].member===null?"table-secondary":"")},m(s,f){R(s,e,f),r.m(e,null),R(s,t,f),a&&a.m(s,f),R(s,i,f),o||(u=x(e,"click",m),o=!0)},p(s,f){n=s,c===(c=v(n))&&r?r.p(n,f):(r.d(1),r=c(n),r&&(r.c(),r.m(e,null))),f&4&&l!==(l=n[16].member===null?"table-secondary":"")&&O(e,"class",l),n[0]?a?a.p(n,f):(a=Be(n),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},d(s){s&&(g(e),g(t),g(i)),r.d(),a&&a.d(s),o=!1,u()}}}function dt(n){let e,l,t,i='<tr><td class="small">Date</td> <td class="small">Assignments</td></tr>',o,u,v=K(n[2]),c=[];for(let r=0;r<v.length;r+=1)c[r]=Ue(ye(n,v,r));return{c(){e=k("div"),l=k("table"),t=k("thead"),t.innerHTML=i,o=P(),u=k("tbody");for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=S(r,"DIV",{class:!0});var m=A(e);l=S(m,"TABLE",{class:!0});var a=A(l);t=S(a,"THEAD",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-mvygor"&&(t.innerHTML=i),o=I(a),u=S(a,"TBODY",{});var s=A(u);for(let f=0;f<c.length;f+=1)c[f].l(s);s.forEach(g),a.forEach(g),m.forEach(g),this.h()},h(){O(t,"class","table-dark"),O(l,"class","table"),O(e,"class","table-responsive")},m(r,m){R(r,e,m),_(e,l),_(l,t),_(l,o),_(l,u);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(u,null)},p(r,[m]){if(m&255){v=K(r[2]);let a;for(a=0;a<v.length;a+=1){const s=ye(r,v,a);c[a]?c[a].p(s,m):(c[a]=Ue(s),c[a].c(),c[a].m(u,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=v.length}},i:ne,o:ne,d(r){r&&g(e),le(c,r)}}}function _t(n,e,l){let{editable:t=!1}=e,{listName:i="Some List"}=e,{names:o=[]}=e,{excludedDates:u=[]}=e,v=[],c=[],r={};const m=async(p=new Date(2025,0,1,0,0,0),D=new Date(2025,11,31,0,0,0))=>{const h={start_date:p,until:D};v=Je(We.Sundays,h);const d=new Date;d.setHours(0,0,0,0);const b=v.map((B,H)=>{const L=u.find(V=>oe(B,V.date)),J=o[H%o.length],he=o.length>1?o[(H+1)%o.length]:"";return{member:L?null:`${J}, ${he}`,date:B,sundayNumber:Xe(B),event:L?L.event:void 0,overridden_member:null}}).filter(B=>B.date>=d),E=await pe(i);return b.map(B=>{const H=E.find(L=>oe(new Date(L.date),B.date));return{...B,overridden_member:H?H.overridden_member:null}})},a=p=>{if(!t)return;const D=`row-${p}`;l(4,f[D]=!f[D],f)},s=async(p,D)=>{const{first:h,second:d}=r[D];let b="";h&&d?b=`${h}, ${d}`:(h||d)&&(b=h||d);const E=b.trim()===""?null:b;p.overridden_member=E,await Ze(i,p.date.toISOString(),E),l(4,f[D]=!f[D],f),m().then(B=>{l(2,c=B)})},f={},w=p=>p?p.split(",").join("<br />"):"",y=p=>a(p);function T(p){r[`row-${p}`].first=ae(this),l(3,r),l(2,c),l(0,t),l(1,o)}function M(p){r[`row-${p}`].second=ae(this),l(3,r),l(2,c),l(0,t),l(1,o)}const C=(p,D)=>s(p,`row-${D}`);return n.$$set=p=>{"editable"in p&&l(0,t=p.editable),"listName"in p&&l(8,i=p.listName),"names"in p&&l(1,o=p.names),"excludedDates"in p&&l(9,u=p.excludedDates)},n.$$.update=()=>{n.$$.dirty&13&&c.length&&t&&c.forEach((p,D)=>{const h=`row-${D}`;if(!r[h]){const b=(p.overridden_member?p.overridden_member:p.member||"").split(",").map(E=>E.trim());l(3,r[h]={first:b[0]||"",second:b[1]||""},r)}})},m().then(p=>{l(2,c=p)}),[t,o,c,r,f,a,s,w,i,u,y,T,M,C]}class mt extends ie{constructor(e){super(),ce(this,e,_t,dt,fe,{editable:0,listName:8,names:1,excludedDates:9})}}function je(n,e,l){const t=n.slice();return t[7]=e[l],t}function qe(n){let e,l=n[7]+"",t;return{c(){e=k("option"),t=j(l),this.h()},l(i){e=S(i,"OPTION",{});var o=A(e);t=U(o,l),o.forEach(g),this.h()},h(){e.__value=n[7],W(e,e.__value)},m(i,o){R(i,e,o),_(e,t)},p:ne,d(i){i&&g(e)}}}function Fe(n){let e,l;return e=new ct({props:{editable:n[1]||n[2],listName:$.SacramentBreadAssignments,names:Qe,excludedDates:Ye}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,i){const o={};i&6&&(o.editable=t[1]||t[2]),e.$set(o)},i(t){l||(Y(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function Ge(n){let e,l;return e=new mt({props:{editable:n[1]||n[2],listName:$.SacramentPreparationAssignments,names:Qe,excludedDates:Ye}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,i){const o={};i&6&&(o.editable=t[1]||t[2]),e.$set(o)},i(t){l||(Y(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function ht(n){let e,l,t,i,o,u,v,c=K(n[5]),r=[];for(let s=0;s<c.length;s+=1)r[s]=qe(je(n,c,s));let m=n[0]===$.SacramentBreadAssignments&&Fe(n),a=n[0]===$.SacramentPreparationAssignments&&Ge(n);return{c(){e=k("select");for(let s=0;s<r.length;s+=1)r[s].c();l=P(),m&&m.c(),t=P(),a&&a.c(),i=ee(),this.h()},l(s){e=S(s,"SELECT",{class:!0});var f=A(e);for(let w=0;w<r.length;w+=1)r[w].l(f);f.forEach(g),l=I(s),m&&m.l(s),t=I(s),a&&a.l(s),i=ee(),this.h()},h(){O(e,"class","form-select form-control-sm"),n[0]===void 0&&re(()=>n[6].call(e))},m(s,f){R(s,e,f);for(let w=0;w<r.length;w+=1)r[w]&&r[w].m(e,null);X(e,n[0],!0),R(s,l,f),m&&m.m(s,f),R(s,t,f),a&&a.m(s,f),R(s,i,f),o=!0,u||(v=x(e,"change",n[6]),u=!0)},p(s,[f]){if(f&32){c=K(s[5]);let w;for(w=0;w<c.length;w+=1){const y=je(s,c,w);r[w]?r[w].p(y,f):(r[w]=qe(y),r[w].c(),r[w].m(e,null))}for(;w<r.length;w+=1)r[w].d(1);r.length=c.length}f&33&&X(e,s[0]),s[0]===$.SacramentBreadAssignments?m?(m.p(s,f),f&1&&Y(m,1)):(m=Fe(s),m.c(),Y(m,1),m.m(t.parentNode,t)):m&&(De(),Z(m,1,1,()=>{m=null}),we()),s[0]===$.SacramentPreparationAssignments?a?(a.p(s,f),f&1&&Y(a,1)):(a=Ge(s),a.c(),Y(a,1),a.m(i.parentNode,i)):a&&(De(),Z(a,1,1,()=>{a=null}),we())},i(s){o||(Y(m),Y(a),o=!0)},o(s){Z(m),Z(a),o=!1},d(s){s&&(g(e),g(l),g(t),g(i)),le(r,s),m&&m.d(s),a&&a.d(s),u=!1,v()}}}function vt(n,e,l){let t,i;const{stores:{currentUserIsRootOrAdmin:o,currentUserIsTeachersQuorum:u}}=lt();Se(n,o,m=>l(1,t=m)),Se(n,u,m=>l(2,i=m));let v=$.SacramentBreadAssignments;const c=Object.values($);function r(){v=ae(this),l(0,v),l(5,c)}return[v,t,i,o,u,c,r]}class bt extends ie{constructor(e){super(),ce(this,e,vt,ht,fe,{})}}function gt(n){let e,l;return e=new bt({}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},i(t){l||(Y(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}function pt(n){let e,l;return e=new et({props:{pageTitle:"Assignments",$$slots:{default:[gt]},$$scope:{ctx:n}}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,i){de(e,t,i),l=!0},p(t,[i]){const o={};i&1&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){l||(Y(e.$$.fragment,t),l=!0)},o(t){Z(e.$$.fragment,t),l=!1},d(t){ue(e,t)}}}class Nt extends ie{constructor(e){super(),ce(this,e,null,pt,fe,{})}}export{Nt as component,Mt as universal};
