import{a as ht}from"../chunks/B5LTcAhG.js";import{P as We,g as ft,c as Fe}from"../chunks/DTfTc-Am.js";import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{P as gt}from"../chunks/BLYmH0ed.js";import{w as bt,g as st,o as yt}from"../chunks/DHXte27T.js";import{p as ot,ai as Qe,w as ct,g as e,aj as _t,c as s,t as C,a as nt,E as Y,s as o,D as _,u as d,r,as as et,f as B,F as Be,i as vt,R as wt}from"../chunks/CPOcesE7.js";import{p as je,b as Ie,i as h,e as Pe,a as it,s as A,d as Mt,j as xt,k as mt}from"../chunks/opPvMm1W.js";import{e as at,i as rt}from"../chunks/DAwrR-3T.js";import{f as c,a as i,c as Ee,t as ut}from"../chunks/YsHTGu5k.js";import{r as Oe,e as Ct,b as Dt,s as Ke}from"../chunks/leomWik6.js";import{b as qe}from"../chunks/QDlYjqxz.js";import{i as lt}from"../chunks/C2Q_9cr2.js";import{S as Ge}from"../chunks/DdxfA9bk.js";import{c as $t}from"../chunks/BUThaZcy.js";import{g as dt}from"../chunks/DFuvf9hb.js";import{c as St,a as tt,b as kt,V as Ft}from"../chunks/Bai7YTd4.js";import{d as Et,u as It,c as Pt,a as Vt}from"../chunks/6ROERj7F.js";import{P as Nt}from"../chunks/BgB8pT2-.js";import{v as Rt,D as Lt}from"../chunks/DVIMrSXx.js";const Tt=!1,Bt=async()=>(ht(We.ViewMembers,"View Members"),{}),or=Object.freeze(Object.defineProperty({__proto__:null,load:Bt,ssr:Tt},Symbol.toStringTag,{value:"Module"})),jt=St().shape({first_name:tt().required("First name is required").min(2,"First name must be at least 2 characters").max(100,"First name cannot exceed 100 characters"),last_name:tt().nullable().min(2,"Last name must be at least 2 characters").max(100,"Last name cannot exceed 100 characters"),date_of_birth:kt().nullable().max(new Date,"Date of birth cannot be in the future").test("reasonable-age","Date of birth must be after 1900",function(u){return u?u>=new Date("1900-01-01"):!0}),phone_number:tt().nullable().matches(/^[0-9()\s.-]*$/,"Invalid phone number format (use digits, dashes, parentheses, spaces)").min(10,"Phone number must be at least 10 characters").max(20,"Phone number cannot exceed 20 characters")});function pt(){const u=bt({});async function p(m){try{return await jt.validate(m,{abortEarly:!1}),u.set({}),!0}catch(w){if(w instanceof Ft){const g={};return w.inner.forEach(j=>{j.path&&(g[j.path]=j.message)}),u.set(g),!1}return!1}}function t(){u.set({})}function n(){return Object.values(u).filter(w=>w.length>0)}return{validationErrors:u,validate:p,clearErrors:t,getErrorMessages:n}}async function Ot({id:u,first_name:p,last_name:t,date_of_birth:n,phone_number:m}){const w={first_name:p,last_name:t||"",date_of_birth:n?new Date(n):void 0,phone_number:m||void 0};return u?{action:"update",member:await It(u,w)}:{action:"create",member:await Pt(w)}}async function qt(u){await Et(u)}function Ht(){return{saveMember:Ot,deleteMemberById:qt}}var Ut=c('<div class="invalid-feedback"> </div>'),At=c('<div class="invalid-feedback"> </div>'),zt=c('<div class="invalid-feedback"> </div>'),Qt=c('<div class="invalid-feedback"> </div>'),Yt=c('<div><label for="member-dob" class="form-label">Date of Birth</label> <input id="member-dob" type="date"/> <!></div> <div><label for="member-phone" class="form-label">Phone Number</label> <input id="member-phone" type="tel" placeholder="(555) 123-4567"/> <!></div>',1),Jt=c('<div class="alert alert-info mb-0"><i class="bi bi-info-circle me-2"></i> Date of birth and phone number fields are restricted to bishopric and clerks.</div>'),Kt=c('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Wt=c("<span>Save</span>"),Gt=c("<span>Create</span>"),Xt=c('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Zt=c('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-3"><h2 class="h5 mb-0">Member Details</h2> <div><label for="member-first-name" class="form-label">First Name <span class="text-danger">*</span></label> <input id="member-first-name" type="text" placeholder="John"/> <!></div> <div><label for="member-last-name" class="form-label">Last Name</label> <input id="member-last-name" type="text" placeholder="Doe"/> <!></div> <!></div> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div></div>');function ea(u,p){ot(p,!1);const t=()=>Ie(he,"$currentUserHasPermission",m),n=()=>Ie(Ne,"$validationErrors",m),[m,w]=it(),g=Y(),j=Y();let D=je(p,"memberId",8,void 0),$=je(p,"drawerId",8,"");const{stores:{currentUserHasPermission:he}}=ft(),{stores:{members:He},actions:{reload:Ve}}=dt(),we=t()(We.ViewSensitiveMemberData),{validationErrors:Ne,validate:Re,clearErrors:ee,getErrorMessages:ge}=pt(),{saveMember:de,deleteMemberById:ve}=Ht();let M=Y(!1),me={first_name:"",last_name:"",date_of_birth:void 0,phone_number:void 0},z=Y({...me}),E=Y({message:"",type:"info"}),X=Y(""),te=Y(""),oe=Y(""),ne=Y("");function Me(){if(!D()){Le();return}_(M,!0);const a=st(He).find(l=>l.id===D());a&&(me={...a},_(z,{...a}),_(X,a.first_name||""),_(te,a.last_name||""),_(oe,a.date_of_birth?new Date(a.date_of_birth).toISOString().split("T")[0]:""),_(ne,a.phone_number?.toString()||"")),_(M,!1)}function Le(){me={first_name:"",last_name:"",date_of_birth:void 0,phone_number:void 0},_(z,{...me}),_(X,""),_(te,""),_(oe,""),_(ne,""),ee()}const ye=()=>{const a=`[data-bs-target="#${$()}"]`,l=document.querySelector(a);l&&l.click()},ie=(a,l=0,G="info")=>{et(E,e(E).message=a),et(E,e(E).type=G),l&&setTimeout(()=>{et(E,e(E).message="")},l)},Ue=async()=>{if(!e(g)){ie("Member ID is not defined",0,"danger");return}try{await ve(e(g)),await Ve(),setTimeout(()=>{_(M,!1),ie("Member Deleted",3e3,"success"),ye()},800)}catch(a){setTimeout(()=>{_(M,!1),console.error("Delete failed:",a),ie("Failed to delete member. Please try again.",7e3,"danger")},800)}},Ae=async()=>{_(M,!0),$t({title:"Delete Confirmation",message:"Are you sure you want to delete this member? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:a=>{a?Ue():_(M,!1)}})},v=async()=>{if(e(g)&&!e(j)){ie("Nothing has changed, there is nothing to save.",7e3);return}if(!await Re({first_name:e(X),last_name:e(te),date_of_birth:e(oe),phone_number:e(ne)})){const l=ge();l.length&&ie(l.join(". ")+". Please address accordingly.",0,"danger");return}if(!e(M)){ie("Saving ..."),_(M,!0);try{await de({id:e(g),first_name:e(X),last_name:e(te),date_of_birth:e(oe),phone_number:e(ne)}),await Ve(),setTimeout(()=>{_(M,!1),_(z,{...me,id:e(g)}),ie("Saved",3e3,"success"),ye()},800)}catch(l){setTimeout(()=>{_(M,!1),console.error("Save failed:",l),ie("Failed to save member. Please try again.",7e3,"danger")},800)}}};Qe(()=>ct(D()),()=>{_(g,D())}),Qe(()=>(e(z),e(X),e(te),e(oe),e(ne)),()=>{_(j,e(z).first_name!==e(X)||e(z).last_name!==e(te)||e(z).date_of_birth?.toString()!==(e(oe)||void 0)||e(z).phone_number?.toString()!==(e(ne)||void 0))}),Qe(()=>(ct(D()),e(z)),()=>{D()!==void 0&&D()!==e(z).id&&Me()}),_t(),lt();var f=Zt(),I=s(f),ae=o(s(I),2),J=o(s(ae),2);Oe(J);let k;var O=o(J,2);{var Z=a=>{var l=Ut(),G=s(l,!0);r(l),C(()=>A(G,(n(),d(()=>n().first_name)))),i(a,l)};h(O,a=>{n(),d(()=>n().first_name)&&a(Z)})}r(ae);var K=o(ae,2),q=o(s(K),2);Oe(q);let S;var V=o(q,2);{var N=a=>{var l=At(),G=s(l,!0);r(l),C(()=>A(G,(n(),d(()=>n().last_name)))),i(a,l)};h(V,a=>{n(),d(()=>n().last_name)&&a(N)})}r(K);var ue=o(K,2);{var y=a=>{var l=Yt(),G=B(l),Ce=o(s(G),2);Oe(Ce);let Ye;var pe=o(Ce,2);{var De=ce=>{var ke=zt(),Ze=s(ke,!0);r(ke),C(()=>A(Ze,(n(),d(()=>n().date_of_birth)))),i(ce,ke)};h(pe,ce=>{n(),d(()=>n().date_of_birth)&&ce(De)})}r(G);var $e=o(G,2),Se=o(s($e),2);Oe(Se);let Je;var ze=o(Se,2);{var Xe=ce=>{var ke=Qt(),Ze=s(ke,!0);r(ke),C(()=>A(Ze,(n(),d(()=>n().phone_number)))),i(ce,ke)};h(ze,ce=>{n(),d(()=>n().phone_number)&&ce(Xe)})}r($e),C(()=>{Ye=Fe(Ce,1,"form-control",null,Ye,{"is-invalid":n().date_of_birth}),Ce.disabled=e(M),Je=Fe(Se,1,"form-control",null,Je,{"is-invalid":n().phone_number}),Se.disabled=e(M)}),qe(Ce,()=>e(oe),ce=>_(oe,ce)),qe(Se,()=>e(ne),ce=>_(ne,ce)),i(a,l)},F=a=>{var l=Jt();i(a,l)};h(ue,a=>{we?a(y):a(F,!1)})}r(I);var R=o(I,2),H=s(R),U=s(H);{var x=a=>{var l=Kt();C(()=>l.disabled=e(M)),Pe("click",l,Ae),i(a,l)};h(U,a=>{e(g)&&a(x)})}r(H);var b=o(H,2),L=s(b),re=o(L,2),le=s(re);{var se=a=>{var l=Wt();i(a,l)},be=a=>{var l=Gt();i(a,l)};h(le,a=>{e(g)?a(se):a(be,!1)})}var _e=o(le,2);{var P=a=>{var l=Xt();i(a,l)};h(_e,a=>{e(j)&&a(P)})}r(re),r(b),r(R);var Q=o(R,2),W=s(Q),fe=s(W,!0);r(W);var xe=o(W,2);let Te;var T=s(xe);Ge(T,{size:"xs"}),r(xe),r(Q),r(f),C(()=>{k=Fe(J,1,"form-control",null,k,{"is-invalid":n().first_name}),J.disabled=e(M),S=Fe(q,1,"form-control",null,S,{"is-invalid":n().last_name}),q.disabled=e(M),L.disabled=e(M),re.disabled=e(M),Fe(W,1,`fw-lighter fst-italic text-${e(E),d(()=>e(E).type)??""}`),A(fe,(e(E),d(()=>e(E).message))),Te=Fe(xe,1,"",null,Te,{"d-none":!e(M)})}),qe(J,()=>e(X),a=>_(X,a)),qe(q,()=>e(te),a=>_(te,a)),Pe("click",L,ye),Pe("click",re,v),i(u,f),nt(),w()}async function ta(u){return new Promise((p,t)=>{Nt.parse(u,{header:!0,skipEmptyLines:!0,complete:n=>{const m=n.data,w=n.meta.fields||[];p({data:m,columns:w})},error:n=>t(n)})})}function aa(u,p){return u.map(n=>{const m=n.toLowerCase().trim();if(m.includes("first")&&m.includes("name"))return{csvColumn:n,memberField:"first_name"};if(m.includes("last")&&m.includes("name"))return{csvColumn:n,memberField:"last_name"};if(p){if(m.includes("birth")||m.includes("dob"))return{csvColumn:n,memberField:"date_of_birth"};if(m.includes("phone"))return{csvColumn:n,memberField:"phone_number"}}return{csvColumn:n,memberField:null}})}async function ra(u,p){const{validate:t,validationErrors:n}=pt(),m={first_name:""};p.forEach(j=>{const D=u[j.csvColumn];if(!j.memberField||!D)return;const $=D.trim();switch(j.memberField){case"first_name":m.first_name=$;break;case"last_name":m.last_name=$;break;case"date_of_birth":m.date_of_birth=$;break;case"phone_number":m.phone_number=$;break}}),await t(m);const w=st(n),g=Object.values(w).filter(Boolean);return{isValid:g.length===0,errors:g}}function sa(u,p){const t=dt();return t?st(t.stores.members).some(m=>m.first_name.toLowerCase()===u.toLowerCase()&&(m.last_name||"").toLowerCase()===(p||"").toLowerCase()):!1}async function oa(u,p){const t={success:0,duplicates:0,validationErrors:0,errors:[]},n=[];for(let m=0;m<u.length;m++){const w=u[m],g={};if(p.forEach($=>{if($.memberField&&w[$.csvColumn]){const he=w[$.csvColumn].trim();$.memberField==="date_of_birth"?g[$.memberField]=new Date(he):g[$.memberField]=he}}),!g.first_name){t.validationErrors++,t.errors.push({row:m+1,field:"first_name",message:"First name is required"});continue}if(sa(g.first_name,g.last_name||"")){t.duplicates++;continue}const D=await ra(w,p);if(!D.isValid){t.validationErrors++,D.errors.forEach($=>{t.errors.push({row:m+1,field:"unknown",message:$})});continue}n.push(g)}return n.length>0&&(await Vt(n),t.success=n.length),t}function na(u){const p=bt({step:"upload",csvData:[],csvColumns:[],columnMappings:[],importResult:null});return{state:p,parseCsvFile:ta,autoDetectMappings:t=>aa(t,u),importMembers:oa,reset:()=>p.set({step:"upload",csvData:[],csvColumns:[],columnMappings:[],importResult:null})}}var ia=c(`<div class="mb-3"><label for="csvFile" class="form-label">Select CSV File</label> <input type="file" class="form-control" id="csvFile" accept=".csv"/> <div class="form-text">CSV file should include columns for: First Name, Last Name, Date of Birth, Phone
							Number</div></div>`),la=c("<option>Date of Birth</option> <option>Phone Number</option>",1),da=c('<tr><td> </td><td><select class="form-select form-select-sm"><option>-- Skip --</option><option>First Name</option><option>Last Name</option><!></select></td></tr>'),ca=c('<h6>Map CSV Columns to Member Fields</h6> <p class="text-muted"> </p> <table class="table table-sm"><thead><tr><th>CSV Column</th><th>Maps To</th></tr></thead><tbody></tbody></table>',1),va=c('<div class="text-center py-5"><!> <p class="mt-3">Importing members...</p></div>'),ma=c("<li><strong> </strong> duplicates skipped</li>"),ua=c("<li><strong> </strong> rows had validation errors</li>"),fa=c("<li> </li>"),ba=c("<li><em> </em></li>"),_a=c('<div class="alert alert-warning"><h6>Validation Errors:</h6> <ul class="mb-0" style="max-height: 200px; overflow-y: auto;"><!> <!></ul></div>'),pa=c('<div class="alert alert-success"><h6>Import Complete</h6> <ul class="mb-0"><li><strong> </strong> members imported successfully</li> <!> <!></ul></div> <!>',1),ha=c('<button type="button" class="btn btn-secondary">Cancel</button>'),ga=c('<button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary"> </button>',1),ya=c('<button type="button" class="btn btn-secondary" disabled>Cancel</button> <button type="button" class="btn btn-primary" disabled><!> Importing...</button>',1),wa=c('<button type="button" class="btn btn-primary">Done</button>'),Ma=c('<div class="modal-backdrop fade show"></div>'),xa=c('<div tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Import Members from CSV</h5> <button type="button" class="btn-close" aria-label="Close import modal"></button></div> <div class="modal-body"><!></div> <div class="modal-footer"><!></div></div></div></div> <!>',1);function Ca(u,p){ot(p,!1);const t=()=>Ie($,"$state",n),[n,m]=it();let w=je(p,"isOpen",8,!1),g=je(p,"onClose",8),j=je(p,"onComplete",8),D=je(p,"canViewSensitiveData",8,!1);const{state:$,parseCsvFile:he,autoDetectMappings:He,importMembers:Ve,reset:we}=na(D());async function Ne(v){const f=v.target.files?.[0];if(f)try{const{data:I,columns:ae}=await he(f),J=He(ae);$.update(k=>({...k,step:"mapping",csvData:I,csvColumns:ae,columnMappings:J}))}catch(I){console.error("Failed to parse CSV:",I),alert("Failed to parse CSV file. Please check the file format.")}}async function Re(){try{const v=await Ve(t().csvData,t().columnMappings);$.update(f=>({...f,step:"complete",importResult:v})),j()()}catch(v){console.error("Failed to import members:",v),alert("Failed to import members. Please try again.")}}function ee(){we(),g()()}lt();var ge=xa(),de=B(ge);let ve;var M=s(de),me=s(M),z=s(me),E=o(s(z),2);E.__click=ee,r(z);var X=o(z,2),te=s(X);{var oe=v=>{var f=ia(),I=o(s(f),2);I.__change=Ne,Be(2),r(f),i(v,f)},ne=v=>{var f=Ee(),I=B(f);{var ae=k=>{var O=ca(),Z=o(B(O),2),K=s(Z);r(Z);var q=o(Z,2),S=o(s(q));at(S,5,()=>(t(),d(()=>t().columnMappings)),rt,(V,N,ue)=>{var y=da(),F=s(y),R=s(F,!0);r(F);var H=o(F),U=s(H);C(()=>{e(N),vt(()=>{D()})});var x=s(U);x.value=(x.__value=null)??"";var b=o(x);b.value=b.__value="first_name";var L=o(b);L.value=L.__value="last_name";var re=o(L);{var le=se=>{var be=la(),_e=B(be);_e.value=_e.__value="date_of_birth";var P=o(_e,2);P.value=P.__value="phone_number",i(se,be)};h(re,se=>{D()&&se(le)})}r(U),r(H),r(y),C(()=>A(R,(e(N),d(()=>e(N).csvColumn)))),Dt(U,()=>e(N).memberField,se=>(e(N).memberField=se,vt(()=>t()),xt(n,"$state"))),i(V,y)}),r(S),r(q),C(()=>A(K,`Found ${t(),d(()=>t().csvData.length)??""} rows in CSV`)),i(k,O)},J=k=>{var O=Ee(),Z=B(O);{var K=S=>{var V=va(),N=s(V);Ge(N,{}),Be(2),r(V),i(S,V)},q=S=>{var V=Ee(),N=B(V);{var ue=y=>{var F=pa(),R=B(F),H=o(s(R),2),U=s(H),x=s(U),b=s(x,!0);r(x),Be(),r(U);var L=o(U,2);{var re=P=>{var Q=ma(),W=s(Q),fe=s(W,!0);r(W),Be(),r(Q),C(()=>A(fe,(t(),d(()=>t().importResult.duplicates)))),i(P,Q)};h(L,P=>{t(),d(()=>t().importResult?.duplicates&&t().importResult.duplicates>0)&&P(re)})}var le=o(L,2);{var se=P=>{var Q=ua(),W=s(Q),fe=s(W,!0);r(W),Be(),r(Q),C(()=>A(fe,(t(),d(()=>t().importResult.validationErrors)))),i(P,Q)};h(le,P=>{t(),d(()=>t().importResult?.validationErrors&&t().importResult.validationErrors>0)&&P(se)})}r(H),r(R);var be=o(R,2);{var _e=P=>{var Q=_a(),W=o(s(Q),2),fe=s(W);at(fe,1,()=>(t(),d(()=>t().importResult.errors.slice(0,10))),rt,(T,a)=>{var l=fa(),G=s(l);r(l),C(()=>A(G,`Row ${e(a),d(()=>e(a).row)??""}: ${e(a),d(()=>e(a).message)??""}`)),i(T,l)});var xe=o(fe,2);{var Te=T=>{var a=ba(),l=s(a),G=s(l);r(l),r(a),C(()=>A(G,`... and ${t(),d(()=>t().importResult.errors.length-10)??""} more errors`)),i(T,a)};h(xe,T=>{t(),d(()=>t().importResult.errors.length>10)&&T(Te)})}r(W),r(Q),i(P,Q)};h(be,P=>{t(),d(()=>t().importResult?.errors&&t().importResult.errors.length>0)&&P(_e)})}C(()=>A(b,(t(),d(()=>t().importResult?.success||0)))),i(y,F)};h(N,y=>{t(),d(()=>t().step==="complete")&&y(ue)},!0)}i(S,V)};h(Z,S=>{t(),d(()=>t().step==="importing")?S(K):S(q,!1)},!0)}i(k,O)};h(I,k=>{t(),d(()=>t().step==="mapping")?k(ae):k(J,!1)},!0)}i(v,f)};h(te,v=>{t(),d(()=>t().step==="upload")?v(oe):v(ne,!1)})}r(X);var Me=o(X,2),Le=s(Me);{var ye=v=>{var f=ha();f.__click=ee,i(v,f)},ie=v=>{var f=Ee(),I=B(f);{var ae=k=>{var O=ga(),Z=B(O);Z.__click=ee;var K=o(Z,2);K.__click=Re;var q=s(K);r(K),C(()=>A(q,`Import ${t(),d(()=>t().csvData.length)??""} Members`)),i(k,O)},J=k=>{var O=Ee(),Z=B(O);{var K=S=>{var V=ya(),N=o(B(V),2),ue=s(N);Ge(ue,{size:"sm"}),Be(),r(N),i(S,V)},q=S=>{var V=Ee(),N=B(V);{var ue=y=>{var F=wa();F.__click=ee,i(y,F)};h(N,y=>{t(),d(()=>t().step==="complete")&&y(ue)},!0)}i(S,V)};h(Z,S=>{t(),d(()=>t().step==="importing")?S(K):S(q,!1)},!0)}i(k,O)};h(I,k=>{t(),d(()=>t().step==="mapping")?k(ae):k(J,!1)},!0)}i(v,f)};h(Le,v=>{t(),d(()=>t().step==="upload")?v(ye):v(ie,!1)})}r(Me),r(me),r(M),r(de);var Ue=o(de,2);{var Ae=v=>{var f=Ma();i(v,f)};h(Ue,v=>{w()&&v(Ae)})}C(()=>{ve=Fe(de,1,"modal fade",null,ve,{show:w()}),Ct(de,`display: ${w()?"block":"none"}`)}),i(u,ge),nt(),m()}Mt(["click","change"]);var Da=c('<div class="dropdown"><button class="btn btn-sm btn-primary dropdown-toggle" type="button" id="addMemberDropdown" data-bs-toggle="dropdown" aria-label="Add member actions" aria-expanded="false"><i class="bi bi-plus"></i></button> <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="addMemberDropdown"><li><button class="dropdown-item" type="button" data-bs-toggle="offcanvas"><i class="bi bi-person-plus me-2"></i>Create Member</button></li> <li><button class="dropdown-item" type="button"><i class="bi bi-file-earmark-arrow-up me-2"></i>Import CSV</button></li></ul></div>'),$a=c("<!> ",1),Sa=c("<!> <!>",1),ka=c('<span class="fst-italic">Contact info restricted</span>'),Fa=c('<div class="member-actions svelte-65f73k"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit member"><i class="bi bi-pencil-square"></i></button></div>'),Ea=c('<li class="list-group-item py-2"><div class="member-row svelte-65f73k"><div class="member-content svelte-65f73k"><div><strong> </strong></div> <div class="text-muted small"><!></div></div> <!></div></li>'),Ia=c('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <button class="btn btn-primary btn-sm">More</button></div>'),Pa=c('<ul class="list-group list-group-flush border-top-0"></ul> <!>',1),Va=c('<div class="card-body"><div class="alert alert-info mb-0"><i class="bi bi-info-circle me-2"></i> No members match your search.</div></div>'),Na=c('<div class="card-body"><div class="alert alert-info mb-0"><i class="bi bi-info-circle me-2"></i> No members yet.</div></div>'),Ra=c('<div class="card"><div class="card-header"><div class="header-container"><div class="d-flex justify-content-between align-items-center w-100"><span>Members</span> <div class="d-flex align-items-center gap-2"><input type="text" class="form-control form-control-sm search-desktop svelte-65f73k" placeholder="Search members..."/> <!></div></div> <div class="search-mobile mt-2 svelte-65f73k"><input type="text" class="form-control form-control-sm" placeholder="Search members..."/></div></div></div> <!></div>'),La=c('<div class="d-flex flex-column gap-4"><!></div>'),Ta=c("<!> <!> <!>",1);function Ba(u,p){ot(p,!1);const t=()=>Ie(Ve,"$filteredMembers",g),n=()=>Ie(he,"$currentUserHasPermission",g),m=()=>Ie(He,"$ready",g),w=()=>Ie(we,"$searchQuery",g),[g,j]=it(),D=Y(),$=Y(),{stores:{currentUserHasPermission:he}}=ft(),{stores:{ready:He,filteredMembers:Ve,searchQuery:we},actions:{reload:Ne}}=dt(),Re={first_name:"",last_name:"",date_of_birth:void 0,phone_number:void 0},ee=Rt();let ge=Y(!1),de=Y(!1),ve=Y({...Re}),M=Y(!1);const me=20,z=20;let E=Y(me);function X(){_(E,e(E)+z)}yt(async()=>{_(ge,n()(We.EditMembers)),_(de,n()(We.ViewSensitiveMemberData)),await Ne()});const te=v=>{_(ve,{...v})};function oe(v){return v?new Date(v).toLocaleDateString():""}function ne(){Ne()}Qe(()=>(t(),e(E)),()=>{_(D,(t()??[]).slice(0,e(E)))}),Qe(()=>(t(),e(E)),()=>{_($,(t()?.length??0)>e(E))}),_t(),lt();var Me=Ta(),Le=B(Me);{let v=wt(()=>(e(ve),d(()=>e(ve).id?"Edit Member":"Create Member")));Lt(Le,{get title(){return e(v)},get id(){return ee},children:(f,I)=>{ea(f,{get memberId(){return e(ve),d(()=>e(ve).id)},get drawerId(){return ee}})},$$slots:{default:!0}})}var ye=o(Le,2);Ca(ye,{get isOpen(){return e(M)},onClose:()=>_(M,!1),onComplete:ne,get canViewSensitiveData(){return e(de)}});var ie=o(ye,2);{var Ue=v=>{var f=Ra(),I=s(f),ae=s(I),J=s(ae),k=o(s(J),2),O=s(k);Oe(O);var Z=o(O,2);{var K=y=>{var F=Da(),R=o(s(F),2),H=s(R),U=s(H);r(H);var x=o(H,2),b=s(x);r(x),r(R),r(F),C(()=>{Ke(U,"data-bs-target",`#${ee??""}`),Ke(U,"aria-controls",ee)}),Pe("click",U,()=>te(Re)),Pe("click",b,()=>_(M,!0)),i(y,F)};h(Z,y=>{e(ge)&&y(K)})}r(k),r(J);var q=o(J,2),S=s(q);Oe(S),r(q),r(ae),r(I);var V=o(I,2);{var N=y=>{var F=Pa(),R=B(F);at(R,5,()=>e(D),rt,(x,b)=>{var L=Ea(),re=s(L),le=s(re),se=s(le),be=s(se),_e=s(be);r(be),r(se);var P=o(se,2),Q=s(P);{var W=T=>{var a=Sa(),l=B(a);{var G=pe=>{var De=ut();C($e=>A(De,`DOB: ${$e??""}`),[()=>(e(b),d(()=>oe(e(b).date_of_birth)))]),i(pe,De)};h(l,pe=>{e(b),d(()=>e(b).date_of_birth)&&pe(G)})}var Ce=o(l,2);{var Ye=pe=>{var De=$a(),$e=B(De);{var Se=ze=>{var Xe=ut("â€¢");i(ze,Xe)};h($e,ze=>{e(b),d(()=>e(b).date_of_birth)&&ze(Se)})}var Je=o($e);C(()=>A(Je,` Phone: ${e(b),d(()=>e(b).phone_number)??""}`)),i(pe,De)};h(Ce,pe=>{e(b),d(()=>e(b).phone_number)&&pe(Ye)})}i(T,a)},fe=T=>{var a=ka();i(T,a)};h(Q,T=>{e(de)?T(W):T(fe,!1)})}r(P),r(le);var xe=o(le,2);{var Te=T=>{var a=Fa(),l=s(a);r(a),C(()=>{Ke(l,"data-bs-target",`#${ee??""}`),Ke(l,"aria-controls",ee)}),Pe("click",l,()=>te(e(b))),i(T,a)};h(xe,T=>{e(ge)&&T(Te)})}r(re),r(L),C(()=>A(_e,`${e(b),d(()=>e(b).first_name)??""} ${e(b),d(()=>e(b).last_name||"")??""}`)),i(x,L)}),r(R);var H=o(R,2);{var U=x=>{var b=Ia(),L=s(b),re=s(L);r(L);var le=o(L,2);r(b),C(()=>A(re,`Showing ${e(E)??""} of ${t(),d(()=>t()?.length??0)??""}`)),Pe("click",le,X),i(x,b)};h(H,x=>{e($)&&x(U)})}i(y,F)},ue=y=>{var F=Ee(),R=B(F);{var H=x=>{var b=Va();i(x,b)},U=x=>{var b=Na();i(x,b)};h(R,x=>{w(),d(()=>w().trim())?x(H):x(U,!1)},!0)}i(y,F)};h(V,y=>{e(D),d(()=>e(D).length)?y(N):y(ue,!1)})}r(f),qe(O,w,y=>mt(we,y)),qe(S,w,y=>mt(we,y)),i(v,f)},Ae=v=>{var f=La(),I=s(f);Ge(I,{}),r(f),i(v,f)};h(ie,v=>{m()?v(Ue):v(Ae,!1)})}i(u,Me),nt(),j()}function nr(u){gt(u,{pageTitle:"Members",children:(p,t)=>{Ba(p,{})},$$slots:{default:!0}})}export{nr as component,or as universal};
