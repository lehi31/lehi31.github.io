import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as M,f as se,a as N,ak as ie,g as s,E as p,D as i,s as l,c as m,e as te,F as R,r as v,t as re}from"../chunks/CPOcesE7.js";import{i as V}from"../chunks/C2Q_9cr2.js";import{e as y,i as h,s as oe}from"../chunks/opPvMm1W.js";import{c as le,a as c,f as g}from"../chunks/YsHTGu5k.js";import{a as ne}from"../chunks/DucDvSDt.js";import{r as z}from"../chunks/DJI_wm8J.js";import{b as D}from"../chunks/QDlYjqxz.js";import{p as ce}from"../chunks/CdEA5IGF.js";import{g as q}from"../chunks/B1qrNtuZ.js";import{g as C}from"../chunks/Dr7zYMH8.js";import{p as de}from"../chunks/BhD1foeA.js";import{L as fe}from"../chunks/iDCOp-TH.js";const pe=!1,Fe=Object.freeze(Object.defineProperty({__proto__:null,prerender:pe},Symbol.toStringTag,{value:"Module"}));var me=g('<div class="alert alert-info d-flex align-items-center gap-2" role="alert"><i class="bi bi-info-circle-fill"></i> <div>Please check your email and click the verification link before logging in.</div></div>'),ve=g('<a href="/auth/resend-verification" class="alert-link">Resend verification email</a>'),ge=g('<div class="alert alert-danger d-flex align-items-center gap-2" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <div> <!></div></div>'),ue=g('<div class="input-group"><input type="text" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Hide password"><i class="bi bi-eye-slash"></i></button></div>'),be=g('<div class="input-group"><input type="password" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Show password"><i class="bi bi-eye"></i></button></div>'),he=g(`<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-1lcbzi1"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none svelte-1lcbzi1"><img src="/assets/logo.png" alt="logo" class="logo svelte-1lcbzi1"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <!> <!> <form class="d-flex gap-3 flex-column"><input type="text" class="form-control" placeholder="Email or Username" id="identifier" aria-describedby="identifier"/> <!> <div class="text-end"><a href="/auth/forgot-password" class="link-primary small">Forgot password?</a></div> <div class="d-flex justify-content-between"><a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Login</button></div></form> <div class="text-center"><small class="text-muted">Don't have an account? <a href="/auth/signup" class="link-primary">Sign up</a></small></div></div>`);function _e(w,x){M(x,!1);const{actions:{login:k,loginWithEmail:B}}=q();let u=p(!1),d=p(""),n=p(""),L=p(!1),r=p(""),E=p(!1);const H=a=>a.includes("@"),I=async()=>{if(i(u,!0),i(r,""),i(E,!1),!s(d)||!s(n)){i(r,"Email/username and password are required"),i(u,!1);return}if(H(s(d))){const a=await B(s(d),s(n));a.success?(i(r,"Logging you in ..."),setTimeout(()=>{C("/home")},1e3)):(a.code==="EMAIL_NOT_VERIFIED"?(i(r,"Please verify your email first."),i(E,!0)):i(r,a.error||"Login failed, please try again"),setTimeout(()=>{i(u,!1)},1e3))}else await k(s(d),s(n))?(i(r,"Logging you in ..."),setTimeout(()=>{C("/home")},1e3)):(i(r,"Login failed, please try again"),setTimeout(()=>{i(u,!1)},1e3))},j=()=>{i(L,!s(L))},U=a=>{a.key==="Enter"&&I()},W=a=>{a.focus()};V();var A=le();y("keydown",ie,U);var G=se(A);{var J=a=>{fe(a,{get message(){return s(r)}})},K=a=>{var P=he(),F=l(m(P),2);{var Q=e=>{var t=me();c(e,t)};h(F,e=>{de.url.searchParams.get("verified")==="pending"&&e(Q)})}var O=l(F,2);{var X=e=>{var t=ge(),o=l(m(t),2),f=m(o),b=l(f);{var ee=S=>{var ae=ve();c(S,ae)};h(b,S=>{s(E)&&S(ee)})}v(o),v(t),re(()=>oe(f,`${s(r)??""} `)),c(e,t)};h(O,e=>{s(r)&&e(X)})}var T=l(O,2),_=m(T);z(_),te(()=>D(_,()=>s(d),e=>i(d,e))),ne(_,e=>W?.(e));var Y=l(_,2);{var Z=e=>{var t=ue(),o=m(t);z(o);var f=l(o,2);v(t),D(o,()=>s(n),b=>i(n,b)),y("click",f,j),c(e,t)},$=e=>{var t=be(),o=m(t);z(o);var f=l(o,2);v(t),D(o,()=>s(n),b=>i(n,b)),y("click",f,j),c(e,t)};h(Y,e=>{s(L)?e(Z):e($,!1)})}R(4),v(T),R(2),v(P),y("submit",T,ce(I)),c(a,P)};h(G,a=>{s(u)?a(J):a(K,!1)})}c(w,A),N()}function Oe(w,x){M(x,!1);const{stores:{pageName:k}}=q();k.set("Auth - Login"),V(),_e(w,{}),N()}export{Oe as component,Fe as universal};
