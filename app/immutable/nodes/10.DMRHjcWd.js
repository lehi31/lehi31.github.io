import{s as we,n as K,d as m,y as Oe,i as C,b as _,A as le,p,c as v,e as w,w as Y,g as O,h as b,j as A,x as X,a as J,f as T,t as S,k as be,r as ct,N as ft,M as ye}from"../chunks/Dvm0vAjZ.js";import{S as De,i as Ce,d as ie,t as $,a as I,g as se,e as ne,m as ce,c as fe,b as ue}from"../chunks/C0L9un44.js";import{P as ut}from"../chunks/X3quwrks.js";import{s as dt,d as _t,A as ht,E as mt}from"../chunks/nKqnW7RE.js";import{g as pt}from"../chunks/D0QH3NT1.js";import{e as me,u as Ie,o as Me}from"../chunks/BGClpEll.js";import{g as vt,p as he,P as Se,e as bt,f as de}from"../chunks/CZoEfXh9.js";import{d as Le}from"../chunks/C2VKED_S.js";import{c as kt,g as gt,s as Ee,e as Pe,A as yt,d as Et,E as wt}from"../chunks/eKeYxLRl.js";import{S as Dt}from"../chunks/CBQFjBXm.js";import{D as Ct,v as It}from"../chunks/75J_HFy9.js";function Mt(c,e){return kt(c,-e)}const Nt=!0,ul=Object.freeze(Object.defineProperty({__proto__:null,prerender:Nt},Symbol.toStringTag,{value:"Module"}));function Tt(c){let e,t,l=c[0]>0&&Re(c),n=c[1]>0&&Ue(c);return{c(){l&&l.c(),e=A(),n&&n.c(),t=X()},l(r){l&&l.l(r),e=O(r),n&&n.l(r),t=X()},m(r,f){l&&l.m(r,f),C(r,e,f),n&&n.m(r,f),C(r,t,f)},p(r,f){r[0]>0?l?l.p(r,f):(l=Re(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),r[1]>0?n?n.p(r,f):(n=Ue(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){r&&(m(e),m(t)),l&&l.d(r),n&&n.d(r)}}}function St(c){let e,t="No past events to delete.";return{c(){e=b("p"),e.textContent=t,this.h()},l(l){e=v(l,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-ggk98f"&&(e.textContent=t),this.h()},h(){p(e,"class","mb-0")},m(l,n){C(l,e,n)},p:K,d(l){l&&m(e)}}}function Re(c){let e,t,l,n,r,f=c[0]===1?"":"s",i,s;return{c(){e=b("p"),t=b("strong"),l=S("✓ Deleted "),n=S(c[0]),r=S(" past event"),i=S(f),s=S("."),this.h()},l(o){e=v(o,"P",{class:!0});var a=w(e);t=v(a,"STRONG",{});var u=w(t);l=T(u,"✓ Deleted "),n=T(u,c[0]),r=T(u," past event"),i=T(u,f),s=T(u,"."),u.forEach(m),a.forEach(m),this.h()},h(){p(e,"class","mb-2")},m(o,a){C(o,e,a),_(e,t),_(t,l),_(t,n),_(t,r),_(t,i),_(t,s)},p(o,a){a&1&&J(n,o[0]),a&1&&f!==(f=o[0]===1?"":"s")&&J(i,f)},d(o){o&&m(e)}}}function Ue(c){let e,t,l,n,r,f,i=c[1]===1?"":"s",s,o,a,u=`These recurring events have active future instances and cannot be deleted until all
								future occurrences have passed.`;return{c(){e=b("div"),t=b("p"),l=b("strong"),n=S("⚠ Skipped "),r=S(c[1]),f=S(" recurring event"),s=S(i),o=A(),a=b("p"),a.textContent=u,this.h()},l(d){e=v(d,"DIV",{class:!0,role:!0});var h=w(e);t=v(h,"P",{class:!0});var k=w(t);l=v(k,"STRONG",{});var D=w(l);n=T(D,"⚠ Skipped "),r=T(D,c[1]),f=T(D," recurring event"),s=T(D,i),D.forEach(m),k.forEach(m),o=O(h),a=v(h,"P",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-14o7gwb"&&(a.textContent=u),h.forEach(m),this.h()},h(){p(t,"class","mb-2"),p(a,"class","mb-0 small"),p(e,"class","alert alert-warning mb-0"),p(e,"role","alert")},m(d,h){C(d,e,h),_(e,t),_(t,l),_(l,n),_(l,r),_(l,f),_(l,s),_(e,o),_(e,a)},p(d,h){h&2&&J(r,d[1]),h&2&&i!==(i=d[1]===1?"":"s")&&J(s,i)},d(d){d&&m(e)}}}function Pt(c){let e,t,l,n,r,f="Delete Past Events - Results",i,s,o,a,u,d,h,k="OK",D,M;function N(g,E){return g[0]===0&&g[1]===0?St:Tt}let U=N(c),G=U(c);return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),r=b("h5"),r.textContent=f,i=A(),s=b("button"),o=A(),a=b("div"),G.c(),u=A(),d=b("div"),h=b("button"),h.textContent=k,this.h()},l(g){e=v(g,"DIV",{class:!0,tabindex:!0});var E=w(e);t=v(E,"DIV",{class:!0});var B=w(t);l=v(B,"DIV",{class:!0});var q=w(l);n=v(q,"DIV",{class:!0});var R=w(n);r=v(R,"H5",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-vyl7za"&&(r.textContent=f),i=O(R),s=v(R,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(s).forEach(m),R.forEach(m),o=O(q),a=v(q,"DIV",{class:!0});var z=w(a);G.l(z),z.forEach(m),u=O(q),d=v(q,"DIV",{class:!0});var W=w(d);h=v(W,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-x31r0n"&&(h.textContent=k),W.forEach(m),q.forEach(m),B.forEach(m),E.forEach(m),this.h()},h(){p(r,"class","modal-title"),p(s,"type","button"),p(s,"class","btn-close btn-close-white"),p(s,"aria-label","Close"),p(n,"class","modal-header bg-primary text-white"),p(a,"class","modal-body"),p(h,"type","button"),p(h,"class","btn btn-primary"),p(d,"class","modal-footer"),p(l,"class","modal-content"),p(t,"class","modal-dialog"),p(e,"class","modal svelte-1s1xr1"),p(e,"tabindex","-1")},m(g,E){C(g,e,E),_(e,t),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(l,o),_(l,a),G.m(a,null),_(l,u),_(l,d),_(d,h),D||(M=[le(s,"click",c[2]),le(h,"click",c[2])],D=!0)},p(g,[E]){U===(U=N(g))&&G?G.p(g,E):(G.d(1),G=U(g),G&&(G.c(),G.m(a,null)))},i:K,o:K,d(g){g&&m(e),G.d(),D=!1,Oe(M)}}}function Ot(c,e,t){let{deleted:l}=e,{skipped:n}=e,{callback:r}=e;function f(){r()}return c.$$set=i=>{"deleted"in i&&t(0,l=i.deleted),"skipped"in i&&t(1,n=i.skipped),"callback"in i&&t(3,r=i.callback)},[l,n,f,r]}class At extends De{constructor(e){super(),Ce(this,e,Ot,Pt,we,{deleted:0,skipped:1,callback:3})}}function Vt(c){let e,t,l,n,r,f="Delete Past Events",i,s,o,a,u,d,h,k,D,M,N,U=`This action cannot be undone. Recurring events with future instances will be skipped
					automatically.`,G,g,E,B="Cancel",q,R,z="Delete",W,Z;return{c(){e=b("div"),t=b("div"),l=b("div"),n=b("div"),r=b("h5"),r.textContent=f,i=A(),s=b("button"),o=A(),a=b("div"),u=b("p"),d=b("strong"),h=S("Are you sure you want to delete all events that occurred before "),k=S(c[0]),D=S("?"),M=A(),N=b("p"),N.textContent=U,G=A(),g=b("div"),E=b("button"),E.textContent=B,q=A(),R=b("button"),R.textContent=z,this.h()},l(Q){e=v(Q,"DIV",{class:!0,tabindex:!0});var te=w(e);t=v(te,"DIV",{class:!0});var L=w(t);l=v(L,"DIV",{class:!0});var j=w(l);n=v(j,"DIV",{class:!0});var P=w(n);r=v(P,"H5",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-1q5kfxz"&&(r.textContent=f),i=O(P),s=v(P,"BUTTON",{type:!0,class:!0,"aria-label":!0}),w(s).forEach(m),P.forEach(m),o=O(j),a=v(j,"DIV",{class:!0});var x=w(a);u=v(x,"P",{class:!0});var re=w(u);d=v(re,"STRONG",{});var H=w(d);h=T(H,"Are you sure you want to delete all events that occurred before "),k=T(H,c[0]),D=T(H,"?"),H.forEach(m),re.forEach(m),M=O(x),N=v(x,"P",{class:!0,"data-svelte-h":!0}),Y(N)!=="svelte-xypebr"&&(N.textContent=U),x.forEach(m),G=O(j),g=v(j,"DIV",{class:!0});var ae=w(g);E=v(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(E)!=="svelte-82sh3j"&&(E.textContent=B),q=O(ae),R=v(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(R)!=="svelte-1iqa8gj"&&(R.textContent=z),ae.forEach(m),j.forEach(m),L.forEach(m),te.forEach(m),this.h()},h(){p(r,"class","modal-title"),p(s,"type","button"),p(s,"class","btn-close btn-close-white"),p(s,"aria-label","Close"),p(n,"class","modal-header bg-danger text-white"),p(u,"class","mb-3"),p(N,"class","mb-0 text-muted small"),p(a,"class","modal-body"),p(E,"type","button"),p(E,"class","btn btn-secondary"),p(R,"type","button"),p(R,"class","btn btn-danger"),p(g,"class","modal-footer"),p(l,"class","modal-content"),p(t,"class","modal-dialog"),p(e,"class","modal svelte-1s1xr1"),p(e,"tabindex","-1")},m(Q,te){C(Q,e,te),_(e,t),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(l,o),_(l,a),_(a,u),_(u,d),_(d,h),_(d,k),_(d,D),_(a,M),_(a,N),_(l,G),_(l,g),_(g,E),_(g,q),_(g,R),W||(Z=[le(s,"click",c[2]),le(E,"click",c[2]),le(R,"click",c[1])],W=!0)},p(Q,[te]){te&1&&J(k,Q[0])},i:K,o:K,d(Q){Q&&m(e),W=!1,Oe(Z)}}}function $t(c,e,t){let{cutoffDate:l}=e,{callback:n}=e;function r(){n(!0)}function f(){n(!1)}return c.$$set=i=>{"cutoffDate"in i&&t(0,l=i.cutoffDate),"callback"in i&&t(3,n=i.callback)},[l,r,f,n]}class Lt extends De{constructor(e){super(),Ce(this,e,$t,Vt,we,{cutoffDate:0,callback:3})}}const{Map:Ne}=pt;function Be(c,e,t){const l=c.slice();return l[46]=e[t][0],l[47]=e[t][1],l}function We(c,e,t){const l=c.slice();l[50]=e[t];const n=he(l[50].key);l[51]=n;const r=Pe(l[51],{weekStartsOn:1});l[52]=r;const f=dt(l[52]);l[53]=f;const i=_t(l[52],l[53],{weekStartsOn:1})+1;l[54]=i;const s=l[17](l[50].key);l[55]=s;const o=l[50].days.reduce((a,u)=>a+u.events.length,0);return l[56]=o,l}function je(c,e,t){const l=c.slice();return l[59]=e[t],l}function Ge(c,e,t){const l=c.slice();return l[62]=e[t],l}function Rt(c){let e,t;return e=new yt({props:{eventItem:c[7],drawerId:c[0],name:"past-event-item-form"}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&128&&(r.eventItem=l[7]),n[0]&1&&(r.drawerId=l[0]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function qe(c){let e,t,l,n;const r=[Bt,Ut],f=[];function i(s,o){return s[19]?0:1}return e=i(c),t=f[e]=r[e](c),{c(){t.c(),l=X()},l(s){t.l(s),l=X()},m(s,o){f[e].m(s,o),C(s,l,o),n=!0},p(s,o){let a=e;e=i(s),e===a?f[e].p(s,o):(se(),$(f[a],1,1,()=>{f[a]=null}),ne(),t=f[e],t?t.p(s,o):(t=f[e]=r[e](s),t.c()),I(t,1),t.m(l.parentNode,l))},i(s){n||(I(t),n=!0)},o(s){$(t),n=!1},d(s){s&&m(l),f[e].d(s)}}}function Ut(c){let e,t,l;return t=new Dt({}),{c(){e=b("div"),ue(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var r=w(e);fe(t.$$.fragment,r),r.forEach(m),this.h()},h(){p(e,"class","d-flex flex-column gap-4")},m(n,r){C(n,e,r),ce(t,e,null),l=!0},p:K,i(n){l||(I(t.$$.fragment,n),l=!0)},o(n){$(t.$$.fragment,n),l=!1},d(n){n&&m(e),ie(t)}}}function Bt(c){let e,t,l,n,r="Past Events",f,i,s,o,a,u=c[18]&&c[13]&&Fe(c);const d=[qt,Gt],h=[];function k(D,M){return D[2].length?0:1}return s=k(c),o=h[s]=d[s](c),{c(){e=b("div"),t=b("div"),l=b("div"),n=b("span"),n.textContent=r,f=A(),u&&u.c(),i=A(),o.c(),this.h()},l(D){e=v(D,"DIV",{class:!0});var M=w(e);t=v(M,"DIV",{class:!0});var N=w(t);l=v(N,"DIV",{class:!0});var U=w(l);n=v(U,"SPAN",{"data-svelte-h":!0}),Y(n)!=="svelte-15uqv9t"&&(n.textContent=r),f=O(U),u&&u.l(U),U.forEach(m),N.forEach(m),i=O(M),o.l(M),M.forEach(m),this.h()},h(){p(l,"class","d-flex justify-content-between align-items-center gap-3 flex-wrap fw-lighter d-flex justify-content-end"),p(t,"class","card-header"),p(e,"class","card")},m(D,M){C(D,e,M),_(e,t),_(t,l),_(l,n),_(l,f),u&&u.m(l,null),_(e,i),h[s].m(e,null),a=!0},p(D,M){D[18]&&D[13]?u?u.p(D,M):(u=Fe(D),u.c(),u.m(l,null)):u&&(u.d(1),u=null);let N=s;s=k(D),s===N?h[s].p(D,M):(se(),$(h[N],1,1,()=>{h[N]=null}),ne(),o=h[s],o?o.p(D,M):(o=h[s]=d[s](D),o.c()),I(o,1),o.m(e,null))},i(D){a||(I(o),a=!0)},o(D){$(o),a=!1},d(D){D&&m(e),u&&u.d(),h[s].d()}}}function Fe(c){let e,t,l;function n(i,s){return i[5]?jt:Wt}let r=n(c),f=r(c);return{c(){e=b("button"),f.c(),this.h()},l(i){e=v(i,"BUTTON",{class:!0,type:!0});var s=w(e);f.l(s),s.forEach(m),this.h()},h(){p(e,"class","btn btn-sm btn-outline-danger"),p(e,"type","button"),e.disabled=c[5]},m(i,s){C(i,e,s),f.m(e,null),t||(l=le(e,"click",c[30]),t=!0)},p(i,s){r===(r=n(i))&&f?f.p(i,s):(f.d(1),f=r(i),f&&(f.c(),f.m(e,null))),s[0]&32&&(e.disabled=i[5])},d(i){i&&m(e),f.d(),t=!1,l()}}}function Wt(c){let e,t,l;return{c(){e=S("Delete Past Events ("),t=S(c[16]),l=S(")")},l(n){e=T(n,"Delete Past Events ("),t=T(n,c[16]),l=T(n,")")},m(n,r){C(n,e,r),C(n,t,r),C(n,l,r)},p(n,r){r[0]&65536&&J(t,n[16])},d(n){n&&(m(e),m(t),m(l))}}}function jt(c){let e;return{c(){e=S("Deleting…")},l(t){e=T(t,"Deleting…")},m(t,l){C(t,e,l)},p:K,d(t){t&&m(e)}}}function Gt(c){let e,t="No past events available.";return{c(){e=b("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-aczpuf"&&(e.textContent=t),this.h()},h(){p(e,"class","card-body text-muted small")},m(l,n){C(l,e,n)},p:K,i:K,o:K,d(l){l&&m(e)}}}function qt(c){let e,t=[],l=new Ne,n,r,f,i=me(Object.entries(c[15]));const s=a=>a[46];for(let a=0;a<i.length;a+=1){let u=Be(c,i,a),d=s(u);l.set(d,t[a]=Qe(d,u))}let o=(c[14]||c[12])&&Ye(c);return{c(){e=b("ul");for(let a=0;a<t.length;a+=1)t[a].c();n=A(),o&&o.c(),r=X(),this.h()},l(a){e=v(a,"UL",{class:!0});var u=w(e);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(m),n=O(a),o&&o.l(a),r=X(),this.h()},h(){p(e,"class","list-group list-group-flush border-top-0")},m(a,u){C(a,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);C(a,n,u),o&&o.m(a,u),C(a,r,u),f=!0},p(a,u){u[0]&25329681&&(i=me(Object.entries(a[15])),se(),t=Ie(t,u,s,1,a,i,l,e,Me,Qe,null,Be),ne()),a[14]||a[12]?o?o.p(a,u):(o=Ye(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(a){if(!f){for(let u=0;u<i.length;u+=1)I(t[u]);f=!0}},o(a){for(let u=0;u<t.length;u+=1)$(t[u]);f=!1},d(a){a&&(m(e),m(n),m(r));for(let u=0;u<t.length;u+=1)t[u].d();o&&o.d(a)}}}function ze(c){let e,t,l,n;const r=[zt,Ft],f=[];function i(s,o){return s[50].days.length?0:1}return e=i(c),t=f[e]=r[e](c),{c(){t.c(),l=X()},l(s){t.l(s),l=X()},m(s,o){f[e].m(s,o),C(s,l,o),n=!0},p(s,o){let a=e;e=i(s),e===a?f[e].p(s,o):(se(),$(f[a],1,1,()=>{f[a]=null}),ne(),t=f[e],t?t.p(s,o):(t=f[e]=r[e](s),t.c()),I(t,1),t.m(l.parentNode,l))},i(s){n||(I(t),n=!0)},o(s){$(t),n=!1},d(s){s&&m(l),f[e].d(s)}}}function Ft(c){let e,t="No events scheduled this week.";return{c(){e=b("li"),e.textContent=t,this.h()},l(l){e=v(l,"LI",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1tq6asq"&&(e.textContent=t),this.h()},h(){p(e,"class","list-group-item py-3 text-muted")},m(l,n){C(l,e,n)},p:K,i:K,o:K,d(l){l&&m(e)}}}function zt(c){let e=[],t=new Ne,l,n,r=me(c[50].days);const f=i=>i[59].key;for(let i=0;i<r.length;i+=1){let s=je(c,r,i),o=f(s);t.set(o,e[i]=Xe(o,s))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=X()},l(i){for(let s=0;s<e.length;s+=1)e[s].l(i);l=X()},m(i,s){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(i,s);C(i,l,s),n=!0},p(i,s){s[0]&16810001&&(r=me(i[50].days),se(),e=Ie(e,s,f,1,i,r,t,l.parentNode,Me,Xe,l,je),ne())},i(i){if(!n){for(let s=0;s<r.length;s+=1)I(e[s]);n=!0}},o(i){for(let s=0;s<e.length;s+=1)$(e[s]);n=!1},d(i){i&&m(l);for(let s=0;s<e.length;s+=1)e[s].d(i)}}}function He(c){let e,t,l,n,r,f;function i(){return c[37](c[62])}return{c(){e=b("div"),t=b("button"),l=b("i"),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=w(e);t=v(o,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var a=w(t);l=v(a,"I",{class:!0}),w(l).forEach(m),a.forEach(m),o.forEach(m),this.h()},h(){p(l,"class","bi bi-pencil-square"),p(t,"class","btn btn-sm btn-primary"),p(t,"type","button"),p(t,"data-bs-toggle","offcanvas"),p(t,"data-bs-target",n="#"+c[0]),p(t,"aria-controls",c[0]),p(e,"class","event-actions svelte-b48x49")},m(s,o){C(s,e,o),_(e,t),_(t,l),r||(f=le(t,"click",i),r=!0)},p(s,o){c=s,o[0]&1&&n!==(n="#"+c[0])&&p(t,"data-bs-target",n),o[0]&1&&p(t,"aria-controls",c[0])},d(s){s&&m(e),r=!1,f()}}}function Ke(c,e){let t,l,n,r,f,i;n=new wt({props:{item:e[62],showDate:!1}});let s=e[4]&&He(e);return{key:c,first:null,c(){t=b("div"),l=b("div"),ue(n.$$.fragment),r=A(),s&&s.c(),f=A(),this.h()},l(o){t=v(o,"DIV",{class:!0});var a=w(t);l=v(a,"DIV",{class:!0});var u=w(l);fe(n.$$.fragment,u),u.forEach(m),r=O(a),s&&s.l(a),f=O(a),a.forEach(m),this.h()},h(){p(l,"class","event-content svelte-b48x49"),p(t,"class","daily-event-row svelte-b48x49"),this.first=t},m(o,a){C(o,t,a),_(t,l),ce(n,l,null),_(t,r),s&&s.m(t,null),_(t,f),i=!0},p(o,a){e=o;const u={};a[0]&32768&&(u.item=e[62]),n.$set(u),e[4]?s?s.p(e,a):(s=He(e),s.c(),s.m(t,f)):s&&(s.d(1),s=null)},i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){$(n.$$.fragment,o),i=!1},d(o){o&&m(t),ie(n),s&&s.d()}}}function Xe(c,e){let t,l,n,r,f=e[59].displayDay+"",i,s,o,a=e[59].displayDate+"",u,d,h,k=[],D=new Ne,M,N,U=me(e[59].events);const G=g=>g[62].id??`${g[62].start_time}-${g[62].meta_data?.recurring_instance_index??0}`;for(let g=0;g<U.length;g+=1){let E=Ge(e,U,g),B=G(E);D.set(B,k[g]=Ke(B,E))}return{key:c,first:null,c(){t=b("li"),l=b("div"),n=b("div"),r=b("strong"),i=S(f),s=A(),o=b("small"),u=S(a),d=A(),h=b("div");for(let g=0;g<k.length;g+=1)k[g].c();M=A(),this.h()},l(g){t=v(g,"LI",{class:!0});var E=w(t);l=v(E,"DIV",{class:!0});var B=w(l);n=v(B,"DIV",{class:!0});var q=w(n);r=v(q,"STRONG",{});var R=w(r);i=T(R,f),R.forEach(m),s=O(q),o=v(q,"SMALL",{class:!0});var z=w(o);u=T(z,a),z.forEach(m),q.forEach(m),d=O(B),h=v(B,"DIV",{class:!0});var W=w(h);for(let Z=0;Z<k.length;Z+=1)k[Z].l(W);W.forEach(m),B.forEach(m),M=O(E),E.forEach(m),this.h()},h(){p(o,"class","text-muted"),p(n,"class","event-date-column d-flex flex-column align-items-start text-nowrap svelte-b48x49"),p(h,"class","d-flex flex-column gap-3 flex-grow-1"),p(l,"class","d-flex flex-column flex-md-row gap-3"),p(t,"class","list-group-item py-3"),this.first=t},m(g,E){C(g,t,E),_(t,l),_(l,n),_(n,r),_(r,i),_(n,s),_(n,o),_(o,u),_(l,d),_(l,h);for(let B=0;B<k.length;B+=1)k[B]&&k[B].m(h,null);_(t,M),N=!0},p(g,E){e=g,(!N||E[0]&32768)&&f!==(f=e[59].displayDay+"")&&J(i,f),(!N||E[0]&32768)&&a!==(a=e[59].displayDate+"")&&J(u,a),E[0]&16810001&&(U=me(e[59].events),se(),k=Ie(k,E,G,1,e,U,D,h,Me,Ke,null,Ge),ne())},i(g){if(!N){for(let E=0;E<U.length;E+=1)I(k[E]);N=!0}},o(g){for(let E=0;E<k.length;E+=1)$(k[E]);N=!1},d(g){g&&m(t);for(let E=0;E<k.length;E+=1)k[E].d()}}}function Je(c,e){let t,l,n,r,f,i,s,o,a=e[54]+"",u,d,h=e[56]+"",k,D,M=e[56]===1?"":"s",N,U,G,g,E=e[50].label+"",B,q,R,z,W,Z,Q;function te(){return e[36](e[50])}let L=e[55]&&ze(e);return{key:c,first:null,c(){t=b("li"),l=b("button"),n=b("span"),r=b("i"),i=A(),s=b("span"),o=S("Week "),u=S(a),d=S(" ["),k=S(h),D=S(" Event"),N=S(M),U=S("]"),G=A(),g=b("span"),B=S(E),R=A(),L&&L.c(),z=X(),this.h()},l(j){t=v(j,"LI",{class:!0});var P=w(t);l=v(P,"BUTTON",{class:!0,title:!0});var x=w(l);n=v(x,"SPAN",{class:!0});var re=w(n);r=v(re,"I",{class:!0}),w(r).forEach(m),i=O(re),s=v(re,"SPAN",{class:!0});var H=w(s);o=T(H,"Week "),u=T(H,a),d=T(H," ["),k=T(H,h),D=T(H," Event"),N=T(H,M),U=T(H,"]"),H.forEach(m),re.forEach(m),G=O(x),g=v(x,"SPAN",{});var ae=w(g);B=T(ae,E),ae.forEach(m),x.forEach(m),P.forEach(m),R=O(j),L&&L.l(j),z=X(),this.h()},h(){p(r,"class",f="bi "+(e[55]?"bi-chevron-up":"bi-chevron-down")),p(s,"class","text-muted"),p(n,"class","d-flex align-items-center gap-2"),ye(g,"opacity-50",e[56]===0),p(l,"class","week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-b48x49"),p(l,"title",q=e[55]?"Click to collapse week":"Click to expand week"),ye(l,"text-muted",e[56]===0),p(t,"class","list-group-item list-group-item-light text-uppercase small fw-lighter p-0"),this.first=t},m(j,P){C(j,t,P),_(t,l),_(l,n),_(n,r),_(n,i),_(n,s),_(s,o),_(s,u),_(s,d),_(s,k),_(s,D),_(s,N),_(s,U),_(l,G),_(l,g),_(g,B),C(j,R,P),L&&L.m(j,P),C(j,z,P),W=!0,Z||(Q=le(l,"click",te),Z=!0)},p(j,P){e=j,(!W||P[0]&163840&&f!==(f="bi "+(e[55]?"bi-chevron-up":"bi-chevron-down")))&&p(r,"class",f),(!W||P[0]&32768)&&a!==(a=e[54]+"")&&J(u,a),(!W||P[0]&32768)&&h!==(h=e[56]+"")&&J(k,h),(!W||P[0]&32768)&&M!==(M=e[56]===1?"":"s")&&J(N,M),(!W||P[0]&32768)&&E!==(E=e[50].label+"")&&J(B,E),(!W||P[0]&32768)&&ye(g,"opacity-50",e[56]===0),(!W||P[0]&163840&&q!==(q=e[55]?"Click to collapse week":"Click to expand week"))&&p(l,"title",q),(!W||P[0]&32768)&&ye(l,"text-muted",e[56]===0),e[55]?L?(L.p(e,P),P[0]&163840&&I(L,1)):(L=ze(e),L.c(),I(L,1),L.m(z.parentNode,z)):L&&(se(),$(L,1,1,()=>{L=null}),ne())},i(j){W||(I(L),W=!0)},o(j){$(L),W=!1},d(j){j&&(m(t),m(R),m(z)),L&&L.d(j),Z=!1,Q()}}}function Qe(c,e){let t,l=e[47].label+"",n,r,f=[],i=new Ne,s,o,a=me(e[47].weeks);const u=d=>d[50].key;for(let d=0;d<a.length;d+=1){let h=We(e,a,d),k=u(h);i.set(k,f[d]=Je(k,h))}return{key:c,first:null,c(){t=b("li"),n=S(l),r=A();for(let d=0;d<f.length;d+=1)f[d].c();s=X(),this.h()},l(d){t=v(d,"LI",{class:!0});var h=w(t);n=T(h,l),h.forEach(m),r=O(d);for(let k=0;k<f.length;k+=1)f[k].l(d);s=X(),this.h()},h(){p(t,"class","list-group-item bg-secondary text-white fw-semibold"),this.first=t},m(d,h){C(d,t,h),_(t,n),C(d,r,h);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(d,h);C(d,s,h),o=!0},p(d,h){e=d,(!o||h[0]&32768)&&l!==(l=e[47].label+"")&&J(n,l),h[0]&25329681&&(a=me(e[47].weeks),se(),f=Ie(f,h,u,1,e,a,i,s.parentNode,Me,Je,s,We),ne())},i(d){if(!o){for(let h=0;h<a.length;h+=1)I(f[h]);o=!0}},o(d){for(let h=0;h<f.length;h+=1)$(f[h]);o=!1},d(d){d&&(m(t),m(r),m(s));for(let h=0;h<f.length;h+=1)f[h].d(d)}}}function Ye(c){let e,t,l,n=(c[1]?.length??0)+"",r,f,i=(c[3]?.length??0)+"",s,o;function a(h,k){return h[12]?Kt:Ht}let u=a(c),d=u(c);return{c(){e=b("div"),t=b("small"),l=S("Showing "),r=S(n),f=S(" of "),s=S(i),o=A(),d.c(),this.h()},l(h){e=v(h,"DIV",{class:!0});var k=w(e);t=v(k,"SMALL",{});var D=w(t);l=T(D,"Showing "),r=T(D,n),f=T(D," of "),s=T(D,i),D.forEach(m),o=O(k),d.l(k),k.forEach(m),this.h()},h(){p(e,"class","card-footer d-flex align-items-center justify-content-between")},m(h,k){C(h,e,k),_(e,t),_(t,l),_(t,r),_(t,f),_(t,s),_(e,o),d.m(e,null)},p(h,k){k[0]&2&&n!==(n=(h[1]?.length??0)+"")&&J(r,n),k[0]&8&&i!==(i=(h[3]?.length??0)+"")&&J(s,i),u===(u=a(h))&&d?d.p(h,k):(d.d(1),d=u(h),d&&(d.c(),d.m(e,null)))},d(h){h&&m(e),d.d()}}}function Ht(c){let e,t,l="More",n,r,f="All",i,s;return{c(){e=b("div"),t=b("button"),t.textContent=l,n=A(),r=b("button"),r.textContent=f,this.h()},l(o){e=v(o,"DIV",{class:!0});var a=w(e);t=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1ox9u2o"&&(t.textContent=l),n=O(a),r=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(r)!=="svelte-1w2ej6j"&&(r.textContent=f),a.forEach(m),this.h()},h(){p(t,"class","btn btn-primary btn-sm"),p(r,"class","btn btn-outline-primary btn-sm"),p(e,"class","d-flex gap-2")},m(o,a){C(o,e,a),_(e,t),_(e,n),_(e,r),i||(s=[le(t,"click",c[27]),le(r,"click",c[28])],i=!0)},p:K,d(o){o&&m(e),i=!1,Oe(s)}}}function Kt(c){let e,t="Reset",l,n;return{c(){e=b("button"),e.textContent=t,this.h()},l(r){e=v(r,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-161htn1"&&(e.textContent=t),this.h()},h(){p(e,"class","btn btn-outline-secondary btn-sm")},m(r,f){C(r,e,f),l||(n=le(e,"click",c[29]),l=!0)},p:K,d(r){r&&m(e),l=!1,n()}}}function Ze(c){let e,t;return e=new Lt({props:{cutoffDate:c[9],callback:c[31]}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&512&&(r.cutoffDate=l[9]),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function xe(c){let e,t;return e=new At({props:{deleted:c[11].deleted,skipped:c[11].skipped,callback:c[32]}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,n){const r={};n[0]&2048&&(r.deleted=l[11].deleted),n[0]&2048&&(r.skipped=l[11].skipped),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}function Xt(c){let e,t,l,n,r,f;e=new Ct({props:{title:c[6],id:c[0],$$slots:{default:[Rt]},$$scope:{ctx:c}}});let i=c[18]&&qe(c),s=c[8]&&Ze(c),o=c[10]&&xe(c);return{c(){ue(e.$$.fragment),t=A(),i&&i.c(),l=A(),s&&s.c(),n=A(),o&&o.c(),r=X()},l(a){fe(e.$$.fragment,a),t=O(a),i&&i.l(a),l=O(a),s&&s.l(a),n=O(a),o&&o.l(a),r=X()},m(a,u){ce(e,a,u),C(a,t,u),i&&i.m(a,u),C(a,l,u),s&&s.m(a,u),C(a,n,u),o&&o.m(a,u),C(a,r,u),f=!0},p(a,u){const d={};u[0]&64&&(d.title=a[6]),u[0]&1&&(d.id=a[0]),u[0]&129|u[2]&8&&(d.$$scope={dirty:u,ctx:a}),e.$set(d),a[18]?i?(i.p(a,u),u[0]&262144&&I(i,1)):(i=qe(a),i.c(),I(i,1),i.m(l.parentNode,l)):i&&(se(),$(i,1,1,()=>{i=null}),ne()),a[8]?s?(s.p(a,u),u[0]&256&&I(s,1)):(s=Ze(a),s.c(),I(s,1),s.m(n.parentNode,n)):s&&(se(),$(s,1,1,()=>{s=null}),ne()),a[10]?o?(o.p(a,u),u[0]&1024&&I(o,1)):(o=xe(a),o.c(),I(o,1),o.m(r.parentNode,r)):o&&(se(),$(o,1,1,()=>{o=null}),ne())},i(a){f||(I(e.$$.fragment,a),I(i),I(s),I(o),f=!0)},o(a){$(e.$$.fragment,a),$(i),$(s),$(o),f=!1},d(a){a&&(m(t),m(l),m(n),m(r)),ie(e,a),i&&i.d(a),s&&s.d(a),o&&o.d(a)}}}const et=4,Jt=4;function Qt(c,e,t){let l,n,r,f,i,s,o,a,u,d,h,k,D;const{stores:{currentUserHasPermission:M,currentUser:N}}=vt();be(c,M,y=>t(39,u=y));const{stores:{ready:U,dbData:G,weeksExpanded:g},actions:{reload:E}}=gt();be(c,U,y=>t(19,D=y)),be(c,g,y=>t(35,h=y));const B={title:"Event",description:"",location:"",event_type:"calendar_event"};let{formId:q=It()}=e,R=!1,z=!1,W="",Z={...B},Q=!1,te="",L=!1,j={deleted:0,skipped:0},P=et,x=!1;const re=Ee();let H={};function ae(y){return l.includes(y)}function Ae(y){const F=H[y]??ae(y);t(34,H={...H,[y]:!F})}const Ve=y=>{t(6,W="Event Item"),t(7,Z={...y,category:y?.meta_data?.category})},$e=Le(G,y=>{const F=Ee();return(y??[]).filter(V=>!(V.event_type!=="calendar_event"||!V.start_time||he(V.start_time)>=F||V.recurrence_rule&&(!V.recurrence_end_date||V.recurrence_end_date&&he(V.recurrence_end_date)>=F)))});be(c,$e,y=>t(3,d=y));const Te=Le(N,y=>y.roles?.includes("system-root")??!1);be(c,Te,y=>t(18,k=y));function tt(){t(33,P+=Jt)}function lt(){t(33,P=520),t(12,x=!0)}function st(){t(33,P=et),t(12,x=!1)}const nt=()=>{if(!R||z||!ft(Te)||!o)return;const y=Ee();t(9,te=de(y,"MMM d, yyyy")),t(8,Q=!0)};async function rt(y){if(t(8,Q=!1),!y)return;const F=Ee();t(5,z=!0);try{const V=await Et(F);await E(),t(11,j=V),t(10,L=!0)}catch(V){console.error("Failed to delete past events",V),alert("Failed to delete past events. Please try again.")}finally{t(5,z=!1)}}function at(){t(10,L=!1)}ct(async()=>{t(4,R=u(Se.CreateEvents)||u(Se.EditOwnOrgEvents)||u(Se.EditAllEvents)),await E()});const ot=y=>Ae(y.key),it=y=>Ve(y);return c.$$set=y=>{"formId"in y&&t(0,q=y.formId)},c.$$.update=()=>{c.$$.dirty[0]&8|c.$$.dirty[1]&4&&t(1,r=(d??[]).filter(y=>{if(!y.start_time)return!1;const F=he(y.start_time),V=Mt(re,P);return F>=V&&F<re})),c.$$.dirty[0]&2&&t(2,i=(()=>{const y=new Map;for(const F of r){if(!F.start_time)continue;const V=he(F.start_time),ee=bt(V,{weekStartsOn:1}),oe=Pe(V,{weekStartsOn:1}),_e=de(ee,"yyyy-MM-dd"),ke=`${de(ee,"MMM d")} – ${de(oe,"MMM d")}`;let pe=y.get(_e);pe||(pe={key:_e,label:ke,days:new Map},y.set(_e,pe));const ve=de(V,"yyyy-MM-dd");let ge=pe.days.get(ve);ge||(ge={key:ve,displayDay:de(V,"EEE"),displayDate:de(V,"MMM d"),events:[]},pe.days.set(ve,ge)),ge.events.push(F)}return Array.from(y.values()).sort((F,V)=>F.key<V.key?1:-1).map(F=>({key:F.key,label:F.label,days:Array.from(F.days.values()).sort((V,ee)=>V.key<ee.key?1:-1).map(V=>({...V,events:V.events.slice().sort((ee,oe)=>{const _e=ee.is_all_day?0:1,ke=oe.is_all_day?0:1;if(_e!==ke)return _e-ke;const pe=ee.start_time?he(ee.start_time).getTime():Number.MAX_SAFE_INTEGER,ve=oe.start_time?he(oe.start_time).getTime():Number.MAX_SAFE_INTEGER;return pe-ve})}))}))})()),c.$$.dirty[0]&4&&(l=(()=>{if(i.length===0)return[];const y=[];return i[0]&&y.push(i[0].key),i[1]&&y.push(i[1].key),y})()),c.$$.dirty[1]&24&&t(17,n=y=>h?!0:H[y]!==void 0?H[y]:ae(y)),c.$$.dirty[0]&2&&t(16,f=r.length),c.$$.dirty[0]&4&&t(15,s=i.reduce((y,F)=>{const V=he(F.key),ee=Pe(V,{weekStartsOn:1}),oe=de(ee,"yyyy-MM"),_e=de(ee,"MMMM yyyy");return y[oe]||(y[oe]={label:_e,weeks:[]}),y[oe].weeks.push(F),y},{})),c.$$.dirty[0]&2&&t(13,o=r.length>0),c.$$.dirty[0]&10&&t(14,a=d.length>r.length)},[q,r,i,d,R,z,W,Z,Q,te,L,j,x,o,a,s,f,n,k,D,M,U,g,Ae,Ve,$e,Te,tt,lt,st,nt,rt,at,P,H,h,ot,it]}class Yt extends De{constructor(e){super(),Ce(this,e,Qt,Xt,we,{formId:0},null,[-1,-1,-1])}}function Zt(c){let e,t,l,n,r,f,i;return t=new ht({}),n=new mt({}),f=new Yt({}),{c(){e=b("div"),ue(t.$$.fragment),l=A(),ue(n.$$.fragment),r=A(),ue(f.$$.fragment),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=w(e);fe(t.$$.fragment,o),l=O(o),fe(n.$$.fragment,o),r=O(o),fe(f.$$.fragment,o),o.forEach(m),this.h()},h(){p(e,"class","d-flex flex-column gap-4")},m(s,o){C(s,e,o),ce(t,e,null),_(e,l),ce(n,e,null),_(e,r),ce(f,e,null),i=!0},p:K,i(s){i||(I(t.$$.fragment,s),I(n.$$.fragment,s),I(f.$$.fragment,s),i=!0)},o(s){$(t.$$.fragment,s),$(n.$$.fragment,s),$(f.$$.fragment,s),i=!1},d(s){s&&m(e),ie(t),ie(n),ie(f)}}}function xt(c){let e,t;return e=new ut({props:{pageTitle:"Announcements & Events",$$slots:{default:[Zt]},$$scope:{ctx:c}}}),{c(){ue(e.$$.fragment)},l(l){fe(e.$$.fragment,l)},m(l,n){ce(e,l,n),t=!0},p(l,[n]){const r={};n&1&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){ie(e,l)}}}class dl extends De{constructor(e){super(),Ce(this,e,null,xt,we,{})}}export{dl as component,ul as universal};
