import{s as xe,d as k,i as Q,C as S,J as Ce,n as fe,I as pe,D as H,b as n,R as Me,K as De,p as s,c as d,e as P,w as L,g as v,h as f,j as g,a as Ne,f as He,t as Ve}from"../chunks/BQ7GsIJB.js";import{S as Le,i as Te,t as te,a as se,g as qe,e as Se,d as Ee,m as Ie,c as Pe,b as Ae}from"../chunks/BJAXi6Wx.js";import{g as Be}from"../chunks/4GBrEyEq.js";import{g as Ue}from"../chunks/j5sOqlqC.js";import{L as Re}from"../chunks/a3O7QX08.js";function Oe(o){let t,e,a='<img src="/assets/logo.png" alt="logo" class="logo svelte-1n4t3wo"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1>',r,u,m="Create Account",p,l,i=`Sign up to create an account. An administrator will assign your permissions after
			registration.`,c,y,h,V,A,X="Email address",W,w,G,E,M,q="Display Name (Optional)",le,T,re,R,me="This will be shown instead of your email",ae,D,B,he="Password",ne,Y,O,_e="Minimum 8 characters",ie,j,U,be="Confirm Password",oe,x,ue,J,ve='<a href="/auth/login" class="btn-link btn">Back to login</a> <button type="submit" class="btn btn-primary">Create Account</button>',ce,z,ge=`<small class="text-muted">Already have an account?
				<a href="/auth/login" class="link-primary">Sign in</a></small>`,de,ye,C=o[6]&&ke(o);function we(b,_){return b[5]?ze:Je}let Z=we(o),I=Z(o);return{c(){t=f("div"),e=f("a"),e.innerHTML=a,r=g(),u=f("h2"),u.textContent=m,p=g(),l=f("p"),l.textContent=i,c=g(),C&&C.c(),y=g(),h=f("form"),V=f("div"),A=f("label"),A.textContent=X,W=g(),w=f("input"),G=g(),E=f("div"),M=f("label"),M.textContent=q,le=g(),T=f("input"),re=g(),R=f("small"),R.textContent=me,ae=g(),D=f("div"),B=f("label"),B.textContent=he,ne=g(),I.c(),Y=g(),O=f("small"),O.textContent=_e,ie=g(),j=f("div"),U=f("label"),U.textContent=be,oe=g(),x=f("input"),ue=g(),J=f("div"),J.innerHTML=ve,ce=g(),z=f("div"),z.innerHTML=ge,this.h()},l(b){t=d(b,"DIV",{class:!0});var _=P(t);e=d(_,"A",{href:!0,class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1inzn7"&&(e.innerHTML=a),r=v(_),u=d(_,"H2",{class:!0,"data-svelte-h":!0}),L(u)!=="svelte-1bkrvel"&&(u.textContent=m),p=v(_),l=d(_,"P",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-19n8q35"&&(l.textContent=i),c=v(_),C&&C.l(_),y=v(_),h=d(_,"FORM",{class:!0});var N=P(h);V=d(N,"DIV",{});var $=P(V);A=d($,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(A)!=="svelte-4w1dqu"&&(A.textContent=X),W=v($),w=d($,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),$.forEach(k),G=v(N),E=d(N,"DIV",{});var F=P(E);M=d(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(M)!=="svelte-1npybh"&&(M.textContent=q),le=v(F),T=d(F,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),re=v(F),R=d(F,"SMALL",{class:!0,"data-svelte-h":!0}),L(R)!=="svelte-xtrwy0"&&(R.textContent=me),F.forEach(k),ae=v(N),D=d(N,"DIV",{});var K=P(D);B=d(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(B)!=="svelte-tyrfrg"&&(B.textContent=he),ne=v(K),I.l(K),Y=v(K),O=d(K,"SMALL",{class:!0,"data-svelte-h":!0}),L(O)!=="svelte-txew5q"&&(O.textContent=_e),K.forEach(k),ie=v(N),j=d(N,"DIV",{});var ee=P(j);U=d(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(U)!=="svelte-1f0nq9o"&&(U.textContent=be),oe=v(ee),x=d(ee,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),ee.forEach(k),ue=v(N),J=d(N,"DIV",{class:!0,"data-svelte-h":!0}),L(J)!=="svelte-yxo7lv"&&(J.innerHTML=ve),N.forEach(k),ce=v(_),z=d(_,"DIV",{class:!0,"data-svelte-h":!0}),L(z)!=="svelte-1y70ov0"&&(z.innerHTML=ge),_.forEach(k),this.h()},h(){s(e,"href","/home"),s(e,"class","header-content d-flex align-items-center gap-2 text-decoration-none svelte-1n4t3wo"),s(u,"class","h5"),s(l,"class","text-muted small"),s(A,"for","email"),s(A,"class","form-label"),s(w,"type","email"),s(w,"class","form-control"),s(w,"placeholder","your.email@example.com"),s(w,"id","email"),s(w,"aria-describedby","email"),w.required=!0,s(M,"for","displayName"),s(M,"class","form-label"),s(T,"type","text"),s(T,"class","form-control"),s(T,"placeholder","John Smith"),s(T,"id","displayName"),s(T,"aria-describedby","displayName"),s(R,"class","text-muted"),s(B,"for","password"),s(B,"class","form-label"),s(O,"class","text-muted"),s(U,"for","confirmPassword"),s(U,"class","form-label"),s(x,"type","password"),s(x,"class","form-control"),s(x,"placeholder","Re-enter password"),s(x,"id","confirmPassword"),s(x,"aria-describedby","confirmPassword"),x.required=!0,s(J,"class","d-flex justify-content-between align-items-center"),s(h,"class","d-flex gap-3 flex-column"),s(z,"class","text-center"),s(t,"class","container d-flex flex-column gap-3 mt-5 mb-5 svelte-1n4t3wo")},m(b,_){Q(b,t,_),n(t,e),n(t,r),n(t,u),n(t,p),n(t,l),n(t,c),C&&C.m(t,null),n(t,y),n(t,h),n(h,V),n(V,A),n(V,W),n(V,w),H(w,o[1]),n(h,G),n(h,E),n(E,M),n(E,le),n(E,T),H(T,o[2]),n(E,re),n(E,R),n(h,ae),n(h,D),n(D,B),n(D,ne),I.m(D,null),n(D,Y),n(D,O),n(h,ie),n(h,j),n(j,U),n(j,oe),n(j,x),H(x,o[4]),n(h,ue),n(h,J),n(t,ce),n(t,z),de||(ye=[S(w,"input",o[12]),Me(o[11].call(null,w)),S(T,"input",o[13]),S(x,"input",o[16]),S(h,"submit",De(o[8]))],de=!0)},p(b,_){b[6]?C?C.p(b,_):(C=ke(b),C.c(),C.m(t,y)):C&&(C.d(1),C=null),_&2&&w.value!==b[1]&&H(w,b[1]),_&4&&T.value!==b[2]&&H(T,b[2]),Z===(Z=we(b))&&I?I.p(b,_):(I.d(1),I=Z(b),I&&(I.c(),I.m(D,Y))),_&16&&x.value!==b[4]&&H(x,b[4])},i:fe,o:fe,d(b){b&&k(t),C&&C.d(),I.d(),de=!1,pe(ye)}}}function je(o){let t,e;return t=new Re({props:{message:o[6]}}),{c(){Ae(t.$$.fragment)},l(a){Pe(t.$$.fragment,a)},m(a,r){Ie(t,a,r),e=!0},p(a,r){const u={};r&64&&(u.message=a[6]),t.$set(u)},i(a){e||(se(t.$$.fragment,a),e=!0)},o(a){te(t.$$.fragment,a),e=!1},d(a){Ee(t,a)}}}function ke(o){let t,e,a,r,u,m,p;return{c(){t=f("div"),e=f("i"),r=g(),u=f("div"),m=Ve(o[6]),this.h()},l(l){t=d(l,"DIV",{class:!0,role:!0});var i=P(t);e=d(i,"I",{class:!0}),P(e).forEach(k),r=v(i),u=d(i,"DIV",{});var c=P(u);m=He(c,o[6]),c.forEach(k),i.forEach(k),this.h()},h(){s(e,"class",a="bi "+(o[7]==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill")),s(t,"class",p="alert "+(o[7]==="success"?"alert-success":"alert-danger")+" d-flex align-items-center gap-2"),s(t,"role","alert")},m(l,i){Q(l,t,i),n(t,e),n(t,r),n(t,u),n(u,m)},p(l,i){i&128&&a!==(a="bi "+(l[7]==="success"?"bi-check-circle-fill":"bi-exclamation-triangle-fill"))&&s(e,"class",a),i&64&&Ne(m,l[6]),i&128&&p!==(p="alert "+(l[7]==="success"?"alert-success":"alert-danger")+" d-flex align-items-center gap-2")&&s(t,"class",p)},d(l){l&&k(t)}}}function Je(o){let t,e,a,r,u='<i class="bi bi-eye"></i>',m,p;return{c(){t=f("div"),e=f("input"),a=g(),r=f("button"),r.innerHTML=u,this.h()},l(l){t=d(l,"DIV",{class:!0});var i=P(t);e=d(i,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),a=v(i),r=d(i,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),L(r)!=="svelte-1xq8rxc"&&(r.innerHTML=u),i.forEach(k),this.h()},h(){s(e,"type","password"),s(e,"class","form-control"),s(e,"placeholder","At least 8 characters"),s(e,"id","password"),s(e,"aria-describedby","password"),e.required=!0,s(r,"type","button"),s(r,"class","input-group-text"),s(r,"aria-label","Show password"),s(t,"class","input-group")},m(l,i){Q(l,t,i),n(t,e),H(e,o[3]),n(t,a),n(t,r),m||(p=[S(e,"input",o[15]),S(r,"click",o[9])],m=!0)},p(l,i){i&8&&e.value!==l[3]&&H(e,l[3])},d(l){l&&k(t),m=!1,pe(p)}}}function ze(o){let t,e,a,r,u='<i class="bi bi-eye-slash"></i>',m,p;return{c(){t=f("div"),e=f("input"),a=g(),r=f("button"),r.innerHTML=u,this.h()},l(l){t=d(l,"DIV",{class:!0});var i=P(t);e=d(i,"INPUT",{type:!0,class:!0,placeholder:!0,id:!0,"aria-describedby":!0}),a=v(i),r=d(i,"BUTTON",{type:!0,class:!0,"aria-label":!0,"data-svelte-h":!0}),L(r)!=="svelte-1dhefwr"&&(r.innerHTML=u),i.forEach(k),this.h()},h(){s(e,"type","text"),s(e,"class","form-control"),s(e,"placeholder","At least 8 characters"),s(e,"id","password"),s(e,"aria-describedby","password"),e.required=!0,s(r,"type","button"),s(r,"class","input-group-text"),s(r,"aria-label","Hide password"),s(t,"class","input-group")},m(l,i){Q(l,t,i),n(t,e),H(e,o[3]),n(t,a),n(t,r),m||(p=[S(e,"input",o[14]),S(r,"click",o[9])],m=!0)},p(l,i){i&8&&e.value!==l[3]&&H(e,l[3])},d(l){l&&k(t),m=!1,pe(p)}}}function Fe(o){let t,e,a,r,u,m;const p=[je,Oe],l=[];function i(c,y){return c[0]?0:1}return t=i(o),e=l[t]=p[t](o),{c(){e.c(),a=Ce()},l(c){e.l(c),a=Ce()},m(c,y){l[t].m(c,y),Q(c,a,y),r=!0,u||(m=S(window,"keydown",o[10]),u=!0)},p(c,[y]){let h=t;t=i(c),t===h?l[t].p(c,y):(qe(),te(l[h],1,1,()=>{l[h]=null}),Se(),e=l[t],e?e.p(c,y):(e=l[t]=p[t](c),e.c()),se(e,1),e.m(a.parentNode,a))},i(c){r||(se(e),r=!0)},o(c){te(e),r=!1},d(c){c&&k(a),l[t].d(c),u=!1,m()}}}function Ke(o,t,e){const{actions:{registerWithEmail:a}}=Be();let r=!1,u="",m="",p="",l="",i=!1,c="",y="error";const h=async()=>{if(e(0,r=!0),e(6,c=""),e(7,y="error"),!u||!p||!l){e(6,c="Email, password, and password confirmation are required"),e(0,r=!1);return}if(p!==l){e(6,c="Passwords do not match"),e(0,r=!1);return}if(p.length<8){e(6,c="Password must be at least 8 characters"),e(0,r=!1);return}const q=await a(u,p,m);q.success?(e(7,y="success"),e(6,c="Account created! Redirecting to login..."),setTimeout(()=>{Ue("/auth/login")},2e3)):(e(7,y="error"),e(6,c=q.error||"Registration failed"),e(0,r=!1))},V=()=>{e(5,i=!i)},A=q=>{q.key==="Enter"&&h()},X=q=>{q.focus()};function W(){u=this.value,e(1,u)}function w(){m=this.value,e(2,m)}function G(){p=this.value,e(3,p)}function E(){p=this.value,e(3,p)}function M(){l=this.value,e(4,l)}return[r,u,m,p,l,i,c,y,h,V,A,X,W,w,G,E,M]}class We extends Le{constructor(t){super(),Te(this,t,Ke,Fe,xe,{})}}function Ge(o){let t,e;return t=new We({}),{c(){Ae(t.$$.fragment)},l(a){Pe(t.$$.fragment,a)},m(a,r){Ie(t,a,r),e=!0},p:fe,i(a){e||(se(t.$$.fragment,a),e=!0)},o(a){te(t.$$.fragment,a),e=!1},d(a){Ee(t,a)}}}class et extends Le{constructor(t){super(),Te(this,t,null,Ge,xe,{})}}export{et as component};
