import{S as R,i as G,s as U,c as Te,d as w,e as O,t as M,a as z,u as ke,g as Ce,b as Se,r as Y,f as k,I as ee,h as L,v as p,m as q,O as J,F as Ie,j as C,k as D,l as E,y as Q,n as F,x as Z,o as S,p as N,z as $,q as V,$ as B,a5 as j,a6 as H,C as X,E as _e,P as te,a2 as De,H as Ee,G as Ne,B as pe,W as ie,A as re,K as ye}from"../chunks/DqXHCDdO.js";import"../chunks/IHki7fMi.js";import{P as ze}from"../chunks/CTHxc7fu.js";import{e as se}from"../chunks/CT_EUCFH.js";import{w as K}from"../chunks/D2VCS5L_.js";import{s as be}from"../chunks/ATn_r38n.js";import{D as Me}from"../chunks/xZX0tYEK.js";import{S as Le}from"../chunks/2aw1axux.js";import{t as oe}from"../chunks/CGP5gW96.js";import{S as ve}from"../chunks/DdQVfqtx.js";const Ae=!0,wt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ae},Symbol.toStringTag,{value:"Module"}));async function Pe(){const{data:t,error:e}=await be.from("callings").select("*");if(e)throw e;return t?.length?t:[]}const Oe=()=>{const t=K(!1),e=K(!1),l=K([]);return{stores:{ready:t,loading:e,data:l},actions:{init:async()=>{const r=await Pe();r?.length&&l.set(r)}}}},qe=()=>Oe();function Fe(t,e,l){var a=l||{},r=a.noTrailing,i=r===void 0?!1:r,s=a.noLeading,u=s===void 0?!1:s,o=a.debounceMode,f=o===void 0?void 0:o,n,c=!1,g=0;function _(){n&&clearTimeout(n)}function d(h){var A=h||{},y=A.upcomingOnly,T=y===void 0?!1:y;_(),c=!T}function m(){for(var h=arguments.length,A=new Array(h),y=0;y<h;y++)A[y]=arguments[y];var T=this,v=Date.now()-g;if(c)return;function b(){g=Date.now(),e.apply(T,A)}function I(){n=void 0}!u&&f&&!n&&b(),_(),f===void 0&&v>t?u?(g=Date.now(),i||(n=setTimeout(f?I:b,t))):b():i!==!0&&(n=setTimeout(f?I:b,f===void 0?t-v:t))}return m.cancel=d,m}function Ve(t,e,l){var a={},r=a.atBegin,i=r===void 0?!1:r;return Fe(t,e,{debounceMode:i!==!1})}function fe(t){let e,l='<span class="visually-hidden">Item not saved</span>';return{c(){e=S("span"),e.innerHTML=l,this.h()},l(a){e=C(a,"SPAN",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1g0a6ie"&&(e.innerHTML=l),this.h()},h(){k(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(a,r){L(a,e,r)},d(a){a&&w(e)}}}function Be(t){let e,l,a,r,i=t[3].message+"",s,u,o,f,n,c,g,_,d="Save",m,h,A,y;const T=t[6].default,v=Te(T,t,t[5],null);n=new Le({props:{size:"xs"}});let b=t[0]&&fe();return{c(){e=S("div"),v&&v.c(),l=N(),a=S("div"),r=S("small"),s=$(i),o=N(),f=S("span"),V(n.$$.fragment),c=N(),g=S("button"),_=S("span"),_.textContent=d,m=N(),b&&b.c(),this.h()},l(I){e=C(I,"DIV",{class:!0});var P=D(e);v&&v.l(P),l=E(P),a=C(P,"DIV",{class:!0});var W=D(a);r=C(W,"SMALL",{class:!0});var le=D(r);s=Q(le,i),le.forEach(w),o=E(W),f=C(W,"SPAN",{});var ae=D(f);F(n.$$.fragment,ae),ae.forEach(w),c=E(W),g=C(W,"BUTTON",{class:!0});var x=D(g);_=C(x,"SPAN",{"data-svelte-h":!0}),Z(_)!=="svelte-l126tb"&&(_.textContent=d),m=E(x),b&&b.l(x),x.forEach(w),W.forEach(w),P.forEach(w),this.h()},h(){k(r,"class",u="fw-lighter fst-italic text-"+t[3].type),ee(f,"d-none",!t[1]),k(g,"class","btn btn-primary position-relative"),k(a,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),k(e,"class","d-flex flex-column gap-4")},m(I,P){L(I,e,P),v&&v.m(e,null),p(e,l),p(e,a),p(a,r),p(r,s),p(a,o),p(a,f),q(n,f,null),p(a,c),p(a,g),p(g,_),p(g,m),b&&b.m(g,null),h=!0,A||(y=J(g,"click",function(){Ie(t[2])&&t[2].apply(this,arguments)}),A=!0)},p(I,[P]){t=I,v&&v.p&&(!h||P&32)&&ke(v,T,t,t[5],h?Se(T,t[5],P,null):Ce(t[5]),null),(!h||P&8)&&i!==(i=t[3].message+"")&&Y(s,i),(!h||P&8&&u!==(u="fw-lighter fst-italic text-"+t[3].type))&&k(r,"class",u),(!h||P&2)&&ee(f,"d-none",!t[1]),t[0]?b||(b=fe(),b.c(),b.m(g,null)):b&&(b.d(1),b=null)},i(I){h||(z(v,I),z(n.$$.fragment,I),h=!0)},o(I){M(v,I),M(n.$$.fragment,I),h=!1},d(I){I&&w(e),v&&v.d(I),O(n),b&&b.d(),A=!1,y()}}}function je(t,e,l){let{$$slots:a={},$$scope:r}=e,{valueChanged:i=!1}=e,{loading:s=!1}=e,{save:u}=e,o={message:"",type:"info"};const f=n=>{n.type=n.type?n.type:"info",n.message=n.message?n.message:"",l(3,o.message=n.message,o),l(3,o.type=n.type,o),n.duration&&setTimeout(()=>{l(3,o.message="",o)},n.duration)};return t.$$set=n=>{"valueChanged"in n&&l(0,i=n.valueChanged),"loading"in n&&l(1,s=n.loading),"save"in n&&l(2,u=n.save),"$$scope"in n&&l(5,r=n.$$scope)},[i,s,u,o,f,r,a]}class He extends R{constructor(e){super(),G(this,e,je,Be,U,{valueChanged:0,loading:1,save:2,setNotice:4})}get setNotice(){return this.$$.ctx[4]}}function Re(t){let e,l,a;function r(s){t[4](s)}let i={options:t[3],disabled:t[2],label:"Organization",helperText:"",loading:t[1]};return t[0]!==void 0&&(i.value=t[0]),e=new ve({props:i}),B.push(()=>j(e,"value",r)),{c(){V(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,u){q(e,s,u),a=!0},p(s,[u]){const o={};u&4&&(o.disabled=s[2]),u&2&&(o.loading=s[1]),!l&&u&1&&(l=!0,o.value=s[0],H(()=>l=!1)),e.$set(o)},i(s){a||(z(e.$$.fragment,s),a=!0)},o(s){M(e.$$.fragment,s),a=!1},d(s){O(e,s)}}}function Ge(t,e,l){let{organization:a}=e,{loading:r}=e,{disabled:i}=e;const u=["Elders Quorum","Primary","Relief Society","Sunday School","Young Men","Young Women"].map(f=>({key:f,value:f}));function o(f){a=f,l(0,a)}return t.$$set=f=>{"organization"in f&&l(0,a=f.organization),"loading"in f&&l(1,r=f.loading),"disabled"in f&&l(2,i=f.disabled)},[a,r,i,u,o]}class Ue extends R{constructor(e){super(),G(this,e,Ge,Re,U,{organization:0,loading:1,disabled:2})}}function ue(t){let e,l;return{c(){e=S("small"),l=$(t[3]),this.h()},l(a){e=C(a,"SMALL",{class:!0});var r=D(e);l=Q(r,t[3]),r.forEach(w),this.h()},h(){k(e,"class","fw-lighter fst-italic")},m(a,r){L(a,e,r),p(e,l)},p(a,r){r&8&&Y(l,a[3])},d(a){a&&w(e)}}}function We(t){let e,l,a,r,i,s,u,o,f=t[3]&&ue(t);return{c(){e=S("div"),l=S("div"),a=$(t[1]),r=N(),i=S("input"),s=N(),f&&f.c(),this.h()},l(n){e=C(n,"DIV",{class:!0});var c=D(e);l=C(c,"DIV",{});var g=D(l);a=Q(g,t[1]),g.forEach(w),r=E(c),i=C(c,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),s=E(c),f&&f.l(c),c.forEach(w),this.h()},h(){k(i,"name",t[2]),k(i,"type","text"),k(i,"class","form-control"),k(i,"placeholder",t[4]),i.disabled=t[5],i.required=t[6],ee(i,"is-invalid",t[7]),k(e,"class","d-flex flex-column gap-2")},m(n,c){L(n,e,c),p(e,l),p(l,a),p(e,r),p(e,i),t[9](i),te(i,t[0]),p(e,s),f&&f.m(e,null),u||(o=[J(i,"focus",t[10]),J(i,"input",t[11])],u=!0)},p(n,[c]){c&2&&Y(a,n[1]),c&4&&k(i,"name",n[2]),c&16&&k(i,"placeholder",n[4]),c&32&&(i.disabled=n[5]),c&64&&(i.required=n[6]),c&1&&i.value!==n[0]&&te(i,n[0]),c&128&&ee(i,"is-invalid",n[7]),n[3]?f?f.p(n,c):(f=ue(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:X,o:X,d(n){n&&w(e),t[9](null),f&&f.d(),u=!1,_e(o)}}}function Ye(t,e,l){let{label:a=""}=e,{name:r=""}=e,{helperText:i=""}=e,{placeholder:s=""}=e,{value:u}=e,{loading:o}=e,{required:f}=e,{isInvalid:n}=e,c;function g(m){B[m?"unshift":"push"](()=>{c=m,l(8,c)})}const _=()=>c.select();function d(){u=this.value,l(0,u)}return t.$$set=m=>{"label"in m&&l(1,a=m.label),"name"in m&&l(2,r=m.name),"helperText"in m&&l(3,i=m.helperText),"placeholder"in m&&l(4,s=m.placeholder),"value"in m&&l(0,u=m.value),"loading"in m&&l(5,o=m.loading),"required"in m&&l(6,f=m.required),"isInvalid"in m&&l(7,n=m.isInvalid)},[u,a,r,i,s,o,f,n,c,g,_,d]}class we extends R{constructor(e){super(),G(this,e,Ye,We,U,{label:1,name:2,helperText:3,placeholder:4,value:0,loading:5,required:6,isInvalid:7})}}const ce=K([]);let ne=!1;async function Je(){if(ne)return De(ce);ne=!0;const{data:t,error:e}=await be.from("members").select("*");if(e)throw e;const l=t||[];return ce.set(l),setTimeout(()=>ne=!1,800),l}function de(t){let e,l,a;function r(s){t[8](s)}let i={placeholder:"Members name",name:"member-name",isInvalid:t[4],loading:t[1],helperText:"Brother John Smith or Sister Jane Smith",required:!0};return t[0].name!==void 0&&(i.value=t[0].name),e=new we({props:i}),B.push(()=>j(e,"value",r)),{c(){V(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,u){q(e,s,u),a=!0},p(s,u){const o={};u&16&&(o.isInvalid=s[4]),u&2&&(o.loading=s[1]),!l&&u&1&&(l=!0,o.value=s[0].name,H(()=>l=!1)),e.$set(o)},i(s){a||(z(e.$$.fragment,s),a=!0)},o(s){M(e.$$.fragment,s),a=!1},d(s){O(e,s)}}}function Qe(t){let e,l,a="Member",r,i,s,u,o,f,n,c,g="Member not found in the list, lets create a new record.",_,d,m,h;function A(v){t[6](v)}let y={options:t[3],loading:t[1],disabled:t[2],helperText:""};t[0].name!==void 0&&(y.value=t[0].name),i=new ve({props:y}),B.push(()=>j(i,"value",A));let T=t[2]&&de(t);return{c(){e=S("div"),l=S("div"),l.textContent=a,r=N(),V(i.$$.fragment),u=N(),o=S("div"),f=S("input"),n=N(),c=S("label"),c.textContent=g,_=N(),T&&T.c(),this.h()},l(v){e=C(v,"DIV",{class:!0});var b=D(e);l=C(b,"DIV",{"data-svelte-h":!0}),Z(l)!=="svelte-xk8odi"&&(l.textContent=a),r=E(b),F(i.$$.fragment,b),u=E(b),o=C(b,"DIV",{class:!0});var I=D(o);f=C(I,"INPUT",{class:!0,type:!0,id:!0}),n=E(I),c=C(I,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),Z(c)!=="svelte-1y6ka2h"&&(c.textContent=g),I.forEach(w),_=E(b),T&&T.l(b),b.forEach(w),this.h()},h(){k(f,"class","form-check-input"),k(f,"type","checkbox"),k(f,"id","is-new-member"),k(c,"class","form-check-label"),k(c,"for","is-new-member"),k(o,"class","form-check"),k(e,"class","d-flex flex-column gap-2")},m(v,b){L(v,e,b),p(e,l),p(e,r),q(i,e,null),p(e,u),p(e,o),p(o,f),f.checked=t[2],p(o,n),p(o,c),p(e,_),T&&T.m(e,null),d=!0,m||(h=J(f,"change",t[7]),m=!0)},p(v,[b]){const I={};b&8&&(I.options=v[3]),b&2&&(I.loading=v[1]),b&4&&(I.disabled=v[2]),!s&&b&1&&(s=!0,I.value=v[0].name,H(()=>s=!1)),i.$set(I),b&4&&(f.checked=v[2]),v[2]?T?(T.p(v,b),b&4&&z(T,1)):(T=de(v),T.c(),z(T,1),T.m(e,null)):T&&(Ee(),M(T,1,1,()=>{T=null}),Ne())},i(v){d||(z(i.$$.fragment,v),z(T),d=!0)},o(v){M(i.$$.fragment,v),M(T),d=!1},d(v){v&&w(e),O(i),T&&T.d(),m=!1,h()}}}function Ze(t,e,l){let a,r,{member:i}=e,{loading:s}=e,u=[],o;pe(async()=>{l(5,u=await Je())});function f(g){t.$$.not_equal(i.name,g)&&(i.name=g,l(0,i))}function n(){o=this.checked,l(2,o)}function c(g){t.$$.not_equal(i.name,g)&&(i.name=g,l(0,i))}return t.$$set=g=>{"member"in g&&l(0,i=g.member),"loading"in g&&l(1,s=g.loading)},t.$$.update=()=>{t.$$.dirty&1&&l(4,a=i.name===""),t.$$.dirty&32&&l(3,r=u?.length?u.map(g=>({key:g.name,value:g.name})):[])},[i,s,o,r,a,u,f,n,c]}class $e extends R{constructor(e){super(),G(this,e,Ze,Qe,U,{member:0,loading:1})}}function Ke(t){let e,l,a,r,i,s,u;function o(n){t[7](n)}let f={label:"Name",name:"calling-name",placeholder:"Calling Name",loading:t[3],isInvalid:t[5],helperText:"Elders Quorum Secretary, Primary Teacher, etc",required:!0};return t[0].name!==void 0&&(f.value=t[0].name),e=new we({props:f}),B.push(()=>j(e,"value",o)),r=new Ue({props:{loading:t[3],disabled:t[3],organization:t[0].organization}}),s=new $e({props:{loading:t[3],member:t[1]}}),{c(){V(e.$$.fragment),a=N(),V(r.$$.fragment),i=N(),V(s.$$.fragment)},l(n){F(e.$$.fragment,n),a=E(n),F(r.$$.fragment,n),i=E(n),F(s.$$.fragment,n)},m(n,c){q(e,n,c),L(n,a,c),q(r,n,c),L(n,i,c),q(s,n,c),u=!0},p(n,c){const g={};c&8&&(g.loading=n[3]),c&32&&(g.isInvalid=n[5]),!l&&c&1&&(l=!0,g.value=n[0].name,H(()=>l=!1)),e.$set(g);const _={};c&8&&(_.loading=n[3]),c&8&&(_.disabled=n[3]),c&1&&(_.organization=n[0].organization),r.$set(_);const d={};c&8&&(d.loading=n[3]),c&2&&(d.member=n[1]),s.$set(d)},i(n){u||(z(e.$$.fragment,n),z(r.$$.fragment,n),z(s.$$.fragment,n),u=!0)},o(n){M(e.$$.fragment,n),M(r.$$.fragment,n),M(s.$$.fragment,n),u=!1},d(n){n&&(w(a),w(i)),O(e,n),O(r,n),O(s,n)}}}function Xe(t){let e,l,a,r,i;function s(n){t[8](n)}function u(n){t[9](n)}function o(n){t[10](n)}let f={save:t[6],$$slots:{default:[Ke]},$$scope:{ctx:t}};return t[3]!==void 0&&(f.loading=t[3]),t[2]!==void 0&&(f.valueChanged=t[2]),t[4]!==void 0&&(f.setNotice=t[4]),e=new He({props:f}),B.push(()=>j(e,"loading",s)),B.push(()=>j(e,"valueChanged",u)),B.push(()=>j(e,"setNotice",o)),{c(){V(e.$$.fragment)},l(n){F(e.$$.fragment,n)},m(n,c){q(e,n,c),i=!0},p(n,[c]){const g={};c&2091&&(g.$$scope={dirty:c,ctx:n}),!l&&c&8&&(l=!0,g.loading=n[3],H(()=>l=!1)),!a&&c&4&&(a=!0,g.valueChanged=n[2],H(()=>a=!1)),!r&&c&16&&(r=!0,g.setNotice=n[4],H(()=>r=!1)),e.$set(g)},i(n){i||(z(e.$$.fragment,n),i=!0)},o(n){M(e.$$.fragment,n),i=!1},d(n){O(e,n)}}}function xe(t,e,l){let a,{calling:r}=e,{member:i}=e,s=!1,u=!1,o;const f=async()=>{if(!s){o({message:"Sorry nothing has changed, therefore, there is nothing to save.",duration:700});return}try{o({message:"Saving ..."}),l(3,u=!0),oe("set_sacrament_testimony_success","interaction","Set Successful",1),setTimeout(()=>{l(3,u=!1),o({message:"Saved",duration:3e3,type:"success"})},800)}catch(d){oe("set_sacrament_testimony_failed","interaction","Set Failed",1),setTimeout(()=>{l(3,u=!1),console.error("Sacrament Program update failed",d),o({message:"Save failed, please reload browser and try again.",duration:7e3,type:"danger"})},800)}};function n(d){t.$$.not_equal(r.name,d)&&(r.name=d,l(0,r))}function c(d){u=d,l(3,u)}function g(d){s=d,l(2,s)}function _(d){o=d,l(4,o)}return t.$$set=d=>{"calling"in d&&l(0,r=d.calling),"member"in d&&l(1,i=d.member)},t.$$.update=()=>{t.$$.dirty&1&&l(5,a=r.name!=="")},[r,i,s,u,o,a,f,n,c,g,_]}class et extends R{constructor(e){super(),G(this,e,xe,Xe,U,{calling:0,member:1})}}function me(t,e,l){const a=t.slice();return a[12]=e[l],a}function tt(t){let e,l;return e=new et({props:{member:t[6],calling:t[5]}}),{c(){V(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){q(e,a,r),l=!0},p:X,i(a){l||(z(e.$$.fragment,a),l=!0)},o(a){M(e.$$.fragment,a),l=!1},d(a){O(e,a)}}}function nt(t){let e;return{c(){e=S("i"),this.h()},l(l){e=C(l,"I",{slot:!0,class:!0}),D(e).forEach(w),this.h()},h(){k(e,"slot","label"),k(e,"class","bi bi-plus")},m(l,a){L(l,e,a)},p:X,d(l){l&&w(e)}}}function lt(t){let e,l="No Data Found";return{c(){e=S("div"),e.textContent=l,this.h()},l(a){e=C(a,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-mjkjd"&&(e.textContent=l),this.h()},h(){k(e,"class","p-4 d-block bg-dark-subtle")},m(a,r){L(a,e,r)},p:X,d(a){a&&w(e)}}}function at(t){let e,l,a='<tr><th scope="col">Organization</th> <th scope="col">Calling</th> <th scope="col">Member</th> <th scope="col">Actions</th></tr>',r,i,s=se(t[1]),u=[];for(let o=0;o<s.length;o+=1)u[o]=he(me(t,s,o));return{c(){e=S("table"),l=S("thead"),l.innerHTML=a,r=N(),i=S("tbody");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){e=C(o,"TABLE",{class:!0});var f=D(e);l=C(f,"THEAD",{"data-svelte-h":!0}),Z(l)!=="svelte-1ufgq2d"&&(l.innerHTML=a),r=E(f),i=C(f,"TBODY",{});var n=D(i);for(let c=0;c<u.length;c+=1)u[c].l(n);n.forEach(w),f.forEach(w),this.h()},h(){k(e,"class","table")},m(o,f){L(o,e,f),p(e,l),p(e,r),p(e,i);for(let n=0;n<u.length;n+=1)u[n]&&u[n].m(i,null)},p(o,f){if(f&2){s=se(o[1]);let n;for(n=0;n<s.length;n+=1){const c=me(o,s,n);u[n]?u[n].p(c,f):(u[n]=he(c),u[n].c(),u[n].m(i,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=s.length}},d(o){o&&w(e),ye(u,o)}}}function ge(t){let e=t[12].calling_records[0].member.name+"",l;return{c(){l=$(e)},l(a){l=Q(a,e)},m(a,r){L(a,l,r)},p(a,r){r&2&&e!==(e=a[12].calling_records[0].member.name+"")&&Y(l,e)},d(a){a&&w(l)}}}function he(t){let e,l,a=t[12].organization+"",r,i,s,u=t[12].name+"",o,f,n,c,g,_,d=t[12].calling_records?.length&&ge(t);return{c(){e=S("tr"),l=S("td"),r=$(a),i=N(),s=S("td"),o=$(u),f=N(),n=S("td"),d&&d.c(),c=N(),g=S("td"),_=N()},l(m){e=C(m,"TR",{});var h=D(e);l=C(h,"TD",{});var A=D(l);r=Q(A,a),A.forEach(w),i=E(h),s=C(h,"TD",{});var y=D(s);o=Q(y,u),y.forEach(w),f=E(h),n=C(h,"TD",{});var T=D(n);d&&d.l(T),T.forEach(w),c=E(h),g=C(h,"TD",{}),D(g).forEach(w),_=E(h),h.forEach(w)},m(m,h){L(m,e,h),p(e,l),p(l,r),p(e,i),p(e,s),p(s,o),p(e,f),p(e,n),d&&d.m(n,null),p(e,c),p(e,g),p(e,_)},p(m,h){h&2&&a!==(a=m[12].organization+"")&&Y(r,a),h&2&&u!==(u=m[12].name+"")&&Y(o,u),m[12].calling_records?.length?d?d.p(m,h):(d=ge(m),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(m){m&&w(e),d&&d.d()}}}function it(t){let e,l,a,r,i,s,u,o,f,n;i=new Me({props:{drawerTitle:"New Calling",id:"new-calling-trigger-button",$$slots:{label:[nt],default:[tt]},$$scope:{ctx:t}}});function c(d,m){return d[1]?.length?at:lt}let g=c(t),_=g(t);return{c(){e=S("div"),l=S("div"),a=S("input"),r=N(),V(i.$$.fragment),s=N(),_.c(),u=ie(),this.h()},l(d){e=C(d,"DIV",{class:!0});var m=D(e);l=C(m,"DIV",{class:!0});var h=D(l);a=C(h,"INPUT",{class:!0,type:!0,placeholder:!0}),h.forEach(w),r=E(m),F(i.$$.fragment,m),m.forEach(w),s=E(d),_.l(d),u=ie(),this.h()},h(){k(a,"class","form-control"),k(a,"type","text"),k(a,"placeholder","search"),k(l,"class","w-50"),k(e,"class","d-flex justify-content-end gap-3")},m(d,m){L(d,e,m),p(e,l),p(l,a),te(a,t[0]),p(e,r),q(i,e,null),L(d,s,m),_.m(d,m),L(d,u,m),o=!0,f||(n=[J(a,"keyup",t[4]),J(a,"input",t[7])],f=!0)},p(d,[m]){m&1&&a.value!==d[0]&&te(a,d[0]);const h={};m&32768&&(h.$$scope={dirty:m,ctx:d}),i.$set(h),g===(g=c(d))&&_?_.p(d,m):(_.d(1),_=g(d),_&&(_.c(),_.m(u.parentNode,u)))},i(d){o||(z(i.$$.fragment,d),o=!0)},o(d){M(i.$$.fragment,d),o=!1},d(d){d&&(w(e),w(s),w(u)),O(i),_.d(d),f=!1,_e(n)}}}function rt(t,e,l){let a,r;const{stores:{loading:i,data:s},actions:{init:u}}=qe();re(t,s,m=>l(8,a=m));let o;const f=K([]);re(t,f,m=>l(1,r=m));const n=()=>{let m=a.map(h=>({...h,searchStr:`${h.name}${h.organization}${h.calling_records?.length?h.calling_records[0]?.member?.name:""}`.toLowerCase()}));o?.length&&(m=m.filter(h=>h.searchStr.includes(o.toLowerCase()))),f.set(m)},c=Ve(400,()=>{i.set(!0),n(),i.set(!1)});pe(async()=>{await u(),n()});let g={name:"",organization:"",sort_order:1},_={name:""};function d(){o=this.value,l(0,o)}return[o,r,s,f,c,g,_,d]}class st extends R{constructor(e){super(),G(this,e,rt,it,U,{})}}function ot(t){let e,l;return e=new st({}),{c(){V(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){q(e,a,r),l=!0},i(a){l||(z(e.$$.fragment,a),l=!0)},o(a){M(e.$$.fragment,a),l=!1},d(a){O(e,a)}}}function ft(t){let e,l;return e=new ze({props:{pageTitle:"Callings",$$slots:{default:[ot]},$$scope:{ctx:t}}}),{c(){V(e.$$.fragment)},l(a){F(e.$$.fragment,a)},m(a,r){q(e,a,r),l=!0},p(a,[r]){const i={};r&1&&(i.$$scope={dirty:r,ctx:a}),e.$set(i)},i(a){l||(z(e.$$.fragment,a),l=!0)},o(a){M(e.$$.fragment,a),l=!1},d(a){O(e,a)}}}class Tt extends R{constructor(e){super(),G(this,e,null,ft,U,{})}}export{Tt as component,wt as universal};
