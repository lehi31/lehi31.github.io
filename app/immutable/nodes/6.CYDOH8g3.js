import{s as Pe,n as Ae,r as Qt,k as Ue,b as ft}from"../chunks/DZwCP9x3.js";import{S as je,i as Ke,d as T,D as Se,c as C,e as E,f as Y,k as M,l as A,n as ue,g as x,r as O,p as W,B as _e,y as we,F as Ce,E as ye,C as fe,s as F,o as z,u as q,G as dr,H as yr,t as me,a as oe,w as ct,v as ht,b as ze,m as qe,j as Be,q as Fe}from"../chunks/BGKO8vuC.js";import{P as mr}from"../chunks/rhpvaxuC.js";import{e as ae}from"../chunks/DFsdxLOm.js";import{s as Vt}from"../chunks/DsH82brL.js";import{w as vr}from"../chunks/wlhN6vKE.js";import{e as dt,f as V,g as br}from"../chunks/xlZ0IkP9.js";function Ie(t,e){const r=dt(t),n=dt(e);return+r==+n}const pr=!0,Kn=Object.freeze(Object.defineProperty({__proto__:null,prerender:pr},Symbol.toStringTag,{value:"Module"})),ve={SacramentBreadAssignments:"Sacrament Bread Assignments",SacramentPreparationAssignments:"Sacrament Preparation Assignments"},Jt=["Malakai Kalamafoni","Finau Lomu","Manoa Tuifua","Lii Unga","Solo Funaki","Folau Kaveinga","Tipi Kofe","Vili Mapu","Alex Tauteoli"],$t=[{date:new Date(2025,3,5),event:"General Conference"},{date:new Date(2025,3,6),event:"General Conference"},{date:new Date(2025,3,26),event:"Stake Conference"},{date:new Date(2025,3,27),event:"Stake Conference"},{date:new Date(2025,9,4),event:"General Conference"},{date:new Date(2025,9,5),event:"General Conference"}];var Je=["MO","TU","WE","TH","FR","SA","SU"],$=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(Je.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=Je[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}(),B=function(t){return t!=null},se=function(t){return typeof t=="number"},yt=function(t){return typeof t=="string"&&Je.includes(t)},ee=Array.isArray,ce=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r},I=function(t,e){var r=0,n=[];if(ee(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},_r=function(t){return ee(t)?t:[t]};function ke(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=I(r,e/r.length)),r.slice(0,e)+String(n))}var wr=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},ne=function(t,e){var r=t%e;return r*e<0?r+e:r},Qe=function(t,e){return{div:Math.floor(t/e),mod:ne(t,e)}},le=function(t){return!B(t)||t.length===0},G=function(t){return!le(t)},P=function(t,e){return G(t)&&t.indexOf(e)!==-1},Ee=function(t,e,r,n,i,a){return n===void 0&&(n=0),i===void 0&&(i=0),a===void 0&&(a=0),new Date(Date.UTC(t,e-1,r,n,i,a))},gr=[31,28,31,30,31,30,31,31,30,31,30,31],er=1e3*60*60*24,tr=9999,rr=Ee(1970,1,1),Er=[6,0,1,2,3,4,5],Le=function(t){return t%4===0&&t%100!==0||t%400===0},nr=function(t){return t instanceof Date},Oe=function(t){return nr(t)&&!isNaN(t.getTime())},kr=function(t,e){var r=t.getTime(),n=e.getTime(),i=r-n;return Math.round(i/er)},$e=function(t){return kr(t,rr)},ar=function(t){return new Date(rr.getTime()+t*er)},Tr=function(t){var e=t.getUTCMonth();return e===1&&Le(t.getUTCFullYear())?29:gr[e]},De=function(t){return Er[t.getUTCDay()]},mt=function(t,e){var r=Ee(t,e+1,1);return[De(r),Tr(r)]},ir=function(t,e){return e=e||t,new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},et=function(t){var e=new Date(t.getTime());return e},vt=function(t){for(var e=[],r=0;r<t.length;r++)e.push(et(t[r]));return e},Ne=function(t){t.sort(function(e,r){return e.getTime()-r.getTime()})},at=function(t,e){e===void 0&&(e=!0);var r=new Date(t);return[ke(r.getUTCFullYear().toString(),4,"0"),ke(r.getUTCMonth()+1,2,"0"),ke(r.getUTCDate(),2,"0"),"T",ke(r.getUTCHours(),2,"0"),ke(r.getUTCMinutes(),2,"0"),ke(r.getUTCSeconds(),2,"0"),e?"Z":""].join("")},it=function(t){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,r=e.exec(t);if(!r)throw new Error("Invalid UNTIL value: ".concat(t));return new Date(Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[5],10)||0,parseInt(r[6],10)||0,parseInt(r[7],10)||0))},bt=function(t,e){var r=t.toLocaleString("sv-SE",{timeZone:e});return r.replace(" ","T")+"Z"},Sr=function(t,e){var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(bt(t,r)),i=new Date(bt(t,e??"UTC")),a=i.getTime()-n.getTime();return new Date(t.getTime()-a)},Te=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),tt=function(t,e){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},tt(t,e)};function st(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tt(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var te=function(){return te=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},te.apply(this,arguments)};function g(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}var pt=function(t){st(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(Te),Re={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},_t=function(t,e){return t.indexOf(e)!==-1},Dr=function(t){return t.toString()},Mr=function(t,e,r){return"".concat(e," ").concat(r,", ").concat(t)},de=function(){function t(e,r,n,i){if(r===void 0&&(r=Dr),n===void 0&&(n=Re),i===void 0&&(i=Mr),this.text=[],this.language=n||Re,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),l=[].concat(this.options.bynmonthday);a.sort(function(d,f){return d-f}),l.sort(function(d,f){return f-d}),this.bymonthday=a.concat(l),this.bymonthday.length||(this.bymonthday=null)}if(B(this.origOptions.byweekday)){var c=ee(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],o=String(c);this.byweekday={allWeeks:c.filter(function(d){return!d.n}),someWeeks:c.filter(function(d){return!!d.n}),isWeekdays:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")===-1&&o.indexOf("SU")===-1,isEveryDay:o.indexOf("MO")!==-1&&o.indexOf("TU")!==-1&&o.indexOf("WE")!==-1&&o.indexOf("TH")!==-1&&o.indexOf("FR")!==-1&&o.indexOf("SA")!==-1&&o.indexOf("SU")!==-1};var u=function(d,f){return d.weekday-f.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(_t(["dtstart","tzid","wkst","freq"],n))return!0;if(!_t(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[L.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:r=i+n("st");break;case 2:case 22:r=i+n("nd");break;case 3:case 23:r=i+n("rd");break;default:r=i+n("th")}return e<0?r+" "+n("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=se(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!==1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){var a=this;i===void 0&&(i=","),ee(e)||(e=[e]);var l=function(o,u,d){for(var f="",s=0;s<o.length;s++)s!==0&&(s===o.length-1?f+=" "+d+" ":f+=u+" "),f+=o[s];return f};r=r||function(o){return o.toString()};var c=function(o){return r&&r.call(a,o)};return n?l(e.map(c),i,n):e.map(c).join(i+" ")},t}(),Or=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var a=n.exec(this.text);a&&(e===null||a[0].length>e[0].length)&&(e=a,r=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function sr(t,e){e===void 0&&(e=Re);var r={},n=new Or(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var s=n.acceptNumber();if(s&&(r.interval=parseInt(s[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=L.DAILY,n.nextSymbol()&&(l(),f());break;case"weekday(s)":r.freq=L.WEEKLY,r.byweekday=[L.MO,L.TU,L.WE,L.TH,L.FR],n.nextSymbol(),l(),f();break;case"week(s)":r.freq=L.WEEKLY,n.nextSymbol()&&(a(),l(),f());break;case"hour(s)":r.freq=L.HOURLY,n.nextSymbol()&&(a(),f());break;case"minute(s)":r.freq=L.MINUTELY,n.nextSymbol()&&(a(),f());break;case"month(s)":r.freq=L.MONTHLY,n.nextSymbol()&&(a(),f());break;case"year(s)":r.freq=L.YEARLY,n.nextSymbol()&&(a(),f());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=L.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[L[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=o();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(L[y]),n.nextSymbol()}l(),d(),f();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=L.YEARLY,r.bymonth=[c()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var w=c();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(w),n.nextSymbol()}a(),f();break;default:throw new Error("Unknown symbol")}}function a(){var s=n.accept("on"),h=n.accept("the");if(s||h)do{var y=u(),w=o(),m=c();if(y)w?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(L[w].nth(y))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(y),n.accept("day(s)"));else if(w)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(L[w]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[L.MO,L.TU,L.WE,L.TH,L.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var D=n.acceptNumber();if(!D)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(D[0],10)];n.accept("comma");){if(D=n.acceptNumber(),!D)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(D[0],10))}}else if(m)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(m);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function l(){var s=n.accept("at");if(s)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function c(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function o(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var s=parseInt(n.value[1],10);if(s<-366||s>366)throw new Error("Nth out of range: "+s);return n.nextSymbol(),n.accept("last")?-s:s;default:return!1}}function d(){n.accept("on"),n.accept("the");var s=u();if(s)for(r.bymonthday=[s],n.nextSymbol();n.accept("comma");){if(s=u(),!s)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(s),n.nextSymbol()}}function f(){if(n.symbol==="until"){var s=Date.parse(n.text);if(!s)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(s)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var R;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(R||(R={}));function ot(t){return t<R.HOURLY}var Lr=function(t,e){return e===void 0&&(e=Re),new L(sr(t,e)||void 0)},Me=["count","until","interval","byweekday","bymonthday","bymonth"];de.IMPLEMENTED=[];de.IMPLEMENTED[R.HOURLY]=Me;de.IMPLEMENTED[R.MINUTELY]=Me;de.IMPLEMENTED[R.DAILY]=["byhour"].concat(Me);de.IMPLEMENTED[R.WEEKLY]=Me;de.IMPLEMENTED[R.MONTHLY]=Me;de.IMPLEMENTED[R.YEARLY]=["byweekno","byyearday"].concat(Me);var Ar=function(t,e,r,n){return new de(t,e,r,n).toString()},Nr=de.isFullyConvertible,xe=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}(),Yr=function(t){st(e,t);function e(r,n,i,a,l,c,o){var u=t.call(this,a,l,c,o)||this;return u.year=r,u.month=n,u.day=i,u}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return De(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=ne(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=Qe(this.hour,24),l=a.div,c=a.mod;if(l&&(this.hour=c,this.addDaily(l)),le(i)||P(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var l=Qe(this.minute,60),c=l.div,o=l.mod;if(c&&(this.minute=o,this.addHours(c,!1,i)),(le(i)||P(i,this.hour))&&(le(a)||P(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,l){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var c=Qe(this.second,60),o=c.div,u=c.mod;if(o&&(this.second=u,this.addMinutes(o,!1,i,a)),(le(i)||P(i,this.hour))&&(le(a)||P(a,this.minute))&&(le(l)||P(l,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=mt(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>tr))return;r=mt(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,l=r.wkst,c=r.byhour,o=r.byminute,u=r.bysecond;switch(i){case R.YEARLY:return this.addYears(a);case R.MONTHLY:return this.addMonths(a);case R.WEEKLY:return this.addWeekly(a,l);case R.DAILY:return this.addDaily(a);case R.HOURLY:return this.addHours(a,n,c);case R.MINUTELY:return this.addMinutes(a,n,c,o);case R.SECONDLY:return this.addSeconds(a,n,c,o,u)}},e}(xe);function or(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];P(un,a)||e.push(a),nr(t[a])&&!Oe(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return te({},t)}function Ur(t){var e=te(te({},lt),or(t));if(B(e.byeaster)&&(e.freq=L.YEARLY),!(B(e.freq)&&L.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(t.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),B(e.wkst)?se(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=L.MO.weekday,B(e.bysetpos)){se(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||G(e.byweekno)||G(e.byyearday)||e.bymonthday||G(e.bymonthday)||B(e.byweekday)||B(e.byeaster)))switch(e.freq){case L.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case L.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case L.WEEKLY:e.byweekday=[De(e.dtstart)];break}if(B(e.bymonth)&&!ee(e.bymonth)&&(e.bymonth=[e.bymonth]),B(e.byyearday)&&!ee(e.byyearday)&&se(e.byyearday)&&(e.byyearday=[e.byyearday]),!B(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(ee(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(B(e.byweekno)&&!ee(e.byweekno)&&(e.byweekno=[e.byweekno]),!B(e.byweekday))e.bynweekday=null;else if(se(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(yt(e.byweekday))e.byweekday=[$.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof $)!e.byweekday.n||e.freq>L.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var l=[],c=[],r=0;r<e.byweekday.length;r++){var o=e.byweekday[r];if(se(o)){l.push(o);continue}else if(yt(o)){l.push($.fromStr(o).weekday);continue}!o.n||e.freq>L.MONTHLY?l.push(o.weekday):c.push([o.weekday,o.n])}e.byweekday=G(l)?l:null,e.bynweekday=G(c)?c:null}return B(e.byhour)?se(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<L.HOURLY?[e.dtstart.getUTCHours()]:null,B(e.byminute)?se(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<L.MINUTELY?[e.dtstart.getUTCMinutes()]:null,B(e.bysecond)?se(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<L.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Cr(t){var e=t.dtstart.getTime()%1e3;if(!ot(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new xe(n,i,a,e))})})}),r}function rt(t){var e=t.split(`
`).map(Ir).filter(function(r){return r!==null});return te(te({},e[0]),e[1])}function We(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[1],i=r[2];return n&&(e.tzid=n),e.dtstart=it(i),e}function Ir(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return wt(t);var r=e[1];switch(r.toUpperCase()){case"RRULE":case"EXRULE":return wt(t);case"DTSTART":return We(t);default:throw new Error("Unsupported RFC prop ".concat(r," in ").concat(t))}}function wt(t){var e=t.replace(/^RRULE:/i,""),r=We(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),l=a[0],c=a[1];switch(l.toUpperCase()){case"FREQ":r.freq=R[c.toUpperCase()];break;case"WKST":r.wkst=ie[c.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=Rr(c),u=l.toLowerCase();r[u]=o;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=xr(c);break;case"DTSTART":case"TZID":var d=We(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=it(c);break;case"BYEASTER":r.byeaster=Number(c);break;default:throw new Error("Unknown RRULE property '"+l+"'")}}),r}function Rr(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(gt)}return gt(t)}function gt(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function xr(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return ie[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(r));var i=Number(n[1]),a=n[2],l=ie[a].weekday;return new $(l,i)})}var He=function(){function t(e,r){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var e=at(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){return this.isUTC?this.date:Sr(this.date,this.tzid)},t}();function nt(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(lt),a=0;a<n.length;a++)if(n[a]!=="tzid"&&P(i,n[a])){var l=n[a].toUpperCase(),c=t[n[a]],o="";if(!(!B(c)||ee(c)&&!c.length)){switch(l){case"FREQ":o=L.FREQUENCIES[t.freq];break;case"WKST":se(c)?o=new $(c).toString():o=c.toString();break;case"BYWEEKDAY":l="BYDAY",o=_r(c).map(function(h){return h instanceof $?h:ee(h)?new $(h[0],h[1]):new $(h)}).toString();break;case"DTSTART":r=Wr(c,t.tzid);break;case"UNTIL":o=at(c,!t.tzid);break;default:if(ee(c)){for(var u=[],d=0;d<c.length;d++)u[d]=String(c[d]);o=u.toString()}else o=String(c)}o&&e.push([l,o])}}var f=e.map(function(h){var y=h[0],w=h[1];return"".concat(y,"=").concat(w.toString())}).join(";"),s="";return f!==""&&(s="RRULE:".concat(f)),[r,s].filter(function(h){return!!h}).join(`
`)}function Wr(t,e){return t?"DTSTART"+new He(new Date(t),e).toString():""}function Hr(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var Pr=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?et(r):vt(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var f=0;f<i.length;f++){var s=i[f];if(!Hr(r[s],d[s]))return!0}return!1},l=this[e];if(e==="all")n=this.all;else if(ee(l))for(var c=0;c<l.length;c++){var o=l[c];if(!(i.length&&a(o))){n=o._value;break}}if(!n&&this.all){for(var u=new Te(e,r),c=0;c<this.all.length&&u.accept(this.all[c]);c++);n=u.getValue(),this._cacheAdd(e,n,r)}return ee(n)?vt(n):n instanceof Date?et(n):n},t}(),jr=g(g(g(g(g(g(g(g(g(g(g(g(g([],I(1,31),!0),I(2,28),!0),I(3,31),!0),I(4,30),!0),I(5,31),!0),I(6,30),!0),I(7,31),!0),I(8,31),!0),I(9,30),!0),I(10,31),!0),I(11,30),!0),I(12,31),!0),I(1,7),!0),Kr=g(g(g(g(g(g(g(g(g(g(g(g(g([],I(1,31),!0),I(2,29),!0),I(3,31),!0),I(4,30),!0),I(5,31),!0),I(6,30),!0),I(7,31),!0),I(8,31),!0),I(9,30),!0),I(10,31),!0),I(11,30),!0),I(12,31),!0),I(1,7),!0),zr=ce(1,29),qr=ce(1,30),be=ce(1,31),X=ce(1,32),Br=g(g(g(g(g(g(g(g(g(g(g(g(g([],X,!0),qr,!0),X,!0),be,!0),X,!0),be,!0),X,!0),X,!0),be,!0),X,!0),be,!0),X,!0),X.slice(0,7),!0),Fr=g(g(g(g(g(g(g(g(g(g(g(g(g([],X,!0),zr,!0),X,!0),be,!0),X,!0),be,!0),X,!0),X,!0),be,!0),X,!0),be,!0),X,!0),X.slice(0,7),!0),Zr=ce(-28,0),Gr=ce(-29,0),pe=ce(-30,0),Q=ce(-31,0),Xr=g(g(g(g(g(g(g(g(g(g(g(g(g([],Q,!0),Gr,!0),Q,!0),pe,!0),Q,!0),pe,!0),Q,!0),Q,!0),pe,!0),Q,!0),pe,!0),Q,!0),Q.slice(0,7),!0),Qr=g(g(g(g(g(g(g(g(g(g(g(g(g([],Q,!0),Zr,!0),Q,!0),pe,!0),Q,!0),pe,!0),Q,!0),Q,!0),pe,!0),Q,!0),pe,!0),Q,!0),Q.slice(0,7),!0),Vr=[0,31,60,91,121,152,182,213,244,274,305,335,366],Jr=[0,31,59,90,120,151,181,212,243,273,304,334,365],Et=function(){for(var t=[],e=0;e<55;e++)t=t.concat(ce(7));return t}();function $r(t,e){var r=Ee(t,1,1),n=Le(t)?366:365,i=Le(t+1)?366:365,a=$e(r),l=De(r),c=te(te({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:l},en(t)),{wnomask:null});if(le(e.byweekno))return c;c.wnomask=I(0,n+7);var o,u,d=o=ne(7-l+e.wkst,7);d>=4?(d=0,u=c.yearlen+ne(l-e.wkst,7)):u=n-d;for(var f=Math.floor(u/7),s=ne(u,7),h=Math.floor(f+s/4),y=0;y<e.byweekno.length;y++){var w=e.byweekno[y];if(w<0&&(w+=h+1),w>0&&w<=h){var m=void 0;w>1?(m=d+(w-1)*7,d!==o&&(m-=7-o)):m=d;for(var D=0;D<7&&(c.wnomask[m]=1,m++,c.wdaymask[m]!==e.wkst);D++);}}if(P(e.byweekno,1)){var m=d+h*7;if(d!==o&&(m-=7-o),m<n)for(var y=0;y<7&&(c.wnomask[m]=1,m+=1,c.wdaymask[m]!==e.wkst);y++);}if(d){var S=void 0;if(P(e.byweekno,-1))S=-1;else{var k=De(Ee(t-1,1,1)),p=ne(7-k.valueOf()+e.wkst,7),v=Le(t-1)?366:365,b=void 0;p>=4?(p=0,b=v+ne(k-e.wkst,7)):b=n-d,S=Math.floor(52+ne(b,7)/4)}if(P(e.byweekno,S))for(var m=0;m<d;m++)c.wnomask[m]=1}return c}function en(t){var e=Le(t)?366:365,r=Ee(t,1,1),n=De(r);return e===365?{mmask:jr,mdaymask:Fr,nmdaymask:Qr,wdaymask:Et.slice(n),mrange:Jr}:{mmask:Kr,mdaymask:Br,nmdaymask:Xr,wdaymask:Et.slice(n),mrange:Vr}}function tn(t,e,r,n,i,a){var l={lastyear:t,lastmonth:e,nwdaymask:[]},c=[];if(a.freq===L.YEARLY)if(le(a.bymonth))c=[[0,r]];else for(var o=0;o<a.bymonth.length;o++)e=a.bymonth[o],c.push(n.slice(e-1,e+1));else a.freq===L.MONTHLY&&(c=[n.slice(e-1,e+1)]);if(le(c))return l;l.nwdaymask=I(0,r);for(var o=0;o<c.length;o++)for(var u=c[o],d=u[0],f=u[1]-1,s=0;s<a.bynweekday.length;s++){var h=void 0,y=a.bynweekday[s],w=y[0],m=y[1];m<0?(h=f+(m+1)*7,h-=ne(i[h]-w,7)):(h=d+(m-1)*7,h+=ne(7-i[h]+w,7)),d<=h&&h<=f&&(l.nwdaymask[h]=1)}return l}function rn(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),l=n%4,c=Math.floor((n+8)/25),o=Math.floor((n-c+1)/3),u=Math.floor(19*r+n-a-o+15)%30,d=Math.floor(i/4),f=i%4,s=Math.floor(32+2*l+2*d-u-f)%7,h=Math.floor((r+11*u+22*s)/451),y=Math.floor((u+s-7*h+114)/31),w=(u+s-7*h+114)%31+1,m=Date.UTC(t,y-1,w+e),D=Date.UTC(t,0,1);return[Math.ceil((m-D)/(1e3*60*60*24))]}var nn=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=$r(e,n)),G(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,l=i.mrange,c=i.wdaymask;this.monthinfo=tn(e,r,a,l,c,n)}B(n.byeaster)&&(this.eastermask=rn(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),t.prototype.ydayset=function(){return[ce(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r){for(var n=this.mrange[r-1],i=this.mrange[r],a=I(null,this.yearlen),l=n;l<i;l++)a[l]=l;return[a,n,i]},t.prototype.wdayset=function(e,r,n){for(var i=I(null,this.yearlen+7),a=$e(Ee(e,r,n))-this.yearordinal,l=a,c=0;c<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);c++);return[i,l,a]},t.prototype.ddayset=function(e,r,n){var i=I(null,this.yearlen),a=$e(Ee(e,r,n))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,l=[];return this.options.byminute.forEach(function(c){l=l.concat(a.mtimeset(e,c,n,i))}),Ne(l),l},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(l){return new xe(e,r,l,i)});return Ne(a),a},t.prototype.stimeset=function(e,r,n,i){return[new xe(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case R.YEARLY:return this.ydayset.bind(this);case R.MONTHLY:return this.mdayset.bind(this);case R.WEEKLY:return this.wdayset.bind(this);case R.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case R.HOURLY:return this.htimeset.bind(this);case R.MINUTELY:return this.mtimeset.bind(this);case R.SECONDLY:return this.stimeset.bind(this)}},t}();function an(t,e,r,n,i,a){for(var l=[],c=0;c<t.length;c++){var o=void 0,u=void 0,d=t[c];d<0?(o=Math.floor(d/e.length),u=ne(d,e.length)):(o=Math.floor((d-1)/e.length),u=ne(d-1,e.length));for(var f=[],s=r;s<n;s++){var h=a[s];B(h)&&f.push(h)}var y=void 0;o<0?y=f.slice(o)[0]:y=f[o];var w=e[u],m=ar(i.yearordinal+y),D=ir(m,w);P(l,D)||l.push(D)}return Ne(l),l}function lr(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,l=e.bysetpos,c=e.count;if(c===0||i===0)return he(t);var o=Yr.fromDate(r),u=new nn(e);u.rebuild(o.year,o.month);for(var d=ln(u,o,e);;){var f=u.getdayset(n)(o.year,o.month,o.day),s=f[0],h=f[1],y=f[2],w=on(s,h,y,u,e);if(G(l))for(var m=an(l,d,h,y,u,s),D=0;D<m.length;D++){var S=m[D];if(a&&S>a)return he(t);if(S>=r){var k=kt(S,e);if(!t.accept(k)||c&&(--c,!c))return he(t)}}else for(var D=h;D<y;D++){var p=s[D];if(B(p))for(var v=ar(u.yearordinal+p),b=0;b<d.length;b++){var _=d[b],S=ir(v,_);if(a&&S>a)return he(t);if(S>=r){var k=kt(S,e);if(!t.accept(k)||c&&(--c,!c))return he(t)}}}if(e.interval===0||(o.add(e,w),o.year>tr))return he(t);ot(n)||(d=u.gettimeset(n)(o.hour,o.minute,o.second,0)),u.rebuild(o.year,o.month)}}function sn(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,l=r.byeaster,c=r.bymonthday,o=r.bynmonthday,u=r.byyearday;return G(n)&&!P(n,t.mmask[e])||G(i)&&!t.wnomask[e]||G(a)&&!P(a,t.wdaymask[e])||G(t.nwdaymask)&&!t.nwdaymask[e]||l!==null&&!P(t.eastermask,e)||(G(c)||G(o))&&!P(c,t.mdaymask[e])&&!P(o,t.nmdaymask[e])||G(u)&&(e<t.yearlen&&!P(u,e+1)&&!P(u,-t.yearlen+e)||e>=t.yearlen&&!P(u,e+1-t.yearlen)&&!P(u,-t.nextyearlen+e-t.yearlen))}function kt(t,e){return new He(t,e.tzid).rezonedDate()}function he(t){return t.getValue()}function on(t,e,r,n,i){for(var a=!1,l=e;l<r;l++){var c=t[l];a=sn(n,c,i),a&&(t[c]=null)}return a}function ln(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,l=r.bysecond;return ot(n)?Cr(r):n>=L.HOURLY&&G(i)&&!P(i,e.hour)||n>=L.MINUTELY&&G(a)&&!P(a,e.minute)||n>=L.SECONDLY&&G(l)&&!P(l,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ie={MO:new $(0),TU:new $(1),WE:new $(2),TH:new $(3),FR:new $(4),SA:new $(5),SU:new $(6)},lt={freq:R.YEARLY,dtstart:null,interval:1,wkst:ie.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},un=Object.keys(lt),L=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new Pr,this.origOptions=or(e);var n=Ur(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return sr(e,r)},t.fromText=function(e,r){return Lr(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return lr(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new pt("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new Te("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!Oe(e)||!Oe(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new pt("between",a,i));var l=this._cacheGet("between",a);return l===!1&&(l=this._iter(new Te("between",a)),this._cacheAdd("between",l,a)),l},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!Oe(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Te("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!Oe(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Te("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return nt(this.origOptions)},t.prototype.toText=function(e,r,n){return Ar(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return Nr(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=R.YEARLY,t.MONTHLY=R.MONTHLY,t.WEEKLY=R.WEEKLY,t.DAILY=R.DAILY,t.HOURLY=R.HOURLY,t.MINUTELY=R.MINUTELY,t.SECONDLY=R.SECONDLY,t.MO=ie.MO,t.TU=ie.TU,t.WE=ie.WE,t.TH=ie.TH,t.FR=ie.FR,t.SA=ie.SA,t.SU=ie.SU,t.parseString=rt,t.optionsToString=nt,t}();function fn(t,e,r,n,i,a){var l={},c=t.accept;function o(s,h){r.forEach(function(y){y.between(s,h,!0).forEach(function(w){l[Number(w)]=!0})})}i.forEach(function(s){var h=new He(s,a).rezonedDate();l[Number(h)]=!0}),t.accept=function(s){var h=Number(s);return isNaN(h)?c.call(this,s):!l[h]&&(o(new Date(h-1),new Date(h+1)),!l[h])?(l[h]=!0,c.call(this,s)):!0},t.method==="between"&&(o(t.args.after,t.args.before),t.accept=function(s){var h=Number(s);return l[h]?!0:(l[h]=!0,c.call(this,s))});for(var u=0;u<n.length;u++){var d=new He(n[u],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(s){lr(t,s.options)});var f=t._result;switch(Ne(f),t.method){case"all":case"between":return f;case"before":return f.length&&f[f.length-1]||null;case"after":default:return f.length&&f[0]||null}}var Tt={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function cn(t,e){var r=[],n=[],i=[],a=[],l=We(t),c=l.dtstart,o=l.tzid,u=vn(t,e.unfold);return u.forEach(function(d){var f;if(d){var s=mn(d),h=s.name,y=s.parms,w=s.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));r.push(rt(d));break;case"RDATE":var m=(f=/RDATE(?:;TZID=([^:=]+))?/i.exec(d))!==null&&f!==void 0?f:[],D=m[1];D&&!o&&(o=D),n=n.concat(Dt(w,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(rt(w));break;case"EXDATE":a=a.concat(Dt(w,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:c,tzid:o,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function hn(t,e){var r=cn(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,l=r.exdatevals,c=r.dtstart,o=r.tzid,u=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||l.length){var d=new pn(u);return d.dtstart(c),d.tzid(o||void 0),n.forEach(function(s){d.rrule(new L(Ve(s,c,o),u))}),i.forEach(function(s){d.rdate(s)}),a.forEach(function(s){d.exrule(new L(Ve(s,c,o),u))}),l.forEach(function(s){d.exdate(s)}),e.compatible&&e.dtstart&&d.rdate(c),d}var f=n[0]||{};return new L(Ve(f,f.dtstart||e.dtstart||c,f.tzid||e.tzid||o),u)}function St(t,e){return e===void 0&&(e={}),hn(t,dn(e))}function Ve(t,e,r){return te(te({},t),{dtstart:e,tzid:r})}function dn(t){var e=[],r=Object.keys(t),n=Object.keys(Tt);if(r.forEach(function(i){P(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return te(te({},Tt),t)}function yn(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=wr(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function mn(t){var e=yn(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function vn(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function bn(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function Dt(t,e){return bn(e),t.split(",").map(function(r){return it(r)})}function Mt(t){var e=this;return function(r){if(r!==void 0&&(e["_".concat(t)]=r),e["_".concat(t)]!==void 0)return e["_".concat(t)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var pn=function(t){st(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=Mt.apply(n,["dtstart"]),n.tzid=Mt.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return fn(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){Ot(r,this._rrule)},e.prototype.exrule=function(r){Ot(r,this._exrule)},e.prototype.rdate=function(r){Lt(r,this._rdate)},e.prototype.exdate=function(r){Lt(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return St(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return St(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(nt({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(At("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(At("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(L);function Ot(t,e){if(!(t instanceof L))throw new TypeError(String(t)+" is not RRule instance");P(e.map(String),String(t))||e.push(t)}function Lt(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");P(e.map(Number),Number(t))||(e.push(t),Ne(e))}function At(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?"".concat(t,":"):"".concat(t,";TZID=").concat(r,":"),a=e.map(function(l){return at(l.valueOf(),n)}).join(",");return"".concat(i).concat(a)}const ur={Sundays:({start_date:t,until:e})=>new L({freq:L.WEEKLY,dtstart:t,until:e,byweekday:[L.SU]})},fr=(t,e)=>t(e).all(),cr=t=>{const e=t.getMonth(),r=t.getFullYear();let n=0;for(let i=1;i<=31;i++){const a=new Date(r,e,i);if(a.getMonth()!==e)break;if(a.getDay()===0&&(n++,a.getDate()===t.getDate())){const l=["st","nd","rd","th"],c=n<=3?l[n-1]:l[3];return`${n}${c}`}}return""},_n=vr([]);async function ut(t){const{data:e,error:r}=await Vt.from("assignments").select("*").eq("list_name",t).order("date");if(r)throw r;const n=e||[];return _n.set(n),n}async function hr(t,e,r){const{error:n}=await Vt.from("assignments").upsert([{list_name:t,date:e,overridden_member:r,updated_at:new Date().toISOString()}],{onConflict:"list_name, date"});if(n)throw n;await ut(t)}function Nt(t,e,r){const n=t.slice();return n[13]=e[r],n[14]=e,n[15]=r,n}function Yt(t,e,r){const n=t.slice();return n[16]=e[r],n}function wn(t){let e,r=V(t[13].date,"MMM dd")+"",n,i,a,l=t[13].sundayNumber+"",c,o,u=V(t[13].date,"EEEE")+"",d,f,s,h,y,w=(t[13].overridden_member?t[13].overridden_member:t[13].member)+"",m,D,S=t[13].overridden_member?"*":"",k,p,v=t[0]&&Ut();return{c(){e=O("td"),n=q(r),i=W(),a=O("small"),c=q(l),o=W(),d=q(u),f=W(),s=O("td"),h=O("div"),y=O("span"),m=q(w),D=W(),k=q(S),p=W(),v&&v.c(),this.h()},l(b){e=M(b,"TD",{});var _=A(e);n=z(_,r),i=x(_),a=M(_,"SMALL",{class:!0});var j=A(a);c=z(j,l),o=x(j),d=z(j,u),j.forEach(T),_.forEach(T),f=x(b),s=M(b,"TD",{});var K=A(s);h=M(K,"DIV",{class:!0});var U=A(h);y=M(U,"SPAN",{});var Z=A(y);m=z(Z,w),D=x(Z),k=z(Z,S),Z.forEach(T),p=x(U),v&&v.l(U),U.forEach(T),K.forEach(T),this.h()},h(){Y(a,"class","fw-lighter"),Y(h,"class","d-flex justify-content-between")},m(b,_){C(b,e,_),E(e,n),E(e,i),E(e,a),E(a,c),E(a,o),E(a,d),C(b,f,_),C(b,s,_),E(s,h),E(h,y),E(y,m),E(y,D),E(y,k),E(h,p),v&&v.m(h,null)},p(b,_){_&4&&r!==(r=V(b[13].date,"MMM dd")+"")&&F(n,r),_&4&&l!==(l=b[13].sundayNumber+"")&&F(c,l),_&4&&u!==(u=V(b[13].date,"EEEE")+"")&&F(d,u),_&4&&w!==(w=(b[13].overridden_member?b[13].overridden_member:b[13].member)+"")&&F(m,w),_&4&&S!==(S=b[13].overridden_member?"*":"")&&F(k,S),b[0]?v||(v=Ut(),v.c(),v.m(h,null)):v&&(v.d(1),v=null)},d(b){b&&(T(e),T(f),T(s)),v&&v.d()}}}function gn(t){let e,r=V(t[13].date,"MMM dd")+"",n,i,a,l=t[13].sundayNumber+"",c,o,u=V(t[13].date,"EEEE")+"",d,f,s,h=(t[13].event??"")+"",y,w,m,D,S,k="No Sacrament Services";return{c(){e=O("td"),n=q(r),i=W(),a=O("small"),c=q(l),o=W(),d=q(u),f=W(),s=O("td"),y=q(h),w=W(),m=O("br"),D=W(),S=O("small"),S.textContent=k,this.h()},l(p){e=M(p,"TD",{});var v=A(e);n=z(v,r),i=x(v),a=M(v,"SMALL",{class:!0});var b=A(a);c=z(b,l),o=x(b),d=z(b,u),b.forEach(T),v.forEach(T),f=x(p),s=M(p,"TD",{});var _=A(s);y=z(_,h),w=x(_),m=M(_,"BR",{}),D=x(_),S=M(_,"SMALL",{class:!0,"data-svelte-h":!0}),ue(S)!=="svelte-2r8039"&&(S.textContent=k),_.forEach(T),this.h()},h(){Y(a,"class","fw-lighter"),Y(S,"class","fw-lighter")},m(p,v){C(p,e,v),E(e,n),E(e,i),E(e,a),E(a,c),E(a,o),E(a,d),C(p,f,v),C(p,s,v),E(s,y),E(s,w),E(s,m),E(s,D),E(s,S)},p(p,v){v&4&&r!==(r=V(p[13].date,"MMM dd")+"")&&F(n,r),v&4&&l!==(l=p[13].sundayNumber+"")&&F(c,l),v&4&&u!==(u=V(p[13].date,"EEEE")+"")&&F(d,u),v&4&&h!==(h=(p[13].event??"")+"")&&F(y,h)},d(p){p&&(T(e),T(f),T(s))}}}function Ut(t){let e;return{c(){e=O("i"),this.h()},l(r){e=M(r,"I",{class:!0}),A(e).forEach(T),this.h()},h(){Y(e,"class","bi bi-pencil-square")},m(r,n){C(r,e,n)},d(r){r&&T(e)}}}function Ct(t){let e,r,n,i,a="Change assignment to:",l,c,o,u="None",d,f,s,h,y=ae(t[1]),w=[];for(let S=0;S<y.length;S+=1)w[S]=Rt(Yt(t,y,S));function m(){t[9].call(c,t[14],t[15])}function D(){return t[10](t[13],t[15])}return{c(){e=O("tr"),r=O("td"),n=O("div"),i=O("div"),i.textContent=a,l=W(),c=O("select"),o=O("option"),o.textContent=u;for(let S=0;S<w.length;S+=1)w[S].c();d=W(),this.h()},l(S){e=M(S,"TR",{class:!0});var k=A(e);r=M(k,"TD",{colspan:!0});var p=A(r);n=M(p,"DIV",{class:!0});var v=A(n);i=M(v,"DIV",{"data-svelte-h":!0}),ue(i)!=="svelte-1t5xiq"&&(i.textContent=a),l=x(v),c=M(v,"SELECT",{class:!0});var b=A(c);o=M(b,"OPTION",{"data-svelte-h":!0}),ue(o)!=="svelte-1vbnolo"&&(o.textContent=u);for(let _=0;_<w.length;_+=1)w[_].l(b);b.forEach(T),v.forEach(T),p.forEach(T),d=x(k),k.forEach(T),this.h()},h(){o.__value="",fe(o,o.__value),Y(c,"class","form-select form-control-sm"),t[13].overridden_member===void 0&&Ue(m),Y(n,"class","d-flex flex-column gap-2 p-2"),Y(r,"colspan","2"),Y(e,"class",f=t[3][`row-${t[15]}`]?"table-secondary":"d-none")},m(S,k){C(S,e,k),E(e,r),E(r,n),E(n,i),E(n,l),E(n,c),E(c,o);for(let p=0;p<w.length;p+=1)w[p]&&w[p].m(c,null);ye(c,t[13].overridden_member,!0),E(e,d),s||(h=[_e(c,"change",m),_e(c,"change",D)],s=!0)},p(S,k){if(t=S,k&6){y=ae(t[1]);let p;for(p=0;p<y.length;p+=1){const v=Yt(t,y,p);w[p]?w[p].p(v,k):(w[p]=Rt(v),w[p].c(),w[p].m(c,null))}for(;p<w.length;p+=1)w[p].d(1);w.length=y.length}k&6&&ye(c,t[13].overridden_member),k&8&&f!==(f=t[3][`row-${t[15]}`]?"table-secondary":"d-none")&&Y(e,"class",f)},d(S){S&&T(e),Se(w,S),s=!1,Qt(h)}}}function It(t){let e,r=t[16]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=A(e);n=z(l,r),l.forEach(T),this.h()},h(){e.__value=i=t[16],fe(e,e.__value)},m(a,l){C(a,e,l),E(e,n)},p(a,l){l&2&&r!==(r=a[16]+"")&&F(n,r),l&2&&i!==(i=a[16])&&(e.__value=i,fe(e,e.__value))},d(a){a&&T(e)}}}function Rt(t){let e,r=t[16]!==t[13].member&&It(t);return{c(){r&&r.c(),e=we()},l(n){r&&r.l(n),e=we()},m(n,i){r&&r.m(n,i),C(n,e,i)},p(n,i){n[16]!==n[13].member?r?r.p(n,i):(r=It(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(n){n&&T(e),r&&r.d(n)}}}function xt(t){let e,r,n,i,a,l;function c(s,h){return s[13]?.event?gn:wn}let o=c(t),u=o(t);function d(){return t[8](t[15])}let f=t[0]&&Ct(t);return{c(){e=O("tr"),u.c(),n=W(),f&&f.c(),i=we(),this.h()},l(s){e=M(s,"TR",{class:!0});var h=A(e);u.l(h),h.forEach(T),n=x(s),f&&f.l(s),i=we(),this.h()},h(){Y(e,"class",r=t[13].member===null?"table-secondary":"")},m(s,h){C(s,e,h),u.m(e,null),C(s,n,h),f&&f.m(s,h),C(s,i,h),a||(l=_e(e,"click",d),a=!0)},p(s,h){t=s,o===(o=c(t))&&u?u.p(t,h):(u.d(1),u=o(t),u&&(u.c(),u.m(e,null))),h&6&&r!==(r=t[13].member===null?"table-secondary":"")&&Y(e,"class",r),t[0]?f?f.p(t,h):(f=Ct(t),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(s){s&&(T(e),T(n),T(i)),u.d(),f&&f.d(s),a=!1,l()}}}function En(t){let e,r,n,i='<tr><td class="small">Date</td> <td class="small">Assignment</td></tr>',a,l,c=ae(t[2]),o=[];for(let u=0;u<c.length;u+=1)o[u]=xt(Nt(t,c,u));return{c(){e=O("div"),r=O("table"),n=O("thead"),n.innerHTML=i,a=W(),l=O("tbody");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var d=A(e);r=M(d,"TABLE",{class:!0});var f=A(r);n=M(f,"THEAD",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-1c8l31s"&&(n.innerHTML=i),a=x(f),l=M(f,"TBODY",{});var s=A(l);for(let h=0;h<o.length;h+=1)o[h].l(s);s.forEach(T),f.forEach(T),d.forEach(T),this.h()},h(){Y(n,"class","table-dark"),Y(r,"class","table"),Y(e,"class","table-responsive")},m(u,d){C(u,e,d),E(e,r),E(r,n),E(r,a),E(r,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,null)},p(u,[d]){if(d&63){c=ae(u[2]);let f;for(f=0;f<c.length;f+=1){const s=Nt(u,c,f);o[f]?o[f].p(s,d):(o[f]=xt(s),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=c.length}},i:Ae,o:Ae,d(u){u&&T(e),Se(o,u)}}}function kn(t,e,r){let{editable:n=!1}=e,{listName:i="Some List"}=e,{names:a=[]}=e,{excludedDates:l=[]}=e,c=[],o=[];const u=async(m=new Date(2025,0,1,0,0,0),D=new Date(2025,11,31,0,0,0))=>{const S={start_date:m,until:D};c=fr(ur.Sundays,S);const k=new Date;k.setHours(0,0,0,0);const p=c.map((b,_)=>{const j=l.find(K=>Ie(b,K.date));return{member:j?null:a[_%a.length],date:b,sundayNumber:cr(b),event:j?j.event:void 0,overridden_member:null}}).filter(b=>b.date>=k),v=await ut(i);return p.map(b=>{const _=v.find(j=>Ie(new Date(j.date),b.date));return{...b,overridden_member:_?_.overridden_member:null}})},d=m=>{n&&r(3,s[`row-${m}`]=!s[`row-${m}`],s)},f=async(m,D)=>{const S=m.overridden_member||null;await hr(i,m.date.toISOString(),S),r(3,s[D]=!s[D],s)},s={},h=m=>d(m);function y(m,D){m[D].overridden_member=Ce(this),r(2,o),r(1,a)}const w=(m,D)=>f(m,`row-${D}`);return t.$$set=m=>{"editable"in m&&r(0,n=m.editable),"listName"in m&&r(6,i=m.listName),"names"in m&&r(1,a=m.names),"excludedDates"in m&&r(7,l=m.excludedDates)},u().then(m=>{r(2,o=m)}),[n,a,o,s,d,f,i,l,h,y,w]}class Tn extends je{constructor(e){super(),Ke(this,e,kn,En,Pe,{editable:0,listName:6,names:1,excludedDates:7})}}function Wt(t,e,r){const n=t.slice();return n[16]=e[r],n[17]=e,n[18]=r,n}function Ht(t,e,r){const n=t.slice();return n[19]=e[r],n}function Pt(t,e,r){const n=t.slice();return n[19]=e[r],n}function Sn(t){let e,r=V(t[16].date,"MMM dd")+"",n,i,a,l=t[16].sundayNumber+"",c,o,u=V(t[16].date,"EEEE")+"",d,f,s,h,y,w,m=t[7](t[16].overridden_member?t[16].overridden_member:t[16].member)+"",D,S=t[16].overridden_member?"*":"",k,p,v=t[0]&&jt();return{c(){e=O("td"),n=q(r),i=W(),a=O("small"),c=q(l),o=W(),d=q(u),f=W(),s=O("td"),h=O("div"),y=O("span"),w=new yr(!1),D=W(),k=q(S),p=W(),v&&v.c(),this.h()},l(b){e=M(b,"TD",{});var _=A(e);n=z(_,r),i=x(_),a=M(_,"SMALL",{class:!0});var j=A(a);c=z(j,l),o=x(j),d=z(j,u),j.forEach(T),_.forEach(T),f=x(b),s=M(b,"TD",{});var K=A(s);h=M(K,"DIV",{class:!0});var U=A(h);y=M(U,"SPAN",{});var Z=A(y);w=dr(Z,!1),D=x(Z),k=z(Z,S),Z.forEach(T),p=x(U),v&&v.l(U),U.forEach(T),K.forEach(T),this.h()},h(){Y(a,"class","fw-lighter"),w.a=D,Y(h,"class","d-flex justify-content-between")},m(b,_){C(b,e,_),E(e,n),E(e,i),E(e,a),E(a,c),E(a,o),E(a,d),C(b,f,_),C(b,s,_),E(s,h),E(h,y),w.m(m,y),E(y,D),E(y,k),E(h,p),v&&v.m(h,null)},p(b,_){_&4&&r!==(r=V(b[16].date,"MMM dd")+"")&&F(n,r),_&4&&l!==(l=b[16].sundayNumber+"")&&F(c,l),_&4&&u!==(u=V(b[16].date,"EEEE")+"")&&F(d,u),_&4&&m!==(m=b[7](b[16].overridden_member?b[16].overridden_member:b[16].member)+"")&&w.p(m),_&4&&S!==(S=b[16].overridden_member?"*":"")&&F(k,S),b[0]?v||(v=jt(),v.c(),v.m(h,null)):v&&(v.d(1),v=null)},d(b){b&&(T(e),T(f),T(s)),v&&v.d()}}}function Dn(t){let e,r=V(t[16].date,"MMM dd")+"",n,i,a,l=t[16].sundayNumber+"",c,o,u=V(t[16].date,"EEEE")+"",d,f,s,h=(t[16].event??"")+"",y,w,m,D,S,k="No Sacrament Services";return{c(){e=O("td"),n=q(r),i=W(),a=O("small"),c=q(l),o=W(),d=q(u),f=W(),s=O("td"),y=q(h),w=W(),m=O("br"),D=W(),S=O("small"),S.textContent=k,this.h()},l(p){e=M(p,"TD",{});var v=A(e);n=z(v,r),i=x(v),a=M(v,"SMALL",{class:!0});var b=A(a);c=z(b,l),o=x(b),d=z(b,u),b.forEach(T),v.forEach(T),f=x(p),s=M(p,"TD",{});var _=A(s);y=z(_,h),w=x(_),m=M(_,"BR",{}),D=x(_),S=M(_,"SMALL",{class:!0,"data-svelte-h":!0}),ue(S)!=="svelte-2r8039"&&(S.textContent=k),_.forEach(T),this.h()},h(){Y(a,"class","fw-lighter"),Y(S,"class","fw-lighter")},m(p,v){C(p,e,v),E(e,n),E(e,i),E(e,a),E(a,c),E(a,o),E(a,d),C(p,f,v),C(p,s,v),E(s,y),E(s,w),E(s,m),E(s,D),E(s,S)},p(p,v){v&4&&r!==(r=V(p[16].date,"MMM dd")+"")&&F(n,r),v&4&&l!==(l=p[16].sundayNumber+"")&&F(c,l),v&4&&u!==(u=V(p[16].date,"EEEE")+"")&&F(d,u),v&4&&h!==(h=(p[16].event??"")+"")&&F(y,h)},d(p){p&&(T(e),T(f),T(s))}}}function jt(t){let e;return{c(){e=O("i"),this.h()},l(r){e=M(r,"I",{class:!0}),A(e).forEach(T),this.h()},h(){Y(e,"class","bi bi-pencil-square")},m(r,n){C(r,e,n)},d(r){r&&T(e)}}}function Kt(t){let e,r,n,i,a="Change assignments:",l,c,o,u,d="None",f,s,h,y="None",w,m,D="Save",S,k,p,v,b=ae(t[1]),_=[];for(let H=0;H<b.length;H+=1)_[H]=zt(Pt(t,b,H));function j(){t[11].call(o,t[18])}let K=ae(t[1]),U=[];for(let H=0;H<K.length;H+=1)U[H]=qt(Ht(t,K,H));function Z(){t[12].call(s,t[18])}function Ze(){return t[13](t[16],t[18])}return{c(){e=O("tr"),r=O("td"),n=O("div"),i=O("div"),i.textContent=a,l=W(),c=O("div"),o=O("select"),u=O("option"),u.textContent=d;for(let H=0;H<_.length;H+=1)_[H].c();f=W(),s=O("select"),h=O("option"),h.textContent=y;for(let H=0;H<U.length;H+=1)U[H].c();w=W(),m=O("button"),m.textContent=D,S=W(),this.h()},l(H){e=M(H,"TR",{class:!0});var J=A(e);r=M(J,"TD",{colspan:!0});var N=A(r);n=M(N,"DIV",{class:!0});var re=A(n);i=M(re,"DIV",{"data-svelte-h":!0}),ue(i)!=="svelte-eq75xm"&&(i.textContent=a),l=x(re),c=M(re,"DIV",{class:!0});var Ye=A(c);o=M(Ye,"SELECT",{class:!0});var Ge=A(o);u=M(Ge,"OPTION",{"data-svelte-h":!0}),ue(u)!=="svelte-1vbnolo"&&(u.textContent=d);for(let ge=0;ge<_.length;ge+=1)_[ge].l(Ge);Ge.forEach(T),f=x(Ye),s=M(Ye,"SELECT",{class:!0});var Xe=A(s);h=M(Xe,"OPTION",{"data-svelte-h":!0}),ue(h)!=="svelte-1vbnolo"&&(h.textContent=y);for(let ge=0;ge<U.length;ge+=1)U[ge].l(Xe);Xe.forEach(T),Ye.forEach(T),w=x(re),m=M(re,"BUTTON",{class:!0,"data-svelte-h":!0}),ue(m)!=="svelte-172b02k"&&(m.textContent=D),re.forEach(T),N.forEach(T),S=x(J),J.forEach(T),this.h()},h(){u.__value="",fe(u,u.__value),Y(o,"class","form-select form-control-sm"),t[3][`row-${t[18]}`].first===void 0&&Ue(j),h.__value="",fe(h,h.__value),Y(s,"class","form-select form-control-sm"),t[3][`row-${t[18]}`].second===void 0&&Ue(Z),Y(c,"class","d-flex gap-2"),Y(m,"class","btn btn-sm btn-primary"),Y(n,"class","d-flex flex-column gap-2 p-2"),Y(r,"colspan","2"),Y(e,"class",k=t[4][`row-${t[18]}`]?"table-secondary":"d-none")},m(H,J){C(H,e,J),E(e,r),E(r,n),E(n,i),E(n,l),E(n,c),E(c,o),E(o,u);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(o,null);ye(o,t[3][`row-${t[18]}`].first,!0),E(c,f),E(c,s),E(s,h);for(let N=0;N<U.length;N+=1)U[N]&&U[N].m(s,null);ye(s,t[3][`row-${t[18]}`].second,!0),E(n,w),E(n,m),E(e,S),p||(v=[_e(o,"change",j),_e(s,"change",Z),_e(m,"click",Ze)],p=!0)},p(H,J){if(t=H,J&2){b=ae(t[1]);let N;for(N=0;N<b.length;N+=1){const re=Pt(t,b,N);_[N]?_[N].p(re,J):(_[N]=zt(re),_[N].c(),_[N].m(o,null))}for(;N<_.length;N+=1)_[N].d(1);_.length=b.length}if(J&10&&ye(o,t[3][`row-${t[18]}`].first),J&2){K=ae(t[1]);let N;for(N=0;N<K.length;N+=1){const re=Ht(t,K,N);U[N]?U[N].p(re,J):(U[N]=qt(re),U[N].c(),U[N].m(s,null))}for(;N<U.length;N+=1)U[N].d(1);U.length=K.length}J&10&&ye(s,t[3][`row-${t[18]}`].second),J&16&&k!==(k=t[4][`row-${t[18]}`]?"table-secondary":"d-none")&&Y(e,"class",k)},d(H){H&&T(e),Se(_,H),Se(U,H),p=!1,Qt(v)}}}function zt(t){let e,r=t[19]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=A(e);n=z(l,r),l.forEach(T),this.h()},h(){e.__value=i=t[19],fe(e,e.__value)},m(a,l){C(a,e,l),E(e,n)},p(a,l){l&2&&r!==(r=a[19]+"")&&F(n,r),l&2&&i!==(i=a[19])&&(e.__value=i,fe(e,e.__value))},d(a){a&&T(e)}}}function qt(t){let e,r=t[19]+"",n,i;return{c(){e=O("option"),n=q(r),this.h()},l(a){e=M(a,"OPTION",{});var l=A(e);n=z(l,r),l.forEach(T),this.h()},h(){e.__value=i=t[19],fe(e,e.__value)},m(a,l){C(a,e,l),E(e,n)},p(a,l){l&2&&r!==(r=a[19]+"")&&F(n,r),l&2&&i!==(i=a[19])&&(e.__value=i,fe(e,e.__value))},d(a){a&&T(e)}}}function Bt(t){let e,r,n,i,a,l;function c(s,h){return s[16]?.event?Dn:Sn}let o=c(t),u=o(t);function d(){return t[10](t[18])}let f=t[0]&&Kt(t);return{c(){e=O("tr"),u.c(),n=W(),f&&f.c(),i=we(),this.h()},l(s){e=M(s,"TR",{class:!0});var h=A(e);u.l(h),h.forEach(T),n=x(s),f&&f.l(s),i=we(),this.h()},h(){Y(e,"class",r=t[16].member===null?"table-secondary":"")},m(s,h){C(s,e,h),u.m(e,null),C(s,n,h),f&&f.m(s,h),C(s,i,h),a||(l=_e(e,"click",d),a=!0)},p(s,h){t=s,o===(o=c(t))&&u?u.p(t,h):(u.d(1),u=o(t),u&&(u.c(),u.m(e,null))),h&4&&r!==(r=t[16].member===null?"table-secondary":"")&&Y(e,"class",r),t[0]?f?f.p(t,h):(f=Kt(t),f.c(),f.m(i.parentNode,i)):f&&(f.d(1),f=null)},d(s){s&&(T(e),T(n),T(i)),u.d(),f&&f.d(s),a=!1,l()}}}function Mn(t){let e,r,n,i='<tr><td class="small">Date</td> <td class="small">Assignments</td></tr>',a,l,c=ae(t[2]),o=[];for(let u=0;u<c.length;u+=1)o[u]=Bt(Wt(t,c,u));return{c(){e=O("div"),r=O("table"),n=O("thead"),n.innerHTML=i,a=W(),l=O("tbody");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=M(u,"DIV",{class:!0});var d=A(e);r=M(d,"TABLE",{class:!0});var f=A(r);n=M(f,"THEAD",{class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-mvygor"&&(n.innerHTML=i),a=x(f),l=M(f,"TBODY",{});var s=A(l);for(let h=0;h<o.length;h+=1)o[h].l(s);s.forEach(T),f.forEach(T),d.forEach(T),this.h()},h(){Y(n,"class","table-dark"),Y(r,"class","table"),Y(e,"class","table-responsive")},m(u,d){C(u,e,d),E(e,r),E(r,n),E(r,a),E(r,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,null)},p(u,[d]){if(d&255){c=ae(u[2]);let f;for(f=0;f<c.length;f+=1){const s=Wt(u,c,f);o[f]?o[f].p(s,d):(o[f]=Bt(s),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=c.length}},i:Ae,o:Ae,d(u){u&&T(e),Se(o,u)}}}function On(t,e,r){let{editable:n=!1}=e,{listName:i="Some List"}=e,{names:a=[]}=e,{excludedDates:l=[]}=e,c=[],o=[],u={};const d=async(k=new Date(2025,0,1,0,0,0),p=new Date(2025,11,31,0,0,0))=>{const v={start_date:k,until:p};c=fr(ur.Sundays,v);const b=new Date;b.setHours(0,0,0,0);const _=c.map((K,U)=>{const Z=l.find(J=>Ie(K,J.date)),Ze=a[U%a.length],H=a.length>1?a[(U+1)%a.length]:"";return{member:Z?null:`${Ze}, ${H}`,date:K,sundayNumber:cr(K),event:Z?Z.event:void 0,overridden_member:null}}).filter(K=>K.date>=b),j=await ut(i);return _.map(K=>{const U=j.find(Z=>Ie(new Date(Z.date),K.date));return{...K,overridden_member:U?U.overridden_member:null}})},f=k=>{if(!n)return;const p=`row-${k}`;r(4,h[p]=!h[p],h)},s=async(k,p)=>{const{first:v,second:b}=u[p];let _="";v&&b?_=`${v}, ${b}`:(v||b)&&(_=v||b);const j=_.trim()===""?null:_;k.overridden_member=j,await hr(i,k.date.toISOString(),j),r(4,h[p]=!h[p],h),d().then(K=>{r(2,o=K)})},h={},y=k=>k?k.split(",").join("<br />"):"",w=k=>f(k);function m(k){u[`row-${k}`].first=Ce(this),r(3,u),r(2,o),r(0,n),r(1,a)}function D(k){u[`row-${k}`].second=Ce(this),r(3,u),r(2,o),r(0,n),r(1,a)}const S=(k,p)=>s(k,`row-${p}`);return t.$$set=k=>{"editable"in k&&r(0,n=k.editable),"listName"in k&&r(8,i=k.listName),"names"in k&&r(1,a=k.names),"excludedDates"in k&&r(9,l=k.excludedDates)},t.$$.update=()=>{t.$$.dirty&13&&o.length&&n&&o.forEach((k,p)=>{const v=`row-${p}`;if(!u[v]){const _=(k.overridden_member?k.overridden_member:k.member||"").split(",").map(j=>j.trim());r(3,u[v]={first:_[0]||"",second:_[1]||""},u)}})},d().then(k=>{r(2,o=k)}),[n,a,o,u,h,f,s,y,i,l,w,m,D,S]}class Ln extends je{constructor(e){super(),Ke(this,e,On,Mn,Pe,{editable:0,listName:8,names:1,excludedDates:9})}}function Ft(t,e,r){const n=t.slice();return n[7]=e[r],n}function Zt(t){let e,r=t[7]+"",n;return{c(){e=O("option"),n=q(r),this.h()},l(i){e=M(i,"OPTION",{});var a=A(e);n=z(a,r),a.forEach(T),this.h()},h(){e.__value=t[7],fe(e,e.__value)},m(i,a){C(i,e,a),E(e,n)},p:Ae,d(i){i&&T(e)}}}function Gt(t){let e,r;return e=new Tn({props:{editable:t[1]||t[2],listName:ve.SacramentBreadAssignments,names:Jt,excludedDates:$t}}),{c(){Fe(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&6&&(a.editable=n[1]||n[2]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){ze(e,n)}}}function Xt(t){let e,r;return e=new Ln({props:{editable:t[1]||t[2],listName:ve.SacramentPreparationAssignments,names:Jt,excludedDates:$t}}),{c(){Fe(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&6&&(a.editable=n[1]||n[2]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){ze(e,n)}}}function An(t){let e,r,n,i,a,l,c,o=ae(t[5]),u=[];for(let s=0;s<o.length;s+=1)u[s]=Zt(Ft(t,o,s));let d=t[0]===ve.SacramentBreadAssignments&&Gt(t),f=t[0]===ve.SacramentPreparationAssignments&&Xt(t);return{c(){e=O("select");for(let s=0;s<u.length;s+=1)u[s].c();r=W(),d&&d.c(),n=W(),f&&f.c(),i=we(),this.h()},l(s){e=M(s,"SELECT",{class:!0});var h=A(e);for(let y=0;y<u.length;y+=1)u[y].l(h);h.forEach(T),r=x(s),d&&d.l(s),n=x(s),f&&f.l(s),i=we(),this.h()},h(){Y(e,"class","form-select form-control-sm"),t[0]===void 0&&Ue(()=>t[6].call(e))},m(s,h){C(s,e,h);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(e,null);ye(e,t[0],!0),C(s,r,h),d&&d.m(s,h),C(s,n,h),f&&f.m(s,h),C(s,i,h),a=!0,l||(c=_e(e,"change",t[6]),l=!0)},p(s,[h]){if(h&32){o=ae(s[5]);let y;for(y=0;y<o.length;y+=1){const w=Ft(s,o,y);u[y]?u[y].p(w,h):(u[y]=Zt(w),u[y].c(),u[y].m(e,null))}for(;y<u.length;y+=1)u[y].d(1);u.length=o.length}h&33&&ye(e,s[0]),s[0]===ve.SacramentBreadAssignments?d?(d.p(s,h),h&1&&oe(d,1)):(d=Gt(s),d.c(),oe(d,1),d.m(n.parentNode,n)):d&&(ct(),me(d,1,1,()=>{d=null}),ht()),s[0]===ve.SacramentPreparationAssignments?f?(f.p(s,h),h&1&&oe(f,1)):(f=Xt(s),f.c(),oe(f,1),f.m(i.parentNode,i)):f&&(ct(),me(f,1,1,()=>{f=null}),ht())},i(s){a||(oe(d),oe(f),a=!0)},o(s){me(d),me(f),a=!1},d(s){s&&(T(e),T(r),T(n),T(i)),Se(u,s),d&&d.d(s),f&&f.d(s),l=!1,c()}}}function Nn(t,e,r){let n,i;const{stores:{currentUserIsRootOrAdmin:a,currentUserIsTeachersQuorum:l}}=br();ft(t,a,d=>r(1,n=d)),ft(t,l,d=>r(2,i=d));let c=ve.SacramentBreadAssignments;const o=Object.values(ve);function u(){c=Ce(this),r(0,c),r(5,o)}return[c,n,i,a,l,o,u]}class Yn extends je{constructor(e){super(),Ke(this,e,Nn,An,Pe,{})}}function Un(t){let e,r;return e=new Yn({}),{c(){Fe(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){ze(e,n)}}}function Cn(t){let e,r;return e=new mr({props:{pageTitle:"Assignments",$$slots:{default:[Un]},$$scope:{ctx:t}}}),{c(){Fe(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){ze(e,n)}}}class zn extends je{constructor(e){super(),Ke(this,e,null,Cn,Pe,{})}}export{zn as component,Kn as universal};
