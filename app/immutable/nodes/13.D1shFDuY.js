import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as K,f as ue,a as Q,aw as ge,g as t,U as p,a8 as i,s as o,c as f,r as u,aa as be,t as B,e as H}from"../chunks/D6GkHfO-.js";import{i as X}from"../chunks/XlJfi8GN.js";import{e as _,i as v,s as _e}from"../chunks/DYmw-k_K.js";import{c as he,a as n,f as c}from"../chunks/D8wZRsgK.js";import{a as W}from"../chunks/ByZFmqoY.js";import{r as k}from"../chunks/BzM8VPE5.js";import{g as Y,c as G}from"../chunks/vFKQls-f.js";import{b as L}from"../chunks/6wL3GoW6.js";import{p as ye}from"../chunks/CdEA5IGF.js";import{g as J}from"../chunks/BoxDUlBh.js";import{p as we}from"../chunks/Cjdtvmgk.js";import{L as xe}from"../chunks/f46sgKzV.js";const ke=!1,Qe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ke},Symbol.toStringTag,{value:"Module"}));var Le=c('<div class="alert alert-info d-flex align-items-center gap-2" role="alert"><i class="bi bi-info-circle-fill"></i> <div>Please check your email and click the verification link before logging in.</div></div>'),Ee=c('<a href="/auth/resend-verification" class="alert-link">Resend verification email</a>'),Pe=c('<div class="alert alert-danger d-flex align-items-center gap-2" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <div> <!></div></div>'),Te=c('<input type="email" class="form-control" placeholder="Email" id="email" aria-describedby="email"/>'),Se=c('<input type="text" class="form-control" placeholder="Username" id="user-name" aria-describedby="username"/>'),ze=c('<div class="input-group"><input type="text" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Hide password"><i class="bi bi-eye-slash"></i></button></div>'),Ie=c('<div class="input-group"><input type="password" class="form-control" placeholder="password" id="password" aria-describedby="password"/> <button class="input-group-text" aria-label="Show password"><i class="bi bi-eye"></i></button></div>'),Ue=c('<div class="text-end"><a href="/auth/forgot-password" class="link-primary small">Forgot password?</a></div>'),je=c(`<div class="text-center"><small class="text-muted">Don't have an account? <a href="/auth/signup" class="link-primary">Sign up</a></small></div>`),Ae=c('<div class="container d-flex flex-column gap-3 mt-5 mb-5 svelte-1lcbzi1"><a href="/home" class="header-content d-flex align-items-center gap-2 text-decoration-none svelte-1lcbzi1"><img src="/assets/logo.png" alt="logo" class="logo svelte-1lcbzi1"/> <h1 class="mb-0 h4">Lehi Tolutaha</h1></a> <div class="btn-group w-100" role="group" aria-label="Login method"><button type="button"><i class="bi bi-person"></i> Username</button> <button type="button"><i class="bi bi-envelope"></i> Email</button></div> <!> <!> <form class="d-flex gap-3 flex-column"><!> <!> <!> <div class="d-flex justify-content-between"><a href="/home" class="btn-link btn">Back to home</a> <button type="submit" class="btn btn-secondary">Submit</button></div></form> <!></div>');function De(E,P){K(P,!1);const{actions:{login:T,loginWithEmail:Z}}=Y();let g=p(!1),d=p("username"),y=p(""),w=p(""),m=p(""),S=p(!1),l=p(""),z=p(!1);const D=async()=>{if(i(g,!0),i(l,""),i(z,!1),t(d)==="email"){if(!t(y)||!t(m)){i(l,"Email and password are required"),i(g,!1);return}const s=await Z(t(y),t(m));s.success?(i(l,"Logging you in ..."),setTimeout(()=>{J("/home")},1e3)):(s.code==="EMAIL_NOT_VERIFIED"?(i(l,"Please verify your email first."),i(z,!0)):i(l,s.error||"Login failed, please try again"),setTimeout(()=>{i(g,!1)},1e3))}else{if(!t(w)||!t(m)){i(l,"Username and password are required"),i(g,!1);return}await T(t(w),t(m))?(i(l,"Logging you in ..."),setTimeout(()=>{J("/home")},1e3)):(i(l,"Login failed, please try again"),setTimeout(()=>{i(g,!1)},1e3))}},M=()=>{i(S,!t(S))},$=s=>{s.key==="Enter"&&D()},O=s=>{s.focus()};X();var R=he();_("keydown",ge,$);var ee=ue(R);{var ae=s=>{xe(s,{get message(){return t(l)}})},te=s=>{var I=Ae(),U=o(f(I),2),j=f(U),q=o(j,2);u(U);var C=o(U,2);{var ie=e=>{var a=Le();n(e,a)};v(C,e=>{we.url.searchParams.get("verified")==="pending"&&e(ie)})}var F=o(C,2);{var re=e=>{var a=Pe(),r=o(f(a),2),b=f(r),h=o(b);{var ve=A=>{var fe=Ee();n(A,fe)};v(h,A=>{t(z)&&A(ve)})}u(r),u(a),B(()=>_e(b,`${t(l)??""} `)),n(e,a)};v(F,e=>{t(l)&&e(re)})}var x=o(F,2),N=f(x);{var se=e=>{var a=Te();k(a),H(()=>L(a,()=>t(y),r=>i(y,r))),W(a,r=>O?.(r)),n(e,a)},oe=e=>{var a=Se();k(a),H(()=>L(a,()=>t(w),r=>i(w,r))),W(a,r=>O?.(r)),n(e,a)};v(N,e=>{t(d)==="email"?e(se):e(oe,!1)})}var V=o(N,2);{var le=e=>{var a=ze(),r=f(a);k(r);var b=o(r,2);u(a),L(r,()=>t(m),h=>i(m,h)),_("click",b,M),n(e,a)},ne=e=>{var a=Ie(),r=f(a);k(r);var b=o(r,2);u(a),L(r,()=>t(m),h=>i(m,h)),_("click",b,M),n(e,a)};v(V,e=>{t(S)?e(le):e(ne,!1)})}var ce=o(V,2);{var de=e=>{var a=Ue();n(e,a)};v(ce,e=>{t(d)==="email"&&e(de)})}be(2),u(x);var me=o(x,2);{var pe=e=>{var a=je();n(e,a)};v(me,e=>{t(d)==="email"&&e(pe)})}u(I),B(()=>{G(j,1,`btn ${t(d)==="username"?"btn-primary":"btn-outline-primary"}`),G(q,1,`btn ${t(d)==="email"?"btn-primary":"btn-outline-primary"}`)}),_("click",j,()=>i(d,"username")),_("click",q,()=>i(d,"email")),_("submit",x,ye(D)),n(s,I)};v(ee,s=>{t(g)?s(ae):s(te,!1)})}n(E,R),Q()}function Xe(E,P){K(P,!1);const{stores:{pageName:T}}=Y();T.set("Auth - Login"),X(),De(E,{}),Q()}export{Xe as component,Qe as universal};
