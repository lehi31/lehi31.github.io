import{a as tt}from"../chunks/CnC24E_g.js";import{P as st}from"../chunks/DHA0MCMP.js";import{s as We,N as he,o as Ze,d as m,C as Te,r as De,y as J,F as Se,v as le,i as K,q as n,z as x,a as i,G as lt,c as u,k,l as V,g as R,w as $,e as f,m as N,x as ee,J as rt,n as xe,t as Ue}from"../chunks/XwK7VtW3.js";import{S as $e,i as et,d as Le,t as Ie,a as Pe,m as Oe,c as Me,b as Ve}from"../chunks/e-rlo9AR.js";import{e as ce}from"../chunks/BXYRyfL2.js";import{P as nt}from"../chunks/mIgLz8ON.js";import{D as ot}from"../chunks/Ct6k4Xpq.js";import{u as it,c as at,a as ct,i as ut,d as ft,p as dt,b as ht,l as mt,e as _t}from"../chunks/BAz9rpXP.js";const pt=!1,vt=async()=>(tt(st.ManageUsers,"Manage Users"),{}),At=Object.freeze(Object.defineProperty({__proto__:null,load:vt,ssr:pt},Symbol.toStringTag,{value:"Module"}));function Ae(l,e,t){const s=l.slice();return s[21]=e[t],s}function je(l){let e,t;return{c(){e=f("div"),t=ee(l[8]),this.h()},l(s){e=u(s,"DIV",{class:!0,role:!0});var r=k(e);t=$(r,l[8]),r.forEach(m),this.h()},h(){i(e,"class","alert alert-danger"),i(e,"role","alert")},m(s,r){K(s,e,r),n(e,t)},p(s,r){r&256&&le(t,s[8])},d(s){s&&m(e)}}}function qe(l){let e,t="Key cannot be changed after creation";return{c(){e=f("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1k89ihx"&&(e.textContent=t),this.h()},h(){i(e,"class","form-text")},m(s,r){K(s,e,r)},d(s){s&&m(e)}}}function Fe(l){let e,t=l[21]+"",s,r;return{c(){e=f("option"),s=ee(t),this.h()},l(c){e=u(c,"OPTION",{});var o=k(e);s=$(o,t),o.forEach(m),this.h()},h(){e.__value=r=l[21],J(e,e.__value)},m(c,o){K(c,e,o),n(e,s)},p(c,o){o&8&&t!==(t=c[21]+"")&&le(s,t),o&8&&r!==(r=c[21])&&(e.__value=r,J(e,e.__value))},d(c){c&&m(e)}}}function ze(l){let e,t,s;return{c(){e=f("input"),this.h()},l(r){e=u(r,"INPUT",{type:!0,class:!0,placeholder:!0}),this.h()},h(){i(e,"type","text"),i(e,"class","form-control mt-2"),i(e,"placeholder","Enter custom category")},m(r,c){K(r,e,c),J(e,l[2]),t||(s=x(e,"input",l[17]),t=!0)},p(r,c){c&4&&e.value!==r[2]&&J(e,r[2])},d(r){r&&m(e),t=!1,s()}}}function bt(l){let e,t="Used for grouping permissions";return{c(){e=f("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ahflu"&&(e.textContent=t),this.h()},h(){i(e,"class","form-text")},m(s,r){K(s,e,r)},d(s){s&&m(e)}}}function gt(l){let e,t="Category cannot be changed after creation";return{c(){e=f("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-15pz51a"&&(e.textContent=t),this.h()},h(){i(e,"class","form-text")},m(s,r){K(s,e,r)},d(s){s&&m(e)}}}function Re(l){let e;return{c(){e=f("span"),this.h()},l(t){e=u(t,"SPAN",{class:!0,role:!0}),k(e).forEach(m),this.h()},h(){i(e,"class","spinner-border spinner-border-sm me-2"),i(e,"role","status")},m(t,s){K(t,e,s)},d(t){t&&m(e)}}}function yt(l){let e,t,s,r,c='Key <span class="text-danger">*</span>',o,b,T,g,y,I,C='Name <span class="text-danger">*</span>',L,D,P,p,a,M="Description",d,E,q,w,_,h="Category",H,U,S,A="Select a category...",X,ue="Other (custom)...",oe,re,ie,Y,W,me,fe=l[9]?"Update":"Create",_e,ye,Ee,Z,Ce,we,Ne,F=l[8]&&je(l),G=l[9]&&qe(),ae=ce(l[3]),j=[];for(let v=0;v<ae.length;v+=1)j[v]=Fe(Ae(l,ae,v));let z=l[1]==="__other__"&&!l[9]&&ze(l);function He(v,O){return v[9]?gt:bt}let pe=He(l),te=pe(l),Q=l[7]&&Re();return{c(){e=f("form"),F&&F.c(),t=N(),s=f("div"),r=f("label"),r.innerHTML=c,o=N(),b=f("input"),T=N(),G&&G.c(),g=N(),y=f("div"),I=f("label"),I.innerHTML=C,L=N(),D=f("input"),P=N(),p=f("div"),a=f("label"),a.textContent=M,d=N(),E=f("textarea"),q=N(),w=f("div"),_=f("label"),_.textContent=h,H=N(),U=f("select"),S=f("option"),S.textContent=A;for(let v=0;v<j.length;v+=1)j[v].c();X=f("option"),X.textContent=ue,oe=N(),z&&z.c(),re=N(),te.c(),ie=N(),Y=f("div"),W=f("button"),Q&&Q.c(),me=N(),_e=ee(fe),ye=ee(" Permission"),Ee=N(),Z=f("button"),Ce=ee("Cancel"),this.h()},l(v){e=u(v,"FORM",{});var O=k(e);F&&F.l(O),t=V(O),s=u(O,"DIV",{class:!0});var B=k(s);r=u(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(r)!=="svelte-jkzn9g"&&(r.innerHTML=c),o=V(B),b=u(B,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),T=V(B),G&&G.l(B),B.forEach(m),g=V(O),y=u(O,"DIV",{class:!0});var ne=k(y);I=u(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(I)!=="svelte-y7giqe"&&(I.innerHTML=C),L=V(ne),D=u(ne,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),ne.forEach(m),P=V(O),p=u(O,"DIV",{class:!0});var ve=k(p);a=u(ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(a)!=="svelte-ayuqpw"&&(a.textContent=M),d=V(ve),E=u(ve,"TEXTAREA",{class:!0,id:!0,rows:!0,placeholder:!0}),k(E).forEach(m),ve.forEach(m),q=V(O),w=u(O,"DIV",{class:!0});var se=k(w);_=u(se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(_)!=="svelte-fumam8"&&(_.textContent=h),H=V(se),U=u(se,"SELECT",{class:!0,id:!0});var be=k(U);S=u(be,"OPTION",{"data-svelte-h":!0}),R(S)!=="svelte-xy5cex"&&(S.textContent=A);for(let ke=0;ke<j.length;ke+=1)j[ke].l(be);X=u(be,"OPTION",{"data-svelte-h":!0}),R(X)!=="svelte-1wgdywq"&&(X.textContent=ue),be.forEach(m),oe=V(se),z&&z.l(se),re=V(se),te.l(se),se.forEach(m),ie=V(O),Y=u(O,"DIV",{class:!0});var ge=k(Y);W=u(ge,"BUTTON",{type:!0,class:!0});var de=k(W);Q&&Q.l(de),me=V(de),_e=$(de,fe),ye=$(de," Permission"),de.forEach(m),Ee=V(ge),Z=u(ge,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0});var Be=k(Z);Ce=$(Be,"Cancel"),Be.forEach(m),ge.forEach(m),O.forEach(m),this.h()},h(){i(r,"for","permission-key"),i(r,"class","form-label"),i(b,"type","text"),i(b,"class","form-control"),i(b,"id","permission-key"),b.required=!0,b.disabled=l[9],i(b,"placeholder","e.g., manage-events"),i(s,"class","mb-3"),i(I,"for","permission-name"),i(I,"class","form-label"),i(D,"type","text"),i(D,"class","form-control"),i(D,"id","permission-name"),D.required=!0,i(D,"placeholder","e.g., Manage Events"),i(y,"class","mb-3"),i(a,"for","permission-description"),i(a,"class","form-label"),i(E,"class","form-control"),i(E,"id","permission-description"),i(E,"rows","3"),i(E,"placeholder","Describe what this permission allows..."),i(p,"class","mb-3"),i(_,"for","permission-category"),i(_,"class","form-label"),S.__value="",J(S,S.__value),X.__value="__other__",J(X,X.__value),i(U,"class","form-select"),i(U,"id","permission-category"),U.disabled=l[9],l[1]===void 0&&lt(()=>l[16].call(U)),i(w,"class","mb-3"),i(W,"type","submit"),i(W,"class","btn btn-primary"),W.disabled=l[7],i(Z,"type","button"),i(Z,"class","btn btn-secondary"),i(Z,"data-bs-dismiss","offcanvas"),Z.disabled=l[7],i(Y,"class","d-flex gap-2")},m(v,O){K(v,e,O),F&&F.m(e,null),n(e,t),n(e,s),n(s,r),n(s,o),n(s,b),J(b,l[4]),n(s,T),G&&G.m(s,null),n(e,g),n(e,y),n(y,I),n(y,L),n(y,D),J(D,l[5]),n(e,P),n(e,p),n(p,a),n(p,d),n(p,E),J(E,l[6]),n(e,q),n(e,w),n(w,_),n(w,H),n(w,U),n(U,S);for(let B=0;B<j.length;B+=1)j[B]&&j[B].m(U,null);n(U,X),Se(U,l[1],!0),n(w,oe),z&&z.m(w,null),n(w,re),te.m(w,null),n(e,ie),n(e,Y),n(Y,W),Q&&Q.m(W,null),n(W,me),n(W,_e),n(W,ye),n(Y,Ee),n(Y,Z),n(Z,Ce),we||(Ne=[x(b,"input",l[13]),x(D,"input",l[14]),x(E,"input",l[15]),x(U,"change",l[16]),x(e,"submit",l[10])],we=!0)},p(v,O){if(v[8]?F?F.p(v,O):(F=je(v),F.c(),F.m(e,t)):F&&(F.d(1),F=null),O&512&&(b.disabled=v[9]),O&16&&b.value!==v[4]&&J(b,v[4]),v[9]?G||(G=qe(),G.c(),G.m(s,null)):G&&(G.d(1),G=null),O&32&&D.value!==v[5]&&J(D,v[5]),O&64&&J(E,v[6]),O&8){ae=ce(v[3]);let B;for(B=0;B<ae.length;B+=1){const ne=Ae(v,ae,B);j[B]?j[B].p(ne,O):(j[B]=Fe(ne),j[B].c(),j[B].m(U,X))}for(;B<j.length;B+=1)j[B].d(1);j.length=ae.length}O&512&&(U.disabled=v[9]),O&10&&Se(U,v[1]),v[1]==="__other__"&&!v[9]?z?z.p(v,O):(z=ze(v),z.c(),z.m(w,re)):z&&(z.d(1),z=null),pe!==(pe=He(v))&&(te.d(1),te=pe(v),te&&(te.c(),te.m(w,null))),v[7]?Q||(Q=Re(),Q.c(),Q.m(W,me)):Q&&(Q.d(1),Q=null),O&512&&fe!==(fe=v[9]?"Update":"Create")&&le(_e,fe),O&128&&(W.disabled=v[7]),O&128&&(Z.disabled=v[7])},d(v){v&&m(e),F&&F.d(),G&&G.d(),Te(j,v),z&&z.d(),te.d(),Q&&Q.d(),we=!1,De(Ne)}}}function Et(l){let e,t;return e=new ot({props:{title:l[9]?"Edit Permission":"Create Permission",id:l[0],$$slots:{default:[yt]},$$scope:{ctx:l}}}),{c(){Ve(e.$$.fragment)},l(s){Me(e.$$.fragment,s)},m(s,r){Oe(e,s,r),t=!0},p(s,[r]){const c={};r&512&&(c.title=s[9]?"Edit Permission":"Create Permission"),r&1&&(c.id=s[0]),r&16778238&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i(s){t||(Pe(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){Le(e,s)}}}function Ct(l,e,t){let s,r;he(l,ct,h=>t(3,r=h));let{id:c="permission-form-drawer"}=e,{permission:o=null}=e,{onSave:b=null}=e,T="",g="",y="",I="",C="",L="",D=!1,P="";async function p(h){h.preventDefault(),t(7,D=!0),t(8,P="");try{s&&o?await it(o.id,{name:g,description:y||null,category:I||null}):await at({key:T,name:g,description:y||null,category:I||null});const H=document.getElementById(c);if(H){const S=window.bootstrap?.Offcanvas?.getInstance(H);S&&S.hide()}a(),b&&b()}catch(H){t(8,P=H instanceof Error?H.message:"Failed to save permission")}finally{t(7,D=!1)}}function a(){t(4,T=""),t(5,g=""),t(6,y=""),I="",t(1,C=""),t(2,L=""),t(8,P="")}function M(){a()}Ze(()=>{const h=document.getElementById(c);if(h)return h.addEventListener("hidden.bs.offcanvas",M),()=>{h.removeEventListener("hidden.bs.offcanvas",M)}});function d(){T=this.value,t(4,T),t(11,o),t(3,r)}function E(){g=this.value,t(5,g),t(11,o),t(3,r)}function q(){y=this.value,t(6,y),t(11,o),t(3,r)}function w(){C=rt(this),t(1,C),t(11,o),t(3,r)}function _(){L=this.value,t(2,L),t(11,o),t(3,r)}return l.$$set=h=>{"id"in h&&t(0,c=h.id),"permission"in h&&t(11,o=h.permission),"onSave"in h&&t(12,b=h.onSave)},l.$$.update=()=>{if(l.$$.dirty&2048&&t(9,s=o!==null),l.$$.dirty&2056&&o){t(4,T=o.key),t(5,g=o.name),t(6,y=o.description||"");const h=o.category||"";h&&r.includes(h)?(t(1,C=h),t(2,L="")):h?(t(1,C="__other__"),t(2,L=h)):(t(1,C=""),t(2,L=""))}l.$$.dirty&6&&(I=C==="__other__"?L:C)},[c,C,L,r,T,g,y,D,P,s,p,o,b,d,E,q,w,_]}class wt extends $e{constructor(e){super(),et(this,e,Ct,Et,We,{id:0,permission:11,onSave:12})}}function Ke(l,e,t){const s=l.slice();return s[14]=e[t][0],s[15]=e[t][1],s}function Ge(l,e,t){const s=l.slice();return s[18]=e[t],s}function Qe(l){let e,t,s,r;return{c(){e=f("div"),t=f("i"),s=N(),r=ee(l[3]),this.h()},l(c){e=u(c,"DIV",{class:!0,role:!0});var o=k(e);t=u(o,"I",{class:!0}),k(t).forEach(m),s=V(o),r=$(o,l[3]),o.forEach(m),this.h()},h(){i(t,"class","bi bi-exclamation-triangle me-2"),i(e,"class","alert alert-danger"),i(e,"role","alert")},m(c,o){K(c,e,o),n(e,t),n(e,s),n(e,r)},p(c,o){o&8&&le(r,c[3])},d(c){c&&m(e)}}}function kt(l){let e,t=ce(l[2]),s=[];for(let r=0;r<t.length;r+=1)s[r]=Xe(Ke(l,t,r));return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Ue()},l(r){for(let c=0;c<s.length;c+=1)s[c].l(r);e=Ue()},m(r,c){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(r,c);K(r,e,c)},p(r,c){if(c&388){t=ce(r[2]);let o;for(o=0;o<t.length;o+=1){const b=Ke(r,t,o);s[o]?s[o].p(b,c):(s[o]=Xe(b),s[o].c(),s[o].m(e.parentNode,e))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(r){r&&m(e),Te(s,r)}}}function Tt(l){let e,t="No permissions found. Create your first permission to get started.";return{c(){e=f("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1mj26ks"&&(e.textContent=t),this.h()},h(){i(e,"class","alert alert-info")},m(s,r){K(s,e,r)},p:xe,d(s){s&&m(e)}}}function Dt(l){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ne6c0j"&&(e.innerHTML=t),this.h()},h(){i(e,"class","d-flex justify-content-center align-items-center py-5")},m(s,r){K(s,e,r)},p:xe,d(s){s&&m(e)}}}function Je(l){let e,t,s,r=l[18].name+"",c,o,b,T,g=l[18].key+"",y,I,C,L=(l[18].description||"-")+"",D,P,p,a,M='<i class="bi bi-pencil"></i>',d,E,q='<i class="bi bi-trash"></i>',w,_,h;function H(){return l[11](l[18])}function U(){return l[12](l[18])}return{c(){e=f("tr"),t=f("td"),s=f("strong"),c=ee(r),o=N(),b=f("td"),T=f("code"),y=ee(g),I=N(),C=f("td"),D=ee(L),P=N(),p=f("td"),a=f("button"),a.innerHTML=M,d=N(),E=f("button"),E.innerHTML=q,w=N(),this.h()},l(S){e=u(S,"TR",{});var A=k(e);t=u(A,"TD",{});var X=k(t);s=u(X,"STRONG",{});var ue=k(s);c=$(ue,r),ue.forEach(m),X.forEach(m),o=V(A),b=u(A,"TD",{});var oe=k(b);T=u(oe,"CODE",{});var re=k(T);y=$(re,g),re.forEach(m),oe.forEach(m),I=V(A),C=u(A,"TD",{});var ie=k(C);D=$(ie,L),ie.forEach(m),P=V(A),p=u(A,"TD",{});var Y=k(p);a=u(Y,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),R(a)!=="svelte-bt5p8s"&&(a.innerHTML=M),d=V(Y),E=u(Y,"BUTTON",{type:!0,class:!0,title:!0,"data-svelte-h":!0}),R(E)!=="svelte-151u9xf"&&(E.innerHTML=q),Y.forEach(m),w=V(A),A.forEach(m),this.h()},h(){i(a,"type","button"),i(a,"class","btn btn-sm btn-outline-primary me-1"),i(a,"title","Edit"),i(E,"type","button"),i(E,"class","btn btn-sm btn-outline-danger"),i(E,"title","Delete")},m(S,A){K(S,e,A),n(e,t),n(t,s),n(s,c),n(e,o),n(e,b),n(b,T),n(T,y),n(e,I),n(e,C),n(C,D),n(e,P),n(e,p),n(p,a),n(p,d),n(p,E),n(e,w),_||(h=[x(a,"click",H),x(E,"click",U)],_=!0)},p(S,A){l=S,A&4&&r!==(r=l[18].name+"")&&le(c,r),A&4&&g!==(g=l[18].key+"")&&le(y,g),A&4&&L!==(L=(l[18].description||"-")+"")&&le(D,L)},d(S){S&&m(e),_=!1,De(h)}}}function Xe(l){let e,t,s,r=l[14]+"",c,o,b,T,g,y,I='<tr><th>Name</th> <th>Key</th> <th>Description</th> <th style="width: 150px;">Actions</th></tr>',C,L,D,P=ce(l[15]),p=[];for(let a=0;a<P.length;a+=1)p[a]=Je(Ge(l,P,a));return{c(){e=f("div"),t=f("div"),s=f("h5"),c=ee(r),o=N(),b=f("div"),T=f("div"),g=f("table"),y=f("thead"),y.innerHTML=I,C=N(),L=f("tbody");for(let a=0;a<p.length;a+=1)p[a].c();D=N(),this.h()},l(a){e=u(a,"DIV",{class:!0});var M=k(e);t=u(M,"DIV",{class:!0});var d=k(t);s=u(d,"H5",{class:!0});var E=k(s);c=$(E,r),E.forEach(m),d.forEach(m),o=V(M),b=u(M,"DIV",{class:!0});var q=k(b);T=u(q,"DIV",{class:!0});var w=k(T);g=u(w,"TABLE",{class:!0});var _=k(g);y=u(_,"THEAD",{"data-svelte-h":!0}),R(y)!=="svelte-1y3mg69"&&(y.innerHTML=I),C=V(_),L=u(_,"TBODY",{});var h=k(L);for(let H=0;H<p.length;H+=1)p[H].l(h);h.forEach(m),_.forEach(m),w.forEach(m),q.forEach(m),D=V(M),M.forEach(m),this.h()},h(){i(s,"class","mb-0 text-uppercase"),i(t,"class","card-header"),i(g,"class","table table-hover mb-0"),i(T,"class","table-responsive"),i(b,"class","card-body"),i(e,"class","card mb-3")},m(a,M){K(a,e,M),n(e,t),n(t,s),n(s,c),n(e,o),n(e,b),n(b,T),n(T,g),n(g,y),n(g,C),n(g,L);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(L,null);n(e,D)},p(a,M){if(M&4&&r!==(r=a[14]+"")&&le(c,r),M&388){P=ce(a[15]);let d;for(d=0;d<P.length;d+=1){const E=Ge(a,P,d);p[d]?p[d].p(E,M):(p[d]=Je(E),p[d].c(),p[d].m(L,null))}for(;d<p.length;d+=1)p[d].d(1);p.length=P.length}},d(a){a&&m(e),Te(p,a)}}}function Lt(l){let e,t,s,r="Permissions",c,o,b=`<i class="bi bi-plus-lg me-1"></i>
				Create Permission`,T,g,y,I,C,L,D,P,p,a,M,d=l[3]&&Qe(l);function E(_,h){return _[4]?Dt:_[5].length===0?Tt:kt}let q=E(l),w=q(l);return P=new wt({props:{id:"permission-form-drawer",permission:l[1],onSave:l[13]}}),{c(){e=f("div"),t=f("div"),s=f("h2"),s.textContent=r,c=N(),o=f("button"),o.innerHTML=b,T=N(),d&&d.c(),g=N(),y=f("div"),I=f("div"),C=f("input"),L=N(),w.c(),D=N(),Ve(P.$$.fragment),this.h()},l(_){e=u(_,"DIV",{class:!0});var h=k(e);t=u(h,"DIV",{class:!0});var H=k(t);s=u(H,"H2",{"data-svelte-h":!0}),R(s)!=="svelte-1dupqde"&&(s.textContent=r),c=V(H),o=u(H,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),R(o)!=="svelte-mxnanj"&&(o.innerHTML=b),H.forEach(m),T=V(h),d&&d.l(h),g=V(h),y=u(h,"DIV",{class:!0});var U=k(y);I=u(U,"DIV",{class:!0});var S=k(I);C=u(S,"INPUT",{type:!0,class:!0,placeholder:!0}),S.forEach(m),U.forEach(m),L=V(h),w.l(h),h.forEach(m),D=V(_),Me(P.$$.fragment,_),this.h()},h(){i(o,"type","button"),i(o,"class","btn btn-primary"),i(t,"class","d-flex justify-content-between align-items-center mb-4"),i(C,"type","text"),i(C,"class","form-control"),i(C,"placeholder","Search permissions..."),i(I,"class","card-body"),i(y,"class","card mb-4"),i(e,"class","container-fluid py-4")},m(_,h){K(_,e,h),n(e,t),n(t,s),n(t,c),n(t,o),n(e,T),d&&d.m(e,null),n(e,g),n(e,y),n(y,I),n(I,C),J(C,l[0]),n(e,L),w.m(e,null),K(_,D,h),Oe(P,_,h),p=!0,a||(M=[x(o,"click",l[6]),x(C,"input",l[10])],a=!0)},p(_,h){_[3]?d?d.p(_,h):(d=Qe(_),d.c(),d.m(e,g)):d&&(d.d(1),d=null),h&1&&C.value!==_[0]&&J(C,_[0]),q===(q=E(_))&&w?w.p(_,h):(w.d(1),w=q(_),w&&(w.c(),w.m(e,null)));const H={};h&2&&(H.permission=_[1]),h&2&&(H.onSave=_[13]),P.$set(H)},i(_){p||(Pe(P.$$.fragment,_),p=!0)},o(_){Ie(P.$$.fragment,_),p=!1},d(_){_&&(m(e),m(D)),d&&d.d(),w.d(),Le(P,_),a=!1,De(M)}}}function It(l){let e,t;return e=new nt({props:{pageTitle:"Manage Permissions",$$slots:{default:[Lt]},$$scope:{ctx:l}}}),{c(){Ve(e.$$.fragment)},l(s){Me(e.$$.fragment,s)},m(s,r){Oe(e,s,r),t=!0},p(s,[r]){const c={};r&2097215&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i(s){t||(Pe(e.$$.fragment,s),t=!0)},o(s){Ie(e.$$.fragment,s),t=!1},d(s){Le(e,s)}}}function Ye(l){const e=document.getElementById(l);if(e){const t=window.bootstrap;t?.Offcanvas&&new t.Offcanvas(e).show()}}function Pt(l,e,t){let s,r,c,o,b;he(l,dt,a=>t(9,r=a)),he(l,ht,a=>t(3,c=a)),he(l,mt,a=>t(4,o=a)),he(l,_t,a=>t(5,b=a));let T=null,g="";Ze(async()=>{await ut()});function y(){t(1,T=null),Ye("permission-form-drawer")}function I(a){t(1,T=a),Ye("permission-form-drawer")}async function C(a){if(confirm(`Are you sure you want to delete the permission "${a.name}"? This will remove it from all roles.`))try{await ft(a.id)}catch(M){alert(`Failed to delete permission: ${M instanceof Error?M.message:"Unknown error"}`)}}function L(){g=this.value,t(0,g)}const D=a=>I(a),P=a=>C(a),p=()=>{t(1,T=null)};return l.$$.update=()=>{l.$$.dirty&513&&t(2,s=Object.entries(r).filter(([a,M])=>{if(!g)return!0;const d=g.toLowerCase();return a.toLowerCase().includes(d)||M.some(E=>E.name.toLowerCase().includes(d)||E.key.toLowerCase().includes(d)||E.description?.toLowerCase().includes(d))}))},[g,T,s,c,o,b,y,I,C,r,L,D,P,p]}class jt extends $e{constructor(e){super(),et(this,e,Pt,It,We,{})}}export{jt as component,At as universal};
