import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{P as Bt}from"../chunks/DoY8txIz.js";import{w as Ze,g as Ot,d as De,o as Et,a as Pt}from"../chunks/DB0qkhVq.js";import{c as n,r as a,s,t as F,p as Ee,ah as ee,D as O,g as e,E as R,ai as We,u as m,i as Nt,as as je,R as Be,a as ke,f as he,o as y,aq as ut,ar as _t}from"../chunks/D2Wl5k_M.js";import{p as Y,i as I,s as k,a as we,e as Oe,b as pt,k as ht}from"../chunks/Dp64CMOB.js";import{f as C,a as g,t as Ve,c as mt}from"../chunks/DfqsuKYE.js";import{e as Ae,i as ze}from"../chunks/DrikPB-j.js";import{r as kt,s as _e,b as Gt,e as xt}from"../chunks/DGqGryaB.js";import{b as It}from"../chunks/vhQtniU6.js";import{i as Ce}from"../chunks/CPbJ_PqI.js";import{v as At,D as Wt}from"../chunks/BAChctMQ.js";import{e as be,a as ft,h as ae}from"../chunks/O7waypZ2.js";import{b as Ct}from"../chunks/CMEL2kP5.js";import{a as qt,e as Lt,b as Tt,V as Ft}from"../chunks/C2hsME61.js";import{g as Rt}from"../chunks/CQii3x5p.js";import{f as $t}from"../chunks/CU0Q_a9E.js";import{p as ve}from"../chunks/CLBoo4lD.js";import{S as Yt}from"../chunks/K14GTYKd.js";var Ut=C('<small class="fw-lighter text-muted"> </small>'),Vt=C('<div class="invalid-feedback d-block"> </div>'),zt=C('<div class="d-flex flex-column gap-1"><label> </label> <!> <input type="number" min="0" max="999"/> <!></div>');function Ye(_,i){let t=Y(i,"count",12,0),v=Y(i,"label",8,"Count"),S=Y(i,"description",8,""),E=Y(i,"error",8,"");var w=zt(),$=n(w),D=n($,!0);a($);var j=s($,2);{var x=P=>{var c=Ut(),p=n(c,!0);a(c),F(()=>k(p,S())),g(P,c)};I(j,P=>{S()&&P(x)})}var h=s(j,2);kt(h);let l;var N=s(h,2);{var A=P=>{var c=Vt(),p=n(c,!0);a(c),F(()=>k(p,E())),g(P,c)};I(N,P=>{E()&&P(A)})}a(w),F(()=>{_e($,"for",v()),k(D,v()),_e(h,"id",v()),l=be(h,1,"form-control",null,l,{"is-invalid":!!E()})}),Ct(h,t),g(_,w)}const Dt=Ze([]);let vt=!1;async function yt(){if(vt)return Ot(Dt);vt=!0;try{const{data:_,error:i}=await ft.from("temple_challenge_entries").select("*");if(i)throw console.error("[API] Get temple entries failed:",i),new Error(`Failed to load entries: ${i.message}`);const t=_||[];return Dt.set(t),setTimeout(()=>vt=!1,800),t}catch(_){throw vt=!1,console.error("[API] Unexpected error fetching temple entries:",_),_}}async function Jt(_){try{const{data:i,error:t}=await ft.from("temple_challenge_entries").insert([_]).select();if(t)throw console.error("[API] Create temple entry failed:",t),t.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):t.code==="42501"?new Error("Permission denied - please check your authentication"):t.code==="23505"?new Error("This entry already exists"):t.message.includes("fetch")||t.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${t.message}`);return await yt(),console.log("[API] Temple entry created successfully"),i?i[0]:void 0}catch(i){throw console.error("[API] Unexpected error creating temple entry:",i),i}}async function Kt(_,i){const{data:t,error:v}=await ft.from("temple_challenge_entries").update(i).eq("id",_).select();if(v)throw v;return await yt(),t?t[0]:void 0}async function Qt(_){const{error:i}=await ft.from("temple_challenge_entries").delete().eq("id",_);if(i)throw i;await yt()}function Ht(_,i,t){return _.filter(v=>v.date>=i&&v.date<=t)}function Xt(_){return _.reduce((i,t)=>i+(t.baptism_ordinances_count??0)+(t.confirmation_ordinances_count??0)+(t.initiatory_ordinances_count??0)+(t.endowment_ordinances_count??0)+(t.sealing_ordinances_count??0),0)}function Zt(_){return _.reduce((i,t)=>i+(t.prepared_names_count??0),0)}let et=null;const ea=()=>{const _=Ze(!1),i=Ze(!1),t=Ze([]),v=De([t],([c])=>{const p=c.reduce((d,o)=>{const u=new Date(o.date),U=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;return(d[U]||=[]).push(o),d},{}),r=Object.entries(p).sort(([d],[o])=>new Date(o).getTime()-new Date(d).getTime()).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),S=De([t],([c])=>{const p=c.reduce((d,o)=>((d[o.date]||=[]).push(o),d),{}),r=Object.entries(p).sort(([d],[o])=>new Date(o).getTime()-new Date(d).getTime()).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),E=De([t],([c])=>{const p=c.reduce((d,o)=>{const U=`${new Date(o.date).getFullYear()}`;return(d[U]||=[]).push(o),d},{}),r=Object.entries(p).sort(([d],[o])=>parseInt(o)-parseInt(d)).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),w=De(t,c=>c.reduce((p,r)=>({baptism_ordinances_count:p.baptism_ordinances_count+(r.baptism_ordinances_count??0),confirmation_ordinances_count:p.confirmation_ordinances_count+(r.confirmation_ordinances_count??0),initiatory_ordinances_count:p.initiatory_ordinances_count+(r.initiatory_ordinances_count??0),endowment_ordinances_count:p.endowment_ordinances_count+(r.endowment_ordinances_count??0),sealing_ordinances_count:p.sealing_ordinances_count+(r.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),$=De(S,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:r,created_at:o.created_at||u.created_at}),{});return p}),D=De(v,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:o.date||u.date,created_at:o.created_at||u.created_at}),{});return p}),j=De(E,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:o.date||u.date,created_at:o.created_at||u.created_at}),{});return p}),x=De(t,c=>c.reduce((p,r)=>p+(r.baptism_ordinances_count??0)+(r.confirmation_ordinances_count??0)+(r.initiatory_ordinances_count??0)+(r.endowment_ordinances_count??0)+(r.sealing_ordinances_count??0),0)),h=De(t,c=>c.reduce((p,r)=>p+(r.prepared_names_count??0),0));return et={stores:{ready:_,loading:i,data:t,groupedByDate:S,groupedByMonth:v,groupedByYear:E,detailTotals:w,detailTotalsByDay:$,detailTotalsByMonth:D,detailTotalsByYear:j,totalOrdinancesPerformed:x,totalNamesPrepared:h},actions:{reload:async()=>{const c=await yt();c?.length&&t.set(c)},apiCreate:async c=>{await Jt(c)},apiUpdate:async(c,p)=>{await Kt(c,p)},apiDelete:async c=>{await Qt(c)}}},et},gt=()=>et?.stores&&Object.keys(et.stores).length>0?et:ea(),Ue=_=>Lt().required(`${_} is required`).integer(`${_} must be a whole number`).min(0,`${_} cannot be negative`).max(999,`${_} cannot exceed 999`),ta=qt().shape({date:Tt().required("Date is required"),entry_type:Tt().required("Activity type is required"),prepared_names_count:Ue("Name preparation count"),baptism_ordinances_count:Ue("Baptism count"),confirmation_ordinances_count:Ue("Confirmation count"),initiatory_ordinances_count:Ue("Initiatory count"),endowment_ordinances_count:Ue("Endowment count"),sealing_ordinances_count:Ue("Sealing count")});function aa(){const _=Ze({});async function i(v){try{return await ta.validate(v,{abortEarly:!1}),_.set({}),!0}catch(S){if(S instanceof Ft){const E={};return S.inner.forEach(w=>{w.path&&(E[w.path]=w.message)}),_.set(E),!1}return!1}}function t(){_.set({})}return{validationErrors:_,validate:i,clearErrors:t}}var na=C('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),ra=C('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),sa=C('<div class="invalid-feedback d-block"> </div>'),oa=C("<option> </option>"),ia=C('<div class="invalid-feedback d-block"> </div>'),la=C('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" required/> <!></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select></select> <!></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function da(_,i){Ee(i,!1);const t=()=>we(l,"$validationErrors",v),[v,S]=pt(),E=R();let w=Y(i,"drawerId",8,""),$=Y(i,"minDate",8,null),D=Y(i,"maxDate",8,null);const{stores:{loading:j},actions:{apiCreate:x,reload:h}}=gt(),{validationErrors:l,validate:N,clearErrors:A}=aa(),P=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function c(){const f=ae(new Date,"yyyy-MM-dd");return!$()||!D()||f>=$()&&f<=D()?f:f<$()?$():D()}const p={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:c(),approved:!0};let r=R({...p}),d=R({message:"",type:null});const o=()=>{O(r,{...p,date:c()}),O(d,{message:"",type:null}),A();const f=`[data-bs-target="#${w()}"]`,b=document.querySelector(f);b&&b.click()},u=()=>{window.location.reload()},U=()=>{de()},ne=()=>{O(d,{message:"",type:null})},de=async()=>{if(await N(e(r)))try{ht(j,!0),O(d,{message:"",type:null}),await x({prepared_names_count:e(r).prepared_names_count,baptism_ordinances_count:e(r).baptism_ordinances_count,confirmation_ordinances_count:e(r).confirmation_ordinances_count,initiatory_ordinances_count:e(r).initiatory_ordinances_count,endowment_ordinances_count:e(r).endowment_ordinances_count,sealing_ordinances_count:e(r).sealing_ordinances_count,entry_type:e(r).entry_type,date:e(r).date,created_at:new Date().toISOString(),approved:!0}),await h(),o()}catch(b){console.error("[WardGoalEntryForm] Submission failed:",b),b instanceof Error?b.message.includes("expired")||b.message.includes("JWT")?O(d,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):b.message.includes("fetch")||b.message.includes("network")?O(d,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):O(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):O(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{ht(j,!1)}};ee(()=>e(r),()=>{O(E,(e(r).prepared_names_count||0)+(e(r).baptism_ordinances_count||0)+(e(r).confirmation_ordinances_count||0)+(e(r).initiatory_ordinances_count||0)+(e(r).endowment_ordinances_count||0)+(e(r).sealing_ordinances_count||0))}),We(),Ce();var me=la(),pe=n(me);{var M=f=>{var b=ra(),te=n(b),Ne=s(n(te),2),ye=n(Ne),rt=n(ye);{var st=ue=>{var Te=Ve("⚠️ Session Issue");g(ue,Te)},Le=ue=>{var Te=mt(),Ke=he(Te);{var Qe=ge=>{var T=Ve("⚠️ Connection Problem");g(ge,T)},ct=ge=>{var T=Ve("⚠️ Something Went Wrong");g(ge,T)};I(Ke,ge=>{e(d),m(()=>e(d).type==="network")?ge(Qe):ge(ct,!1)},!0)}g(ue,Te)};I(rt,ue=>{e(d),m(()=>e(d).type==="expired")?ue(st):ue(Le,!1)})}a(ye);var Fe=s(ye,2),ot=n(Fe,!0);a(Fe);var it=s(Fe,2),Re=n(it);{var lt=ue=>{var Te=na();Oe("click",Te,U),g(ue,Te)};I(Re,ue=>{e(d),m(()=>e(d).type==="network")&&ue(lt)})}var dt=s(Re,2);a(it),a(Ne);var wt=s(Ne,2);a(te),a(b),F(()=>{k(ot,(e(d),m(()=>e(d).message))),be(dt,1,`btn btn-${e(d),m(()=>e(d).type==="network"?"secondary":"primary")??""}`)}),Oe("click",dt,u),Oe("click",wt,ne),g(f,b)};I(pe,f=>{e(d),m(()=>e(d).type)&&f(M)})}var B=s(pe,4),W=s(n(B),2),K=n(W);{var H=f=>{var b=Ve();F(()=>k(b,`Select a date within the goal period (${$()??""} to ${D()??""})`)),g(f,b)},J=f=>{var b=Ve("When was this activity done?");g(f,b)};I(K,f=>{$()&&D()?f(H):f(J,!1)})}a(W);var V=s(W,2);kt(V);let z;var re=s(V,2);{var se=f=>{var b=sa(),te=n(b,!0);a(b),F(()=>k(te,(t(),m(()=>t().date)))),g(f,b)};I(re,f=>{t(),m(()=>t().date)&&f(se)})}a(B);var fe=s(B,2),G=s(n(fe),4);F(()=>{e(r),Nt(()=>{t()})});let q;Ae(G,5,()=>P,ze,(f,b)=>{var te=oa(),Ne=n(te,!0);a(te);var ye={};F(()=>{k(Ne,e(b)),ye!==(ye=e(b))&&(te.value=(te.__value=e(b))??"")}),g(f,te)}),a(G);var Z=s(G,2);{var X=f=>{var b=ia(),te=n(b,!0);a(b),F(()=>k(te,(t(),m(()=>t().entry_type)))),g(f,b)};I(Z,f=>{t(),m(()=>t().entry_type)&&f(X)})}a(fe);var Q=s(fe,2);{let f=Be(()=>(t(),m(()=>t().prepared_names_count||"")));Ye(Q,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get error(){return e(f)},get count(){return e(r).prepared_names_count},set count(b){je(r,e(r).prepared_names_count=b)},$$legacy:!0})}var oe=s(Q,2);{let f=Be(()=>(t(),m(()=>t().baptism_ordinances_count||"")));Ye(oe,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get error(){return e(f)},get count(){return e(r).baptism_ordinances_count},set count(b){je(r,e(r).baptism_ordinances_count=b)},$$legacy:!0})}var ce=s(oe,2);{let f=Be(()=>(t(),m(()=>t().confirmation_ordinances_count||"")));Ye(ce,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get error(){return e(f)},get count(){return e(r).confirmation_ordinances_count},set count(b){je(r,e(r).confirmation_ordinances_count=b)},$$legacy:!0})}var Me=s(ce,2);{let f=Be(()=>(t(),m(()=>t().initiatory_ordinances_count||"")));Ye(Me,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).initiatory_ordinances_count},set count(b){je(r,e(r).initiatory_ordinances_count=b)},$$legacy:!0})}var xe=s(Me,2);{let f=Be(()=>(t(),m(()=>t().endowment_ordinances_count||"")));Ye(xe,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).endowment_ordinances_count},set count(b){je(r,e(r).endowment_ordinances_count=b)},$$legacy:!0})}var Pe=s(xe,2);{let f=Be(()=>(t(),m(()=>t().sealing_ordinances_count||"")));Ye(Pe,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).sealing_ordinances_count},set count(b){je(r,e(r).sealing_ordinances_count=b)},$$legacy:!0})}var Se=s(Pe,2),Je=s(n(Se),2),tt=n(Je,!0);a(Je),a(Se);var at=s(Se,2),qe=n(at),nt=s(qe,2);a(at),a(me),F(()=>{z=be(V,1,"form-control",null,z,{"is-invalid":t().date}),_e(V,"min",$()),_e(V,"max",D()),q=be(G,1,"form-select form-control-sm",null,q,{"is-invalid":t().entry_type}),k(tt,e(E))}),Ct(V,()=>e(r).date,f=>je(r,e(r).date=f)),Gt(G,()=>e(r).entry_type,f=>je(r,e(r).entry_type=f)),Oe("click",qe,o),Oe("click",nt,de),g(_,me),ke(),S()}var ca=C('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),ua=C('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),_a=C('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function bt(_,i){Ee(i,!1);let t=Y(i,"entry",8),v=Y(i,"showSubmittedData",8,!1),S=Y(i,"showType",8,!1);Ce();var E=_a(),w=n(E);{var $=B=>{var W=ca(),K=n(W),H=n(K,!0);a(K),a(W),F(()=>k(H,(y(t()),m(()=>t()?.entry_type)))),g(B,W)};I(w,B=>{S()&&B($)})}var D=s(w,2),j=s(n(D),2),x=n(j,!0);a(j),a(D);var h=s(D,2),l=s(n(h),2),N=n(l,!0);a(l),a(h);var A=s(h,2),P=s(n(A),2),c=n(P,!0);a(P),a(A);var p=s(A,2),r=s(n(p),2),d=n(r,!0);a(r),a(p);var o=s(p,2),u=s(n(o),2),U=n(u,!0);a(u),a(o);var ne=s(o,2),de=s(n(ne),2),me=n(de,!0);a(de),a(ne);var pe=s(ne,2);{var M=B=>{var W=ua(),K=s(n(W),2),H=n(K),J=n(H,!0);a(H);var V=s(H,2),z=n(V,!0);a(V),a(K),a(W),F((re,se)=>{k(J,re),k(z,se)},[()=>(y($t),y(t()),m(()=>$t(new Date(t().created_at),{addSuffix:!0}))),()=>(y(ae),y(t()),m(()=>ae(new Date(t().created_at),"MMMM d, yyyy 'at' h:mm a")))]),g(B,W)};I(pe,B=>{y(v()),y(t()),m(()=>v()&&t()?.created_at)&&B(M)})}a(E),F(()=>{k(x,(y(t()),m(()=>t()?.prepared_names_count))),k(N,(y(t()),m(()=>t()?.baptism_ordinances_count))),k(c,(y(t()),m(()=>t()?.confirmation_ordinances_count))),k(d,(y(t()),m(()=>t()?.initiatory_ordinances_count))),k(U,(y(t()),m(()=>t()?.endowment_ordinances_count))),k(me,(y(t()),m(()=>t()?.sealing_ordinances_count)))}),g(_,E),ke()}var va=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function ma(_,i){Ee(i,!1);const t=R();let v=Y(i,"entry",8),S=Y(i,"date",8);ee(()=>y(v()),()=>{O(t,v().baptism_ordinances_count+v().confirmation_ordinances_count+v().initiatory_ordinances_count+v().endowment_ordinances_count+v().sealing_ordinances_count)}),We(),Ce();var E=va(),w=he(E),$=n(w),D=n($,!0);a($);var j=s($,2);a(w);var x=s(w,2),h=n(x),l=n(h),N=n(l);bt(N,{get entry(){return v()}});var A=s(N,2),P=n(A),c=s(n(P),2),p=n(c,!0);a(c),a(P),a(A),a(l),a(h),a(x),F((r,d)=>{k(D,r),k(j,` ${d??""}`),k(p,e(t))},[()=>(y(ae),y(ve),y(S()),m(()=>ae(ve(S(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(y(ae),y(ve),y(S()),m(()=>ae(ve(S(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),g(_,E),ke()}var pa=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function fa(_,i){Ee(i,!1);let t=Y(i,"entry",8),v=Y(i,"date",8),S=R(0);ee(()=>y(t()),()=>{O(S,t().baptism_ordinances_count+t().confirmation_ordinances_count+t().initiatory_ordinances_count+t().endowment_ordinances_count+t().sealing_ordinances_count)}),We(),Ce();var E=pa(),w=he(E),$=n(w),D=n($,!0);a($);var j=s($,2);a(w);var x=s(w,2),h=n(x),l=n(h),N=n(l);bt(N,{get entry(){return t()}});var A=s(N,2),P=n(A),c=s(n(P),2),p=n(c,!0);a(c),a(P),a(A),a(l),a(h),a(x),F((r,d)=>{k(D,r),k(j,` ${d??""}`),k(p,e(S))},[()=>(y(ae),y(ve),y(v()),m(()=>ae(ve(v(),"yyyy-MM",new Date),"yyyy"))),()=>(y(ae),y(ve),y(v()),m(()=>ae(ve(v(),"yyyy-MM",new Date),"MMMM")))]),g(_,E),ke()}var ya=C('<div> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function ga(_,i){Ee(i,!1);let t=Y(i,"entry",8),v=Y(i,"date",8),S=R(0);ee(()=>y(t()),()=>{O(S,t().baptism_ordinances_count+t().confirmation_ordinances_count+t().initiatory_ordinances_count+t().endowment_ordinances_count+t().sealing_ordinances_count)}),We(),Ce();var E=ya(),w=he(E),$=n(w,!0);a(w);var D=s(w,2),j=n(D),x=n(j),h=n(x);bt(h,{get entry(){return t()}});var l=s(h,2),N=n(l),A=s(n(N),2),P=n(A,!0);a(A),a(N),a(l),a(x),a(j),a(D),F(()=>{k($,v()),k(P,e(S))}),g(_,E),ke()}var ba=C('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),wa=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function ha(_,i){Ee(i,!1);let t=Y(i,"entries",8),v=Y(i,"date",8);Ce();var S=wa(),E=he(S),w=n(E),$=n(w,!0);a(w);var D=s(w,2);a(E);var j=s(E,2);Ae(j,5,t,ze,(x,h)=>{var l=ba(),N=n(l),A=n(N);bt(A,{get entry(){return e(h)},showSubmittedData:!0,showType:!0}),a(N),a(l),g(x,l)}),a(j),F((x,h)=>{k($,x),k(D,` ${h??""}`)},[()=>(y(ae),y(ve),y(v()),m(()=>ae(ve(v(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(y(ae),y(ve),y(v()),m(()=>ae(ve(v(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),g(_,S),ke()}var xa=C('<div class="d-flex flex-column gap-3"><!></div>'),Ta=C('<div class="d-flex flex-column gap-3"></div>'),$a=C('<div class="d-flex flex-column gap-3"></div>'),Da=C('<div class="d-flex flex-column gap-3"></div>'),Ea=C('<div class="d-flex flex-column gap-3"><!> <!> <!> <!> <!></div>');function ka(_,i){Ee(i,!1);const t=()=>we(x,"$groupedByDate",w),v=()=>we(h,"$detailTotalsByDay",w),S=()=>we(l,"$detailTotalsByMonth",w),E=()=>we(N,"$detailTotalsByYear",w),[w,$]=pt(),D=R(),{stores:{data:j,groupedByDate:x,detailTotalsByDay:h,detailTotalsByMonth:l,detailTotalsByYear:N},actions:{reload:A}}=gt();let P=Y(i,"query",8,""),c=R([]),p=R([]);const r=j.subscribe(M=>{O(c,M),O(p,[...M])});function d(M){return M?M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const o=M=>{let B=[...e(c)];return M&&(B=B.filter(W=>W?.entry_type?W?.entry_type?.trim().toLowerCase().match(e(D).trim().toLowerCase()):!1)),B};Et(A),Pt(r);let u=R("by-month");const U=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"},{key:"By Year",value:"by-year"}];ee(()=>y(P()),()=>{O(D,d(P()?.trim().toLowerCase()))}),ee(()=>(y(P()),e(p)),()=>{P()?O(c,o(P())):O(c,[...e(p)])}),We(),Ce();var ne=mt(),de=he(ne);{var me=M=>{var B=Ea(),W=n(B);Yt(W,{get options(){return U},helperText:"",label:"Filter",disabled:!1,get value(){return e(u)},set value(G){O(u,G)},$$legacy:!0});var K=s(W,2);{var H=G=>{var q=mt(),Z=he(q);Ae(Z,1,()=>(t(),m(()=>Object.entries(t()))),ze,(X,Q)=>{var oe=ut(()=>_t(e(Q),2));let ce=()=>e(oe)[0],Me=()=>e(oe)[1];var xe=xa(),Pe=n(xe);ha(Pe,{get date(){return ce()},get entries(){return Me()}}),a(xe),g(X,xe)}),g(G,q)};I(K,G=>{e(u)==="by-submission"&&G(H)})}var J=s(K,2);{var V=G=>{var q=Ta();Ae(q,5,()=>(v(),m(()=>Object.entries(v()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];ma(Z,{get date(){return oe()},get entry(){return ce()}})}),a(q),g(G,q)};I(J,G=>{e(u)==="by-day"&&G(V)})}var z=s(J,2);{var re=G=>{var q=$a();Ae(q,5,()=>(S(),m(()=>Object.entries(S()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];fa(Z,{get date(){return oe()},get entry(){return ce()}})}),a(q),g(G,q)};I(z,G=>{e(u)==="by-month"&&G(re)})}var se=s(z,2);{var fe=G=>{var q=Da();Ae(q,5,()=>(E(),m(()=>Object.entries(E()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];ga(Z,{get date(){return oe()},get entry(){return ce()}})}),a(q),g(G,q)};I(se,G=>{e(u)==="by-year"&&G(fe)})}a(B),g(M,B)},pe=M=>{var B=Ve("No Data Found");g(M,B)};I(de,M=>{e(c),m(()=>e(c)?.length)?M(me):M(pe,!1)})}g(_,ne),ke(),$()}var Ca=C('<span class="d-flex justify-content-end">0</span>'),Ma=C('<span class="d-flex justify-content-end">0</span>'),Sa=C('<span class="d-flex justify-content-end"> </span>'),ja=C('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),Ba=C('<span class="d-flex justify-content-end"> </span>'),Oa=C('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),Pa=C('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function Na(_,i){Ee(i,!1);const t=()=>we(c,"$entries",S),v=()=>we(p,"$loading",S),[S,E]=pt(),w=R(),$=R(),D=R(),j=R(),x=R(),h=R();let l=Y(i,"goal",8),N=Y(i,"drawerId",8),A=Y(i,"onSubmitClick",8),P=Y(i,"onViewResultsClick",8);const{stores:{data:c,loading:p}}=gt();function r(T,L){const[ie,le,$e]=T.split("-").map(Number),[Ge,Ie,He]=L.split("-").map(Number),Xe=new Date(ie,le-1,$e),Mt=new Date(Ge,Ie-1,He),St=Xe.toLocaleDateString("en-US",{month:"short"}),jt=Mt.toLocaleDateString("en-US",{month:"short"});return`${St} to ${jt}`}function d(T){return T.toLocaleString("en-US")}function o(T){return T!==null?d(T):"--"}ee(()=>(t(),y(l())),()=>{O(w,Ht(t(),l().start_date,l().end_date))}),ee(()=>e(w),()=>{O($,Xt(e(w)))}),ee(()=>e(w),()=>{O(D,Zt(e(w)))}),ee(()=>y(l()),()=>{O(j,r(l().start_date,l().end_date))}),ee(()=>(y(l()),e($)),()=>{O(x,l().temple_ordinances_goal&&l().temple_ordinances_goal>0?Math.round(e($)/l().temple_ordinances_goal*100):null)}),ee(()=>(y(l()),e(D)),()=>{O(h,l().names_prepared_goal&&l().names_prepared_goal>0?Math.round(e(D)/l().names_prepared_goal*100):null)}),We(),Ce();var u=Pa(),U=n(u),ne=n(U),de=s(ne),me=n(de);a(de),a(U);var pe=s(U,2),M=n(pe),B=n(M),W=n(B),K=s(n(W)),H=n(K),J=s(n(H)),V=n(J),z=n(V,!0);a(V),a(J);var re=s(J),se=n(re);{var fe=T=>{var L=Ca();g(T,L)};I(se,T=>{v()||T(fe)})}a(re),a(H);var G=s(H),q=s(n(G)),Z=n(q),X=n(Z,!0);a(Z),a(q);var Q=s(q),oe=n(Q);{var ce=T=>{var L=Ma();g(T,L)};I(oe,T=>{v()||T(ce)})}a(Q),a(G);var Me=s(G),xe=n(Me);let Pe;var Se=s(xe);let Je;var tt=n(Se),at=n(tt,!0);a(tt),a(Se);var qe=s(Se);let nt;var f=n(qe);{var b=T=>{var L=Sa(),ie=n(L,!0);a(L),F(le=>k(ie,le),[()=>(e($),m(()=>d(e($))))]),g(T,L)};I(f,T=>{v()||T(b)})}a(qe),a(Me);var te=s(Me);{var Ne=T=>{var L=ja(),ie=n(L),le=n(ie),$e=n(le),Ge=n($e);a($e);var Ie=s($e,2),He=n(Ie);a(Ie),a(le),a(ie),a(L),F(Xe=>{xt(Ge,`width: ${Xe??""}%`),_e(Ge,"aria-valuenow",e(x)),k(He,`${e(x)??""}%`)},[()=>(e(x),m(()=>Math.min(e(x),100)))]),g(T,L)};I(te,T=>{e(x),y(l()),m(()=>e(x)!==null&&l().temple_ordinances_goal)&&T(Ne)})}var ye=s(te),rt=n(ye);let st;var Le=s(rt);let Fe;var ot=n(Le),it=n(ot,!0);a(ot),a(Le);var Re=s(Le);let lt;var dt=n(Re);{var wt=T=>{var L=Ba(),ie=n(L,!0);a(L),F(le=>k(ie,le),[()=>(e(D),m(()=>d(e(D))))]),g(T,L)};I(dt,T=>{v()||T(wt)})}a(Re),a(ye);var ue=s(ye);{var Te=T=>{var L=Oa(),ie=n(L),le=n(ie),$e=n(le),Ge=n($e);a($e);var Ie=s($e,2),He=n(Ie);a(Ie),a(le),a(ie),a(L),F(Xe=>{xt(Ge,`width: ${Xe??""}%`),_e(Ge,"aria-valuenow",e(h)),k(He,`${e(x)??""}%`)},[()=>(e(h),m(()=>Math.min(e(h),100)))]),g(T,L)};I(ue,T=>{e(h),y(l()),m(()=>e(h)!==null&&l().names_prepared_goal)&&T(Te)})}a(K),a(W),a(B);var Ke=s(B,2),Qe=n(Ke);a(Ke);var ct=s(Ke,2),ge=n(ct);a(ct),a(M),a(pe),a(u),F((T,L,ie,le)=>{k(ne,`Ward Mission Goal ${y(l()),m(()=>l().year)??""} `),k(me,`(${e(j)??""})`),k(z,T),k(X,L),Pe=be(xe,1,"",null,Pe,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),Je=be(Se,1,"",null,Je,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),k(at,ie),nt=be(qe,1,"",null,nt,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),st=be(rt,1,"",null,st,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),Fe=be(Le,1,"",null,Fe,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),k(it,le),lt=be(Re,1,"",null,lt,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),_e(Qe,"data-bs-target",`#${N()??""}`),_e(Qe,"aria-controls",N()),_e(ge,"data-bs-target",`#${N()??""}`),_e(ge,"aria-controls",N())},[()=>(y(l()),m(()=>o(l().baptisms_goal))),()=>(y(l()),m(()=>o(l().family_sealings_goal))),()=>(y(l()),m(()=>o(l().temple_ordinances_goal))),()=>(y(l()),m(()=>o(l().names_prepared_goal)))]),Oe("click",Qe,function(...T){A()?.apply(this,T)}),Oe("click",ge,function(...T){P()?.apply(this,T)}),g(_,u),ke(),E()}var Ga=C("<!> <!>",1),Ia=C('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),Aa=C('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),Wa=C('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),qa=C('<div class="col-12"><!> <!></div>'),La=C('<div class="row g-3"></div>'),Fa=C("<!> <!>",1);function Ra(_,i){Ee(i,!1);const t=()=>we(P,"$activeGoals",E),v=()=>we(p,"$currentGoalPeriod",E),S=()=>we(c,"$goalsLoading",E),[E,w]=pt(),$=R(),D=R();let j=R("form"),x=At(),h=R("end"),l=R(),N=R(!1);const{actions:{reload:A}}=gt(),{stores:{activeGoals:P,loading:c,currentGoalPeriod:p},actions:{reload:r}}=Rt();let d=R(null);function o(){O(j,"form")}function u(){O(j,"results")}Et(async()=>{await Promise.all([r(),A()]);const M=new URLSearchParams(window.location.search);O(d,M.get("log-temple-activity"))}),ee(()=>(e(d),e(l),e(N)),()=>{e(d)&&e(d)==="yes"&&e(l)&&!e(N)&&(e(l).click(),O(N,!0))}),ee(()=>e(j),()=>{O(h,e(j)==="form"?"end":"start")}),ee(()=>e(j),()=>{O($,e(j)==="form"?"Temple Activity":"Temple Activity Results")}),ee(()=>t(),()=>{O(D,(()=>{const M=new Date().toISOString().split("T")[0];return t().filter(B=>B.start_date<=M&&B.end_date>=M)})())}),We(),Ce();var U=Fa(),ne=he(U);Wt(ne,{get placement(){return e(h)},get title(){return e($)},get id(){return x},children:(M,B)=>{var W=Ga(),K=he(W);{var H=z=>{{let re=Be(()=>(v(),m(()=>v()?.start_date))),se=Be(()=>(v(),m(()=>v()?.end_date)));da(z,{get drawerId(){return x},get minDate(){return e(re)},get maxDate(){return e(se)}})}};I(K,z=>{e(j)==="form"&&z(H)})}var J=s(K,2);{var V=z=>{ka(z,{})};I(J,z=>{e(j)==="results"&&z(V)})}g(M,W)},$$slots:{default:!0}});var de=s(ne,2);{var me=M=>{var B=Ia();g(M,B)},pe=M=>{var B=mt(),W=he(B);{var K=J=>{var V=Aa();g(J,V)},H=J=>{var V=La();Ae(V,5,()=>e(D),z=>z.id,(z,re)=>{var se=qa(),fe=n(se);Na(fe,{get goal(){return e(re)},get drawerId(){return x},onSubmitClick:o,onViewResultsClick:u});var G=s(fe,2);{var q=Z=>{var X=Wa();It(X,Q=>O(l,Q),()=>e(l)),F(()=>{_e(X,"data-bs-target",`#${x??""}`),_e(X,"aria-controls",x)}),Oe("click",X,o),g(Z,X)};I(G,Z=>{e(re),e(D),m(()=>e(re)===e(D)[0])&&Z(q)})}a(se),g(z,se)}),a(V),g(J,V)};I(W,J=>{e(D),m(()=>e(D).length===0)?J(K):J(H,!1)},!0)}g(M,B)};I(de,M=>{S()?M(me):M(pe,!1)})}g(_,U),ke(),w()}function cn(_){Bt(_,{pageTitle:"Temple Challenge",children:(i,t)=>{Ra(i,{})},$$slots:{default:!0}})}export{cn as component};
