import{a as la}from"../chunks/CnC24E_g.js";import{P as oa,g as Me,b as na}from"../chunks/DyadxOvT.js";import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as Ee,E as y,aj as ia,ak as da,f as ke,t as te,g as e,s,c as o,a as Te,D as t,R as ca,r as l,F as O,al as va,u as b}from"../chunks/JKZwkikK.js";import{f as v,a as c,c as ma}from"../chunks/JDsN5plM.js";import{i as Ne}from"../chunks/b8c_lO2i.js";import{P as ua}from"../chunks/BLt-QmPf.js";import{o as pa}from"../chunks/DjNGvcU6.js";import{b as he,i as E,e as S,a as ba,s as g}from"../chunks/CbqHek51.js";import{e as fa}from"../chunks/B2BlSr7K.js";import{s as ve,r as I}from"../chunks/Bkfkq4RG.js";import{b as R}from"../chunks/BL6gm64P.js";import{p as _a}from"../chunks/CdEA5IGF.js";import{g as ya}from"../chunks/3ecikG7O.js";import{D as ga}from"../chunks/C5g5U6Zg.js";const ha=!1,xa=async()=>(la(oa.EditTempleChallenges,"Edit Temple Challenges"),{}),Za=Object.freeze(Object.defineProperty({__proto__:null,load:xa,ssr:ha},Symbol.toStringTag,{value:"Module"}));var wa=v('<div class="alert alert-danger alert-dismissible fade show" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Ga=v('<div class="alert alert-success alert-dismissible fade show" role="alert"><i class="bi bi-check-circle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Da=v('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>'),$a=v('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">Click "Create New Goal" to add your first ward mission goal.</p></div>'),Sa=v('<span class="badge bg-secondary ms-2">Archived</span>'),Ca=v('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-success" type="button"><i class="bi bi-arrow-counterclockwise"></i> <span class="d-none d-sm-inline">Restore</span></button> <button class="btn btn-sm btn-danger" type="button"><i class="bi bi-trash-fill"></i> <span class="d-none d-sm-inline">Delete</span></button></div>'),ka=v('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-pencil"></i> <span class="d-none d-sm-inline">Edit</span></button> <button class="btn btn-sm btn-outline-danger" type="button"><i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Archive</span></button></div>'),Ma=v('<tr><td><strong> </strong> <!></td><td> <div class="d-md-none mt-1"><small class="text-muted"> </small></div></td><td class="d-none d-md-table-cell"> </td><td class="d-none d-md-table-cell"> </td><td class="d-none d-lg-table-cell"> </td><td class="d-none d-xl-table-cell"><small class="text-muted"> </small></td><td class="text-end"><!></td></tr>'),Ea=v('<div class="table-responsive"><table class="table table-hover align-middle svelte-120cb0p"><thead><tr><th scope="col" class="svelte-120cb0p">Year</th><th scope="col" class="svelte-120cb0p">Period</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Baptisms Goal</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Sealings Goal</th><th scope="col" class="d-none d-lg-table-cell svelte-120cb0p">Ordinances Goal</th><th scope="col" class="d-none d-xl-table-cell svelte-120cb0p">Notes</th><th scope="col" class="text-end svelte-120cb0p">Actions</th></tr></thead><tbody></tbody></table></div>'),Ta=v('<div class="alert alert-danger" role="alert"><small> </small></div>'),Na=v('<span class="spinner-border spinner-border-sm me-2" role="status"></span>'),Pa=v('<form class="d-flex flex-column gap-3"><!> <div><label class="form-label" for="year">Year *</label> <input type="number" class="form-control" id="year" min="2000" max="2100" required/> <div class="form-text">Calendar year for this goal period</div></div> <div><label class="form-label" for="startDate">Start Date *</label> <input type="date" class="form-control" id="startDate" required/> <div class="form-text">First day of the goal period (inclusive)</div></div> <div><label class="form-label" for="endDate">End Date *</label> <input type="date" class="form-control" id="endDate" required/> <div class="form-text">Last day of the goal period (inclusive)</div></div> <hr/> <div><label class="form-label" for="baptismsGoal">Baptisms Goal</label> <input type="number" class="form-control" id="baptismsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of baptisms (leave empty to display "--")</div></div> <div><label class="form-label" for="familySealingsGoal">Family Sealings Goal</label> <input type="number" class="form-control" id="familySealingsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of family sealings (leave empty to display "--")</div></div> <div><label class="form-label" for="templeOrdinancesGoal">Temple Ordinances Goal</label> <input type="number" class="form-control" id="templeOrdinancesGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of temple ordinances performed (leave empty to display "--")</div></div> <div><label class="form-label" for="notes">Notes (Optional)</label> <textarea class="form-control" id="notes" rows="3"></textarea> <div class="form-text">Internal notes about this goal period (for admin reference)</div></div> <div class="d-flex justify-content-end gap-2"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"><!> </button></div></form>'),La=v('<div class="ward-mission-goals-admin svelte-120cb0p"><div class="d-flex justify-content-between align-items-center mb-4"><h2>Ward Mission Goals Configuration</h2> <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-plus-circle"></i> Create New Goal</button></div> <!> <!> <!></div> <!>',1);function Fa(me,ue){Ee(ue,!1);const se=()=>he(Ue,"$currentUserIsRoot",T),W=()=>he(Pe,"$goals",T),re=()=>he(Le,"$loading",T),[T,pe]=ba(),le=y(),{stores:{data:Pe,loading:Le},actions:{reload:Fe,apiCreate:Ae,apiUpdate:Oe,apiDelete:Re,apiRestore:Ye,apiHardDelete:qe}}=ya(),{stores:{currentUserIsRoot:Ue}}=Me();let d=y(null),m=y(null),oe=null,N=y(!1),w=y(new Date().getFullYear()+1),P=y(""),L=y(""),B=y(null),H=y(null),z=y(null),J=y("");const ne="goal-form-drawer";pa(async()=>{await Fe()});function xe(){oe=null,t(N,!1),t(w,new Date().getFullYear()+1),t(P,""),t(L,""),t(B,null),t(H,null),t(z,null),t(J,""),t(d,null)}function je(){xe(),t(N,!1)}function Ie(a){oe=a,t(N,!0),t(w,a.year),t(P,a.start_date),t(L,a.end_date),t(B,a.baptisms_goal),t(H,a.family_sealings_goal),t(z,a.temple_ordinances_goal),t(J,a.notes||""),t(d,null)}function we(){document.querySelector(`[data-bs-target="#${ne}"]`)?.click(),xe()}async function We(){if(t(d,null),t(m,null),!e(w)||e(w)<2e3||e(w)>2100){t(d,"Please enter a valid year between 2000 and 2100");return}if(!e(P)||!e(L)){t(d,"Please select both start and end dates");return}if(e(P)>e(L)){t(d,"Start date must be before or equal to end date");return}try{const a={year:e(w),start_date:e(P),end_date:e(L),baptisms_goal:e(B),family_sealings_goal:e(H),temple_ordinances_goal:e(z),is_active:!0,notes:e(J)||null};e(N)&&oe?.id?(await Oe(oe.id,a),t(m,"Goal updated successfully!")):(await Ae(a),t(m,"Goal created successfully!")),we(),setTimeout(()=>{t(m,null)},3e3)}catch(a){t(d,a instanceof Error?a.message:"Failed to save goal")}}async function Be(a){if(confirm(`Are you sure you want to archive the goal for ${a.year}? You can restore it later.`))try{a.id&&(await Re(a.id),t(m,"Goal archived successfully!"),setTimeout(()=>{t(m,null)},3e3))}catch(n){t(d,n instanceof Error?n.message:"Failed to archive goal")}}async function He(a){if(confirm(`Are you sure you want to restore the goal for ${a.year}?`))try{a.id&&(await Ye(a.id),t(m,"Goal restored successfully!"),setTimeout(()=>{t(m,null)},3e3))}catch(n){t(d,n instanceof Error?n.message:"Failed to restore goal")}}async function ze(a){if(confirm(`Are you sure you want to PERMANENTLY delete the goal for ${a.year}?

This action cannot be undone and will remove the goal from the database forever.`))try{a.id&&(await qe(a.id),t(m,"Goal permanently deleted!"),setTimeout(()=>{t(m,null)},3e3))}catch(n){t(d,n instanceof Error?n.message:"Failed to permanently delete goal")}}function Je(a,n){const[h,u,Y]=a.split("-").map(Number),[x,f,C]=n.split("-").map(Number),k=new Date(h,u-1,Y),M=new Date(x,f-1,C),r=k.toLocaleDateString("en-US",{month:"short"}),G=M.toLocaleDateString("en-US",{month:"short"});return`${r} to ${G}`}ia(()=>(se(),W()),()=>{t(le,se()?W():W().filter(a=>a.is_active))}),da(),Ne();var Ge=La(),be=ke(Ge),fe=o(be),_e=s(o(fe),2);ve(_e,"data-bs-target","#goal-form-drawer"),ve(_e,"aria-controls",ne),l(fe);var De=s(fe,2);{var Ke=a=>{var n=wa(),h=s(o(n)),u=s(h);l(n),te(()=>g(h,` ${e(d)??""} `)),S("click",u,()=>t(d,null)),c(a,n)};E(De,a=>{e(d)&&a(Ke)})}var $e=s(De,2);{var Qe=a=>{var n=Ga(),h=s(o(n)),u=s(h);l(n),te(()=>g(h,` ${e(m)??""} `)),S("click",u,()=>t(m,null)),c(a,n)};E($e,a=>{e(m)&&a(Qe)})}var Ve=s($e,2);{var Xe=a=>{var n=Da();c(a,n)},Ze=a=>{var n=ma(),h=ke(n);{var u=x=>{var f=$a();c(x,f)},Y=x=>{var f=Ea(),C=o(f),k=s(o(C));fa(k,5,()=>e(le),M=>M.id,(M,r)=>{var G=Ma();let q;var U=o(G),F=o(U),ie=o(F,!0);l(F);var K=s(F,2);{var de=p=>{var _=Sa();c(p,_)};E(K,p=>{e(r),b(()=>!e(r).is_active)&&p(de)})}l(U);var A=s(U),Q=o(A),V=s(Q),X=o(V),Z=o(X);l(X),l(V),l(A);var j=s(A),ye=o(j,!0);l(j);var ee=s(j),i=o(ee,!0);l(ee);var D=s(ee),ce=o(D,!0);l(D);var ae=s(D),Se=o(ae),aa=o(Se,!0);l(Se),l(ae);var Ce=s(ae),ta=o(Ce);{var sa=p=>{var _=Ca(),$=o(_),ge=s($,2);l(_),S("click",$,()=>He(e(r))),S("click",ge,()=>ze(e(r))),c(p,_)},ra=p=>{var _=ka(),$=o(_);ve($,"data-bs-target","#goal-form-drawer"),ve($,"aria-controls",ne);var ge=s($,2);l(_),S("click",$,()=>Ie(e(r))),S("click",ge,()=>Be(e(r))),c(p,_)};E(ta,p=>{e(r),b(()=>!e(r).is_active)?p(sa):p(ra,!1)})}l(Ce),l(G),te((p,_,$)=>{q=na(G,1,"",null,q,{"table-secondary":!e(r).is_active}),g(ie,(e(r),b(()=>e(r).year))),g(Q,`${p??""} `),g(Z,`Goals: ${e(r),b(()=>e(r).baptisms_goal??"--")??""} / ${e(r),b(()=>e(r).family_sealings_goal??"--")??""} /
										${_??""}`),g(ye,(e(r),b(()=>e(r).baptisms_goal??"--"))),g(i,(e(r),b(()=>e(r).family_sealings_goal??"--"))),g(ce,$),g(aa,(e(r),b(()=>e(r).notes||"â€”")))},[()=>(e(r),b(()=>Je(e(r).start_date,e(r).end_date))),()=>(e(r),b(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--")),()=>(e(r),b(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--"))]),c(M,G)}),l(k),l(C),l(f),c(x,f)};E(h,x=>{e(le),b(()=>e(le).length===0)?x(u):x(Y,!1)},!0)}c(a,n)};E(Ve,a=>{re()?a(Xe):a(Ze,!1)})}l(be);var ea=s(be,2);{let a=ca(()=>e(N)?`Edit Goal for ${e(w)}`:"Create New Goal");ga(ea,{get title(){return e(a)},id:ne,placement:"end",children:(n,h)=>{var u=Pa(),Y=o(u);{var x=i=>{var D=Ta(),ce=o(D),ae=o(ce,!0);l(ce),l(D),te(()=>g(ae,e(d))),c(i,D)};E(Y,i=>{e(d)&&i(x)})}var f=s(Y,2),C=s(o(f),2);I(C),O(2),l(f);var k=s(f,2),M=s(o(k),2);I(M),O(2),l(k);var r=s(k,2),G=s(o(r),2);I(G),O(2),l(r);var q=s(r,4),U=s(o(q),2);I(U),O(2),l(q);var F=s(q,2),ie=s(o(F),2);I(ie),O(2),l(F);var K=s(F,2),de=s(o(K),2);I(de),O(2),l(K);var A=s(K,2),Q=s(o(A),2);va(Q),O(2),l(A);var V=s(A,2),X=o(V),Z=s(X,2),j=o(Z);{var ye=i=>{var D=Na();c(i,D)};E(j,i=>{re()&&i(ye)})}var ee=s(j);l(Z),l(V),l(u),te(()=>{C.disabled=e(N),Z.disabled=re(),g(ee,` ${e(N)?"Update Goal":"Create Goal"}`)}),R(C,()=>e(w),i=>t(w,i)),R(M,()=>e(P),i=>t(P,i)),R(G,()=>e(L),i=>t(L,i)),R(U,()=>e(B),i=>t(B,i)),R(ie,()=>e(H),i=>t(H,i)),R(de,()=>e(z),i=>t(z,i)),R(Q,()=>e(J),i=>t(J,i)),S("click",X,we),S("submit",u,_a(We)),c(n,u)},$$slots:{default:!0}})}S("click",_e,je),c(me,Ge),Te(),pe()}var Aa=v(`<div class="container svelte-1ljfgab"><p class="lead">Configure annual ward mission goals including target dates and goal values. Goals will
			automatically display on the home page for all ward members.</p> <!></div>`);function et(me,ue){Ee(ue,!1);const{stores:{pageName:se}}=Me();se.set("Ward Mission Goals"),Ne(),ua(me,{pageTitle:"Manage Ward Mission Goals",children:(W,re)=>{var T=Aa(),pe=s(o(T),2);Fa(pe,{}),l(T),c(W,T)},$$slots:{default:!0}}),Te()}export{et as component,Za as universal};
