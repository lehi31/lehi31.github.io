import{s as Ct,n as Xe,d as f,G as Fe,v as Vt,x as He,w as me,a as $,i as ne,b as n,y as Le,p as i,z as tt,c,e as g,A as ue,g as I,f as S,h as u,j as w,t as V,k as kt,r as Tt,C as lt}from"../chunks/BRwtC7dL.js";import{S as Dt,i as At,d as It,t as wt,a as Ot,m as Lt,c as Nt,b as St}from"../chunks/jH9XunBy.js";import{P as Ut}from"../chunks/e4N0RvMD.js";import{e as ve}from"../chunks/Dzz_nbWy.js";import{O as rt,b as yt,c as We,d as Pt,r as zt,e as Mt,g as Bt}from"../chunks/DebXK80o.js";import{u as Ht}from"../chunks/fa2YytWJ.js";import{g as Rt}from"../chunks/By7HBROr.js";function it(s,e,t){const l=s.slice();l[24]=e[t];const a=We(l[24].calling_id);return l[25]=a,l}function ct(s,e,t){const l=s.slice();return l[28]=e[t],l}function ut(s,e,t){const l=s.slice();return l[28]=e[t],l}function ft(s,e,t){const l=s.slice();return l[24]=e[t],l}function dt(s,e,t){const l=s.slice();return l[35]=e[t],l}function ht(s){let e,t,l,a,o,_;return{c(){e=u("div"),t=V(s[4]),l=w(),a=u("button"),this.h()},l(h){e=c(h,"DIV",{class:!0,role:!0});var v=g(e);t=S(v,s[4]),l=I(v),a=c(v,"BUTTON",{type:!0,class:!0,"aria-label":!0}),g(a).forEach(f),v.forEach(f),this.h()},h(){i(a,"type","button"),i(a,"class","btn-close"),i(a,"aria-label","Close"),i(e,"class","alert alert-danger alert-dismissible fade show"),i(e,"role","alert")},m(h,v){ne(h,e,v),n(e,t),n(e,l),n(e,a),o||(_=Le(a,"click",s[16]),o=!0)},p(h,v){v[0]&16&&$(t,h[4])},d(h){h&&f(e),o=!1,_()}}}function _t(s){let e,t=(s[35].display_name||s[35].email)+"",l,a,o=s[35].email+"",_,h,v;return{c(){e=u("option"),l=V(t),a=V(" ("),_=V(o),h=V(`)
							`),this.h()},l(b){e=c(b,"OPTION",{});var C=g(e);l=S(C,t),a=S(C," ("),_=S(C,o),h=S(C,`)
							`),C.forEach(f),this.h()},h(){e.__value=v=s[35].id,me(e,e.__value)},m(b,C){ne(b,e,C),n(e,l),n(e,a),n(e,_),n(e,h)},p(b,C){C[0]&1024&&t!==(t=(b[35].display_name||b[35].email)+"")&&$(l,t),C[0]&1024&&o!==(o=b[35].email+"")&&$(_,o),C[0]&1024&&v!==(v=b[35].id)&&(e.__value=v,me(e,e.__value))},d(b){b&&f(e)}}}function gt(s){let e,t=s[24].name+"",l,a;return{c(){e=u("option"),l=V(t),this.h()},l(o){e=c(o,"OPTION",{});var _=g(e);l=S(_,t),_.forEach(f),this.h()},h(){e.__value=a=s[24].id,me(e,e.__value)},m(o,_){ne(o,e,_),n(e,l)},p(o,_){_[0]&260&&t!==(t=o[24].name+"")&&$(l,t),_[0]&260&&a!==(a=o[24].id)&&(e.__value=a,me(e,e.__value))},d(o){o&&f(e)}}}function vt(s){let e,t,l=ve(s[2][s[28]]),a=[];for(let o=0;o<l.length;o+=1)a[o]=gt(ft(s,l,o));return{c(){e=u("optgroup");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=c(o,"OPTGROUP",{label:!0});var _=g(e);for(let h=0;h<a.length;h+=1)a[h].l(_);_.forEach(f),this.h()},h(){i(e,"label",t=Ue(s[28]))},m(o,_){ne(o,e,_);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null)},p(o,_){if(_[0]&260){l=ve(o[2][o[28]]);let h;for(h=0;h<l.length;h+=1){const v=ft(o,l,h);a[h]?a[h].p(v,_):(a[h]=gt(v),a[h].c(),a[h].m(e,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=l.length}_[0]&256&&t!==(t=Ue(o[28]))&&i(e,"label",t)},d(o){o&&f(e),Fe(a,o)}}}function mt(s){let e;return{c(){e=u("span"),this.h()},l(t){e=c(t,"SPAN",{class:!0,role:!0}),g(e).forEach(f),this.h()},h(){i(e,"class","spinner-border spinner-border-sm me-2"),i(e,"role","status")},m(t,l){ne(t,e,l)},d(t){t&&f(e)}}}function bt(s){let e,t=Ue(s[28])+"",l;return{c(){e=u("option"),l=V(t),this.h()},l(a){e=c(a,"OPTION",{});var o=g(e);l=S(o,t),o.forEach(f),this.h()},h(){e.__value=s[28],me(e,e.__value)},m(a,o){ne(a,e,o),n(e,l)},p:Xe,d(a){a&&f(e)}}}function jt(s){let e,t,l,a='<tr><th scope="col" class="svelte-1b9bnt6">Name</th> <th scope="col" class="d-none d-md-table-cell svelte-1b9bnt6">Email</th> <th scope="col" class="svelte-1b9bnt6">Calling</th> <th scope="col" class="d-none d-lg-table-cell svelte-1b9bnt6">Organization</th> <th scope="col" class="d-none d-lg-table-cell svelte-1b9bnt6">Assigned Date</th> <th scope="col" class="d-none d-xl-table-cell svelte-1b9bnt6">Notes</th> <th scope="col" class="text-end svelte-1b9bnt6">Actions</th></tr>',o,_,h=ve(s[9]),v=[];for(let b=0;b<h.length;b+=1)v[b]=pt(it(s,h,b));return{c(){e=u("div"),t=u("table"),l=u("thead"),l.innerHTML=a,o=w(),_=u("tbody");for(let b=0;b<v.length;b+=1)v[b].c();this.h()},l(b){e=c(b,"DIV",{class:!0});var C=g(e);t=c(C,"TABLE",{class:!0});var m=g(t);l=c(m,"THEAD",{"data-svelte-h":!0}),ue(l)!=="svelte-ctx9s0"&&(l.innerHTML=a),o=I(m),_=c(m,"TBODY",{class:!0});var T=g(_);for(let O=0;O<v.length;O+=1)v[O].l(T);T.forEach(f),m.forEach(f),C.forEach(f),this.h()},h(){i(_,"class","table-group-divider"),i(t,"class","table table-hover align-middle svelte-1b9bnt6"),i(e,"class","table-responsive")},m(b,C){ne(b,e,C),n(e,t),n(t,l),n(t,o),n(t,_);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(_,null)},p(b,C){if(C[0]&16904){h=ve(b[9]);let m;for(m=0;m<h.length;m+=1){const T=it(b,h,m);v[m]?v[m].p(T,C):(v[m]=pt(T),v[m].c(),v[m].m(_,null))}for(;m<v.length;m+=1)v[m].d(1);v.length=h.length}},d(b){b&&f(e),Fe(v,b)}}}function Ft(s){let e,t,l=s[1]!=="all"&&Et();return{c(){e=u("div"),t=V(`No active calling assignments found.
			`),l&&l.c(),this.h()},l(a){e=c(a,"DIV",{class:!0});var o=g(e);t=S(o,`No active calling assignments found.
			`),l&&l.l(o),o.forEach(f),this.h()},h(){i(e,"class","alert alert-info")},m(a,o){ne(a,e,o),n(e,t),l&&l.m(e,null)},p(a,o){a[1]!=="all"?l||(l=Et(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(a){a&&f(e),l&&l.d()}}}function Gt(s){let e,t='<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-mlx3u2"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-5")},m(l,a){ne(l,e,a)},p:Xe,d(l){l&&f(e)}}}function pt(s){let e,t,l,a=(s[24].user?.display_name||"Unknown")+"",o,_,h,v=(s[24].user?.email||"N/A")+"",b,C,m,T,O=(s[24].user?.email||"N/A")+"",J,G,D,U,B=s[24].callingName+"",be,fe,L,j,de=(s[25]?Ue(s[25].organization):"Unknown")+"",he,X,q,p,N=(s[25]?Ue(s[25].organization):"Unknown")+"",A,H,ae,pe,Z=new Date(s[24].assigned_date).toLocaleDateString()+"",ee,ye,_e,y,Ee=(s[24].notes||"—")+"",oe,Q,re,Y,Ce,le,x,W="Release",te,Pe,ze;function Ae(){return s[21](s[24])}return{c(){e=u("tr"),t=u("td"),l=u("div"),o=V(a),_=w(),h=u("small"),b=V(v),C=w(),m=u("td"),T=u("small"),J=V(O),G=w(),D=u("td"),U=u("strong"),be=V(B),fe=w(),L=u("div"),j=u("span"),he=V(de),X=w(),q=u("td"),p=u("span"),A=V(N),H=w(),ae=u("td"),pe=u("small"),ee=V(Z),ye=w(),_e=u("td"),y=u("small"),oe=V(Ee),Q=w(),re=u("td"),Y=u("button"),Ce=u("i"),le=w(),x=u("span"),x.textContent=W,te=w(),this.h()},l(K){e=c(K,"TR",{});var k=g(e);t=c(k,"TD",{});var ge=g(t);l=c(ge,"DIV",{class:!0});var Ne=g(l);o=S(Ne,a),Ne.forEach(f),_=I(ge),h=c(ge,"SMALL",{class:!0});var Me=g(h);b=S(Me,v),Me.forEach(f),ge.forEach(f),C=I(k),m=c(k,"TD",{class:!0});var Ie=g(m);T=c(Ie,"SMALL",{class:!0});var Se=g(T);J=S(Se,O),Se.forEach(f),Ie.forEach(f),G=I(k),D=c(k,"TD",{});var we=g(D);U=c(we,"STRONG",{});var Be=g(U);be=S(Be,B),Be.forEach(f),fe=I(we),L=c(we,"DIV",{class:!0});var Re=g(L);j=c(Re,"SPAN",{class:!0});var R=g(j);he=S(R,de),R.forEach(f),Re.forEach(f),we.forEach(f),X=I(k),q=c(k,"TD",{class:!0});var ke=g(q);p=c(ke,"SPAN",{class:!0});var P=g(p);A=S(P,N),P.forEach(f),ke.forEach(f),H=I(k),ae=c(k,"TD",{class:!0});var Te=g(ae);pe=c(Te,"SMALL",{});var z=g(pe);ee=S(z,Z),z.forEach(f),Te.forEach(f),ye=I(k),_e=c(k,"TD",{class:!0});var F=g(_e);y=c(F,"SMALL",{class:!0});var De=g(y);oe=S(De,Ee),De.forEach(f),F.forEach(f),Q=I(k),re=c(k,"TD",{class:!0});var M=g(re);Y=c(M,"BUTTON",{class:!0});var Ve=g(Y);Ce=c(Ve,"I",{class:!0}),g(Ce).forEach(f),le=I(Ve),x=c(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),ue(x)!=="svelte-15ff6gg"&&(x.textContent=W),Ve.forEach(f),M.forEach(f),te=I(k),k.forEach(f),this.h()},h(){i(l,"class","fw-semibold"),i(h,"class","d-md-none text-muted d-block"),i(T,"class","text-muted"),i(m,"class","d-none d-md-table-cell"),i(j,"class","badge bg-info"),i(L,"class","d-lg-none mt-1"),i(p,"class","badge bg-info"),i(q,"class","d-none d-lg-table-cell"),i(ae,"class","d-none d-lg-table-cell"),i(y,"class","text-muted"),i(_e,"class","d-none d-xl-table-cell"),i(Ce,"class","bi bi-x-circle"),i(x,"class","d-none d-sm-inline"),i(Y,"class","btn btn-sm btn-outline-danger"),Y.disabled=s[3],i(re,"class","text-end")},m(K,k){ne(K,e,k),n(e,t),n(t,l),n(l,o),n(t,_),n(t,h),n(h,b),n(e,C),n(e,m),n(m,T),n(T,J),n(e,G),n(e,D),n(D,U),n(U,be),n(D,fe),n(D,L),n(L,j),n(j,he),n(e,X),n(e,q),n(q,p),n(p,A),n(e,H),n(e,ae),n(ae,pe),n(pe,ee),n(e,ye),n(e,_e),n(_e,y),n(y,oe),n(e,Q),n(e,re),n(re,Y),n(Y,Ce),n(Y,le),n(Y,x),n(e,te),Pe||(ze=Le(Y,"click",Ae),Pe=!0)},p(K,k){s=K,k[0]&512&&a!==(a=(s[24].user?.display_name||"Unknown")+"")&&$(o,a),k[0]&512&&v!==(v=(s[24].user?.email||"N/A")+"")&&$(b,v),k[0]&512&&O!==(O=(s[24].user?.email||"N/A")+"")&&$(J,O),k[0]&512&&B!==(B=s[24].callingName+"")&&$(be,B),k[0]&512&&de!==(de=(s[25]?Ue(s[25].organization):"Unknown")+"")&&$(he,de),k[0]&512&&N!==(N=(s[25]?Ue(s[25].organization):"Unknown")+"")&&$(A,N),k[0]&512&&Z!==(Z=new Date(s[24].assigned_date).toLocaleDateString()+"")&&$(ee,Z),k[0]&512&&Ee!==(Ee=(s[24].notes||"—")+"")&&$(oe,Ee),k[0]&8&&(Y.disabled=s[3])},d(K){K&&f(e),Pe=!1,ze()}}}function Et(s){let e;return{c(){e=V("Try selecting a different organization.")},l(t){e=S(t,"Try selecting a different organization.")},m(t,l){ne(t,e,l)},d(t){t&&f(e)}}}function qt(s){let e,t,l,a="Calling Assignments",o,_,h,v,b,C,m,T,O='<h5 class="mb-0">Assign New Calling</h5>',J,G,D,U,B,be="Select User",fe,L,j,de="Choose a user...",he,X,q,p="Select Calling",N,A,H,ae="Choose a calling...",pe,Z,ee,ye="Notes (Optional)",_e,y,Ee,oe,Q,re,Y,Ce,le,x,W,te,Pe="All Organizations",ze,Ae,K,k,ge=s[9].length+"",Ne,Me,Ie=s[9].length!==1?"s":"",Se,we,Be,Re,R=s[4]&&ht(s),ke=ve(s[10]),P=[];for(let r=0;r<ke.length;r+=1)P[r]=_t(dt(s,ke,r));let Te=ve(s[8]),z=[];for(let r=0;r<Te.length;r+=1)z[r]=vt(ut(s,Te,r));let F=s[3]&&mt(),De=ve(Object.values(rt)),M=[];for(let r=0;r<De.length;r+=1)M[r]=bt(ct(s,De,r));function Ve(r,E){return r[3]&&r[0].length===0?Gt:r[9].length===0?Ft:jt}let Ge=Ve(s),ie=Ge(s);return{c(){e=u("div"),t=u("div"),l=u("h2"),l.textContent=a,o=w(),_=u("button"),h=u("i"),v=V(" Refresh"),b=w(),R&&R.c(),C=w(),m=u("div"),T=u("div"),T.innerHTML=O,J=w(),G=u("div"),D=u("div"),U=u("div"),B=u("label"),B.textContent=be,fe=w(),L=u("select"),j=u("option"),j.textContent=de;for(let r=0;r<P.length;r+=1)P[r].c();he=w(),X=u("div"),q=u("label"),q.textContent=p,N=w(),A=u("select"),H=u("option"),H.textContent=ae;for(let r=0;r<z.length;r+=1)z[r].c();pe=w(),Z=u("div"),ee=u("label"),ee.textContent=ye,_e=w(),y=u("input"),Ee=w(),oe=u("div"),Q=u("button"),F&&F.c(),re=V(`
						Assign Calling`),Ce=w(),le=u("div"),x=u("div"),W=u("select"),te=u("option"),te.textContent=Pe;for(let r=0;r<M.length;r+=1)M[r].c();ze=w(),Ae=u("div"),K=u("div"),k=V("Showing "),Ne=V(ge),Me=V(" active calling"),Se=V(Ie),we=w(),ie.c(),this.h()},l(r){e=c(r,"DIV",{class:!0});var E=g(e);t=c(E,"DIV",{class:!0});var d=g(t);l=c(d,"H2",{"data-svelte-h":!0}),ue(l)!=="svelte-fxk6fw"&&(l.textContent=a),o=I(d),_=c(d,"BUTTON",{class:!0});var se=g(_);h=c(se,"I",{class:!0}),g(h).forEach(f),v=S(se," Refresh"),se.forEach(f),d.forEach(f),b=I(E),R&&R.l(E),C=I(E),m=c(E,"DIV",{class:!0});var qe=g(m);T=c(qe,"DIV",{class:!0,"data-svelte-h":!0}),ue(T)!=="svelte-1dnyu47"&&(T.innerHTML=O),J=I(qe),G=c(qe,"DIV",{class:!0});var st=g(G);D=c(st,"DIV",{class:!0});var Oe=g(D);U=c(Oe,"DIV",{class:!0});var Ke=g(U);B=c(Ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(B)!=="svelte-1s8xk4p"&&(B.textContent=be),fe=I(Ke),L=c(Ke,"SELECT",{id:!0,class:!0});var Ze=g(L);j=c(Ze,"OPTION",{"data-svelte-h":!0}),ue(j)!=="svelte-kua526"&&(j.textContent=de);for(let ce=0;ce<P.length;ce+=1)P[ce].l(Ze);Ze.forEach(f),Ke.forEach(f),he=I(Oe),X=c(Oe,"DIV",{class:!0});var Ye=g(X);q=c(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(q)!=="svelte-wakad"&&(q.textContent=p),N=I(Ye),A=c(Ye,"SELECT",{id:!0,class:!0});var xe=g(A);H=c(xe,"OPTION",{"data-svelte-h":!0}),ue(H)!=="svelte-xsavec"&&(H.textContent=ae);for(let ce=0;ce<z.length;ce+=1)z[ce].l(xe);xe.forEach(f),Ye.forEach(f),pe=I(Oe),Z=c(Oe,"DIV",{class:!0});var Je=g(Z);ee=c(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ue(ee)!=="svelte-vpme2u"&&(ee.textContent=ye),_e=I(Je),y=c(Je,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),Je.forEach(f),Ee=I(Oe),oe=c(Oe,"DIV",{class:!0});var nt=g(oe);Q=c(nt,"BUTTON",{class:!0});var $e=g(Q);F&&F.l($e),re=S($e,`
						Assign Calling`),$e.forEach(f),nt.forEach(f),Oe.forEach(f),st.forEach(f),qe.forEach(f),Ce=I(E),le=c(E,"DIV",{class:!0});var Qe=g(le);x=c(Qe,"DIV",{class:!0});var at=g(x);W=c(at,"SELECT",{class:!0});var et=g(W);te=c(et,"OPTION",{"data-svelte-h":!0}),ue(te)!=="svelte-1vw7buo"&&(te.textContent=Pe);for(let ce=0;ce<M.length;ce+=1)M[ce].l(et);et.forEach(f),at.forEach(f),ze=I(Qe),Ae=c(Qe,"DIV",{class:!0});var ot=g(Ae);K=c(ot,"DIV",{class:!0});var je=g(K);k=S(je,"Showing "),Ne=S(je,ge),Me=S(je," active calling"),Se=S(je,Ie),je.forEach(f),ot.forEach(f),Qe.forEach(f),we=I(E),ie.l(E),E.forEach(f),this.h()},h(){i(h,"class","bi bi-arrow-clockwise"),i(_,"class","btn btn-primary"),_.disabled=s[3],i(t,"class","d-flex justify-content-between align-items-center mb-4"),i(T,"class","card-header svelte-1b9bnt6"),i(B,"for","user-select"),i(B,"class","form-label"),j.__value=null,me(j,j.__value),i(L,"id","user-select"),i(L,"class","form-select"),L.disabled=s[3],s[5]===void 0&&tt(()=>s[17].call(L)),i(U,"class","col-md-4"),i(q,"for","calling-select"),i(q,"class","form-label"),H.__value="",me(H,H.__value),i(A,"id","calling-select"),i(A,"class","form-select"),A.disabled=s[3],s[6]===void 0&&tt(()=>s[18].call(A)),i(X,"class","col-md-4"),i(ee,"for","notes-input"),i(ee,"class","form-label"),i(y,"id","notes-input"),i(y,"type","text"),i(y,"class","form-control"),i(y,"placeholder","Assignment notes..."),y.disabled=s[3],i(Z,"class","col-md-4"),i(Q,"class","btn btn-success"),Q.disabled=Y=s[3]||!s[5]||!s[6],i(oe,"class","col-12"),i(D,"class","row g-3"),i(G,"class","card-body"),i(m,"class","card mb-4"),te.__value="all",me(te,te.__value),i(W,"class","form-select"),s[1]===void 0&&tt(()=>s[20].call(W)),i(x,"class","col-md-4"),i(K,"class","text-muted mt-2"),i(Ae,"class","col-md-8"),i(le,"class","row mb-3"),i(e,"class","calling-assignment svelte-1b9bnt6")},m(r,E){ne(r,e,E),n(e,t),n(t,l),n(t,o),n(t,_),n(_,h),n(_,v),n(e,b),R&&R.m(e,null),n(e,C),n(e,m),n(m,T),n(m,J),n(m,G),n(G,D),n(D,U),n(U,B),n(U,fe),n(U,L),n(L,j);for(let d=0;d<P.length;d+=1)P[d]&&P[d].m(L,null);He(L,s[5],!0),n(D,he),n(D,X),n(X,q),n(X,N),n(X,A),n(A,H);for(let d=0;d<z.length;d+=1)z[d]&&z[d].m(A,null);He(A,s[6],!0),n(D,pe),n(D,Z),n(Z,ee),n(Z,_e),n(Z,y),me(y,s[7]),n(D,Ee),n(D,oe),n(oe,Q),F&&F.m(Q,null),n(Q,re),n(e,Ce),n(e,le),n(le,x),n(x,W),n(W,te);for(let d=0;d<M.length;d+=1)M[d]&&M[d].m(W,null);He(W,s[1],!0),n(le,ze),n(le,Ae),n(Ae,K),n(K,k),n(K,Ne),n(K,Me),n(K,Se),n(e,we),ie.m(e,null),Be||(Re=[Le(_,"click",s[12]),Le(L,"change",s[17]),Le(A,"change",s[18]),Le(y,"input",s[19]),Le(Q,"click",s[13]),Le(W,"change",s[20])],Be=!0)},p(r,E){if(E[0]&8&&(_.disabled=r[3]),r[4]?R?R.p(r,E):(R=ht(r),R.c(),R.m(e,C)):R&&(R.d(1),R=null),E[0]&1024){ke=ve(r[10]);let d;for(d=0;d<ke.length;d+=1){const se=dt(r,ke,d);P[d]?P[d].p(se,E):(P[d]=_t(se),P[d].c(),P[d].m(L,null))}for(;d<P.length;d+=1)P[d].d(1);P.length=ke.length}if(E[0]&8&&(L.disabled=r[3]),E[0]&1056&&He(L,r[5]),E[0]&260){Te=ve(r[8]);let d;for(d=0;d<Te.length;d+=1){const se=ut(r,Te,d);z[d]?z[d].p(se,E):(z[d]=vt(se),z[d].c(),z[d].m(A,null))}for(;d<z.length;d+=1)z[d].d(1);z.length=Te.length}if(E[0]&8&&(A.disabled=r[3]),E[0]&324&&He(A,r[6]),E[0]&8&&(y.disabled=r[3]),E[0]&128&&y.value!==r[7]&&me(y,r[7]),r[3]?F||(F=mt(),F.c(),F.m(Q,re)):F&&(F.d(1),F=null),E[0]&1388&&Y!==(Y=r[3]||!r[5]||!r[6])&&(Q.disabled=Y),E&0){De=ve(Object.values(rt));let d;for(d=0;d<De.length;d+=1){const se=ct(r,De,d);M[d]?M[d].p(se,E):(M[d]=bt(se),M[d].c(),M[d].m(W,null))}for(;d<M.length;d+=1)M[d].d(1);M.length=De.length}E[0]&2&&He(W,r[1]),E[0]&512&&ge!==(ge=r[9].length+"")&&$(Ne,ge),E[0]&512&&Ie!==(Ie=r[9].length!==1?"s":"")&&$(Se,Ie),Ge===(Ge=Ve(r))&&ie?ie.p(r,E):(ie.d(1),ie=Ge(r),ie&&(ie.c(),ie.m(e,null)))},i:Xe,o:Xe,d(r){r&&f(e),R&&R.d(),Fe(P,r),Fe(z,r),F&&F.d(),Fe(M,r),ie.d(),Be=!1,Vt(Re)}}}function Ue(s){return s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function Kt(s,e,t){let l,a,o,_,h;const{stores:v,actions:b}=Ht,{users:C}=v;kt(s,C,p=>t(10,h=p));let m=[],T=!1,O=null,J=null,G="",D="",U="all";Tt(async()=>{await b.fetchUsers(),await B()});async function B(){t(3,T=!0),t(4,O=null);try{const p=await yt();t(0,m=p.map(N=>{const A=h.find(ae=>ae.id===N.user_id),H=We(N.calling_id);return{...N,user:A,callingName:H?.name||N.calling_id}}))}catch(p){t(4,O=p instanceof Error?p.message:"Failed to load callings")}finally{t(3,T=!1)}}async function be(){if(!J||!G){t(4,O="Please select both a user and a calling");return}t(3,T=!0),t(4,O=null);try{const p=await Mt(J,G,1,D||void 0);p.success?(t(5,J=null),t(6,G=""),t(7,D=""),await B()):t(4,O=p.error||"Failed to assign calling")}catch(p){t(4,O=p instanceof Error?p.message:"Failed to assign calling")}finally{t(3,T=!1)}}async function fe(p){if(confirm("Are you sure you want to release this calling?")){t(3,T=!0),t(4,O=null);try{const N=await zt(p);N.success?await B():t(4,O=N.error||"Failed to release calling")}catch(N){t(4,O=N instanceof Error?N.message:"Failed to release calling")}finally{t(3,T=!1)}}}const L=()=>t(4,O=null);function j(){J=lt(this),t(5,J)}function de(){G=lt(this),t(6,G),t(2,o),t(15,a),t(8,_),t(2,o),t(15,a)}function he(){D=this.value,t(7,D)}function X(){U=lt(this),t(1,U)}const q=p=>fe(p.id);return s.$$.update=()=>{s.$$.dirty[0]&3&&t(9,l=m.filter(p=>U==="all"?!0:We(p.calling_id)?.organization===U)),s.$$.dirty[0]&32768&&t(2,o=a.reduce((p,N)=>{const A=We(N);if(A){const H=A.organization;p[H]||(p[H]=[]),p[H].push(A)}return p},{})),s.$$.dirty[0]&4&&t(8,_=Object.keys(o))},t(15,a=Pt()),[m,U,o,T,O,J,G,D,_,l,h,C,B,be,fe,a,L,j,de,he,X,q]}class Yt extends Dt{constructor(e){super(),At(this,e,Kt,qt,Ct,{},null,[-1,-1])}}function Jt(s){let e,t;return e=new Yt({}),{c(){St(e.$$.fragment)},l(l){Nt(e.$$.fragment,l)},m(l,a){Lt(e,l,a),t=!0},i(l){t||(Ot(e.$$.fragment,l),t=!0)},o(l){wt(e.$$.fragment,l),t=!1},d(l){It(e,l)}}}function Qt(s){let e,t;return e=new Ut({props:{pageTitle:"Manage Callings",$$slots:{default:[Jt]},$$scope:{ctx:s}}}),{c(){St(e.$$.fragment)},l(l){Nt(e.$$.fragment,l)},m(l,a){Lt(e,l,a),t=!0},p(l,[a]){const o={};a&4&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){t||(Ot(e.$$.fragment,l),t=!0)},o(l){wt(e.$$.fragment,l),t=!1},d(l){It(e,l)}}}function Wt(s,e,t){let l;const{stores:{currentUser:a}}=Bt();return kt(s,a,o=>t(1,l=o)),Tt(()=>{l?.role!=="root"&&l?.role!=="admin"&&Rt("/home")}),[a]}class sl extends Dt{constructor(e){super(),At(this,e,Wt,Qt,Ct,{})}}export{sl as component};
