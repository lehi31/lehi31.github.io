import{a as da}from"../chunks/B5LTcAhG.js";import{P as ca,g as Ne,c as va}from"../chunks/Bt1Or0Rf.js";import"../chunks/NZTpNUN0.js";import"../chunks/69_IOA4Y.js";import{p as Te,E as f,aj as ma,ak as ua,f as Me,t as le,g as e,s,c as o,a as Ee,D as a,R as pa,r as l,F as L,am as ba,u as v}from"../chunks/DVz9v3yu.js";import{f as m,a as c,c as fa}from"../chunks/BMBpHE4F.js";import{i as Fe}from"../chunks/B41JjjA1.js";import{P as _a}from"../chunks/BrCjkppM.js";import{o as ga}from"../chunks/CxzQr61Z.js";import{b as we,i as M,e as S,a as ya,s as _}from"../chunks/9VgG7Dnw.js";import{e as ha}from"../chunks/BoUt-3Zs.js";import{s as be,r as Y}from"../chunks/BpnRQ7BG.js";import{b as N}from"../chunks/DSlOdaIK.js";import{p as Ga}from"../chunks/CdEA5IGF.js";import{g as xa}from"../chunks/Brqfef5v.js";import{D as wa}from"../chunks/CAyEiX4M.js";const $a=!1,Da=async()=>(da(ca.EditTempleChallenges,"Edit Temple Challenges"),{}),st=Object.freeze(Object.defineProperty({__proto__:null,load:Da,ssr:$a},Symbol.toStringTag,{value:"Module"}));var Sa=m('<div class="alert alert-danger alert-dismissible fade show" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Pa=m('<div class="alert alert-success alert-dismissible fade show" role="alert"><i class="bi bi-check-circle-fill"></i> <button type="button" class="btn-close" aria-label="Close"></button></div>'),Ca=m('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>'),ka=m('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">Click "Create New Goal" to add your first ward mission goal.</p></div>'),La=m('<span class="badge bg-secondary ms-2">Archived</span>'),Ma=m('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-success" type="button"><i class="bi bi-arrow-counterclockwise"></i> <span class="d-none d-sm-inline">Restore</span></button> <button class="btn btn-sm btn-danger" type="button"><i class="bi bi-trash-fill"></i> <span class="d-none d-sm-inline">Delete</span></button></div>'),Na=m('<div class="btn-group gap-2" role="group"><button class="btn btn-sm btn-outline-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-pencil"></i> <span class="d-none d-sm-inline">Edit</span></button> <button class="btn btn-sm btn-outline-danger" type="button"><i class="bi bi-trash"></i> <span class="d-none d-sm-inline">Archive</span></button></div>'),Ta=m('<tr><td><strong> </strong> <!></td><td> <div class="d-md-none mt-1"><small class="text-muted"> </small></div></td><td class="d-none d-md-table-cell"> </td><td class="d-none d-md-table-cell"> </td><td class="d-none d-lg-table-cell"> </td><td class="d-none d-lg-table-cell"> </td><td class="d-none d-xl-table-cell"><small class="text-muted"> </small></td><td class="text-end"><!></td></tr>'),Ea=m('<div class="table-responsive"><table class="table table-hover align-middle svelte-120cb0p"><thead><tr><th scope="col" class="svelte-120cb0p">Year</th><th scope="col" class="svelte-120cb0p">Period</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Baptisms Goal</th><th scope="col" class="d-none d-md-table-cell svelte-120cb0p">Sealings Goal</th><th scope="col" class="d-none d-lg-table-cell svelte-120cb0p">Ordinances Goal</th><th scope="col" class="d-none d-lg-table-cell svelte-120cb0p">Names Prepared Goal</th><th scope="col" class="d-none d-xl-table-cell svelte-120cb0p">Notes</th><th scope="col" class="text-end svelte-120cb0p">Actions</th></tr></thead><tbody></tbody></table></div>'),Fa=m('<div class="alert alert-danger" role="alert"><small> </small></div>'),Aa=m('<span class="spinner-border spinner-border-sm me-2" role="status"></span>'),Oa=m('<form class="d-flex flex-column gap-3"><!> <div><label class="form-label" for="year">Year *</label> <input type="number" class="form-control" id="year" min="2000" max="2100" required/> <div class="form-text">Calendar year for this goal period</div></div> <div><label class="form-label" for="startDate">Start Date *</label> <input type="date" class="form-control" id="startDate" required/> <div class="form-text">First day of the goal period (inclusive)</div></div> <div><label class="form-label" for="endDate">End Date *</label> <input type="date" class="form-control" id="endDate" required/> <div class="form-text">Last day of the goal period (inclusive)</div></div> <hr/> <div><label class="form-label" for="baptismsGoal">Baptisms Goal</label> <input type="number" class="form-control" id="baptismsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of baptisms (leave empty to display "--")</div></div> <div><label class="form-label" for="familySealingsGoal">Family Sealings Goal</label> <input type="number" class="form-control" id="familySealingsGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of family sealings (leave empty to display "--")</div></div> <div><label class="form-label" for="templeOrdinancesGoal">Temple Ordinances Goal</label> <input type="number" class="form-control" id="templeOrdinancesGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of temple ordinances performed (leave empty to display "--")</div></div> <div><label class="form-label" for="namesPreparedGoal">Names Prepared Goal</label> <input type="number" class="form-control" id="namesPreparedGoal" min="0" placeholder="Leave empty for no goal"/> <div class="form-text">Target number of names prepared for temple ordinances (leave empty to display "--")</div></div> <div><label class="form-label" for="notes">Notes (Optional)</label> <textarea class="form-control" id="notes" rows="3"></textarea> <div class="form-text">Internal notes about this goal period (for admin reference)</div></div> <div class="d-flex justify-content-end gap-2"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"><!> </button></div></form>'),Ra=m('<div class="ward-mission-goals-admin svelte-120cb0p"><div class="d-flex justify-content-between align-items-center mb-4"><h2>Ward Mission Goals Configuration</h2> <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas"><i class="bi bi-plus-circle"></i> Create New Goal</button></div> <!> <!> <!></div> <!>',1);function Ya(fe,_e){Te(_e,!1);const oe=()=>we(We,"$currentUserIsRoot",T),H=()=>we(Ae,"$goals",T),ne=()=>we(Oe,"$loading",T),[T,ge]=ya(),ie=f(),{stores:{data:Ae,loading:Oe},actions:{reload:Re,apiCreate:Ye,apiUpdate:qe,apiDelete:Ue,apiRestore:je,apiHardDelete:Ie}}=xa(),{stores:{currentUserIsRoot:We}}=Ne();let d=f(null),u=f(null),de=null,E=f(!1),x=f(new Date().getFullYear()+1),F=f(""),A=f(""),z=f(null),J=f(null),K=f(null),Q=f(null),V=f("");const ce="goal-form-drawer";ga(async()=>{await Re()});function $e(){de=null,a(E,!1),a(x,new Date().getFullYear()+1),a(F,""),a(A,""),a(z,null),a(J,null),a(K,null),a(Q,null),a(V,""),a(d,null)}function Be(){$e(),a(E,!1)}function He(t){de=t,a(E,!0),a(x,t.year),a(F,t.start_date),a(A,t.end_date),a(z,t.baptisms_goal),a(J,t.family_sealings_goal),a(K,t.temple_ordinances_goal),a(Q,t.names_prepared_goal),a(V,t.notes||""),a(d,null)}function De(){document.querySelector(`[data-bs-target="#${ce}"]`)?.click(),$e()}async function ze(){if(a(d,null),a(u,null),!e(x)||e(x)<2e3||e(x)>2100){a(d,"Please enter a valid year between 2000 and 2100");return}if(!e(F)||!e(A)){a(d,"Please select both start and end dates");return}if(e(F)>e(A)){a(d,"Start date must be before or equal to end date");return}try{const t={year:e(x),start_date:e(F),end_date:e(A),baptisms_goal:e(z),family_sealings_goal:e(J),temple_ordinances_goal:e(K),names_prepared_goal:e(Q),is_active:!0,notes:e(V)||null};e(E)&&de?.id?(await qe(de.id,t),a(u,"Goal updated successfully!")):(await Ye(t),a(u,"Goal created successfully!")),De(),setTimeout(()=>{a(u,null)},3e3)}catch(t){a(d,t instanceof Error?t.message:"Failed to save goal")}}async function Je(t){if(confirm(`Are you sure you want to archive the goal for ${t.year}? You can restore it later.`))try{t.id&&(await Ue(t.id),a(u,"Goal archived successfully!"),setTimeout(()=>{a(u,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to archive goal")}}async function Ke(t){if(confirm(`Are you sure you want to restore the goal for ${t.year}?`))try{t.id&&(await je(t.id),a(u,"Goal restored successfully!"),setTimeout(()=>{a(u,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to restore goal")}}async function Qe(t){if(confirm(`Are you sure you want to PERMANENTLY delete the goal for ${t.year}?

This action cannot be undone and will remove the goal from the database forever.`))try{t.id&&(await Ie(t.id),a(u,"Goal permanently deleted!"),setTimeout(()=>{a(u,null)},3e3))}catch(n){a(d,n instanceof Error?n.message:"Failed to permanently delete goal")}}function Ve(t,n){const[h,p,q]=t.split("-").map(Number),[G,g,P]=n.split("-").map(Number),C=new Date(h,p-1,q),k=new Date(G,g-1,P),r=C.toLocaleDateString("en-US",{month:"short"}),w=k.toLocaleDateString("en-US",{month:"short"});return`${r} to ${w}`}ma(()=>(oe(),H()),()=>{a(ie,oe()?H():H().filter(t=>t.is_active))}),ua(),Fe();var Se=Ra(),ye=Me(Se),he=o(ye),Ge=s(o(he),2);be(Ge,"data-bs-target","#goal-form-drawer"),be(Ge,"aria-controls",ce),l(he);var Pe=s(he,2);{var Xe=t=>{var n=Sa(),h=s(o(n)),p=s(h);l(n),le(()=>_(h,` ${e(d)??""} `)),S("click",p,()=>a(d,null)),c(t,n)};M(Pe,t=>{e(d)&&t(Xe)})}var Ce=s(Pe,2);{var Ze=t=>{var n=Pa(),h=s(o(n)),p=s(h);l(n),le(()=>_(h,` ${e(u)??""} `)),S("click",p,()=>a(u,null)),c(t,n)};M(Ce,t=>{e(u)&&t(Ze)})}var ea=s(Ce,2);{var aa=t=>{var n=Ca();c(t,n)},ta=t=>{var n=fa(),h=Me(n);{var p=G=>{var g=ka();c(G,g)},q=G=>{var g=Ea(),P=o(g),C=s(o(P));ha(C,5,()=>e(ie),k=>k.id,(k,r)=>{var w=Ta();let U;var j=o(w),O=o(j),ve=o(O,!0);l(O);var X=s(O,2);{var me=b=>{var y=La();c(b,y)};M(X,b=>{e(r),v(()=>!e(r).is_active)&&b(me)})}l(j);var R=s(j),Z=o(R),I=s(Z),ee=o(I),ue=o(ee);l(ee),l(I),l(R);var W=s(R),ae=o(W,!0);l(W);var B=s(W),xe=o(B,!0);l(B);var te=s(B),i=o(te,!0);l(te);var $=s(te),pe=o($,!0);l($);var se=s($),ke=o(se),ra=o(ke,!0);l(ke),l(se);var Le=s(se),la=o(Le);{var oa=b=>{var y=Ma(),D=o(y),re=s(D,2);l(y),S("click",D,()=>Ke(e(r))),S("click",re,()=>Qe(e(r))),c(b,y)},na=b=>{var y=Na(),D=o(y);be(D,"data-bs-target","#goal-form-drawer"),be(D,"aria-controls",ce);var re=s(D,2);l(y),S("click",D,()=>He(e(r))),S("click",re,()=>Je(e(r))),c(b,y)};M(la,b=>{e(r),v(()=>!e(r).is_active)?b(oa):b(na,!1)})}l(Le),l(w),le((b,y,D,re,ia)=>{U=va(w,1,"",null,U,{"table-secondary":!e(r).is_active}),_(ve,(e(r),v(()=>e(r).year))),_(Z,`${b??""} `),_(ue,`Goals: ${e(r),v(()=>e(r).baptisms_goal??"--")??""} / ${e(r),v(()=>e(r).family_sealings_goal??"--")??""} /
										${y??""} /
										${D??""}`),_(ae,(e(r),v(()=>e(r).baptisms_goal??"--"))),_(xe,(e(r),v(()=>e(r).family_sealings_goal??"--"))),_(i,re),_(pe,ia),_(ra,(e(r),v(()=>e(r).notes||"â€”")))},[()=>(e(r),v(()=>Ve(e(r).start_date,e(r).end_date))),()=>(e(r),v(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).names_prepared_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).temple_ordinances_goal?.toLocaleString()??"--")),()=>(e(r),v(()=>e(r).names_prepared_goal?.toLocaleString()??"--"))]),c(k,w)}),l(C),l(P),l(g),c(G,g)};M(h,G=>{e(ie),v(()=>e(ie).length===0)?G(p):G(q,!1)},!0)}c(t,n)};M(ea,t=>{ne()?t(aa):t(ta,!1)})}l(ye);var sa=s(ye,2);{let t=pa(()=>e(E)?`Edit Goal for ${e(x)}`:"Create New Goal");wa(sa,{get title(){return e(t)},id:ce,placement:"end",children:(n,h)=>{var p=Oa(),q=o(p);{var G=i=>{var $=Fa(),pe=o($),se=o(pe,!0);l(pe),l($),le(()=>_(se,e(d))),c(i,$)};M(q,i=>{e(d)&&i(G)})}var g=s(q,2),P=s(o(g),2);Y(P),L(2),l(g);var C=s(g,2),k=s(o(C),2);Y(k),L(2),l(C);var r=s(C,2),w=s(o(r),2);Y(w),L(2),l(r);var U=s(r,4),j=s(o(U),2);Y(j),L(2),l(U);var O=s(U,2),ve=s(o(O),2);Y(ve),L(2),l(O);var X=s(O,2),me=s(o(X),2);Y(me),L(2),l(X);var R=s(X,2),Z=s(o(R),2);Y(Z),L(2),l(R);var I=s(R,2),ee=s(o(I),2);ba(ee),L(2),l(I);var ue=s(I,2),W=o(ue),ae=s(W,2),B=o(ae);{var xe=i=>{var $=Aa();c(i,$)};M(B,i=>{ne()&&i(xe)})}var te=s(B);l(ae),l(ue),l(p),le(()=>{P.disabled=e(E),ae.disabled=ne(),_(te,` ${e(E)?"Update Goal":"Create Goal"}`)}),N(P,()=>e(x),i=>a(x,i)),N(k,()=>e(F),i=>a(F,i)),N(w,()=>e(A),i=>a(A,i)),N(j,()=>e(z),i=>a(z,i)),N(ve,()=>e(J),i=>a(J,i)),N(me,()=>e(K),i=>a(K,i)),N(Z,()=>e(Q),i=>a(Q,i)),N(ee,()=>e(V),i=>a(V,i)),S("click",W,De),S("submit",p,Ga(ze)),c(n,p)},$$slots:{default:!0}})}S("click",Ge,Be),c(fe,Se),Ee(),ge()}var qa=m(`<div class="container svelte-1ljfgab"><p class="lead">Configure annual ward mission goals including target dates and goal values. Goals will
			automatically display on the home page for all ward members.</p> <!></div>`);function rt(fe,_e){Te(_e,!1);const{stores:{pageName:oe}}=Ne();oe.set("Ward Mission Goals"),Fe(),_a(fe,{pageTitle:"Manage Ward Mission Goals",children:(H,ne)=>{var T=qa(),ge=s(o(T),2);Ya(ge,{}),l(T),c(H,T)},$$slots:{default:!0}}),Ee()}export{rt as component,st as universal};
