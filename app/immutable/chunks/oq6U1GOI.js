const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{t as P,j as Ht,k as Ft,K as Fa,bb as Wa,L as Wt,Y as $a,ac as Ba,b1 as ja,a_ as za,N as qa,G as ot,p as ia,ai as q,w as W,aj as la,c as p,r as m,a as ca,d as r,E as Y,as as Za,f as at,u as x,D as v,s as M,ap as Qa,R as Ve,F as it}from"./DkHtKwEy.js";import{b as $t,d as Ka,f as C,a as k,c as Va}from"./B190dNFg.js";import{_ as Ga}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{w as $e,g as Bt,r as ua,d as Fe,o as Ja,a as Xa}from"./DUiJaq3B.js";import{p as ve,i as A,e as be,s as ne,b as er,a as tr}from"./DJ88wS1R.js";import{e as da,i as ar}from"./CKczAFpg.js";import{s as yt}from"./u6zvnkK2.js";import{t as wt,s as O,d as fa,p as Be,u as Ke,i as Te,C as jt,A as xt,e as Ne,D as rr,j as Dt}from"./DaplGafF.js";import{i as ma}from"./CrhaOPk_.js";import{S as Ge}from"./BxaCMMS7.js";import{v as zt,D as qt}from"./DQt4a-KR.js";import{b as nr}from"./Cf6qqcEk.js";import{b as sr}from"./DO_vVYAf.js";import{f as or}from"./CgBgMFyF.js";import{R as ir}from"./Bn4yrCdu.js";import{e as We}from"./lsPP6K2W.js";import{a as lr}from"./DAayo0QE.js";import{s as cr,i as ur}from"./CBKkZ0Rh.js";function zn(e,t,a=!1,n=!1,o=!1){var s=e,d="";P(()=>{var f=Fa;if(d===(d=t()??"")){Ht&&Ft();return}if(f.nodes!==null&&(Wa(f.nodes.start,f.nodes.end),f.nodes=null),d!==""){if(Ht){Wt.data;for(var y=Ft(),D=y;y!==null&&(y.nodeType!==$a||y.data!=="");)D=y,y=Ba(y);if(y===null)throw ja(),za;$t(Wt,D),s=qa(y);return}var E=d+"";a?E=`<svg>${E}</svg>`:n&&(E=`<math>${E}</math>`);var T=Ka(E);if((a||n)&&(T=ot(T)),$t(ot(T),T.lastChild),a||n)for(;ot(T);)s.before(ot(T));else s.before(T)}})}function tt(e,t){const a=t*7;return lr(e,a)}function lt(e,t){const a=+wt(e),[n,o]=[+wt(t.start),+wt(t.end)].sort((s,d)=>s-d);return a>=n&&a<=o}function dr(e,t){const a=vr(t);return"formatToParts"in a?mr(a,e):_r(a,e)}const fr={year:0,month:1,day:2,hour:3,minute:4,second:5};function mr(e,t){try{const a=e.formatToParts(t),n=[];for(let o=0;o<a.length;o++){const s=fr[a[o].type];s!==void 0&&(n[s]=parseInt(a[o].value,10))}return n}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function _r(e,t){const a=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}const St={},Zt=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),pr=Zt==="06/25/2014, 00:00:00"||Zt==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function vr(e){return St[e]||(St[e]=pr?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),St[e]}function Ot(e,t,a,n,o,s,d){const f=new Date(0);return f.setUTCFullYear(e,t,a),f.setUTCHours(n,o,s,d),f}const Qt=36e5,br=6e4,kt={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Ut(e,t,a){if(!e)return 0;let n=kt.timezoneZ.exec(e);if(n)return 0;let o,s;if(n=kt.timezoneHH.exec(e),n)return o=parseInt(n[1],10),Kt(o)?-(o*Qt):NaN;if(n=kt.timezoneHHMM.exec(e),n){o=parseInt(n[2],10);const d=parseInt(n[3],10);return Kt(o,d)?(s=Math.abs(o)*Qt+d*br,n[1]==="+"?-s:s):NaN}if(yr(e)){t=new Date(t||Date.now());const d=a?t:hr(t),f=Yt(d,e);return-(a?f:gr(t,f,e))}return NaN}function hr(e){return Ot(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Yt(e,t){const a=dr(e,t),n=Ot(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime();let o=e.getTime();const s=o%1e3;return o-=s>=0?s:1e3+s,n-o}function gr(e,t,a){let o=e.getTime()-t;const s=Yt(new Date(o),a);if(t===s)return t;o-=s-t;const d=Yt(new Date(o),a);return s===d?s:Math.max(s,d)}function Kt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Vt={};function yr(e){if(Vt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Vt[e]=!0,!0}catch{return!1}}function Gt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const _a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ct=36e5,Jt=6e4,wr=2,Q={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:_a};function It(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const a=t.additionalDigits==null?wr:Number(t.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const n=xr(e),{year:o,restDateString:s}=Dr(n.date,a),d=Sr(s,o);if(d===null||isNaN(d.getTime()))return new Date(NaN);if(d){const f=d.getTime();let y=0,D;if(n.time&&(y=kr(n.time),y===null||isNaN(y)))return new Date(NaN);if(n.timeZone||t.timeZone){if(D=Ut(n.timeZone||t.timeZone,new Date(f+y)),isNaN(D))return new Date(NaN)}else D=Gt(new Date(f+y)),D=Gt(new Date(f+y+D));return new Date(f+y+D)}else return new Date(NaN)}function xr(e){const t={};let a=Q.dateTimePattern.exec(e),n;if(a?(t.date=a[1],n=a[3]):(a=Q.datePattern.exec(e),a?(t.date=a[1],n=a[2]):(t.date=null,n=e)),n){const o=Q.timeZone.exec(n);o?(t.time=n.replace(o[1],""),t.timeZone=o[1].trim()):t.time=n}return t}function Dr(e,t){if(e){const a=Q.YYY[t],n=Q.YYYYY[t];let o=Q.YYYY.exec(e)||n.exec(e);if(o){const s=o[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(o=Q.YY.exec(e)||a.exec(e),o){const s=o[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}}return{year:null}}function Sr(e,t){if(t===null)return null;let a,n,o;if(!e||!e.length)return a=new Date(0),a.setUTCFullYear(t),a;let s=Q.MM.exec(e);if(s)return a=new Date(0),n=parseInt(s[1],10)-1,ea(t,n)?(a.setUTCFullYear(t,n),a):new Date(NaN);if(s=Q.DDD.exec(e),s){a=new Date(0);const d=parseInt(s[1],10);return Nr(t,d)?(a.setUTCFullYear(t,0,d),a):new Date(NaN)}if(s=Q.MMDD.exec(e),s){a=new Date(0),n=parseInt(s[1],10)-1;const d=parseInt(s[2],10);return ea(t,n,d)?(a.setUTCFullYear(t,n,d),a):new Date(NaN)}if(s=Q.Www.exec(e),s)return o=parseInt(s[1],10)-1,ta(o)?Xt(t,o):new Date(NaN);if(s=Q.WwwD.exec(e),s){o=parseInt(s[1],10)-1;const d=parseInt(s[2],10)-1;return ta(o,d)?Xt(t,o,d):new Date(NaN)}return null}function kr(e){let t,a,n=Q.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),Tt(t)?t%24*Ct:NaN;if(n=Q.HHMM.exec(e),n)return t=parseInt(n[1],10),a=parseFloat(n[2].replace(",",".")),Tt(t,a)?t%24*Ct+a*Jt:NaN;if(n=Q.HHMMSS.exec(e),n){t=parseInt(n[1],10),a=parseInt(n[2],10);const o=parseFloat(n[3].replace(",","."));return Tt(t,a,o)?t%24*Ct+a*Jt+o*1e3:NaN}return null}function Xt(e,t,a){t=t||0,a=a||0;const n=new Date(0);n.setUTCFullYear(e,0,4);const o=n.getUTCDay()||7,s=t*7+a+1-o;return n.setUTCDate(n.getUTCDate()+s),n}const Cr=[31,28,31,30,31,30,31,31,30,31,30,31],Tr=[31,29,31,30,31,30,31,31,30,31,30,31];function pa(e){return e%400===0||e%4===0&&e%100!==0}function ea(e,t,a){if(t<0||t>11)return!1;if(a!=null){if(a<1)return!1;const n=pa(e);if(n&&a>Tr[t]||!n&&a>Cr[t])return!1}return!0}function Nr(e,t){if(t<1)return!1;const a=pa(e);return!(a&&t>366||!a&&t>365)}function ta(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Tt(e,t,a){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||a!=null&&(a<0||a>=60))}function aa(e,t,a){e=It(e,a);const n=Ut(t,e,!0),o=new Date(e.getTime()-n),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}function Yr(e,t,a){if(typeof e=="string"&&!e.match(_a))return It(e,{...a,timeZone:t});e=It(e,a);const n=Ot(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),o=Ut(t,new Date(n));return new Date(n+o)}const Mt=$e([]);let ue=null;async function Ye(){return ue||(ue=(async()=>{const{data:e,error:t}=await O.from("calendar_events").select("*").order("start_time",{ascending:!0});if(t)throw ue=null,t;const a=e||[];return Mt.set(a),setTimeout(()=>{ue=null},100),a})(),ue)}async function va(e){let t=Bt(Mt);return t.length||(await Ye(),t=Bt(Mt)),t.find(a=>a.id===e)}async function Ir(e){const{data:t,error:a}=await O.from("calendar_events").insert([e]).select();if(a)throw a;return ue=null,await Ye(),t?t[0]:void 0}async function Mr(e){const{data:t,error:a}=await O.from("calendar_events").insert(e).select();if(a)throw a;return ue=null,await Ye(),t??[]}async function ct(e,t){const{data:a,error:n}=await O.from("calendar_events").update(t).eq("id",e).select();if(n)throw n;return ue=null,await Ye(),a?a[0]:void 0}async function Er(e){const t=await va(e),{error:a}=await O.from("calendar_events").delete().eq("id",e);if(a)throw a;t?.attachments&&t.attachments.length>0&&await At(t.attachments),ue=null,await Ye()}const Or={bishop:{approval:"bishop_approval",timestamp:"bishop_approval_at",userId:"bishop_approval_by_user_id"},first_counselor:{approval:"first_counselor_approval",timestamp:"first_counselor_approval_at",userId:"first_counselor_approval_by_user_id"},second_counselor:{approval:"second_counselor_approval",timestamp:"second_counselor_approval_at",userId:"second_counselor_approval_by_user_id"}};async function ba(e,t,a,n){const o=Or[t],s=a?new Date().toISOString():null;return ct(e,{[o.approval]:a,[o.timestamp]:s,[o.userId]:a?n??null:null})}async function ha(e){return ct(e,{is_published:!0})}async function ga(e){return ct(e,{is_published:!1})}async function Ur(e=new Date){const t=e.toISOString(),{data:a,error:n}=await O.from("calendar_events").select("*").lt("start_time",t).eq("event_type","calendar_event");if(n)throw n;if(!a||a.length===0)return{deleted:0,skipped:0};const o=[],s=[];for(const f of a){if(f.recurrence_rule&&(!f.recurrence_end_date||f.recurrence_end_date&&new Date(f.recurrence_end_date)>=e)){s.push(f);continue}o.push(f)}let d=0;if(o.length>0){const f=o.map(y=>y.id).filter(y=>y!==void 0);if(f.length>0){const{data:y,error:D}=await O.from("calendar_events").delete().in("id",f).select("id");if(D)throw D;d=y?.length??0;for(const E of o)E.attachments&&E.attachments.length>0&&await At(E.attachments)}}return ue=null,await Ye(),{deleted:d,skipped:s.length}}async function Ar(e,t){const a=e.name.split(".").pop()||"bin",n=t||"temp",s=`${crypto.randomUUID()}.${a}`,d=`${n}/${s}`,{error:f}=await O.storage.from("event-attachments").upload(d,e,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:{publicUrl:y}}=O.storage.from("event-attachments").getPublicUrl(d);return{id:crypto.randomUUID(),name:e.name,url:y,type:e.type,size:e.size,uploadedAt:new Date().toISOString()}}async function Pr(e){const{error:t}=await O.storage.from("event-attachments").remove([e]);if(t)throw t}function ya(e){const t=e.match(/event-attachments\/(.+)$/);return t?t[1]:""}async function At(e){if(!e||e.length===0)return;const t=e.map(a=>ya(a.url)).filter(a=>a);if(t.length>0){const{error:a}=await O.storage.from("event-attachments").remove(t);if(a)throw a}}const qn=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Ir,createCalendarEvents:Mr,deleteCalendarEvent:Er,deleteEventAttachment:Pr,deleteEventAttachments:At,deletePastCalendarEvents:Ur,extractStoragePath:ya,getAllCalendarEvents:Ye,getCalendarEvent:va,publishCalendarEvent:ha,unpublishCalendarEvent:ga,updateBishopricApproval:ba,updateCalendarEvent:ct,uploadEventAttachment:Ar},Symbol.toStringTag,{value:"Module"})),Lr={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},stakeReliefSociety:{label:"Stake | Relief Society",key:"SRS",sort_index:.1,color_number:5},stakeEldersQuorum:{label:"Stake | Elders Quorum",key:"SEQ",sort_index:.2,color_number:6},stakeYouth:{label:"Stake | Youth",key:"SYO",sort_index:.25,color_number:7},stakeYoungWomen:{label:"Stake | Young Women",key:"SYW",sort_index:.3,color_number:8},stakeYoungMen:{label:"Stake | Young Men",key:"SYM",sort_index:.4,color_number:12},stakePrimary:{label:"Stake | Primary",key:"SPR",sort_index:.5,color_number:16},stakeSundaySchool:{label:"Stake | Sunday School",key:"SSS",sort_index:.6,color_number:21},stakeYsa:{label:"Stake | YSA",key:"SYA",sort_index:.7,color_number:22},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21},ysa:{label:"YSA",key:"YSA",sort_index:18,color_number:22}},Et=Object.values(Lr).sort((e,t)=>e.sort_index-t.sort_index),Zn=e=>e?Et.find(t=>t.key===e):void 0,ra={bishop:"Bishop",first_counselor:"1st Counselor",second_counselor:"2nd Counselor"},Pt=e=>{let t=0;return e.bishop_approval==="YES"&&t++,e.first_counselor_approval==="YES"&&t++,e.second_counselor_approval==="YES"&&t++,t},Rr=e=>Pt(e)>0,Hr=e=>e.is_published?"published":Pt(e)>0?"approved":e.bishop_approval==="NO"||e.first_counselor_approval==="NO"||e.second_counselor_approval==="NO"?"needs_review":"pending";let rt=null;const Fr=e=>e.replace(/<[^>]*>/g,"").toLowerCase(),na=(e,t)=>{if(!t.trim())return!0;const a=t.toLowerCase(),n=(e.title||"").toLowerCase(),o=Fr(e.description||""),s=(e.location||"").toLowerCase();return n.includes(a)||o.includes(a)||s.includes(a)},Qn=(e,t)=>{if(!t.trim()||!e)return sa(e||"");const a=sa(e),n=new RegExp(`(${wa(t)})`,"gi");return a.replace(n,"<mark>$1</mark>")},Kn=(e,t)=>{if(!t.trim()||!e)return e||"";const a=new RegExp(`(${wa(t)})`,"gi");return e.replace(/(<[^>]*>)|([^<]+)/g,(n,o,s)=>o||(s?s.replace(a,"<mark>$1</mark>"):n))},sa=e=>{const t=typeof document<"u"?document.createElement("div"):null;return t?(t.textContent=e,t.innerHTML):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},wa=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Wr=fa()??null,$r=ua(!1),Nt=Wr?.stores.authenticated??$r,Br=()=>{const e=$e(!1),t=$e([]),a=$e([]),n=$e(""),o=$e(""),s=$e(!1),d=(_,g)=>!(!_.is_published||!g&&_.is_public===!1),f=Fe([a,Nt],([_,g])=>{const N=new Date,L=We(tt(N,3),{weekStartsOn:1}),l=_.filter(b=>b?.meta_data?.category?.length).filter(b=>d(b,g)).filter(b=>{if(b.event_type==="calendar_event"){const R=b.start_time?Be(b.start_time):null;return R?lt(R,{start:N,end:L}):!1}return!0}).map(b=>Et.find(R=>R.key===b.meta_data?.category)).filter(b=>b!==void 0);return Array.from(new Set(l))}),y=Fe([n],([_])=>Et.find(g=>g.key===_)),D=Fe([a,n,o,Nt],([_,g,N,L])=>_.filter(l=>l.event_type==="calendar_event").filter(l=>{const b=l?.meta_data;return g&&b?b?.category===g:!0}).filter(l=>na(l,N)).filter(l=>d(l,L)).filter(l=>{const b=l.start_time?Be(l.start_time):null,R=cr();return b?ur(b,R)||b.getTime()>=R.getTime():!1})),E=Fe([a,n,o,Nt],([_,g,N,L])=>_.filter(l=>l.event_type==="announcement").filter(l=>{const b=l?.meta_data;return g&&b?b?.category===g:!0}).filter(l=>na(l,N)).filter(l=>d(l,L))),T=Fe([D],([_])=>_.filter(g=>{const N=g.start_time?Be(g.start_time):null;return N?lt(N,{start:Ke(new Date,{weekStartsOn:1}),end:We(new Date,{weekStartsOn:1})}):!1})),K=()=>{const _=Ke(new Date,{weekStartsOn:1}),g=We(new Date,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},de=Fe([D],([_])=>{const g=tt(Ke(new Date,{weekStartsOn:1}),1),N=We(g,{weekStartsOn:1});return _.filter(L=>{const l=L.start_time?Be(L.start_time):null;return l?lt(l,{start:g,end:N}):!1})}),fe=()=>{const _=tt(Ke(new Date,{weekStartsOn:1}),1),g=We(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},he=Fe([D],([_])=>{const g=tt(Ke(new Date,{weekStartsOn:1}),2),N=We(g,{weekStartsOn:1});return _.filter(L=>{const l=L.start_time?Be(L.start_time):null;return l?lt(l,{start:g,end:N}):!1})}),Ie=()=>{const _=tt(Ke(new Date,{weekStartsOn:1}),2),g=We(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},je=_=>{const g=[],N=new Date,L=new Date;L.setFullYear(N.getFullYear()+1);for(const l of _)if(l.recurrence_rule&&l.start_time&&l.end_time)try{const b=ir.fromString(l.recurrence_rule),R=l.recurrence_end_date?b.all():b.between(N,L,!0),Me=new Date(l.start_time),me=new Date(l.end_time).getTime()-Me.getTime(),V=aa(Me,xt),Z=V.getHours(),oe=V.getMinutes(),Ee=V.getSeconds(),Oe=V.getMilliseconds(),ye=l.recurrence_exceptions||[],S=l.recurrence_overrides||{};R.forEach((G,Ue)=>{const we=aa(G,xt),I=new Date(we);I.setHours(Z,oe,Ee,Oe);const ie=Yr(I,xt),Se=ie,qe=new Date(ie.getTime()+me),ke=Te(G,"yyyy-MM-dd"),U=S[ke];if(ye.includes(ke)&&!U)return;const $={...l,id:void 0,start_time:Se.toISOString(),end_time:qe.toISOString(),meta_data:{category:l.meta_data?.category||"",...l.meta_data,recurring_instance:!0,recurring_parent_id:l.id,recurring_instance_index:Ue}};U&&(U.title!==void 0&&($.title=U.title),U.description!==void 0&&($.description=U.description),U.location!==void 0&&($.location=U.location),U.start_time!==void 0&&($.start_time=U.start_time),U.end_time!==void 0&&($.end_time=U.end_time),U.is_all_day!==void 0&&($.is_all_day=U.is_all_day),U.meta_data!==void 0&&($.meta_data={...$.meta_data,...U.meta_data})),g.push($)})}catch(b){console.error("Failed to expand recurring event:",l.id,b),g.push(l)}else g.push(l);return g},ze=_=>_.length?je(_).map(N=>({...N,start_time:N?.start_time?jt(N.start_time):void 0,end_time:N.end_time?jt(N.end_time):void 0})):[];return rt={stores:{ready:e,data:t,dbData:a,announcements:E,calendarEvents:D,calendarEventsThisWeek:T,calendarEventsNextWeek:de,calendarEventsNextNextWeek:he,currentCategories:f,categoryFilter:n,searchQuery:o,currentCategoryFilter:y,weeksExpanded:s},actions:{reload:async()=>{e.set(!1);const _=await Ye();a.set(ze(_)),e.set(!0)},calendarEventsThisWeekLabel:K,calendarEventsNextWeekLabel:fe,calendarEventsNextNextWeekLabel:Ie}},rt},Vn=()=>rt?.stores&&Object.keys(rt.stores).length>0?rt:Br();var jr=C('<div class="d-flex justify-content-center py-3"><!></div>'),zr=C('<div class="text-muted text-center py-3 small">No messages yet</div>'),qr=C('<div class="message-meta text-muted mt-1 text-end svelte-16a2g1f"><div> </div> <div> </div></div>'),Zr=C('<div class="message-meta text-muted mt-1 text-end svelte-16a2g1f"> </div>'),Qr=C('<i class="bi bi-trash"></i>'),Kr=C('<button type="button" class="btn btn-link btn-sm text-danger p-0 mt-1 delete-btn d-block ms-auto svelte-16a2g1f" title="Delete message"><!></button>'),Vr=C('<div><div><div class="message-text svelte-16a2g1f"> </div> <!> <!></div></div>'),Gr=C('<i class="bi bi-send"></i>'),Jr=C('<div class="messages-container svelte-16a2g1f"><!></div> <div class="input-area d-flex gap-2 pt-2 svelte-16a2g1f"><textarea class="form-control svelte-16a2g1f" rows="2" placeholder="Type a message..."></textarea> <button type="button" class="btn btn-primary btn-sm align-self-end" title="Send message"><!></button></div>',1),Xr=C("<div><!></div>");function oa(e,t){ia(t,!1);let a=ve(t,"comments",24,()=>[]),n=ve(t,"currentUserId",8),o=ve(t,"onSend",8),s=ve(t,"onDelete",8),d=ve(t,"loading",8,!1),f=ve(t,"disabled",8,!1),y=ve(t,"fullHeight",8,!1),D=Y(""),E=Y(!1),T=Y(null),K=Y();function de(){r(K)&&requestAnimationFrame(()=>{Za(K,r(K).scrollTop=r(K).scrollHeight)})}function fe(l){try{return or(Be(l),{addSuffix:!0})}catch{return""}}function he(l){return l.user_id===n()}async function Ie(){const l=r(D).trim();if(!(!l||r(E)||f())){v(E,!0);try{await o()(l),v(D,""),de()}catch(b){console.error("Failed to send message:",b)}finally{v(E,!1)}}}async function je(l){if(!(r(T)||f())){v(T,l);try{await s()(l)}catch(b){console.error("Failed to delete message:",b)}finally{v(T,null)}}}function ze(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),Ie())}q(()=>W(a()),()=>{a().length&&de()}),la(),ma();var c=Xr();let _;var g=p(c);{var N=l=>{var b=jr(),R=p(b);Ge(R,{size:"sm"}),m(b),k(l,b)},L=l=>{var b=Jr(),R=at(b),Me=p(R);{var ge=S=>{var G=zr();k(S,G)},me=S=>{var G=Va(),Ue=at(G);da(Ue,1,a,we=>we.id,(we,I)=>{const ie=Ve(()=>(r(I),x(()=>he(r(I)))));var Se=Vr();let qe;var ke=p(Se);let U;var $=p(ke),ut=p($,!0);m($);var Je=M($,2);{var Ae=J=>{var H=qr(),xe=p(H),Le=p(xe,!0);m(xe);var Ze=M(xe,2),se=p(Ze,!0);m(Ze),m(H),P(Ce=>{ne(Le,(r(I),x(()=>r(I).user_display_name))),ne(se,Ce)},[()=>(r(I),x(()=>fe(r(I).created_at)))]),k(J,H)},Pe=J=>{var H=Zr(),xe=p(H,!0);m(H),P(Le=>ne(xe,Le),[()=>(r(I),x(()=>fe(r(I).created_at)))]),k(J,H)};A(Je,J=>{r(ie)?J(Pe,!1):J(Ae)})}var nt=M(Je,2);{var dt=J=>{var H=Kr(),xe=p(H);{var Le=se=>{Ge(se,{size:"xs"})},Ze=se=>{var Ce=Qr();k(se,Ce)};A(xe,se=>{r(T),r(I),x(()=>r(T)===r(I).id)?se(Le):se(Ze,!1)})}m(H),P(()=>H.disabled=(r(T),r(I),x(()=>r(T)===r(I).id))),be("click",H,()=>je(r(I).id)),k(J,H)};A(nt,J=>{r(ie)&&J(dt)})}m(ke),m(Se),P(()=>{qe=Ne(Se,1,"d-flex mb-2",null,qe,{"justify-content-end":r(ie),"justify-content-start":!r(ie)}),U=Ne(ke,1,"message-bubble svelte-16a2g1f",null,U,{own:r(ie),other:!r(ie)}),ne(ut,(r(I),x(()=>r(I).message)))}),k(we,Se)}),k(S,G)};A(Me,S=>{W(a()),x(()=>a().length===0)?S(ge):S(me,!1)})}m(R),sr(R,S=>v(K,S),()=>r(K));var V=M(R,2),Z=p(V);Qa(Z);var oe=M(Z,2),Ee=p(oe);{var Oe=S=>{Ge(S,{size:"xs"})},ye=S=>{var G=Gr();k(S,G)};A(Ee,S=>{r(E)?S(Oe):S(ye,!1)})}m(oe),m(V),P(S=>{Z.disabled=f()||r(E),oe.disabled=S},[()=>(W(f()),r(E),r(D),x(()=>f()||r(E)||!r(D).trim()))]),nr(Z,()=>r(D),S=>v(D,S)),be("keydown",Z,ze),be("click",oe,Ie),k(l,b)};A(g,l=>{d()?l(N):l(L,!1)})}m(c),P(()=>_=Ne(c,1,"chat-thread d-flex flex-column svelte-16a2g1f",null,_,{"chat-thread-full":y()})),k(e,c),ca()}async function en(e){const{data:t,error:a}=await O.from("event_bishopric_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(a)throw a;return t??[]}async function tn(e,t,a,n){const{data:o,error:s}=await O.from("event_bishopric_comments").insert([{event_id:e,user_id:t,user_display_name:a,message:n}]).select().single();if(s)throw s;return o}async function an(e){const{error:t}=await O.from("event_bishopric_comments").delete().eq("id",e);if(t)throw t}async function rn(e){const{data:t,error:a}=await O.from("event_submitter_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(a)throw a;return t??[]}async function nn(e,t,a,n){const{data:o,error:s}=await O.from("event_submitter_comments").insert([{event_id:e,user_id:t,user_display_name:a,message:n}]).select().single();if(s)throw s;return o}async function sn(e){const{error:t}=await O.from("event_submitter_comments").delete().eq("id",e);if(t)throw t}var on=C("<span> </span>"),ln=C('<div class="alert alert-info mb-0" role="alert">Save this event or announcement before requesting bishopric approvals.</div>'),cn=C('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),un=C('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),dn=C('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-rko3uy"><i class="bi bi-chat-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Bishopric Discussion</span> <small class="text-muted">Private notes between bishopric members</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!> <div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-rko3uy"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Submitter</span> <small class="text-muted"> </small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),fn=C('<small class="text-muted"> </small>'),mn=C("<span><!></span>"),_n=C('<div class="decision-buttons d-grid gap-2 gap-md-3 svelte-rko3uy"><button type="button"><i class="bi bi-check-circle-fill"></i> <div><div class="action-label svelte-rko3uy">Approve</div> <small class="text-muted">Vote to approve</small></div></button> <button type="button"><i class="bi bi-pencil-square"></i> <div><div class="action-label svelte-rko3uy">Request Changes</div> <small class="text-muted">Ask submitter to revise</small></div></button> <button type="button"><i class="bi bi-hourglass-split"></i> <div><div class="action-label svelte-rko3uy">Mark Pending</div> <small class="text-muted">No decision yet</small></div></button> <!></div>'),pn=C("<span> </span>"),vn=C('<div class="list-group-item"><div class="d-flex flex-column gap-2"><div><div class="fw-semibold"> </div> <!></div> <div><!></div></div></div>'),bn=C('<i class="bi bi-globe-americas"></i>'),hn=C('<button type="button" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center gap-2"><!> Unpublish</button>'),gn=C('<i class="bi bi-globe"></i>'),yn=C('<small class="text-muted text-center">At least one approval required to publish</small>'),wn=C('<button type="button" class="btn btn-success w-100 d-flex align-items-center justify-content-center gap-2"><!> Publish to Ward</button> <!>',1),xn=C('<div class="card-footer text-danger small"> </div>'),Dn=C('<!> <div class="card"><div class="list-group list-group-flush"></div> <div class="publish-section d-flex flex-column gap-2 p-3 svelte-rko3uy"><div class="d-flex justify-content-between align-items-center"><span class="text-muted small fw-semibold"> </span></div> <!></div> <!></div>',1),Sn=C('<div class="d-flex flex-column gap-3"><div class="d-flex flex-wrap align-items-center justify-content-between gap-2"><h3 class="h5 mb-0">Bishopric Approval</h3> <!></div> <!></div>');function Gn(e,t){ia(t,!1);const a=()=>er(R,"$currentUserStore",n),[n,o]=tr(),s=Y(),d=Y(),f=Y(),y=Y(),D=Y(),E=Y(),T=Y(),K=Y(),de=Y(),fe=Y(),he=Y(),Ie=Y(),je=Y(),ze=Y();let c=ve(t,"eventItem",12),_=ve(t,"disabled",8,!1),g=ve(t,"reloadEvents",8,null);const N={bishop:"bishopric-bishop",first_counselor:"bishopric-first-counselor",second_counselor:"bishopric-second-counselor"},L={pending:{text:"Pending Approval",class:"bg-warning-subtle text-warning-emphasis"},approved:{text:"Approved",class:"bg-success-subtle text-success-emphasis"},needs_review:{text:"Needs Review",class:"bg-info-subtle text-info-emphasis"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis"}},l=fa()??null,b=ua(rr),R=l?.stores.currentUser??b,Me=["bishop","first_counselor","second_counselor"];let ge=Y(""),me=Y(null),V=Y(!1),Z=Y([]),oe=Y(!1),Ee=!1;const Oe=`bishopric-chat-${zt()}`;let ye=Y(null),S=Y([]),G=Y(!1),Ue=!1;const we=`submitter-chat-${zt()}`;let I=null;Ja(async()=>{typeof window<"u"&&(I=(await Ga(()=>import("./DO0djbQe.js").then(u=>u.o),__vite__mapDeps([0,1]),import.meta.url)).default)});function ie(){if(!I)return;const i=document.getElementById(Oe);if(!i)return;I.getOrCreateInstance(i).show()}function Se(){if(!I)return;const i=document.getElementById(we);if(!i)return;I.getOrCreateInstance(i).show()}function qe(i){const u=N[i];return r(s)?.roles?.includes(u)??!1}function ke(i){if(!i)return null;try{return Te(Be(i),"MMM d, yyyy 'at' h:mm a")}catch(u){return console.error("Failed to format timestamp",u),null}}async function U(){typeof g()=="function"&&await g()()}async function $(i,u){if(c()?.id){v(ge,""),v(me,i);try{const w=await ba(c().id,i,u,r(s)?.id);w&&c({...c(),bishop_approval:w.bishop_approval,first_counselor_approval:w.first_counselor_approval,second_counselor_approval:w.second_counselor_approval,bishop_approval_at:w.bishop_approval_at,first_counselor_approval_at:w.first_counselor_approval_at,second_counselor_approval_at:w.second_counselor_approval_at,bishop_approval_by_user_id:w.bishop_approval_by_user_id,first_counselor_approval_by_user_id:w.first_counselor_approval_by_user_id,second_counselor_approval_by_user_id:w.second_counselor_approval_by_user_id,is_published:w.is_published}),await U()}catch(w){console.error("Failed to update approval",w),v(ge,"Unable to update approval. Please try again.")}finally{v(me,null)}}}async function ut(i){await $(i,null)}async function Je(){if(c()?.id){v(ge,""),v(V,!0);try{const i=r(E)?await ga(c().id):await ha(c().id);i&&c({...c(),is_published:i.is_published}),await U()}catch(i){console.error("Failed to update publish status",i),v(ge,"Unable to update publish status. Please try again.")}finally{v(V,!1)}}}let Ae=null,Pe=null;function nt(){v(Z,[]),Ee=!1,v(oe,!1),v(S,[]),Ue=!1,v(G,!1)}Xa(()=>{J(),se()});function dt(i){const u=i??c()?.id??null;if(Ae||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&O.realtime.setAuth(w),Ae=O.channel(`bishopric-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_bishopric_comments",filter:`event_id=eq.${u}`},()=>{H(u)}).subscribe()}function J(){Ae&&(O.removeChannel(Ae),Ae=null)}async function H(i){const u=i??c()?.id??null;if(u){Ee||v(oe,!0);try{const w=await en(u);u===(c()?.id??null)&&(v(Z,w),Ee=!0)}catch(w){console.error("Failed to load bishopric comments:",w)}finally{u===(c()?.id??null)&&v(oe,!1)}}}async function xe(i){if(!c()?.id||!r(s)?.id)return;const u=r(s).displayName||r(s).username||"Unknown";await tn(c().id,r(s).id,u,i),await H()}async function Le(i){await an(i),await H()}function Ze(i){const u=i??c()?.id??null;if(Pe||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&O.realtime.setAuth(w),Pe=O.channel(`submitter-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${u}`},()=>{Ce(u)}).subscribe()}function se(){Pe&&(O.removeChannel(Pe),Pe=null)}async function Ce(i){const u=i??c()?.id??null;if(u){Ue||v(G,!0);try{const w=await rn(u);u===(c()?.id??null)&&(v(S,w),Ue=!0)}catch(w){console.error("Failed to load submitter comments:",w)}finally{u===(c()?.id??null)&&v(G,!1)}}}async function xa(i){if(!c()?.id||!r(s)?.id)return;const u=r(s).displayName||r(s).username||"Unknown";await nn(c().id,r(s).id,u,i),await Ce()}async function Da(i){await sn(i),await Ce()}function Sa(i){return i==="YES"?{text:"Approved",class:"bg-success-subtle text-success-emphasis"}:i==="NO"?{text:"Requested Changes",class:"bg-info-subtle text-info-emphasis"}:{text:"No Input Yet",class:"bg-secondary-subtle text-secondary-emphasis"}}const ft="btn btn-sm action-btn w-100 text-start d-flex align-items-center gap-2";function ka(i){return`${ft} ${i==="YES"?"btn-success text-white":"btn-outline-success"}`}function Ca(i){return`${ft} ${i==="NO"?"btn-info text-dark":"btn-outline-info"}`}function Ta(i){const u=i==null;return`${ft} ${u?"btn-secondary text-white":"btn-outline-secondary"}`}q(()=>a(),()=>{v(s,a())}),q(()=>W(c()),()=>{v(d,Hr(c()))}),q(()=>r(d),()=>{v(f,L[r(d)])}),q(()=>W(c()),()=>{v(y,Pt(c()))}),q(()=>W(c()),()=>{v(D,Rr(c()))}),q(()=>W(c()),()=>{v(E,c()?.is_published??!1)}),q(()=>W(c()),()=>{v(T,{bishop:c()?.bishop_approval,first_counselor:c()?.first_counselor_approval,second_counselor:c()?.second_counselor_approval})}),q(()=>W(c()),()=>{v(K,{bishop:c()?.bishop_approval_at,first_counselor:c()?.first_counselor_approval_at,second_counselor:c()?.second_counselor_approval_at})}),q(()=>r(s),()=>{v(de,r(s)?.roles?.includes("bishopric-bishop")??!1)}),q(()=>r(s),()=>{v(fe,r(s)?.roles?.includes("bishopric-first-counselor")??!1)}),q(()=>r(s),()=>{v(he,r(s)?.roles?.includes("bishopric-second-counselor")??!1)}),q(()=>(r(de),r(fe),r(he)),()=>{v(Ie,r(de)||r(fe)||r(he))}),q(()=>(r(de),r(fe),r(he)),()=>{v(je,r(de)?Me:Me.filter(i=>i==="bishop"||i==="first_counselor"&&r(fe)||i==="second_counselor"&&r(he)))}),q(()=>(W(c()),r(ye)),()=>{const i=c()?.id??null;i&&i!==r(ye)?(v(ye,i),nt(),J(),se(),H(i),Ce(i),dt(i),Ze(i)):!i&&r(ye)!==null&&(v(ye,null),nt(),J(),se())}),q(()=>W(c()),()=>{v(ze,c()?.meta_data?.submitted_by_name??"Submitter")}),la(),ma();var mt=Sn(),_t=p(mt),Na=M(p(_t),2);{var Ya=i=>{var u=on(),w=p(u,!0);m(u),P(()=>{Ne(u,1,(r(f),x(()=>`badge ${r(f).class}`)),"svelte-rko3uy"),ne(w,(r(f),x(()=>r(f).text)))}),k(i,u)};A(Na,i=>{W(c()),x(()=>c()?.id)&&i(Ya)})}m(_t);var Ia=M(_t,2);{var Ma=i=>{var u=ln();k(i,u)},Ea=i=>{var u=Dn(),w=at(u);{var Oa=B=>{var h=dn(),F=at(h),le=p(F),_e=M(p(le),4),X=p(_e);{var Re=z=>{var re=cn(),He=p(re,!0);m(re),P(()=>ne(He,(r(Z),x(()=>r(Z).length)))),k(z,re)};A(X,z=>{r(Z),x(()=>r(Z).length>0)&&z(Re)})}it(2),m(_e),m(le),m(F);var Qe=M(F,2);{let z=Ve(()=>(W(c()),x(()=>c()?.title||"Event")));qt(Qe,{get id(){return Oe},subtitle:"Discussion",get title(){return r(z)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(re,He)=>{{let De=Ve(()=>(r(s),x(()=>r(s)?.id??-1)));oa(re,{get comments(){return r(Z)},get currentUserId(){return r(De)},onSend:xe,onDelete:Le,get loading(){return r(oe)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}var j=M(Qe,2),ce=p(j),Xe=M(p(ce),2),st=M(p(Xe),2),ht=p(st,!0);m(st),m(Xe);var te=M(Xe,2),ee=p(te);{var ae=z=>{var re=un(),He=p(re,!0);m(re),P(()=>ne(He,(r(S),x(()=>r(S).length)))),k(z,re)};A(ee,z=>{r(S),x(()=>r(S).length>0)&&z(ae)})}it(2),m(te),m(ce),m(j);var pe=M(j,2);{let z=Ve(()=>(W(c()),x(()=>c()?.title||"Event")));qt(pe,{get id(){return we},subtitle:"Discussion with Submitter",get title(){return r(z)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(re,He)=>{{let De=Ve(()=>(r(s),x(()=>r(s)?.id??-1)));oa(re,{get comments(){return r(S)},get currentUserId(){return r(De)},onSend:xa,onDelete:Da,get loading(){return r(G)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}P(()=>{yt(le,"aria-controls",Oe),yt(ce,"aria-controls",we),ne(ht,r(ze))}),be("click",le,ie),be("click",ce,Se),k(B,h)};A(w,B=>{r(Ie)&&B(Oa)})}var Lt=M(w,2),pt=p(Lt);da(pt,5,()=>r(je),ar,(B,h)=>{var F=vn(),le=p(F),_e=p(le),X=p(_e),Re=p(X,!0);m(X);var Qe=M(X,2);{var j=te=>{var ee=fn(),ae=p(ee,!0);m(ee),P(pe=>ne(ae,pe),[()=>(r(K),r(h),x(()=>ke(r(K)[r(h)])))]),k(te,ee)};A(Qe,te=>{r(K),r(h),x(()=>r(K)[r(h)])&&te(j)})}m(_e);var ce=M(_e,2),Xe=p(ce);{var st=te=>{var ee=_n(),ae=p(ee),pe=M(ae,2),z=M(pe,2),re=M(z,2);{var He=De=>{var et=mn(),gt=p(et);Ge(gt,{size:"xs"}),m(et),k(De,et)};A(re,De=>{r(me)===r(h)&&De(He)})}m(ee),P((De,et,gt)=>{Ne(ae,1,De,"svelte-rko3uy"),ae.disabled=_()||r(me)===r(h),Ne(pe,1,et,"svelte-rko3uy"),pe.disabled=_()||r(me)===r(h),Ne(z,1,gt,"svelte-rko3uy"),z.disabled=_()||r(me)===r(h)},[()=>Dt((r(T),r(h),x(()=>ka(r(T)[r(h)])))),()=>Dt((r(T),r(h),x(()=>Ca(r(T)[r(h)])))),()=>Dt((r(T),r(h),x(()=>Ta(r(T)[r(h)]))))]),be("click",ae,()=>$(r(h),"YES")),be("click",pe,()=>$(r(h),"NO")),be("click",z,()=>ut(r(h))),k(te,ee)},ht=te=>{const ee=Ve(()=>(r(T),r(h),x(()=>Sa(r(T)[r(h)]))));var ae=pn(),pe=p(ae,!0);m(ae),P(()=>{Ne(ae,1,(W(r(ee)),x(()=>`badge ${r(ee).class}`)),"svelte-rko3uy"),ne(pe,(W(r(ee)),x(()=>r(ee).text)))}),k(te,ae)};A(Xe,te=>{r(h),x(()=>qe(r(h)))?te(st):te(ht,!1)})}m(ce),m(le),m(F),P(()=>ne(Re,(W(ra),r(h),x(()=>ra[r(h)])))),k(B,F)}),m(pt);var vt=M(pt,2),bt=p(vt),Rt=p(bt),Ua=p(Rt);m(Rt),m(bt);var Aa=M(bt,2);{var Pa=B=>{var h=hn(),F=p(h);{var le=X=>{Ge(X,{size:"xs"})},_e=X=>{var Re=bn();k(X,Re)};A(F,X=>{r(V)?X(le):X(_e,!1)})}it(),m(h),P(()=>h.disabled=_()||r(V)),be("click",h,Je),k(B,h)},La=B=>{var h=wn(),F=at(h),le=p(F);{var _e=j=>{Ge(j,{size:"xs"})},X=j=>{var ce=gn();k(j,ce)};A(le,j=>{r(V)?j(_e):j(X,!1)})}it(),m(F);var Re=M(F,2);{var Qe=j=>{var ce=yn();k(j,ce)};A(Re,j=>{r(D)||j(Qe)})}P(()=>{F.disabled=_()||r(V)||!r(D),yt(F,"title",r(D)?"":"At least one approval required to publish")}),be("click",F,Je),k(B,h)};A(Aa,B=>{r(E)?B(Pa):B(La,!1)})}m(vt);var Ra=M(vt,2);{var Ha=B=>{var h=xn(),F=p(h,!0);m(h),P(()=>ne(F,r(ge))),k(B,h)};A(Ra,B=>{r(ge)&&B(Ha)})}m(Lt),P(()=>ne(Ua,`Approvals: ${r(y)??""} of 3`)),k(i,u)};A(Ia,i=>{W(c()),x(()=>!c()?.id)?i(Ma):i(Ea,!1)})}m(mt),k(e,mt),ca(),o()}export{Gn as B,Lr as C,Et as D,Hr as a,Zn as b,Mr as c,Ur as d,tt as e,Yr as f,Vn as g,zn as h,Pt as i,Qn as j,Kn as k,ya as l,Pr as m,Er as n,va as o,ct as p,Ir as q,rn as r,oa as s,aa as t,Ar as u,sn as v,nn as w,qn as x};
