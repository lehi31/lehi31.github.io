import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as me,t as Z,a as ge,s as n,c as a,r as t,ai as Q,D as T,g as e,E as F,aj as Ce,u as x,i as Qt,as as tt,R as at,f as oe,w as B,an as Ke,ao as Je,F as nt}from"./CPOcesE7.js";import{s as b,p as te,i as J,b as he,e as Pe,a as Qe,k as Ft}from"./opPvMm1W.js";import{f as R,a as p,t as rt,c as we}from"./YsHTGu5k.js";import{s as ie,r as Et,b as Xt,e as ft}from"./BbABeypO.js";import{i as pe}from"./C2Q_9cr2.js";import{W as ye,S as Te,c as De,b as Xe,t as Zt,f as le,G as ea,H as ta}from"./BYdrJMrX.js";import{w as Fe,g as It,d as be,o as yt,a as aa}from"./DHXte27T.js";import{e as Se,i as Me}from"./DAwrR-3T.js";import{b as ra}from"./DLuN8Kcu.js";import{v as Ot,D as Rt}from"./rhFH9gGh.js";import{b as jt,a as na}from"./QDlYjqxz.js";import{c as sa,d as oa,a as qt,V as ia}from"./Bai7YTd4.js";import{g as la}from"./CcllmPsB.js";import{i as da,l as Gt}from"./DVeQr_u3.js";import{p as ue}from"./C-NkL2OA.js";import{S as Vt}from"./8kysBD4u.js";import{b as ca}from"./C34nsrD6.js";var va=R('<div class="card"><div class="card-header">Ward Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Chapel Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small">Hours</li> <li class="list-group-item"><span class="d-block fw-lighter"><strong>Sacrament</strong> </span> <span class="d-block fw-lighter"><strong>2nd Hour</strong> </span></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function Cn(l,s){me(s,!1),pe();var r=va(),v=n(a(r),2),k=n(a(v),2),u=a(k),m=a(u),w=n(m,2),S=n(w,2);t(u),t(k);var D=n(k,4),$=a(D),g=n(a($));t($);var c=n($,2),M=n(a(c));t(c),t(D);var A=n(D,2),j=a(A);t(A);var f=n(A,2),E=a(f),d=n(E),_=a(d,!0);t(d),t(f);var o=n(f,2),i=a(o);t(o);var O=n(o,2),h=a(O),y=n(h),C=a(y,!0);t(y),t(O),t(v),t(r),Z((q,I)=>{ie(u,"href",ye.chapel.mapLink),b(m,`${ye.chapel.address.street??""}, ${ye.chapel.address.city??""}`),b(w,` ${ye.chapel.address.state??""}
				${ye.chapel.address.zip??""}`),b(S,` ${ye.chapel.address.country??""}`),b(g,`:
				${ye.meetingTimes.sacrament.start??""} to
				${ye.meetingTimes.sacrament.end??""}`),b(M,`:
				${ye.meetingTimes.secondHour.start??""} to
				${ye.meetingTimes.secondHour.end??""}`),b(j,`${ye.contacts.executiveSecretary.purpose??""}:`),b(E,`${ye.contacts.executiveSecretary.name??""} | `),ie(d,"href",`sms:${q??""}`),b(_,ye.contacts.executiveSecretary.phone),b(i,`${ye.contacts.bishop.purpose??""}:`),b(h,`${ye.contacts.bishop.name??""} | `),ie(y,"href",`sms:${I??""}`),b(C,ye.contacts.bishop.phone)},[()=>ye.contacts.executiveSecretary.phone.replace(/-/g,""),()=>ye.contacts.bishop.phone.replace(/-/g,"")]),p(l,r),ge()}var ua=R('<div class="card"><div class="card-header">Stake Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function On(l,s){me(s,!1),pe();var r=ua(),v=n(a(r),2),k=n(a(v),2),u=a(k),m=a(u),w=n(m,2),S=n(w,2);t(u),t(k);var D=n(k,2),$=a(D);t(D);var g=n(D,2),c=a(g),M=n(c),A=a(M,!0);t(M),t(g);var j=n(g,2),f=a(j);t(j);var E=n(j,2),d=a(E),_=n(d),o=a(_,!0);t(_),t(E),t(v),t(r),Z((i,O)=>{ie(u,"href",Te.building.mapLink),b(m,`${Te.building.address.street},`),b(w,` ${Te.building.address.city}, ${Te.building.address.state}
				${Te.building.address.zip}`),b(S,` ${Te.building.address.country}`),b($,`${Te.contacts.templeRecommend.purpose}:`),b(c,`${Te.contacts.templeRecommend.name} | `),ie(M,"href",`sms:${i??""}`),b(A,Te.contacts.templeRecommend.phone),b(f,`${Te.contacts.president.purpose}:`),b(d,`${Te.contacts.president.name} | `),ie(_,"href",`sms:${O??""}`),b(o,Te.contacts.president.phone)},[()=>Te.contacts.templeRecommend.phone.replace(/-/g,""),()=>Te.contacts.president.phone.replace(/-/g,"")]),p(l,r),ge()}var _a=R('<div class="card"><div class="card-header"> </div> <div class="card-body"><figure class="text-center"><blockquote class="blockquote"><p> </p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title"> </cite></figcaption></figure></div></div>');function Rn(l,s){me(s,!1),pe();var r=_a(),v=a(r),k=a(v);t(v);var u=n(v,2),m=a(u),w=a(m),S=a(w),D=a(S,!0);t(S),t(w);var $=n(w,2),g=a($),c=a(g,!0);t(g),t($),t(m),t(u),t(r),Z(()=>{b(k,`Ward Theme ${ye.theme.year??""}`),b(D,ye.theme.scripture.text),b(c,ye.theme.scripture.reference)}),p(l,r),ge()}var ma=R('<small class="fw-lighter text-muted"> </small>'),ga=R('<div class="invalid-feedback d-block"> </div>'),pa=R('<div class="d-flex flex-column gap-1"><label> </label> <!> <input type="number" min="0" max="999"/> <!></div>');function dt(l,s){let r=te(s,"count",12,0),v=te(s,"label",8,"Count"),k=te(s,"description",8,""),u=te(s,"error",8,"");var m=pa(),w=a(m),S=a(w,!0);t(w);var D=n(w,2);{var $=j=>{var f=ma(),E=a(f,!0);t(f),Z(()=>b(E,k())),p(j,f)};J(D,j=>{k()&&j($)})}var g=n(D,2);Et(g);let c;var M=n(g,2);{var A=j=>{var f=ga(),E=a(f,!0);t(f),Z(()=>b(E,u())),p(j,f)};J(M,j=>{u()&&j(A)})}t(m),Z(()=>{ie(w,"for",v()),b(S,v()),ie(g,"id",v()),c=De(g,1,"form-control",null,c,{"is-invalid":!!u()})}),jt(g,r),p(l,m)}const Ut=Fe([]);let kt=!1;async function Bt(){if(kt)return It(Ut);kt=!0;try{const{data:l,error:s}=await Xe.from("temple_challenge_entries").select("*");if(s)throw console.error("[API] Get temple entries failed:",s),new Error(`Failed to load entries: ${s.message}`);const r=l||[];return Ut.set(r),setTimeout(()=>kt=!1,800),r}catch(l){throw kt=!1,console.error("[API] Unexpected error fetching temple entries:",l),l}}async function fa(l){try{const{data:s,error:r}=await Xe.from("temple_challenge_entries").insert([l]).select();if(r)throw console.error("[API] Create temple entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await Bt(),console.log("[API] Temple entry created successfully"),s?s[0]:void 0}catch(s){throw console.error("[API] Unexpected error creating temple entry:",s),s}}async function ya(l,s){const{data:r,error:v}=await Xe.from("temple_challenge_entries").update(s).eq("id",l).select();if(v)throw v;return await Bt(),r?r[0]:void 0}async function ba(l){const{error:s}=await Xe.from("temple_challenge_entries").delete().eq("id",l);if(s)throw s;await Bt()}function ha(l,s,r){return l.filter(v=>v.date>=s&&v.date<=r)}function wa(l){return l.reduce((s,r)=>s+(r.baptism_ordinances_count??0)+(r.confirmation_ordinances_count??0)+(r.initiatory_ordinances_count??0)+(r.endowment_ordinances_count??0)+(r.sealing_ordinances_count??0),0)}function xa(l){return l.reduce((s,r)=>s+(r.prepared_names_count??0),0)}let gt=null;const ka=()=>{const l=Fe(!1),s=Fe(!1),r=Fe([]),v=be([r],([f])=>{const E=f.reduce((_,o)=>{const i=new Date(o.date),O=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`;return(_[O]||=[]).push(o),_},{}),d=Object.entries(E).sort(([_],[o])=>new Date(o).getTime()-new Date(_).getTime()).map(([_,o])=>[_,o.sort((i,O)=>new Date(O.created_at??"").getTime()-new Date(i.created_at??"").getTime())]);return Object.fromEntries(d)}),k=be([r],([f])=>{const E=f.reduce((_,o)=>((_[o.date]||=[]).push(o),_),{}),d=Object.entries(E).sort(([_],[o])=>new Date(o).getTime()-new Date(_).getTime()).map(([_,o])=>[_,o.sort((i,O)=>new Date(O.created_at??"").getTime()-new Date(i.created_at??"").getTime())]);return Object.fromEntries(d)}),u=be([r],([f])=>{const E=f.reduce((_,o)=>{const O=`${new Date(o.date).getFullYear()}`;return(_[O]||=[]).push(o),_},{}),d=Object.entries(E).sort(([_],[o])=>parseInt(o)-parseInt(_)).map(([_,o])=>[_,o.sort((i,O)=>new Date(O.created_at??"").getTime()-new Date(i.created_at??"").getTime())]);return Object.fromEntries(d)}),m=be(r,f=>f.reduce((E,d)=>({baptism_ordinances_count:E.baptism_ordinances_count+(d.baptism_ordinances_count??0),confirmation_ordinances_count:E.confirmation_ordinances_count+(d.confirmation_ordinances_count??0),initiatory_ordinances_count:E.initiatory_ordinances_count+(d.initiatory_ordinances_count??0),endowment_ordinances_count:E.endowment_ordinances_count+(d.endowment_ordinances_count??0),sealing_ordinances_count:E.sealing_ordinances_count+(d.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),w=be(k,f=>{const E={};for(const[d,_]of Object.entries(f))E[d]=_.reduce((o,i)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(i.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(i.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(i.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(i.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(i.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(i.sealing_ordinances_count??0),date:d,created_at:o.created_at||i.created_at}),{});return E}),S=be(v,f=>{const E={};for(const[d,_]of Object.entries(f))E[d]=_.reduce((o,i)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(i.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(i.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(i.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(i.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(i.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(i.sealing_ordinances_count??0),date:o.date||i.date,created_at:o.created_at||i.created_at}),{});return E}),D=be(u,f=>{const E={};for(const[d,_]of Object.entries(f))E[d]=_.reduce((o,i)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(i.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(i.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(i.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(i.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(i.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(i.sealing_ordinances_count??0),date:o.date||i.date,created_at:o.created_at||i.created_at}),{});return E}),$=be(r,f=>f.reduce((E,d)=>E+(d.baptism_ordinances_count??0)+(d.confirmation_ordinances_count??0)+(d.initiatory_ordinances_count??0)+(d.endowment_ordinances_count??0)+(d.sealing_ordinances_count??0),0)),g=be(r,f=>f.reduce((E,d)=>E+(d.prepared_names_count??0),0));return gt={stores:{ready:l,loading:s,data:r,groupedByDate:k,groupedByMonth:v,groupedByYear:u,detailTotals:m,detailTotalsByDay:w,detailTotalsByMonth:S,detailTotalsByYear:D,totalOrdinancesPerformed:$,totalNamesPrepared:g},actions:{reload:async()=>{const f=await Bt();f?.length&&r.set(f)},apiCreate:async f=>{await fa(f)},apiUpdate:async(f,E)=>{await ya(f,E)},apiDelete:async f=>{await ba(f)}}},gt},Tt=()=>gt?.stores&&Object.keys(gt.stores).length>0?gt:ka(),ct=l=>oa().required(`${l} is required`).integer(`${l} must be a whole number`).min(0,`${l} cannot be negative`).max(999,`${l} cannot exceed 999`),$a=sa().shape({date:qt().required("Date is required"),entry_type:qt().required("Activity type is required"),prepared_names_count:ct("Name preparation count"),baptism_ordinances_count:ct("Baptism count"),confirmation_ordinances_count:ct("Confirmation count"),initiatory_ordinances_count:ct("Initiatory count"),endowment_ordinances_count:ct("Endowment count"),sealing_ordinances_count:ct("Sealing count")});function Sa(){const l=Fe({});async function s(v){try{return await $a.validate(v,{abortEarly:!1}),l.set({}),!0}catch(k){if(k instanceof ia){const u={};return k.inner.forEach(m=>{m.path&&(u[m.path]=m.message)}),l.set(u),!1}return!1}}function r(){l.set({})}return{validationErrors:l,validate:s,clearErrors:r}}function Ea(l){return da(l,{weekStartsOn:1})}function Ba(l){return Zt(l).getFullYear()}var Ta=R('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),Da=R('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),Ma=R('<div class="invalid-feedback d-block"> </div>'),Ca=R("<option> </option>"),Oa=R('<div class="invalid-feedback d-block"> </div>'),Ra=R('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" required/> <!></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select></select> <!></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function Ia(l,s){me(s,!1);const r=()=>he(c,"$validationErrors",v),[v,k]=Qe(),u=F();let m=te(s,"drawerId",8,""),w=te(s,"minDate",8,null),S=te(s,"maxDate",8,null);const{stores:{loading:D},actions:{apiCreate:$,reload:g}}=Tt(),{validationErrors:c,validate:M,clearErrors:A}=Sa(),j=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function f(){const L=le(new Date,"yyyy-MM-dd");return!w()||!S()||L>=w()&&L<=S()?L:L<w()?w():S()}const E={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:f(),approved:!0};let d=F({...E}),_=F({message:"",type:null});const o=()=>{T(d,{...E,date:f()}),T(_,{message:"",type:null}),A();const L=`[data-bs-target="#${m()}"]`,H=document.querySelector(L);H&&H.click()},i=()=>{window.location.reload()},O=()=>{y()},h=()=>{T(_,{message:"",type:null})},y=async()=>{if(await M(e(d)))try{Ft(D,!0),T(_,{message:"",type:null}),await $({prepared_names_count:e(d).prepared_names_count,baptism_ordinances_count:e(d).baptism_ordinances_count,confirmation_ordinances_count:e(d).confirmation_ordinances_count,initiatory_ordinances_count:e(d).initiatory_ordinances_count,endowment_ordinances_count:e(d).endowment_ordinances_count,sealing_ordinances_count:e(d).sealing_ordinances_count,entry_type:e(d).entry_type,date:e(d).date,created_at:new Date().toISOString(),approved:!0}),await g(),o()}catch(H){console.error("[WardGoalEntryForm] Submission failed:",H),H instanceof Error?H.message.includes("expired")||H.message.includes("JWT")?T(_,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):H.message.includes("fetch")||H.message.includes("network")?T(_,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):T(_,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):T(_,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{Ft(D,!1)}};Q(()=>e(d),()=>{T(u,(e(d).prepared_names_count||0)+(e(d).baptism_ordinances_count||0)+(e(d).confirmation_ordinances_count||0)+(e(d).initiatory_ordinances_count||0)+(e(d).endowment_ordinances_count||0)+(e(d).sealing_ordinances_count||0))}),Ce(),pe();var C=Ra(),q=a(C);{var I=L=>{var H=Da(),xe=a(H),Ge=n(a(xe),2),Oe=a(Ge),fe=a(Oe);{var Ue=je=>{var ze=rt("⚠️ Session Issue");p(je,ze)},Ye=je=>{var ze=we(),vt=oe(ze);{var ut=Le=>{var X=rt("⚠️ Connection Problem");p(Le,X)},xt=Le=>{var X=rt("⚠️ Something Went Wrong");p(Le,X)};J(vt,Le=>{e(_),x(()=>e(_).type==="network")?Le(ut):Le(xt,!1)},!0)}p(je,ze)};J(fe,je=>{e(_),x(()=>e(_).type==="expired")?je(Ue):je(Ye,!1)})}t(Oe);var We=n(Oe,2),it=a(We,!0);t(We);var lt=n(We,2),et=a(lt);{var ht=je=>{var ze=Ta();Pe("click",ze,O),p(je,ze)};J(et,je=>{e(_),x(()=>e(_).type==="network")&&je(ht)})}var wt=n(et,2);t(lt),t(Ge);var Ct=n(Ge,2);t(xe),t(H),Z(()=>{b(it,(e(_),x(()=>e(_).message))),De(wt,1,`btn btn-${e(_),x(()=>e(_).type==="network"?"secondary":"primary")??""}`)}),Pe("click",wt,i),Pe("click",Ct,h),p(L,H)};J(q,L=>{e(_),x(()=>e(_).type)&&L(I)})}var N=n(q,4),G=n(a(N),2),U=a(G);{var K=L=>{var H=rt();Z(()=>b(H,`Select a date within the goal period (${w()??""} to ${S()??""})`)),p(L,H)},ee=L=>{var H=rt("When was this activity done?");p(L,H)};J(U,L=>{w()&&S()?L(K):L(ee,!1)})}t(G);var P=n(G,2);Et(P);let W;var Y=n(P,2);{var ae=L=>{var H=Ma(),xe=a(H,!0);t(H),Z(()=>b(xe,(r(),x(()=>r().date)))),p(L,H)};J(Y,L=>{r(),x(()=>r().date)&&L(ae)})}t(N);var se=n(N,2),V=n(a(se),4);Z(()=>{e(d),Qt(()=>{r()})});let z;Se(V,5,()=>j,Me,(L,H)=>{var xe=Ca(),Ge=a(xe,!0);t(xe);var Oe={};Z(()=>{b(Ge,e(H)),Oe!==(Oe=e(H))&&(xe.value=(xe.__value=e(H))??"")}),p(L,xe)}),t(V);var re=n(V,2);{var de=L=>{var H=Oa(),xe=a(H,!0);t(H),Z(()=>b(xe,(r(),x(()=>r().entry_type)))),p(L,H)};J(re,L=>{r(),x(()=>r().entry_type)&&L(de)})}t(se);var ne=n(se,2);{let L=at(()=>(r(),x(()=>r().prepared_names_count||"")));dt(ne,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get error(){return e(L)},get count(){return e(d).prepared_names_count},set count(H){tt(d,e(d).prepared_names_count=H)},$$legacy:!0})}var ce=n(ne,2);{let L=at(()=>(r(),x(()=>r().baptism_ordinances_count||"")));dt(ce,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get error(){return e(L)},get count(){return e(d).baptism_ordinances_count},set count(H){tt(d,e(d).baptism_ordinances_count=H)},$$legacy:!0})}var _e=n(ce,2);{let L=at(()=>(r(),x(()=>r().confirmation_ordinances_count||"")));dt(_e,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get error(){return e(L)},get count(){return e(d).confirmation_ordinances_count},set count(H){tt(d,e(d).confirmation_ordinances_count=H)},$$legacy:!0})}var ke=n(_e,2);{let L=at(()=>(r(),x(()=>r().initiatory_ordinances_count||"")));dt(ke,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get error(){return e(L)},get count(){return e(d).initiatory_ordinances_count},set count(H){tt(d,e(d).initiatory_ordinances_count=H)},$$legacy:!0})}var $e=n(ke,2);{let L=at(()=>(r(),x(()=>r().endowment_ordinances_count||"")));dt($e,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get error(){return e(L)},get count(){return e(d).endowment_ordinances_count},set count(H){tt(d,e(d).endowment_ordinances_count=H)},$$legacy:!0})}var Ee=n($e,2);{let L=at(()=>(r(),x(()=>r().sealing_ordinances_count||"")));dt(Ee,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get error(){return e(L)},get count(){return e(d).sealing_ordinances_count},set count(H){tt(d,e(d).sealing_ordinances_count=H)},$$legacy:!0})}var Be=n(Ee,2),Ae=n(a(Be),2),Ve=a(Ae,!0);t(Ae),t(Be);var Ze=n(Be,2),Ne=a(Ze),qe=n(Ne,2);t(Ze),t(C),Z(()=>{W=De(P,1,"form-control",null,W,{"is-invalid":r().date}),ie(P,"min",w()),ie(P,"max",S()),z=De(V,1,"form-select form-control-sm",null,z,{"is-invalid":r().entry_type}),b(Ve,e(u))}),jt(P,()=>e(d).date,L=>tt(d,e(d).date=L)),Xt(V,()=>e(d).entry_type,L=>tt(d,e(d).entry_type=L)),Pe("click",Ne,o),Pe("click",qe,y),p(l,C),ge(),k()}var ja=R('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),Pa=R('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),Aa=R('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function Dt(l,s){me(s,!1);let r=te(s,"entry",8),v=te(s,"showSubmittedData",8,!1),k=te(s,"showType",8,!1);pe();var u=Aa(),m=a(u);{var w=N=>{var G=ja(),U=a(G),K=a(U,!0);t(U),t(G),Z(()=>b(K,(B(r()),x(()=>r()?.entry_type)))),p(N,G)};J(m,N=>{k()&&N(w)})}var S=n(m,2),D=n(a(S),2),$=a(D,!0);t(D),t(S);var g=n(S,2),c=n(a(g),2),M=a(c,!0);t(c),t(g);var A=n(g,2),j=n(a(A),2),f=a(j,!0);t(j),t(A);var E=n(A,2),d=n(a(E),2),_=a(d,!0);t(d),t(E);var o=n(E,2),i=n(a(o),2),O=a(i,!0);t(i),t(o);var h=n(o,2),y=n(a(h),2),C=a(y,!0);t(y),t(h);var q=n(h,2);{var I=N=>{var G=Pa(),U=n(a(G),2),K=a(U),ee=a(K,!0);t(K);var P=n(K,2),W=a(P,!0);t(P),t(U),t(G),Z((Y,ae)=>{b(ee,Y),b(W,ae)},[()=>(B(Gt),B(r()),x(()=>Gt(new Date(r().created_at),{addSuffix:!0}))),()=>(B(le),B(r()),x(()=>le(new Date(r().created_at),"MMMM d, yyyy 'at' h:mm a")))]),p(N,G)};J(q,N=>{B(v()),B(r()),x(()=>v()&&r()?.created_at)&&N(I)})}t(u),Z(()=>{b($,(B(r()),x(()=>r()?.prepared_names_count))),b(M,(B(r()),x(()=>r()?.baptism_ordinances_count))),b(f,(B(r()),x(()=>r()?.confirmation_ordinances_count))),b(_,(B(r()),x(()=>r()?.initiatory_ordinances_count))),b(O,(B(r()),x(()=>r()?.endowment_ordinances_count))),b(C,(B(r()),x(()=>r()?.sealing_ordinances_count)))}),p(l,u),ge()}var Na=R('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Wa(l,s){me(s,!1);const r=F();let v=te(s,"entry",8),k=te(s,"date",8);Q(()=>B(v()),()=>{T(r,v().baptism_ordinances_count+v().confirmation_ordinances_count+v().initiatory_ordinances_count+v().endowment_ordinances_count+v().sealing_ordinances_count)}),Ce(),pe();var u=Na(),m=oe(u),w=a(m),S=a(w,!0);t(w);var D=n(w,2);t(m);var $=n(m,2),g=a($),c=a(g),M=a(c);Dt(M,{get entry(){return v()}});var A=n(M,2),j=a(A),f=n(a(j),2),E=a(f,!0);t(f),t(j),t(A),t(c),t(g),t($),Z((d,_)=>{b(S,d),b(D,` ${_??""}`),b(E,e(r))},[()=>(B(le),B(ue),B(k()),x(()=>le(ue(k(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(le),B(ue),B(k()),x(()=>le(ue(k(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(l,u),ge()}var Fa=R('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function qa(l,s){me(s,!1);let r=te(s,"entry",8),v=te(s,"date",8),k=F(0);Q(()=>B(r()),()=>{T(k,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Ce(),pe();var u=Fa(),m=oe(u),w=a(m),S=a(w,!0);t(w);var D=n(w,2);t(m);var $=n(m,2),g=a($),c=a(g),M=a(c);Dt(M,{get entry(){return r()}});var A=n(M,2),j=a(A),f=n(a(j),2),E=a(f,!0);t(f),t(j),t(A),t(c),t(g),t($),Z((d,_)=>{b(S,d),b(D,` ${_??""}`),b(E,e(k))},[()=>(B(le),B(ue),B(v()),x(()=>le(ue(v(),"yyyy-MM",new Date),"yyyy"))),()=>(B(le),B(ue),B(v()),x(()=>le(ue(v(),"yyyy-MM",new Date),"MMMM")))]),p(l,u),ge()}var Ga=R('<div> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Ua(l,s){me(s,!1);let r=te(s,"entry",8),v=te(s,"date",8),k=F(0);Q(()=>B(r()),()=>{T(k,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Ce(),pe();var u=Ga(),m=oe(u),w=a(m,!0);t(m);var S=n(m,2),D=a(S),$=a(D),g=a($);Dt(g,{get entry(){return r()}});var c=n(g,2),M=a(c),A=n(a(M),2),j=a(A,!0);t(A),t(M),t(c),t($),t(D),t(S),Z(()=>{b(w,v()),b(j,e(k))}),p(l,u),ge()}var Ya=R('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),La=R('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function Ja(l,s){me(s,!1);let r=te(s,"entries",8),v=te(s,"date",8);pe();var k=La(),u=oe(k),m=a(u),w=a(m,!0);t(m);var S=n(m,2);t(u);var D=n(u,2);Se(D,5,r,Me,($,g)=>{var c=Ya(),M=a(c),A=a(M);Dt(A,{get entry(){return e(g)},showSubmittedData:!0,showType:!0}),t(M),t(c),p($,c)}),t(D),Z(($,g)=>{b(w,$),b(S,` ${g??""}`)},[()=>(B(le),B(ue),B(v()),x(()=>le(ue(v(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(le),B(ue),B(v()),x(()=>le(ue(v(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(l,k),ge()}var Va=R('<div class="d-flex flex-column gap-3"><!></div>'),za=R('<div class="d-flex flex-column gap-3"></div>'),Ha=R('<div class="d-flex flex-column gap-3"></div>'),Ka=R('<div class="d-flex flex-column gap-3"></div>'),Qa=R('<div class="d-flex flex-column gap-3"><!> <!> <!> <!> <!></div>');function Xa(l,s){me(s,!1);const r=()=>he($,"$groupedByDate",m),v=()=>he(g,"$detailTotalsByDay",m),k=()=>he(c,"$detailTotalsByMonth",m),u=()=>he(M,"$detailTotalsByYear",m),[m,w]=Qe(),S=F(),{stores:{data:D,groupedByDate:$,detailTotalsByDay:g,detailTotalsByMonth:c,detailTotalsByYear:M},actions:{reload:A}}=Tt();let j=te(s,"query",8,""),f=F([]),E=F([]);const d=D.subscribe(I=>{T(f,I),T(E,[...I])});function _(I){return I?I.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const o=I=>{let N=[...e(f)];return I&&(N=N.filter(G=>G?.entry_type?G?.entry_type?.trim().toLowerCase().match(e(S).trim().toLowerCase()):!1)),N};yt(A),aa(d);let i=F("by-month");const O=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"},{key:"By Year",value:"by-year"}];Q(()=>B(j()),()=>{T(S,_(j()?.trim().toLowerCase()))}),Q(()=>(B(j()),e(E)),()=>{j()?T(f,o(j())):T(f,[...e(E)])}),Ce(),pe();var h=we(),y=oe(h);{var C=I=>{var N=Qa(),G=a(N);Vt(G,{get options(){return O},helperText:"",label:"Filter",disabled:!1,get value(){return e(i)},set value(V){T(i,V)},$$legacy:!0});var U=n(G,2);{var K=V=>{var z=we(),re=oe(z);Se(re,1,()=>(r(),x(()=>Object.entries(r()))),Me,(de,ne)=>{var ce=Ke(()=>Je(e(ne),2));let _e=()=>e(ce)[0],ke=()=>e(ce)[1];var $e=Va(),Ee=a($e);Ja(Ee,{get date(){return _e()},get entries(){return ke()}}),t($e),p(de,$e)}),p(V,z)};J(U,V=>{e(i)==="by-submission"&&V(K)})}var ee=n(U,2);{var P=V=>{var z=za();Se(z,5,()=>(v(),x(()=>Object.entries(v()))),Me,(re,de)=>{var ne=Ke(()=>Je(e(de),2));let ce=()=>e(ne)[0],_e=()=>e(ne)[1];Wa(re,{get date(){return ce()},get entry(){return _e()}})}),t(z),p(V,z)};J(ee,V=>{e(i)==="by-day"&&V(P)})}var W=n(ee,2);{var Y=V=>{var z=Ha();Se(z,5,()=>(k(),x(()=>Object.entries(k()))),Me,(re,de)=>{var ne=Ke(()=>Je(e(de),2));let ce=()=>e(ne)[0],_e=()=>e(ne)[1];qa(re,{get date(){return ce()},get entry(){return _e()}})}),t(z),p(V,z)};J(W,V=>{e(i)==="by-month"&&V(Y)})}var ae=n(W,2);{var se=V=>{var z=Ka();Se(z,5,()=>(u(),x(()=>Object.entries(u()))),Me,(re,de)=>{var ne=Ke(()=>Je(e(de),2));let ce=()=>e(ne)[0],_e=()=>e(ne)[1];Ua(re,{get date(){return ce()},get entry(){return _e()}})}),t(z),p(V,z)};J(ae,V=>{e(i)==="by-year"&&V(se)})}t(N),p(I,N)},q=I=>{var N=rt("No Data Found");p(I,N)};J(y,I=>{e(f),x(()=>e(f)?.length)?I(C):I(q,!1)})}p(l,h),ge(),w()}var Za=R('<span class="d-flex justify-content-end">0</span>'),er=R('<span class="d-flex justify-content-end">0</span>'),tr=R('<span class="d-flex justify-content-end"> </span>'),ar=R('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),rr=R('<span class="d-flex justify-content-end"> </span>'),nr=R('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),sr=R('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function or(l,s){me(s,!1);const r=()=>he(f,"$entries",k),v=()=>he(E,"$loading",k),[k,u]=Qe(),m=F(),w=F(),S=F(),D=F(),$=F(),g=F();let c=te(s,"goal",8),M=te(s,"drawerId",8),A=te(s,"onSubmitClick",8),j=te(s,"onViewResultsClick",8);const{stores:{data:f,loading:E}}=Tt();function d(X,ve){const[Re,Ie,He]=X.split("-").map(Number),[st,ot,_t]=ve.split("-").map(Number),mt=new Date(Re,Ie-1,He),zt=new Date(st,ot-1,_t),Ht=mt.toLocaleDateString("en-US",{month:"short"}),Kt=zt.toLocaleDateString("en-US",{month:"short"});return`${Ht} to ${Kt}`}function _(X){return X.toLocaleString("en-US")}function o(X){return X!==null?_(X):"--"}Q(()=>(r(),B(c())),()=>{T(m,ha(r(),c().start_date,c().end_date))}),Q(()=>e(m),()=>{T(w,wa(e(m)))}),Q(()=>e(m),()=>{T(S,xa(e(m)))}),Q(()=>B(c()),()=>{T(D,d(c().start_date,c().end_date))}),Q(()=>(B(c()),e(w)),()=>{T($,c().temple_ordinances_goal&&c().temple_ordinances_goal>0?Math.round(e(w)/c().temple_ordinances_goal*100):null)}),Q(()=>(B(c()),e(S)),()=>{T(g,c().names_prepared_goal&&c().names_prepared_goal>0?Math.round(e(S)/c().names_prepared_goal*100):null)}),Ce(),pe();var i=sr(),O=a(i),h=a(O),y=n(h),C=a(y);t(y),t(O);var q=n(O,2),I=a(q),N=a(I),G=a(N),U=n(a(G)),K=a(U),ee=n(a(K)),P=a(ee),W=a(P,!0);t(P),t(ee);var Y=n(ee),ae=a(Y);{var se=X=>{var ve=Za();p(X,ve)};J(ae,X=>{v()||X(se)})}t(Y),t(K);var V=n(K),z=n(a(V)),re=a(z),de=a(re,!0);t(re),t(z);var ne=n(z),ce=a(ne);{var _e=X=>{var ve=er();p(X,ve)};J(ce,X=>{v()||X(_e)})}t(ne),t(V);var ke=n(V),$e=a(ke);let Ee;var Be=n($e);let Ae;var Ve=a(Be),Ze=a(Ve,!0);t(Ve),t(Be);var Ne=n(Be);let qe;var L=a(Ne);{var H=X=>{var ve=tr(),Re=a(ve,!0);t(ve),Z(Ie=>b(Re,Ie),[()=>(e(w),x(()=>_(e(w))))]),p(X,ve)};J(L,X=>{v()||X(H)})}t(Ne),t(ke);var xe=n(ke);{var Ge=X=>{var ve=ar(),Re=a(ve),Ie=a(Re),He=a(Ie),st=a(He);t(He);var ot=n(He,2),_t=a(ot);t(ot),t(Ie),t(Re),t(ve),Z(mt=>{ft(st,`width: ${mt??""}%`),ie(st,"aria-valuenow",e($)),b(_t,`${e($)??""}%`)},[()=>(e($),x(()=>Math.min(e($),100)))]),p(X,ve)};J(xe,X=>{e($),B(c()),x(()=>e($)!==null&&c().temple_ordinances_goal)&&X(Ge)})}var Oe=n(xe),fe=a(Oe);let Ue;var Ye=n(fe);let We;var it=a(Ye),lt=a(it,!0);t(it),t(Ye);var et=n(Ye);let ht;var wt=a(et);{var Ct=X=>{var ve=rr(),Re=a(ve,!0);t(ve),Z(Ie=>b(Re,Ie),[()=>(e(S),x(()=>_(e(S))))]),p(X,ve)};J(wt,X=>{v()||X(Ct)})}t(et),t(Oe);var je=n(Oe);{var ze=X=>{var ve=nr(),Re=a(ve),Ie=a(Re),He=a(Ie),st=a(He);t(He);var ot=n(He,2),_t=a(ot);t(ot),t(Ie),t(Re),t(ve),Z(mt=>{ft(st,`width: ${mt??""}%`),ie(st,"aria-valuenow",e(g)),b(_t,`${e($)??""}%`)},[()=>(e(g),x(()=>Math.min(e(g),100)))]),p(X,ve)};J(je,X=>{e(g),B(c()),x(()=>e(g)!==null&&c().names_prepared_goal)&&X(ze)})}t(U),t(G),t(N);var vt=n(N,2),ut=a(vt);t(vt);var xt=n(vt,2),Le=a(xt);t(xt),t(I),t(q),t(i),Z((X,ve,Re,Ie)=>{b(h,`Ward Mission Goal ${B(c()),x(()=>c().year)??""} `),b(C,`(${e(D)??""})`),b(W,X),b(de,ve),Ee=De($e,1,"",null,Ee,{"border-bottom-0":e($)!==null&&c().temple_ordinances_goal}),Ae=De(Be,1,"",null,Ae,{"border-bottom-0":e($)!==null&&c().temple_ordinances_goal}),b(Ze,Re),qe=De(Ne,1,"",null,qe,{"border-bottom-0":e($)!==null&&c().temple_ordinances_goal}),Ue=De(fe,1,"",null,Ue,{"border-bottom-0":e(g)!==null&&c().names_prepared_goal}),We=De(Ye,1,"",null,We,{"border-bottom-0":e(g)!==null&&c().names_prepared_goal}),b(lt,Ie),ht=De(et,1,"",null,ht,{"border-bottom-0":e(g)!==null&&c().names_prepared_goal}),ie(ut,"data-bs-target",`#${M()??""}`),ie(ut,"aria-controls",M()),ie(Le,"data-bs-target",`#${M()??""}`),ie(Le,"aria-controls",M())},[()=>(B(c()),x(()=>o(c().baptisms_goal))),()=>(B(c()),x(()=>o(c().family_sealings_goal))),()=>(B(c()),x(()=>o(c().temple_ordinances_goal))),()=>(B(c()),x(()=>o(c().names_prepared_goal)))]),Pe("click",ut,function(...X){A()?.apply(this,X)}),Pe("click",Le,function(...X){j()?.apply(this,X)}),p(l,i),ge(),u()}var ir=R("<!> <!>",1),lr=R('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),dr=R('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),cr=R('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),vr=R('<div class="col-12"><!> <!></div>'),ur=R('<div class="row g-3"></div>'),_r=R("<!> <!>",1);function In(l,s){me(s,!1);const r=()=>he(j,"$activeGoals",u),v=()=>he(E,"$currentGoalPeriod",u),k=()=>he(f,"$goalsLoading",u),[u,m]=Qe(),w=F(),S=F();let D=F("form"),$=Ot(),g=F("end"),c=F(),M=F(!1);const{actions:{reload:A}}=Tt(),{stores:{activeGoals:j,loading:f,currentGoalPeriod:E},actions:{reload:d}}=la();let _=F(null);function o(){T(D,"form")}function i(){T(D,"results")}yt(async()=>{await Promise.all([d(),A()]);const I=new URLSearchParams(window.location.search);T(_,I.get("log-temple-activity"))}),Q(()=>(e(_),e(c),e(M)),()=>{e(_)&&e(_)==="yes"&&e(c)&&!e(M)&&(e(c).click(),T(M,!0))}),Q(()=>e(D),()=>{T(g,e(D)==="form"?"end":"start")}),Q(()=>e(D),()=>{T(w,e(D)==="form"?"Temple Activity":"Temple Activity Results")}),Q(()=>r(),()=>{T(S,(()=>{const I=new Date().toISOString().split("T")[0];return r().filter(N=>N.start_date<=I&&N.end_date>=I)})())}),Ce(),pe();var O=_r(),h=oe(O);Rt(h,{get placement(){return e(g)},get title(){return e(w)},get id(){return $},children:(I,N)=>{var G=ir(),U=oe(G);{var K=W=>{{let Y=at(()=>(v(),x(()=>v()?.start_date))),ae=at(()=>(v(),x(()=>v()?.end_date)));Ia(W,{get drawerId(){return $},get minDate(){return e(Y)},get maxDate(){return e(ae)}})}};J(U,W=>{e(D)==="form"&&W(K)})}var ee=n(U,2);{var P=W=>{Xa(W,{})};J(ee,W=>{e(D)==="results"&&W(P)})}p(I,G)},$$slots:{default:!0}});var y=n(h,2);{var C=I=>{var N=lr();p(I,N)},q=I=>{var N=we(),G=oe(N);{var U=ee=>{var P=dr();p(ee,P)},K=ee=>{var P=ur();Se(P,5,()=>e(S),W=>W.id,(W,Y)=>{var ae=vr(),se=a(ae);or(se,{get goal(){return e(Y)},get drawerId(){return $},onSubmitClick:o,onViewResultsClick:i});var V=n(se,2);{var z=re=>{var de=cr();ra(de,ne=>T(c,ne),()=>e(c)),Z(()=>{ie(de,"data-bs-target",`#${$??""}`),ie(de,"aria-controls",$)}),Pe("click",de,o),p(re,de)};J(V,re=>{e(Y),e(S),x(()=>e(Y)===e(S)[0])&&re(z)})}t(ae),p(W,ae)}),t(P),p(ee,P)};J(G,ee=>{e(S),x(()=>e(S).length===0)?ee(U):ee(K,!1)},!0)}p(I,N)};J(y,I=>{k()?I(C):I(q,!1)})}p(l,O),ge(),m()}const Yt=Fe([]),Lt=Fe([]);let $t=!1,St=!1;async function mr(){if($t)return It(Yt);$t=!0;try{const{data:l,error:s}=await Xe.from("bom_reading_schedule").select("*").order("day_number",{ascending:!0});if(s)throw console.error("[API] Get BOM reading schedule failed:",s),new Error(`Failed to load reading schedule: ${s.message}`);const r=l||[];return Yt.set(r),setTimeout(()=>$t=!1,800),r}catch(l){throw $t=!1,console.error("[API] Unexpected error fetching BOM reading schedule:",l),l}}async function Mt(){if(St)return It(Lt);St=!0;try{const{data:l,error:s}=await Xe.from("bom_reading_entries").select("*").order("created_at",{ascending:!1});if(s)throw console.error("[API] Get BOM reading entries failed:",s),new Error(`Failed to load reading entries: ${s.message}`);const r=l||[];return Lt.set(r),setTimeout(()=>St=!1,800),r}catch(l){throw St=!1,console.error("[API] Unexpected error fetching BOM reading entries:",l),l}}async function gr(l){try{const{data:s,error:r}=await Xe.from("bom_reading_entries").insert([l]).select();if(r)throw console.error("[API] Create BOM reading entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.code==="23503"?new Error("Invalid chapter reference"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await Mt(),console.log("[API] BOM reading entry created successfully"),s?s[0]:void 0}catch(s){throw console.error("[API] Unexpected error creating BOM reading entry:",s),s}}async function pr(l,s){try{const{data:r,error:v}=await Xe.from("bom_reading_entries").update(s).eq("id",l).select();if(v)throw console.error("[API] Update BOM reading entry failed:",v),new Error(`Failed to update entry: ${v.message}`);return await Mt(),console.log("[API] BOM reading entry updated successfully"),r?r[0]:void 0}catch(r){throw console.error("[API] Unexpected error updating BOM reading entry:",r),r}}async function fr(l){try{const{error:s}=await Xe.from("bom_reading_entries").delete().eq("id",l);if(s)throw console.error("[API] Delete BOM reading entry failed:",s),new Error(`Failed to delete entry: ${s.message}`);await Mt(),console.log("[API] BOM reading entry deleted successfully")}catch(s){throw console.error("[API] Unexpected error deleting BOM reading entry:",s),s}}function yr(l){const s=new Map;return l.forEach(r=>{const v=s.get(r.chapter_ref)||0;s.set(r.chapter_ref,v+1)}),s}let pt=null;const br=()=>{const l=Fe(!1),s=Fe(!1),r=Fe([]),v=Fe([]),k=be(v,o=>yr(o)),u=be(r,o=>{const i=new Date().toISOString().split("T")[0];return o.find(O=>O.date===i)||null}),m=be([r,k],([o,i])=>{const O=new Date().toISOString().split("T")[0];return o.map(h=>({chapter_ref:h.chapter_ref,day_number:h.day_number,date:h.date,book_name:h.book_name,chapter_number:h.chapter_number,read_count:i.get(h.chapter_ref)||0,is_today:h.date===O,is_past:h.date<O,is_future:h.date>O}))}),w=be(r,o=>o.length),S=be(k,o=>{let i=0;return o.forEach(O=>{O>0&&i++}),i}),D=be([w,S],([o,i])=>o>0?Math.round(i/o*100):0),$=be(v,o=>{const i={};o.forEach(h=>{i[h.date]||(i[h.date]=[]),i[h.date].push(h)}),Object.keys(i).forEach(h=>{i[h].sort((y,C)=>new Date(C.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const O=Object.entries(i).sort(([h],[y])=>new Date(y).getTime()-new Date(h).getTime());return Object.fromEntries(O)}),g=be(v,o=>{const i={};o.forEach(h=>{const y=new Date(h.date),C=Ba(y),q=ea(y),I=`${C}-W${q.toString().padStart(2,"0")}`;i[I]||(i[I]=[]),i[I].push(h)}),Object.keys(i).forEach(h=>{i[h].sort((y,C)=>new Date(C.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const O=Object.entries(i).sort(([h],[y])=>y.localeCompare(h));return Object.fromEntries(O)}),c=be(v,o=>{const i={};o.forEach(h=>{const y=h.date.substring(0,7);i[y]||(i[y]=[]),i[y].push(h)}),Object.keys(i).forEach(h=>{i[h].sort((y,C)=>new Date(C.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const O=Object.entries(i).sort(([h],[y])=>y.localeCompare(h));return Object.fromEntries(O)}),M=be($,o=>{const i={};return Object.entries(o).forEach(([O,h])=>{const y=new Set(h.map(C=>C.chapter_ref));i[O]={period:O,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),i}),A=be(g,o=>{const i={};return Object.entries(o).forEach(([O,h])=>{const y=new Set(h.map(C=>C.chapter_ref));i[O]={period:O,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),i}),j=be(c,o=>{const i={};return Object.entries(o).forEach(([O,h])=>{const y=new Set(h.map(C=>C.chapter_ref));i[O]={period:O,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),i}),f=async()=>{s.set(!0);try{const[o,i]=await Promise.all([mr(),Mt()]);r.set(o),v.set(i),l.set(!0)}catch(o){console.error("[State] Failed to reload BOM reading data:",o),l.set(!0)}finally{s.set(!1)}};return pt={stores:{ready:l,loading:s,schedule:r,entries:v,progressByChapter:k,todaysReading:u,chapterProgress:m,totalChapters:w,chaptersReadByAnyone:S,overallProgress:D,groupedByDate:$,groupedByWeek:g,groupedByMonth:c,aggregatedByDate:M,aggregatedByWeek:A,aggregatedByMonth:j},actions:{reload:f,apiCreate:async o=>{const i=await gr(o);return await f(),i},apiUpdate:async(o,i)=>{await pr(o,i),await f()},apiDelete:async o=>{await fr(o),await f()}}},pt},bt=()=>pt?.stores&&Object.keys(pt.stores).length>0?pt:br(),Pt="bom_reading_submissions",At="bom_reading_entry_ids";function Nt(){if(typeof localStorage>"u")return new Set;try{const l=localStorage.getItem(Pt);if(!l)return new Set;const s=JSON.parse(l);return new Set(Array.isArray(s)?s:[])}catch(l){return console.error("[ReadingTracker] Error reading from localStorage:",l),new Set}}function hr(l){return Nt().has(l)}function wr(l){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const s=Nt();s.add(l),localStorage.setItem(Pt,JSON.stringify([...s]))}catch(s){console.error("[ReadingTracker] Error writing to localStorage:",s)}}function Wt(){if(typeof localStorage>"u")return{};try{const l=localStorage.getItem(At);if(!l)return{};const s=JSON.parse(l);return typeof s=="object"&&s!==null?s:{}}catch(l){return console.error("[ReadingTracker] Error reading entry IDs from localStorage:",l),{}}}function xr(l){return Wt()[l]??null}function kr(l,s){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const r=Wt();r[l]=s,localStorage.setItem(At,JSON.stringify(r))}catch(r){console.error("[ReadingTracker] Error storing entry ID:",r)}}function $r(l){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const s=Nt();s.delete(l),localStorage.setItem(Pt,JSON.stringify([...s]));const r=Wt();delete r[l],localStorage.setItem(At,JSON.stringify(r))}catch(s){console.error("[ReadingTracker] Error writing to localStorage:",s)}}var Sr=R('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>'),Er=R('<i class="bi bi-check-circle-fill me-1"></i> Undo',1),Br=R('<i class="bi bi-check-circle me-1"></i> Read',1),Tr=R('<div class="alert alert-danger alert-sm mt-2 mb-0 svelte-18cjesl" role="alert"><i class="bi bi-exclamation-triangle-fill me-1"></i> </div>'),Dr=R('<div class="bom-reading-entry-form svelte-18cjesl"><div class="d-flex align-items-center gap-2 gap-md-3"><button type="button"><!></button></div> <!></div>');function Mr(l,s){me(s,!1);const r=()=>he(w,"$loading",v),[v,k]=Qe();let u=te(s,"chapterRef",8),m=te(s,"onSuccess",8,void 0);const{stores:{loading:w},actions:{apiCreate:S,apiDelete:D}}=bt();let $=F(!1),g=F(""),c=F(!1),M=F(null);yt(()=>{T(c,hr(u()))});async function A(){if(e(c)){T(g,"You have already marked this chapter as read");return}try{T($,!0),T(g,"");const y={date:new Date().toISOString().split("T")[0],chapter_ref:u()},C=await S(y);C&&C.id&&(wr(u()),kr(u(),C.id),T(c,!0),m()&&m()())}catch(y){T(g,y instanceof Error?y.message:"Failed to save reading"),console.error("[BomReadingEntryForm] Error:",y)}finally{T($,!1)}}async function j(){const y=xr(u());if(!y){T(g,"Cannot undo - entry ID not found");return}try{T($,!0),T(g,""),await D(y),$r(u()),T(c,!1),m()&&m()()}catch(C){T(g,C instanceof Error?C.message:"Failed to undo"),console.error("[BomReadingEntryForm] Undo error:",C)}finally{T($,!1)}}Q(()=>(e(g),e(M)),()=>{e(g)&&(e(M)&&clearTimeout(e(M)),T(M,setTimeout(()=>{T(g,""),T(M,null)},1e3)))}),Ce(),pe();var f=Dr(),E=a(f),d=a(E),_=a(d);{var o=y=>{var C=Sr();p(y,C)},i=y=>{var C=we(),q=oe(C);{var I=G=>{var U=Er();nt(),p(G,U)},N=G=>{var U=Br();nt(),p(G,U)};J(q,G=>{e(c)?G(I):G(N,!1)},!0)}p(y,C)};J(_,y=>{e($)?y(o):y(i,!1)})}t(d),t(E);var O=n(E,2);{var h=y=>{var C=Tr(),q=n(a(C));t(C),Z(()=>b(q,` ${e(g)??""}`)),p(y,C)};J(O,y=>{e(g)&&y(h)})}t(f),Z(()=>{De(d,1,`btn btn-sm ${e(c)?"btn-outline-danger":"btn-primary"}`,"svelte-18cjesl"),d.disabled=e($)||r(),ie(d,"title",e(c)?"Undo marking this chapter as read":"Mark this chapter as read")}),Pe("click",d,function(...y){(e(c)?j:A)?.apply(this,y)}),p(l,f),ge(),k()}var Cr=R('<span class="badge bg-info text-dark svelte-x251hv"><i class="bi bi-calendar-day"></i> Today</span>'),Or=R('<i class="bi bi-check-circle"></i> ',1),Rr=R('<i class="bi bi-circle"></i> 0',1),Ir=R('<div><div class="card-body p-2"><div class="d-flex align-items-baseline gap-2 flex-wrap mb-2"><small class="text-muted"> </small> <span> </span> <!></div> <div class="d-flex align-items-center justify-content-between gap-2"><small class="text-muted"> </small> <div class="d-flex align-items-center gap-2 flex-shrink-0"><span><!></span> <!></div></div></div></div>');function Jt(l,s){me(s,!1);const r=F(),v=F(),k=F();let u=te(s,"progress",8);const m=!1;Q(()=>B(u()),()=>{T(r,le(ue(u().date,"yyyy-MM-dd",new Date),"MMM d, yyyy (EEE)"))}),Q(()=>B(u()),()=>{T(v,u().is_today?"border-primary border-2":u().is_past?"past-reading":"")}),Q(()=>B(u()),()=>{T(k,u().read_count>0?"bg-success":"bg-secondary")}),Ce();var w={compact:m};pe();var S=Ir(),D=a(S),$=a(D),g=a($),c=a(g);t(g);var M=n(g,2),A=a(M,!0);t(M);var j=n(M,2);{var f=q=>{var I=Cr();p(q,I)};J(j,q=>{B(u()),x(()=>u().is_today)&&q(f)})}t($);var E=n($,2),d=a(E),_=a(d,!0);t(d);var o=n(d,2),i=a(o),O=a(i);{var h=q=>{var I=Or(),N=n(oe(I));Z(()=>b(N,` ${B(u()),x(()=>u().read_count)??""}`)),p(q,I)},y=q=>{var I=Rr();nt(),p(q,I)};J(O,q=>{B(u()),x(()=>u().read_count>0)?q(h):q(y,!1)})}t(i);var C=n(i,2);return Mr(C,{get chapterRef(){return B(u()),x(()=>u().chapter_ref)}}),t(o),t(E),t(D),t(S),Z(()=>{De(S,1,`card bom-day-card ${e(v)??""} mb-2`,"svelte-x251hv"),b(c,`Day ${B(u()),x(()=>u().day_number)??""}`),De(M,1,`fw-semibold ${B(u()),x(()=>u().is_today?"text-primary":"")??""}`,"svelte-x251hv"),b(A,(B(u()),x(()=>u().chapter_ref))),b(_,e(r)),De(i,1,`badge ${e(k)??""}`,"svelte-x251hv")}),p(l,S),ca(s,"compact",m),ge(w)}var jr=R('<div class="alert alert-warning" role="alert"><i class="bi bi-exclamation-triangle me-2"></i> No readings found for the selected filter.</div>'),Pr=R('<div class="book-group mb-4 svelte-nbte28"><h4 class="border-bottom pb-2 mb-3 svelte-nbte28"><i class="bi bi-book me-2"></i> <span class="badge bg-secondary ms-2"> </span></h4> <!></div>'),Ar=R("<div><!></div>"),Nr=R('<div class="text-center mt-4"><button class="btn btn-outline-primary"><!></button></div>'),Wr=R('<div class="text-center mt-2"><p class="text-muted mb-0"><i class="bi bi-info-circle me-1"></i> </p></div>'),Fr=R('<div class="bom-reading-schedule svelte-nbte28"><div class="card mb-3"><div class="card-body"><div class="d-flex flex-column gap-3"><div><label for="search" class="form-label fw-bold">Search</label> <div class="input-group"><span class="input-group-text"><i class="bi bi-search"></i></span> <input type="text" class="form-control" id="search" placeholder="Search chapters or books..."/></div></div> <div><div class="form-check"><input class="form-check-input" type="checkbox" id="groupByBook"/> <label class="form-check-label" for="groupByBook">Group by Book</label></div></div></div></div></div> <div class="reading-list svelte-nbte28"><!></div> <!> <!></div>');function qr(l,s){me(s,!1);const r=()=>he(S,"$chapterProgress",k),v=()=>he(D,"$todaysReading",k),[k,u]=Qe(),m=F(),w=F(),{stores:{chapterProgress:S,todaysReading:D}}=bt();let $=F(""),g=F(!1),c=F(!1);function M(P,W,Y){let ae=P;if(Y||(ae=ae.filter(se=>!se.is_future)),W){const se=W.toLowerCase();ae=ae.filter(V=>V.chapter_ref.toLowerCase().includes(se)||V.book_name.toLowerCase().includes(se))}return ae}function A(P){const W={};return P.forEach(Y=>{W[Y.book_name]||(W[Y.book_name]=[]),W[Y.book_name].push(Y)}),W}yt(()=>{v()&&setTimeout(()=>{const P=document.getElementById("today-reading");P&&P.scrollIntoView({behavior:"smooth",block:"center"})},500)}),Q(()=>(r(),e($),e(c)),()=>{T(m,M(r(),e($),e(c)))}),Q(()=>(e(g),e(m)),()=>{T(w,e(g)?A(e(m)):null)}),Ce(),pe();var j=Fr(),f=a(j),E=a(f),d=a(E),_=a(d),o=n(a(_),2),i=n(a(o),2);Et(i),t(o),t(_);var O=n(_,2),h=a(O),y=a(h);Et(y),nt(2),t(h),t(O),t(d),t(E),t(f);var C=n(f,2),q=a(C);{var I=P=>{var W=jr();p(P,W)},N=P=>{var W=we(),Y=oe(W);{var ae=V=>{var z=we(),re=oe(z);Se(re,1,()=>(e(w),x(()=>Object.entries(e(w)))),Me,(de,ne)=>{var ce=Ke(()=>Je(e(ne),2));let _e=()=>e(ce)[0],ke=()=>e(ce)[1];var $e=Pr(),Ee=a($e),Be=n(a(Ee)),Ae=n(Be),Ve=a(Ae);t(Ae),t(Ee);var Ze=n(Ee,2);Se(Ze,1,ke,Me,(Ne,qe)=>{Jt(Ne,{get progress(){return e(qe)},compact:!0})}),t($e),Z(()=>{b(Be,` ${_e()??""} `),b(Ve,`${ke(),x(()=>ke().length)??""} days`)}),p(de,$e)}),p(V,z)},se=V=>{var z=we(),re=oe(z);Se(re,1,()=>e(m),Me,(de,ne)=>{var ce=Ar(),_e=a(ce);Jt(_e,{get progress(){return e(ne)}}),t(ce),Z(()=>ie(ce,"id",(e(ne),x(()=>e(ne).is_today?"today-reading":void 0)))),p(de,ce)}),p(V,z)};J(Y,V=>{e(w)?V(ae):V(se,!1)},!0)}p(P,W)};J(q,P=>{e(m),x(()=>e(m).length===0)?P(I):P(N,!1)})}t(C);var G=n(C,2);{var U=P=>{var W=Nr(),Y=a(W),ae=a(Y);{var se=z=>{var re=rt("Hide Future Chapters");p(z,re)},V=z=>{var re=rt("Show Future Chapters");p(z,re)};J(ae,z=>{e(c)?z(se):z(V,!1)})}t(Y),t(W),Pe("click",Y,()=>T(c,!e(c))),p(P,W)};J(G,P=>{e($)||P(U)})}var K=n(G,2);{var ee=P=>{var W=Wr(),Y=a(W),ae=n(a(Y));t(Y),t(W),Z(()=>b(ae,` Showing ${e(m),x(()=>e(m).length)??""} reading days`)),p(P,W)};J(K,P=>{e(m),x(()=>e(m).length>20)&&P(ee)})}t(j),jt(i,()=>e($),P=>T($,P)),na(y,()=>e(g),P=>T(g,P)),p(l,j),ge(),u()}var Gr=R('<span class="badge bg-primary ms-1"> </span>'),Ur=R('<span class="badge bg-secondary me-1 mb-1"> <!></span>'),Yr=R('<li class="list-group-item"><div class="small"><strong>Chapters read:</strong> <div class="mt-1"></div></div></li>'),Lr=R('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Reading Submissions:</span> <strong> </strong></div> <div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong> </strong></div></li> <!></ul></div></div>');function Jr(l,s){me(s,!1);const r=F(),v=F();let k=te(s,"entries",8),u=te(s,"date",8);Q(()=>B(k()),()=>{T(r,k().reduce((h,y)=>(h[y.chapter_ref]=(h[y.chapter_ref]||0)+1,h),{}))}),Q(()=>e(r),()=>{T(v,Object.keys(e(r)).sort())}),Ce(),pe();var m=Lr(),w=a(m),S=a(w),D=a(S),$=a(D,!0);t(D);var g=n(D,3),c=a(g,!0);t(g),t(S);var M=n(S,2),A=a(M),j=a(A),f=n(a(j),2),E=a(f,!0);t(f),t(j);var d=n(j,2),_=n(a(d),2),o=a(_,!0);t(_),t(d),t(A);var i=n(A,2);{var O=h=>{var y=Yr(),C=a(y),q=n(a(C),2);Se(q,5,()=>e(v),Me,(I,N)=>{var G=Ur(),U=a(G),K=n(U);{var ee=P=>{var W=Gr(),Y=a(W,!0);t(W),Z(()=>b(Y,(e(r),e(N),x(()=>e(r)[e(N)])))),p(P,W)};J(K,P=>{e(r),e(N),x(()=>e(r)[e(N)]>1)&&P(ee)})}t(G),Z(()=>b(U,`${e(N)??""} `)),p(I,G)}),t(q),t(C),t(y),p(h,y)};J(i,h=>{e(v),x(()=>e(v).length>0)&&h(O)})}t(M),t(w),t(m),Z((h,y)=>{b($,h),b(c,y),b(E,(B(k()),x(()=>k().length))),b(o,(e(v),x(()=>e(v).length)))},[()=>(B(le),B(ue),B(u()),x(()=>le(ue(u(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(le),B(ue),B(u()),x(()=>le(ue(u(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(l,m),ge()}var Vr=R('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div></li></ul></div></div>');function zr(l,s){me(s,!1);let r=te(s,"date",8),v=te(s,"aggregate",8);pe();var k=Vr(),u=a(k),m=a(u),w=a(m),S=a(w,!0);t(w);var D=n(w,3),$=a(D,!0);t(D),t(m);var g=n(m,2),c=a(g),M=a(c),A=n(a(M),2),j=a(A,!0);t(A),t(M),t(c);var f=n(c,2),E=a(f),d=n(a(E),2),_=a(d,!0);t(d),t(E),t(f),t(g),t(u),t(k),Z((o,i)=>{b(S,o),b($,i),b(j,(B(v()),x(()=>v().totalReadings))),b(_,(B(v()),x(()=>v().uniqueChapters)))},[()=>(B(le),B(ue),B(r()),x(()=>le(ue(r(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(le),B(ue),B(r()),x(()=>le(ue(r(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(l,k),ge()}var Hr=R('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function Kr(l,s){me(s,!1);const r=F(),v=F(),k=F(),u=F(),m=F(),w=F(),S=F(),D=F(),$=F(),g=F();let c=te(s,"week",8),M=te(s,"aggregate",8);Q(()=>(e(r),e(v),B(c())),()=>{(W=>{var Y=Je(W,2);T(r,Y[0]),T(v,Y[1])})(c().split("-W"))}),Q(()=>e(v),()=>{T(k,parseInt(e(v),10))}),Q(()=>e(r),()=>{T(u,parseInt(e(r),10))}),Q(()=>e(u),()=>{T(m,new Date(e(u),0,1))}),Q(()=>(e(m),e(k)),()=>{T(w,ta(new Date(e(m).getTime()+(e(k)-1)*7*24*60*60*1e3)))}),Q(()=>e(w),()=>{T(S,Ea(e(w)))}),Q(()=>(e(k),e(u)),()=>{T(D,`Week ${e(k)} of ${e(u)}`)}),Q(()=>(e(w),e(S)),()=>{T($,`${le(e(w),"MMM d")} - ${le(e(S),"MMM d, yyyy")}`)}),Q(()=>B(M()),()=>{T(g,Math.round(M().uniqueChapters/244*100))}),Ce(),pe();var A=Hr(),j=a(A),f=a(j),E=a(f),d=a(E,!0);t(E);var _=n(E,3),o=a(_,!0);t(_),t(f);var i=n(f,2),O=a(i),h=a(O),y=n(a(h),2),C=a(y,!0);t(y),t(h),t(O);var q=n(O,2),I=a(q),N=n(a(I),2),G=a(N,!0);t(N),t(I);var U=n(I,2),K=a(U);t(U);var ee=n(U,2),P=a(ee);t(ee),t(q),t(i),t(j),t(A),Z(()=>{b(d,e(D)),b(o,e($)),b(C,(B(M()),x(()=>M().totalReadings))),b(G,(B(M()),x(()=>M().uniqueChapters))),ft(K,`width: ${e(g)??""}%`),ie(K,"aria-valuenow",e(g)),b(P,`${e(g)??""}% of all BOM chapters`)}),p(l,A),ge()}var Qr=R('<div class="mb-3"><div class="card"><div class="card-header"><strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function Xr(l,s){me(s,!1);const r=F();let v=te(s,"month",8),k=te(s,"aggregate",8);Q(()=>B(k()),()=>{T(r,Math.round(k().uniqueChapters/244*100))}),Ce(),pe();var u=Qr(),m=a(u),w=a(m),S=a(w),D=a(S,!0);t(S),t(w);var $=n(w,2),g=a($),c=a(g),M=n(a(c),2),A=a(M,!0);t(M),t(c),t(g);var j=n(g,2),f=a(j),E=n(a(f),2),d=a(E,!0);t(E),t(f);var _=n(f,2),o=a(_);t(_);var i=n(_,2),O=a(i);t(i),t(j),t($),t(m),t(u),Z(h=>{b(D,h),b(A,(B(k()),x(()=>k().totalReadings))),b(d,(B(k()),x(()=>k().uniqueChapters))),ft(o,`width: ${e(r)??""}%`),ie(o,"aria-valuenow",e(r)),b(O,`${e(r)??""}% of all BOM chapters`)},[()=>(B(le),B(ue),B(v()),x(()=>le(ue(v(),"yyyy-MM",new Date),"MMMM yyyy")))]),p(l,u),ge()}var Zr=R('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),en=R('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),tn=R('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),an=R('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),rn=R('<div class="bom-submissions"><div class="mb-3"><!></div> <div class="submissions-list svelte-1qt8gnu"><!></div></div>');function nn(l,s){me(s,!1);const r=()=>he(S,"$groupedByDate",m),v=()=>he(D,"$aggregatedByDate",m),k=()=>he($,"$aggregatedByWeek",m),u=()=>he(g,"$aggregatedByMonth",m),[m,w]=Qe(),{stores:{groupedByDate:S,aggregatedByDate:D,aggregatedByWeek:$,aggregatedByMonth:g}}=bt();let c=F("by-day");pe();var M=rn(),A=a(M),j=a(A);Vt(j,{options:[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Week",value:"by-week"},{key:"By Month",value:"by-month"}],label:"View",disabled:!1,get value(){return e(c)},set value(o){T(c,o)},$$legacy:!0}),t(A);var f=n(A,2),E=a(f);{var d=o=>{var i=we(),O=oe(i);{var h=C=>{var q=Zr();p(C,q)},y=C=>{var q=we(),I=oe(q);Se(I,1,()=>Object.entries(r()),Me,(N,G)=>{var U=Ke(()=>Je(e(G),2));let K=()=>e(U)[0],ee=()=>e(U)[1];Jr(N,{get date(){return K()},get entries(){return ee()}})}),p(C,q)};J(O,C=>{Object.keys(r()).length===0?C(h):C(y,!1)})}p(o,i)},_=o=>{var i=we(),O=oe(i);{var h=C=>{var q=we(),I=oe(q);{var N=U=>{var K=en();p(U,K)},G=U=>{var K=we(),ee=oe(K);Se(ee,1,()=>Object.entries(v()),Me,(P,W)=>{var Y=Ke(()=>Je(e(W),2));let ae=()=>e(Y)[0],se=()=>e(Y)[1];zr(P,{get date(){return ae()},get aggregate(){return se()}})}),p(U,K)};J(I,U=>{Object.keys(v()).length===0?U(N):U(G,!1)})}p(C,q)},y=C=>{var q=we(),I=oe(q);{var N=U=>{var K=we(),ee=oe(K);{var P=Y=>{var ae=tn();p(Y,ae)},W=Y=>{var ae=we(),se=oe(ae);Se(se,1,()=>Object.entries(k()),Me,(V,z)=>{var re=Ke(()=>Je(e(z),2));let de=()=>e(re)[0],ne=()=>e(re)[1];Kr(V,{get week(){return de()},get aggregate(){return ne()}})}),p(Y,ae)};J(ee,Y=>{Object.keys(k()).length===0?Y(P):Y(W,!1)})}p(U,K)},G=U=>{var K=we(),ee=oe(K);{var P=W=>{var Y=we(),ae=oe(Y);{var se=z=>{var re=an();p(z,re)},V=z=>{var re=we(),de=oe(re);Se(de,1,()=>Object.entries(u()),Me,(ne,ce)=>{var _e=Ke(()=>Je(e(ce),2));let ke=()=>e(_e)[0],$e=()=>e(_e)[1];Xr(ne,{get month(){return ke()},get aggregate(){return $e()}})}),p(z,re)};J(ae,z=>{Object.keys(u()).length===0?z(se):z(V,!1)})}p(W,Y)};J(ee,W=>{e(c)==="by-month"&&W(P)},!0)}p(U,K)};J(I,U=>{e(c)==="by-week"?U(N):U(G,!1)},!0)}p(C,q)};J(O,C=>{e(c)==="by-day"?C(h):C(y,!1)},!0)}p(o,i)};J(E,o=>{e(c)==="by-submission"?o(d):o(_,!1)})}t(f),t(M),p(l,M),ge(),w()}var sn=R(`<div class="card"><div class="card-header"><div class="d-flex align-items-center gap-2"><span class="fw-600 svelte-8saayj">Book of Mormon Challenge</span></div></div> <div class="card-body"><div class="d-flex flex-column gap-3"><div><div class="d-flex justify-content-between align-items-center mb-2"><h5 class="mb-0">Overall Completion</h5> <span class="badge bg-primary fs-5"> </span></div> <div class="progress mb-2" style="height: 10px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <p class="text-muted mb-0"> </p></div> <div class="row g-3"><div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-calendar3 fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Days Remaining</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-book fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">BOM Chapters</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-check-circle fs-1 text-success mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Chapters Read</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-people fs-1 text-warning mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Reading Submissions</p></div></div></div></div> <div class="alert alert-info mb-0" role="alert"><div class="d-flex gap-2"><i class="bi bi-info-circle"></i> <div>This progress shows how many chapters have been read by <strong>anyone</strong> in the ward.
						Each person can mark chapters as read anonymously.</div></div></div> <div class="d-flex flex-column gap-2"><div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Join the Challenge</button></div> <div class="d-block"><button class="btn btn-sm btn-outline-primary w-100" type="button" data-bs-toggle="offcanvas">Record Your Reading</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div></div>`);function on(l,s){me(s,!1);const r=()=>he(E,"$chapterProgress",k),v=()=>he(d,"$entries",k),[k,u]=Qe(),m=F(),w=F(),S=F(),D=F(),$=F(),g=F(),c=F();let M=te(s,"scheduleDrawerId",8),A=te(s,"submissionsDrawerId",8),j=te(s,"onJoinClick",8),f=te(s,"onRecordClick",8);const{stores:{chapterProgress:E,entries:d}}=bt();function _(fe){return fe.toLocaleString("en-US")}Q(()=>r(),()=>{T(m,r().filter(fe=>fe.book_name!=="Review"))}),Q(()=>e(m),()=>{T(w,Array.from(new Set(e(m).map(fe=>fe.chapter_ref))))}),Q(()=>e(w),()=>{T(S,e(w).length)}),Q(()=>(e(w),e(m)),()=>{T(D,e(w).filter(fe=>e(m).find(Ue=>Ue.chapter_ref===fe&&Ue.read_count>0)).length)}),Q(()=>v(),()=>{T($,v().length)}),Q(()=>(e(S),e(D)),()=>{T(g,e(S)>0?Math.round(e(D)/e(S)*100):0)}),Q(()=>{},()=>{T(c,(()=>{const fe=new Date,Ye=new Date(fe.getFullYear(),11,31).getTime()-fe.getTime(),We=Math.ceil(Ye/(1e3*60*60*24));return We>0?We:0})())}),Ce(),pe();var o=sn(),i=n(a(o),2),O=a(i),h=a(O),y=a(h),C=n(a(y),2),q=a(C);t(C),t(y);var I=n(y,2),N=a(I);t(I);var G=n(I,2),U=a(G);t(G),t(h);var K=n(h,2),ee=a(K),P=a(ee),W=a(P),Y=n(a(W),2),ae=a(Y,!0);t(Y),nt(2),t(W),t(P),t(ee);var se=n(ee,2),V=a(se),z=a(V),re=n(a(z),2),de=a(re,!0);t(re),nt(2),t(z),t(V),t(se);var ne=n(se,2),ce=a(ne),_e=a(ce),ke=n(a(_e),2),$e=a(ke);t(ke),nt(2),t(_e),t(ce),t(ne);var Ee=n(ne,2),Be=a(Ee),Ae=a(Be),Ve=n(a(Ae),2),Ze=a(Ve,!0);t(Ve),nt(2),t(Ae),t(Be),t(Ee),t(K);var Ne=n(K,4),qe=a(Ne),L=a(qe);t(qe);var H=n(qe,2),xe=a(H);t(H);var Ge=n(H,2),Oe=a(Ge);t(Ge),t(Ne),t(O),t(i),t(o),Z((fe,Ue,Ye,We,it,lt,et)=>{b(q,`${e(g)??""}%`),ft(N,`width: ${e(g)??""}%`),ie(N,"aria-valuenow",e(g)),b(U,`${fe??""} of ${Ue??""} chapters read by at
					least one person`),b(ae,Ye),b(de,We),b($e,`${it??""} / ${lt??""}`),b(Ze,et),ie(L,"data-bs-target",`#${M()??""}`),ie(L,"aria-controls",M()),ie(xe,"data-bs-target",`#${M()??""}`),ie(xe,"aria-controls",M()),ie(Oe,"data-bs-target",`#${A()??""}`),ie(Oe,"aria-controls",A())},[()=>(e(D),x(()=>_(e(D)))),()=>(e(S),x(()=>_(e(S)))),()=>(e(c),x(()=>_(e(c)))),()=>(e(S),x(()=>_(e(S)))),()=>(e(D),x(()=>_(e(D)))),()=>(e(S),x(()=>_(e(S)))),()=>(e($),x(()=>_(e($))))]),Pe("click",L,function(...fe){j()?.apply(this,fe)}),Pe("click",xe,function(...fe){f()?.apply(this,fe)}),p(l,o),ge(),u()}var ln=R('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading reading challenge...</span></div></div>'),dn=R(`<div class="alert alert-info mb-3" role="alert"><h5 class="alert-heading"><i class="bi bi-info-circle me-2"></i>How to Join the Challenge</h5> <p class="mb-2">Our ward is reading the Book of Mormon together! Here's how to participate:</p> <ol class="mb-2"><li>Read any chapter from the Book of Mormon</li> <li>Click the "Read" button next to the chapter you completed</li> <li>Your reading is tracked anonymously to show ward progress</li></ol> <p class="mb-0"><strong>Remember:</strong> You don't have to follow the schedule exactly! Read ahead, catch
					up, or go at your own pace. The goal is to show that our ward is moving forward in reading the
					Book of Mormon together.</p></div>`),cn=R("<!> <!>",1),vn=R("<!> <!> <!>",1);function jn(l,s){me(s,!1);const r=()=>he(S,"$loading",k),v=()=>he(D,"$ready",k),[k,u]=Qe(),m=Ot(),w=Ot(),{stores:{loading:S,ready:D},actions:{reload:$}}=bt();let g=F(!1);function c(){T(g,!0)}function M(){T(g,!1)}yt(async()=>{await $()}),pe();var A=we(),j=oe(A);{var f=d=>{var _=ln();p(d,_)},E=d=>{var _=vn(),o=oe(_);on(o,{get scheduleDrawerId(){return m},get submissionsDrawerId(){return w},onJoinClick:c,onRecordClick:M});var i=n(o,2);Rt(i,{get id(){return m},title:"2026 Book of Mormon Reading Challenge",placement:"end",children:(h,y)=>{var C=cn(),q=oe(C);{var I=G=>{var U=dn();p(G,U)};J(q,G=>{e(g)&&G(I)})}var N=n(q,2);qr(N,{}),p(h,C)},$$slots:{default:!0}});var O=n(i,2);Rt(O,{get id(){return w},title:"Reading Submissions",placement:"start",children:(h,y)=>{nn(h,{})},$$slots:{default:!0}}),p(d,_)};J(j,d=>{r()&&!v()?d(f):d(E,!1)})}p(l,A),ge(),u()}export{jn as B,On as S,Cn as W,Rn as a,In as b};
