const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dy2Bvcee.js","./SWWSvUpQ.js","./DIeogL5L.js","./D8ekX_8E.js","./CmsKOCeN.js","./NZTpNUN0.js","./69_IOA4Y.js","./WW5OsAH7.js","./CU3XCoqN.js","./YJAcq9su.js","./DdQSbrzx.js","./Dyb6OuQt.js","./BTRUZsJg.js","./BUApaBEI.js","./Bgyk9asy.js","./D9YuIQc8.js","../assets/Spinner.DTjfhZ6-.css","./DDvya4sx.js","./mnkQx8ai.js","./CvxMDV_e.js","./Cc3l00Qu.js","./B0jOl1al.js","./kD5nSIae.js","./DCggU3jP.js","./CZYG5XfA.js","./DM-tgP-I.js","../assets/BishopricApprovalSection.DRGo_BHg.css","./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{d as tr,o as xa,g as ar}from"./WW5OsAH7.js";import{p as it,ah as k,D as c,E as p,ai as Lt,c as a,s as l,r as t,u as s,m as e,a as lt,B as M,C as rr,f as Ee,F as Fa,R as Ae,aq as sr,n as S,ar as nr}from"./SWWSvUpQ.js";import{f as _,a as i,c as kt,t as Dt}from"./D8ekX_8E.js";import{a as G,i as m,k as Ut,b as Bt,e as ee,s as T,p as At}from"./CU3XCoqN.js";import{i as ct}from"./Bgyk9asy.js";import{e as Ze,i as ya}from"./YJAcq9su.js";import{r as za,b as or,s as et,i as ir,c as lr,d as cr,e as dr}from"./DdQSbrzx.js";import{b as vr}from"./CvxMDV_e.js";import{e as ur,g as Wt,i as _r,h as Ca,d as Vt,b as zt,a as Yt,j as Xt}from"./Dy2Bvcee.js";import{s as Ta,C as pr,A as fr,E as br}from"./C-cdB9ZU.js";import{z as ha,v as Pa,B as mr,e as aa,p as oe,i as ye,O as Gt,P as he,f as Ge}from"./Dyb6OuQt.js";import{C as $a,E as gr,c as La}from"./D7adWxr2.js";import{S as Ba}from"./D9YuIQc8.js";import{v as ea,D as ta}from"./DDvya4sx.js";import{s as Jt}from"./DM-tgP-I.js";import{e as Zt}from"./DCggU3jP.js";import{_ as wa}from"./CmsKOCeN.js";import{s as Wa}from"./CdEA5IGF.js";import{B as yr}from"./CzEpTBKX.js";import{R as Ft}from"./kD5nSIae.js";function Ra(de,X,z){const x=ha(de,z),L=ha(X,z),q=+x-Pa(x),h=+L-Pa(L);return Math.round((q-h)/mr)}function hr(de,X){return ur(de,-X)}var wr=_('<button type="button" class="btn-clear-search svelte-14zxluq" aria-label="Clear search" title="Clear search"><i class="bi bi-x-lg"></i></button>'),xr=_("<option> </option>"),$r=_('<div class="col-12 col-md-auto"><select class="form-select form-select" aria-label="Filter by organization"><option>All Organizations</option><!></select></div>'),Er=_('<div class="col-12 col-md-auto"><button type="button" class="btn btn-primary w-100" aria-label="Clear all filters"><i class="bi bi-x-circle me-1"></i> Clear All</button></div>'),kr=_('<div class="search-filter sticky-top svelte-14zxluq"><div class="row g-2"><div class="col-12 col-md"><div class="search-input-wrapper svelte-14zxluq"><input type="text" class="form-control form-control" placeholder="Search..."/> <!></div></div> <!> <!></div></div>');function Dr(de,X){it(X,!1);const z=()=>G(Q,"$searchQuery",q),x=()=>G(te,"$organizationFilter",q),L=()=>G(A,"$currentOrganizations",q),[q,h]=Bt(),J=p(),{stores:{currentOrganizations:A,organizationFilter:te,searchQuery:Q}}=Wt(),g=()=>{Ut(Q,""),Ut(te,"")};k(()=>(z(),x()),()=>{c(J,!!(z()||x()))}),Lt(),ct();var K=kr(),D=a(K),ae=a(D),P=a(ae),_e=a(P);za(_e);var B=l(_e,2);{var we=O=>{var R=wr();ee("click",R,()=>Ut(Q,"")),i(O,R)};m(B,O=>{z()&&O(we)})}t(P),t(ae);var ie=l(ae,2);{var se=O=>{var R=$r(),ne=a(R);M(()=>{x(),rr(()=>{L()})});var I=a(ne);I.value=I.__value="";var V=l(I);Ze(V,1,L,ya,(pe,Se)=>{var xe=xr(),Y=a(xe,!0);t(xe);var Ne={};M(()=>{T(Y,(e(Se),s(()=>e(Se).label))),Ne!==(Ne=(e(Se),s(()=>e(Se).key)))&&(xe.value=(xe.__value=(e(Se),s(()=>e(Se).key)))??"")}),i(pe,xe)}),t(ne),t(R),or(ne,x,pe=>Ut(te,pe)),i(O,R)};m(ie,O=>{L(),s(()=>L().length)&&O(se)})}var ke=l(ie,2);{var W=O=>{var R=Er(),ne=a(R);t(R),ee("click",ne,g),i(O,R)};m(ke,O=>{e(J)&&O(W)})}t(D),t(K),vr(_e,z,O=>Ut(Q,O)),i(de,K),lt(),h()}var Ar=_('<p class="mb-0">No past events to delete.</p>'),Or=_('<p class="mb-2"><strong> </strong></p>'),Ir=_(`<div class="alert alert-warning mb-0" role="alert"><p class="mb-2"><strong> </strong></p> <p class="mb-0 small">These recurring events have active future instances and cannot be deleted until all
								future occurrences have passed.</p></div>`),Sr=_("<!> <!>",1),Mr=_('<div class="modal svelte-1u875uh" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-primary text-white"><h5 class="modal-title">Delete Past Events - Results</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><!></div> <div class="modal-footer"><button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function Cr(de,X){it(X,!1);let z=At(X,"deleted",8),x=At(X,"skipped",8),L=At(X,"callback",8);function q(){L()()}ct();var h=Mr(),J=a(h),A=a(J),te=a(A),Q=l(a(te),2);t(te);var g=l(te,2),K=a(g);{var D=B=>{var we=Ar();i(B,we)},ae=B=>{var we=Sr(),ie=Ee(we);{var se=O=>{var R=Or(),ne=a(R),I=a(ne);t(ne),t(R),M(()=>T(I,`✓ Deleted ${z()??""} past event${z()===1?"":"s"}.`)),i(O,R)};m(ie,O=>{z()>0&&O(se)})}var ke=l(ie,2);{var W=O=>{var R=Ir(),ne=a(R),I=a(ne),V=a(I);t(I),t(ne),Fa(2),t(R),M(()=>T(V,`⚠ Skipped ${x()??""} recurring event${x()===1?"":"s"}`)),i(O,R)};m(ke,O=>{x()>0&&O(W)})}i(B,we)};m(K,B=>{z()===0&&x()===0?B(D):B(ae,!1)})}t(g);var P=l(g,2),_e=a(P);t(P),t(A),t(J),t(h),ee("click",Q,q),ee("click",_e,q),i(de,h),lt()}var Tr=_(`<div class="modal svelte-dmsnaa" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Past Events</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong></p> <p class="mb-0 text-muted small">This action cannot be undone. Recurring events with future instances will be skipped
					automatically.</p></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-danger">Delete</button></div></div></div></div>`);function Pr(de,X){it(X,!1);let z=At(X,"cutoffDate",8),x=At(X,"callback",8);function L(){x()(!0)}function q(){x()(!1)}ct();var h=Tr(),J=a(h),A=a(J),te=a(A),Q=l(a(te),2);t(te);var g=l(te,2),K=a(g),D=a(K),ae=a(D);t(D),t(K),Fa(2),t(g);var P=l(g,2),_e=a(P),B=l(_e,2);t(P),t(A),t(J),t(h),M(()=>T(ae,`Are you sure you want to delete all events that occurred before ${z()??""}?`)),ee("click",Q,q),ee("click",_e,q),ee("click",B,L),i(de,h),lt()}var Rr=_('<button class="btn btn-sm btn-primary w-100"><i class="bi bi-clock-history me-1"></i> </button>'),Ur=_('<button class="btn btn-sm btn-outline-danger" type="button"><!></button>'),Fr=_('<div class="d-flex align-items-center justify-content-end ms-auto"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit past event"><i class="bi bi-pencil-square"></i></button></div>'),zr=_('<div class="d-flex flex-row align-items-start gap-3 w-100"><div class="flex-grow-1"><!></div> <!></div>'),Lr=_('<li class="list-group-item py-3"><div class="d-flex flex-column flex-md-row gap-3"><div class="event-date-column d-flex flex-column align-items-start text-nowrap svelte-1ichfmm"><strong> </strong> <small class="text-muted"> </small></div> <div class="d-flex flex-column gap-3 flex-grow-1"></div></div></li>'),Br=_('<li class="list-group-item py-3 text-muted">No events scheduled this week.</li>'),Wr=_('<li class="list-group-item list-group-item-light text-uppercase small fw-lighter p-0"><button><span class="d-flex align-items-center gap-2"><i></i> <span class="text-muted"> </span></span> <span> </span></button></li> <!>',1),Nr=_('<li class="list-group-item bg-secondary text-white fw-semibold"> </li> <!>',1),jr=_('<button class="btn btn-outline-secondary btn-sm">Reset</button>'),qr=_('<div class="d-flex gap-2"><button class="btn btn-primary btn-sm">More</button> <button class="btn btn-outline-primary btn-sm">All</button></div>'),Hr=_('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <!></div>'),Qr=_('<ul class="list-group list-group-flush border-top-0"></ul> <!>',1),Kr=_('<div class="card-body text-muted small">No past events available.</div>'),Vr=_('<div class="card"><div class="card-header"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap fw-lighter"><span>Past Events</span> <div class="d-flex gap-2"><!> <button class="btn btn-sm btn-primary">Hide</button></div></div></div> <!></div>'),Yr=_('<div class="d-flex flex-column gap-4"><!></div>'),Xr=_("<!> <!> <!> <!>",1);function Jr(de,X){it(X,!1);const z=()=>G(Se,"$weeksExpanded",g),x=()=>G(re,"$allPastEvents",g),L=()=>G(O,"$currentUser",g),q=()=>G(I,"$userOrganizations",g),h=()=>G(W,"$currentUserHasPermission",g),J=()=>G(ne,"$currentUserIsRoot",g),A=()=>G(R,"$currentUserIsAdmin",g),te=()=>G(V,"$ready",g),Q=()=>G(xe,"$searchQuery",g),[g,K]=Bt(),D=p(),ae=p(),P=p(),_e=p(),B=p(),we=p(),ie=p(),se=p(),ke=p(),{stores:{currentUserHasPermission:W,currentUser:O,currentUserIsAdmin:R,currentUserIsRoot:ne,userOrganizations:I}}=aa(),{stores:{ready:V,dbData:pe,weeksExpanded:Se,searchQuery:xe},actions:{reload:Y}}=Wt(),Ne={title:"Event",description:"",location:"",event_type:"calendar_event",is_public:!0};let Qe=At(X,"formId",24,ea),mt=p(!1),Ke=p(!1),tt=p(),dt=p(!1),vt=p(!1),Ve=p(!1),Ye=p(new Set),Le=p(!1),gt=p(""),at=p({...Ne}),Xe=p(!1),v=p(""),y=p(!1),f=p({deleted:0,skipped:0});const H=4,fe=4;let ve=p(H),Me=p(!1);const U=Jt();let o=p({});function u(n){return e(D).includes(n)}function b(n){const d=e(o)[n]??u(n);c(o,{...e(o),[n]:!d})}const $=n=>{c(gt,"Event Item"),c(at,{...n,organization:n?.meta_data?.organization??""})},re=tr(pe,n=>{const d=Jt();return(n??[]).filter(r=>!(r.event_type!=="calendar_event"||!r.start_time||oe(r.start_time)>=d||r.recurrence_rule&&(!r.recurrence_end_date||r.recurrence_end_date&&oe(r.recurrence_end_date)>=d)))}),De=n=>La(n,{currentUserId:e(tt),isPrivileged:e(Ke),canEditOwnOrgEvents:e(Ve),userOrganizations:e(Ye)});let ue=p(!1);function F(){c(ve,e(ve)+fe)}function Oe(){c(ve,520),c(Me,!0)}function Ce(){c(ve,H),c(Me,!1)}const Be=()=>{if(!e(mt)||e(Le)||!ar(ne)||!e(se))return;const n=Jt();c(v,ye(n,"MMM d, yyyy")),c(Xe,!0)};async function We(n){if(c(Xe,!1),!n)return;const d=Jt();c(Le,!0);try{const r=await _r(d);await Y(),c(f,r),c(y,!0)}catch(r){console.error("Failed to delete past events",r),alert("Failed to delete past events. Please try again.")}finally{c(Le,!1)}}function rt(){c(y,!1)}xa(async()=>{await Y()}),k(()=>(x(),e(ve)),()=>{c(P,(x()??[]).filter(n=>{if(!n.start_time)return!1;const d=oe(n.start_time),r=hr(U,e(ve));return d>=r&&d<U}))}),k(()=>(e(P),ye),()=>{c(B,(()=>{const n=new Map;for(const d of e(P)){if(!d.start_time)continue;const r=oe(d.start_time),w=ha(r,{weekStartsOn:1}),N=Zt(r,{weekStartsOn:1}),j=ye(w,"yyyy-MM-dd"),be=`${ye(w,"MMM d")} – ${ye(N,"MMM d")}`;let le=n.get(j);le||(le={key:j,label:be,days:new Map},n.set(j,le));const ce=ye(r,"yyyy-MM-dd");let $e=le.days.get(ce);$e||($e={key:ce,displayDay:ye(r,"EEE"),displayDate:ye(r,"MMM d"),events:[]},le.days.set(ce,$e)),$e.events.push(d)}return Array.from(n.values()).sort((d,r)=>d.key<r.key?1:-1).map(d=>({key:d.key,label:d.label,days:Array.from(d.days.values()).sort((r,w)=>r.key<w.key?1:-1).map(r=>({...r,events:r.events.slice().sort((w,N)=>{const j=w.is_all_day?0:1,be=N.is_all_day?0:1;if(j!==be)return j-be;const le=w.start_time?oe(w.start_time).getTime():Number.MAX_SAFE_INTEGER,ce=N.start_time?oe(N.start_time).getTime():Number.MAX_SAFE_INTEGER;return le-ce})}))}))})())}),k(()=>e(B),()=>{c(D,(()=>{if(e(B).length===0)return[];const n=[];return e(B)[0]&&n.push(e(B)[0].key),e(B)[1]&&n.push(e(B)[1].key),n})())}),k(()=>(z(),e(o)),()=>{c(ae,n=>z()?!0:e(o)[n]!==void 0?e(o)[n]:u(n))}),k(()=>e(P),()=>{c(_e,e(P).length)}),k(()=>(e(B),ye),()=>{c(we,e(B).reduce((n,d)=>{const r=oe(d.key),w=Zt(r,{weekStartsOn:1}),N=ye(w,"yyyy-MM"),j=ye(w,"MMMM yyyy");return n[N]||(n[N]={label:j,weeks:[]}),n[N].weeks.push(d),n},{}))}),k(()=>L(),()=>{c(tt,L()?.id)}),k(()=>q(),()=>{c(Ye,q())}),k(()=>e(tt),()=>{c(vt,!!e(tt))}),k(()=>(e(Ye),Gt),()=>{c(dt,e(Ye).has(Gt.Bishopric))}),k(()=>(h(),he),()=>{c(Ve,h()(he.EditOwnOrgEvents))}),k(()=>(J(),A(),e(dt),h(),he),()=>{c(Ke,J()||A()||e(dt)||h()(he.EditAllEvents))}),k(()=>(e(Ke),h(),e(Ve),e(vt)),()=>{c(mt,e(Ke)||h()(he.CreateEvents)||e(Ve)||e(vt))}),k(()=>(h(),he),()=>{c(ie,h()(he.DeleteEvents))}),k(()=>e(P),()=>{c(se,e(P).length>0)}),k(()=>(x(),e(P)),()=>{c(ke,x().length>e(P).length)}),Lt(),ct();var st=Xr(),nt=Ee(st);ta(nt,{get title(){return e(gt)},get id(){return Qe()},children:(n,d)=>{$a(n,{get eventItem(){return e(at)},get drawerId(){return Qe()},name:"past-event-item-form",get canDelete(){return e(ie)}})},$$slots:{default:!0}});var Te=l(nt,2);{var yt=n=>{var d=kt(),r=Ee(d);{var w=j=>{var be=kt(),le=Ee(be);{var ce=je=>{var Pe=Rr(),Je=l(a(Pe));t(Pe),M(()=>T(Je,` Show Past Events (${x(),s(()=>x().length)??""})`)),ee("click",Pe,()=>c(ue,!0)),i(je,Pe)},$e=je=>{var Pe=Vr(),Je=a(Pe),Nt=a(Je),It=l(a(Nt),2),St=a(It);{var ra=Re=>{var Fe=Ur(),ut=a(Fe);{var Ct=me=>{var Ue=Dt("Deleting…");i(me,Ue)},_t=me=>{var Ue=Dt();M(()=>T(Ue,`Delete All (${e(_e)??""})`)),i(me,Ue)};m(ut,me=>{e(Le)?me(Ct):me(_t,!1)})}t(Fe),M(()=>Fe.disabled=e(Le)),ee("click",Fe,Be),i(Re,Fe)};m(St,Re=>{J()&&e(se)&&Re(ra)})}var Mt=l(St,2);t(It),t(Nt),t(Je);var jt=l(Je,2);{var sa=Re=>{var Fe=Qr(),ut=Ee(Fe);Ze(ut,5,()=>(e(we),s(()=>Object.entries(e(we)))),([me,Ue])=>me,(me,Ue)=>{var pt=sr(()=>nr(e(Ue),2));let ot=()=>e(pt)[1];var ft=Nr(),qe=Ee(ft),xt=a(qe,!0);t(qe);var He=l(qe,2);Ze(He,1,()=>(ot(),s(()=>ot().weeks)),ze=>ze.key,(ze,ge)=>{const E=Ae(()=>(S(oe),e(ge),s(()=>oe(e(ge).key)))),C=Ae(()=>(S(Zt),S(e(E)),s(()=>Zt(e(E),{weekStartsOn:1})))),Ie=Ae(()=>(S(Ta),S(e(C)),s(()=>Ta(e(C))))),bt=Ae(()=>(S(Ra),S(e(C)),S(e(Ie)),s(()=>Ra(e(C),e(Ie),{weekStartsOn:1})+1))),oa=Ae(()=>(e(ae),e(ge),s(()=>e(ae)(e(ge).key)))),qt=Ae(()=>(e(ge),s(()=>e(ge).days.reduce((Pt,Ht)=>Pt+Ht.events.length,0))));var Ea=Wr(),ia=Ee(Ea),Tt=a(ia);let ka;var la=a(Tt),Da=a(la),Aa=l(Da,2),Na=a(Aa);t(Aa),t(la);var ca=l(la,2);let Oa;var ja=a(ca,!0);t(ca),t(Tt),t(ia);var qa=l(ia,2);{var Ha=Pt=>{var Ht=kt(),Qa=Ee(Ht);{var Ka=$t=>{var Qt=kt(),Ya=Ee(Qt);Ze(Ya,1,()=>(e(ge),s(()=>e(ge).days)),da=>da.key,(da,Et)=>{var va=Lr(),Ia=a(va),ua=a(Ia),_a=a(ua),Xa=a(_a,!0);t(_a);var Sa=l(_a,2),Ja=a(Sa,!0);t(Sa),t(ua);var Ma=l(ua,2);Ze(Ma,5,()=>(e(Et),s(()=>e(Et).events)),Rt=>Rt.id??`${Rt.start_time}-${Rt.meta_data?.recurring_instance_index??0}`,(Rt,Kt)=>{var pa=zr(),fa=a(pa),Za=a(fa);gr(Za,{get item(){return e(Kt)},showDate:!1,get searchQuery(){return Q()}}),t(fa);var Ga=l(fa,2);{var er=ba=>{var ma=Fr(),ga=a(ma);t(ma),M(()=>{et(ga,"data-bs-target",`#${Qe()??""}`),et(ga,"aria-controls",Qe())}),ee("click",ga,()=>$(e(Kt))),i(ba,ma)};m(Ga,ba=>{e(Kt),s(()=>De(e(Kt)))&&ba(er)})}t(pa),i(Rt,pa)}),t(Ma),t(Ia),t(va),M(()=>{T(Xa,(e(Et),s(()=>e(Et).displayDay))),T(Ja,(e(Et),s(()=>e(Et).displayDate)))}),i(da,va)}),i($t,Qt)},Va=$t=>{var Qt=Br();i($t,Qt)};m(Qa,$t=>{e(ge),s(()=>e(ge).days.length)?$t(Ka):$t(Va,!1)})}i(Pt,Ht)};m(qa,Pt=>{e(oa)&&Pt(Ha)})}M(()=>{ka=Ge(Tt,1,"week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-1ichfmm",null,ka,{"text-muted":e(qt)===0}),et(Tt,"title",e(oa)?"Click to collapse week":"Click to expand week"),Ge(Da,1,`bi ${e(oa)?"bi-chevron-up":"bi-chevron-down"}`),T(Na,`Week ${e(bt)??""} [${e(qt)??""} Event${e(qt)===1?"":"s"}]`),Oa=Ge(ca,1,"",null,Oa,{"opacity-50":e(qt)===0}),T(ja,(e(ge),s(()=>e(ge).label)))}),ee("click",Tt,()=>b(e(ge).key)),i(ze,Ea)}),M(()=>T(xt,(ot(),s(()=>ot().label)))),i(me,ft)}),t(ut);var Ct=l(ut,2);{var _t=me=>{var Ue=Hr(),pt=a(Ue),ot=a(pt);t(pt);var ft=l(pt,2);{var qe=He=>{var ze=jr();ee("click",ze,Ce),i(He,ze)},xt=He=>{var ze=qr(),ge=a(ze),E=l(ge,2);t(ze),ee("click",ge,F),ee("click",E,Oe),i(He,ze)};m(ft,He=>{e(Me)?He(qe):He(xt,!1)})}t(Ue),M(()=>T(ot,`Showing ${e(P),s(()=>e(P)?.length??0)??""} of ${x(),s(()=>x()?.length??0)??""}`)),i(me,Ue)};m(Ct,me=>{(e(ke)||e(Me))&&me(_t)})}i(Re,Fe)},na=Re=>{var Fe=Kr();i(Re,Fe)};m(jt,Re=>{e(B),s(()=>e(B).length)?Re(sa):Re(na,!1)})}t(Pe),ee("click",Mt,()=>c(ue,!1)),i(je,Pe)};m(le,je=>{e(ue)?je($e,!1):je(ce)})}i(j,be)},N=j=>{var be=Yr(),le=a(be);Ba(le,{}),t(be),i(j,be)};m(r,j=>{te()?j(w):j(N,!1)})}i(n,d)};m(Te,n=>{J()&&n(yt)})}var ht=l(Te,2);{var wt=n=>{Pr(n,{get cutoffDate(){return e(v)},callback:We})};m(ht,n=>{e(Xe)&&n(wt)})}var Ot=l(ht,2);{var Z=n=>{Cr(n,{get deleted(){return e(f),s(()=>e(f).deleted)},get skipped(){return e(f),s(()=>e(f).skipped)},callback:rt})};m(Ot,n=>{e(y)&&n(Z)})}i(de,st),lt(),K()}var Zr=_("<span> </span>"),Gr=_('<span class="badge bg-secondary">All Day</span>'),es=_('<span class="result-time svelte-1xkw8oa"> </span>'),ts=_('<span class="result-date svelte-1xkw8oa"> </span> <!>',1),as=_('<span class="result-location svelte-1xkw8oa"><i class="bi bi-geo-alt"></i> <!></span>'),rs=_('<div class="result-thumbnail-container svelte-1xkw8oa"><img class="result-thumbnail svelte-1xkw8oa"/></div>'),ss=_('<div class="result-actions svelte-1xkw8oa"><button type="button" class="btn btn-sm btn-primary"><i class="bi bi-pencil"></i></button></div>'),ns=_('<li class="list-group-item list-group-item-action d-flex align-items-center gap-3"><span></span> <button type="button" class="result-details-button svelte-1xkw8oa"><div class="result-header svelte-1xkw8oa"><div class="result-title svelte-1xkw8oa"><!></div> <span class="result-type-badge badge bg-secondary-subtle text-secondary-emphasis svelte-1xkw8oa"> </span></div> <div class="result-meta svelte-1xkw8oa"><!> <!> <!></div></button> <!> <!></li>'),os=_('<div class="unified-search-results svelte-1xkw8oa"><div class="search-results-header svelte-1xkw8oa"><h6 class="search-results-title svelte-1xkw8oa"> </h6></div> <ul class="list-group list-group-flush"></ul></div>'),is=_('<div class="no-search-results svelte-1xkw8oa"> </div>'),ls=_("<!> <!> <!>",1);function cs(de,X){it(X,!1);const z=()=>G(ae,"$currentUser",Q),x=()=>G(we,"$userOrganizations",Q),L=()=>G(P,"$currentUserHasPermission",Q),q=()=>G(B,"$currentUserIsRoot",Q),h=()=>G(_e,"$currentUserIsAdmin",Q),J=()=>G(ie,"$calendarEvents",Q),A=()=>G(ke,"$searchQuery",Q),te=()=>G(se,"$announcements",Q),[Q,g]=Bt(),K=p(),D=p(),{stores:{currentUser:ae,currentUserHasPermission:P,currentUserIsAdmin:_e,currentUserIsRoot:B,userOrganizations:we}}=aa(),{stores:{calendarEvents:ie,announcements:se,searchQuery:ke}}=Wt(),W=ea(),O=ea();let R=p(!1),ne=p(),I=p(!1),V=p(!1),pe=p(new Set),Se=p(""),xe=p({title:"",description:"",location:"",event_type:"calendar_event",is_public:!0}),Y=p({title:"",description:"",location:"",event_type:"calendar_event",is_public:!0}),Ne=p(!1);const Qe=v=>La(v,{currentUserId:e(ne),isPrivileged:e(R),canEditOwnOrgEvents:e(V),userOrganizations:e(pe)}),mt=v=>v.startsWith("image/"),Ke=async v=>{const y=v.itemType==="announcement"?"announcement":"calendar_event";if(c(Se,`${v.itemType==="announcement"?"Announcement":"Event"} Form`),v?.meta_data?.recurring_instance&&v?.meta_data?.recurring_parent_id){const{getCalendarEvent:f}=await wa(async()=>{const{getCalendarEvent:fe}=await import("./Dy2Bvcee.js").then(ve=>ve.x);return{getCalendarEvent:fe}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),H=await f(v.meta_data.recurring_parent_id);if(H){c(xe,{...H,organization:H?.meta_data?.organization??"",event_type:y,start_time:v.start_time,end_time:v.end_time,meta_data:{...H.meta_data,recurring_instance:!0,recurring_parent_id:v.meta_data.recurring_parent_id,recurring_instance_index:v.meta_data.recurring_instance_index}});return}}c(xe,{...v,organization:v?.meta_data?.organization??"",event_type:y})},tt=async v=>{if(v?.meta_data?.recurring_instance&&v?.meta_data?.recurring_parent_id){const{getCalendarEvent:f}=await wa(async()=>{const{getCalendarEvent:fe}=await import("./Dy2Bvcee.js").then(ve=>ve.x);return{getCalendarEvent:fe}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),import.meta.url),H=await f(v.meta_data.recurring_parent_id);H?c(Y,{...H,start_time:v.start_time,end_time:v.end_time,meta_data:{...H.meta_data,recurring_instance:!0,recurring_parent_id:v.meta_data.recurring_parent_id,recurring_instance_index:v.meta_data.recurring_instance_index}}):c(Y,v)}else c(Y,v);const y=document.getElementById(O);y&&new window.bootstrap.Offcanvas(y).show()},dt=async v=>{await Ke(v);const y=document.getElementById(W);y&&new window.bootstrap.Offcanvas(y).show()},vt=async()=>{const v=document.getElementById(O);if(v){const y=window.bootstrap.Offcanvas.getInstance(v);y&&y.hide()}await Ke(e(Y)),setTimeout(()=>{const y=document.getElementById(W);y&&new window.bootstrap.Offcanvas(y).show()},300)};k(()=>z(),()=>{c(ne,z()?.id)}),k(()=>x(),()=>{c(pe,x())}),k(()=>(e(pe),Gt),()=>{c(I,e(pe).has(Gt.Bishopric))}),k(()=>(L(),he),()=>{c(V,L()(he.EditOwnOrgEvents))}),k(()=>(q(),h(),e(I),L(),he),()=>{c(R,q()||h()||e(I)||L()(he.EditAllEvents))}),k(()=>(L(),he),()=>{c(Ne,L()(he.DeleteEvents))}),k(()=>(J(),oe),()=>{c(K,(J()??[]).filter(v=>v.start_time?oe(v.start_time)>=new Date:!1))}),k(()=>(A(),e(K),te(),oe),()=>{c(D,A()?[...e(K).filter(v=>{const y=A().toLowerCase(),f=(v.title||"").toLowerCase(),H=(v.description||"").replace(/<[^>]*>/g,"").toLowerCase(),fe=(v.location||"").toLowerCase();return f.includes(y)||H.includes(y)||fe.includes(y)}).map(v=>({...v,itemType:"event"})),...(te()??[]).filter(v=>{const y=A().toLowerCase(),f=(v.title||"").toLowerCase(),H=(v.description||"").replace(/<[^>]*>/g,"").toLowerCase(),fe=(v.location||"").toLowerCase();return f.includes(y)||H.includes(y)||fe.includes(y)}).map(v=>({...v,itemType:"announcement"}))].sort((v,y)=>{const f=v.start_time?oe(v.start_time).getTime():0,H=y.start_time?oe(y.start_time).getTime():0;return f===0&&H!==0?-1:f!==0&&H===0?1:f-H}):[])}),Lt(),ct();var Ve=ls(),Ye=Ee(Ve);ta(Ye,{get title(){return e(Se)},get id(){return W},children:(v,y)=>{$a(v,{get eventItem(){return e(xe)},get drawerId(){return W},name:"unified-search-form",get canDelete(){return e(Ne)}})},$$slots:{default:!0}});var Le=l(Ye,2);ta(Le,{title:"Details",get id(){return O},children:(v,y)=>{{let f=Ae(()=>(e(Y),s(()=>Qe(e(Y)))));pr(v,{get event(){return e(Y)},get canEdit(){return e(f)},onEdit:vt})}},$$slots:{default:!0}});var gt=l(Le,2);{var at=v=>{var y=os(),f=a(y),H=a(f),fe=a(H);t(H),t(f);var ve=l(f,2);Ze(ve,5,()=>e(D),Me=>Me.id??Me.start_time??Math.random(),(Me,U)=>{const o=Ae(()=>(e(U),s(()=>e(U).attachments?.find(d=>mt(d.type))))),u=Ae(()=>(S(zt),e(U),s(()=>zt(e(U)?.meta_data?.organization??"")))),b=Ae(()=>(e(U),s(()=>e(U).itemType==="event")));var $=ns(),re=a($),De=l(re,2),ue=a(De),F=a(ue),Oe=a(F);Ca(Oe,()=>(S(Vt),e(U),A(),s(()=>Vt(e(U).title,A())))),t(F);var Ce=l(F,2),Be=a(Ce,!0);t(Ce),t(ue);var We=l(ue,2),rt=a(We);{var st=d=>{var r=Zr(),w=a(r,!0);t(r),M(()=>{Ge(r,1,`badge rounded-pill bg-color-${S(e(u)),s(()=>e(u).color_number)??""}`,"svelte-1xkw8oa"),T(w,(S(e(u)),s(()=>e(u).label)))}),i(d,r)};m(rt,d=>{S(e(u)),s(()=>e(u)?.label)&&d(st)})}var nt=l(rt,2);{var Te=d=>{var r=ts(),w=Ee(r),N=a(w,!0);t(w);var j=l(w,2);{var be=ce=>{var $e=Gr();i(ce,$e)},le=ce=>{var $e=es(),je=a($e,!0);t($e),M(Pe=>T(je,Pe),[()=>(S(ye),S(oe),e(U),s(()=>ye(oe(e(U).start_time),"h:mm a")))]),i(ce,$e)};m(j,ce=>{e(U),s(()=>e(U).is_all_day)?ce(be):ce(le,!1)})}M(ce=>T(N,ce),[()=>(S(ye),S(oe),e(U),s(()=>ye(oe(e(U).start_time),"MMM d, yyyy")))]),i(d,r)};m(nt,d=>{e(U),s(()=>e(U).start_time)&&d(Te)})}var yt=l(nt,2);{var ht=d=>{var r=as(),w=l(a(r),2);Ca(w,()=>(S(Vt),e(U),A(),s(()=>Vt(e(U).location,A())))),t(r),i(d,r)};m(yt,d=>{e(U),s(()=>e(U).location)&&d(ht)})}t(We),t(De);var wt=l(De,2);{var Ot=d=>{var r=rs(),w=a(r);t(r),M(()=>{et(w,"src",(S(e(o)),s(()=>e(o).url))),et(w,"alt",(S(e(o)),s(()=>e(o).name)))}),i(d,r)};m(wt,d=>{e(o)&&d(Ot)})}var Z=l(wt,2);{var n=d=>{var r=ss(),w=a(r);t(r),M(()=>et(w,"title",`Edit ${e(b)?"event":"announcement"}`)),ee("click",w,Wa(()=>dt(e(U)))),i(d,r)};m(Z,d=>{e(U),s(()=>Qe(e(U)))&&d(n)})}t($),M(()=>{Ge(re,1,`result-color-indicator bg-color-${S(e(u)),s(()=>e(u)?.color_number??0)??""}`,"svelte-1xkw8oa"),T(Be,e(b)?"Event":"Announcement")}),ee("click",De,()=>tt(e(U))),i(Me,$)}),t(ve),t(y),M(()=>T(fe,`${e(D),s(()=>e(D).length)??""} result${e(D),s(()=>e(D).length===1?"":"s")??""} matching "${A()??""}"`)),i(v,y)},Xe=v=>{var y=kt(),f=Ee(y);{var H=fe=>{var ve=is(),Me=a(ve);t(ve),M(()=>T(Me,`No results match your search for "${A()??""}"`)),i(fe,ve)};m(f,fe=>{A()&&fe(H)},!0)}i(v,y)};m(gt,v=>{A(),e(D),s(()=>A()&&e(D).length>0)?v(at):v(Xe,!1)})}i(de,Ve),lt(),g()}var ds=_("<!> <!> <!>",1),vs=_('<div class="d-flex flex-column gap-4"><!> <!></div>');function Ua(de,X){it(X,!1);const z=()=>G(q,"$searchQuery",x),[x,L]=Bt(),{stores:{searchQuery:q}}=Wt();ct();var h=vs(),J=a(h);Dr(J,{});var A=l(J,2);{var te=g=>{cs(g,{})},Q=g=>{var K=ds(),D=Ee(K);fr(D,{});var ae=l(D,2);br(ae,{});var P=l(ae,2);Jr(P,{}),i(g,K)};m(A,g=>{z()?g(te):g(Q,!1)})}t(h),i(de,h),lt(),L()}var us=_('<div class="d-flex justify-content-center align-items-center py-5"><!></div>'),_s=_('<button type="button" role="tab"> </button>'),ps=_("<option> </option>"),fs=_('<div class="py-5 text-center text-muted"><!></div>'),bs=_('<div class="description-preview text-muted small mb-1 svelte-9fakr"> </div>'),ms=_("<span> </span>"),gs=_('<span class="badge rounded-pill bg-secondary-subtle text-secondary-emphasis">Uncategorized</span>'),ys=_('<span><i class="bi bi-geo-alt"></i> </span>'),hs=_('<span><i class="bi bi-arrow-repeat"></i> </span>'),ws=_('<span><i class="bi bi-calendar3"></i> </span>'),xs=_('<span class="text-muted small"> </span>'),$s=_('<div class="submission-card text-start svelte-9fakr" role="button" tabindex="0"><div class="d-flex justify-content-between align-items-start gap-3 mb-1"><div class="fw-semibold"> </div> <div class="d-flex align-items-center gap-2"><span class="badge bg-light text-dark"> </span> <button class="btn btn-sm btn-primary" type="button"><i class="bi bi-pencil-square"></i></button></div></div> <!> <div class="d-flex flex-wrap align-items-center gap-2 small text-muted mb-1"><!> <!> <!></div> <div class="d-flex flex-wrap align-items-center gap-2 small text-muted mb-1"><span><i class="bi bi-clock"></i> </span> <!></div> <div class="d-flex flex-wrap align-items-center gap-2"><span><i></i> </span> <!></div></div>'),Es=_('<div class="d-flex flex-column gap-3"></div>'),ks=_('<div class="my-submissions-page d-flex flex-column gap-4 svelte-9fakr"><div class="card"><div class="card-header d-flex flex-column gap-3"><div class="d-flex flex-md-row align-items-center justify-content-between gap-2"><div class="mb-0">My Submissions</div> <button class="btn btn-primary btn-sm"><!></button></div> <div class="submissions-status-tabs nav nav-pills gap-2" role="tablist"></div></div> <div class="card-body d-flex flex-column gap-3"><div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3"><div class="input-group input-group-sm my-submissions-search svelte-9fakr"><input class="form-control svelte-9fakr" type="search" placeholder="Search title, category, or location"/></div> <div class="type-filter-select svelte-9fakr"><select class="form-select form-select-sm"></select></div></div> <!></div></div></div>'),Ds=_('<div class="text-muted">Select a submission to edit.</div>'),As=_("<!> <!>",1);function Os(de,X){it(X,!1);const z=()=>G(B,"$currentUserStore",h),x=()=>G(we,"$currentUserHasPermission",h),L=()=>G(P,"$dbData",h),q=()=>G(ae,"$ready",h),[h,J]=Bt(),A=p(),te=p(),Q=p(),g=p(),K=p(),D=p(),{stores:{ready:ae,dbData:P},actions:{reload:_e}}=Wt(),{stores:{currentUser:B,currentUserHasPermission:we}}=aa();let ie=p(!1),se=p([]),ke=p([]),W=p(null);const O=ea();let R=null;const ne={approved:"var(--bs-success)",pending:"var(--bs-warning)",needs_review:"var(--bs-info)",published:"var(--bs-primary)"},I={pending:{text:"Awaiting Approval",class:"bg-warning-subtle text-warning-emphasis",icon:"bi-hourglass-split"},needs_review:{text:"Changes Suggested",class:"bg-info-subtle text-info-emphasis",icon:"bi-pencil"},approved:{text:"Approved — Awaiting Publish",class:"bg-success-subtle text-success-emphasis",icon:"bi-check-circle"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis",icon:"bi-globe"}},V={pending:"Pending",needs_review:"Changes Suggested",approved:"Approved",published:"Published"},pe=[{value:"pending",label:V.pending},{value:"needs_review",label:V.needs_review},{value:"approved",label:V.approved},{value:"published",label:V.published}],Se=[{value:"all",label:"Events & Announcements"},{value:"events",label:"Events only"},{value:"announcements",label:"Announcements only"}],xe=()=>({search:"",typeFilter:"all"});let Y=p({pending:xe(),needs_review:xe(),approved:xe(),published:xe()});xa(async()=>{c(ie,!0),await _e(),c(ie,!1),typeof window<"u"&&(R=(await wa(()=>import("./DO0djbQe.js").then(u=>u.o),__vite__mapDeps([27,28]),import.meta.url)).default)});const Ne=o=>{const u=o.meta_data?.submitted_at??o.created_at;if(!u)return 0;try{return oe(u).getTime()}catch(b){return console.warn("Failed to parse submission timestamp",b),0}},Qe=o=>{const u=o.meta_data?.submitted_at??o.created_at;if(!u)return"—";try{return ye(oe(u),"MMM d, yyyy 'at' h:mm a")}catch(b){return console.warn("Failed to format submission timestamp",b),"—"}},mt=o=>{if(!o.start_time)return"—";try{return ye(oe(o.start_time),"MMM d, yyyy 'at' h:mm a")}catch(u){return console.warn("Failed to format event date",u),"—"}},Ke=o=>o.replace(/<[^>]*>/g,""),tt=(o,u)=>o.length<=u?o:o.substring(0,u).trimEnd()+"…",dt=o=>o.description?tt(Ke(o.description).trim(),120):"",vt=o=>{try{const b=Ft.fromString(o).origOptions,$=b.interval||1,re=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],De=["","1st","2nd","3rd","4th","5th"];if(b.freq===Ft.DAILY)return $===1?"Repeats daily":`Repeats every ${$} days`;if(b.freq===Ft.WEEKLY){if(b.byweekday){const F=(Array.isArray(b.byweekday)?b.byweekday:[b.byweekday]).map(Oe=>{const Ce=typeof Oe=="number"?Oe:Oe.weekday,Be=Ce===6?0:Ce+1;return re[Be]});return $===1?F.length===1?`Repeats every ${F[0]}`:`Repeats on ${F.join(", ")}`:`Repeats every ${$} weeks on ${F.join(", ")}`}return $===1?"Repeats weekly":`Repeats every ${$} weeks`}if(b.freq===Ft.MONTHLY){if(b.byweekday){const F=(Array.isArray(b.byweekday)?b.byweekday:[b.byweekday])[0];if(F&&typeof F=="object"&&"n"in F&&"weekday"in F){const Oe=F.weekday,Ce=Oe===6?0:Oe+1,Be=F.n,We=De[Be]||`${Be}th`;return $===1?`Repeats on the ${We} ${re[Ce]} of the month`:`Repeats on the ${We} ${re[Ce]} every ${$} months`}}if(b.bymonthday){const ue=Array.isArray(b.bymonthday)?b.bymonthday[0]:b.bymonthday,F=ue===1?"st":ue===2?"nd":ue===3?"rd":"th";return $===1?`Repeats on the ${ue}${F} of the month`:`Repeats on the ${ue}${F} every ${$} months`}return $===1?"Repeats monthly":`Repeats every ${$} months`}return b.freq===Ft.YEARLY?$===1?"Repeats yearly":`Repeats every ${$} years`:"Repeats"}catch{return"Repeats"}},Ve=(o,u)=>{const b=u.trim().toLowerCase();if(!b)return!0;const $=o.meta_data?.organization?zt(o.meta_data.organization)?.label??"":"";return[o.title??"",o.description??"",o.location??"",$??""].join(" ").toLowerCase().includes(b)},Ye=(o,u)=>u==="all"?!0:u==="events"?o.event_type==="calendar_event":o.event_type==="announcement";function Le(o,u){c(Y,{...e(Y),[o]:{...e(Y)[o],...u}})}const gt=o=>{const u=new Set,b=[];for(const $ of o){const re=$.meta_data?.recurring_parent_id;if($.meta_data?.recurring_instance&&re!=null){if(u.has(re))continue;u.add(re)}b.push($)}return b},at=o=>o.meta_data?.recurring_parent_id!=null?`recurring-${o.meta_data.recurring_parent_id}`:`id-${o.id}`,Xe=o=>{c(W,o);const u=document.getElementById(O);u&&R&&R.getOrCreateInstance(u).show()},v=(o,u)=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),Xe(u))},y=async()=>{c(ie,!0),await _e(),c(ie,!1)};let f=p("pending");k(()=>z(),()=>{c(A,z())}),k(()=>(x(),he),()=>{c(te,x()(he.DeleteEvents)||x()(he.DeleteOwnEvents))}),k(()=>(L(),e(A)),()=>{c(se,gt((L()??[]).filter(o=>{const u=o.meta_data?.submitted_by_user_id;return u&&e(A)?.id&&u===e(A).id}).sort((o,u)=>Ne(o)-Ne(u))))}),k(()=>e(f),()=>{c(Q,`type-filter-select-submissions-${e(f)}`)}),k(()=>(e(se),Yt),()=>{c(g,pe.reduce((o,u)=>(o[u.value]=e(se).filter(b=>Yt(b)===u.value),o),{}))}),k(()=>(e(Y),e(g)),()=>{c(K,pe.reduce((o,u)=>{const b=e(Y)[u.value],$=(e(g)[u.value]??[]).filter(re=>Ye(re,b.typeFilter));return o[u.value]=$.filter(re=>Ve(re,b.search)),o},{}))}),k(()=>(e(K),e(f)),()=>{c(ke,e(K)[e(f)]??[])}),k(()=>(e(W),e(se)),()=>{e(W)&&!e(se).some(o=>at(o)===at(e(W)))&&c(W,null)}),k(()=>e(W),()=>{c(D,e(W)?{...e(W),id:e(W).id??e(W).meta_data?.recurring_parent_id,organization:e(W).meta_data?.organization??""}:null)}),Lt(),ct();var H=As(),fe=Ee(H);{var ve=o=>{var u=us(),b=a(u);Ba(b,{}),t(u),i(o,u)},Me=o=>{var u=ks(),b=a(u),$=a(b),re=a($),De=l(a(re),2),ue=a(De);{var F=Z=>{var n=Dt("Refreshing…");i(Z,n)},Oe=Z=>{var n=Dt("Refresh");i(Z,n)};m(ue,Z=>{e(ie)?Z(F):Z(Oe,!1)})}t(De),t(re);var Ce=l(re,2);Ze(Ce,5,()=>pe,ya,(Z,n)=>{var d=_s(),r=a(d);t(d),M(()=>{Ge(d,1,(e(f),e(n),s(()=>`nav-link ${e(f)===e(n).value?"active":""}`)),"svelte-9fakr"),et(d,"aria-selected",(e(f),e(n),s(()=>e(f)===e(n).value))),T(r,`${e(n),s(()=>e(n).label)??""} (${e(g),e(n),s(()=>(e(g)[e(n).value]??[]).length)??""})`)}),ee("click",d,()=>c(f,e(n).value)),i(Z,d)}),t(Ce),t($);var Be=l($,2),We=a(Be),rt=a(We),st=a(rt);za(st),t(rt);var nt=l(rt,2),Te=a(nt);Ze(Te,5,()=>Se,ya,(Z,n)=>{var d=ps(),r=a(d,!0);t(d);var w={};M(()=>{T(r,(e(n),s(()=>e(n).label))),w!==(w=(e(n),s(()=>e(n).value)))&&(d.value=(d.__value=(e(n),s(()=>e(n).value)))??"")}),i(Z,d)}),t(Te);var yt;ir(Te),t(nt),t(We);var ht=l(We,2);{var wt=Z=>{var n=fs(),d=a(n);{var r=N=>{var j=Dt("You haven't submitted any events or announcements yet.");i(N,j)},w=N=>{var j=Dt();M(be=>T(j,`No ${be??""} submissions match your current filters.`),[()=>(e(f),s(()=>V[e(f)].toLowerCase()))]),i(N,j)};m(d,N=>{e(se),s(()=>e(se).length===0)?N(r):N(w,!1)})}t(n),i(Z,n)},Ot=Z=>{var n=Es();Ze(n,5,()=>e(ke),d=>at(d),(d,r)=>{const w=Ae(()=>(S(Yt),e(r),s(()=>Yt(e(r))))),N=Ae(()=>(S(e(w)),s(()=>I[e(w)]))),j=Ae(()=>(e(r),S(zt),s(()=>e(r).meta_data?.organization?zt(e(r).meta_data.organization):null))),be=Ae(()=>(e(r),s(()=>dt(e(r)))));var le=$s(),ce=a(le),$e=a(ce),je=a($e,!0);t($e);var Pe=l($e,2),Je=a(Pe),Nt=a(Je,!0);t(Je);var It=l(Je,2);t(Pe),t(ce);var St=l(ce,2);{var ra=E=>{var C=bs(),Ie=a(C,!0);t(C),M(()=>T(Ie,e(be))),i(E,C)};m(St,E=>{e(be)&&E(ra)})}var Mt=l(St,2),jt=a(Mt);{var sa=E=>{var C=ms(),Ie=a(C,!0);t(C),M(()=>{Ge(C,1,`badge rounded-pill bg-color-${S(e(j)),s(()=>e(j).color_number)??""}`,"svelte-9fakr"),T(Ie,(S(e(j)),s(()=>e(j).label)))}),i(E,C)},na=E=>{var C=gs();i(E,C)};m(jt,E=>{e(j)?E(sa):E(na,!1)})}var Re=l(jt,2);{var Fe=E=>{var C=ys(),Ie=l(a(C));t(C),M(()=>T(Ie,` ${e(r),s(()=>e(r).location)??""}`)),i(E,C)};m(Re,E=>{e(r),s(()=>e(r).location)&&E(Fe)})}var ut=l(Re,2);{var Ct=E=>{var C=hs(),Ie=l(a(C));t(C),M(bt=>T(Ie,` ${bt??""}`),[()=>(e(r),s(()=>vt(e(r).recurrence_rule)))]),i(E,C)};m(ut,E=>{e(r),s(()=>e(r).recurrence_rule)&&E(Ct)})}t(Mt);var _t=l(Mt,2),me=a(_t),Ue=l(a(me));t(me);var pt=l(me,2);{var ot=E=>{var C=ws(),Ie=l(a(C));t(C),M(bt=>T(Ie,` Event ${bt??""}`),[()=>(e(r),s(()=>mt(e(r))))]),i(E,C)};m(pt,E=>{e(r),s(()=>e(r).event_type==="calendar_event")&&E(ot)})}t(_t);var ft=l(_t,2),qe=a(ft),xt=a(qe),He=l(xt,1,!0);t(qe);var ze=l(qe,2);{var ge=E=>{var C=xs(),Ie=a(C);t(C),M(bt=>T(Ie,`Approvals: ${bt??""} of 3`),[()=>(S(Xt),e(r),s(()=>Xt(e(r))))]),i(E,C)};m(ze,E=>{S(Xt),e(r),s(()=>Xt(e(r))>0)&&E(ge)})}t(ft),t(le),M(E=>{dr(le,`border-left: 4px solid ${S(e(w)),s(()=>ne[e(w)])??""}`),T(je,(e(r),s(()=>e(r).title))),T(Nt,(e(r),s(()=>e(r).event_type==="calendar_event"?"Event":"Announcement"))),et(It,"aria-label",(e(r),s(()=>`Edit ${e(r).title}`))),T(Ue,` Submitted ${E??""}`),Ge(qe,1,(S(e(N)),s(()=>`badge ${e(N).class}`)),"svelte-9fakr"),Ge(xt,1,(S(e(N)),s(()=>`bi ${e(N).icon} me-1`)),"svelte-9fakr"),T(He,(S(e(N)),s(()=>e(N).text)))},[()=>(e(r),s(()=>Qe(e(r))))]),ee("click",It,Wa(()=>Xe(e(r)))),ee("click",le,()=>Xe(e(r))),ee("keydown",le,E=>v(E,e(r))),i(d,le)}),t(n),i(Z,n)};m(ht,Z=>{e(ke),s(()=>e(ke).length===0)?Z(wt):Z(Ot,!1)})}t(Be),t(b),t(u),M(()=>{De.disabled=e(ie),lr(st,(e(Y),e(f),s(()=>e(Y)[e(f)].search))),et(Te,"id",e(Q)),yt!==(yt=(e(Y),e(f),s(()=>e(Y)[e(f)].typeFilter)))&&(Te.value=(Te.__value=(e(Y),e(f),s(()=>e(Y)[e(f)].typeFilter)))??"",cr(Te,(e(Y),e(f),s(()=>e(Y)[e(f)].typeFilter))))}),ee("click",De,y),ee("input",st,Z=>Le(e(f),{search:Z.currentTarget.value})),ee("change",Te,Z=>Le(e(f),{typeFilter:Z.currentTarget.value})),i(o,u)};m(fe,o=>{q()?o(Me,!1):o(ve)})}var U=l(fe,2);{let o=Ae(()=>(e(W),s(()=>e(W)?`Edit: ${e(W).title}`:"Submission Details")));ta(U,{get id(){return O},get title(){return e(o)},children:(u,b)=>{var $=kt(),re=Ee($);{var De=F=>{$a(F,{get eventItem(){return e(D)},get drawerId(){return O},name:"my-submission-form",get canDelete(){return e(te)},canCreate:!1})},ue=F=>{var Oe=Ds();i(F,Oe)};m(re,F=>{e(D)?F(De):F(ue,!1)})}i(u,$)},$$slots:{default:!0}})}i(de,H),lt(),J()}var Is=_('<button class="nav-link" id="approvals-tab" data-bs-toggle="tab" data-bs-target="#approvals-pane" type="button" role="tab" aria-controls="approvals-pane" aria-selected="false">Approvals</button>'),Ss=_('<button class="nav-link" id="my-submissions-tab" data-bs-toggle="tab" data-bs-target="#my-submissions-pane" type="button" role="tab" aria-controls="my-submissions-pane" aria-selected="false">My Submissions</button>'),Ms=_('<div class="tab-pane fade" id="approvals-pane" role="tabpanel" aria-labelledby="approvals-tab"><!></div>'),Cs=_('<div class="tab-pane fade" id="my-submissions-pane" role="tabpanel" aria-labelledby="my-submissions-tab"><!></div>'),Ts=_('<nav class="d-print-none"><div class="nav nav-tabs" role="tablist"><button class="nav-link active" id="calendar-tab" data-bs-toggle="tab" data-bs-target="#calendar-pane" type="button" role="tab" aria-controls="calendar-pane" aria-selected="true">All</button> <!> <!></div></nav> <div class="tab-content mt-3"><div class="tab-pane fade show active" id="calendar-pane" role="tabpanel" aria-labelledby="calendar-tab"><!></div> <!> <!></div>',1),Ps=_('<div class="calendar-section svelte-1oi0f59"><!></div>');function rn(de,X){it(X,!1);const z=p(),{stores:{currentUserHasPermission:x,authenticated:L}}=aa();let q=p(!1),h=p(!1);xa(()=>{const g=x.subscribe(D=>{const ae=D(he.ManageWardBusiness);c(q,ae)}),K=L.subscribe(D=>{c(h,D)});return()=>{g(),K()}}),k(()=>(e(q),e(h)),()=>{c(z,e(q)||e(h))}),Lt(),ct();var J=Ps(),A=a(J);{var te=g=>{var K=Ts(),D=Ee(K),ae=a(D),P=l(a(ae),2);{var _e=I=>{var V=Is();i(I,V)};m(P,I=>{e(q)&&I(_e)})}var B=l(P,2);{var we=I=>{var V=Ss();i(I,V)};m(B,I=>{e(h)&&I(we)})}t(ae),t(D);var ie=l(D,2),se=a(ie),ke=a(se);Ua(ke,{}),t(se);var W=l(se,2);{var O=I=>{var V=Ms(),pe=a(V);yr(pe,{}),t(V),i(I,V)};m(W,I=>{e(q)&&I(O)})}var R=l(W,2);{var ne=I=>{var V=Cs(),pe=a(V);Os(pe,{}),t(V),i(I,V)};m(R,I=>{e(h)&&I(ne)})}t(ie),i(g,K)},Q=g=>{Ua(g,{})};m(A,g=>{e(z)?g(te):g(Q,!1)})}t(J),i(de,J),lt()}export{rn as C};
