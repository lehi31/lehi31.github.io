import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as ye,t as q,a as be,s,c as t,r as e,aj as de,D as j,g as n,E as Y,ak as Be,u as k,i as ht,ao as Me,f as Te,w as T,am as rt,an as st,R as it}from"./JKZwkikK.js";import{s as p,p as X,i as W,e as xe,o as lt,a as ze,c as ct,b as Se}from"./CbqHek51.js";import{f as O,a as $,t as Ie,c as He}from"./JDsN5plM.js";import{s as oe,r as wt,b as xt,d as Dt}from"./Bkfkq4RG.js";import{i as he}from"./b8c_lO2i.js";import{W as L,S as ce,e as Ve,t as te,x as Tt,y as $t,z as Mt,l as dt,A as ut,B as Ye,f as ie,b as St}from"./DyadxOvT.js";import{w as Ue,g as kt,d as Ce,o as vt,a as Ct}from"./DjNGvcU6.js";import{e as Ne,i as We}from"./B2BlSr7K.js";import{b as Et}from"./Bk8fdyPk.js";import{v as Ot,D as jt}from"./C5g5U6Zg.js";import{b as It}from"./BL6gm64P.js";import{g as Nt}from"./3ecikG7O.js";import{p as pe}from"./JCswaEk6.js";import{S as Bt}from"./XpZldQBg.js";var Pt=O('<div class="card"><div class="card-header">Ward Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Chapel Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small">Hours</li> <li class="list-group-item"><span class="d-block fw-lighter"><strong>Sacrament</strong> </span> <span class="d-block fw-lighter"><strong>2nd Hour</strong> </span></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function en(i,o){ye(o,!1),he();var a=Pt(),l=s(t(a),2),d=s(t(l),2),y=t(d),f=t(y),u=s(f,2),D=s(u,2);e(y),e(d);var h=s(d,4),b=t(h),v=s(t(b));e(b);var g=s(b,2),M=s(t(g));e(g),e(h);var r=s(h,2),c=t(r);e(r);var w=s(r,2),S=t(w),_=s(S),m=t(_,!0);e(_),e(w);var I=s(w,2),H=t(I);e(I);var Q=s(I,2),ae=t(Q),ne=s(ae),B=t(ne,!0);e(ne),e(Q),e(l),e(a),q((U,N)=>{oe(y,"href",L.chapel.mapLink),p(f,`${L.chapel.address.street??""}, ${L.chapel.address.city??""}`),p(u,` ${L.chapel.address.state??""}
				${L.chapel.address.zip??""}`),p(D,` ${L.chapel.address.country??""}`),p(v,`:
				${L.meetingTimes.sacrament.start??""} to
				${L.meetingTimes.sacrament.end??""}`),p(M,`:
				${L.meetingTimes.secondHour.start??""} to
				${L.meetingTimes.secondHour.end??""}`),p(c,`${L.contacts.executiveSecretary.purpose??""}:`),p(S,`${L.contacts.executiveSecretary.name??""} | `),oe(_,"href",`sms:${U??""}`),p(m,L.contacts.executiveSecretary.phone),p(H,`${L.contacts.bishop.purpose??""}:`),p(ae,`${L.contacts.bishop.name??""} | `),oe(ne,"href",`sms:${N??""}`),p(B,L.contacts.bishop.phone)},[()=>L.contacts.executiveSecretary.phone.replace(/-/g,""),()=>L.contacts.bishop.phone.replace(/-/g,"")]),$(i,a),be()}var At=O('<div class="card"><div class="card-header">Stake Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function tn(i,o){ye(o,!1),he();var a=At(),l=s(t(a),2),d=s(t(l),2),y=t(d),f=t(y),u=s(f,2),D=s(u,2);e(y),e(d);var h=s(d,2),b=t(h);e(h);var v=s(h,2),g=t(v),M=s(g),r=t(M,!0);e(M),e(v);var c=s(v,2),w=t(c);e(c);var S=s(c,2),_=t(S),m=s(_),I=t(m,!0);e(m),e(S),e(l),e(a),q((H,Q)=>{oe(y,"href",ce.building.mapLink),p(f,`${ce.building.address.street},`),p(u,` ${ce.building.address.city}, ${ce.building.address.state}
				${ce.building.address.zip}`),p(D,` ${ce.building.address.country}`),p(b,`${ce.contacts.templeRecommend.purpose}:`),p(g,`${ce.contacts.templeRecommend.name} | `),oe(M,"href",`sms:${H??""}`),p(r,ce.contacts.templeRecommend.phone),p(w,`${ce.contacts.president.purpose}:`),p(_,`${ce.contacts.president.name} | `),oe(m,"href",`sms:${Q??""}`),p(I,ce.contacts.president.phone)},[()=>ce.contacts.templeRecommend.phone.replace(/-/g,""),()=>ce.contacts.president.phone.replace(/-/g,"")]),$(i,a),be()}var Rt=O('<div class="card"><div class="card-header"> </div> <div class="card-body"><figure class="text-center"><blockquote class="blockquote"><p> </p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title"> </cite></figcaption></figure></div></div>');function an(i,o){ye(o,!1),he();var a=Rt(),l=t(a),d=t(l);e(l);var y=s(l,2),f=t(y),u=t(f),D=t(u),h=t(D,!0);e(D),e(u);var b=s(u,2),v=t(b),g=t(v,!0);e(v),e(b),e(f),e(y),e(a),q(()=>{p(d,`Ward Theme ${L.theme.year??""}`),p(h,L.theme.scripture.text),p(g,L.theme.scripture.reference)}),$(i,a),be()}var Wt=O('<small class="fw-lighter text-muted"> </small>'),Gt=O('<div class="d-flex flex-row gap-3 justify-content-between align-items-end"><div><span> </span> <!></div> <div class="d-flex flex-row gap-3 align-items-center"><button class="btn btn-sm btn-primary" aria-label="Decrement count"><i class="bi bi-dash"></i></button> <div class="count-container d-flex justify-content-end svelte-2jbj3e"> </div> <button class="btn btn-sm btn-primary" aria-label="Increment count"><i class="bi bi-plus"></i></button></div></div>');function je(i,o){let a=X(o,"count",12,0),l=X(o,"label",8,"Count"),d=X(o,"description",8,"");const y=()=>{lt(a)},f=()=>{a()<=0||lt(a,-1)};var u=Gt(),D=t(u),h=t(D),b=t(h,!0);e(h);var v=s(h,2);{var g=_=>{var m=Wt(),I=t(m,!0);e(m),q(()=>p(I,d())),$(_,m)};W(v,_=>{d()&&_(g)})}e(D);var M=s(D,2),r=t(M),c=s(r,2),w=t(c,!0);e(c);var S=s(c,2);e(M),e(u),q(()=>{p(b,l()),p(w,a())}),xe("click",r,f),xe("click",S,y),$(i,u)}const _t=Ue([]);let qe=!1;async function Je(){if(qe)return kt(_t);qe=!0;try{const{data:i,error:o}=await Ve.from("temple_challenge_entries").select("*");if(o)throw console.error("[API] Get temple entries failed:",o),new Error(`Failed to load entries: ${o.message}`);const a=i||[];return _t.set(a),setTimeout(()=>qe=!1,800),a}catch(i){throw qe=!1,console.error("[API] Unexpected error fetching temple entries:",i),i}}async function Ft(i){try{const{data:o,error:a}=await Ve.from("temple_challenge_entries").insert([i]).select();if(a)throw console.error("[API] Create temple entry failed:",a),a.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):a.code==="42501"?new Error("Permission denied - please check your authentication"):a.code==="23505"?new Error("This entry already exists"):a.message.includes("fetch")||a.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${a.message}`);return await Je(),console.log("[API] Temple entry created successfully"),o?o[0]:void 0}catch(o){throw console.error("[API] Unexpected error creating temple entry:",o),o}}async function Lt(i,o){const{data:a,error:l}=await Ve.from("temple_challenge_entries").update(o).eq("id",i).select();if(l)throw l;return await Je(),a?a[0]:void 0}async function Yt(i){const{error:o}=await Ve.from("temple_challenge_entries").delete().eq("id",i);if(o)throw o;await Je()}function qt(i,o,a){return i.filter(l=>l.date>=o&&l.date<=a)}function Ut(i){return i.reduce((o,a)=>o+(a.baptism_ordinances_count??0)+(a.confirmation_ordinances_count??0)+(a.initiatory_ordinances_count??0)+(a.endowment_ordinances_count??0)+(a.sealing_ordinances_count??0),0)}function Xt(i){return i.reduce((o,a)=>o+(a.prepared_names_count??0),0)}let Ge=null;const Ht=()=>{const i=Ue(!1),o=Ue(!1),a=Ue([]),l=Ce([a],([r])=>{const c=r.reduce((S,_)=>{const m=new Date(_.date),I=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`;return(S[I]||=[]).push(_),S},{}),w=Object.entries(c).sort(([S],[_])=>new Date(_).getTime()-new Date(S).getTime()).map(([S,_])=>[S,_.sort((m,I)=>new Date(I.created_at??"").getTime()-new Date(m.created_at??"").getTime())]);return Object.fromEntries(w)}),d=Ce([a],([r])=>{const c=r.reduce((S,_)=>((S[_.date]||=[]).push(_),S),{}),w=Object.entries(c).sort(([S],[_])=>new Date(_).getTime()-new Date(S).getTime()).map(([S,_])=>[S,_.sort((m,I)=>new Date(I.created_at??"").getTime()-new Date(m.created_at??"").getTime())]);return Object.fromEntries(w)}),y=Ce(a,r=>r.reduce((c,w)=>({baptism_ordinances_count:c.baptism_ordinances_count+(w.baptism_ordinances_count??0),confirmation_ordinances_count:c.confirmation_ordinances_count+(w.confirmation_ordinances_count??0),initiatory_ordinances_count:c.initiatory_ordinances_count+(w.initiatory_ordinances_count??0),endowment_ordinances_count:c.endowment_ordinances_count+(w.endowment_ordinances_count??0),sealing_ordinances_count:c.sealing_ordinances_count+(w.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),f=Ce(d,r=>{const c={};for(const[w,S]of Object.entries(r))c[w]=S.reduce((_,m)=>({..._,entry_type:_.entry_type,prepared_names_count:(_.prepared_names_count??0)+(m.prepared_names_count??0),baptism_ordinances_count:(_.baptism_ordinances_count??0)+(m.baptism_ordinances_count??0),confirmation_ordinances_count:(_.confirmation_ordinances_count??0)+(m.confirmation_ordinances_count??0),initiatory_ordinances_count:(_.initiatory_ordinances_count??0)+(m.initiatory_ordinances_count??0),endowment_ordinances_count:(_.endowment_ordinances_count??0)+(m.endowment_ordinances_count??0),sealing_ordinances_count:(_.sealing_ordinances_count??0)+(m.sealing_ordinances_count??0),date:w,created_at:_.created_at||m.created_at}),{});return c}),u=Ce(l,r=>{const c={};for(const[w,S]of Object.entries(r))c[w]=S.reduce((_,m)=>({..._,entry_type:_.entry_type,prepared_names_count:(_.prepared_names_count??0)+(m.prepared_names_count??0),baptism_ordinances_count:(_.baptism_ordinances_count??0)+(m.baptism_ordinances_count??0),confirmation_ordinances_count:(_.confirmation_ordinances_count??0)+(m.confirmation_ordinances_count??0),initiatory_ordinances_count:(_.initiatory_ordinances_count??0)+(m.initiatory_ordinances_count??0),endowment_ordinances_count:(_.endowment_ordinances_count??0)+(m.endowment_ordinances_count??0),sealing_ordinances_count:(_.sealing_ordinances_count??0)+(m.sealing_ordinances_count??0),date:_.date||m.date,created_at:_.created_at||m.created_at}),{});return c}),D=Ce(a,r=>r.reduce((c,w)=>c+(w.baptism_ordinances_count??0)+(w.confirmation_ordinances_count??0)+(w.initiatory_ordinances_count??0)+(w.endowment_ordinances_count??0)+(w.sealing_ordinances_count??0),0)),h=Ce(a,r=>r.reduce((c,w)=>c+(w.prepared_names_count??0),0));return Ge={stores:{ready:i,loading:o,data:a,groupedByDate:d,groupedByMonth:l,detailTotals:y,detailTotalsByDay:f,detailTotalsByMonth:u,totalOrdinancesPerformed:D,totalNamesPrepared:h},actions:{reload:async()=>{const r=await Je();r?.length&&a.set(r)},apiCreate:async r=>{await Ft(r)},apiUpdate:async(r,c)=>{await Lt(r,c)},apiDelete:async r=>{await Yt(r)}}},Ge},Ke=()=>Ge?.stores&&Object.keys(Ge.stores).length>0?Ge:Ht();function nn(i){return te(i).getDay()===0}function Xe(i,o){const a=te(i),l=te(o),d=a.getTime()-l.getTime();return d<0?-1:d>0?1:d}function zt(i){return Tt(i,Date.now())}function Vt(i,o){const a=te(i),l=te(o),d=a.getFullYear()-l.getFullYear(),y=a.getMonth()-l.getMonth();return d*12+y}function Jt(i){return o=>{const l=(i?Math[i]:Math.trunc)(o);return l===0?0:l}}function Kt(i,o){return+te(i)-+te(o)}function Qt(i){const o=te(i);return o.setHours(23,59,59,999),o}function Zt(i){const o=te(i),a=o.getMonth();return o.setFullYear(o.getFullYear(),a+1,0),o.setHours(23,59,59,999),o}function ea(i){const o=te(i);return+Qt(o)==+Zt(o)}function ta(i,o){const a=te(i),l=te(o),d=Xe(a,l),y=Math.abs(Vt(a,l));let f;if(y<1)f=0;else{a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-d*y);let u=Xe(a,l)===-d;ea(te(i))&&y===1&&Xe(i,l)===1&&(u=!1),f=d*(y-Number(u))}return f===0?0:f}function aa(i,o,a){const l=Kt(i,o)/1e3;return Jt(a?.roundingMethod)(l)}function na(i,o,a){const l=$t(),d=a?.locale??l.locale??Mt,y=2520,f=Xe(i,o);if(isNaN(f))throw new RangeError("Invalid time value");const u=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:f});let D,h;f>0?(D=te(o),h=te(i)):(D=te(i),h=te(o));const b=aa(h,D),v=(dt(h)-dt(D))/1e3,g=Math.round((b-v)/60);let M;if(g<2)return a?.includeSeconds?b<5?d.formatDistance("lessThanXSeconds",5,u):b<10?d.formatDistance("lessThanXSeconds",10,u):b<20?d.formatDistance("lessThanXSeconds",20,u):b<40?d.formatDistance("halfAMinute",0,u):b<60?d.formatDistance("lessThanXMinutes",1,u):d.formatDistance("xMinutes",1,u):g===0?d.formatDistance("lessThanXMinutes",1,u):d.formatDistance("xMinutes",g,u);if(g<45)return d.formatDistance("xMinutes",g,u);if(g<90)return d.formatDistance("aboutXHours",1,u);if(g<ut){const r=Math.round(g/60);return d.formatDistance("aboutXHours",r,u)}else{if(g<y)return d.formatDistance("xDays",1,u);if(g<Ye){const r=Math.round(g/ut);return d.formatDistance("xDays",r,u)}else if(g<Ye*2)return M=Math.round(g/Ye),d.formatDistance("aboutXMonths",M,u)}if(M=ta(h,D),M<12){const r=Math.round(g/Ye);return d.formatDistance("xMonths",r,u)}else{const r=M%12,c=Math.trunc(M/12);return r<3?d.formatDistance("aboutXYears",c,u):r<9?d.formatDistance("overXYears",c,u):d.formatDistance("almostXYears",c+1,u)}}function mt(i,o){return na(i,zt(i),o)}var ra=O('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),sa=O('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),oa=O("<option> </option>"),ia=O('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" class="form-control" id="endDate" required/></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select class="form-select form-control-sm"></select></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder" style="margin-right: 47px"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function la(i,o){ye(o,!1);const[a,l]=ze(),d=Y();let y=X(o,"drawerId",8,""),f=X(o,"minDate",8,null),u=X(o,"maxDate",8,null);const{stores:{loading:D},actions:{apiCreate:h,reload:b}}=Ke(),v=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function g(){const x=ie(new Date,"yyyy-MM-dd");return!f()||!u()||x>=f()&&x<=u()?x:x<f()?f():u()}const M={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:g(),approved:!0};let r=Y({...M}),c=Y({message:"",type:null});const w=()=>{j(r,{...M,date:g()}),j(c,{message:"",type:null});const x=`[data-bs-target="#${y()}"]`,V=document.querySelector(x);V&&V.click()},S=()=>{window.location.reload()},_=()=>{I()},m=()=>{j(c,{message:"",type:null})},I=async()=>{try{ct(D,!0),j(c,{message:"",type:null}),await h({prepared_names_count:n(r).prepared_names_count,baptism_ordinances_count:n(r).baptism_ordinances_count,confirmation_ordinances_count:n(r).confirmation_ordinances_count,initiatory_ordinances_count:n(r).initiatory_ordinances_count,endowment_ordinances_count:n(r).endowment_ordinances_count,sealing_ordinances_count:n(r).sealing_ordinances_count,entry_type:n(r).entry_type,date:n(r).date,created_at:new Date().toISOString(),approved:!0}),await b(),w()}catch(x){console.error("[WardGoalEntryForm] Submission failed:",x),x instanceof Error?x.message.includes("expired")||x.message.includes("JWT")?j(c,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):x.message.includes("fetch")||x.message.includes("network")?j(c,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):j(c,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):j(c,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{ct(D,!1)}};de(()=>n(r),()=>{j(d,n(r).prepared_names_count+n(r).baptism_ordinances_count+n(r).confirmation_ordinances_count+n(r).initiatory_ordinances_count+n(r).endowment_ordinances_count+n(r).sealing_ordinances_count)}),Be(),he();var H=ia(),Q=t(H);{var ae=x=>{var V=sa(),fe=t(V),ke=s(t(fe),2),De=t(ke),Qe=t(De);{var Ze=me=>{var ge=Ie("⚠️ Session Issue");$(me,ge)},Fe=me=>{var ge=He(),C=Te(ge);{var F=se=>{var $e=Ie("⚠️ Connection Problem");$(se,$e)},ve=se=>{var $e=Ie("⚠️ Something Went Wrong");$(se,$e)};W(C,se=>{n(c),k(()=>n(c).type==="network")?se(F):se(ve,!1)},!0)}$(me,ge)};W(Qe,me=>{n(c),k(()=>n(c).type==="expired")?me(Ze):me(Fe,!1)})}e(De);var Ee=s(De,2),et=t(Ee,!0);e(Ee);var Le=s(Ee,2),Ae=t(Le);{var tt=me=>{var ge=ra();xe("click",ge,_),$(me,ge)};W(Ae,me=>{n(c),k(()=>n(c).type==="network")&&me(tt)})}var Oe=s(Ae,2);e(Le),e(ke);var Re=s(ke,2);e(fe),e(V),q(()=>{p(et,(n(c),k(()=>n(c).message))),St(Oe,1,`btn btn-${n(c),k(()=>n(c).type==="network"?"secondary":"primary")??""}`)}),xe("click",Oe,S),xe("click",Re,m),$(x,V)};W(Q,x=>{n(c),k(()=>n(c).type)&&x(ae)})}var ne=s(Q,4),B=s(t(ne),2),U=t(B);{var N=x=>{var V=Ie();q(()=>p(V,`Select a date within the goal period (${f()??""} to ${u()??""})`)),$(x,V)},P=x=>{var V=Ie("When was this activity done?");$(x,V)};W(U,x=>{f()&&u()?x(N):x(P,!1)})}e(B);var R=s(B,2);wt(R),e(ne);var G=s(ne,2),z=s(t(G),4);q(()=>{n(r),ht(()=>{})}),Ne(z,5,()=>v,We,(x,V)=>{var fe=oa(),ke=t(fe,!0);e(fe);var De={};q(()=>{p(ke,n(V)),De!==(De=n(V))&&(fe.value=(fe.__value=n(V))??"")}),$(x,fe)}),e(z),e(G);var J=s(G,2);je(J,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get count(){return n(r).prepared_names_count},set count(x){Me(r,n(r).prepared_names_count=x)},$$legacy:!0});var Z=s(J,2);je(Z,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get count(){return n(r).baptism_ordinances_count},set count(x){Me(r,n(r).baptism_ordinances_count=x)},$$legacy:!0});var E=s(Z,2);je(E,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get count(){return n(r).confirmation_ordinances_count},set count(x){Me(r,n(r).confirmation_ordinances_count=x)},$$legacy:!0});var A=s(E,2);je(A,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get count(){return n(r).initiatory_ordinances_count},set count(x){Me(r,n(r).initiatory_ordinances_count=x)},$$legacy:!0});var K=s(A,2);je(K,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get count(){return n(r).endowment_ordinances_count},set count(x){Me(r,n(r).endowment_ordinances_count=x)},$$legacy:!0});var re=s(K,2);je(re,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get count(){return n(r).sealing_ordinances_count},set count(x){Me(r,n(r).sealing_ordinances_count=x)},$$legacy:!0});var ee=s(re,2),le=s(t(ee),2),ue=t(le,!0);e(le),e(ee);var _e=s(ee,2),we=t(_e),Pe=s(we,2);e(_e),e(H),q(()=>{oe(R,"min",f()),oe(R,"max",u()),p(ue,n(d))}),It(R,()=>n(r).date,x=>Me(r,n(r).date=x)),xt(z,()=>n(r).entry_type,x=>Me(r,n(r).entry_type=x)),xe("click",we,w),xe("click",Pe,I),$(i,H),be(),l()}var ca=O('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),da=O('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),ua=O('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function ot(i,o){ye(o,!1);let a=X(o,"entry",8),l=X(o,"showSubmittedData",8,!1),d=X(o,"showType",8,!1);he();var y=ua(),f=t(y);{var u=P=>{var R=ca(),G=t(R),z=t(G,!0);e(G),e(R),q(()=>p(z,(T(a()),k(()=>a()?.entry_type)))),$(P,R)};W(f,P=>{d()&&P(u)})}var D=s(f,2),h=s(t(D),2),b=t(h,!0);e(h),e(D);var v=s(D,2),g=s(t(v),2),M=t(g,!0);e(g),e(v);var r=s(v,2),c=s(t(r),2),w=t(c,!0);e(c),e(r);var S=s(r,2),_=s(t(S),2),m=t(_,!0);e(_),e(S);var I=s(S,2),H=s(t(I),2),Q=t(H,!0);e(H),e(I);var ae=s(I,2),ne=s(t(ae),2),B=t(ne,!0);e(ne),e(ae);var U=s(ae,2);{var N=P=>{var R=da(),G=s(t(R),2),z=t(G),J=t(z,!0);e(z);var Z=s(z,2),E=t(Z,!0);e(Z),e(G),e(R),q((A,K)=>{p(J,A),p(E,K)},[()=>(T(mt),T(a()),k(()=>mt(new Date(a().created_at),{addSuffix:!0}))),()=>(T(ie),T(a()),k(()=>ie(new Date(a().created_at),"MMMM d, yyyy 'at' h:mm a")))]),$(P,R)};W(U,P=>{T(l()),T(a()),k(()=>l()&&a()?.created_at)&&P(N)})}e(y),q(()=>{p(b,(T(a()),k(()=>a()?.prepared_names_count))),p(M,(T(a()),k(()=>a()?.baptism_ordinances_count))),p(w,(T(a()),k(()=>a()?.confirmation_ordinances_count))),p(m,(T(a()),k(()=>a()?.initiatory_ordinances_count))),p(Q,(T(a()),k(()=>a()?.endowment_ordinances_count))),p(B,(T(a()),k(()=>a()?.sealing_ordinances_count)))}),$(i,y),be()}var _a=O('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function ma(i,o){ye(o,!1);const a=Y();let l=X(o,"entry",8),d=X(o,"date",8);de(()=>T(l()),()=>{j(a,l().baptism_ordinances_count+l().confirmation_ordinances_count+l().initiatory_ordinances_count+l().endowment_ordinances_count+l().sealing_ordinances_count)}),Be(),he();var y=_a(),f=Te(y),u=t(f),D=t(u,!0);e(u);var h=s(u,2);e(f);var b=s(f,2),v=t(b),g=t(v),M=t(g);ot(M,{get entry(){return l()}});var r=s(M,2),c=t(r),w=s(t(c),2),S=t(w,!0);e(w),e(c),e(r),e(g),e(v),e(b),q((_,m)=>{p(D,_),p(h,` ${m??""}`),p(S,n(a))},[()=>(T(ie),T(pe),T(d()),k(()=>ie(pe(d(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(T(ie),T(pe),T(d()),k(()=>ie(pe(d(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),$(i,y),be()}var va=O('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function pa(i,o){ye(o,!1);let a=X(o,"entry",8),l=X(o,"date",8),d=Y(0);de(()=>T(a()),()=>{j(d,a().baptism_ordinances_count+a().confirmation_ordinances_count+a().initiatory_ordinances_count+a().endowment_ordinances_count+a().sealing_ordinances_count)}),Be(),he();var y=va(),f=Te(y),u=t(f),D=t(u,!0);e(u);var h=s(u,2);e(f);var b=s(f,2),v=t(b),g=t(v),M=t(g);ot(M,{get entry(){return a()}});var r=s(M,2),c=t(r),w=s(t(c),2),S=t(w,!0);e(w),e(c),e(r),e(g),e(v),e(b),q((_,m)=>{p(D,_),p(h,` ${m??""}`),p(S,n(d))},[()=>(T(ie),T(pe),T(l()),k(()=>ie(pe(l(),"yyyy-MM",new Date),"yyyy"))),()=>(T(ie),T(pe),T(l()),k(()=>ie(pe(l(),"yyyy-MM",new Date),"MMMM")))]),$(i,y),be()}var fa=O('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),ga=O('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function ya(i,o){ye(o,!1);let a=X(o,"entries",8),l=X(o,"date",8);he();var d=ga(),y=Te(d),f=t(y),u=t(f,!0);e(f);var D=s(f,2);e(y);var h=s(y,2);Ne(h,5,a,We,(b,v)=>{var g=fa(),M=t(g),r=t(M);ot(r,{get entry(){return n(v)},showSubmittedData:!0,showType:!0}),e(M),e(g),$(b,g)}),e(h),q((b,v)=>{p(u,b),p(D,` ${v??""}`)},[()=>(T(ie),T(pe),T(l()),k(()=>ie(pe(l(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(T(ie),T(pe),T(l()),k(()=>ie(pe(l(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),$(i,d),be()}var ba=O('<div class="d-flex flex-column gap-3"><!></div>'),ha=O('<div class="d-flex flex-column gap-3"></div>'),wa=O('<div class="d-flex flex-column gap-3"></div>'),xa=O('<div class="d-flex flex-column gap-3"><!> <!> <!> <!></div>');function Da(i,o){ye(o,!1);const a=()=>Se(h,"$groupedByDate",y),l=()=>Se(b,"$detailTotalsByDay",y),d=()=>Se(v,"$detailTotalsByMonth",y),[y,f]=ze(),u=Y(),{stores:{data:D,groupedByDate:h,detailTotalsByDay:b,detailTotalsByMonth:v},actions:{reload:g}}=Ke();let M=X(o,"query",8,""),r=Y([]),c=Y([]);const w=D.subscribe(B=>{j(r,B),j(c,[...B])});function S(B){return B?B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const _=B=>{let U=[...n(r)];return B&&(U=U.filter(N=>N?.entry_type?N?.entry_type?.trim().toLowerCase().match(n(u).trim().toLowerCase()):!1)),U};vt(g),Ct(w);let m=Y("by-month");const I=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"}];de(()=>T(M()),()=>{j(u,S(M()?.trim().toLowerCase()))}),de(()=>(T(M()),n(c)),()=>{M()?j(r,_(M())):j(r,[...n(c)])}),Be(),he();var H=He(),Q=Te(H);{var ae=B=>{var U=xa(),N=t(U);Bt(N,{get options(){return I},helperText:"",label:"Filter",disabled:!1,get value(){return n(m)},set value(E){j(m,E)},$$legacy:!0});var P=s(N,2);{var R=E=>{var A=He(),K=Te(A);Ne(K,1,()=>(a(),k(()=>Object.entries(a()))),We,(re,ee)=>{var le=rt(()=>st(n(ee),2));let ue=()=>n(le)[0],_e=()=>n(le)[1];var we=ba(),Pe=t(we);ya(Pe,{get date(){return ue()},get entries(){return _e()}}),e(we),$(re,we)}),$(E,A)};W(P,E=>{n(m)==="by-submission"&&E(R)})}var G=s(P,2);{var z=E=>{var A=ha();Ne(A,5,()=>(l(),k(()=>Object.entries(l()))),We,(K,re)=>{var ee=rt(()=>st(n(re),2));let le=()=>n(ee)[0],ue=()=>n(ee)[1];ma(K,{get date(){return le()},get entry(){return ue()}})}),e(A),$(E,A)};W(G,E=>{n(m)==="by-day"&&E(z)})}var J=s(G,2);{var Z=E=>{var A=wa();Ne(A,5,()=>(d(),k(()=>Object.entries(d()))),We,(K,re)=>{var ee=rt(()=>st(n(re),2));let le=()=>n(ee)[0],ue=()=>n(ee)[1];pa(K,{get date(){return le()},get entry(){return ue()}})}),e(A),$(E,A)};W(J,E=>{n(m)==="by-month"&&E(Z)})}e(U),$(B,U)},ne=B=>{var U=Ie("No Data Found");$(B,U)};W(Q,B=>{n(r),k(()=>n(r)?.length)?B(ae):B(ne,!1)})}$(i,H),be(),f()}var Ta=O('<span class="d-flex justify-content-end">0</span>'),$a=O('<span class="d-flex justify-content-end">0</span>'),Ma=O('<span class="d-flex justify-content-end"> </span>'),Sa=O('<span class="d-flex justify-content-end"> </span>'),ka=O('<div class="progress-section svelte-kypz17"><small class="text-muted">Temple Ordinances Progress</small> <div class="progress" style="height: 8px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></div>'),Ca=O('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end">--</span></td><td><!></td></tr></tbody></table></div> <!> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function Ea(i,o){ye(o,!1);const a=()=>Se(c,"$entries",d),l=()=>Se(w,"$loading",d),[d,y]=ze(),f=Y(),u=Y(),D=Y(),h=Y(),b=Y();let v=X(o,"goal",8),g=X(o,"drawerId",8),M=X(o,"onSubmitClick",8),r=X(o,"onViewResultsClick",8);const{stores:{data:c,loading:w}}=Ke();function S(C,F){const[ve,se,$e]=C.split("-").map(Number),[at,nt,pt]=F.split("-").map(Number),ft=new Date(ve,se-1,$e),gt=new Date(at,nt-1,pt),yt=ft.toLocaleDateString("en-US",{month:"short"}),bt=gt.toLocaleDateString("en-US",{month:"short"});return`${yt} to ${bt}`}function _(C){return C.toLocaleString("en-US")}function m(C){return C!==null?_(C):"--"}de(()=>(a(),T(v())),()=>{j(f,qt(a(),v().start_date,v().end_date))}),de(()=>n(f),()=>{j(u,Ut(n(f)))}),de(()=>n(f),()=>{j(D,Xt(n(f)))}),de(()=>T(v()),()=>{j(h,S(v().start_date,v().end_date))}),de(()=>(T(v()),n(u)),()=>{j(b,v().temple_ordinances_goal&&v().temple_ordinances_goal>0?Math.round(n(u)/v().temple_ordinances_goal*100):null)}),Be(),he();var I=Ca(),H=t(I),Q=t(H),ae=s(Q),ne=t(ae);e(ae),e(H);var B=s(H,2),U=t(B),N=t(U),P=t(N),R=s(t(P)),G=t(R),z=s(t(G)),J=t(z),Z=t(J,!0);e(J),e(z);var E=s(z),A=t(E);{var K=C=>{var F=Ta();$(C,F)};W(A,C=>{l()||C(K)})}e(E),e(G);var re=s(G),ee=s(t(re)),le=t(ee),ue=t(le,!0);e(le),e(ee);var _e=s(ee),we=t(_e);{var Pe=C=>{var F=$a();$(C,F)};W(we,C=>{l()||C(Pe)})}e(_e),e(re);var x=s(re),V=s(t(x)),fe=t(V),ke=t(fe,!0);e(fe),e(V);var De=s(V),Qe=t(De);{var Ze=C=>{var F=Ma(),ve=t(F,!0);e(F),q(se=>p(ve,se),[()=>(n(u),k(()=>_(n(u))))]),$(C,F)};W(Qe,C=>{l()||C(Ze)})}e(De),e(x);var Fe=s(x),Ee=s(t(Fe),2),et=t(Ee);{var Le=C=>{var F=Sa(),ve=t(F,!0);e(F),q(se=>p(ve,se),[()=>(n(D),k(()=>_(n(D))))]),$(C,F)};W(et,C=>{l()||C(Le)})}e(Ee),e(Fe),e(R),e(P),e(N);var Ae=s(N,2);{var tt=C=>{var F=ka(),ve=s(t(F),2),se=t(ve);e(ve);var $e=s(ve,2),at=t($e);e($e),e(F),q(nt=>{Dt(se,`width: ${nt??""}%`),oe(se,"aria-valuenow",n(b)),p(at,`${n(b)??""}% complete`)},[()=>(n(b),k(()=>Math.min(n(b),100)))]),$(C,F)};W(Ae,C=>{n(b),T(v()),k(()=>n(b)!==null&&v().temple_ordinances_goal)&&C(tt)})}var Oe=s(Ae,2),Re=t(Oe);e(Oe);var me=s(Oe,2),ge=t(me);e(me),e(U),e(B),e(I),q((C,F,ve)=>{p(Q,`Ward Mission Goal ${T(v()),k(()=>v().year)??""} `),p(ne,`(${n(h)??""})`),p(Z,C),p(ue,F),p(ke,ve),oe(Re,"data-bs-target",`#${g()??""}`),oe(Re,"aria-controls",g()),oe(ge,"data-bs-target",`#${g()??""}`),oe(ge,"aria-controls",g())},[()=>(T(v()),k(()=>m(v().baptisms_goal))),()=>(T(v()),k(()=>m(v().family_sealings_goal))),()=>(T(v()),k(()=>m(v().temple_ordinances_goal)))]),xe("click",Re,function(...C){M()?.apply(this,C)}),xe("click",ge,function(...C){r()?.apply(this,C)}),$(i,I),be(),y()}var Oa=O("<!> <!>",1),ja=O('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),Ia=O('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),Na=O('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),Ba=O('<div class="col-12"><!> <!></div>'),Pa=O('<div class="row g-3"></div>'),Aa=O("<!> <!>",1);function rn(i,o){ye(o,!1);const a=()=>Se(c,"$activeGoals",y),l=()=>Se(S,"$currentGoalPeriod",y),d=()=>Se(w,"$goalsLoading",y),[y,f]=ze(),u=Y(),D=Y();let h=Y("form"),b=Ot(),v=Y("end"),g=Y(),M=Y(!1);const{actions:{reload:r}}=Ke(),{stores:{activeGoals:c,loading:w,currentGoalPeriod:S},actions:{reload:_}}=Nt();let m=Y(null);function I(){j(h,"form")}function H(){j(h,"results")}vt(async()=>{await Promise.all([_(),r()]);const N=new URLSearchParams(window.location.search);j(m,N.get("log-temple-activity"))}),de(()=>(n(m),n(g),n(M)),()=>{n(m)&&n(m)==="yes"&&n(g)&&!n(M)&&(n(g).click(),j(M,!0))}),de(()=>n(h),()=>{j(v,n(h)==="form"?"end":"start")}),de(()=>n(h),()=>{j(u,n(h)==="form"?"Temple Activity":"Temple Activity Results")}),de(()=>a(),()=>{j(D,(()=>{const N=new Date().toISOString().split("T")[0];return a().filter(P=>P.start_date<=N&&P.end_date>=N)})())}),Be(),he();var Q=Aa(),ae=Te(Q);jt(ae,{get placement(){return n(v)},get title(){return n(u)},get id(){return b},children:(N,P)=>{var R=Oa(),G=Te(R);{var z=E=>{{let A=it(()=>(l(),k(()=>l()?.start_date))),K=it(()=>(l(),k(()=>l()?.end_date)));la(E,{get drawerId(){return b},get minDate(){return n(A)},get maxDate(){return n(K)}})}};W(G,E=>{n(h)==="form"&&E(z)})}var J=s(G,2);{var Z=E=>{Da(E,{})};W(J,E=>{n(h)==="results"&&E(Z)})}$(N,R)},$$slots:{default:!0}});var ne=s(ae,2);{var B=N=>{var P=ja();$(N,P)},U=N=>{var P=He(),R=Te(P);{var G=J=>{var Z=Ia();$(J,Z)},z=J=>{var Z=Pa();Ne(Z,5,()=>n(D),E=>E.id,(E,A)=>{var K=Ba(),re=t(K);Ea(re,{get goal(){return n(A)},get drawerId(){return b},onSubmitClick:I,onViewResultsClick:H});var ee=s(re,2);{var le=ue=>{var _e=Na();Et(_e,we=>j(g,we),()=>n(g)),q(()=>{oe(_e,"data-bs-target",`#${b??""}`),oe(_e,"aria-controls",b)}),xe("click",_e,I),$(ue,_e)};W(ee,ue=>{n(A),n(D),k(()=>n(A)===n(D)[0])&&ue(le)})}e(K),$(E,K)}),e(Z),$(J,Z)};W(R,J=>{n(D),k(()=>n(D).length===0)?J(G):J(z,!1)},!0)}$(N,P)};W(ne,N=>{d()?N(B):N(U,!1)})}$(i,Q),be(),f()}export{tn as S,an as W,rn as a,en as b,nn as i};
