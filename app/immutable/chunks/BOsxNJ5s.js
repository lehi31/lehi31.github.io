const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{B as P,h as Ht,d as Ft,K as Fa,bb as ja,L as jt,Y as Wa,ac as $a,b1 as Ba,a_ as za,N as qa,G as ot,p as ia,ai as q,n as j,aj as la,c as v,r as m,a as ca,m as n,E as Y,as as Za,f as at,u as x,D as p,s as M,ap as Qa,R as Ve,F as it}from"./BWCcv1pC.js";import{b as Wt,d as Ka,f as C,a as k,c as Va}from"./DqgkBxsg.js";import{_ as Ga}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{g as $t,w as We,r as ua,d as Fe,o as Ja,a as Xa}from"./CuVcyAaV.js";import{p as pe,i as A,e as be,s as re,b as en,a as tn}from"./KiCntiD6.js";import{e as da,i as an}from"./CvOYN50o.js";import{s as yt}from"./CDrl09S1.js";import{t as wt,a as O,e as fa,p as $e,z as Ke,i as Te,C as Bt,A as xt,f as Ne,D as nn,j as Dt}from"./DnVuGurV.js";import{i as ma}from"./BeNQ5BU7.js";import{S as Ge}from"./TQLXPvU9.js";import{v as zt,D as qt}from"./pEAXO0Hl.js";import{b as rn}from"./CzDGc265.js";import{b as sn}from"./Drf-2KpF.js";import{f as on}from"./DwL8UaIJ.js";import{R as ln}from"./DcWZ5Z_E.js";import{e as je}from"./Z1YyCaGw.js";import{a as cn}from"./D9dADsae.js";import{s as un,i as dn}from"./ByjMlHuk.js";function zr(e,t,a=!1,r=!1,o=!1){var s=e,d="";P(()=>{var f=Fa;if(d===(d=t()??"")){Ht&&Ft();return}if(f.nodes!==null&&(ja(f.nodes.start,f.nodes.end),f.nodes=null),d!==""){if(Ht){jt.data;for(var y=Ft(),D=y;y!==null&&(y.nodeType!==Wa||y.data!=="");)D=y,y=$a(y);if(y===null)throw Ba(),za;Wt(jt,D),s=qa(y);return}var E=d+"";a?E=`<svg>${E}</svg>`:r&&(E=`<math>${E}</math>`);var T=Ka(E);if((a||r)&&(T=ot(T)),Wt(ot(T),T.lastChild),a||r)for(;ot(T);)s.before(ot(T));else s.before(T)}})}function tt(e,t){const a=t*7;return cn(e,a)}function lt(e,t){const a=+wt(e),[r,o]=[+wt(t.start),+wt(t.end)].sort((s,d)=>s-d);return a>=r&&a<=o}function fn(e,t){const a=bn(t);return"formatToParts"in a?_n(a,e):vn(a,e)}const mn={year:0,month:1,day:2,hour:3,minute:4,second:5};function _n(e,t){try{const a=e.formatToParts(t),r=[];for(let o=0;o<a.length;o++){const s=mn[a[o].type];s!==void 0&&(r[s]=parseInt(a[o].value,10))}return r}catch(a){if(a instanceof RangeError)return[NaN];throw a}}function vn(e,t){const a=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const St={},Zt=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),pn=Zt==="06/25/2014, 00:00:00"||Zt==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function bn(e){return St[e]||(St[e]=pn?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),St[e]}function Ot(e,t,a,r,o,s,d){const f=new Date(0);return f.setUTCFullYear(e,t,a),f.setUTCHours(r,o,s,d),f}const Qt=36e5,hn=6e4,kt={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Ut(e,t,a){if(!e)return 0;let r=kt.timezoneZ.exec(e);if(r)return 0;let o,s;if(r=kt.timezoneHH.exec(e),r)return o=parseInt(r[1],10),Kt(o)?-(o*Qt):NaN;if(r=kt.timezoneHHMM.exec(e),r){o=parseInt(r[2],10);const d=parseInt(r[3],10);return Kt(o,d)?(s=Math.abs(o)*Qt+d*hn,r[1]==="+"?-s:s):NaN}if(wn(e)){t=new Date(t||Date.now());const d=a?t:gn(t),f=Yt(d,e);return-(a?f:yn(t,f,e))}return NaN}function gn(e){return Ot(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Yt(e,t){const a=fn(e,t),r=Ot(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime();let o=e.getTime();const s=o%1e3;return o-=s>=0?s:1e3+s,r-o}function yn(e,t,a){let o=e.getTime()-t;const s=Yt(new Date(o),a);if(t===s)return t;o-=s-t;const d=Yt(new Date(o),a);return s===d?s:Math.max(s,d)}function Kt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Vt={};function wn(e){if(Vt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Vt[e]=!0,!0}catch{return!1}}function Gt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const _a=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ct=36e5,Jt=6e4,xn=2,Q={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:_a};function It(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const a=t.additionalDigits==null?xn:Number(t.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const r=Dn(e),{year:o,restDateString:s}=Sn(r.date,a),d=kn(s,o);if(d===null||isNaN(d.getTime()))return new Date(NaN);if(d){const f=d.getTime();let y=0,D;if(r.time&&(y=Cn(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||t.timeZone){if(D=Ut(r.timeZone||t.timeZone,new Date(f+y)),isNaN(D))return new Date(NaN)}else D=Gt(new Date(f+y)),D=Gt(new Date(f+y+D));return new Date(f+y+D)}else return new Date(NaN)}function Dn(e){const t={};let a=Q.dateTimePattern.exec(e),r;if(a?(t.date=a[1],r=a[3]):(a=Q.datePattern.exec(e),a?(t.date=a[1],r=a[2]):(t.date=null,r=e)),r){const o=Q.timeZone.exec(r);o?(t.time=r.replace(o[1],""),t.timeZone=o[1].trim()):t.time=r}return t}function Sn(e,t){if(e){const a=Q.YYY[t],r=Q.YYYYY[t];let o=Q.YYYY.exec(e)||r.exec(e);if(o){const s=o[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(o=Q.YY.exec(e)||a.exec(e),o){const s=o[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}}return{year:null}}function kn(e,t){if(t===null)return null;let a,r,o;if(!e||!e.length)return a=new Date(0),a.setUTCFullYear(t),a;let s=Q.MM.exec(e);if(s)return a=new Date(0),r=parseInt(s[1],10)-1,ea(t,r)?(a.setUTCFullYear(t,r),a):new Date(NaN);if(s=Q.DDD.exec(e),s){a=new Date(0);const d=parseInt(s[1],10);return Yn(t,d)?(a.setUTCFullYear(t,0,d),a):new Date(NaN)}if(s=Q.MMDD.exec(e),s){a=new Date(0),r=parseInt(s[1],10)-1;const d=parseInt(s[2],10);return ea(t,r,d)?(a.setUTCFullYear(t,r,d),a):new Date(NaN)}if(s=Q.Www.exec(e),s)return o=parseInt(s[1],10)-1,ta(o)?Xt(t,o):new Date(NaN);if(s=Q.WwwD.exec(e),s){o=parseInt(s[1],10)-1;const d=parseInt(s[2],10)-1;return ta(o,d)?Xt(t,o,d):new Date(NaN)}return null}function Cn(e){let t,a,r=Q.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),Tt(t)?t%24*Ct:NaN;if(r=Q.HHMM.exec(e),r)return t=parseInt(r[1],10),a=parseFloat(r[2].replace(",",".")),Tt(t,a)?t%24*Ct+a*Jt:NaN;if(r=Q.HHMMSS.exec(e),r){t=parseInt(r[1],10),a=parseInt(r[2],10);const o=parseFloat(r[3].replace(",","."));return Tt(t,a,o)?t%24*Ct+a*Jt+o*1e3:NaN}return null}function Xt(e,t,a){t=t||0,a=a||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const o=r.getUTCDay()||7,s=t*7+a+1-o;return r.setUTCDate(r.getUTCDate()+s),r}const Tn=[31,28,31,30,31,30,31,31,30,31,30,31],Nn=[31,29,31,30,31,30,31,31,30,31,30,31];function va(e){return e%400===0||e%4===0&&e%100!==0}function ea(e,t,a){if(t<0||t>11)return!1;if(a!=null){if(a<1)return!1;const r=va(e);if(r&&a>Nn[t]||!r&&a>Tn[t])return!1}return!0}function Yn(e,t){if(t<1)return!1;const a=va(e);return!(a&&t>366||!a&&t>365)}function ta(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Tt(e,t,a){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||a!=null&&(a<0||a>=60))}function aa(e,t,a){e=It(e,a);const r=Ut(t,e,!0),o=new Date(e.getTime()-r),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}function In(e,t,a){if(typeof e=="string"&&!e.match(_a))return It(e,{...a,timeZone:t});e=It(e,a);const r=Ot(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),o=Ut(t,new Date(r));return new Date(r+o)}const Mt=We([]);let ue=null;async function Ye(){return ue||(ue=(async()=>{const{data:e,error:t}=await O.from("calendar_events").select("*").order("start_time",{ascending:!0});if(t)throw ue=null,t;const a=e||[];return Mt.set(a),setTimeout(()=>{ue=null},100),a})(),ue)}async function pa(e){let t=$t(Mt);return t.length||(await Ye(),t=$t(Mt)),t.find(a=>a.id===e)}async function Mn(e){const{data:t,error:a}=await O.from("calendar_events").insert([e]).select();if(a)throw a;return ue=null,await Ye(),t?t[0]:void 0}async function En(e){const{data:t,error:a}=await O.from("calendar_events").insert(e).select();if(a)throw a;return ue=null,await Ye(),t??[]}async function ct(e,t){const{data:a,error:r}=await O.from("calendar_events").update(t).eq("id",e).select();if(r)throw r;return ue=null,await Ye(),a?a[0]:void 0}async function On(e){const t=await pa(e),{error:a}=await O.from("calendar_events").delete().eq("id",e);if(a)throw a;t?.attachments&&t.attachments.length>0&&await At(t.attachments),ue=null,await Ye()}const Un={bishop:{approval:"bishop_approval",timestamp:"bishop_approval_at",userId:"bishop_approval_by_user_id"},first_counselor:{approval:"first_counselor_approval",timestamp:"first_counselor_approval_at",userId:"first_counselor_approval_by_user_id"},second_counselor:{approval:"second_counselor_approval",timestamp:"second_counselor_approval_at",userId:"second_counselor_approval_by_user_id"}};async function ba(e,t,a,r){const o=Un[t],s=a?new Date().toISOString():null;return ct(e,{[o.approval]:a,[o.timestamp]:s,[o.userId]:a?r??null:null})}async function ha(e){return ct(e,{is_published:!0})}async function ga(e){return ct(e,{is_published:!1})}async function An(e=new Date){const t=e.toISOString(),{data:a,error:r}=await O.from("calendar_events").select("*").lt("start_time",t).eq("event_type","calendar_event");if(r)throw r;if(!a||a.length===0)return{deleted:0,skipped:0};const o=[],s=[];for(const f of a){if(f.recurrence_rule&&(!f.recurrence_end_date||f.recurrence_end_date&&new Date(f.recurrence_end_date)>=e)){s.push(f);continue}o.push(f)}let d=0;if(o.length>0){const f=o.map(y=>y.id).filter(y=>y!==void 0);if(f.length>0){const{data:y,error:D}=await O.from("calendar_events").delete().in("id",f).select("id");if(D)throw D;d=y?.length??0;for(const E of o)E.attachments&&E.attachments.length>0&&await At(E.attachments)}}return ue=null,await Ye(),{deleted:d,skipped:s.length}}async function Pn(e,t){const a=e.name.split(".").pop()||"bin",r=t||"temp",s=`${crypto.randomUUID()}.${a}`,d=`${r}/${s}`,{error:f}=await O.storage.from("event-attachments").upload(d,e,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:{publicUrl:y}}=O.storage.from("event-attachments").getPublicUrl(d);return{id:crypto.randomUUID(),name:e.name,url:y,type:e.type,size:e.size,uploadedAt:new Date().toISOString()}}async function Ln(e){const{error:t}=await O.storage.from("event-attachments").remove([e]);if(t)throw t}function ya(e){const t=e.match(/event-attachments\/(.+)$/);return t?t[1]:""}async function At(e){if(!e||e.length===0)return;const t=e.map(a=>ya(a.url)).filter(a=>a);if(t.length>0){const{error:a}=await O.storage.from("event-attachments").remove(t);if(a)throw a}}const qr=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Mn,createCalendarEvents:En,deleteCalendarEvent:On,deleteEventAttachment:Ln,deleteEventAttachments:At,deletePastCalendarEvents:An,extractStoragePath:ya,getAllCalendarEvents:Ye,getCalendarEvent:pa,publishCalendarEvent:ha,unpublishCalendarEvent:ga,updateBishopricApproval:ba,updateCalendarEvent:ct,uploadEventAttachment:Pn},Symbol.toStringTag,{value:"Module"})),Rn={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},stakeReliefSociety:{label:"Stake | Relief Society",key:"SRS",sort_index:.1,color_number:5},stakeEldersQuorum:{label:"Stake | Elders Quorum",key:"SEQ",sort_index:.2,color_number:6},stakeYouth:{label:"Stake | Youth",key:"SYO",sort_index:.25,color_number:7},stakeYoungWomen:{label:"Stake | Young Women",key:"SYW",sort_index:.3,color_number:8},stakeYoungMen:{label:"Stake | Young Men",key:"SYM",sort_index:.4,color_number:12},stakePrimary:{label:"Stake | Primary",key:"SPR",sort_index:.5,color_number:16},stakeSundaySchool:{label:"Stake | Sunday School",key:"SSS",sort_index:.6,color_number:21},stakeYsa:{label:"Stake | YSA",key:"SYA",sort_index:.7,color_number:22},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21},ysa:{label:"YSA",key:"YSA",sort_index:18,color_number:22}},Et=Object.values(Rn).sort((e,t)=>e.sort_index-t.sort_index),Zr=e=>e?Et.find(t=>t.key===e):void 0,na={bishop:"Bishop",first_counselor:"1st Counselor",second_counselor:"2nd Counselor"},Pt=e=>{let t=0;return e.bishop_approval==="YES"&&t++,e.first_counselor_approval==="YES"&&t++,e.second_counselor_approval==="YES"&&t++,t},Hn=e=>Pt(e)>0,Fn=e=>e.is_published?"published":Pt(e)>0?"approved":e.bishop_approval==="NO"||e.first_counselor_approval==="NO"||e.second_counselor_approval==="NO"?"needs_review":"pending";let nt=null;const jn=e=>e.replace(/<[^>]*>/g,"").toLowerCase(),ra=(e,t)=>{if(!t.trim())return!0;const a=t.toLowerCase(),r=(e.title||"").toLowerCase(),o=jn(e.description||""),s=(e.location||"").toLowerCase();return r.includes(a)||o.includes(a)||s.includes(a)},Qr=(e,t)=>{if(!t.trim()||!e)return sa(e||"");const a=sa(e),r=new RegExp(`(${wa(t)})`,"gi");return a.replace(r,"<mark>$1</mark>")},Kr=(e,t)=>{if(!t.trim()||!e)return e||"";const a=new RegExp(`(${wa(t)})`,"gi");return e.replace(/(<[^>]*>)|([^<]+)/g,(r,o,s)=>o||(s?s.replace(a,"<mark>$1</mark>"):r))},sa=e=>{const t=typeof document<"u"?document.createElement("div"):null;return t?(t.textContent=e,t.innerHTML):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},wa=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Wn=fa()??null,$n=ua(!1),Nt=Wn?.stores.authenticated??$n,Bn=()=>{const e=We(!1),t=We([]),a=We([]),r=We(""),o=We(""),s=We(!1),d=(_,g)=>!(!_.is_published||!g&&_.is_public===!1),f=Fe([a,Nt],([_,g])=>{const N=new Date,L=je(tt(N,3),{weekStartsOn:1}),l=_.filter(b=>b?.meta_data?.category?.length).filter(b=>d(b,g)).filter(b=>{if(b.event_type==="calendar_event"){const R=b.start_time?$e(b.start_time):null;return R?lt(R,{start:N,end:L}):!1}return!0}).map(b=>Et.find(R=>R.key===b.meta_data?.category)).filter(b=>b!==void 0);return Array.from(new Set(l))}),y=Fe([r],([_])=>Et.find(g=>g.key===_)),D=Fe([a,r,o,Nt],([_,g,N,L])=>_.filter(l=>l.event_type==="calendar_event").filter(l=>{const b=l?.meta_data;return g&&b?b?.category===g:!0}).filter(l=>ra(l,N)).filter(l=>d(l,L)).filter(l=>{const b=l.start_time?$e(l.start_time):null,R=un();return b?dn(b,R)||b.getTime()>=R.getTime():!1})),E=Fe([a,r,o,Nt],([_,g,N,L])=>_.filter(l=>l.event_type==="announcement").filter(l=>{const b=l?.meta_data;return g&&b?b?.category===g:!0}).filter(l=>ra(l,N)).filter(l=>d(l,L))),T=Fe([D],([_])=>_.filter(g=>{const N=g.start_time?$e(g.start_time):null;return N?lt(N,{start:Ke(new Date,{weekStartsOn:1}),end:je(new Date,{weekStartsOn:1})}):!1})),K=()=>{const _=Ke(new Date,{weekStartsOn:1}),g=je(new Date,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},de=Fe([D],([_])=>{const g=tt(Ke(new Date,{weekStartsOn:1}),1),N=je(g,{weekStartsOn:1});return _.filter(L=>{const l=L.start_time?$e(L.start_time):null;return l?lt(l,{start:g,end:N}):!1})}),fe=()=>{const _=tt(Ke(new Date,{weekStartsOn:1}),1),g=je(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},he=Fe([D],([_])=>{const g=tt(Ke(new Date,{weekStartsOn:1}),2),N=je(g,{weekStartsOn:1});return _.filter(L=>{const l=L.start_time?$e(L.start_time):null;return l?lt(l,{start:g,end:N}):!1})}),Ie=()=>{const _=tt(Ke(new Date,{weekStartsOn:1}),2),g=je(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},Be=_=>{const g=[],N=new Date,L=new Date;L.setFullYear(N.getFullYear()+1);for(const l of _)if(l.recurrence_rule&&l.start_time&&l.end_time)try{const b=ln.fromString(l.recurrence_rule),R=l.recurrence_end_date?b.all():b.between(N,L,!0),Me=new Date(l.start_time),me=new Date(l.end_time).getTime()-Me.getTime(),V=aa(Me,xt),Z=V.getHours(),oe=V.getMinutes(),Ee=V.getSeconds(),Oe=V.getMilliseconds(),ye=l.recurrence_exceptions||[],S=l.recurrence_overrides||{};R.forEach((G,Ue)=>{const we=aa(G,xt),I=new Date(we);I.setHours(Z,oe,Ee,Oe);const ie=In(I,xt),Se=ie,qe=new Date(ie.getTime()+me),ke=Te(G,"yyyy-MM-dd"),U=S[ke];if(ye.includes(ke)&&!U)return;const W={...l,id:void 0,start_time:Se.toISOString(),end_time:qe.toISOString(),meta_data:{category:l.meta_data?.category||"",...l.meta_data,recurring_instance:!0,recurring_parent_id:l.id,recurring_instance_index:Ue}};U&&(U.title!==void 0&&(W.title=U.title),U.description!==void 0&&(W.description=U.description),U.location!==void 0&&(W.location=U.location),U.start_time!==void 0&&(W.start_time=U.start_time),U.end_time!==void 0&&(W.end_time=U.end_time),U.is_all_day!==void 0&&(W.is_all_day=U.is_all_day),U.meta_data!==void 0&&(W.meta_data={...W.meta_data,...U.meta_data})),g.push(W)})}catch(b){console.error("Failed to expand recurring event:",l.id,b),g.push(l)}else g.push(l);return g},ze=_=>_.length?Be(_).map(N=>({...N,start_time:N?.start_time?Bt(N.start_time):void 0,end_time:N.end_time?Bt(N.end_time):void 0})):[];return nt={stores:{ready:e,data:t,dbData:a,announcements:E,calendarEvents:D,calendarEventsThisWeek:T,calendarEventsNextWeek:de,calendarEventsNextNextWeek:he,currentCategories:f,categoryFilter:r,searchQuery:o,currentCategoryFilter:y,weeksExpanded:s},actions:{reload:async()=>{e.set(!1);const _=await Ye();a.set(ze(_)),e.set(!0)},calendarEventsThisWeekLabel:K,calendarEventsNextWeekLabel:fe,calendarEventsNextNextWeekLabel:Ie}},nt},Vr=()=>nt?.stores&&Object.keys(nt.stores).length>0?nt:Bn();var zn=C('<div class="d-flex justify-content-center py-3"><!></div>'),qn=C('<div class="text-muted text-center py-3 small">No messages yet</div>'),Zn=C('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"><div> </div> <div> </div></div>'),Qn=C('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"> </div>'),Kn=C('<i class="bi bi-trash"></i>'),Vn=C('<button type="button" class="btn btn-link btn-sm text-danger p-0 mt-1 delete-btn d-block ms-auto svelte-12d50yj" title="Delete message"><!></button>'),Gn=C('<div><div><div class="message-text svelte-12d50yj"> </div> <!> <!></div></div>'),Jn=C('<i class="bi bi-send"></i>'),Xn=C('<div class="messages-container svelte-12d50yj"><!></div> <div class="input-area d-flex gap-2 pt-2 svelte-12d50yj"><textarea class="form-control svelte-12d50yj" rows="2" placeholder="Type a message..."></textarea> <button type="button" class="btn btn-primary btn-sm align-self-end" title="Send message"><!></button></div>',1),er=C("<div><!></div>");function oa(e,t){ia(t,!1);let a=pe(t,"comments",24,()=>[]),r=pe(t,"currentUserId",8),o=pe(t,"onSend",8),s=pe(t,"onDelete",8),d=pe(t,"loading",8,!1),f=pe(t,"disabled",8,!1),y=pe(t,"fullHeight",8,!1),D=Y(""),E=Y(!1),T=Y(null),K=Y();function de(){n(K)&&requestAnimationFrame(()=>{Za(K,n(K).scrollTop=n(K).scrollHeight)})}function fe(l){try{return on($e(l),{addSuffix:!0})}catch{return""}}function he(l){return l.user_id===r()}async function Ie(){const l=n(D).trim();if(!(!l||n(E)||f())){p(E,!0);try{await o()(l),p(D,""),de()}catch(b){console.error("Failed to send message:",b)}finally{p(E,!1)}}}async function Be(l){if(!(n(T)||f())){p(T,l);try{await s()(l)}catch(b){console.error("Failed to delete message:",b)}finally{p(T,null)}}}function ze(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),Ie())}q(()=>j(a()),()=>{a().length&&de()}),la(),ma();var c=er();let _;var g=v(c);{var N=l=>{var b=zn(),R=v(b);Ge(R,{size:"sm"}),m(b),k(l,b)},L=l=>{var b=Xn(),R=at(b),Me=v(R);{var ge=S=>{var G=qn();k(S,G)},me=S=>{var G=Va(),Ue=at(G);da(Ue,1,a,we=>we.id,(we,I)=>{const ie=Ve(()=>(n(I),x(()=>he(n(I)))));var Se=Gn();let qe;var ke=v(Se);let U;var W=v(ke),ut=v(W,!0);m(W);var Je=M(W,2);{var Ae=J=>{var H=Zn(),xe=v(H),Le=v(xe,!0);m(xe);var Ze=M(xe,2),se=v(Ze,!0);m(Ze),m(H),P(Ce=>{re(Le,(n(I),x(()=>n(I).user_display_name))),re(se,Ce)},[()=>(n(I),x(()=>fe(n(I).created_at)))]),k(J,H)},Pe=J=>{var H=Qn(),xe=v(H,!0);m(H),P(Le=>re(xe,Le),[()=>(n(I),x(()=>fe(n(I).created_at)))]),k(J,H)};A(Je,J=>{n(ie)?J(Pe,!1):J(Ae)})}var rt=M(Je,2);{var dt=J=>{var H=Vn(),xe=v(H);{var Le=se=>{Ge(se,{size:"xs"})},Ze=se=>{var Ce=Kn();k(se,Ce)};A(xe,se=>{n(T),n(I),x(()=>n(T)===n(I).id)?se(Le):se(Ze,!1)})}m(H),P(()=>H.disabled=(n(T),n(I),x(()=>n(T)===n(I).id))),be("click",H,()=>Be(n(I).id)),k(J,H)};A(rt,J=>{n(ie)&&J(dt)})}m(ke),m(Se),P(()=>{qe=Ne(Se,1,"d-flex mb-2",null,qe,{"justify-content-end":n(ie),"justify-content-start":!n(ie)}),U=Ne(ke,1,"message-bubble svelte-12d50yj",null,U,{own:n(ie),other:!n(ie)}),re(ut,(n(I),x(()=>n(I).message)))}),k(we,Se)}),k(S,G)};A(Me,S=>{j(a()),x(()=>a().length===0)?S(ge):S(me,!1)})}m(R),sn(R,S=>p(K,S),()=>n(K));var V=M(R,2),Z=v(V);Qa(Z);var oe=M(Z,2),Ee=v(oe);{var Oe=S=>{Ge(S,{size:"xs"})},ye=S=>{var G=Jn();k(S,G)};A(Ee,S=>{n(E)?S(Oe):S(ye,!1)})}m(oe),m(V),P(S=>{Z.disabled=f()||n(E),oe.disabled=S},[()=>(j(f()),n(E),n(D),x(()=>f()||n(E)||!n(D).trim()))]),rn(Z,()=>n(D),S=>p(D,S)),be("keydown",Z,ze),be("click",oe,Ie),k(l,b)};A(g,l=>{d()?l(N):l(L,!1)})}m(c),P(()=>_=Ne(c,1,"chat-thread d-flex flex-column svelte-12d50yj",null,_,{"chat-thread-full":y()})),k(e,c),ca()}async function tr(e){const{data:t,error:a}=await O.from("event_bishopric_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(a)throw a;return t??[]}async function ar(e,t,a,r){const{data:o,error:s}=await O.from("event_bishopric_comments").insert([{event_id:e,user_id:t,user_display_name:a,message:r}]).select().single();if(s)throw s;return o}async function nr(e){const{error:t}=await O.from("event_bishopric_comments").delete().eq("id",e);if(t)throw t}async function rr(e){const{data:t,error:a}=await O.from("event_submitter_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(a)throw a;return t??[]}async function sr(e,t,a,r){const{data:o,error:s}=await O.from("event_submitter_comments").insert([{event_id:e,user_id:t,user_display_name:a,message:r}]).select().single();if(s)throw s;return o}async function or(e){const{error:t}=await O.from("event_submitter_comments").delete().eq("id",e);if(t)throw t}var ir=C("<span> </span>"),lr=C('<div class="alert alert-info mb-0" role="alert">Save this event or announcement before requesting bishopric approvals.</div>'),cr=C('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),ur=C('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),dr=C('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Bishopric Discussion</span> <small class="text-muted">Private notes between bishopric members</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!> <div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Submitter</span> <small class="text-muted"> </small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),fr=C('<small class="text-muted"> </small>'),mr=C("<span><!></span>"),_r=C('<div class="decision-buttons d-grid gap-2 gap-md-3 svelte-jfsv9u"><button type="button"><i class="bi bi-check-circle-fill"></i> <div><div class="action-label svelte-jfsv9u">Approve</div> <small class="text-muted">Vote to approve</small></div></button> <button type="button"><i class="bi bi-pencil-square"></i> <div><div class="action-label svelte-jfsv9u">Request Changes</div> <small class="text-muted">Ask submitter to revise</small></div></button> <button type="button"><i class="bi bi-hourglass-split"></i> <div><div class="action-label svelte-jfsv9u">Mark Pending</div> <small class="text-muted">No decision yet</small></div></button> <!></div>'),vr=C("<span> </span>"),pr=C('<div class="list-group-item"><div class="d-flex flex-column gap-2"><div><div class="fw-semibold"> </div> <!></div> <div><!></div></div></div>'),br=C('<i class="bi bi-globe-americas"></i>'),hr=C('<button type="button" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center gap-2"><!> Unpublish</button>'),gr=C('<i class="bi bi-globe"></i>'),yr=C('<small class="text-muted text-center">At least one approval required to publish</small>'),wr=C('<button type="button" class="btn btn-success w-100 d-flex align-items-center justify-content-center gap-2"><!> Publish to Ward</button> <!>',1),xr=C('<div class="card-footer text-danger small"> </div>'),Dr=C('<!> <div class="card"><div class="list-group list-group-flush"></div> <div class="publish-section d-flex flex-column gap-2 p-3 svelte-jfsv9u"><div class="d-flex justify-content-between align-items-center"><span class="text-muted small fw-semibold"> </span></div> <!></div> <!></div>',1),Sr=C('<div class="d-flex flex-column gap-3"><div class="d-flex flex-wrap align-items-center justify-content-between gap-2"><h3 class="h5 mb-0">Bishopric Approval</h3> <!></div> <!></div>');function Gr(e,t){ia(t,!1);const a=()=>en(R,"$currentUserStore",r),[r,o]=tn(),s=Y(),d=Y(),f=Y(),y=Y(),D=Y(),E=Y(),T=Y(),K=Y(),de=Y(),fe=Y(),he=Y(),Ie=Y(),Be=Y(),ze=Y();let c=pe(t,"eventItem",12),_=pe(t,"disabled",8,!1),g=pe(t,"reloadEvents",8,null);const N={bishop:"bishopric-bishop",first_counselor:"bishopric-first-counselor",second_counselor:"bishopric-second-counselor"},L={pending:{text:"Pending Approval",class:"bg-warning-subtle text-warning-emphasis"},approved:{text:"Approved",class:"bg-success-subtle text-success-emphasis"},needs_review:{text:"Needs Review",class:"bg-info-subtle text-info-emphasis"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis"}},l=fa()??null,b=ua(nn),R=l?.stores.currentUser??b,Me=["bishop","first_counselor","second_counselor"];let ge=Y(""),me=Y(null),V=Y(!1),Z=Y([]),oe=Y(!1),Ee=!1;const Oe=`bishopric-chat-${zt()}`;let ye=Y(null),S=Y([]),G=Y(!1),Ue=!1;const we=`submitter-chat-${zt()}`;let I=null;Ja(async()=>{typeof window<"u"&&(I=(await Ga(()=>import("./DO0djbQe.js").then(u=>u.o),__vite__mapDeps([0,1]),import.meta.url)).default)});function ie(){if(!I)return;const i=document.getElementById(Oe);if(!i)return;I.getOrCreateInstance(i).show()}function Se(){if(!I)return;const i=document.getElementById(we);if(!i)return;I.getOrCreateInstance(i).show()}function qe(i){const u=N[i];return n(s)?.roles?.includes(u)??!1}function ke(i){if(!i)return null;try{return Te($e(i),"MMM d, yyyy 'at' h:mm a")}catch(u){return console.error("Failed to format timestamp",u),null}}async function U(){typeof g()=="function"&&await g()()}async function W(i,u){if(c()?.id){p(ge,""),p(me,i);try{const w=await ba(c().id,i,u,n(s)?.id);w&&c({...c(),bishop_approval:w.bishop_approval,first_counselor_approval:w.first_counselor_approval,second_counselor_approval:w.second_counselor_approval,bishop_approval_at:w.bishop_approval_at,first_counselor_approval_at:w.first_counselor_approval_at,second_counselor_approval_at:w.second_counselor_approval_at,bishop_approval_by_user_id:w.bishop_approval_by_user_id,first_counselor_approval_by_user_id:w.first_counselor_approval_by_user_id,second_counselor_approval_by_user_id:w.second_counselor_approval_by_user_id,is_published:w.is_published}),await U()}catch(w){console.error("Failed to update approval",w),p(ge,"Unable to update approval. Please try again.")}finally{p(me,null)}}}async function ut(i){await W(i,null)}async function Je(){if(c()?.id){p(ge,""),p(V,!0);try{const i=n(E)?await ga(c().id):await ha(c().id);i&&c({...c(),is_published:i.is_published}),await U()}catch(i){console.error("Failed to update publish status",i),p(ge,"Unable to update publish status. Please try again.")}finally{p(V,!1)}}}let Ae=null,Pe=null;function rt(){p(Z,[]),Ee=!1,p(oe,!1),p(S,[]),Ue=!1,p(G,!1)}Xa(()=>{J(),se()});function dt(i){const u=i??c()?.id??null;if(Ae||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&O.realtime.setAuth(w),Ae=O.channel(`bishopric-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_bishopric_comments",filter:`event_id=eq.${u}`},()=>{H(u)}).subscribe()}function J(){Ae&&(O.removeChannel(Ae),Ae=null)}async function H(i){const u=i??c()?.id??null;if(u){Ee||p(oe,!0);try{const w=await tr(u);u===(c()?.id??null)&&(p(Z,w),Ee=!0)}catch(w){console.error("Failed to load bishopric comments:",w)}finally{u===(c()?.id??null)&&p(oe,!1)}}}async function xe(i){if(!c()?.id||!n(s)?.id)return;const u=n(s).displayName||n(s).username||"Unknown";await ar(c().id,n(s).id,u,i),await H()}async function Le(i){await nr(i),await H()}function Ze(i){const u=i??c()?.id??null;if(Pe||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&O.realtime.setAuth(w),Pe=O.channel(`submitter-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${u}`},()=>{Ce(u)}).subscribe()}function se(){Pe&&(O.removeChannel(Pe),Pe=null)}async function Ce(i){const u=i??c()?.id??null;if(u){Ue||p(G,!0);try{const w=await rr(u);u===(c()?.id??null)&&(p(S,w),Ue=!0)}catch(w){console.error("Failed to load submitter comments:",w)}finally{u===(c()?.id??null)&&p(G,!1)}}}async function xa(i){if(!c()?.id||!n(s)?.id)return;const u=n(s).displayName||n(s).username||"Unknown";await sr(c().id,n(s).id,u,i),await Ce()}async function Da(i){await or(i),await Ce()}function Sa(i){return i==="YES"?{text:"Approved",class:"bg-success-subtle text-success-emphasis"}:i==="NO"?{text:"Requested Changes",class:"bg-info-subtle text-info-emphasis"}:{text:"No Input Yet",class:"bg-secondary-subtle text-secondary-emphasis"}}const ft="btn btn-sm action-btn w-100 text-start d-flex align-items-center gap-2";function ka(i){return`${ft} ${i==="YES"?"btn-success text-white":"btn-outline-success"}`}function Ca(i){return`${ft} ${i==="NO"?"btn-info text-dark":"btn-outline-info"}`}function Ta(i){const u=i==null;return`${ft} ${u?"btn-secondary text-white":"btn-outline-secondary"}`}q(()=>a(),()=>{p(s,a())}),q(()=>j(c()),()=>{p(d,Fn(c()))}),q(()=>n(d),()=>{p(f,L[n(d)])}),q(()=>j(c()),()=>{p(y,Pt(c()))}),q(()=>j(c()),()=>{p(D,Hn(c()))}),q(()=>j(c()),()=>{p(E,c()?.is_published??!1)}),q(()=>j(c()),()=>{p(T,{bishop:c()?.bishop_approval,first_counselor:c()?.first_counselor_approval,second_counselor:c()?.second_counselor_approval})}),q(()=>j(c()),()=>{p(K,{bishop:c()?.bishop_approval_at,first_counselor:c()?.first_counselor_approval_at,second_counselor:c()?.second_counselor_approval_at})}),q(()=>n(s),()=>{p(de,n(s)?.roles?.includes("bishopric-bishop")??!1)}),q(()=>n(s),()=>{p(fe,n(s)?.roles?.includes("bishopric-first-counselor")??!1)}),q(()=>n(s),()=>{p(he,n(s)?.roles?.includes("bishopric-second-counselor")??!1)}),q(()=>(n(de),n(fe),n(he)),()=>{p(Ie,n(de)||n(fe)||n(he))}),q(()=>(n(de),n(fe),n(he)),()=>{p(Be,n(de)?Me:Me.filter(i=>i==="bishop"||i==="first_counselor"&&n(fe)||i==="second_counselor"&&n(he)))}),q(()=>(j(c()),n(ye)),()=>{const i=c()?.id??null;i&&i!==n(ye)?(p(ye,i),rt(),J(),se(),H(i),Ce(i),dt(i),Ze(i)):!i&&n(ye)!==null&&(p(ye,null),rt(),J(),se())}),q(()=>j(c()),()=>{p(ze,c()?.meta_data?.submitted_by_name??"Submitter")}),la(),ma();var mt=Sr(),_t=v(mt),Na=M(v(_t),2);{var Ya=i=>{var u=ir(),w=v(u,!0);m(u),P(()=>{Ne(u,1,(n(f),x(()=>`badge ${n(f).class}`)),"svelte-jfsv9u"),re(w,(n(f),x(()=>n(f).text)))}),k(i,u)};A(Na,i=>{j(c()),x(()=>c()?.id)&&i(Ya)})}m(_t);var Ia=M(_t,2);{var Ma=i=>{var u=lr();k(i,u)},Ea=i=>{var u=Dr(),w=at(u);{var Oa=$=>{var h=dr(),F=at(h),le=v(F),_e=M(v(le),4),X=v(_e);{var Re=z=>{var ne=cr(),He=v(ne,!0);m(ne),P(()=>re(He,(n(Z),x(()=>n(Z).length)))),k(z,ne)};A(X,z=>{n(Z),x(()=>n(Z).length>0)&&z(Re)})}it(2),m(_e),m(le),m(F);var Qe=M(F,2);{let z=Ve(()=>(j(c()),x(()=>c()?.title||"Event")));qt(Qe,{get id(){return Oe},subtitle:"Discussion",get title(){return n(z)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(ne,He)=>{{let De=Ve(()=>(n(s),x(()=>n(s)?.id??-1)));oa(ne,{get comments(){return n(Z)},get currentUserId(){return n(De)},onSend:xe,onDelete:Le,get loading(){return n(oe)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}var B=M(Qe,2),ce=v(B),Xe=M(v(ce),2),st=M(v(Xe),2),ht=v(st,!0);m(st),m(Xe);var te=M(Xe,2),ee=v(te);{var ae=z=>{var ne=ur(),He=v(ne,!0);m(ne),P(()=>re(He,(n(S),x(()=>n(S).length)))),k(z,ne)};A(ee,z=>{n(S),x(()=>n(S).length>0)&&z(ae)})}it(2),m(te),m(ce),m(B);var ve=M(B,2);{let z=Ve(()=>(j(c()),x(()=>c()?.title||"Event")));qt(ve,{get id(){return we},subtitle:"Discussion with Submitter",get title(){return n(z)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(ne,He)=>{{let De=Ve(()=>(n(s),x(()=>n(s)?.id??-1)));oa(ne,{get comments(){return n(S)},get currentUserId(){return n(De)},onSend:xa,onDelete:Da,get loading(){return n(G)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}P(()=>{yt(le,"aria-controls",Oe),yt(ce,"aria-controls",we),re(ht,n(ze))}),be("click",le,ie),be("click",ce,Se),k($,h)};A(w,$=>{n(Ie)&&$(Oa)})}var Lt=M(w,2),vt=v(Lt);da(vt,5,()=>n(Be),an,($,h)=>{var F=pr(),le=v(F),_e=v(le),X=v(_e),Re=v(X,!0);m(X);var Qe=M(X,2);{var B=te=>{var ee=fr(),ae=v(ee,!0);m(ee),P(ve=>re(ae,ve),[()=>(n(K),n(h),x(()=>ke(n(K)[n(h)])))]),k(te,ee)};A(Qe,te=>{n(K),n(h),x(()=>n(K)[n(h)])&&te(B)})}m(_e);var ce=M(_e,2),Xe=v(ce);{var st=te=>{var ee=_r(),ae=v(ee),ve=M(ae,2),z=M(ve,2),ne=M(z,2);{var He=De=>{var et=mr(),gt=v(et);Ge(gt,{size:"xs"}),m(et),k(De,et)};A(ne,De=>{n(me)===n(h)&&De(He)})}m(ee),P((De,et,gt)=>{Ne(ae,1,De,"svelte-jfsv9u"),ae.disabled=_()||n(me)===n(h),Ne(ve,1,et,"svelte-jfsv9u"),ve.disabled=_()||n(me)===n(h),Ne(z,1,gt,"svelte-jfsv9u"),z.disabled=_()||n(me)===n(h)},[()=>Dt((n(T),n(h),x(()=>ka(n(T)[n(h)])))),()=>Dt((n(T),n(h),x(()=>Ca(n(T)[n(h)])))),()=>Dt((n(T),n(h),x(()=>Ta(n(T)[n(h)]))))]),be("click",ae,()=>W(n(h),"YES")),be("click",ve,()=>W(n(h),"NO")),be("click",z,()=>ut(n(h))),k(te,ee)},ht=te=>{const ee=Ve(()=>(n(T),n(h),x(()=>Sa(n(T)[n(h)]))));var ae=vr(),ve=v(ae,!0);m(ae),P(()=>{Ne(ae,1,(j(n(ee)),x(()=>`badge ${n(ee).class}`)),"svelte-jfsv9u"),re(ve,(j(n(ee)),x(()=>n(ee).text)))}),k(te,ae)};A(Xe,te=>{n(h),x(()=>qe(n(h)))?te(st):te(ht,!1)})}m(ce),m(le),m(F),P(()=>re(Re,(j(na),n(h),x(()=>na[n(h)])))),k($,F)}),m(vt);var pt=M(vt,2),bt=v(pt),Rt=v(bt),Ua=v(Rt);m(Rt),m(bt);var Aa=M(bt,2);{var Pa=$=>{var h=hr(),F=v(h);{var le=X=>{Ge(X,{size:"xs"})},_e=X=>{var Re=br();k(X,Re)};A(F,X=>{n(V)?X(le):X(_e,!1)})}it(),m(h),P(()=>h.disabled=_()||n(V)),be("click",h,Je),k($,h)},La=$=>{var h=wr(),F=at(h),le=v(F);{var _e=B=>{Ge(B,{size:"xs"})},X=B=>{var ce=gr();k(B,ce)};A(le,B=>{n(V)?B(_e):B(X,!1)})}it(),m(F);var Re=M(F,2);{var Qe=B=>{var ce=yr();k(B,ce)};A(Re,B=>{n(D)||B(Qe)})}P(()=>{F.disabled=_()||n(V)||!n(D),yt(F,"title",n(D)?"":"At least one approval required to publish")}),be("click",F,Je),k($,h)};A(Aa,$=>{n(E)?$(Pa):$(La,!1)})}m(pt);var Ra=M(pt,2);{var Ha=$=>{var h=xr(),F=v(h,!0);m(h),P(()=>re(F,n(ge))),k($,h)};A(Ra,$=>{n(ge)&&$(Ha)})}m(Lt),P(()=>re(Ua,`Approvals: ${n(y)??""} of 3`)),k(i,u)};A(Ia,i=>{j(c()),x(()=>!c()?.id)?i(Ma):i(Ea,!1)})}m(mt),k(e,mt),ca(),o()}export{Gr as B,Rn as C,Et as D,Fn as a,Zr as b,Qr as c,An as d,Kr as e,En as f,Vr as g,zr as h,In as i,tt as j,Pt as k,ya as l,Ln as m,On as n,pa as o,ct as p,Mn as q,rr as r,oa as s,aa as t,Pn as u,or as v,sr as w,qr as x};
