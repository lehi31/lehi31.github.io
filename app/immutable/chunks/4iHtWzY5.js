const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cd8G49HA.js","./NZTpNUN0.js","./69_IOA4Y.js","./DIeogL5L.js","./D6GkHfO-.js","./DYmw-k_K.js","./D8wZRsgK.js","./COMoFu8N.js","./DsJSLd4M.js","./C_VuHRZi.js","./B8gJkoMb.js","./BNcMi4Ct.js","./BUApaBEI.js","./CdEA5IGF.js","./XlJfi8GN.js","./C8uFvBRH.js","./0TZHDhc0.js","./BuBHfUc8.js","../assets/Spinner.DTjfhZ6-.css","./6wL3GoW6.js","./CUNSJrQ4.js","./RVChvXYJ.js","./r7-tBYgy.js","./CFZlFXmi.js","./BQgE_4aO.js","../assets/confirm.ChDpDKXb.css","./BvzMQ0uj.js","./CmsKOCeN.js","../assets/AnnouncementWidgetItem.BsTuXRho.css"])))=>i.map(i=>d[i]);
import{_ as sa}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{o as Ae}from"./B8gJkoMb.js";import{p as Se,ay as O,az as Ie,f as L,g as t,a as De,U as u,s as m,a8 as d,c as n,r as a,u as v,t as V,I as bt,aB as ra,E as et,aC as oa}from"./D6GkHfO-.js";import{i as b,e as z,s as it}from"./DYmw-k_K.js";import{e as St,i as ia}from"./COMoFu8N.js";import{f as l,a as o,c as ve}from"./D8wZRsgK.js";import{s as X}from"./DsJSLd4M.js";import{k as at,l as xe,m as la,t as da,g as Oe,p as P,f as h,P as yt,c as de}from"./C_VuHRZi.js";import{i as Te}from"./XlJfi8GN.js";import{p as ca,s as We,a as lt}from"./C8uFvBRH.js";import{g as Ne,A as Ce,c as ce,e as At,a as je,E as va,b as _a}from"./Cd8G49HA.js";import{S as Pe}from"./BuBHfUc8.js";import{v as Le,D as qe}from"./DH5YToVs.js";import{s as ua}from"./CFZlFXmi.js";function Me(nt,T,y){const w=at(nt,y),J=at(T,y),st=+w-xe(w),Q=+J-xe(J);return Math.round((st-Q)/la)}function $e(nt){const T=da(nt);return T.setDate(1),T.setHours(0,0,0,0),T}var ma=l('<button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Add event"><i class="bi bi-plus"></i></button>'),fa=l('<div class="event-actions svelte-i4p9jq"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit event"><i class="bi bi-pencil-square"></i></button></div>'),ga=l('<div class="daily-event-row svelte-i4p9jq"><div class="event-content svelte-i4p9jq"><!></div> <!></div>'),pa=l('<li class="list-group-item py-3"><div class="d-flex flex-column flex-md-row gap-3"><div class="event-date-column d-flex flex-column align-items-start text-nowrap svelte-i4p9jq"><strong> </strong> <small class="text-muted"> </small></div> <div class="d-flex flex-column gap-3 flex-grow-1"></div></div></li>'),ba=l('<li class="list-group-item py-3 text-muted">No events scheduled this week.</li>'),ya=l('<li class="list-group-item list-group-item-light text-uppercase small fw-lighter p-0"><button><span class="d-flex align-items-center gap-2"><i></i> <span class="text-muted"> </span></span> <span> </span></button></li> <!>',1),Ea=l('<li class="list-group-item bg-secondary text-white fw-semibold"> </li> <!>',1),ka=l('<ul class="list-group list-group-flush border-top-0"></ul>'),ha=l('<div class="card-body text-muted small">There are no upcoming events this month.</div>'),wa=l('<button class="btn btn-outline-secondary btn-sm">Reset</button>'),xa=l('<div class="d-flex gap-2"><button class="btn btn-primary btn-sm">More</button> <button class="btn btn-outline-primary btn-sm">All</button></div>'),Ma=l('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <!></div>'),$a=l("<!> <!>",1),Aa=l('<div class="card-body text-muted small">There are no upcoming events scheduled.</div>'),Sa=l('<div class="card"><div class="card-header"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><span>Events</span> <div class="d-flex align-items-center gap-2 flex-wrap justify-content-end"><!> <!></div></div></div> <!></div>'),Ia=l('<div class="d-flex flex-column gap-4"><!></div>'),Da=l("<!> <!>",1);function an(nt,T){Se(T,!1);const y=()=>lt(H,"$weeksExpanded",Q),w=()=>lt(Ut,"$calendarEvents",Q),J=()=>lt(Ot,"$currentUserHasPermission",Q),st=()=>lt(Ft,"$ready",Q),[Q,dt]=We(),ct=u(),It=u(),Dt=u(),Et=u(),q=u(),Y=u(),A=u(),vt=u(),_t=u(),{stores:{currentUserHasPermission:Ot}}=Oe(),{stores:{ready:Ft,calendarEvents:Ut,weeksExpanded:H},actions:{reload:Bt}}=Ne(),kt={title:"Event",description:"",location:"",event_type:"calendar_event",is_public:!0};let R=ca(T,"formId",24,Le),ut=u(!1),Tt=u(""),ht=u({...kt});const Wt=8,x=8;let g=u(Wt),W=u(!1);const Z=ua();let F=u({});function Nt(e){return e===t(It)||e===t(Dt)}function Kt(e){const s=t(F)[e]??Nt(e);d(F,{...t(F),[e]:!s})}const Vt=e=>{const s=new Map;for(const i of e){if(!i.start_time)continue;const r=P(i.start_time);if(Number.isNaN(r.getTime()))continue;const c=at(r,{weekStartsOn:1}),E=At(r,{weekStartsOn:1}),p=h(c,"yyyy-MM-dd"),mt=`${h(c,"MMM d")} – ${h(E,"MMM d")}`;let B=s.get(p);B||(B={key:p,label:mt,days:new Map},s.set(p,B));const f=h(r,"yyyy-MM-dd");let k=B.days.get(f);k||(k={key:f,displayDay:h(r,"EEE"),displayDate:h(r,"MMM d"),events:[]},B.days.set(f,k)),k.events.push(i)}const _=i=>{const r=h(i,"yyyy-MM-dd");s.has(r)||s.set(r,{key:r,label:`${h(i,"MMM d")} – ${h(At(i,{weekStartsOn:1}),"MMM d")}`,days:new Map})},M=Array.from(s.values());if(M.length){const i=M.reduce((E,p)=>p.key>E?p.key:E,M[0].key),r=P(i);let c=at(new Date,{weekStartsOn:1});if(c>r)_(c);else for(;c<=r;)_(c),c=ce(c,1)}return Array.from(s.values()).sort((i,r)=>i.key<r.key?-1:i.key>r.key?1:0).map(i=>({key:i.key,label:i.label,days:Array.from(i.days.values()).sort((r,c)=>r.key<c.key?-1:r.key>c.key?1:0).map(r=>({...r,events:r.events.slice().sort((c,E)=>{const p=c.is_all_day?0:1,mt=E.is_all_day?0:1;if(p!==mt)return p-mt;const B=c.start_time?P(c.start_time).getTime():Number.MAX_SAFE_INTEGER,f=E.start_time?P(E.start_time).getTime():Number.MAX_SAFE_INTEGER;return B-f})}))}))};function zt(){d(g,t(g)+x)}function Xt(){d(g,520),d(W,!0)}function S(){d(g,Wt),d(W,!1)}Ae(async()=>{d(ut,J()(yt.CreateEvents)||J()(yt.EditOwnOrgEvents)||J()(yt.EditAllEvents)),await Bt()});const I=async e=>{if(d(Tt,"Item Form"),e?.meta_data?.recurring_instance&&e?.meta_data?.recurring_parent_id){const{getCalendarEvent:s}=await sa(async()=>{const{getCalendarEvent:M}=await import("./Cd8G49HA.js").then(i=>i.h);return{getCalendarEvent:M}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url),_=await s(e.meta_data.recurring_parent_id);if(_){d(ht,{..._,category:_?.meta_data?.category,start_time:e.start_time,end_time:e.end_time,meta_data:{..._.meta_data,recurring_instance:!0,recurring_parent_id:e.meta_data.recurring_parent_id,recurring_instance_index:e.meta_data.recurring_instance_index}});return}}d(ht,{...e,category:e?.meta_data?.category})};O(()=>t(g),()=>{d(ct,ce(Z,t(g)))}),O(()=>at,()=>{d(It,h(at(Z,{weekStartsOn:1}),"yyyy-MM-dd"))}),O(()=>at,()=>{d(Dt,h(ce(at(Z,{weekStartsOn:1}),1),"yyyy-MM-dd"))}),O(()=>(y(),t(F)),()=>{d(Et,e=>y()?!0:t(F)[e]!==void 0?t(F)[e]:Nt(e))}),O(()=>(w(),t(ct)),()=>{d(q,(w()??[]).filter(e=>{if(!e.start_time)return!1;const s=P(e.start_time);return s>=Z&&s<=t(ct)}))}),O(()=>(w(),P),()=>{d(Y,(w()??[]).filter(e=>e.start_time?P(e.start_time)>=Z:!1))}),O(()=>t(q),()=>{d(A,Vt(t(q)))}),O(()=>(t(Y),t(q)),()=>{d(vt,t(Y).length>t(q).length)}),O(()=>(t(A),h),()=>{d(_t,t(A).reduce((e,s)=>{const _=P(s.key),M=At(_,{weekStartsOn:1}),i=h(M,"yyyy-MM"),r=h(M,"MMMM yyyy");return e[i]||(e[i]={label:r,weeks:[]}),e[i].weeks.push(s),e},{}))}),Ie(),Te();var D=Da(),N=L(D);qe(N,{get title(){return t(Tt)},get id(){return R()},children:(e,s)=>{Ce(e,{get eventItem(){return t(ht)},get drawerId(){return R()},name:"event-item-form"})},$$slots:{default:!0}});var rt=m(N,2);{var U=e=>{var s=Sa(),_=n(s),M=n(_),i=m(n(M),2),r=n(i);je(r,{});var c=m(r,2);{var E=f=>{var k=ma();V(()=>{X(k,"data-bs-target",`#${R()??""}`),X(k,"aria-controls",R())}),z("click",k,()=>I({...kt,event_type:"calendar_event",start_time:new Date().toISOString(),end_time:new Date().toISOString(),is_all_day:!0})),o(f,k)};b(c,f=>{t(ut)&&f(E)})}a(i),a(M),a(_);var p=m(_,2);{var mt=f=>{var k=$a(),_e=L(k);{var He=C=>{var K=ka();St(K,5,()=>(t(_t),v(()=>Object.entries(t(_t)))),([ot,Ct])=>ot,(ot,Ct)=>{var Jt=ra(()=>oa(t(Ct),2));let ft=()=>t(Jt)[1];var jt=Ea(),j=L(jt),tt=n(j,!0);a(j);var Pt=m(j,2);St(Pt,1,()=>(ft(),v(()=>ft().weeks)),wt=>wt.key,(wt,$)=>{const ue=bt(()=>(et(P),t($),v(()=>P(t($).key)))),Lt=bt(()=>(et(At),et(t(ue)),v(()=>At(t(ue),{weekStartsOn:1})))),me=bt(()=>(et($e),et(t(Lt)),v(()=>$e(t(Lt))))),Be=bt(()=>(et(Me),et(t(Lt)),et(t(me)),v(()=>Me(t(Lt),t(me),{weekStartsOn:1})+1))),Qt=bt(()=>(t(Et),t($),v(()=>t(Et)(t($).key)))),qt=bt(()=>(t($),v(()=>t($).days.reduce((Mt,Ht)=>Mt+Ht.events.length,0))));var fe=ya(),Yt=L(fe),xt=n(Yt);let ge;var Zt=n(xt),pe=n(Zt),be=m(pe,2),Ke=n(be);a(be),a(Zt);var Gt=m(Zt,2);let ye;var Ve=n(Gt,!0);a(Gt),a(xt),a(Yt);var ze=m(Yt,2);{var Xe=Mt=>{var Ht=ve(),Je=L(Ht);{var Qe=gt=>{var Rt=ve(),Ze=L(Rt);St(Ze,1,()=>(t($),v(()=>t($).days)),te=>te.key,(te,pt)=>{var ee=pa(),Ee=n(ee),ae=n(Ee),ne=n(ae),Ge=n(ne,!0);a(ne);var ke=m(ne,2),ta=n(ke,!0);a(ke),a(ae);var he=m(ae,2);St(he,5,()=>(t(pt),v(()=>t(pt).events)),$t=>$t.id??`${$t.start_time}-${$t.meta_data?.recurring_instance_index??0}`,($t,we)=>{var se=ga(),re=n(se),ea=n(re);va(ea,{get item(){return t(we)},showDate:!1}),a(re);var aa=m(re,2);{var na=oe=>{var ie=fa(),le=n(ie);a(ie),V(()=>{X(le,"data-bs-target",`#${R()??""}`),X(le,"aria-controls",R())}),z("click",le,()=>I(t(we))),o(oe,ie)};b(aa,oe=>{t(ut)&&oe(na)})}a(se),o($t,se)}),a(he),a(Ee),a(ee),V(()=>{it(Ge,(t(pt),v(()=>t(pt).displayDay))),it(ta,(t(pt),v(()=>t(pt).displayDate)))}),o(te,ee)}),o(gt,Rt)},Ye=gt=>{var Rt=ba();o(gt,Rt)};b(Je,gt=>{t($),v(()=>t($).days.length)?gt(Qe):gt(Ye,!1)})}o(Mt,Ht)};b(ze,Mt=>{t(Qt)&&Mt(Xe)})}V(()=>{ge=de(xt,1,"week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-i4p9jq",null,ge,{"text-muted":t(qt)===0}),X(xt,"title",t(Qt)?"Click to collapse week":"Click to expand week"),de(pe,1,`bi ${t(Qt)?"bi-chevron-up":"bi-chevron-down"}`),it(Ke,`Week ${t(Be)??""} [${t(qt)??""} Event${t(qt)===1?"":"s"}]`),ye=de(Gt,1,"",null,ye,{"opacity-50":t(qt)===0}),it(Ve,(t($),v(()=>t($).label)))}),z("click",xt,()=>Kt(t($).key)),o(wt,fe)}),V(()=>it(tt,(ft(),v(()=>ft().label)))),o(ot,jt)}),a(K),o(C,K)},Re=C=>{var K=ha();o(C,K)};b(_e,C=>{t(A),v(()=>t(A).length)?C(He):C(Re,!1)})}var Fe=m(_e,2);{var Ue=C=>{var K=Ma(),ot=n(K),Ct=n(ot);a(ot);var Jt=m(ot,2);{var ft=j=>{var tt=wa();z("click",tt,S),o(j,tt)},jt=j=>{var tt=xa(),Pt=n(tt),wt=m(Pt,2);a(tt),z("click",Pt,zt),z("click",wt,Xt),o(j,tt)};b(Jt,j=>{t(W)?j(ft):j(jt,!1)})}a(K),V(()=>it(Ct,`Showing ${t(q),v(()=>t(q).length)??""} of ${t(Y),v(()=>t(Y).length)??""} future events`)),o(C,K)};b(Fe,C=>{(t(vt)||t(W))&&C(Ue)})}o(f,k)},B=f=>{var k=Aa();o(f,k)};b(p,f=>{w(),v(()=>w()?.length)?f(mt):f(B,!1)})}a(s),o(e,s)},G=e=>{var s=Ia(),_=n(s);Pe(_,{}),a(s),o(e,s)};b(rt,e=>{st()?e(U):e(G,!1)})}o(nt,D),De(),dt()}var Oa=l('<!> <button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Add announcement"><i class="bi bi-plus"></i></button>',1),Ta=l('<div class="announcement-actions svelte-1axao39"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit announcement"><i class="bi bi-pencil-square"></i></button></div>'),Wa=l('<li class="list-group-item py-2"><div class="announcement-row svelte-1axao39"><div class="announcement-content svelte-1axao39"><!></div> <!></div></li>'),Na=l('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <button class="btn btn-primary btn-sm">More</button></div>'),Ca=l('<ul class="list-group list-group-flush border-top-0"></ul> <!>',1),ja=l('<div class="card-body"><div class="alert alert-info mb-0"><i class="bi bi-info-circle me-2"></i> No announcements yet.</div></div>'),Pa=l('<div class="card"><div class="card-header"><div class="d-flex justify-content-between align-items-center"><span>Announcements</span> <div class="d-flex align-items-center gap-2"><!></div></div></div> <!></div>'),La=l('<div class="d-flex flex-column gap-4"><!></div>'),qa=l("<!> <!>",1);function nn(nt,T){Se(T,!1);const y=()=>lt(Et,"$announcements",st),w=()=>lt(It,"$currentUserHasPermission",st),J=()=>lt(Dt,"$ready",st),[st,Q]=We(),dt=u(),ct=u(),{stores:{currentUserHasPermission:It}}=Oe(),{stores:{ready:Dt,announcements:Et},actions:{reload:q}}=Ne(),Y={title:"Announcement",description:"",location:"",event_type:"announcement",is_public:!0},A=Le();let vt=u(!1),_t=u(""),Ot=u({...Y});const Ft=5,Ut=5;let H=u(Ft);function Bt(){d(H,t(H)+Ut)}Ae(async()=>{d(vt,w()(yt.CreateEvents)||w()(yt.EditOwnOrgEvents)||w()(yt.EditAllEvents)),await q()});const kt=x=>{d(_t,"Announcement Form"),d(Ot,{...x,category:x?.meta_data?.category})};O(()=>(y(),t(H)),()=>{d(dt,(y()??[]).slice(0,t(H)))}),O(()=>(y(),t(H)),()=>{d(ct,(y()?.length??0)>t(H))}),Ie(),Te();var R=qa(),ut=L(R);qe(ut,{get title(){return t(_t)},get id(){return A},children:(x,g)=>{Ce(x,{get eventItem(){return t(Ot)},get drawerId(){return A},name:"announcement-item-form"})},$$slots:{default:!0}});var Tt=m(ut,2);{var ht=x=>{var g=Pa(),W=n(g),Z=n(W),F=m(n(Z),2),Nt=n(F);{var Kt=S=>{var I=Oa(),D=L(I);je(D,{});var N=m(D,2);V(()=>{X(N,"data-bs-target",`#${A??""}`),X(N,"aria-controls",A)}),z("click",N,()=>kt({...Y,event_type:"calendar_event",start_time:new Date().toISOString(),end_time:new Date().toISOString(),is_all_day:!0})),o(S,I)};b(Nt,S=>{t(vt)&&S(Kt)})}a(F),a(Z),a(W);var Vt=m(W,2);{var zt=S=>{var I=Ca(),D=L(I);St(D,5,()=>t(dt),ia,(U,G)=>{var e=Wa(),s=n(e),_=n(s),M=n(_);_a(M,{get item(){return t(G)}}),a(_);var i=m(_,2);{var r=c=>{var E=Ta(),p=n(E);a(E),V(()=>{X(p,"data-bs-target",`#${A??""}`),X(p,"aria-controls",A)}),z("click",p,()=>kt(t(G))),o(c,E)};b(i,c=>{t(vt)&&c(r)})}a(s),a(e),o(U,e)}),a(D);var N=m(D,2);{var rt=U=>{var G=Na(),e=n(G),s=n(e);a(e);var _=m(e,2);a(G),V(()=>it(s,`Showing ${t(H)??""} of ${y(),v(()=>y()?.length??0)??""}`)),z("click",_,Bt),o(U,G)};b(N,U=>{t(ct)&&U(rt)})}o(S,I)},Xt=S=>{var I=ve(),D=L(I);{var N=rt=>{var U=ja();o(rt,U)};b(D,rt=>{y(),v(()=>y()?.length===0)&&rt(N)},!0)}o(S,I)};b(Vt,S=>{t(dt),v(()=>t(dt).length)?S(zt):S(Xt,!1)})}a(g),o(x,g)},Wt=x=>{var g=La(),W=n(g);Pe(W,{}),a(g),o(x,g)};b(Tt,x=>{J()?x(ht):x(Wt,!1)})}o(nt,R),De(),Q()}export{nn as A,an as E,Me as d,$e as s};
