import{s as Xe,r as Pt,n as ee,h as Se,b as Dt,o as zt}from"./scheduler.CPYPM6N8.js";import{S as xe,i as et,e as _,s as k,b as le,c as pe,j as p,k as E,l as B,f as M,d as h,m as ae,g as he,n as m,y as X,o as L,q as d,D as x,p as ve,C as K,r as Ie,t as P,a as R,u as ge,w as Pe,v as ze,z as Qe,x as Rt,A as en,K as tn,L as nn}from"./index.BnmbcjlB.js";import{c as ln,g as Zt,F as jt}from"./confirm.service.BgmUUAFu.js";import{t as Bt,a as wt,f as Ye,p as $e,e as dt}from"./Header.D0k3puKg.js";import{s as tt,t as Ke,D as Wt}from"./analytics.DztBPlvb.js";import{S as qt}from"./Spinner.D8nTkRQD.js";import{w as Je}from"./index.lObVyZoE.js";import{A as Oe,B as Tt}from"./app.state.CUWBy8Yr.js";import{p as mt}from"./parse.BB9KWfT6.js";function an(n,e){const t=Bt(n);return t.setHours(e),t}function sn(n,e){const t=Bt(n);return t.setMinutes(e),t}function rn(n,e){const t=dn(e);return"formatToParts"in t?un(t,n):cn(t,n)}const on={year:0,month:1,day:2,hour:3,minute:4,second:5};function un(n,e){try{const t=n.formatToParts(e),l=[];for(let a=0;a<t.length;a++){const s=on[t[a].type];s!==void 0&&(l[s]=parseInt(t[a].value,10))}return l}catch(t){if(t instanceof RangeError)return[NaN];throw t}}function cn(n,e){const t=n.format(e),l=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(t);return[parseInt(l[3],10),parseInt(l[1],10),parseInt(l[2],10),parseInt(l[4],10),parseInt(l[5],10),parseInt(l[6],10)]}const ot={},It=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),fn=It==="06/25/2014, 00:00:00"||It==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function dn(n){return ot[n]||(ot[n]=fn?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),ot[n]}function Gt(n,e,t,l,a,s,r){const u=new Date(0);return u.setUTCFullYear(n,e,t),u.setUTCHours(l,a,s,r),u}const Ct=36e5,mn=6e4,ut={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Kt(n,e,t){if(!n)return 0;let l=ut.timezoneZ.exec(n);if(l)return 0;let a,s;if(l=ut.timezoneHH.exec(n),l)return a=parseInt(l[1],10),yt(a)?-(a*Ct):NaN;if(l=ut.timezoneHHMM.exec(n),l){a=parseInt(l[2],10);const r=parseInt(l[3],10);return yt(a,r)?(s=Math.abs(a)*Ct+r*mn,l[1]==="+"?-s:s):NaN}if(hn(n)){e=new Date(e||Date.now());const r=t?e:_n(e),u=_t(r,n);return-(t?u:pn(e,u,n))}return NaN}function _n(n){return Gt(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())}function _t(n,e){const t=rn(n,e),l=Gt(t[0],t[1]-1,t[2],t[3]%24,t[4],t[5],0).getTime();let a=n.getTime();const s=a%1e3;return a-=s>=0?s:1e3+s,l-a}function pn(n,e,t){let a=n.getTime()-e;const s=_t(new Date(a),t);if(e===s)return e;a-=s-e;const r=_t(new Date(a),t);return s===r?s:Math.max(s,r)}function yt(n,e){return-23<=n&&n<=23&&(e==null||0<=e&&e<=59)}const Et={};function hn(n){if(Et[n])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:n}),Et[n]=!0,!0}catch{return!1}}function Nt(n){const e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),+n-+e}const vn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ct=36e5,kt=6e4,gn=2,J={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:vn};function bn(n,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(n===null)return new Date(NaN);const t=e.additionalDigits==null?gn:Number(e.additionalDigits);if(t!==2&&t!==1&&t!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]")return new Date(n.getTime());if(typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]")return new Date(n);if(Object.prototype.toString.call(n)!=="[object String]")return new Date(NaN);const l=Dn(n),{year:a,restDateString:s}=wn(l.date,t),r=Tn(s,a);if(r===null||isNaN(r.getTime()))return new Date(NaN);if(r){const u=r.getTime();let o=0,i;if(l.time&&(o=In(l.time),o===null||isNaN(o)))return new Date(NaN);if(l.timeZone||e.timeZone){if(i=Kt(l.timeZone||e.timeZone,new Date(u+o)),isNaN(i))return new Date(NaN)}else i=Nt(new Date(u+o)),i=Nt(new Date(u+o+i));return new Date(u+o+i)}else return new Date(NaN)}function Dn(n){const e={};let t=J.dateTimePattern.exec(n),l;if(t?(e.date=t[1],l=t[3]):(t=J.datePattern.exec(n),t?(e.date=t[1],l=t[2]):(e.date=null,l=n)),l){const a=J.timeZone.exec(l);a?(e.time=l.replace(a[1],""),e.timeZone=a[1].trim()):e.time=l}return e}function wn(n,e){if(n){const t=J.YYY[e],l=J.YYYYY[e];let a=J.YYYY.exec(n)||l.exec(n);if(a){const s=a[1];return{year:parseInt(s,10),restDateString:n.slice(s.length)}}if(a=J.YY.exec(n)||t.exec(n),a){const s=a[1];return{year:parseInt(s,10)*100,restDateString:n.slice(s.length)}}}return{year:null}}function Tn(n,e){if(e===null)return null;let t,l,a;if(!n||!n.length)return t=new Date(0),t.setUTCFullYear(e),t;let s=J.MM.exec(n);if(s)return t=new Date(0),l=parseInt(s[1],10)-1,St(e,l)?(t.setUTCFullYear(e,l),t):new Date(NaN);if(s=J.DDD.exec(n),s){t=new Date(0);const r=parseInt(s[1],10);return En(e,r)?(t.setUTCFullYear(e,0,r),t):new Date(NaN)}if(s=J.MMDD.exec(n),s){t=new Date(0),l=parseInt(s[1],10)-1;const r=parseInt(s[2],10);return St(e,l,r)?(t.setUTCFullYear(e,l,r),t):new Date(NaN)}if(s=J.Www.exec(n),s)return a=parseInt(s[1],10)-1,Yt(a)?Mt(e,a):new Date(NaN);if(s=J.WwwD.exec(n),s){a=parseInt(s[1],10)-1;const r=parseInt(s[2],10)-1;return Yt(a,r)?Mt(e,a,r):new Date(NaN)}return null}function In(n){let e,t,l=J.HH.exec(n);if(l)return e=parseFloat(l[1].replace(",",".")),ft(e)?e%24*ct:NaN;if(l=J.HHMM.exec(n),l)return e=parseInt(l[1],10),t=parseFloat(l[2].replace(",",".")),ft(e,t)?e%24*ct+t*kt:NaN;if(l=J.HHMMSS.exec(n),l){e=parseInt(l[1],10),t=parseInt(l[2],10);const a=parseFloat(l[3].replace(",","."));return ft(e,t,a)?e%24*ct+t*kt+a*1e3:NaN}return null}function Mt(n,e,t){e=e||0,t=t||0;const l=new Date(0);l.setUTCFullYear(n,0,4);const a=l.getUTCDay()||7,s=e*7+t+1-a;return l.setUTCDate(l.getUTCDate()+s),l}const Cn=[31,28,31,30,31,30,31,31,30,31,30,31],yn=[31,29,31,30,31,30,31,31,30,31,30,31];function Jt(n){return n%400===0||n%4===0&&n%100!==0}function St(n,e,t){if(e<0||e>11)return!1;if(t!=null){if(t<1)return!1;const l=Jt(n);if(l&&t>yn[e]||!l&&t>Cn[e])return!1}return!0}function En(n,e){if(e<1)return!1;const t=Jt(n);return!(t&&e>366||!t&&e>365)}function Yt(n,e){return!(n<0||n>52||e!=null&&(e<0||e>6))}function ft(n,e,t){return!(n<0||n>=25||e!=null&&(e<0||e>=60)||t!=null&&(t<0||t>=60))}function Fe(n,e,t){n=bn(n,t);const l=Kt(e,n,!0),a=new Date(n.getTime()-l),s=new Date(0);return s.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),s.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),s}const Nn=Je([]);async function nt(){const{data:n,error:e}=await tt.from("calendar_events").select("*").order("start_time",{ascending:!0});if(e)throw e;const t=n||[];return Nn.set(t),t}async function kn(n){const{data:e,error:t}=await tt.from("calendar_events").insert([n]).select();if(t)throw t;return await nt(),e?e[0]:void 0}async function Mn(n,e){const{data:t,error:l}=await tt.from("calendar_events").update(e).eq("id",n).select();if(l)throw l;return await nt(),t?t[0]:void 0}async function Sn(n){const{error:e}=await tt.from("calendar_events").delete().eq("id",n);if(e)throw e;await nt()}let Ve=null;const Yn=()=>{const n=Je(!1),e=Je([]),t=Je([]),l=s=>s.length?s.map(r=>({...r,start_time:wt(r.start_time),end_time:wt(r.end_time)})):[];return Ve={stores:{ready:n,data:e,dbData:t},actions:{reload:async()=>{n.set(!1);const s=await nt();t.set(l(s)),n.set(!0)}}},Ve},Qt=()=>Ve?.stores&&Object.keys(Ve.stores).length>0?Ve:Yn();function Ht(n){let e,t,l="Start time*",a,s,r,u,o,i,f="End time*",g,c,T,U,$;return{c(){e=_("div"),t=_("div"),t.textContent=l,a=k(),s=_("input"),u=k(),o=_("div"),i=_("div"),i.textContent=f,g=k(),c=_("input"),this.h()},l(v){e=p(v,"DIV",{class:!0});var b=E(e);t=p(b,"DIV",{"data-svelte-h":!0}),B(t)!=="svelte-gzi1xn"&&(t.textContent=l),a=M(b),s=p(b,"INPUT",{name:!0,type:!0,step:!0,class:!0}),b.forEach(h),u=M(v),o=p(v,"DIV",{class:!0});var O=E(o);i=p(O,"DIV",{"data-svelte-h":!0}),B(i)!=="svelte-ig3ngi"&&(i.textContent=f),g=M(O),c=p(O,"INPUT",{name:!0,type:!0,step:!0,class:!0}),O.forEach(h),this.h()},h(){m(s,"name",r=n[1]+"-start-time"),m(s,"type","time"),m(s,"step",900),m(s,"class","form-control"),s.disabled=n[6],s.required=!0,X(s,"is-invalid",n[3]),m(e,"class","d-flex flex-column gap-2"),m(c,"name",T=n[1]+"-end-time"),m(c,"type","time"),m(c,"step",900),m(c,"class","form-control"),c.disabled=n[6],c.required=!0,X(c,"is-invalid",n[2]),m(o,"class","d-flex flex-column gap-2")},m(v,b){L(v,e,b),d(e,t),d(e,a),d(e,s),n[29](s),x(s,n[15]),L(v,u,b),L(v,o,b),d(o,i),d(o,g),d(o,c),n[32](c),x(c,n[16]),U||($=[K(s,"focus",n[30]),K(s,"input",n[31]),K(c,"focus",n[33]),K(c,"input",n[34])],U=!0)},p(v,b){b[0]&2&&r!==(r=v[1]+"-start-time")&&m(s,"name",r),b[0]&64&&(s.disabled=v[6]),b[0]&32768&&x(s,v[15]),b[0]&8&&X(s,"is-invalid",v[3]),b[0]&2&&T!==(T=v[1]+"-end-time")&&m(c,"name",T),b[0]&64&&(c.disabled=v[6]),b[0]&65536&&x(c,v[16]),b[0]&4&&X(c,"is-invalid",v[2])},d(v){v&&(h(e),h(u),h(o)),n[29](null),n[32](null),U=!1,Pt($)}}}function Hn(n){let e,t="<span>Delete</span>",l,a;return{c(){e=_("button"),e.innerHTML=t,this.h()},l(s){e=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1bw2173"&&(e.innerHTML=t),this.h()},h(){m(e,"class","btn btn-danger position-relative")},m(s,r){L(s,e,r),l||(a=K(e,"click",n[19]),l=!0)},p:ee,d(s){s&&h(e),l=!1,a()}}}function An(n){let e,t="Create";return{c(){e=_("span"),e.textContent=t},l(l){e=p(l,"SPAN",{"data-svelte-h":!0}),B(e)!=="svelte-1wf0js6"&&(e.textContent=t)},m(l,a){L(l,e,a)},d(l){l&&h(e)}}}function Ln(n){let e,t="Save";return{c(){e=_("span"),e.textContent=t},l(l){e=p(l,"SPAN",{"data-svelte-h":!0}),B(e)!=="svelte-l126tb"&&(e.textContent=t)},m(l,a){L(l,e,a)},d(l){l&&h(e)}}}function At(n){let e,t='<span class="visually-hidden">Item not saved</span>';return{c(){e=_("span"),e.innerHTML=t,this.h()},l(l){e=p(l,"SPAN",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1g0a6ie"&&(e.innerHTML=t),this.h()},h(){m(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(l,a){L(l,e,a)},d(l){l&&h(e)}}}function Un(n){let e,t,l,a="Title*",s,r,u,o,i,f="Event title. i.e. Ward Conference, Ward BBQ Night",g,c,T,U="Date*",$,v,b,O,F,C,y,H,S,I,A,te,se,ie,q,Z,be="Description",fe,z,Ce,He,oe,Re="Describe the event to the best of your knowledge",Ae,Q,de,Ze="Location",Le,j,ye,Ue,ue,je="Location can be physical or virtual",N,Y,ne,De=n[13].message+"",Ee,me,lt,we,Te,at,st,re,rt,V,it,pt,W=!n[0].is_all_day&&Ht(n);Te=new qt({props:{size:"xs"}});let ce=n[18]&&Hn(n);function xt(D,w){return D[18]?Ln:An}let Be=xt(n)(n),G=n[17]&&At();return{c(){e=_("div"),t=_("div"),l=_("div"),l.textContent=a,s=k(),r=_("input"),o=k(),i=_("small"),i.textContent=f,g=k(),c=_("div"),T=_("div"),T.textContent=U,$=k(),v=_("input"),O=k(),F=_("div"),C=_("div"),y=_("input"),S=k(),I=_("label"),A=le("All Day Event"),se=k(),W&&W.c(),ie=k(),q=_("div"),Z=_("div"),Z.textContent=be,fe=k(),z=_("textarea"),He=k(),oe=_("small"),oe.textContent=Re,Ae=k(),Q=_("div"),de=_("div"),de.textContent=Ze,Le=k(),j=_("input"),Ue=k(),ue=_("small"),ue.textContent=je,N=k(),Y=_("div"),ne=_("small"),Ee=le(De),lt=k(),we=_("span"),pe(Te.$$.fragment),at=k(),ce&&ce.c(),st=k(),re=_("button"),Be.c(),rt=k(),G&&G.c(),this.h()},l(D){e=p(D,"DIV",{class:!0});var w=E(e);t=p(w,"DIV",{class:!0});var Ne=E(t);l=p(Ne,"DIV",{"data-svelte-h":!0}),B(l)!=="svelte-1w3dtko"&&(l.textContent=a),s=M(Ne),r=p(Ne,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),o=M(Ne),i=p(Ne,"SMALL",{class:!0,"data-svelte-h":!0}),B(i)!=="svelte-gvb7m1"&&(i.textContent=f),Ne.forEach(h),g=M(w),c=p(w,"DIV",{class:!0});var We=E(c);T=p(We,"DIV",{"data-svelte-h":!0}),B(T)!=="svelte-1992pd0"&&(T.textContent=U),$=M(We),v=p(We,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),We.forEach(h),O=M(w),F=p(w,"DIV",{});var ht=E(F);C=p(ht,"DIV",{class:!0});var qe=E(C);y=p(qe,"INPUT",{class:!0,type:!0,id:!0}),S=M(qe),I=p(qe,"LABEL",{class:!0,for:!0});var vt=E(I);A=ae(vt,"All Day Event"),vt.forEach(h),qe.forEach(h),ht.forEach(h),se=M(w),W&&W.l(w),ie=M(w),q=p(w,"DIV",{class:!0});var ke=E(q);Z=p(ke,"DIV",{"data-svelte-h":!0}),B(Z)!=="svelte-1x8itd0"&&(Z.textContent=be),fe=M(ke),z=p(ke,"TEXTAREA",{name:!0,class:!0}),E(z).forEach(h),He=M(ke),oe=p(ke,"SMALL",{class:!0,"data-svelte-h":!0}),B(oe)!=="svelte-bky2ve"&&(oe.textContent=Re),ke.forEach(h),Ae=M(w),Q=p(w,"DIV",{class:!0});var Me=E(Q);de=p(Me,"DIV",{"data-svelte-h":!0}),B(de)!=="svelte-szqbut"&&(de.textContent=Ze),Le=M(Me),j=p(Me,"INPUT",{name:!0,type:!0,class:!0}),Ue=M(Me),ue=p(Me,"SMALL",{class:!0,"data-svelte-h":!0}),B(ue)!=="svelte-1drtb8l"&&(ue.textContent=je),Me.forEach(h),N=M(w),Y=p(w,"DIV",{class:!0});var _e=E(Y);ne=p(_e,"SMALL",{class:!0});var gt=E(ne);Ee=ae(gt,De),gt.forEach(h),lt=M(_e),we=p(_e,"SPAN",{});var bt=E(we);he(Te.$$.fragment,bt),bt.forEach(h),at=M(_e),ce&&ce.l(_e),st=M(_e),re=p(_e,"BUTTON",{class:!0});var Ge=E(re);Be.l(Ge),rt=M(Ge),G&&G.l(Ge),Ge.forEach(h),_e.forEach(h),w.forEach(h),this.h()},h(){m(r,"name",u=n[1]+"-title"),m(r,"type","text"),m(r,"class","form-control"),m(r,"placeholder","Event title"),r.disabled=n[6],r.required=!0,X(r,"is-invalid",n[5]),m(i,"class","fw-lighter fst-italic"),m(t,"class","d-flex flex-column gap-2"),m(v,"name",b=n[1]+"-start-time"),m(v,"type","date"),m(v,"class","form-control"),m(v,"placeholder","Event title"),v.disabled=n[6],v.required=!0,X(v,"is-invalid",n[3]),m(c,"class","d-flex flex-column gap-2"),m(y,"class","form-check-input"),m(y,"type","checkbox"),m(y,"id",H=n[1]+"-all-day-check"),m(I,"class","form-check-label"),m(I,"for",te=n[1]+"-all-day-check"),m(C,"class","form-check d-flex align-items-center gap-2"),m(z,"name",Ce=n[1]+"-description"),m(z,"class","form-control"),z.disabled=n[6],X(z,"is-invalid",n[4]),m(oe,"class","fw-lighter fst-italic"),m(q,"class","d-flex flex-column gap-2"),m(j,"name",ye=n[1]+"-location"),m(j,"type","text"),m(j,"class","form-control"),j.disabled=n[6],m(ue,"class","fw-lighter fst-italic"),m(Q,"class","d-flex flex-column gap-2"),m(ne,"class",me="fw-lighter fst-italic text-"+n[13].type),X(we,"d-none",!n[6]),m(re,"class","btn btn-primary position-relative"),m(Y,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),m(e,"class","d-flex flex-column gap-4")},m(D,w){L(D,e,w),d(e,t),d(t,l),d(t,s),d(t,r),n[22](r),x(r,n[0].title),d(t,o),d(t,i),d(e,g),d(e,c),d(c,T),d(c,$),d(c,v),n[25](v),x(v,n[14]),d(e,O),d(e,F),d(F,C),d(C,y),y.checked=n[0].is_all_day,d(C,S),d(C,I),d(I,A),d(e,se),W&&W.m(e,null),d(e,ie),d(e,q),d(q,Z),d(q,fe),d(q,z),n[35](z),x(z,n[0].description),d(q,He),d(q,oe),d(e,Ae),d(e,Q),d(Q,de),d(Q,Le),d(Q,j),n[38](j),x(j,n[0].location),d(Q,Ue),d(Q,ue),d(e,N),d(e,Y),d(Y,ne),d(ne,Ee),d(Y,lt),d(Y,we),ve(Te,we,null),d(Y,at),ce&&ce.m(Y,null),d(Y,st),d(Y,re),Be.m(re,null),d(re,rt),G&&G.m(re,null),V=!0,it||(pt=[K(r,"focus",n[23]),K(r,"input",n[24]),K(v,"focus",n[26]),K(v,"input",n[27]),K(y,"change",n[28]),K(z,"focus",n[36]),K(z,"input",n[37]),K(j,"focus",n[39]),K(j,"input",n[40]),K(re,"click",n[20])],it=!0)},p(D,w){(!V||w[0]&2&&u!==(u=D[1]+"-title"))&&m(r,"name",u),(!V||w[0]&64)&&(r.disabled=D[6]),w[0]&1&&r.value!==D[0].title&&x(r,D[0].title),(!V||w[0]&32)&&X(r,"is-invalid",D[5]),(!V||w[0]&2&&b!==(b=D[1]+"-start-time"))&&m(v,"name",b),(!V||w[0]&64)&&(v.disabled=D[6]),w[0]&16384&&x(v,D[14]),(!V||w[0]&8)&&X(v,"is-invalid",D[3]),(!V||w[0]&2&&H!==(H=D[1]+"-all-day-check"))&&m(y,"id",H),w[0]&1&&(y.checked=D[0].is_all_day),(!V||w[0]&2&&te!==(te=D[1]+"-all-day-check"))&&m(I,"for",te),D[0].is_all_day?W&&(W.d(1),W=null):W?W.p(D,w):(W=Ht(D),W.c(),W.m(e,ie)),(!V||w[0]&2&&Ce!==(Ce=D[1]+"-description"))&&m(z,"name",Ce),(!V||w[0]&64)&&(z.disabled=D[6]),w[0]&1&&x(z,D[0].description),(!V||w[0]&16)&&X(z,"is-invalid",D[4]),(!V||w[0]&2&&ye!==(ye=D[1]+"-location"))&&m(j,"name",ye),(!V||w[0]&64)&&(j.disabled=D[6]),w[0]&1&&j.value!==D[0].location&&x(j,D[0].location),(!V||w[0]&8192)&&De!==(De=D[13].message+"")&&Ie(Ee,De),(!V||w[0]&8192&&me!==(me="fw-lighter fst-italic text-"+D[13].type))&&m(ne,"class",me),(!V||w[0]&64)&&X(we,"d-none",!D[6]),D[18]&&ce.p(D,w),D[17]?G||(G=At(),G.c(),G.m(re,null)):G&&(G.d(1),G=null)},i(D){V||(P(Te.$$.fragment,D),V=!0)},o(D){R(Te.$$.fragment,D),V=!1},d(D){D&&h(e),n[22](null),n[25](null),W&&W.d(),n[35](null),n[38](null),ge(Te),ce&&ce.d(),Be.d(),G&&G.d(),it=!1,Pt(pt)}}}function $n(n,e,t){let l,a,s,r,u,o,{name:i=""}=e,{event:f=Tt}=e;const{actions:{reload:g}}=Qt();let c=!1,T=f.id,U,$,v,b,O,F,C={message:"",type:"info"},y={title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1},H=Ye(Fe($e(f.start_time),Oe),"yyyy-MM-dd"),S=Ye(Fe($e(f.start_time),Oe),"HH:mm"),I=Ye(Fe($e(f.end_time),Oe),"HH:mm");const A=(N,Y=0,ne="info")=>{t(13,C.message=N,C),t(13,C.type=ne,C),Y&&setTimeout(()=>{t(13,C.message="",C)},Y)},te=async()=>{if(!T){A("ID is not defined",0,"danger");return}try{await Sn(T),await g(),Ke("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{t(6,c=!1),t(21,y={...f,id:T}),A("Event Deleted",3e3,"success"),t(0,f=Tt)},800)}catch(N){Ke("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{t(6,c=!1),console.error("Save failed:",N),A("Failed to save event. Please try again.",7e3,"danger")},800)}},se=()=>{t(6,c=!0),ln({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:N=>{N?te():t(6,c=!1)}})},ie=async()=>{if(!l){A("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!o){let Y=[];a&&Y.push("Title is invalid"),s&&Y.push("Description is invalid"),r&&Y.push("Start time is invalid"),u&&Y.push("End time is invalid"),A(Y.join(". ")+".  Please address accordingly.",0,"danger");return}if(c)return;A("Saving ..."),t(6,c=!0);const N=(Y,ne)=>{const[De,Ee]=ne.split(":").map(Number);let me=an(Y,De);return me=sn(me,Ee),me};try{const Y={title:f.title,description:f.description,start_time:N(mt(H,"yyyy-MM-dd",new Date),S).toISOString(),end_time:N(mt(H,"yyyy-MM-dd",new Date),I).toISOString(),location:f.location,is_all_day:f.is_all_day};T?await Mn(T,Y):await kn(Y),await g(),Ke("set_calendar_event_success","interaction",`Set Calendar Event Successful ${f.title}`,1),setTimeout(()=>{t(6,c=!1),t(21,y={...f,id:T}),A("Saved",3e3,"success")},800)}catch(Y){Ke("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${f.title}`,1),setTimeout(()=>{t(6,c=!1),console.error("Save failed:",Y),A("Failed to save event. Please try again.",7e3,"danger")},800)}};function q(N){Se[N?"unshift":"push"](()=>{U=N,t(7,U)})}const Z=()=>U.select();function be(){f.title=this.value,t(0,f)}function fe(N){Se[N?"unshift":"push"](()=>{v=N,t(9,v)})}const z=()=>v.select();function Ce(){H=this.value,t(14,H)}function He(){f.is_all_day=this.checked,t(0,f)}function oe(N){Se[N?"unshift":"push"](()=>{b=N,t(10,b)})}const Re=()=>b.select();function Ae(){S=this.value,t(15,S)}function Q(N){Se[N?"unshift":"push"](()=>{O=N,t(11,O)})}const de=()=>O.select();function Ze(){I=this.value,t(16,I)}function Le(N){Se[N?"unshift":"push"](()=>{$=N,t(8,$)})}const j=()=>$.select();function ye(){f.description=this.value,t(0,f)}function Ue(N){Se[N?"unshift":"push"](()=>{F=N,t(12,F)})}const ue=()=>F.select();function je(){f.location=this.value,t(0,f)}return n.$$set=N=>{"name"in N&&t(1,i=N.name),"event"in N&&t(0,f=N.event)},n.$$.update=()=>{n.$$.dirty[0]&2097153&&t(17,l=y.title!==f.title||y.start_time!==f.start_time||y.end_time!==f.end_time||y.location!==f.location||y.is_all_day!==f.is_all_day),n.$$.dirty[0]&1&&t(5,a=f.title===""),n.$$.dirty[0]&1&&t(3,r=f.start_time===""),n.$$.dirty[0]&1&&t(2,u=f.end_time===""),n.$$.dirty[0]&60&&(o=!a&&!s&&!r&&!u)},t(4,s=!1),[f,i,u,r,s,a,c,U,$,v,b,O,F,C,H,S,I,l,T,se,ie,y,q,Z,be,fe,z,Ce,He,oe,Re,Ae,Q,de,Ze,Le,j,ye,Ue,ue,je]}class Xt extends xe{constructor(e){super(),et(this,e,$n,Un,Xe,{name:1,event:0},null,[-1,-1])}}function Lt(n,e,t){const l=n.slice();return l[9]=e[t],l[11]=t,l}function On(n){let e,t;return e=new qt({}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},p:ee,i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Fn(n){let e,t,l,a;const s=[Pn,Vn],r=[];function u(o,i){return o[2]?.length?0:1}return e=u(n),t=r[e]=s[e](n),{c(){t.c(),l=Qe()},l(o){t.l(o),l=Qe()},m(o,i){r[e].m(o,i),L(o,l,i),a=!0},p(o,i){let f=e;e=u(o),e===f?r[e].p(o,i):(Pe(),R(r[f],1,1,()=>{r[f]=null}),ze(),t=r[e],t?t.p(o,i):(t=r[e]=s[e](o),t.c()),P(t,1),t.m(l.parentNode,l))},i(o){a||(P(t),a=!0)},o(o){R(t),a=!1},d(o){o&&h(l),r[e].d(o)}}}function Vn(n){let e,t="There are no events logged";return{c(){e=_("div"),e.textContent=t,this.h()},l(l){e=p(l,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-10lllm0"&&(e.textContent=t),this.h()},h(){m(e,"class","card-body")},m(l,a){L(l,e,a)},p:ee,i:ee,o:ee,d(l){l&&h(e)}}}function Pn(n){let e,t,l,a,s;t=new Wt({props:{drawerTitle:"New Calendar Event",id:"calendar-event-form-new",$$slots:{label:[Rn],default:[zn]},$$scope:{ctx:n}}});let r=dt(n[2]),u=[];for(let i=0;i<r.length;i+=1)u[i]=Vt(Lt(n,r,i));const o=i=>R(u[i],1,1,()=>{u[i]=null});return{c(){e=_("div"),pe(t.$$.fragment),l=k(),a=_("ul");for(let i=0;i<u.length;i+=1)u[i].c();this.h()},l(i){e=p(i,"DIV",{class:!0});var f=E(e);he(t.$$.fragment,f),f.forEach(h),l=M(i),a=p(i,"UL",{class:!0});var g=E(a);for(let c=0;c<u.length;c+=1)u[c].l(g);g.forEach(h),this.h()},h(){m(e,"class","card-body"),m(a,"class","list-group list-group-flush")},m(i,f){L(i,e,f),ve(t,e,null),L(i,l,f),L(i,a,f);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(a,null);s=!0},p(i,f){const g={};if(f&4096&&(g.$$scope={dirty:f,ctx:i}),t.$set(g),f&101){r=dt(i[2]);let c;for(c=0;c<r.length;c+=1){const T=Lt(i,r,c);u[c]?(u[c].p(T,f),P(u[c],1)):(u[c]=Vt(T),u[c].c(),P(u[c],1),u[c].m(a,null))}for(Pe(),c=r.length;c<u.length;c+=1)o(c);ze()}},i(i){if(!s){P(t.$$.fragment,i);for(let f=0;f<r.length;f+=1)P(u[f]);s=!0}},o(i){R(t.$$.fragment,i),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)R(u[f]);s=!1},d(i){i&&(h(e),h(l),h(a)),ge(t),Rt(u,i)}}}function zn(n){let e,t;return e=new Xt({props:{name:"item-new"}}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},p:ee,i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Rn(n){let e,t=`<i class="bi bi-plus"></i>
						Add New Calendar Event`;return{c(){e=_("span"),e.innerHTML=t,this.h()},l(l){e=p(l,"SPAN",{slot:!0,"data-svelte-h":!0}),B(e)!=="svelte-14hv56a"&&(e.innerHTML=t),this.h()},h(){m(e,"slot","label")},m(l,a){L(l,e,a)},p:ee,d(l){l&&h(e)}}}function Ut(n){let e,t=n[6](n[9].start_time)+"",l,a,s=n[6](n[9].end_time)+"",r;return{c(){e=_("span"),l=le(t),a=le(" to "),r=le(s),this.h()},l(u){e=p(u,"SPAN",{class:!0});var o=E(e);l=ae(o,t),a=ae(o," to "),r=ae(o,s),o.forEach(h),this.h()},h(){m(e,"class","d-block")},m(u,o){L(u,e,o),d(e,l),d(e,a),d(e,r)},p(u,o){o&4&&t!==(t=u[6](u[9].start_time)+"")&&Ie(l,t),o&4&&s!==(s=u[6](u[9].end_time)+"")&&Ie(r,s)},d(u){u&&h(e)}}}function $t(n){let e,t=n[9].description+"",l;return{c(){e=_("span"),l=le(t),this.h()},l(a){e=p(a,"SPAN",{class:!0});var s=E(e);l=ae(s,t),s.forEach(h),this.h()},h(){m(e,"class","d-block small")},m(a,s){L(a,e,s),d(e,l)},p(a,s){s&4&&t!==(t=a[9].description+"")&&Ie(l,t)},d(a){a&&h(e)}}}function Ot(n){let e,t=n[9].location+"",l;return{c(){e=_("em"),l=le(t),this.h()},l(a){e=p(a,"EM",{class:!0});var s=E(e);l=ae(s,t),s.forEach(h),this.h()},h(){m(e,"class","d-block small fw-lighter")},m(a,s){L(a,e,s),d(e,l)},p(a,s){s&4&&t!==(t=a[9].location+"")&&Ie(l,t)},d(a){a&&h(e)}}}function Ft(n){let e,t;return e=new Wt({props:{drawerTitle:"Edit Calendar Event",id:"calendar-event-form"+n[11],$$slots:{label:[jn],default:[Zn]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},p(l,a){const s={};a&4100&&(s.$$scope={dirty:a,ctx:l}),e.$set(s)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function Zn(n){let e,t;return e=new Xt({props:{event:n[9],name:"item"+n[11]}}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},p(l,a){const s={};a&4&&(s.event=l[9]),e.$set(s)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function jn(n){let e;return{c(){e=_("i"),this.h()},l(t){e=p(t,"I",{slot:!0,class:!0}),E(e).forEach(h),this.h()},h(){m(e,"slot","label"),m(e,"class","bi bi-pencil")},m(t,l){L(t,e,l)},p:ee,d(t){t&&h(e)}}}function Vt(n){let e,t,l,a,s,r=n[5](n[9].start_time)+"",u,o,i,f,g=n[9].title+"",c,T,U,$,v,b,O,F,C=!n[9].is_all_day&&Ut(n),y=n[9].description&&$t(n),H=n[9].location&&Ot(n),S=n[0]&&Ft(n);return{c(){e=_("li"),t=_("div"),l=_("div"),a=_("div"),s=_("strong"),u=le(r),o=k(),i=_("div"),f=_("strong"),c=le(g),T=k(),C&&C.c(),U=k(),y&&y.c(),$=k(),H&&H.c(),v=k(),b=_("div"),S&&S.c(),O=k(),this.h()},l(I){e=p(I,"LI",{class:!0});var A=E(e);t=p(A,"DIV",{class:!0});var te=E(t);l=p(te,"DIV",{class:!0});var se=E(l);a=p(se,"DIV",{style:!0});var ie=E(a);s=p(ie,"STRONG",{});var q=E(s);u=ae(q,r),q.forEach(h),ie.forEach(h),o=M(se),i=p(se,"DIV",{});var Z=E(i);f=p(Z,"STRONG",{});var be=E(f);c=ae(be,g),be.forEach(h),T=M(Z),C&&C.l(Z),U=M(Z),y&&y.l(Z),$=M(Z),H&&H.l(Z),Z.forEach(h),se.forEach(h),v=M(te),b=p(te,"DIV",{});var fe=E(b);S&&S.l(fe),fe.forEach(h),te.forEach(h),O=M(A),A.forEach(h),this.h()},h(){en(a,"width","85px"),m(l,"class","d-flex flex-sm-column flex-md-row flex-xl-row flex-lg-row gap-3"),m(t,"class","d-flex justify-content-between"),m(e,"class","list-group-item")},m(I,A){L(I,e,A),d(e,t),d(t,l),d(l,a),d(a,s),d(s,u),d(l,o),d(l,i),d(i,f),d(f,c),d(i,T),C&&C.m(i,null),d(i,U),y&&y.m(i,null),d(i,$),H&&H.m(i,null),d(t,v),d(t,b),S&&S.m(b,null),d(e,O),F=!0},p(I,A){(!F||A&4)&&r!==(r=I[5](I[9].start_time)+"")&&Ie(u,r),(!F||A&4)&&g!==(g=I[9].title+"")&&Ie(c,g),I[9].is_all_day?C&&(C.d(1),C=null):C?C.p(I,A):(C=Ut(I),C.c(),C.m(i,U)),I[9].description?y?y.p(I,A):(y=$t(I),y.c(),y.m(i,$)):y&&(y.d(1),y=null),I[9].location?H?H.p(I,A):(H=Ot(I),H.c(),H.m(i,null)):H&&(H.d(1),H=null),I[0]?S?(S.p(I,A),A&1&&P(S,1)):(S=Ft(I),S.c(),P(S,1),S.m(b,null)):S&&(Pe(),R(S,1,1,()=>{S=null}),ze())},i(I){F||(P(S),F=!0)},o(I){R(S),F=!1},d(I){I&&h(e),C&&C.d(),y&&y.d(),H&&H.d(),S&&S.d()}}}function Bn(n){let e,t,l="Calendar Events",a,s,r,u;const o=[Fn,On],i=[];function f(g,c){return g[1]?0:1}return s=f(n),r=i[s]=o[s](n),{c(){e=_("div"),t=_("div"),t.textContent=l,a=k(),r.c(),this.h()},l(g){e=p(g,"DIV",{class:!0});var c=E(e);t=p(c,"DIV",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1on85xs"&&(t.textContent=l),a=M(c),r.l(c),c.forEach(h),this.h()},h(){m(t,"class","card-header"),m(e,"class","card")},m(g,c){L(g,e,c),d(e,t),d(e,a),i[s].m(e,null),u=!0},p(g,[c]){let T=s;s=f(g),s===T?i[s].p(g,c):(Pe(),R(i[T],1,1,()=>{i[T]=null}),ze(),r=i[s],r?r.p(g,c):(r=i[s]=o[s](g),r.c()),P(r,1),r.m(e,null))},i(g){u||(P(r),u=!0)},o(g){R(r),u=!1},d(g){g&&h(e),i[s].d()}}}function Wn(n,e,t){let l,a;const{actions:{featureIsEnabled:s}}=Zt(),{stores:{ready:r,dbData:u},actions:{reload:o}}=Qt();Dt(n,r,c=>t(1,l=c)),Dt(n,u,c=>t(2,a=c));let i=!1;return zt(async()=>{t(0,i=s(jt.EditCalendarEvent)),await o()}),[i,l,a,r,u,c=>{const T=$e(c),U=Fe(T,Oe);return Ye(U,"MMM, dd")},c=>{const T=$e(c),U=Fe(T,Oe);return Ye(U,"h:mm aa")}]}class qn extends xe{constructor(e){super(),et(this,e,Wn,Bn,Xe,{})}}const Gn=[{when:"Every Tuesday",title:"Mount Timpanogos Temple",details:"Stake Temple Night every Tuesday at 7:30 PM.<br />President Nelson, “I urge you to find a way to make an appointment regularly with the Lord - to be in His holy house - then keep that appointment with exactness and joy!”"}].map(n=>({...n,when:n?.date?Ye(mt(`${n?.date?.year}-${n?.date?.month}-${n?.date?.day}`,"yyyy-M-d",new Date),"eeee, MMM d"):n.when}));function Kn(n,e,t){const l=n.slice();return l[0]=e[t],l}function Jn(n){let e,t,l,a=n[0].when+"",s,r,u,o=n[0].title+"",i,f,g,c,T,U=n[0].details+"",$;return{c(){e=_("li"),t=_("strong"),l=_("small"),s=le(a),r=_("br"),u=k(),i=le(o),f=_("br"),g=k(),c=_("em"),T=new tn(!1),$=k(),this.h()},l(v){e=p(v,"LI",{class:!0});var b=E(e);t=p(b,"STRONG",{});var O=E(t);l=p(O,"SMALL",{});var F=E(l);s=ae(F,a),F.forEach(h),O.forEach(h),r=p(b,"BR",{}),u=M(b),i=ae(b,o),f=p(b,"BR",{}),g=M(b),c=p(b,"EM",{class:!0});var C=E(c);T=nn(C,!1),C.forEach(h),$=M(b),b.forEach(h),this.h()},h(){T.a=null,m(c,"class","small fw-lighter"),m(e,"class","list-group-item")},m(v,b){L(v,e,b),d(e,t),d(t,l),d(l,s),d(e,r),d(e,u),d(e,i),d(e,f),d(e,g),d(e,c),T.m(U,c),d(e,$)},p:ee,d(v){v&&h(e)}}}function Qn(n){let e,t,l="Announcements",a,s,r=dt(Gn),u=[];for(let o=0;o<r.length;o+=1)u[o]=Jn(Kn(n,r,o));return{c(){e=_("div"),t=_("div"),t.textContent=l,a=k(),s=_("ul");for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){e=p(o,"DIV",{class:!0});var i=E(e);t=p(i,"DIV",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-rw6gj3"&&(t.textContent=l),a=M(i),s=p(i,"UL",{class:!0});var f=E(s);for(let g=0;g<u.length;g+=1)u[g].l(f);f.forEach(h),i.forEach(h),this.h()},h(){m(t,"class","card-header"),m(s,"class","list-group list-group-flush"),m(e,"class","card")},m(o,i){L(o,e,i),d(e,t),d(e,a),d(e,s);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(s,null)},p:ee,i:ee,o:ee,d(o){o&&h(e),Rt(u,o)}}}class Xn extends xe{constructor(e){super(),et(this,e,null,Qn,Xe,{})}}function xn(n){let e,t;return e=new Xn({}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function el(n){let e,t;return e=new qn({}),{c(){pe(e.$$.fragment)},l(l){he(e.$$.fragment,l)},m(l,a){ve(e,l,a),t=!0},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){R(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function tl(n){let e,t,l,a;const s=[el,xn],r=[];function u(o,i){return o[0]?0:1}return e=u(n),t=r[e]=s[e](n),{c(){t.c(),l=Qe()},l(o){t.l(o),l=Qe()},m(o,i){r[e].m(o,i),L(o,l,i),a=!0},p(o,[i]){let f=e;e=u(o),e!==f&&(Pe(),R(r[f],1,1,()=>{r[f]=null}),ze(),t=r[e],t||(t=r[e]=s[e](o),t.c()),P(t,1),t.m(l.parentNode,l))},i(o){a||(P(t),a=!0)},o(o){R(t),a=!1},d(o){o&&h(l),r[e].d(o)}}}function nl(n,e,t){const{actions:{featureIsEnabled:l}}=Zt();let a=!1;return zt(async()=>{t(0,a=l(jt.ViewDBCalendarEvents))}),[a]}class ml extends xe{constructor(e){super(),et(this,e,nl,tl,Xe,{})}}export{Gn as A,ml as C};
