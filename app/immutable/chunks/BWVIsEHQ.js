import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{w as Ze,g as Bt,d as De,o as Et,a as Ot}from"./WW5OsAH7.js";import{c as n,r as t,s,B as L,p as Ee,ah as ee,D as O,m as e,E as R,ai as We,u as v,C as Pt,as as je,R as Be,a as ke,f as he,n as y,aq as ut,ar as _t}from"./SWWSvUpQ.js";import{p as Y,i as I,s as k,a as we,e as Oe,b as pt,k as ht}from"./CU3XCoqN.js";import{f as C,a as g,t as Ve,c as mt}from"./D8ekX_8E.js";import{e as Ae,i as ze}from"./YJAcq9su.js";import{r as kt,s as _e,b as Nt,e as xt}from"./CZEGeSDP.js";import{b as Gt}from"./Cc3l00Qu.js";import{i as Ce}from"./Bgyk9asy.js";import{v as It,D as At}from"./Cp-Frmvs.js";import{f as be,a as ft,i as ae}from"./BggCUw-N.js";import{b as Ct}from"./CvxMDV_e.js";import{c as Wt,d as qt,a as Tt,V as Ft}from"./Bai7YTd4.js";import{g as Lt}from"./CoI90Y9b.js";import{f as $t}from"./BtiIexZO.js";import{p as ve}from"./DiFeENSS.js";import{S as Rt}from"./CNkVNyi5.js";var Yt=C('<small class="fw-lighter text-muted"> </small>'),Ut=C('<div class="invalid-feedback d-block"> </div>'),Vt=C('<div class="d-flex flex-column gap-1"><label> </label> <!> <input type="number" min="0" max="999"/> <!></div>');function Ye(m,i){let a=Y(i,"count",12,0),_=Y(i,"label",8,"Count"),S=Y(i,"description",8,""),E=Y(i,"error",8,"");var w=Vt(),$=n(w),D=n($,!0);t($);var j=s($,2);{var x=P=>{var c=Yt(),p=n(c,!0);t(c),L(()=>k(p,S())),g(P,c)};I(j,P=>{S()&&P(x)})}var h=s(j,2);kt(h);let l;var N=s(h,2);{var A=P=>{var c=Ut(),p=n(c,!0);t(c),L(()=>k(p,E())),g(P,c)};I(N,P=>{E()&&P(A)})}t(w),L(()=>{_e($,"for",_()),k(D,_()),_e(h,"id",_()),l=be(h,1,"form-control",null,l,{"is-invalid":!!E()})}),Ct(h,a),g(m,w)}const Dt=Ze([]);let vt=!1;async function yt(){if(vt)return Bt(Dt);vt=!0;try{const{data:m,error:i}=await ft.from("temple_challenge_entries").select("*");if(i)throw console.error("[API] Get temple entries failed:",i),new Error(`Failed to load entries: ${i.message}`);const a=m||[];return Dt.set(a),setTimeout(()=>vt=!1,800),a}catch(m){throw vt=!1,console.error("[API] Unexpected error fetching temple entries:",m),m}}async function zt(m){try{const{data:i,error:a}=await ft.from("temple_challenge_entries").insert([m]).select();if(a)throw console.error("[API] Create temple entry failed:",a),a.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):a.code==="42501"?new Error("Permission denied - please check your authentication"):a.code==="23505"?new Error("This entry already exists"):a.message.includes("fetch")||a.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${a.message}`);return await yt(),console.log("[API] Temple entry created successfully"),i?i[0]:void 0}catch(i){throw console.error("[API] Unexpected error creating temple entry:",i),i}}async function Jt(m,i){const{data:a,error:_}=await ft.from("temple_challenge_entries").update(i).eq("id",m).select();if(_)throw _;return await yt(),a?a[0]:void 0}async function Kt(m){const{error:i}=await ft.from("temple_challenge_entries").delete().eq("id",m);if(i)throw i;await yt()}function Qt(m,i,a){return m.filter(_=>_.date>=i&&_.date<=a)}function Ht(m){return m.reduce((i,a)=>i+(a.baptism_ordinances_count??0)+(a.confirmation_ordinances_count??0)+(a.initiatory_ordinances_count??0)+(a.endowment_ordinances_count??0)+(a.sealing_ordinances_count??0),0)}function Xt(m){return m.reduce((i,a)=>i+(a.prepared_names_count??0),0)}let et=null;const Zt=()=>{const m=Ze(!1),i=Ze(!1),a=Ze([]),_=De([a],([c])=>{const p=c.reduce((d,o)=>{const u=new Date(o.date),U=`${u.getFullYear()}-${String(u.getMonth()+1).padStart(2,"0")}`;return(d[U]||=[]).push(o),d},{}),r=Object.entries(p).sort(([d],[o])=>new Date(o).getTime()-new Date(d).getTime()).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),S=De([a],([c])=>{const p=c.reduce((d,o)=>((d[o.date]||=[]).push(o),d),{}),r=Object.entries(p).sort(([d],[o])=>new Date(o).getTime()-new Date(d).getTime()).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),E=De([a],([c])=>{const p=c.reduce((d,o)=>{const U=`${new Date(o.date).getFullYear()}`;return(d[U]||=[]).push(o),d},{}),r=Object.entries(p).sort(([d],[o])=>parseInt(o)-parseInt(d)).map(([d,o])=>[d,o.sort((u,U)=>new Date(U.created_at??"").getTime()-new Date(u.created_at??"").getTime())]);return Object.fromEntries(r)}),w=De(a,c=>c.reduce((p,r)=>({baptism_ordinances_count:p.baptism_ordinances_count+(r.baptism_ordinances_count??0),confirmation_ordinances_count:p.confirmation_ordinances_count+(r.confirmation_ordinances_count??0),initiatory_ordinances_count:p.initiatory_ordinances_count+(r.initiatory_ordinances_count??0),endowment_ordinances_count:p.endowment_ordinances_count+(r.endowment_ordinances_count??0),sealing_ordinances_count:p.sealing_ordinances_count+(r.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),$=De(S,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:r,created_at:o.created_at||u.created_at}),{});return p}),D=De(_,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:o.date||u.date,created_at:o.created_at||u.created_at}),{});return p}),j=De(E,c=>{const p={};for(const[r,d]of Object.entries(c))p[r]=d.reduce((o,u)=>({...o,entry_type:o.entry_type,prepared_names_count:(o.prepared_names_count??0)+(u.prepared_names_count??0),baptism_ordinances_count:(o.baptism_ordinances_count??0)+(u.baptism_ordinances_count??0),confirmation_ordinances_count:(o.confirmation_ordinances_count??0)+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:(o.initiatory_ordinances_count??0)+(u.initiatory_ordinances_count??0),endowment_ordinances_count:(o.endowment_ordinances_count??0)+(u.endowment_ordinances_count??0),sealing_ordinances_count:(o.sealing_ordinances_count??0)+(u.sealing_ordinances_count??0),date:o.date||u.date,created_at:o.created_at||u.created_at}),{});return p}),x=De(a,c=>c.reduce((p,r)=>p+(r.baptism_ordinances_count??0)+(r.confirmation_ordinances_count??0)+(r.initiatory_ordinances_count??0)+(r.endowment_ordinances_count??0)+(r.sealing_ordinances_count??0),0)),h=De(a,c=>c.reduce((p,r)=>p+(r.prepared_names_count??0),0));return et={stores:{ready:m,loading:i,data:a,groupedByDate:S,groupedByMonth:_,groupedByYear:E,detailTotals:w,detailTotalsByDay:$,detailTotalsByMonth:D,detailTotalsByYear:j,totalOrdinancesPerformed:x,totalNamesPrepared:h},actions:{reload:async()=>{const c=await yt();c?.length&&a.set(c)},apiCreate:async c=>{await zt(c)},apiUpdate:async(c,p)=>{await Jt(c,p)},apiDelete:async c=>{await Kt(c)}}},et},gt=()=>et?.stores&&Object.keys(et.stores).length>0?et:Zt(),Ue=m=>qt().required(`${m} is required`).integer(`${m} must be a whole number`).min(0,`${m} cannot be negative`).max(999,`${m} cannot exceed 999`),ea=Wt().shape({date:Tt().required("Date is required"),entry_type:Tt().required("Activity type is required"),prepared_names_count:Ue("Name preparation count"),baptism_ordinances_count:Ue("Baptism count"),confirmation_ordinances_count:Ue("Confirmation count"),initiatory_ordinances_count:Ue("Initiatory count"),endowment_ordinances_count:Ue("Endowment count"),sealing_ordinances_count:Ue("Sealing count")});function ta(){const m=Ze({});async function i(_){try{return await ea.validate(_,{abortEarly:!1}),m.set({}),!0}catch(S){if(S instanceof Ft){const E={};return S.inner.forEach(w=>{w.path&&(E[w.path]=w.message)}),m.set(E),!1}return!1}}function a(){m.set({})}return{validationErrors:m,validate:i,clearErrors:a}}var aa=C('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),na=C('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),ra=C('<div class="invalid-feedback d-block"> </div>'),sa=C("<option> </option>"),oa=C('<div class="invalid-feedback d-block"> </div>'),ia=C('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" required/> <!></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select></select> <!></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function la(m,i){Ee(i,!1);const a=()=>we(l,"$validationErrors",_),[_,S]=pt(),E=R();let w=Y(i,"drawerId",8,""),$=Y(i,"minDate",8,null),D=Y(i,"maxDate",8,null);const{stores:{loading:j},actions:{apiCreate:x,reload:h}}=gt(),{validationErrors:l,validate:N,clearErrors:A}=ta(),P=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function c(){const f=ae(new Date,"yyyy-MM-dd");return!$()||!D()||f>=$()&&f<=D()?f:f<$()?$():D()}const p={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:c(),approved:!0};let r=R({...p}),d=R({message:"",type:null});const o=()=>{O(r,{...p,date:c()}),O(d,{message:"",type:null}),A();const f=`[data-bs-target="#${w()}"]`,b=document.querySelector(f);b&&b.click()},u=()=>{window.location.reload()},U=()=>{de()},ne=()=>{O(d,{message:"",type:null})},de=async()=>{if(await N(e(r)))try{ht(j,!0),O(d,{message:"",type:null}),await x({prepared_names_count:e(r).prepared_names_count,baptism_ordinances_count:e(r).baptism_ordinances_count,confirmation_ordinances_count:e(r).confirmation_ordinances_count,initiatory_ordinances_count:e(r).initiatory_ordinances_count,endowment_ordinances_count:e(r).endowment_ordinances_count,sealing_ordinances_count:e(r).sealing_ordinances_count,entry_type:e(r).entry_type,date:e(r).date,created_at:new Date().toISOString(),approved:!0}),await h(),o()}catch(b){console.error("[WardGoalEntryForm] Submission failed:",b),b instanceof Error?b.message.includes("expired")||b.message.includes("JWT")?O(d,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):b.message.includes("fetch")||b.message.includes("network")?O(d,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):O(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):O(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{ht(j,!1)}};ee(()=>e(r),()=>{O(E,(e(r).prepared_names_count||0)+(e(r).baptism_ordinances_count||0)+(e(r).confirmation_ordinances_count||0)+(e(r).initiatory_ordinances_count||0)+(e(r).endowment_ordinances_count||0)+(e(r).sealing_ordinances_count||0))}),We(),Ce();var me=ia(),pe=n(me);{var M=f=>{var b=na(),te=n(b),Ne=s(n(te),2),ye=n(Ne),rt=n(ye);{var st=ue=>{var Te=Ve("⚠️ Session Issue");g(ue,Te)},Fe=ue=>{var Te=mt(),Ke=he(Te);{var Qe=ge=>{var T=Ve("⚠️ Connection Problem");g(ge,T)},ct=ge=>{var T=Ve("⚠️ Something Went Wrong");g(ge,T)};I(Ke,ge=>{e(d),v(()=>e(d).type==="network")?ge(Qe):ge(ct,!1)},!0)}g(ue,Te)};I(rt,ue=>{e(d),v(()=>e(d).type==="expired")?ue(st):ue(Fe,!1)})}t(ye);var Le=s(ye,2),ot=n(Le,!0);t(Le);var it=s(Le,2),Re=n(it);{var lt=ue=>{var Te=aa();Oe("click",Te,U),g(ue,Te)};I(Re,ue=>{e(d),v(()=>e(d).type==="network")&&ue(lt)})}var dt=s(Re,2);t(it),t(Ne);var wt=s(Ne,2);t(te),t(b),L(()=>{k(ot,(e(d),v(()=>e(d).message))),be(dt,1,`btn btn-${e(d),v(()=>e(d).type==="network"?"secondary":"primary")??""}`)}),Oe("click",dt,u),Oe("click",wt,ne),g(f,b)};I(pe,f=>{e(d),v(()=>e(d).type)&&f(M)})}var B=s(pe,4),W=s(n(B),2),K=n(W);{var H=f=>{var b=Ve();L(()=>k(b,`Select a date within the goal period (${$()??""} to ${D()??""})`)),g(f,b)},J=f=>{var b=Ve("When was this activity done?");g(f,b)};I(K,f=>{$()&&D()?f(H):f(J,!1)})}t(W);var V=s(W,2);kt(V);let z;var re=s(V,2);{var se=f=>{var b=ra(),te=n(b,!0);t(b),L(()=>k(te,(a(),v(()=>a().date)))),g(f,b)};I(re,f=>{a(),v(()=>a().date)&&f(se)})}t(B);var fe=s(B,2),G=s(n(fe),4);L(()=>{e(r),Pt(()=>{a()})});let q;Ae(G,5,()=>P,ze,(f,b)=>{var te=sa(),Ne=n(te,!0);t(te);var ye={};L(()=>{k(Ne,e(b)),ye!==(ye=e(b))&&(te.value=(te.__value=e(b))??"")}),g(f,te)}),t(G);var Z=s(G,2);{var X=f=>{var b=oa(),te=n(b,!0);t(b),L(()=>k(te,(a(),v(()=>a().entry_type)))),g(f,b)};I(Z,f=>{a(),v(()=>a().entry_type)&&f(X)})}t(fe);var Q=s(fe,2);{let f=Be(()=>(a(),v(()=>a().prepared_names_count||"")));Ye(Q,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get error(){return e(f)},get count(){return e(r).prepared_names_count},set count(b){je(r,e(r).prepared_names_count=b)},$$legacy:!0})}var oe=s(Q,2);{let f=Be(()=>(a(),v(()=>a().baptism_ordinances_count||"")));Ye(oe,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get error(){return e(f)},get count(){return e(r).baptism_ordinances_count},set count(b){je(r,e(r).baptism_ordinances_count=b)},$$legacy:!0})}var ce=s(oe,2);{let f=Be(()=>(a(),v(()=>a().confirmation_ordinances_count||"")));Ye(ce,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get error(){return e(f)},get count(){return e(r).confirmation_ordinances_count},set count(b){je(r,e(r).confirmation_ordinances_count=b)},$$legacy:!0})}var Me=s(ce,2);{let f=Be(()=>(a(),v(()=>a().initiatory_ordinances_count||"")));Ye(Me,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).initiatory_ordinances_count},set count(b){je(r,e(r).initiatory_ordinances_count=b)},$$legacy:!0})}var xe=s(Me,2);{let f=Be(()=>(a(),v(()=>a().endowment_ordinances_count||"")));Ye(xe,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).endowment_ordinances_count},set count(b){je(r,e(r).endowment_ordinances_count=b)},$$legacy:!0})}var Pe=s(xe,2);{let f=Be(()=>(a(),v(()=>a().sealing_ordinances_count||"")));Ye(Pe,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get error(){return e(f)},get count(){return e(r).sealing_ordinances_count},set count(b){je(r,e(r).sealing_ordinances_count=b)},$$legacy:!0})}var Se=s(Pe,2),Je=s(n(Se),2),tt=n(Je,!0);t(Je),t(Se);var at=s(Se,2),qe=n(at),nt=s(qe,2);t(at),t(me),L(()=>{z=be(V,1,"form-control",null,z,{"is-invalid":a().date}),_e(V,"min",$()),_e(V,"max",D()),q=be(G,1,"form-select form-control-sm",null,q,{"is-invalid":a().entry_type}),k(tt,e(E))}),Ct(V,()=>e(r).date,f=>je(r,e(r).date=f)),Nt(G,()=>e(r).entry_type,f=>je(r,e(r).entry_type=f)),Oe("click",qe,o),Oe("click",nt,de),g(m,me),ke(),S()}var da=C('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),ca=C('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),ua=C('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function bt(m,i){Ee(i,!1);let a=Y(i,"entry",8),_=Y(i,"showSubmittedData",8,!1),S=Y(i,"showType",8,!1);Ce();var E=ua(),w=n(E);{var $=B=>{var W=da(),K=n(W),H=n(K,!0);t(K),t(W),L(()=>k(H,(y(a()),v(()=>a()?.entry_type)))),g(B,W)};I(w,B=>{S()&&B($)})}var D=s(w,2),j=s(n(D),2),x=n(j,!0);t(j),t(D);var h=s(D,2),l=s(n(h),2),N=n(l,!0);t(l),t(h);var A=s(h,2),P=s(n(A),2),c=n(P,!0);t(P),t(A);var p=s(A,2),r=s(n(p),2),d=n(r,!0);t(r),t(p);var o=s(p,2),u=s(n(o),2),U=n(u,!0);t(u),t(o);var ne=s(o,2),de=s(n(ne),2),me=n(de,!0);t(de),t(ne);var pe=s(ne,2);{var M=B=>{var W=ca(),K=s(n(W),2),H=n(K),J=n(H,!0);t(H);var V=s(H,2),z=n(V,!0);t(V),t(K),t(W),L((re,se)=>{k(J,re),k(z,se)},[()=>(y($t),y(a()),v(()=>$t(new Date(a().created_at),{addSuffix:!0}))),()=>(y(ae),y(a()),v(()=>ae(new Date(a().created_at),"MMMM d, yyyy 'at' h:mm a")))]),g(B,W)};I(pe,B=>{y(_()),y(a()),v(()=>_()&&a()?.created_at)&&B(M)})}t(E),L(()=>{k(x,(y(a()),v(()=>a()?.prepared_names_count))),k(N,(y(a()),v(()=>a()?.baptism_ordinances_count))),k(c,(y(a()),v(()=>a()?.confirmation_ordinances_count))),k(d,(y(a()),v(()=>a()?.initiatory_ordinances_count))),k(U,(y(a()),v(()=>a()?.endowment_ordinances_count))),k(me,(y(a()),v(()=>a()?.sealing_ordinances_count)))}),g(m,E),ke()}var _a=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function va(m,i){Ee(i,!1);const a=R();let _=Y(i,"entry",8),S=Y(i,"date",8);ee(()=>y(_()),()=>{O(a,_().baptism_ordinances_count+_().confirmation_ordinances_count+_().initiatory_ordinances_count+_().endowment_ordinances_count+_().sealing_ordinances_count)}),We(),Ce();var E=_a(),w=he(E),$=n(w),D=n($,!0);t($);var j=s($,2);t(w);var x=s(w,2),h=n(x),l=n(h),N=n(l);bt(N,{get entry(){return _()}});var A=s(N,2),P=n(A),c=s(n(P),2),p=n(c,!0);t(c),t(P),t(A),t(l),t(h),t(x),L((r,d)=>{k(D,r),k(j,` ${d??""}`),k(p,e(a))},[()=>(y(ae),y(ve),y(S()),v(()=>ae(ve(S(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(y(ae),y(ve),y(S()),v(()=>ae(ve(S(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),g(m,E),ke()}var ma=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function pa(m,i){Ee(i,!1);let a=Y(i,"entry",8),_=Y(i,"date",8),S=R(0);ee(()=>y(a()),()=>{O(S,a().baptism_ordinances_count+a().confirmation_ordinances_count+a().initiatory_ordinances_count+a().endowment_ordinances_count+a().sealing_ordinances_count)}),We(),Ce();var E=ma(),w=he(E),$=n(w),D=n($,!0);t($);var j=s($,2);t(w);var x=s(w,2),h=n(x),l=n(h),N=n(l);bt(N,{get entry(){return a()}});var A=s(N,2),P=n(A),c=s(n(P),2),p=n(c,!0);t(c),t(P),t(A),t(l),t(h),t(x),L((r,d)=>{k(D,r),k(j,` ${d??""}`),k(p,e(S))},[()=>(y(ae),y(ve),y(_()),v(()=>ae(ve(_(),"yyyy-MM",new Date),"yyyy"))),()=>(y(ae),y(ve),y(_()),v(()=>ae(ve(_(),"yyyy-MM",new Date),"MMMM")))]),g(m,E),ke()}var fa=C('<div> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function ya(m,i){Ee(i,!1);let a=Y(i,"entry",8),_=Y(i,"date",8),S=R(0);ee(()=>y(a()),()=>{O(S,a().baptism_ordinances_count+a().confirmation_ordinances_count+a().initiatory_ordinances_count+a().endowment_ordinances_count+a().sealing_ordinances_count)}),We(),Ce();var E=fa(),w=he(E),$=n(w,!0);t(w);var D=s(w,2),j=n(D),x=n(j),h=n(x);bt(h,{get entry(){return a()}});var l=s(h,2),N=n(l),A=s(n(N),2),P=n(A,!0);t(A),t(N),t(l),t(x),t(j),t(D),L(()=>{k($,_()),k(P,e(S))}),g(m,E),ke()}var ga=C('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),ba=C('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function wa(m,i){Ee(i,!1);let a=Y(i,"entries",8),_=Y(i,"date",8);Ce();var S=ba(),E=he(S),w=n(E),$=n(w,!0);t(w);var D=s(w,2);t(E);var j=s(E,2);Ae(j,5,a,ze,(x,h)=>{var l=ga(),N=n(l),A=n(N);bt(A,{get entry(){return e(h)},showSubmittedData:!0,showType:!0}),t(N),t(l),g(x,l)}),t(j),L((x,h)=>{k($,x),k(D,` ${h??""}`)},[()=>(y(ae),y(ve),y(_()),v(()=>ae(ve(_(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(y(ae),y(ve),y(_()),v(()=>ae(ve(_(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),g(m,S),ke()}var ha=C('<div class="d-flex flex-column gap-3"><!></div>'),xa=C('<div class="d-flex flex-column gap-3"></div>'),Ta=C('<div class="d-flex flex-column gap-3"></div>'),$a=C('<div class="d-flex flex-column gap-3"></div>'),Da=C('<div class="d-flex flex-column gap-3"><!> <!> <!> <!> <!></div>');function Ea(m,i){Ee(i,!1);const a=()=>we(x,"$groupedByDate",w),_=()=>we(h,"$detailTotalsByDay",w),S=()=>we(l,"$detailTotalsByMonth",w),E=()=>we(N,"$detailTotalsByYear",w),[w,$]=pt(),D=R(),{stores:{data:j,groupedByDate:x,detailTotalsByDay:h,detailTotalsByMonth:l,detailTotalsByYear:N},actions:{reload:A}}=gt();let P=Y(i,"query",8,""),c=R([]),p=R([]);const r=j.subscribe(M=>{O(c,M),O(p,[...M])});function d(M){return M?M.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const o=M=>{let B=[...e(c)];return M&&(B=B.filter(W=>W?.entry_type?W?.entry_type?.trim().toLowerCase().match(e(D).trim().toLowerCase()):!1)),B};Et(A),Ot(r);let u=R("by-month");const U=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"},{key:"By Year",value:"by-year"}];ee(()=>y(P()),()=>{O(D,d(P()?.trim().toLowerCase()))}),ee(()=>(y(P()),e(p)),()=>{P()?O(c,o(P())):O(c,[...e(p)])}),We(),Ce();var ne=mt(),de=he(ne);{var me=M=>{var B=Da(),W=n(B);Rt(W,{get options(){return U},helperText:"",label:"Filter",disabled:!1,get value(){return e(u)},set value(G){O(u,G)},$$legacy:!0});var K=s(W,2);{var H=G=>{var q=mt(),Z=he(q);Ae(Z,1,()=>(a(),v(()=>Object.entries(a()))),ze,(X,Q)=>{var oe=ut(()=>_t(e(Q),2));let ce=()=>e(oe)[0],Me=()=>e(oe)[1];var xe=ha(),Pe=n(xe);wa(Pe,{get date(){return ce()},get entries(){return Me()}}),t(xe),g(X,xe)}),g(G,q)};I(K,G=>{e(u)==="by-submission"&&G(H)})}var J=s(K,2);{var V=G=>{var q=xa();Ae(q,5,()=>(_(),v(()=>Object.entries(_()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];va(Z,{get date(){return oe()},get entry(){return ce()}})}),t(q),g(G,q)};I(J,G=>{e(u)==="by-day"&&G(V)})}var z=s(J,2);{var re=G=>{var q=Ta();Ae(q,5,()=>(S(),v(()=>Object.entries(S()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];pa(Z,{get date(){return oe()},get entry(){return ce()}})}),t(q),g(G,q)};I(z,G=>{e(u)==="by-month"&&G(re)})}var se=s(z,2);{var fe=G=>{var q=$a();Ae(q,5,()=>(E(),v(()=>Object.entries(E()))),ze,(Z,X)=>{var Q=ut(()=>_t(e(X),2));let oe=()=>e(Q)[0],ce=()=>e(Q)[1];ya(Z,{get date(){return oe()},get entry(){return ce()}})}),t(q),g(G,q)};I(se,G=>{e(u)==="by-year"&&G(fe)})}t(B),g(M,B)},pe=M=>{var B=Ve("No Data Found");g(M,B)};I(de,M=>{e(c),v(()=>e(c)?.length)?M(me):M(pe,!1)})}g(m,ne),ke(),$()}var ka=C('<span class="d-flex justify-content-end">0</span>'),Ca=C('<span class="d-flex justify-content-end">0</span>'),Ma=C('<span class="d-flex justify-content-end"> </span>'),Sa=C('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),ja=C('<span class="d-flex justify-content-end"> </span>'),Ba=C('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),Oa=C('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function Pa(m,i){Ee(i,!1);const a=()=>we(c,"$entries",S),_=()=>we(p,"$loading",S),[S,E]=pt(),w=R(),$=R(),D=R(),j=R(),x=R(),h=R();let l=Y(i,"goal",8),N=Y(i,"drawerId",8),A=Y(i,"onSubmitClick",8),P=Y(i,"onViewResultsClick",8);const{stores:{data:c,loading:p}}=gt();function r(T,F){const[ie,le,$e]=T.split("-").map(Number),[Ge,Ie,He]=F.split("-").map(Number),Xe=new Date(ie,le-1,$e),Mt=new Date(Ge,Ie-1,He),St=Xe.toLocaleDateString("en-US",{month:"short"}),jt=Mt.toLocaleDateString("en-US",{month:"short"});return`${St} to ${jt}`}function d(T){return T.toLocaleString("en-US")}function o(T){return T!==null?d(T):"--"}ee(()=>(a(),y(l())),()=>{O(w,Qt(a(),l().start_date,l().end_date))}),ee(()=>e(w),()=>{O($,Ht(e(w)))}),ee(()=>e(w),()=>{O(D,Xt(e(w)))}),ee(()=>y(l()),()=>{O(j,r(l().start_date,l().end_date))}),ee(()=>(y(l()),e($)),()=>{O(x,l().temple_ordinances_goal&&l().temple_ordinances_goal>0?Math.round(e($)/l().temple_ordinances_goal*100):null)}),ee(()=>(y(l()),e(D)),()=>{O(h,l().names_prepared_goal&&l().names_prepared_goal>0?Math.round(e(D)/l().names_prepared_goal*100):null)}),We(),Ce();var u=Oa(),U=n(u),ne=n(U),de=s(ne),me=n(de);t(de),t(U);var pe=s(U,2),M=n(pe),B=n(M),W=n(B),K=s(n(W)),H=n(K),J=s(n(H)),V=n(J),z=n(V,!0);t(V),t(J);var re=s(J),se=n(re);{var fe=T=>{var F=ka();g(T,F)};I(se,T=>{_()||T(fe)})}t(re),t(H);var G=s(H),q=s(n(G)),Z=n(q),X=n(Z,!0);t(Z),t(q);var Q=s(q),oe=n(Q);{var ce=T=>{var F=Ca();g(T,F)};I(oe,T=>{_()||T(ce)})}t(Q),t(G);var Me=s(G),xe=n(Me);let Pe;var Se=s(xe);let Je;var tt=n(Se),at=n(tt,!0);t(tt),t(Se);var qe=s(Se);let nt;var f=n(qe);{var b=T=>{var F=Ma(),ie=n(F,!0);t(F),L(le=>k(ie,le),[()=>(e($),v(()=>d(e($))))]),g(T,F)};I(f,T=>{_()||T(b)})}t(qe),t(Me);var te=s(Me);{var Ne=T=>{var F=Sa(),ie=n(F),le=n(ie),$e=n(le),Ge=n($e);t($e);var Ie=s($e,2),He=n(Ie);t(Ie),t(le),t(ie),t(F),L(Xe=>{xt(Ge,`width: ${Xe??""}%`),_e(Ge,"aria-valuenow",e(x)),k(He,`${e(x)??""}%`)},[()=>(e(x),v(()=>Math.min(e(x),100)))]),g(T,F)};I(te,T=>{e(x),y(l()),v(()=>e(x)!==null&&l().temple_ordinances_goal)&&T(Ne)})}var ye=s(te),rt=n(ye);let st;var Fe=s(rt);let Le;var ot=n(Fe),it=n(ot,!0);t(ot),t(Fe);var Re=s(Fe);let lt;var dt=n(Re);{var wt=T=>{var F=ja(),ie=n(F,!0);t(F),L(le=>k(ie,le),[()=>(e(D),v(()=>d(e(D))))]),g(T,F)};I(dt,T=>{_()||T(wt)})}t(Re),t(ye);var ue=s(ye);{var Te=T=>{var F=Ba(),ie=n(F),le=n(ie),$e=n(le),Ge=n($e);t($e);var Ie=s($e,2),He=n(Ie);t(Ie),t(le),t(ie),t(F),L(Xe=>{xt(Ge,`width: ${Xe??""}%`),_e(Ge,"aria-valuenow",e(h)),k(He,`${e(x)??""}%`)},[()=>(e(h),v(()=>Math.min(e(h),100)))]),g(T,F)};I(ue,T=>{e(h),y(l()),v(()=>e(h)!==null&&l().names_prepared_goal)&&T(Te)})}t(K),t(W),t(B);var Ke=s(B,2),Qe=n(Ke);t(Ke);var ct=s(Ke,2),ge=n(ct);t(ct),t(M),t(pe),t(u),L((T,F,ie,le)=>{k(ne,`Ward Mission Goal ${y(l()),v(()=>l().year)??""} `),k(me,`(${e(j)??""})`),k(z,T),k(X,F),Pe=be(xe,1,"",null,Pe,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),Je=be(Se,1,"",null,Je,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),k(at,ie),nt=be(qe,1,"",null,nt,{"border-bottom-0":e(x)!==null&&l().temple_ordinances_goal}),st=be(rt,1,"",null,st,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),Le=be(Fe,1,"",null,Le,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),k(it,le),lt=be(Re,1,"",null,lt,{"border-bottom-0":e(h)!==null&&l().names_prepared_goal}),_e(Qe,"data-bs-target",`#${N()??""}`),_e(Qe,"aria-controls",N()),_e(ge,"data-bs-target",`#${N()??""}`),_e(ge,"aria-controls",N())},[()=>(y(l()),v(()=>o(l().baptisms_goal))),()=>(y(l()),v(()=>o(l().family_sealings_goal))),()=>(y(l()),v(()=>o(l().temple_ordinances_goal))),()=>(y(l()),v(()=>o(l().names_prepared_goal)))]),Oe("click",Qe,function(...T){A()?.apply(this,T)}),Oe("click",ge,function(...T){P()?.apply(this,T)}),g(m,u),ke(),E()}var Na=C("<!> <!>",1),Ga=C('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),Ia=C('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),Aa=C('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),Wa=C('<div class="col-12"><!> <!></div>'),qa=C('<div class="row g-3"></div>'),Fa=C("<!> <!>",1);function on(m,i){Ee(i,!1);const a=()=>we(P,"$activeGoals",E),_=()=>we(p,"$currentGoalPeriod",E),S=()=>we(c,"$goalsLoading",E),[E,w]=pt(),$=R(),D=R();let j=R("form"),x=It(),h=R("end"),l=R(),N=R(!1);const{actions:{reload:A}}=gt(),{stores:{activeGoals:P,loading:c,currentGoalPeriod:p},actions:{reload:r}}=Lt();let d=R(null);function o(){O(j,"form")}function u(){O(j,"results")}Et(async()=>{await Promise.all([r(),A()]);const M=new URLSearchParams(window.location.search);O(d,M.get("log-temple-activity"))}),ee(()=>(e(d),e(l),e(N)),()=>{e(d)&&e(d)==="yes"&&e(l)&&!e(N)&&(e(l).click(),O(N,!0))}),ee(()=>e(j),()=>{O(h,e(j)==="form"?"end":"start")}),ee(()=>e(j),()=>{O($,e(j)==="form"?"Temple Activity":"Temple Activity Results")}),ee(()=>a(),()=>{O(D,(()=>{const M=new Date().toISOString().split("T")[0];return a().filter(B=>B.start_date<=M&&B.end_date>=M)})())}),We(),Ce();var U=Fa(),ne=he(U);At(ne,{get placement(){return e(h)},get title(){return e($)},get id(){return x},children:(M,B)=>{var W=Na(),K=he(W);{var H=z=>{{let re=Be(()=>(_(),v(()=>_()?.start_date))),se=Be(()=>(_(),v(()=>_()?.end_date)));la(z,{get drawerId(){return x},get minDate(){return e(re)},get maxDate(){return e(se)}})}};I(K,z=>{e(j)==="form"&&z(H)})}var J=s(K,2);{var V=z=>{Ea(z,{})};I(J,z=>{e(j)==="results"&&z(V)})}g(M,W)},$$slots:{default:!0}});var de=s(ne,2);{var me=M=>{var B=Ga();g(M,B)},pe=M=>{var B=mt(),W=he(B);{var K=J=>{var V=Ia();g(J,V)},H=J=>{var V=qa();Ae(V,5,()=>e(D),z=>z.id,(z,re)=>{var se=Wa(),fe=n(se);Pa(fe,{get goal(){return e(re)},get drawerId(){return x},onSubmitClick:o,onViewResultsClick:u});var G=s(fe,2);{var q=Z=>{var X=Aa();Gt(X,Q=>O(l,Q),()=>e(l)),L(()=>{_e(X,"data-bs-target",`#${x??""}`),_e(X,"aria-controls",x)}),Oe("click",X,o),g(Z,X)};I(G,Z=>{e(re),e(D),v(()=>e(re)===e(D)[0])&&Z(q)})}t(se),g(z,se)}),t(V),g(J,V)};I(W,J=>{e(D),v(()=>e(D).length===0)?J(K):J(H,!1)},!0)}g(M,B)};I(de,M=>{S()?M(me):M(pe,!1)})}g(m,U),ke(),w()}export{on as W};
