import{O as c,e as Pe,i as tt,h as re,p as se,A as ue}from"./CzgXdWbt.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as at,ah as W,D as I,E as T,n,m as r,ai as rt,c as _,s as f,u as i,r as m,B as S,a as st,f as j,F as nt}from"./CvahB0_t.js";import{p as ne,i as u,e as oe,s as Y}from"./B2iOXiG9.js";import{f as h,a as v,c as ye,t as C}from"./8TW23Vtg.js";import{e as ot}from"./CfLp-eDs.js";import{h as pe,c as ie,b as le,t as ge,d as De}from"./CkXKSJFc.js";import{e as it,s as G}from"./BLBRaRwa.js";import{s as $e}from"./CdEA5IGF.js";import{i as lt}from"./BXUriw6V.js";import{R as ee}from"./D2wEvydp.js";const We={SRS:[c.Stake],SEQ:[c.Stake],SYO:[c.Stake],SYW:[c.Stake],SYM:[c.Stake],SPR:[c.Stake],SSS:[c.Stake],SYA:[c.Stake],RES:[c.ReliefSociety],ELQ:[c.EldersQuorum],YOU:[c.YoungWomen,c.YoungMen],YOW:[c.YoungWomen],YWP:[c.YoungWomen],YWR:[c.YoungWomen],YWD:[c.YoungWomen],YOM:[c.YoungMen],YMD:[c.YoungMen],YMT:[c.YoungMen],YMP:[c.YoungMen],PRI:[c.Primary],PRN:[c.Primary],PRS:[c.Primary],PRC:[c.Primary],PRV:[c.Primary],SUS:[c.SundaySchool],YSA:[c.Stake]},dt=L=>{const A=new Set,E=L.meta_data?.submitted_by_organizations;if(E?.length)return E.forEach(B=>A.add(B)),A;const P=L.meta_data?.organization;return P&&We[P]&&We[P].forEach(B=>A.add(B)),A},Qt=(L,A)=>{if(!L)return!1;const{currentUserId:E,isPrivileged:P,canEditOwnOrgEvents:B,userOrganizations:N}=A;if(P)return!0;const F=L.meta_data?.submitted_by_user_id;if(E&&typeof F=="number"&&F===E)return!0;if(!B)return!1;const Z=dt(L);if(!Z.size)return!1;for(const Q of Z)if(N.has(Q))return!0;return!1};var vt=h('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),mt=h('<span class="d-block text-uppercase small fw-semibold svelte-lx28z">All Day</span>'),ct=h('<span class="d-block small svelte-lx28z"> </span>'),_t=h('<span class="text-muted">•</span>'),ft=h("<span> </span> <!>",1),ut=h('<span class="text-muted">•</span>'),yt=h('<span class="text-muted small svelte-lx28z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),pt=h('<span class="text-muted">•</span>'),gt=h('<span class="text-muted small svelte-lx28z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),ht=h('<span class="text-muted">•</span>'),xt=h('<em class="small fw-lighter svelte-lx28z"><!></em> <!>',1),bt=h('<em class="small fw-lighter text-decoration-underline svelte-lx28z"><!> details</em>'),wt=h('<div class="small svelte-lx28z"><!></div>'),kt=h('<div class="attachment-image-container svelte-lx28z"><button type="button" class="attachment-image-button svelte-lx28z"><img class="attachment-image svelte-lx28z"/></button> <div class="attachment-image-label svelte-lx28z"><small class="text-muted"> </small></div></div>'),zt=h('<button type="button" class="btn btn-sm btn-primary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Rt=h('<div class="mt-1 svelte-lx28z"><div class="fw-semibold small mb-1 svelte-lx28z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),St=h('<div class="small text-muted posted-meta svelte-lx28z">Posted <!> <!></div>'),Yt=h('<div class="small text-muted posted-meta svelte-lx28z">Last edited <!> <!></div>'),At=h('<div class="details-container svelte-lx28z"><!> <!> <!> <!></div>'),Et=h('<div class="event-thumbnail-container svelte-lx28z"><img class="event-thumbnail svelte-lx28z"/></div>'),Mt=h('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-lx28z"><div class="fw-bold svelte-lx28z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function qt(L,A){at(A,!1);const E=T(),P=T(),B=T(),N=T(),F=T(),Z=T(),Q=T(),V=T(),he=T();let e=ne(A,"item",8),te=ne(A,"showDetails",12,!1),de=ne(A,"showDate",8,!0),H=ne(A,"searchQuery",8,"");const xe=t=>{if(!t)return"";const s=se(t),a=ge(s,ue);return re(a,"h:mm aa")},Ie=t=>{if(!t)return"";const s=se(t),a=ge(s,ue);return re(a,"EEE")},Te=t=>{if(!t)return"";const s=se(t),a=ge(s,ue);return re(a,"MMM, dd")},be=()=>{r(P)&&te(!te())},Be=t=>{r(P)&&(t.key==="Enter"||t.key===" ")&&be()},Fe=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(1)+" KB":(t/(1024*1024)).toFixed(1)+" MB",we=t=>t.startsWith("image/"),ke=t=>{window.open(t,"_blank")},ze=t=>{if(!t)return"";try{return re(se(t),"MMM d, yyyy 'at' h:mm a")}catch{return""}},Le=t=>{try{const a=ee.fromString(t).origOptions,l=a.interval||1,y=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["","1st","2nd","3rd","4th","5th"];if(a.freq===ee.DAILY)return l===1?"Repeats daily":`Repeats every ${l} days`;if(a.freq===ee.WEEKLY){if(a.byweekday){const d=(Array.isArray(a.byweekday)?a.byweekday:[a.byweekday]).map(x=>{const M=typeof x=="number"?x:x.weekday,b=M===6?0:M+1;return y[b]});return l===1?d.length===1?`Repeats every ${d[0]}`:`Repeats on ${d.join(", ")}`:`Repeats every ${l} weeks on ${d.join(", ")}`}return l===1?"Repeats weekly":`Repeats every ${l} weeks`}if(a.freq===ee.MONTHLY){if(a.byweekday){const d=(Array.isArray(a.byweekday)?a.byweekday:[a.byweekday])[0];if(d&&typeof d=="object"&&"n"in d&&"weekday"in d){const x=d.weekday,M=x===6?0:x+1,b=d.n,w=p[b]||`${b}th`;return l===1?`Repeats on the ${w} ${y[M]} of the month`:`Repeats on the ${w} ${y[M]} every ${l} months`}}if(a.bymonthday){const o=Array.isArray(a.bymonthday)?a.bymonthday[0]:a.bymonthday,d=o===1?"st":o===2?"nd":o===3?"rd":"th";return l===1?`Repeats on the ${o}${d} of the month`:`Repeats on the ${o}${d} every ${l} months`}return l===1?"Repeats monthly":`Repeats every ${l} months`}if(a.freq===ee.YEARLY){if(a.bymonth&&a.bymonthday){const o=["","January","February","March","April","May","June","July","August","September","October","November","December"],d=Array.isArray(a.bymonth)?a.bymonth[0]:a.bymonth,x=Array.isArray(a.bymonthday)?a.bymonthday[0]:a.bymonthday,M=x===1?"st":x===2?"nd":x===3?"rd":"th";return l===1?`Repeats every ${o[d]} ${x}${M}`:`Repeats every ${l} years on ${o[d]} ${x}${M}`}return l===1?"Repeats yearly":`Repeats every ${l} years`}return"Repeats"}catch{return"Repeats"}};let Re=T("");W(()=>n(de()),()=>{I(Re,de()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),W(()=>n(e()),()=>{I(E,e().attachments?.find(t=>we(t.type)))}),W(()=>n(e()),()=>{I(P,!!(e().description||e().attachments&&e().attachments.length>0))}),W(()=>n(e()),()=>{I(B,e().meta_data?.submitted_at??e().created_at)}),W(()=>r(B),()=>{I(N,ze(r(B)))}),W(()=>n(e()),()=>{I(F,e().meta_data?.submitted_by_name)}),W(()=>(r(N),r(F)),()=>{I(Z,!!(r(N)||r(F)))}),W(()=>n(e()),()=>{I(Q,ze(e().meta_data?.edited_at))}),W(()=>n(e()),()=>{I(V,e().meta_data?.edited_by_name)}),W(()=>(r(Q),r(V)),()=>{I(he,!!(r(Q)||r(V)))}),rt(),lt();var q=Mt(),Se=_(q);{var Ne=t=>{var s=vt(),a=_(s),l=_(a,!0);m(a);var y=f(a,2),p=_(y),o=_(p,!0);m(p),m(y),m(s),S((d,x)=>{Y(l,d),Y(o,x)},[()=>(n(e()),i(()=>Ie(e().start_time))),()=>(n(e()),i(()=>Te(e().start_time)))]),v(t,s)};u(Se,t=>{de()&&t(Ne)})}var Ye=f(Se,2),ve=_(Ye),me=_(ve),Ke=_(me);pe(Ke,()=>(n(ie),n(e()),n(H()),i(()=>ie(e().title||"",H())))),m(me);var Ae=f(me,2);{var Qe=t=>{var s=mt();v(t,s)},qe=t=>{var s=ct(),a=_(s);m(s),S((l,y)=>Y(a,`${l??""} to ${y??""}`),[()=>(n(e()),i(()=>xe(e().start_time))),()=>(n(e()),i(()=>xe(e().end_time)))]),v(t,s)};u(Ae,t=>{n(e()),i(()=>e().is_all_day)?t(Qe):t(qe,!1)})}var ce=f(Ae,2),Ee=_(ce);{var Ue=t=>{var s=ft(),a=j(s),l=_(a,!0);m(a);var y=f(a,2);{var p=o=>{var d=_t();v(o,d)};u(y,o=>{n(e()),i(()=>e().recurrence_rule||e()?.meta_data?.recurring_instance||e().location||e().description||e().attachments&&e().attachments.length>0)&&o(p)})}S((o,d)=>{Pe(a,1,`badge rounded-pill bg-color-${o??""}`,"svelte-lx28z"),Y(l,d)},[()=>(n(le),n(e()),i(()=>le(e()?.meta_data?.organization)?.color_number)),()=>(n(le),n(e()),i(()=>le(e()?.meta_data?.organization)?.label))]),v(t,s)};u(Ee,t=>{n(e()),i(()=>e()?.meta_data?.organization)&&t(Ue)})}var Me=f(Ee,2);{var je=t=>{var s=yt(),a=j(s),l=f(_(a));m(a);var y=f(a,2);{var p=o=>{var d=ut();v(o,d)};u(y,o=>{n(e()),i(()=>e().location||e().description||e().attachments&&e().attachments.length>0)&&o(p)})}S(o=>Y(l,` ${o??""}`),[()=>(n(e()),i(()=>Le(e().recurrence_rule)))]),v(t,s)},Ce=t=>{var s=ye(),a=j(s);{var l=y=>{var p=gt(),o=f(j(p),2);{var d=x=>{var M=pt();v(x,M)};u(o,x=>{n(e()),i(()=>e().location||e().description||e().attachments&&e().attachments.length>0)&&x(d)})}v(y,p)};u(a,y=>{n(e()),i(()=>e()?.meta_data?.recurring_instance)&&y(l)},!0)}v(t,s)};u(Me,t=>{n(e()),i(()=>e().recurrence_rule)?t(je):t(Ce,!1)})}var Oe=f(Me,2);{var He=t=>{var s=xt(),a=j(s),l=_(a);pe(l,()=>(n(ie),n(e()),n(H()),i(()=>ie(e().location,H())))),m(a);var y=f(a,2);{var p=o=>{var d=ht();v(o,d)};u(y,o=>{n(e()),i(()=>e().description||e().attachments&&e().attachments.length>0)&&o(p)})}v(t,s)};u(Oe,t=>{n(e()),i(()=>e().location)&&t(He)})}var Je=f(Oe,2);{var Ge=t=>{var s=bt(),a=_(s);{var l=p=>{var o=C("Hide");v(p,o)},y=p=>{var o=C("Show");v(p,o)};u(a,p=>{te()?p(l):p(y,!1)})}nt(),m(s),v(t,s)};u(Je,t=>{n(e()),i(()=>e().description||e().attachments&&e().attachments.length>0)&&t(Ge)})}m(ce);var Ze=f(ce,2);{var Ve=t=>{var s=At(),a=_(s);{var l=b=>{var w=wt(),D=_(w);pe(D,()=>(n(De),n(e()),n(H()),i(()=>De(e().description,H())))),m(w),v(b,w)};u(a,b=>{n(e()),i(()=>e().description)&&b(l)})}var y=f(a,2);{var p=b=>{var w=Rt(),D=f(_(w),2);ot(D,5,()=>(n(e()),i(()=>e().attachments)),U=>U.id,(U,g)=>{var J=ye(),k=j(J);{var R=K=>{var O=kt(),z=_(O),$=_(z);m(z);var X=f(z,2),ae=_(X),fe=_(ae,!0);m(ae),m(X),m(O),S(()=>{G(z,"title",`Open ${r(g),i(()=>r(g).name)??""}`),G($,"src",(r(g),i(()=>r(g).url))),G($,"alt",(r(g),i(()=>r(g).name))),Y(fe,(r(g),i(()=>r(g).name)))}),oe("click",z,$e(()=>ke(r(g).url))),v(K,O)},_e=K=>{var O=zt(),z=f(_(O),2),$=_(z,!0);m(z);var X=f(z,2),ae=_(X);m(X),m(O),S(fe=>{G(O,"title",`Open ${r(g),i(()=>r(g).name)??""}`),Y($,(r(g),i(()=>r(g).name))),Y(ae,`(${fe??""})`)},[()=>(r(g),i(()=>Fe(r(g).size)))]),oe("click",O,$e(()=>ke(r(g).url))),v(K,O)};u(k,K=>{r(g),i(()=>we(r(g).type))?K(R):K(_e,!1)})}v(U,J)}),m(D),m(w),v(b,w)};u(y,b=>{n(e()),i(()=>e().attachments&&e().attachments.length>0)&&b(p)})}var o=f(y,2);{var d=b=>{var w=St(),D=f(_(w));{var U=k=>{var R=C();S(()=>Y(R,r(N))),v(k,R)};u(D,k=>{r(N)&&k(U)})}var g=f(D,2);{var J=k=>{var R=ye(),_e=j(R);{var K=z=>{var $=C();S(()=>Y($,`by ${r(F)??""}`)),v(z,$)},O=z=>{var $=C();S(()=>Y($,`by ${r(F)??""}`)),v(z,$)};u(_e,z=>{r(N)?z(K):z(O,!1)})}v(k,R)};u(g,k=>{r(F)&&k(J)})}m(w),v(b,w)};u(o,b=>{r(Z)&&b(d)})}var x=f(o,2);{var M=b=>{var w=Yt(),D=f(_(w));{var U=k=>{var R=C();S(()=>Y(R,r(Q))),v(k,R)};u(D,k=>{r(Q)&&k(U)})}var g=f(D,2);{var J=k=>{var R=C();S(()=>Y(R,`by ${r(V)??""}`)),v(k,R)};u(g,k=>{r(V)&&k(J)})}m(w),v(b,w)};u(x,b=>{r(he)&&b(M)})}m(s),v(t,s)};u(Ze,t=>{te()&&t(Ve)})}m(ve);var Xe=f(ve,2);{var et=t=>{var s=Et(),a=_(s);m(s),S(()=>{G(a,"src",(r(E),i(()=>r(E).url))),G(a,"alt",(r(E),i(()=>r(E).name)))}),v(t,s)};u(Xe,t=>{r(E)&&t(et)})}m(Ye),m(q),S(()=>{Pe(q,1,tt(r(Re)),"svelte-lx28z"),it(q,r(P)?"cursor: pointer;":"")}),oe("keydown",q,Be),oe("click",q,be),v(L,q),st()}export{qt as E,Qt as c};
