import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{t as ge,j as Vr,k as Xr,K as oa,bb as la,L as Jr,Y as ca,ac as ua,b1 as da,a_ as fa,N as va,G as rr,p as nt,aj as Oe,D as z,E as ve,w as K,g as d,ak as Yt,c as Y,s as $,u as V,r as U,a as at,f as Qe,F as rt,i as Er,am as ma,R as Wt,as as gr,z as ha}from"./DVz9v3yu.js";import{p as pe,i as me,e as xe,s as _e,b as bn,a as wn,c as pa,m as ya,u as ga}from"./DxLPEELx.js";import{b as en,d as _a,f as oe,a as te,c as Zt,t as ft}from"./BMBpHE4F.js";import{e as Vt,i as xn}from"./BoUt-3Zs.js";import{d as Dn,s as Ee,b as Tr,r as Ze}from"./D_h9jGPv.js";import{t as Je,x as Ge,y as Or,E as ba,F as wa,G as xa,H as Da,k as kt,D as kn,I as ka,C as Ea,l as En,z as Ta,J as tn,K as Aa,L as rn,M as Ma,s as gt,p as vt,f as Ie,N as nn,Q as $e,c as et,h as Ia,g as Ca,R as Ra}from"./C-HciA9L.js";import{s as ir}from"./CdEA5IGF.js";import{i as ot}from"./B41JjjA1.js";import{R as Me}from"./BC-RmiGx.js";import{S as Tn}from"./BT5d7Hus.js";import{b as pt,a as Pr,c as _r}from"./DSlOdaIK.js";import{b as Bt}from"./BfcxZoyz.js";import{b as Mt}from"./DGrLfHTH.js";import{w as Et,g as Ar,d as Pt,c as Fa,o as Oa}from"./CxzQr61Z.js";import{t as Dt}from"./r7-tBYgy.js";import{c as Pa}from"./DPMJIe1I.js";import{c as Sa,a as ct,f as an,h as Ua,e as Na,V as Ya}from"./Ccm4kzzT.js";import{_ as Mr}from"./CmsKOCeN.js";import{s as La,i as Ha}from"./Bje9sCWW.js";function $t(s,e,n=!1,t=!1,r=!1){var a=s,u="";ge(()=>{var f=oa;if(u===(u=e()??"")){Vr&&Xr();return}if(f.nodes!==null&&(la(f.nodes.start,f.nodes.end),f.nodes=null),u!==""){if(Vr){Jr.data;for(var c=Xr(),g=c;c!==null&&(c.nodeType!==ca||c.data!=="");)g=c,c=ua(c);if(c===null)throw da(),fa;en(Jr,g),a=va(c);return}var i=u+"";n?i=`<svg>${i}</svg>`:t&&(i=`<math>${i}</math>`);var o=_a(i);if((n||t)&&(o=rr(o)),en(rr(o),o.lastChild),n||t)for(;rr(o);)a.before(rr(o));else a.before(o)}})}function Nt(s,e){const n=Je(s);return isNaN(e)?Ge(s,NaN):(e&&n.setDate(n.getDate()+e),n)}function Gt(s,e){const n=e*7;return Nt(s,n)}function St(s,e){const n=Or(),t=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Je(s),a=r.getDay(),u=(a<t?-7:0)+6-(a-t);return r.setDate(r.getDate()+u),r.setHours(23,59,59,999),r}function za(){return Object.assign({},Or())}function Wa(s){let n=Je(s).getDay();return n===0&&(n=7),n}function qa(s,e){const n=e instanceof Date?Ge(e,0):new e(0);return n.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),n.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),n}const Ba=10;class An{subPriority=0;validate(e,n){return!0}}class $a extends An{constructor(e,n,t,r,a){super(),this.value=e,this.validateValue=n,this.setValue=t,this.priority=r,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,t){return this.setValue(e,n,this.value,t)}}class Qa extends An{priority=Ba;subPriority=-1;set(e,n){return n.timestampIsSet?e:Ge(e,qa(e,Date))}}class Te{run(e,n,t,r){const a=this.parse(e,n,t,r);return a?{setter:new $a(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,t){return!0}}class ja extends Te{priority=140;parse(e,n,t){switch(n){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}}set(e,n,t){return n.era=t,e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Le={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},mt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function He(s,e){return s&&{value:e(s.value),rest:s.rest}}function Pe(s,e){const n=e.match(s);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function ht(s,e){const n=e.match(s);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const t=n[1]==="+"?1:-1,r=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,u=n[5]?parseInt(n[5],10):0;return{value:t*(r*ba+a*wa+u*xa),rest:e.slice(n[0].length)}}function Mn(s){return Pe(Le.anyDigitsSigned,s)}function Ne(s,e){switch(s){case 1:return Pe(Le.singleDigit,e);case 2:return Pe(Le.twoDigits,e);case 3:return Pe(Le.threeDigits,e);case 4:return Pe(Le.fourDigits,e);default:return Pe(new RegExp("^\\d{1,"+s+"}"),e)}}function or(s,e){switch(s){case 1:return Pe(Le.singleDigitSigned,e);case 2:return Pe(Le.twoDigitsSigned,e);case 3:return Pe(Le.threeDigitsSigned,e);case 4:return Pe(Le.fourDigitsSigned,e);default:return Pe(new RegExp("^-?\\d{1,"+s+"}"),e)}}function Sr(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function In(s,e){const n=e>0,t=n?e:1-e;let r;if(t<=50)r=s||100;else{const a=t+50,u=Math.trunc(a/100)*100,f=s>=a%100;r=s+u-(f?100:0)}return n?r:1-r}function Cn(s){return s%400===0||s%4===0&&s%100!==0}class Ga extends Te{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,t){const r=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return He(Ne(4,e),r);case"yo":return He(t.ordinalNumber(e,{unit:"year"}),r);default:return He(Ne(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,t){const r=e.getFullYear();if(t.isTwoDigitYear){const u=In(t.year,r);return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?t.year:1-t.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Za extends Te{priority=130;parse(e,n,t){const r=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return He(Ne(4,e),r);case"Yo":return He(t.ordinalNumber(e,{unit:"year"}),r);default:return He(Ne(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,t,r){const a=Da(e,r);if(t.isTwoDigitYear){const f=In(t.year,a);return e.setFullYear(f,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),kt(e,r)}const u=!("era"in n)||n.era===1?t.year:1-t.year;return e.setFullYear(u,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),kt(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Ka extends Te{priority=130;parse(e,n){return or(n==="R"?4:n.length,e)}set(e,n,t){const r=Ge(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),kn(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Va extends Te{priority=130;parse(e,n){return or(n==="u"?4:n.length,e)}set(e,n,t){return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Xa extends Te{priority=120;parse(e,n,t){switch(n){case"Q":case"QQ":return Ne(n.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Ja extends Te{priority=120;parse(e,n,t){switch(n){case"q":case"qq":return Ne(n.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class es extends Te{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,t){const r=a=>a-1;switch(n){case"M":return He(Pe(Le.month,e),r);case"MM":return He(Ne(2,e),r);case"Mo":return He(t.ordinalNumber(e,{unit:"month"}),r);case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}}class ts extends Te{priority=110;parse(e,n,t){const r=a=>a-1;switch(n){case"L":return He(Pe(Le.month,e),r);case"LL":return He(Ne(2,e),r);case"Lo":return He(t.ordinalNumber(e,{unit:"month"}),r);case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function rs(s,e,n){const t=Je(s),r=ka(t,n)-e;return t.setDate(t.getDate()-r*7),t}class ns extends Te{priority=100;parse(e,n,t){switch(n){case"w":return Pe(Le.week,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return Ne(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,t,r){return kt(rs(e,t,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function as(s,e){const n=Je(s),t=Ea(n)-e;return n.setDate(n.getDate()-t*7),n}class ss extends Te{priority=100;parse(e,n,t){switch(n){case"I":return Pe(Le.week,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return Ne(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,t){return kn(as(e,t))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const is=[31,28,31,30,31,30,31,31,30,31,30,31],os=[31,29,31,30,31,30,31,31,30,31,30,31];class ls extends Te{priority=90;subPriority=1;parse(e,n,t){switch(n){case"d":return Pe(Le.date,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return Ne(n.length,e)}}validate(e,n){const t=e.getFullYear(),r=Cn(t),a=e.getMonth();return r?n>=1&&n<=os[a]:n>=1&&n<=is[a]}set(e,n,t){return e.setDate(t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class cs extends Te{priority=90;subpriority=1;parse(e,n,t){switch(n){case"D":case"DD":return Pe(Le.dayOfYear,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return Ne(n.length,e)}}validate(e,n){const t=e.getFullYear();return Cn(t)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,t){return e.setMonth(0,t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Ur(s,e,n){const t=Or(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=Je(s),u=a.getDay(),c=(e%7+7)%7,g=7-r,i=e<0||e>6?e-(u+g)%7:(c+g)%7-(u+g)%7;return Nt(a,i)}class us extends Te{priority=90;parse(e,n,t){switch(n){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,t,r){return e=Ur(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ds extends Te{priority=90;parse(e,n,t,r){const a=u=>{const f=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+f};switch(n){case"e":case"ee":return He(Ne(n.length,e),a);case"eo":return He(t.ordinalNumber(e,{unit:"day"}),a);case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,t,r){return e=Ur(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class fs extends Te{priority=90;parse(e,n,t,r){const a=u=>{const f=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+f};switch(n){case"c":case"cc":return He(Ne(n.length,e),a);case"co":return He(t.ordinalNumber(e,{unit:"day"}),a);case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,t,r){return e=Ur(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function vs(s,e){const n=Je(s),t=Wa(n),r=e-t;return Nt(n,r)}class ms extends Te{priority=90;parse(e,n,t){const r=a=>a===0?7:a;switch(n){case"i":case"ii":return Ne(n.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return He(t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return He(t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return He(t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return He(t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,n){return n>=1&&n<=7}set(e,n,t){return e=vs(e,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class hs extends Te{priority=80;parse(e,n,t){switch(n){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,t){return e.setHours(Sr(t),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class ps extends Te{priority=80;parse(e,n,t){switch(n){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,t){return e.setHours(Sr(t),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class ys extends Te{priority=80;parse(e,n,t){switch(n){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,t){return e.setHours(Sr(t),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class gs extends Te{priority=70;parse(e,n,t){switch(n){case"h":return Pe(Le.hour12h,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return Ne(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,t){const r=e.getHours()>=12;return r&&t<12?e.setHours(t+12,0,0,0):!r&&t===12?e.setHours(0,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class _s extends Te{priority=70;parse(e,n,t){switch(n){case"H":return Pe(Le.hour23h,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return Ne(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,t){return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class bs extends Te{priority=70;parse(e,n,t){switch(n){case"K":return Pe(Le.hour11h,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return Ne(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,t){return e.getHours()>=12&&t<12?e.setHours(t+12,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class ws extends Te{priority=70;parse(e,n,t){switch(n){case"k":return Pe(Le.hour24h,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return Ne(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,t){const r=t<=24?t%24:t;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class xs extends Te{priority=60;parse(e,n,t){switch(n){case"m":return Pe(Le.minute,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return Ne(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,t){return e.setMinutes(t,0,0),e}incompatibleTokens=["t","T"]}class Ds extends Te{priority=50;parse(e,n,t){switch(n){case"s":return Pe(Le.second,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return Ne(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,t){return e.setSeconds(t,0),e}incompatibleTokens=["t","T"]}class ks extends Te{priority=30;parse(e,n){const t=r=>Math.trunc(r*Math.pow(10,-n.length+3));return He(Ne(n.length,e),t)}set(e,n,t){return e.setMilliseconds(t),e}incompatibleTokens=["t","T"]}class Es extends Te{priority=10;parse(e,n){switch(n){case"X":return ht(mt.basicOptionalMinutes,e);case"XX":return ht(mt.basic,e);case"XXXX":return ht(mt.basicOptionalSeconds,e);case"XXXXX":return ht(mt.extendedOptionalSeconds,e);case"XXX":default:return ht(mt.extended,e)}}set(e,n,t){return n.timestampIsSet?e:Ge(e,e.getTime()-En(e)-t)}incompatibleTokens=["t","T","x"]}class Ts extends Te{priority=10;parse(e,n){switch(n){case"x":return ht(mt.basicOptionalMinutes,e);case"xx":return ht(mt.basic,e);case"xxxx":return ht(mt.basicOptionalSeconds,e);case"xxxxx":return ht(mt.extendedOptionalSeconds,e);case"xxx":default:return ht(mt.extended,e)}}set(e,n,t){return n.timestampIsSet?e:Ge(e,e.getTime()-En(e)-t)}incompatibleTokens=["t","T","X"]}class As extends Te{priority=40;parse(e){return Mn(e)}set(e,n,t){return[Ge(e,t*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Ms extends Te{priority=20;parse(e){return Mn(e)}set(e,n,t){return[Ge(e,t),{timestampIsSet:!0}]}incompatibleTokens="*"}const Is={G:new ja,y:new Ga,Y:new Za,R:new Ka,u:new Va,Q:new Xa,q:new Ja,M:new es,L:new ts,w:new ns,I:new ss,d:new ls,D:new cs,E:new us,e:new ds,c:new fs,i:new ms,a:new hs,b:new ps,B:new ys,h:new gs,H:new _s,K:new bs,k:new ws,m:new xs,s:new Ds,S:new ks,X:new Es,x:new Ts,t:new As,T:new Ms},Cs=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rs=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fs=/^'([^]*?)'?$/,Os=/''/g,Ps=/\S/,Ss=/[a-zA-Z]/;function lr(s,e,n,t){const r=za(),a=t?.locale??r.locale??Ta,u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,f=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(e==="")return s===""?Je(n):Ge(n,NaN);const c={firstWeekContainsDate:u,weekStartsOn:f,locale:a},g=[new Qa],i=e.match(Rs).map(k=>{const F=k[0];if(F in tn){const w=tn[F];return w(k,a.formatLong)}return k}).join("").match(Cs),o=[];for(let k of i){!t?.useAdditionalWeekYearTokens&&Aa(k)&&rn(k,e,s),!t?.useAdditionalDayOfYearTokens&&Ma(k)&&rn(k,e,s);const F=k[0],w=Is[F];if(w){const{incompatibleTokens:W}=w;if(Array.isArray(W)){const E=o.find(S=>W.includes(S.token)||S.token===F);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${k}\` at the same time`)}else if(w.incompatibleTokens==="*"&&o.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);o.push({token:F,fullToken:k});const R=w.run(s,k,a.match,c);if(!R)return Ge(n,NaN);g.push(R.setter),s=R.rest}else{if(F.match(Ss))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");if(k==="''"?k="'":F==="'"&&(k=Us(k)),s.indexOf(k)===0)s=s.slice(k.length);else return Ge(n,NaN)}}if(s.length>0&&Ps.test(s))return Ge(n,NaN);const l=g.map(k=>k.priority).sort((k,F)=>F-k).filter((k,F,w)=>w.indexOf(k)===F).map(k=>g.filter(F=>F.priority===k).sort((F,w)=>w.subPriority-F.subPriority)).map(k=>k[0]);let m=Je(n);if(isNaN(m.getTime()))return Ge(n,NaN);const b={};for(const k of l){if(!k.validate(m,c))return Ge(n,NaN);const F=k.set(m,b,c);Array.isArray(F)?(m=F[0],Object.assign(b,F[1])):m=F}return Ge(n,m)}function Us(s){return s.match(Fs)[1].replace(Os,"'")}function nr(s,e){const n=+Je(s),[t,r]=[+Je(e.start),+Je(e.end)].sort((a,u)=>a-u);return n>=t&&n<=r}function Ns(s,e){const n=Je(s);return n.setHours(e),n}function Ys(s,e){const n=Je(s);return n.setMinutes(e),n}function Ls(s,e){const n=Bs(e);return"formatToParts"in n?zs(n,s):Ws(n,s)}const Hs={year:0,month:1,day:2,hour:3,minute:4,second:5};function zs(s,e){try{const n=s.formatToParts(e),t=[];for(let r=0;r<n.length;r++){const a=Hs[n[r].type];a!==void 0&&(t[a]=parseInt(n[r].value,10))}return t}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Ws(s,e){const n=s.format(e),t=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(t[3],10),parseInt(t[1],10),parseInt(t[2],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10)]}const br={},sn=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),qs=sn==="06/25/2014, 00:00:00"||sn==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Bs(s){return br[s]||(br[s]=qs?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:s,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),br[s]}function Nr(s,e,n,t,r,a,u){const f=new Date(0);return f.setUTCFullYear(s,e,n),f.setUTCHours(t,r,a,u),f}const on=36e5,$s=6e4,wr={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Yr(s,e,n){if(!s)return 0;let t=wr.timezoneZ.exec(s);if(t)return 0;let r,a;if(t=wr.timezoneHH.exec(s),t)return r=parseInt(t[1],10),ln(r)?-(r*on):NaN;if(t=wr.timezoneHHMM.exec(s),t){r=parseInt(t[2],10);const u=parseInt(t[3],10);return ln(r,u)?(a=Math.abs(r)*on+u*$s,t[1]==="+"?-a:a):NaN}if(Gs(s)){e=new Date(e||Date.now());const u=n?e:Qs(e),f=Ir(u,s);return-(n?f:js(e,f,s))}return NaN}function Qs(s){return Nr(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds())}function Ir(s,e){const n=Ls(s,e),t=Nr(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let r=s.getTime();const a=r%1e3;return r-=a>=0?a:1e3+a,t-r}function js(s,e,n){let r=s.getTime()-e;const a=Ir(new Date(r),n);if(e===a)return e;r-=a-e;const u=Ir(new Date(r),n);return a===u?a:Math.max(a,u)}function ln(s,e){return-23<=s&&s<=23&&(e==null||0<=e&&e<=59)}const cn={};function Gs(s){if(cn[s])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:s}),cn[s]=!0,!0}catch{return!1}}function un(s){const e=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return e.setUTCFullYear(s.getFullYear()),+s-+e}const Rn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,xr=36e5,dn=6e4,Zs=2,Ke={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Rn};function Cr(s,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(s===null)return new Date(NaN);const n=e.additionalDigits==null?Zs:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]")return new Date(s.getTime());if(typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]")return new Date(s);if(Object.prototype.toString.call(s)!=="[object String]")return new Date(NaN);const t=Ks(s),{year:r,restDateString:a}=Vs(t.date,n),u=Xs(a,r);if(u===null||isNaN(u.getTime()))return new Date(NaN);if(u){const f=u.getTime();let c=0,g;if(t.time&&(c=Js(t.time),c===null||isNaN(c)))return new Date(NaN);if(t.timeZone||e.timeZone){if(g=Yr(t.timeZone||e.timeZone,new Date(f+c)),isNaN(g))return new Date(NaN)}else g=un(new Date(f+c)),g=un(new Date(f+c+g));return new Date(f+c+g)}else return new Date(NaN)}function Ks(s){const e={};let n=Ke.dateTimePattern.exec(s),t;if(n?(e.date=n[1],t=n[3]):(n=Ke.datePattern.exec(s),n?(e.date=n[1],t=n[2]):(e.date=null,t=s)),t){const r=Ke.timeZone.exec(t);r?(e.time=t.replace(r[1],""),e.timeZone=r[1].trim()):e.time=t}return e}function Vs(s,e){if(s){const n=Ke.YYY[e],t=Ke.YYYYY[e];let r=Ke.YYYY.exec(s)||t.exec(s);if(r){const a=r[1];return{year:parseInt(a,10),restDateString:s.slice(a.length)}}if(r=Ke.YY.exec(s)||n.exec(s),r){const a=r[1];return{year:parseInt(a,10)*100,restDateString:s.slice(a.length)}}}return{year:null}}function Xs(s,e){if(e===null)return null;let n,t,r;if(!s||!s.length)return n=new Date(0),n.setUTCFullYear(e),n;let a=Ke.MM.exec(s);if(a)return n=new Date(0),t=parseInt(a[1],10)-1,vn(e,t)?(n.setUTCFullYear(e,t),n):new Date(NaN);if(a=Ke.DDD.exec(s),a){n=new Date(0);const u=parseInt(a[1],10);return ri(e,u)?(n.setUTCFullYear(e,0,u),n):new Date(NaN)}if(a=Ke.MMDD.exec(s),a){n=new Date(0),t=parseInt(a[1],10)-1;const u=parseInt(a[2],10);return vn(e,t,u)?(n.setUTCFullYear(e,t,u),n):new Date(NaN)}if(a=Ke.Www.exec(s),a)return r=parseInt(a[1],10)-1,mn(r)?fn(e,r):new Date(NaN);if(a=Ke.WwwD.exec(s),a){r=parseInt(a[1],10)-1;const u=parseInt(a[2],10)-1;return mn(r,u)?fn(e,r,u):new Date(NaN)}return null}function Js(s){let e,n,t=Ke.HH.exec(s);if(t)return e=parseFloat(t[1].replace(",",".")),Dr(e)?e%24*xr:NaN;if(t=Ke.HHMM.exec(s),t)return e=parseInt(t[1],10),n=parseFloat(t[2].replace(",",".")),Dr(e,n)?e%24*xr+n*dn:NaN;if(t=Ke.HHMMSS.exec(s),t){e=parseInt(t[1],10),n=parseInt(t[2],10);const r=parseFloat(t[3].replace(",","."));return Dr(e,n,r)?e%24*xr+n*dn+r*1e3:NaN}return null}function fn(s,e,n){e=e||0,n=n||0;const t=new Date(0);t.setUTCFullYear(s,0,4);const r=t.getUTCDay()||7,a=e*7+n+1-r;return t.setUTCDate(t.getUTCDate()+a),t}const ei=[31,28,31,30,31,30,31,31,30,31,30,31],ti=[31,29,31,30,31,30,31,31,30,31,30,31];function Fn(s){return s%400===0||s%4===0&&s%100!==0}function vn(s,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const t=Fn(s);if(t&&n>ti[e]||!t&&n>ei[e])return!1}return!0}function ri(s,e){if(e<1)return!1;const n=Fn(s);return!(n&&e>366||!n&&e>365)}function mn(s,e){return!(s<0||s>52||e!=null&&(e<0||e>6))}function Dr(s,e,n){return!(s<0||s>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function yt(s,e,n){s=Cr(s,n);const t=Yr(e,s,!0),r=new Date(s.getTime()-t),a=new Date(0);return a.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),a.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),a}function It(s,e,n){if(typeof s=="string"&&!s.match(Rn))return Cr(s,{...n,timeZone:e});s=Cr(s,n);const t=Nr(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()).getTime(),r=Yr(e,new Date(t));return new Date(t+r)}const Rr=Et([]);let ut=null;async function Lt(){return ut||(ut=(async()=>{const{data:s,error:e}=await gt.from("calendar_events").select("*").order("start_time",{ascending:!0});if(e)throw ut=null,e;const n=s||[];return Rr.set(n),setTimeout(()=>{ut=null},100),n})(),ut)}async function Ht(s){let e=Ar(Rr);return e.length||(await Lt(),e=Ar(Rr)),e.find(n=>n.id===s)}async function Lr(s){const{data:e,error:n}=await gt.from("calendar_events").insert([s]).select();if(n)throw n;return ut=null,await Lt(),e?e[0]:void 0}async function Ct(s,e){const{data:n,error:t}=await gt.from("calendar_events").update(e).eq("id",s).select();if(t)throw t;return ut=null,await Lt(),n?n[0]:void 0}async function Hr(s){const e=await Ht(s),{error:n}=await gt.from("calendar_events").delete().eq("id",s);if(n)throw n;e?.attachments&&e.attachments.length>0&&await Wr(e.attachments),ut=null,await Lt()}async function ni(s=new Date){const e=s.toISOString(),{data:n,error:t}=await gt.from("calendar_events").select("*").lt("start_time",e).eq("event_type","calendar_event");if(t)throw t;if(!n||n.length===0)return{deleted:0,skipped:0};const r=[],a=[];for(const f of n){if(f.recurrence_rule&&(!f.recurrence_end_date||f.recurrence_end_date&&new Date(f.recurrence_end_date)>=s)){a.push(f);continue}r.push(f)}let u=0;if(r.length>0){const f=r.map(c=>c.id).filter(c=>c!==void 0);if(f.length>0){const{data:c,error:g}=await gt.from("calendar_events").delete().in("id",f).select("id");if(g)throw g;u=c?.length??0;for(const i of r)i.attachments&&i.attachments.length>0&&await Wr(i.attachments)}}return ut=null,await Lt(),{deleted:u,skipped:a.length}}async function On(s,e){const n=s.name.split(".").pop()||"bin",t=e||"temp",a=`${crypto.randomUUID()}.${n}`,u=`${t}/${a}`,{error:f}=await gt.storage.from("event-attachments").upload(u,s,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:{publicUrl:c}}=gt.storage.from("event-attachments").getPublicUrl(u);return{id:crypto.randomUUID(),name:s.name,url:c,type:s.type,size:s.size,uploadedAt:new Date().toISOString()}}async function Pn(s){const{error:e}=await gt.storage.from("event-attachments").remove([s]);if(e)throw e}function zr(s){const e=s.match(/event-attachments\/(.+)$/);return e?e[1]:""}async function Wr(s){if(!s||s.length===0)return;const e=s.map(n=>zr(n.url)).filter(n=>n);if(e.length>0){const{error:n}=await gt.storage.from("event-attachments").remove(e);if(n)throw n}}const Al=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Lr,deleteCalendarEvent:Hr,deleteEventAttachment:Pn,deleteEventAttachments:Wr,deletePastCalendarEvents:ni,extractStoragePath:zr,getAllCalendarEvents:Lt,getCalendarEvent:Ht,updateCalendarEvent:Ct,uploadEventAttachment:On},Symbol.toStringTag,{value:"Module"})),ai={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21}},cr=Object.values(ai).sort((s,e)=>s.sort_index-e.sort_index),Tt=s=>s?cr.find(e=>e.key===s):void 0;let Kt=null;const si=s=>s.replace(/<[^>]*>/g,"").toLowerCase(),hn=(s,e)=>{if(!e.trim())return!0;const n=e.toLowerCase(),t=(s.title||"").toLowerCase(),r=si(s.description||""),a=(s.location||"").toLowerCase();return t.includes(n)||r.includes(n)||a.includes(n)},At=(s,e)=>{if(!e.trim()||!s)return pn(s||"");const n=pn(s),t=new RegExp(`(${Sn(e)})`,"gi");return n.replace(t,"<mark>$1</mark>")},ur=(s,e)=>{if(!e.trim()||!s)return s||"";const n=new RegExp(`(${Sn(e)})`,"gi");return s.replace(/(<[^>]*>)|([^<]+)/g,(t,r,a)=>r||(a?a.replace(n,"<mark>$1</mark>"):t))},pn=s=>{const e=typeof document<"u"?document.createElement("div"):null;return e?(e.textContent=s,e.innerHTML):s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Sn=s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ii=()=>{const s=Et(!1),e=Et([]),n=Et([]),t=Et(""),r=Et(""),a=Et(!1),u=Pt([n],([R])=>{const E=new Date,S=St(Gt(E,3),{weekStartsOn:1}),_=R.filter(x=>x?.meta_data?.category?.length).filter(x=>{if(x.event_type==="calendar_event"){const h=x.start_time?vt(x.start_time):null;return h?nr(h,{start:E,end:S}):!1}return!0}).map(x=>cr.find(h=>h.key===x.meta_data?.category)).filter(x=>x!==void 0);return Array.from(new Set(_))}),f=Pt([t],([R])=>cr.find(E=>E.key===R)),c=Pt([n,t,r],([R,E,S])=>R.filter(_=>_.event_type==="calendar_event").filter(_=>{const x=_?.meta_data;return E&&x?x?.category===E:!0}).filter(_=>hn(_,S)).filter(_=>{const x=_.start_time?vt(_.start_time):null,h=La();return x?Ha(x,h)||x.getTime()>=h.getTime():!1})),g=Pt([n,t,r],([R,E,S])=>R.filter(_=>_.event_type==="announcement").filter(_=>{const x=_?.meta_data;return E&&x?x?.category===E:!0}).filter(_=>hn(_,S))),i=Pt([c],([R])=>R.filter(E=>{const S=E.start_time?vt(E.start_time):null;return S?nr(S,{start:kt(new Date,{weekStartsOn:1}),end:St(new Date,{weekStartsOn:1})}):!1})),o=()=>{const R=kt(new Date,{weekStartsOn:1}),E=St(new Date,{weekStartsOn:1});return`${Ie(R,"MMM d").toUpperCase()} – ${Ie(E,"MMM d").toUpperCase()}`},l=Pt([c],([R])=>{const E=Gt(kt(new Date,{weekStartsOn:1}),1),S=St(E,{weekStartsOn:1});return R.filter(_=>{const x=_.start_time?vt(_.start_time):null;return x?nr(x,{start:E,end:S}):!1})}),m=()=>{const R=Gt(kt(new Date,{weekStartsOn:1}),1),E=St(R,{weekStartsOn:1});return`${Ie(R,"MMM d").toUpperCase()} – ${Ie(E,"MMM d").toUpperCase()}`},b=Pt([c],([R])=>{const E=Gt(kt(new Date,{weekStartsOn:1}),2),S=St(E,{weekStartsOn:1});return R.filter(_=>{const x=_.start_time?vt(_.start_time):null;return x?nr(x,{start:E,end:S}):!1})}),k=()=>{const R=Gt(kt(new Date,{weekStartsOn:1}),2),E=St(R,{weekStartsOn:1});return`${Ie(R,"MMM d").toUpperCase()} – ${Ie(E,"MMM d").toUpperCase()}`},F=R=>{const E=[],S=new Date,_=new Date;_.setFullYear(S.getFullYear()+1);for(const x of R)if(x.recurrence_rule&&x.start_time&&x.end_time)try{const h=Me.fromString(x.recurrence_rule),y=x.recurrence_end_date?h.all():h.between(S,_,!0),D=new Date(x.start_time),M=new Date(x.end_time).getTime()-D.getTime(),O=yt(D,$e),T=O.getHours(),C=O.getMinutes(),p=O.getSeconds(),v=O.getMilliseconds(),P=x.recurrence_exceptions||[],I=x.recurrence_overrides||{};y.forEach((N,j)=>{const q=yt(N,$e),B=new Date(q);B.setHours(T,C,p,v);const L=It(B,$e),H=L,le=new Date(L.getTime()+M),re=Ie(N,"yyyy-MM-dd"),ie=I[re];if(P.includes(re)&&!ie)return;const de={...x,id:void 0,start_time:H.toISOString(),end_time:le.toISOString(),meta_data:{category:x.meta_data?.category||"",...x.meta_data,recurring_instance:!0,recurring_parent_id:x.id,recurring_instance_index:j}};ie&&(ie.title!==void 0&&(de.title=ie.title),ie.description!==void 0&&(de.description=ie.description),ie.location!==void 0&&(de.location=ie.location),ie.start_time!==void 0&&(de.start_time=ie.start_time),ie.end_time!==void 0&&(de.end_time=ie.end_time),ie.is_all_day!==void 0&&(de.is_all_day=ie.is_all_day),ie.meta_data!==void 0&&(de.meta_data={...de.meta_data,...ie.meta_data})),E.push(de)})}catch(h){console.error("Failed to expand recurring event:",x.id,h),E.push(x)}else E.push(x);return E},w=R=>R.length?F(R).map(S=>({...S,start_time:S?.start_time?nn(S.start_time):void 0,end_time:S.end_time?nn(S.end_time):void 0})):[];return Kt={stores:{ready:s,data:e,dbData:n,announcements:g,calendarEvents:c,calendarEventsThisWeek:i,calendarEventsNextWeek:l,calendarEventsNextNextWeek:b,currentCategories:u,categoryFilter:t,searchQuery:r,currentCategoryFilter:f,weeksExpanded:a},actions:{reload:async()=>{s.set(!1);const R=await Lt();n.set(w(R)),s.set(!0)},calendarEventsThisWeekLabel:o,calendarEventsNextWeekLabel:m,calendarEventsNextNextWeekLabel:k}},Kt},Un=()=>Kt?.stores&&Object.keys(Kt.stores).length>0?Kt:ii();var oi=oe('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),li=oe('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),ci=oe('<span class="d-block small svelte-1rksp2z"> </span>'),ui=oe('<span class="text-muted">•</span>'),di=oe("<span> </span> <!>",1),fi=oe('<span class="text-muted">•</span>'),vi=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),mi=oe('<span class="text-muted">•</span>'),hi=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),pi=oe('<span class="text-muted">•</span>'),yi=oe('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),gi=oe('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),_i=oe('<div class="small svelte-1rksp2z"><!></div>'),bi=oe('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),wi=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),xi=oe('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Di=oe('<div class="small text-muted posted-meta svelte-1rksp2z">Posted <!> <!></div>'),ki=oe('<div class="details-container svelte-1rksp2z"><!> <!> <!></div>'),Ei=oe('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),Ti=oe('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="d-flex align-items-center gap-2"><div class="fw-bold svelte-1rksp2z"><!></div></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function Ml(s,e){nt(e,!1);const n=ve(),t=ve(),r=ve(),a=ve(),u=ve(),f=ve();let c=pe(e,"item",8),g=pe(e,"showDetails",12,!1),i=pe(e,"showDate",8,!0),o=pe(e,"searchQuery",8,"");const l=G=>{if(!G)return"";const ne=vt(G),Q=yt(ne,$e);return Ie(Q,"h:mm aa")},m=G=>{if(!G)return"";const ne=vt(G),Q=yt(ne,$e);return Ie(Q,"EEE")},b=G=>{if(!G)return"";const ne=vt(G),Q=yt(ne,$e);return Ie(Q,"MMM, dd")},k=()=>{d(t)&&g(!g())},F=G=>{d(t)&&(G.key==="Enter"||G.key===" ")&&k()},w=G=>G<1024?G+" B":G<1024*1024?(G/1024).toFixed(1)+" KB":(G/(1024*1024)).toFixed(1)+" MB",W=G=>G.startsWith("image/"),R=G=>{window.open(G,"_blank")},E=G=>{if(!G)return"";try{return Ie(vt(G),"MMM d, yyyy 'at' h:mm a")}catch{return""}},S=G=>{try{const Q=Me.fromString(G).origOptions,ee=Q.interval||1,se=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ae=["","1st","2nd","3rd","4th","5th"];if(Q.freq===Me.DAILY)return ee===1?"Repeats daily":`Repeats every ${ee} days`;if(Q.freq===Me.WEEKLY){if(Q.byweekday){const J=(Array.isArray(Q.byweekday)?Q.byweekday:[Q.byweekday]).map(fe=>{const ue=typeof fe=="number"?fe:fe.weekday,he=ue===6?0:ue+1;return se[he]});return ee===1?J.length===1?`Repeats every ${J[0]}`:`Repeats on ${J.join(", ")}`:`Repeats every ${ee} weeks on ${J.join(", ")}`}return ee===1?"Repeats weekly":`Repeats every ${ee} weeks`}if(Q.freq===Me.MONTHLY){if(Q.byweekday){const J=(Array.isArray(Q.byweekday)?Q.byweekday:[Q.byweekday])[0];if(J&&typeof J=="object"&&"n"in J&&"weekday"in J){const fe=J.weekday,ue=fe===6?0:fe+1,he=J.n,we=ae[he]||`${he}th`;return ee===1?`Repeats on the ${we} ${se[ue]} of the month`:`Repeats on the ${we} ${se[ue]} every ${ee} months`}}if(Q.bymonthday){const X=Array.isArray(Q.bymonthday)?Q.bymonthday[0]:Q.bymonthday,J=X===1?"st":X===2?"nd":X===3?"rd":"th";return ee===1?`Repeats on the ${X}${J} of the month`:`Repeats on the ${X}${J} every ${ee} months`}return ee===1?"Repeats monthly":`Repeats every ${ee} months`}if(Q.freq===Me.YEARLY){if(Q.bymonth&&Q.bymonthday){const X=["","January","February","March","April","May","June","July","August","September","October","November","December"],J=Array.isArray(Q.bymonth)?Q.bymonth[0]:Q.bymonth,fe=Array.isArray(Q.bymonthday)?Q.bymonthday[0]:Q.bymonthday,ue=fe===1?"st":fe===2?"nd":fe===3?"rd":"th";return ee===1?`Repeats every ${X[J]} ${fe}${ue}`:`Repeats every ${ee} years on ${X[J]} ${fe}${ue}`}return ee===1?"Repeats yearly":`Repeats every ${ee} years`}return"Repeats"}catch{return"Repeats"}};let _=ve("");Oe(()=>K(i()),()=>{z(_,i()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Oe(()=>K(c()),()=>{z(n,c().attachments?.find(G=>W(G.type)))}),Oe(()=>K(c()),()=>{z(t,!!(c().description||c().attachments&&c().attachments.length>0))}),Oe(()=>K(c()),()=>{z(r,c().meta_data?.submitted_at??c().created_at)}),Oe(()=>d(r),()=>{z(a,E(d(r)))}),Oe(()=>K(c()),()=>{z(u,c().meta_data?.submitted_by_name)}),Oe(()=>(d(a),d(u)),()=>{z(f,!!(d(a)||d(u)))}),Yt(),ot();var x=Ti(),h=Y(x);{var y=G=>{var ne=oi(),Q=Y(ne),ee=Y(Q,!0);U(Q);var se=$(Q,2),ae=Y(se),X=Y(ae,!0);U(ae),U(se),U(ne),ge((J,fe)=>{_e(ee,J),_e(X,fe)},[()=>(K(c()),V(()=>m(c().start_time))),()=>(K(c()),V(()=>b(c().start_time)))]),te(G,ne)};me(h,G=>{i()&&G(y)})}var D=$(h,2),A=Y(D),M=Y(A),O=Y(M),T=Y(O);$t(T,()=>(K(At),K(c()),K(o()),V(()=>At(c().title||"",o())))),U(O),U(M);var C=$(M,2);{var p=G=>{var ne=li();te(G,ne)},v=G=>{var ne=ci(),Q=Y(ne);U(ne),ge((ee,se)=>_e(Q,`${ee??""} to ${se??""}`),[()=>(K(c()),V(()=>l(c().start_time))),()=>(K(c()),V(()=>l(c().end_time)))]),te(G,ne)};me(C,G=>{K(c()),V(()=>c().is_all_day)?G(p):G(v,!1)})}var P=$(C,2),I=Y(P);{var N=G=>{var ne=di(),Q=Qe(ne),ee=Y(Q,!0);U(Q);var se=$(Q,2);{var ae=X=>{var J=ui();te(X,J)};me(se,X=>{K(c()),V(()=>c().recurrence_rule||c()?.meta_data?.recurring_instance||c().location||c().description||c().attachments&&c().attachments.length>0)&&X(ae)})}ge((X,J)=>{et(Q,1,`badge rounded-pill bg-color-${X??""}`,"svelte-1rksp2z"),_e(ee,J)},[()=>(K(Tt),K(c()),V(()=>Tt(c()?.meta_data?.category)?.color_number)),()=>(K(Tt),K(c()),V(()=>Tt(c()?.meta_data?.category)?.label))]),te(G,ne)};me(I,G=>{K(c()),V(()=>c()?.meta_data?.category)&&G(N)})}var j=$(I,2);{var q=G=>{var ne=vi(),Q=Qe(ne),ee=$(Y(Q));U(Q);var se=$(Q,2);{var ae=X=>{var J=fi();te(X,J)};me(se,X=>{K(c()),V(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&X(ae)})}ge(X=>_e(ee,` ${X??""}`),[()=>(K(c()),V(()=>S(c().recurrence_rule)))]),te(G,ne)},B=G=>{var ne=Zt(),Q=Qe(ne);{var ee=se=>{var ae=hi(),X=$(Qe(ae),2);{var J=fe=>{var ue=mi();te(fe,ue)};me(X,fe=>{K(c()),V(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&fe(J)})}te(se,ae)};me(Q,se=>{K(c()),V(()=>c()?.meta_data?.recurring_instance)&&se(ee)},!0)}te(G,ne)};me(j,G=>{K(c()),V(()=>c().recurrence_rule)?G(q):G(B,!1)})}var L=$(j,2);{var H=G=>{var ne=yi(),Q=Qe(ne),ee=Y(Q);$t(ee,()=>(K(At),K(c()),K(o()),V(()=>At(c().location,o())))),U(Q);var se=$(Q,2);{var ae=X=>{var J=pi();te(X,J)};me(se,X=>{K(c()),V(()=>c().description||c().attachments&&c().attachments.length>0)&&X(ae)})}te(G,ne)};me(L,G=>{K(c()),V(()=>c().location)&&G(H)})}var le=$(L,2);{var re=G=>{var ne=gi(),Q=Y(ne);{var ee=ae=>{var X=ft("Hide");te(ae,X)},se=ae=>{var X=ft("Show");te(ae,X)};me(Q,ae=>{g()?ae(ee):ae(se,!1)})}rt(),U(ne),te(G,ne)};me(le,G=>{K(c()),V(()=>c().description||c().attachments&&c().attachments.length>0)&&G(re)})}U(P);var ie=$(P,2);{var de=G=>{var ne=ki(),Q=Y(ne);{var ee=fe=>{var ue=_i(),he=Y(ue);$t(he,()=>(K(ur),K(c()),K(o()),V(()=>ur(c().description,o())))),U(ue),te(fe,ue)};me(Q,fe=>{K(c()),V(()=>c().description)&&fe(ee)})}var se=$(Q,2);{var ae=fe=>{var ue=xi(),he=$(Y(ue),2);Vt(he,5,()=>(K(c()),V(()=>c().attachments)),we=>we.id,(we,ye)=>{var Se=Zt(),ze=Qe(Se);{var Ve=qe=>{var Ce=bi(),Ae=Y(Ce),Fe=Y(Ae);U(Ae);var We=$(Ae,2),Be=Y(We),tt=Y(Be,!0);U(Be),U(We),U(Ce),ge(()=>{Ee(Ae,"title",`Open ${d(ye),V(()=>d(ye).name)??""}`),Ee(Fe,"src",(d(ye),V(()=>d(ye).url))),Ee(Fe,"alt",(d(ye),V(()=>d(ye).name))),_e(tt,(d(ye),V(()=>d(ye).name)))}),xe("click",Ae,ir(()=>R(d(ye).url))),te(qe,Ce)},Ue=qe=>{var Ce=wi(),Ae=$(Y(Ce),2),Fe=Y(Ae,!0);U(Ae);var We=$(Ae,2),Be=Y(We);U(We),U(Ce),ge(tt=>{Ee(Ce,"title",`Open ${d(ye),V(()=>d(ye).name)??""}`),_e(Fe,(d(ye),V(()=>d(ye).name))),_e(Be,`(${tt??""})`)},[()=>(d(ye),V(()=>w(d(ye).size)))]),xe("click",Ce,ir(()=>R(d(ye).url))),te(qe,Ce)};me(ze,qe=>{d(ye),V(()=>W(d(ye).type))?qe(Ve):qe(Ue,!1)})}te(we,Se)}),U(he),U(ue),te(fe,ue)};me(se,fe=>{K(c()),V(()=>c().attachments&&c().attachments.length>0)&&fe(ae)})}var X=$(se,2);{var J=fe=>{var ue=Di(),he=$(Y(ue));{var we=ze=>{var Ve=ft();ge(()=>_e(Ve,d(a))),te(ze,Ve)};me(he,ze=>{d(a)&&ze(we)})}var ye=$(he,2);{var Se=ze=>{var Ve=Zt(),Ue=Qe(Ve);{var qe=Ae=>{var Fe=ft();ge(()=>_e(Fe,`by ${d(u)??""}`)),te(Ae,Fe)},Ce=Ae=>{var Fe=ft();ge(()=>_e(Fe,`by ${d(u)??""}`)),te(Ae,Fe)};me(Ue,Ae=>{d(a)?Ae(qe):Ae(Ce,!1)})}te(ze,Ve)};me(ye,ze=>{d(u)&&ze(Se)})}U(ue),te(fe,ue)};me(X,fe=>{d(f)&&fe(J)})}U(ne),te(G,ne)};me(ie,G=>{g()&&G(de)})}U(A);var be=$(A,2);{var De=G=>{var ne=Ei(),Q=Y(ne);U(ne),ge(()=>{Ee(Q,"src",(d(n),V(()=>d(n).url))),Ee(Q,"alt",(d(n),V(()=>d(n).name)))}),te(G,ne)};me(be,G=>{d(n)&&G(De)})}U(D),U(x),ge(()=>{et(x,1,Ia(d(_)),"svelte-1rksp2z"),Dn(x,d(t)?"cursor: pointer;":"")}),xe("keydown",x,F),xe("click",x,k),te(s,x),at()}var Ai=oe('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function Il(s,e){nt(e,!1);const n=()=>bn(a,"$weeksExpanded",t),[t,r]=wn(),{stores:{weeksExpanded:a}}=Un();function u(){pa(a,!n())}ot();var f=Ai(),c=Y(f),g=$(c);U(f),ge(()=>{et(c,1,`bi ${n()?"bi-chevron-up":"bi-chevron-down"}`),_e(g,` ${n()?"Collapse All":"Expand All"}`)}),xe("click",f,u),te(s,f),at(),r()}var Mi=oe('<div class="invalid-feedback d-block"> </div>'),Ii=oe("<option> </option>"),Ci=oe('<div class="invalid-feedback d-block"> </div>'),Ri=oe('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function Fi(s,e){nt(e,!1);const n=ve(),t=ve();let r=pe(e,"title",12,""),a=pe(e,"eventType",12,"calendar_event"),u=pe(e,"category",12,""),f=pe(e,"isPublic",12,!0),c=pe(e,"description",12,""),g=pe(e,"disabled",8,!1),i=pe(e,"name",8,"event"),o=pe(e,"validationErrors",24,()=>({})),l=ve(),m=ve();function b(){d(l)?.focus()}function k(){d(m)?.focus()}Oe(()=>K(o()),()=>{z(n,!!o().title)}),Oe(()=>K(o()),()=>{z(t,!!o().description)}),Yt();var F={focusTitle:b,focusDescription:k};ot();var w=Ri(),W=Y(w),R=$(Y(W),2);Ze(R);let E;Mt(R,q=>z(l,q),()=>d(l));var S=$(R,2);{var _=q=>{var B=Mi(),L=Y(B,!0);U(B),ge(()=>_e(L,(K(o()),V(()=>o().title)))),te(q,B)};me(S,q=>{K(o()),V(()=>o().title)&&q(_)})}rt(2),U(W);var x=$(W,2),h=$(Y(x),2);ge(()=>{a(),Er(()=>{g()})});var y=Y(h);y.value=y.__value="calendar_event";var D=$(y);D.value=D.__value="announcement",U(h),U(x);var A=$(x,2),M=$(Y(A),2);ge(()=>{u(),Er(()=>{g()})}),Vt(M,5,()=>cr,xn,(q,B)=>{var L=Ii(),H=Y(L,!0);U(L);var le={};ge(()=>{_e(H,(d(B),V(()=>d(B).label))),le!==(le=(d(B),V(()=>d(B).key)))&&(L.value=(L.__value=(d(B),V(()=>d(B).key)))??"")}),te(q,L)}),U(M),U(A);var O=$(A,2),T=$(Y(O),2),C=Y(T);Ze(C);var p=$(C,2);U(T),rt(2),U(O);var v=$(O,2),P=$(Y(v),2);ma(P);let I;Mt(P,q=>z(m,q),()=>d(m));var N=$(P,2);{var j=q=>{var B=Ci(),L=Y(B,!0);U(B),ge(()=>_e(L,(K(o()),V(()=>o().description)))),te(q,B)};me(N,q=>{K(o()),V(()=>o().description)&&q(j)})}return rt(2),U(v),U(w),ge(()=>{Ee(R,"name",`${i()??""}-title`),E=et(R,1,"form-control",null,E,{"is-invalid":d(n)}),R.disabled=g(),h.disabled=g(),M.disabled=g(),Ee(C,"id",`${i()??""}-is-public`),C.disabled=g(),Ee(p,"for",`${i()??""}-is-public`),Ee(P,"name",`${i()??""}-description`),I=et(P,1,"form-control",null,I,{"is-invalid":d(t)}),P.disabled=g()}),xe("focus",R,()=>d(l).select()),pt(R,r),Tr(h,a),Tr(M,u),Pr(C,f),xe("focus",P,()=>d(m).select()),pt(P,c),te(s,w),Bt(e,"focusTitle",b),Bt(e,"focusDescription",k),at(F)}var Oi=oe('<div class="invalid-feedback d-block"> </div>'),Pi=oe('<div class="invalid-feedback d-block"> </div>'),Si=oe('<div class="invalid-feedback d-block"> </div>'),Ui=oe('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Ni=oe('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Yi(s,e){nt(e,!1);const n=ve(),t=ve(),r=ve();let a=pe(e,"dateInput",12,""),u=pe(e,"startTimeInput",12,""),f=pe(e,"endTimeInput",12,""),c=pe(e,"isAllDay",12,!1),g=pe(e,"disabled",8,!1),i=pe(e,"name",8,"event"),o=pe(e,"validationErrors",24,()=>({})),l=ve(),m=ve(),b=ve();function k(){d(l)?.focus()}function F(){d(m)?.focus()}function w(){d(b)?.focus()}Oe(()=>K(o()),()=>{z(n,!!o().dateInput)}),Oe(()=>K(o()),()=>{z(t,!!o().startTimeInput)}),Oe(()=>K(o()),()=>{z(r,!!o().endTimeInput)}),Yt();var W={focusDate:k,focusStartTime:F,focusEndTime:w};ot();var R=Ni(),E=Y(R),S=$(Y(E),2);Ze(S);let _;Mt(S,C=>z(l,C),()=>d(l));var x=$(S,2);{var h=C=>{var p=Oi(),v=Y(p,!0);U(p),ge(()=>_e(v,(K(o()),V(()=>o().dateInput)))),te(C,p)};me(x,C=>{K(o()),V(()=>o().dateInput)&&C(h)})}U(E);var y=$(E,2),D=Y(y),A=Y(D);Ze(A);var M=$(A,2);U(D),U(y);var O=$(y,2);{var T=C=>{var p=Ui(),v=Y(p),P=$(Y(v),2);Ze(P),Ee(P,"step",900);let I;Mt(P,re=>z(m,re),()=>d(m));var N=$(P,2);{var j=re=>{var ie=Pi(),de=Y(ie,!0);U(ie),ge(()=>_e(de,(K(o()),V(()=>o().startTimeInput)))),te(re,ie)};me(N,re=>{K(o()),V(()=>o().startTimeInput)&&re(j)})}U(v);var q=$(v,2),B=$(Y(q),2);Ze(B),Ee(B,"step",900);let L;Mt(B,re=>z(b,re),()=>d(b));var H=$(B,2);{var le=re=>{var ie=Si(),de=Y(ie,!0);U(ie),ge(()=>_e(de,(K(o()),V(()=>o().endTimeInput)))),te(re,ie)};me(H,re=>{K(o()),V(()=>o().endTimeInput)&&re(le)})}U(q),U(p),ge(()=>{Ee(P,"name",`${i()??""}-start-time`),I=et(P,1,"form-control",null,I,{"is-invalid":d(t)}),P.disabled=g(),Ee(B,"name",`${i()??""}-end-time`),L=et(B,1,"form-control",null,L,{"is-invalid":d(r)}),B.disabled=g()}),xe("focus",P,()=>d(m).select()),pt(P,u),xe("focus",B,()=>d(b).select()),pt(B,f),te(C,p)};me(O,C=>{c()||C(T)})}return U(R),ge(()=>{Ee(S,"name",`${i()??""}-date`),_=et(S,1,"form-control",null,_,{"is-invalid":d(n)}),S.disabled=g(),Ee(A,"id",`${i()??""}-all-day-check`),A.disabled=g(),Ee(M,"for",`${i()??""}-all-day-check`)}),xe("focus",S,()=>d(l).select()),pt(S,a),Pr(A,c),te(s,R),Bt(e,"focusDate",k),Bt(e,"focusStartTime",F),Bt(e,"focusEndTime",w),at(W)}var Li=oe('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Hi=oe('<div class="invalid-feedback d-block"> </div>'),zi=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Wi=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),qi=oe('<div class="invalid-feedback d-block"> </div>'),Bi=oe('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),$i=oe('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function Qi(s,e){nt(e,!1);const n=[],t=[];let r=pe(e,"isRecurring",12,!1),a=pe(e,"recurrenceFrequency",12,"weekly"),u=pe(e,"recurrenceInterval",12,1),f=pe(e,"recurringDays",28,()=>[]),c=pe(e,"recurrenceEndDate",12,""),g=pe(e,"monthlyType",12,"date"),i=pe(e,"dateInput",8,""),o=pe(e,"disabled",8,!1),l=pe(e,"name",8,"event"),m=pe(e,"validationErrors",24,()=>({}));const b=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function k(x){if(!x)return"Same weekday of the month";try{const h=new Date(x),y=Ie(h,"EEEE"),D=Math.ceil(h.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][D]} ${y} of the month`}catch{return"Same weekday of the month"}}function F(x){if(!x)return 1;try{return x.split("-").map(Number)[2]}catch{return 1}}ot();var w=$i(),W=Y(w),R=Y(W);Ze(R);var E=$(R,2);U(W);var S=$(W,2);{var _=x=>{var h=Bi(),y=Y(h),D=$(Y(y),2),A=$(Y(D),2),M=Y(A);Ze(M),U(A);var O=$(A,2),T=Y(O);ge(()=>{a(),Er(()=>{o(),u()})});var C=Y(T),p=Y(C,!0);U(C),C.value=C.__value="daily";var v=$(C),P=Y(v,!0);U(v),v.value=v.__value="weekly";var I=$(v),N=Y(I,!0);U(I),I.value=I.__value="monthly";var j=$(I),q=Y(j,!0);U(j),j.value=j.__value="yearly",U(T),U(O),U(D),U(y);var B=$(y,2);{var L=ne=>{var Q=zi(),ee=$(Y(Q),2);Vt(ee,5,()=>b,xn,(X,J)=>{var fe=Li(),ue=Y(fe);Ze(ue);var he,we=$(ue,2),ye=Y(we,!0);U(we),U(fe),ge(()=>{Ee(ue,"id",`${l()??""}-day-${d(J),V(()=>d(J).value)??""}`),ue.disabled=o(),he!==(he=(d(J),V(()=>d(J).value)))&&(ue.value=(ue.__value=(d(J),V(()=>d(J).value)))??""),Ee(we,"for",`${l()??""}-day-${d(J),V(()=>d(J).value)??""}`),_e(ye,(d(J),V(()=>d(J).label)))}),_r(n,[],ue,()=>(d(J),V(()=>d(J).value),f()),f),te(X,fe)}),U(ee);var se=$(ee,2);{var ae=X=>{var J=Hi(),fe=Y(J,!0);U(J),ge(()=>_e(fe,(K(m()),V(()=>m().recurringDays)))),te(X,J)};me(se,X=>{K(m()),V(()=>m().recurringDays)&&X(ae)})}rt(2),U(Q),te(ne,Q)};me(B,ne=>{a()==="weekly"&&ne(L)})}var H=$(B,2);{var le=ne=>{var Q=Wi(),ee=$(Y(Q),2),se=Y(ee),ae=Y(se);Ze(ae),ae.value=ae.__value="date";var X=$(ae,2),J=Y(X);U(X),U(se);var fe=$(se,2),ue=Y(fe);Ze(ue),ue.value=ue.__value="weekday";var he=$(ue,2),we=Y(he);U(he),U(fe),U(ee),U(Q),ge((ye,Se)=>{Ee(ae,"id",`${l()??""}-monthly-date`),ae.disabled=o(),Ee(X,"for",`${l()??""}-monthly-date`),_e(J,`On day ${ye??""} of the month`),Ee(ue,"id",`${l()??""}-monthly-weekday`),ue.disabled=o(),Ee(he,"for",`${l()??""}-monthly-weekday`),_e(we,`On the ${Se??""}`)},[()=>(K(i()),V(()=>F(i()))),()=>(K(i()),V(()=>k(i())))]),_r(t,[],ae,g,g),_r(t,[],ue,g,g),te(ne,Q)};me(H,ne=>{a()==="monthly"&&ne(le)})}var re=$(H,2),ie=Y(re),de=$(ie,2);Ze(de);let be;var De=$(de,2);{var G=ne=>{var Q=qi(),ee=Y(Q,!0);U(Q),ge(()=>_e(ee,(K(m()),V(()=>m().recurrenceEndDate)))),te(ne,Q)};me(De,ne=>{K(m()),V(()=>m().recurrenceEndDate)&&ne(G)})}rt(2),U(re),U(h),ge(()=>{M.disabled=o(),T.disabled=o(),_e(p,u()===1?"day":"days"),_e(P,u()===1?"week":"weeks"),_e(N,u()===1?"month":"months"),_e(q,u()===1?"year":"years"),Ee(ie,"for",`${l()??""}-recurrence-end-date`),be=et(de,1,"form-control",null,be,{"is-invalid":!!m().recurrenceEndDate}),Ee(de,"id",`${l()??""}-recurrence-end-date`),de.disabled=o()}),pt(M,u),Tr(T,a),pt(de,c),te(x,h)};me(S,x=>{r()&&x(_)})}U(w),ge(()=>{Ee(R,"id",`${l()??""}-is-recurring`),R.disabled=o(),Ee(E,"for",`${l()??""}-is-recurring`)}),Pr(R,r),te(s,w),at()}var ji=oe('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function Gi(s,e){nt(e,!1);let n=pe(e,"value",12,""),t=pe(e,"disabled",8,!1),r=pe(e,"name",8,"location"),a=ve();function u(){d(a)?.focus()}var f={focus:u},c=ji(),g=$(Y(c),2);return Ze(g),Mt(g,i=>z(a,i),()=>d(a)),rt(2),U(c),ge(()=>{Ee(g,"name",r()),g.disabled=t()}),xe("focus",g,()=>d(a).select()),pt(g,n),te(s,c),Bt(e,"focus",u),at(f)}var Zi=oe('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Ki=oe('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Vi=oe('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),Xi=oe('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Ji=oe('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),eo=oe('<div class="d-flex flex-column gap-2 mb-2"></div>'),to=oe('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function ro(s,e){nt(e,!1);let n=pe(e,"attachments",24,()=>[]),t=pe(e,"disabled",8,!1),r=pe(e,"uploadingFile",8,!1);const a=Fa();let u=ve(),f=ve(null),c=ve("");const g=x=>{if(x===0)return"0 Bytes";const h=1024,y=["Bytes","KB","MB"],D=Math.floor(Math.log(x)/Math.log(h));return Math.round(x/Math.pow(h,D)*100)/100+" "+y[D]},i=x=>{const h=x.target;h.files&&h.files[0]&&(a("upload",h.files[0]),h.value="")},o=x=>{z(f,x.id),z(c,x.name)},l=x=>{d(c).trim()&&d(c)!==x.name&&a("edit",{attachment:x,newName:d(c).trim()}),z(f,null),z(c,"")},m=()=>{z(f,null),z(c,"")},b=x=>{a("remove",x)};ot();var k=to(),F=$(Y(k),2);{var w=x=>{var h=eo();Vt(h,5,n,y=>y.id,(y,D)=>{var A=Ji(),M=Y(A),O=Y(M);{var T=I=>{var N=Zi(),j=Qe(N);Ze(j);var q=$(j,2),B=Y(q,!0);U(q),ge(L=>{j.disabled=t(),_e(B,L)},[()=>(d(D),V(()=>g(d(D).size)))]),pt(j,()=>d(c),L=>z(c,L)),xe("keydown",j,L=>{L.key==="Enter"&&l(d(D)),L.key==="Escape"&&m()}),te(I,N)},C=I=>{var N=Ki(),j=Qe(N),q=Y(j,!0);U(j);var B=$(j,2),L=Y(B,!0);U(B),ge(H=>{_e(q,(d(D),V(()=>d(D).name))),_e(L,H)},[()=>(d(D),V(()=>g(d(D).size)))]),te(I,N)};me(O,I=>{d(f),d(D),V(()=>d(f)===d(D).id)?I(T):I(C,!1)})}U(M);var p=$(M,2);{var v=I=>{var N=Vi(),j=Qe(N),q=$(j,2);ge(()=>{j.disabled=t(),q.disabled=t()}),xe("click",j,()=>l(d(D))),xe("click",q,m),te(I,N)},P=I=>{var N=Xi(),j=Qe(N),q=$(j,2);ge(()=>{j.disabled=t(),q.disabled=t()}),xe("click",j,()=>o(d(D))),xe("click",q,()=>b(d(D))),te(I,N)};me(p,I=>{d(f),d(D),V(()=>d(f)===d(D).id)?I(v):I(P,!1)})}U(A),te(y,A)}),U(h),te(x,h)};me(F,x=>{K(n()),V(()=>n().length>0)&&x(w)})}var W=$(F,2),R=Y(W),E=Y(R);Mt(E,x=>z(u,x),()=>d(u));var S=$(E,2);{var _=x=>{Tn(x,{size:"sm"})};me(S,x=>{r()&&x(_)})}U(R),rt(2),U(W),U(k),ge(()=>E.disabled=t()||r()),xe("change",E,i),te(s,k),at()}var no=oe('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function ao(s,e){nt(e,!1);const n=ve();let t=pe(e,"eventTitle",8),r=pe(e,"occurrenceDate",8),a=pe(e,"callback",8);function u(A){a()(A)}function f(){a()(null)}Oe(()=>(K(r()),Ie),()=>{z(n,(()=>{try{const[A,M,O]=r().split("-").map(Number),T=new Date(A,M-1,O);return Ie(T,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),Yt(),ot();var c=no(),g=Y(c),i=Y(g),o=Y(i),l=$(Y(o),2);U(o);var m=$(o,2),b=Y(m),k=Y(b),F=Y(k);U(k),rt(),U(b);var w=$(b,4),W=Y(w),R=$(Y(W),2),E=Y(R,!0);U(R),U(W);var S=$(W,2),_=$(Y(S),2),x=Y(_);U(_),U(S);var h=$(S,2);U(w),U(m);var y=$(m,2),D=Y(y);U(y),U(i),U(g),U(c),ge(()=>{_e(F,`"${t()??""}"`),_e(E,d(n)),_e(x,`From ${d(n)??""} onwards`)}),xe("click",l,f),xe("click",W,()=>u("single")),xe("click",S,()=>u("future")),xe("click",h,()=>u("all")),xe("click",D,f),te(s,c),at()}var so=oe('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function io(s,e){nt(e,!1);const n=ve();let t=pe(e,"eventTitle",8),r=pe(e,"occurrenceDate",8),a=pe(e,"callback",8);function u(A){a()(A)}function f(){a()(null)}Oe(()=>(K(r()),Ie),()=>{z(n,(()=>{try{const[A,M,O]=r().split("-").map(Number),T=new Date(A,M-1,O);return Ie(T,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),Yt(),ot();var c=so(),g=Y(c),i=Y(g),o=Y(i),l=$(Y(o),2);U(o);var m=$(o,2),b=Y(m),k=Y(b),F=Y(k);U(k),rt(),U(b);var w=$(b,4),W=Y(w),R=$(Y(W),2),E=Y(R,!0);U(R),U(W);var S=$(W,2),_=$(Y(S),2),x=Y(_);U(_),U(S);var h=$(S,2);U(w),U(m);var y=$(m,2),D=Y(y);U(y),U(i),U(g),U(c),ge(()=>{_e(F,`"${t()??""}"`),_e(E,d(n)),_e(x,`From ${d(n)??""} onwards`)}),xe("click",l,f),xe("click",W,()=>u("single")),xe("click",S,()=>u("future")),xe("click",h,()=>u("all")),xe("click",D,f),te(s,c),at()}var oo=oe('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function lo(s,e){nt(e,!1);let n=pe(e,"title",8,"Clone Event"),t=pe(e,"message",8,"Select a date for the cloned event:"),r=pe(e,"confirmButtonLabel",8,"Clone"),a=pe(e,"confirmButtonCSS",8,"btn-primary"),u=pe(e,"rejectButtonLabel",8,"Cancel"),f=pe(e,"rejectButtonCSS",8,"btn-secondary"),c=pe(e,"defaultDate",8,void 0),g=pe(e,"callback",8,()=>{}),i=ve(),o=ve(c()||Ie(new Date,"yyyy-MM-dd")),l=!1,m;Oa(()=>{const p=window.bootstrap.Modal;new p(d(i)).show(),d(i).addEventListener("hidden.bs.modal",()=>{l?g()(!0,m):g()(!1)})});function b(){l=!0,m=d(o),window.bootstrap.Modal.getInstance(d(i)).hide()}function k(){l=!1,window.bootstrap.Modal.getInstance(d(i)).hide()}ot();var F=oo(),w=Y(F),W=Y(w),R=Y(W),E=Y(R),S=Y(E,!0);U(E),rt(2),U(R);var _=$(R,2),x=Y(_),h=Y(x,!0);U(x);var y=$(x,2),D=$(Y(y),2);Ze(D),U(y),U(_);var A=$(_,2),M=Y(A),O=Y(M,!0);U(M);var T=$(M,2),C=Y(T,!0);U(T),U(A),U(W),U(w),U(F),Mt(F,p=>z(i,p),()=>d(i)),ge(()=>{_e(S,n()),_e(h,t()),et(M,1,`btn ${f()??""}`),_e(O,u()),et(T,1,`btn ${a()??""}`),_e(C,r())}),pt(D,()=>d(o),p=>z(o,p)),xe("click",M,k),xe("click",T,b),te(s,F),at()}let ar;function co(s){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const n={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};s.title&&(n.title=s.title),s.message&&(n.message=s.message),s.confirmButtonLabel&&(n.confirmButtonLabel=s.confirmButtonLabel),s.confirmButtonCSS&&(n.confirmButtonCSS=s.confirmButtonCSS),s.rejectButtonLabel&&(n.rejectButtonLabel=s.rejectButtonLabel),s.rejectButtonCSS&&(n.rejectButtonCSS=s.rejectButtonCSS),s.defaultDate&&(n.defaultDate=s.defaultDate),n.callback=(t,r)=>{console.log("Clone confirm result:",t,r),ar&&(ga(ar),ar=void 0),e.remove(),s.callback&&typeof s.callback=="function"&&s.callback(t,r)},ar=ya(lo,{target:e,props:n})}const uo=Sa().shape({title:ct().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ct().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ct().required("Category is required"),description:ct().nullable().max(1e4,"Description is too long"),location:ct().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ct().when("event_type",{is:"calendar_event",then:s=>s.required("Date is required"),otherwise:s=>s.nullable()}),startTimeInput:ct().when(["event_type","is_all_day"],{is:(s,e)=>s==="calendar_event"&&!e,then:s=>s.required("Start time is required"),otherwise:s=>s.nullable()}),endTimeInput:ct().when(["event_type","is_all_day"],{is:(s,e)=>s==="calendar_event"&&!e,then:s=>s.required("End time is required"),otherwise:s=>s.nullable()}),isRecurring:an(),recurrenceFrequency:ct().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Ua().of(Na().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(s,e)=>s&&e==="weekly",then:s=>s.min(1,"Select at least one day for weekly recurring events").required(),otherwise:s=>s.nullable()}),hasEndDate:an(),recurrenceEndDate:ct().when(["isRecurring","hasEndDate"],{is:(s,e)=>s&&e,then:s=>s.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const n=new Date(e),t=new Date;return t.setHours(0,0,0,0),n>=t}),otherwise:s=>s.nullable()})});function fo(){const s=Et({});async function e(r){try{return await uo.validate(r,{abortEarly:!1}),s.set({}),!0}catch(a){if(a instanceof Ya){const u={};return a.inner.forEach(f=>{f.path&&(u[f.path]=f.message)}),s.set(u),!1}return!1}}function n(){s.set({})}function t(){return Object.values(s).filter(a=>a.length>0)}return{validationErrors:s,validate:e,clearErrors:n,getErrorMessages:t}}function qr(s){const{frequency:e,interval:n,recurringDays:t,recurrenceEndDate:r,hasEndDate:a,monthlyType:u,startTime:f}=s,c={0:Me.SU,1:Me.MO,2:Me.TU,3:Me.WE,4:Me.TH,5:Me.FR,6:Me.SA},g={daily:Me.DAILY,weekly:Me.WEEKLY,monthly:Me.MONTHLY,yearly:Me.YEARLY},i=new Date(f),o=yt(i,$e),l=new Date(o);l.setHours(12,0,0,0);const m=It(l,$e),b={freq:g[e],interval:n,dtstart:m};if(a&&r){const F=new Date(`${r}T23:59:59.999`),w=It(F,$e);b.until=w}if(e==="weekly"&&t.length>0)b.byweekday=t.map(F=>c[F]);else if(e==="monthly")if(u==="date")b.bymonthday=[l.getDate()];else{const F=Math.ceil(l.getDate()/7),w=l.getDay(),W=[Me.SU,Me.MO,Me.TU,Me.WE,Me.TH,Me.FR,Me.SA];b.byweekday=[W[w].nth(F)]}else e==="yearly"&&(b.bymonth=[l.getMonth()+1],b.bymonthday=[l.getDate()]);return{recurrence_rule:new Me(b).toString(),recurrence_end_date:a&&r?b.until.toISOString():void 0}}function Nn(s,e){try{const t=Me.fromString(s).origOptions,r={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Me.DAILY]:"daily",[Me.WEEKLY]:"weekly",[Me.MONTHLY]:"monthly",[Me.YEARLY]:"yearly"},u=(t.freq!==void 0?a[t.freq]:null)||"weekly",f=t.interval||1;let c=[],g="date";t.byweekday&&u==="weekly"&&(c=(Array.isArray(t.byweekday)?t.byweekday:[t.byweekday]).map(l=>{const m=typeof l=="number"?l:l.weekday;return r[m]})),u==="monthly"&&(t.bymonthday&&Array.isArray(t.bymonthday)&&t.bymonthday.length>0?g="date":t.byweekday&&(g="weekday"));let i="",o=!1;if(e){o=!0;const l=yt(new Date(e),$e);i=Ie(l,"yyyy-MM-dd")}else if(t.until){o=!0;const l=yt(t.until,$e);i=Ie(l,"yyyy-MM-dd")}return{frequency:u,interval:f,recurringDays:c,recurrenceEndDate:i,hasEndDate:o,monthlyType:g}}catch(n){return console.error("Failed to parse recurrence rule:",n),null}}function Yn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Ln(){return{generateRecurrenceRule:qr,parseRecurrenceRule:Nn,clearRecurrence:Yn}}const Fr=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Yn,generateRecurrenceRule:qr,parseRecurrenceRule:Nn,useRecurrenceLogic:Ln},Symbol.toStringTag,{value:"Module"}));function vo(s,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(t){if(t!=="default"&&!(t in s)){var r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return n[t]}})}})}),Object.freeze(s)}function Hn(s,e){return new Promise(function(n,t){let r;return mo(s).then(function(a){try{return r=a,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(u){return t(u)}},t)})}const mo=s=>new Promise((e,n)=>{const t=new FileReader;t.addEventListener("load",({target:{result:r}})=>{const a=new DataView(r);let u=0;if(a.getUint16(u)!==65496)return n("not a valid JPEG");for(u+=2;;){const f=a.getUint16(u);if(f===65498)break;const c=a.getUint16(u+2);if(f===65505&&a.getUint32(u+4)===1165519206){const g=u+10;let i;switch(a.getUint16(g)){case 18761:i=!0;break;case 19789:i=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(g+2,i)!==42)return n("TIFF header contains invalid version");const o=a.getUint32(g+4,i),l=g+o+2+12*a.getUint16(g+o,i);for(let m=g+o+2;m<l;m+=12)if(a.getUint16(m,i)==274){if(a.getUint16(m+2,i)!==3)return n("Orientation data type is invalid");if(a.getUint32(m+4,i)!==1)return n("Orientation data count is invalid");a.setUint16(m+8,1,i);break}return e(r.slice(u,u+2+c))}u+=2+c}return e(new Blob)}),t.readAsArrayBuffer(s)});var dr={},ho={get exports(){return dr},set exports(s){dr=s}};(function(s){var e,n,t={};ho.exports=t,t.parse=function(r,a){for(var u=t.bin.readUshort,f=t.bin.readUint,c=0,g={},i=new Uint8Array(r),o=i.length-4;f(i,o)!=101010256;)o--;c=o,c+=4;var l=u(i,c+=4);u(i,c+=2);var m=f(i,c+=2),b=f(i,c+=4);c+=4,c=b;for(var k=0;k<l;k++){f(i,c),c+=4,c+=4,c+=4,f(i,c+=4),m=f(i,c+=4);var F=f(i,c+=4),w=u(i,c+=4),W=u(i,c+2),R=u(i,c+4);c+=6;var E=f(i,c+=8);c+=4,c+=w+W+R,t._readLocal(i,E,g,m,F,a)}return g},t._readLocal=function(r,a,u,f,c,g){var i=t.bin.readUshort,o=t.bin.readUint;o(r,a),i(r,a+=4),i(r,a+=2);var l=i(r,a+=2);o(r,a+=2),o(r,a+=4),a+=4;var m=i(r,a+=8),b=i(r,a+=2);a+=2;var k=t.bin.readUTF8(r,a,m);if(a+=m,a+=b,g)u[k]={size:c,csize:f};else{var F=new Uint8Array(r.buffer,a);if(l==0)u[k]=new Uint8Array(F.buffer.slice(a,a+f));else{if(l!=8)throw"unknown compression method: "+l;var w=new Uint8Array(c);t.inflateRaw(F,w),u[k]=w}}},t.inflateRaw=function(r,a){return t.F.inflate(r,a)},t.inflate=function(r,a){return r[0],r[1],t.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),a)},t.deflate=function(r,a){a==null&&(a={level:6});var u=0,f=new Uint8Array(50+Math.floor(1.1*r.length));f[u]=120,f[u+1]=156,u+=2,u=t.F.deflateRaw(r,f,u,a.level);var c=t.adler(r,0,r.length);return f[u+0]=c>>>24&255,f[u+1]=c>>>16&255,f[u+2]=c>>>8&255,f[u+3]=c>>>0&255,new Uint8Array(f.buffer,0,u+4)},t.deflateRaw=function(r,a){a==null&&(a={level:6});var u=new Uint8Array(50+Math.floor(1.1*r.length)),f=t.F.deflateRaw(r,u,f,a.level);return new Uint8Array(u.buffer,0,f)},t.encode=function(r,a){a==null&&(a=!1);var u=0,f=t.bin.writeUint,c=t.bin.writeUshort,g={};for(var i in r){var o=!t._noNeed(i)&&!a,l=r[i],m=t.crc.crc(l,0,l.length);g[i]={cpr:o,usize:l.length,crc:m,file:o?t.deflateRaw(l):l}}for(var i in g)u+=g[i].file.length+30+46+2*t.bin.sizeUTF8(i);u+=22;var b=new Uint8Array(u),k=0,F=[];for(var i in g){var w=g[i];F.push(k),k=t._writeHeader(b,k,i,w,0)}var W=0,R=k;for(var i in g)w=g[i],F.push(k),k=t._writeHeader(b,k,i,w,1,F[W++]);var E=k-R;return f(b,k,101010256),k+=4,c(b,k+=4,W),c(b,k+=2,W),f(b,k+=2,E),f(b,k+=4,R),k+=4,k+=2,b.buffer},t._noNeed=function(r){var a=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},t._writeHeader=function(r,a,u,f,c,g){var i=t.bin.writeUint,o=t.bin.writeUshort,l=f.file;return i(r,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),o(r,a,20),o(r,a+=2,0),o(r,a+=2,f.cpr?8:0),i(r,a+=2,0),i(r,a+=4,f.crc),i(r,a+=4,l.length),i(r,a+=4,f.usize),o(r,a+=4,t.bin.sizeUTF8(u)),o(r,a+=2,0),a+=2,c==1&&(a+=2,a+=2,i(r,a+=6,g),a+=4),a+=t.bin.writeUTF8(r,a,u),c==0&&(r.set(l,a),a+=l.length),a},t.crc={table:function(){for(var r=new Uint32Array(256),a=0;a<256;a++){for(var u=a,f=0;f<8;f++)1&u?u=3988292384^u>>>1:u>>>=1;r[a]=u}return r}(),update:function(r,a,u,f){for(var c=0;c<f;c++)r=t.crc.table[255&(r^a[u+c])]^r>>>8;return r},crc:function(r,a,u){return 4294967295^t.crc.update(4294967295,r,a,u)}},t.adler=function(r,a,u){for(var f=1,c=0,g=a,i=a+u;g<i;){for(var o=Math.min(g+5552,i);g<o;)c+=f+=r[g++];f%=65521,c%=65521}return c<<16|f},t.bin={readUshort:function(r,a){return r[a]|r[a+1]<<8},writeUshort:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255},readUint:function(r,a){return 16777216*r[a+3]+(r[a+2]<<16|r[a+1]<<8|r[a])},writeUint:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255,r[a+2]=u>>16&255,r[a+3]=u>>24&255},readASCII:function(r,a,u){for(var f="",c=0;c<u;c++)f+=String.fromCharCode(r[a+c]);return f},writeASCII:function(r,a,u){for(var f=0;f<u.length;f++)r[a+f]=u.charCodeAt(f)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,a,u){for(var f,c="",g=0;g<u;g++)c+="%"+t.bin.pad(r[a+g].toString(16));try{f=decodeURIComponent(c)}catch{return t.bin.readASCII(r,a,u)}return f},writeUTF8:function(r,a,u){for(var f=u.length,c=0,g=0;g<f;g++){var i=u.charCodeAt(g);if(!(4294967168&i))r[a+c]=i,c++;else if(!(4294965248&i))r[a+c]=192|i>>6,r[a+c+1]=128|i>>0&63,c+=2;else if(!(4294901760&i))r[a+c]=224|i>>12,r[a+c+1]=128|i>>6&63,r[a+c+2]=128|i>>0&63,c+=3;else{if(4292870144&i)throw"e";r[a+c]=240|i>>18,r[a+c+1]=128|i>>12&63,r[a+c+2]=128|i>>6&63,r[a+c+3]=128|i>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var a=r.length,u=0,f=0;f<a;f++){var c=r.charCodeAt(f);if(!(4294967168&c))u++;else if(!(4294965248&c))u+=2;else if(!(4294901760&c))u+=3;else{if(4292870144&c)throw"e";u+=4}}return u}},t.F={},t.F.deflateRaw=function(r,a,u,f){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],g=t.F.U,i=t.F._goodIndex;t.F._hash;var o=t.F._putsE,l=0,m=u<<3,b=0,k=r.length;if(f==0){for(;l<k;)o(a,m,l+(A=Math.min(65535,k-l))==k?1:0),m=t.F._copyExact(r,l,A,a,m+8),l+=A;return m>>>3}var F=g.lits,w=g.strt,W=g.prev,R=0,E=0,S=0,_=0,x=0,h=0;for(k>2&&(w[h=t.F._hash(r,0)]=0),l=0;l<k;l++){if(x=h,l+1<k-2){h=t.F._hash(r,l+1);var y=l+1&32767;W[y]=w[h],w[h]=y}if(b<=l){(R>14e3||E>26697)&&k-l>100&&(b<l&&(F[R]=l-b,R+=2,b=l),m=t.F._writeBlock(l==k-1||b==k?1:0,F,R,_,r,S,l-S,a,m),R=E=_=0,S=l);var D=0;l<k-2&&(D=t.F._bestMatch(r,l,W,x,Math.min(c[2],k-l),c[3]));var A=D>>>16,M=65535&D;if(D!=0){M=65535&D;var O=i(A=D>>>16,g.of0);g.lhst[257+O]++;var T=i(M,g.df0);g.dhst[T]++,_+=g.exb[O]+g.dxb[T],F[R]=A<<23|l-b,F[R+1]=M<<16|O<<8|T,R+=2,b=l+A}else g.lhst[r[l]]++;E++}}for(S==l&&r.length!=0||(b<l&&(F[R]=l-b,R+=2,b=l),m=t.F._writeBlock(1,F,R,_,r,S,l-S,a,m),R=0,E=0,R=E=_=0,S=l);7&m;)m++;return m>>>3},t.F._bestMatch=function(r,a,u,f,c,g){var i=32767&a,o=u[i],l=i-o+32768&32767;if(o==i||f!=t.F._hash(r,a-l))return 0;for(var m=0,b=0,k=Math.min(32767,a);l<=k&&--g!=0&&o!=i;){if(m==0||r[a+m]==r[a+m-l]){var F=t.F._howLong(r,a,l);if(F>m){if(b=l,(m=F)>=c)break;l+2<F&&(F=l+2);for(var w=0,W=0;W<F-2;W++){var R=a-l+W+32768&32767,E=R-u[R]+32768&32767;E>w&&(w=E,o=R)}}}l+=(i=o)-(o=u[i])+32768&32767}return m<<16|b},t.F._howLong=function(r,a,u){if(r[a]!=r[a-u]||r[a+1]!=r[a+1-u]||r[a+2]!=r[a+2-u])return 0;var f=a,c=Math.min(r.length,a+258);for(a+=3;a<c&&r[a]==r[a-u];)a++;return a-f},t.F._hash=function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<4)&65535},t.saved=0,t.F._writeBlock=function(r,a,u,f,c,g,i,o,l){var m,b,k,F,w,W,R,E,S,_=t.F.U,x=t.F._putsF,h=t.F._putsE;_.lhst[256]++,b=(m=t.F.getTrees())[0],k=m[1],F=m[2],w=m[3],W=m[4],R=m[5],E=m[6],S=m[7];var y=32+(l+3&7?8-(l+3&7):0)+(i<<3),D=f+t.F.contSize(_.fltree,_.lhst)+t.F.contSize(_.fdtree,_.dhst),A=f+t.F.contSize(_.ltree,_.lhst)+t.F.contSize(_.dtree,_.dhst);A+=14+3*R+t.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var M=0;M<286;M++)_.lhst[M]=0;for(M=0;M<30;M++)_.dhst[M]=0;for(M=0;M<19;M++)_.ihst[M]=0;var O=y<D&&y<A?0:D<A?1:2;if(x(o,l,r),x(o,l+1,O),l+=3,O==0){for(;7&l;)l++;l=t.F._copyExact(c,g,i,o,l)}else{var T,C;if(O==1&&(T=_.fltree,C=_.fdtree),O==2){t.F.makeCodes(_.ltree,b),t.F.revCodes(_.ltree,b),t.F.makeCodes(_.dtree,k),t.F.revCodes(_.dtree,k),t.F.makeCodes(_.itree,F),t.F.revCodes(_.itree,F),T=_.ltree,C=_.dtree,h(o,l,w-257),h(o,l+=5,W-1),h(o,l+=5,R-4),l+=4;for(var p=0;p<R;p++)h(o,l+3*p,_.itree[1+(_.ordr[p]<<1)]);l+=3*R,l=t.F._codeTiny(E,_.itree,o,l),l=t.F._codeTiny(S,_.itree,o,l)}for(var v=g,P=0;P<u;P+=2){for(var I=a[P],N=I>>>23,j=v+(8388607&I);v<j;)l=t.F._writeLit(c[v++],T,o,l);if(N!=0){var q=a[P+1],B=q>>16,L=q>>8&255,H=255&q;h(o,l=t.F._writeLit(257+L,T,o,l),N-_.of0[L]),l+=_.exb[L],x(o,l=t.F._writeLit(H,C,o,l),B-_.df0[H]),l+=_.dxb[H],v+=N}}l=t.F._writeLit(256,T,o,l)}return l},t.F._copyExact=function(r,a,u,f,c){var g=c>>>3;return f[g]=u,f[g+1]=u>>>8,f[g+2]=255-f[g],f[g+3]=255-f[g+1],g+=4,f.set(new Uint8Array(r.buffer,a,u),g),c+(u+4<<3)},t.F.getTrees=function(){for(var r=t.F.U,a=t.F._hufTree(r.lhst,r.ltree,15),u=t.F._hufTree(r.dhst,r.dtree,15),f=[],c=t.F._lenCodes(r.ltree,f),g=[],i=t.F._lenCodes(r.dtree,g),o=0;o<f.length;o+=2)r.ihst[f[o]]++;for(o=0;o<g.length;o+=2)r.ihst[g[o]]++;for(var l=t.F._hufTree(r.ihst,r.itree,7),m=19;m>4&&r.itree[1+(r.ordr[m-1]<<1)]==0;)m--;return[a,u,l,c,i,m,f,g]},t.F.getSecond=function(r){for(var a=[],u=0;u<r.length;u+=2)a.push(r[u+1]);return a},t.F.nonZero=function(r){for(var a="",u=0;u<r.length;u+=2)r[u+1]!=0&&(a+=(u>>1)+",");return a},t.F.contSize=function(r,a){for(var u=0,f=0;f<a.length;f++)u+=a[f]*r[1+(f<<1)];return u},t.F._codeTiny=function(r,a,u,f){for(var c=0;c<r.length;c+=2){var g=r[c],i=r[c+1];f=t.F._writeLit(g,a,u,f);var o=g==16?2:g==17?3:7;g>15&&(t.F._putsE(u,f,i,o),f+=o)}return f},t.F._lenCodes=function(r,a){for(var u=r.length;u!=2&&r[u-1]==0;)u-=2;for(var f=0;f<u;f+=2){var c=r[f+1],g=f+3<u?r[f+3]:-1,i=f+5<u?r[f+5]:-1,o=f==0?-1:r[f-1];if(c==0&&g==c&&i==c){for(var l=f+5;l+2<u&&r[l+2]==c;)l+=2;(m=Math.min(l+1-f>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),f+=2*m-2}else if(c==o&&g==c&&i==c){for(l=f+5;l+2<u&&r[l+2]==c;)l+=2;var m=Math.min(l+1-f>>>1,6);a.push(16,m-3),f+=2*m-2}else a.push(c,0)}return u>>>1},t.F._hufTree=function(r,a,u){var f=[],c=r.length,g=a.length,i=0;for(i=0;i<g;i+=2)a[i]=0,a[i+1]=0;for(i=0;i<c;i++)r[i]!=0&&f.push({lit:i,f:r[i]});var o=f.length,l=f.slice(0);if(o==0)return 0;if(o==1){var m=f[0].lit;return l=m==0?1:0,a[1+(m<<1)]=1,a[1+(l<<1)]=1,1}f.sort(function(E,S){return E.f-S.f});var b=f[0],k=f[1],F=0,w=1,W=2;for(f[0]={lit:-1,f:b.f+k.f,l:b,r:k,d:0};w!=o-1;)b=F!=w&&(W==o||f[F].f<f[W].f)?f[F++]:f[W++],k=F!=w&&(W==o||f[F].f<f[W].f)?f[F++]:f[W++],f[w++]={lit:-1,f:b.f+k.f,l:b,r:k};var R=t.F.setDepth(f[w-1],0);for(R>u&&(t.F.restrictDepth(l,u,R),R=u),i=0;i<o;i++)a[1+(l[i].lit<<1)]=l[i].d;return R},t.F.setDepth=function(r,a){return r.lit!=-1?(r.d=a,a):Math.max(t.F.setDepth(r.l,a+1),t.F.setDepth(r.r,a+1))},t.F.restrictDepth=function(r,a,u){var f=0,c=1<<u-a,g=0;for(r.sort(function(o,l){return l.d==o.d?o.f-l.f:l.d-o.d}),f=0;f<r.length&&r[f].d>a;f++){var i=r[f].d;r[f].d=a,g+=c-(1<<u-i)}for(g>>>=u-a;g>0;)(i=r[f].d)<a?(r[f].d++,g-=1<<a-i-1):f++;for(;f>=0;f--)r[f].d==a&&g<0&&(r[f].d--,g++);g!=0&&console.log("debt left")},t.F._goodIndex=function(r,a){var u=0;return a[16|u]<=r&&(u|=16),a[8|u]<=r&&(u|=8),a[4|u]<=r&&(u|=4),a[2|u]<=r&&(u|=2),a[1|u]<=r&&(u|=1),u},t.F._writeLit=function(r,a,u,f){return t.F._putsF(u,f,a[r<<1]),f+a[1+(r<<1)]},t.F.inflate=function(r,a){var u=Uint8Array;if(r[0]==3&&r[1]==0)return a||new u(0);var f=t.F,c=f._bitsF,g=f._bitsE,i=f._decodeTiny,o=f.makeCodes,l=f.codes2map,m=f._get17,b=f.U,k=a==null;k&&(a=new u(r.length>>>2<<3));for(var F,w,W=0,R=0,E=0,S=0,_=0,x=0,h=0,y=0,D=0;W==0;)if(W=c(r,D,1),R=c(r,D+1,2),D+=3,R!=0){if(k&&(a=t.F._check(a,y+(1<<17))),R==1&&(F=b.flmap,w=b.fdmap,x=511,h=31),R==2){E=g(r,D,5)+257,S=g(r,D+5,5)+1,_=g(r,D+10,4)+4,D+=14;for(var A=0;A<38;A+=2)b.itree[A]=0,b.itree[A+1]=0;var M=1;for(A=0;A<_;A++){var O=g(r,D+3*A,3);b.itree[1+(b.ordr[A]<<1)]=O,O>M&&(M=O)}D+=3*_,o(b.itree,M),l(b.itree,M,b.imap),F=b.lmap,w=b.dmap,D=i(b.imap,(1<<M)-1,E+S,r,D,b.ttree);var T=f._copyOut(b.ttree,0,E,b.ltree);x=(1<<T)-1;var C=f._copyOut(b.ttree,E,S,b.dtree);h=(1<<C)-1,o(b.ltree,T),l(b.ltree,T,F),o(b.dtree,C),l(b.dtree,C,w)}for(;;){var p=F[m(r,D)&x];D+=15&p;var v=p>>>4;if(!(v>>>8))a[y++]=v;else{if(v==256)break;var P=y+v-254;if(v>264){var I=b.ldef[v-257];P=y+(I>>>3)+g(r,D,7&I),D+=7&I}var N=w[m(r,D)&h];D+=15&N;var j=N>>>4,q=b.ddef[j],B=(q>>>4)+c(r,D,15&q);for(D+=15&q,k&&(a=t.F._check(a,y+(1<<17)));y<P;)a[y]=a[y++-B],a[y]=a[y++-B],a[y]=a[y++-B],a[y]=a[y++-B];y=P}}}else{7&D&&(D+=8-(7&D));var L=4+(D>>>3),H=r[L-4]|r[L-3]<<8;k&&(a=t.F._check(a,y+H)),a.set(new u(r.buffer,r.byteOffset+L,H),y),D=L+H<<3,y+=H}return a.length==y?a:a.slice(0,y)},t.F._check=function(r,a){var u=r.length;if(a<=u)return r;var f=new Uint8Array(Math.max(u<<1,a));return f.set(r,0),f},t.F._decodeTiny=function(r,a,u,f,c,g){for(var i=t.F._bitsE,o=t.F._get17,l=0;l<u;){var m=r[o(f,c)&a];c+=15&m;var b=m>>>4;if(b<=15)g[l]=b,l++;else{var k=0,F=0;b==16?(F=3+i(f,c,2),c+=2,k=g[l-1]):b==17?(F=3+i(f,c,3),c+=3):b==18&&(F=11+i(f,c,7),c+=7);for(var w=l+F;l<w;)g[l]=k,l++}}return c},t.F._copyOut=function(r,a,u,f){for(var c=0,g=0,i=f.length>>>1;g<u;){var o=r[g+a];f[g<<1]=0,f[1+(g<<1)]=o,o>c&&(c=o),g++}for(;g<i;)f[g<<1]=0,f[1+(g<<1)]=0,g++;return c},t.F.makeCodes=function(r,a){for(var u,f,c,g,i=t.F.U,o=r.length,l=i.bl_count,m=0;m<=a;m++)l[m]=0;for(m=1;m<o;m+=2)l[r[m]]++;var b=i.next_code;for(u=0,l[0]=0,f=1;f<=a;f++)u=u+l[f-1]<<1,b[f]=u;for(c=0;c<o;c+=2)(g=r[c+1])!=0&&(r[c]=b[g],b[g]++)},t.F.codes2map=function(r,a,u){for(var f=r.length,c=t.F.U.rev15,g=0;g<f;g+=2)if(r[g+1]!=0)for(var i=g>>1,o=r[g+1],l=i<<4|o,m=a-o,b=r[g]<<m,k=b+(1<<m);b!=k;)u[c[b]>>>15-a]=l,b++},t.F.revCodes=function(r,a){for(var u=t.F.U.rev15,f=15-a,c=0;c<r.length;c+=2){var g=r[c]<<a-r[c+1];r[c]=u[g]>>>f}},t.F._putsE=function(r,a,u){u<<=7&a;var f=a>>>3;r[f]|=u,r[f+1]|=u>>>8},t.F._putsF=function(r,a,u){u<<=7&a;var f=a>>>3;r[f]|=u,r[f+1]|=u>>>8,r[f+2]|=u>>>16},t.F._bitsE=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8)>>>(7&a)&(1<<u)-1},t.F._bitsF=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)&(1<<u)-1},t.F._get17=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)},t.F._get25=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16|r[3+(a>>>3)]<<24)>>>(7&a)},t.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=t.F.U,a=0;a<32768;a++){var u=a;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,r.rev15[a]=(u>>>16|u<<16)>>>17}function f(c,g,i){for(;g--!=0;)c.push(0,i)}for(a=0;a<32;a++)r.ldef[a]=r.of0[a]<<3|r.exb[a],r.ddef[a]=r.df0[a]<<4|r.dxb[a];f(r.fltree,144,8),f(r.fltree,112,9),f(r.fltree,24,7),f(r.fltree,8,8),t.F.makeCodes(r.fltree,9),t.F.codes2map(r.fltree,9,r.flmap),t.F.revCodes(r.fltree,9),f(r.fdtree,32,5),t.F.makeCodes(r.fdtree,5),t.F.codes2map(r.fdtree,5,r.fdmap),t.F.revCodes(r.fdtree,5),f(r.itree,19,0),f(r.ltree,286,0),f(r.dtree,30,0),f(r.ttree,320,0)}()})();var po=vo({__proto__:null,default:dr},[dr]);const it=function(){var s={nextZero(i,o){for(;i[o]!=0;)o++;return o},readUshort:(i,o)=>i[o]<<8|i[o+1],writeUshort(i,o,l){i[o]=l>>8&255,i[o+1]=255&l},readUint:(i,o)=>16777216*i[o]+(i[o+1]<<16|i[o+2]<<8|i[o+3]),writeUint(i,o,l){i[o]=l>>24&255,i[o+1]=l>>16&255,i[o+2]=l>>8&255,i[o+3]=255&l},readASCII(i,o,l){let m="";for(let b=0;b<l;b++)m+=String.fromCharCode(i[o+b]);return m},writeASCII(i,o,l){for(let m=0;m<l.length;m++)i[o+m]=l.charCodeAt(m)},readBytes(i,o,l){const m=[];for(let b=0;b<l;b++)m.push(i[o+b]);return m},pad:i=>i.length<2?`0${i}`:i,readUTF8(i,o,l){let m,b="";for(let k=0;k<l;k++)b+=`%${s.pad(i[o+k].toString(16))}`;try{m=decodeURIComponent(b)}catch{return s.readASCII(i,o,l)}return m}};function e(i,o,l,m){const b=o*l,k=a(m),F=Math.ceil(o*k/8),w=new Uint8Array(4*b),W=new Uint32Array(w.buffer),{ctype:R}=m,{depth:E}=m,S=s.readUshort;if(R==6){const I=b<<2;if(E==8)for(var _=0;_<I;_+=4)w[_]=i[_],w[_+1]=i[_+1],w[_+2]=i[_+2],w[_+3]=i[_+3];if(E==16)for(_=0;_<I;_++)w[_]=i[_<<1]}else if(R==2){const I=m.tabs.tRNS;if(I==null){if(E==8)for(_=0;_<b;_++){var x=3*_;W[_]=255<<24|i[x+2]<<16|i[x+1]<<8|i[x]}if(E==16)for(_=0;_<b;_++)x=6*_,W[_]=255<<24|i[x+4]<<16|i[x+2]<<8|i[x]}else{var h=I[0];const N=I[1],j=I[2];if(E==8)for(_=0;_<b;_++){var y=_<<2;x=3*_,W[_]=255<<24|i[x+2]<<16|i[x+1]<<8|i[x],i[x]==h&&i[x+1]==N&&i[x+2]==j&&(w[y+3]=0)}if(E==16)for(_=0;_<b;_++)y=_<<2,x=6*_,W[_]=255<<24|i[x+4]<<16|i[x+2]<<8|i[x],S(i,x)==h&&S(i,x+2)==N&&S(i,x+4)==j&&(w[y+3]=0)}}else if(R==3){const I=m.tabs.PLTE,N=m.tabs.tRNS,j=N?N.length:0;if(E==1)for(var D=0;D<l;D++){var A=D*F,M=D*o;for(_=0;_<o;_++){y=M+_<<2;var O=3*(T=i[A+(_>>3)]>>7-((7&_)<<0)&1);w[y]=I[O],w[y+1]=I[O+1],w[y+2]=I[O+2],w[y+3]=T<j?N[T]:255}}if(E==2)for(D=0;D<l;D++)for(A=D*F,M=D*o,_=0;_<o;_++)y=M+_<<2,O=3*(T=i[A+(_>>2)]>>6-((3&_)<<1)&3),w[y]=I[O],w[y+1]=I[O+1],w[y+2]=I[O+2],w[y+3]=T<j?N[T]:255;if(E==4)for(D=0;D<l;D++)for(A=D*F,M=D*o,_=0;_<o;_++)y=M+_<<2,O=3*(T=i[A+(_>>1)]>>4-((1&_)<<2)&15),w[y]=I[O],w[y+1]=I[O+1],w[y+2]=I[O+2],w[y+3]=T<j?N[T]:255;if(E==8)for(_=0;_<b;_++){var T;y=_<<2,O=3*(T=i[_]),w[y]=I[O],w[y+1]=I[O+1],w[y+2]=I[O+2],w[y+3]=T<j?N[T]:255}}else if(R==4){if(E==8)for(_=0;_<b;_++){y=_<<2;var C=i[p=_<<1];w[y]=C,w[y+1]=C,w[y+2]=C,w[y+3]=i[p+1]}if(E==16)for(_=0;_<b;_++){var p;y=_<<2,C=i[p=_<<2],w[y]=C,w[y+1]=C,w[y+2]=C,w[y+3]=i[p+2]}}else if(R==0)for(h=m.tabs.tRNS?m.tabs.tRNS:-1,D=0;D<l;D++){const I=D*F,N=D*o;if(E==1)for(var v=0;v<o;v++){var P=(C=255*(i[I+(v>>>3)]>>>7-(7&v)&1))==255*h?0:255;W[N+v]=P<<24|C<<16|C<<8|C}else if(E==2)for(v=0;v<o;v++)P=(C=85*(i[I+(v>>>2)]>>>6-((3&v)<<1)&3))==85*h?0:255,W[N+v]=P<<24|C<<16|C<<8|C;else if(E==4)for(v=0;v<o;v++)P=(C=17*(i[I+(v>>>1)]>>>4-((1&v)<<2)&15))==17*h?0:255,W[N+v]=P<<24|C<<16|C<<8|C;else if(E==8)for(v=0;v<o;v++)P=(C=i[I+v])==h?0:255,W[N+v]=P<<24|C<<16|C<<8|C;else if(E==16)for(v=0;v<o;v++)C=i[I+(v<<1)],P=S(i,I+(v<<1))==h?0:255,W[N+v]=P<<24|C<<16|C<<8|C}return w}function n(i,o,l,m){const b=a(i),k=Math.ceil(l*b/8),F=new Uint8Array((k+1+i.interlace)*m);return o=i.tabs.CgBI?r(o,F):t(o,F),i.interlace==0?o=u(o,i,0,l,m):i.interlace==1&&(o=function(W,R){const E=R.width,S=R.height,_=a(R),x=_>>3,h=Math.ceil(E*_/8),y=new Uint8Array(S*h);let D=0;const A=[0,0,4,0,2,0,1],M=[0,4,0,2,0,1,0],O=[8,8,8,4,4,2,2],T=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const v=O[C],P=T[C];let I=0,N=0,j=A[C];for(;j<S;)j+=v,N++;let q=M[C];for(;q<E;)q+=P,I++;const B=Math.ceil(I*_/8);u(W,R,D,I,N);let L=0,H=A[C];for(;H<S;){let le=M[C],re=D+L*B<<3;for(;le<E;){var p;if(_==1&&(p=(p=W[re>>3])>>7-(7&re)&1,y[H*h+(le>>3)]|=p<<7-((7&le)<<0)),_==2&&(p=(p=W[re>>3])>>6-(7&re)&3,y[H*h+(le>>2)]|=p<<6-((3&le)<<1)),_==4&&(p=(p=W[re>>3])>>4-(7&re)&15,y[H*h+(le>>1)]|=p<<4-((1&le)<<2)),_>=8){const ie=H*h+le*x;for(let de=0;de<x;de++)y[ie+de]=W[(re>>3)+de]}re+=_,le+=P}L++,H+=v}I*N!=0&&(D+=N*(1+B)),C+=1}return y}(o,i)),o}function t(i,o){return r(new Uint8Array(i.buffer,2,i.length-6),o)}var r=function(){const i={H:{}};return i.H.N=function(o,l){const m=Uint8Array;let b,k,F=0,w=0,W=0,R=0,E=0,S=0,_=0,x=0,h=0;if(o[0]==3&&o[1]==0)return l||new m(0);const y=i.H,D=y.b,A=y.e,M=y.R,O=y.n,T=y.A,C=y.Z,p=y.m,v=l==null;for(v&&(l=new m(o.length>>>2<<5));F==0;)if(F=D(o,h,1),w=D(o,h+1,2),h+=3,w!=0){if(v&&(l=i.H.W(l,x+(1<<17))),w==1&&(b=p.J,k=p.h,S=511,_=31),w==2){W=A(o,h,5)+257,R=A(o,h+5,5)+1,E=A(o,h+10,4)+4,h+=14;let I=1;for(var P=0;P<38;P+=2)p.Q[P]=0,p.Q[P+1]=0;for(P=0;P<E;P++){const q=A(o,h+3*P,3);p.Q[1+(p.X[P]<<1)]=q,q>I&&(I=q)}h+=3*E,O(p.Q,I),T(p.Q,I,p.u),b=p.w,k=p.d,h=M(p.u,(1<<I)-1,W+R,o,h,p.v);const N=y.V(p.v,0,W,p.C);S=(1<<N)-1;const j=y.V(p.v,W,R,p.D);_=(1<<j)-1,O(p.C,N),T(p.C,N,b),O(p.D,j),T(p.D,j,k)}for(;;){const I=b[C(o,h)&S];h+=15&I;const N=I>>>4;if(!(N>>>8))l[x++]=N;else{if(N==256)break;{let j=x+N-254;if(N>264){const le=p.q[N-257];j=x+(le>>>3)+A(o,h,7&le),h+=7&le}const q=k[C(o,h)&_];h+=15&q;const B=q>>>4,L=p.c[B],H=(L>>>4)+D(o,h,15&L);for(h+=15&L;x<j;)l[x]=l[x++-H],l[x]=l[x++-H],l[x]=l[x++-H],l[x]=l[x++-H];x=j}}}}else{7&h&&(h+=8-(7&h));const I=4+(h>>>3),N=o[I-4]|o[I-3]<<8;v&&(l=i.H.W(l,x+N)),l.set(new m(o.buffer,o.byteOffset+I,N),x),h=I+N<<3,x+=N}return l.length==x?l:l.slice(0,x)},i.H.W=function(o,l){const m=o.length;if(l<=m)return o;const b=new Uint8Array(m<<1);return b.set(o,0),b},i.H.R=function(o,l,m,b,k,F){const w=i.H.e,W=i.H.Z;let R=0;for(;R<m;){const E=o[W(b,k)&l];k+=15&E;const S=E>>>4;if(S<=15)F[R]=S,R++;else{let _=0,x=0;S==16?(x=3+w(b,k,2),k+=2,_=F[R-1]):S==17?(x=3+w(b,k,3),k+=3):S==18&&(x=11+w(b,k,7),k+=7);const h=R+x;for(;R<h;)F[R]=_,R++}}return k},i.H.V=function(o,l,m,b){let k=0,F=0;const w=b.length>>>1;for(;F<m;){const W=o[F+l];b[F<<1]=0,b[1+(F<<1)]=W,W>k&&(k=W),F++}for(;F<w;)b[F<<1]=0,b[1+(F<<1)]=0,F++;return k},i.H.n=function(o,l){const m=i.H.m,b=o.length;let k,F,w,W;const R=m.j;for(var E=0;E<=l;E++)R[E]=0;for(E=1;E<b;E+=2)R[o[E]]++;const S=m.K;for(k=0,R[0]=0,F=1;F<=l;F++)k=k+R[F-1]<<1,S[F]=k;for(w=0;w<b;w+=2)W=o[w+1],W!=0&&(o[w]=S[W],S[W]++)},i.H.A=function(o,l,m){const b=o.length,k=i.H.m.r;for(let F=0;F<b;F+=2)if(o[F+1]!=0){const w=F>>1,W=o[F+1],R=w<<4|W,E=l-W;let S=o[F]<<E;const _=S+(1<<E);for(;S!=_;)m[k[S]>>>15-l]=R,S++}},i.H.l=function(o,l){const m=i.H.m.r,b=15-l;for(let k=0;k<o.length;k+=2){const F=o[k]<<l-o[k+1];o[k]=m[F]>>>b}},i.H.M=function(o,l,m){m<<=7&l;const b=l>>>3;o[b]|=m,o[b+1]|=m>>>8},i.H.I=function(o,l,m){m<<=7&l;const b=l>>>3;o[b]|=m,o[b+1]|=m>>>8,o[b+2]|=m>>>16},i.H.e=function(o,l,m){return(o[l>>>3]|o[1+(l>>>3)]<<8)>>>(7&l)&(1<<m)-1},i.H.b=function(o,l,m){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)&(1<<m)-1},i.H.Z=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)},i.H.i=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16|o[3+(l>>>3)]<<24)>>>(7&l)},i.H.m=function(){const o=Uint16Array,l=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new l(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new l(286),Y:new l(30),a:new l(19),t:new l(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=i.H.m;for(var l=0;l<32768;l++){let b=l;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,o.r[l]=(b>>>16|b<<16)>>>17}function m(b,k,F){for(;k--!=0;)b.push(0,F)}for(l=0;l<32;l++)o.q[l]=o.S[l]<<3|o.T[l],o.c[l]=o.p[l]<<4|o.z[l];m(o._,144,8),m(o._,112,9),m(o._,24,7),m(o._,8,8),i.H.n(o._,9),i.H.A(o._,9,o.J),i.H.l(o._,9),m(o.$,32,5),i.H.n(o.$,5),i.H.A(o.$,5,o.h),i.H.l(o.$,5),m(o.Q,19,0),m(o.C,286,0),m(o.D,30,0),m(o.v,320,0)}(),i.H.N}();function a(i){return[1,null,3,1,2,null,4][i.ctype]*i.depth}function u(i,o,l,m,b){let k=a(o);const F=Math.ceil(m*k/8);let w,W;k=Math.ceil(k/8);let R=i[l],E=0;if(R>1&&(i[l]=[0,0,1][R-2]),R==3)for(E=k;E<F;E++)i[E+1]=i[E+1]+(i[E+1-k]>>>1)&255;for(let S=0;S<b;S++)if(w=l+S*F,W=w+S+1,R=i[W-1],E=0,R==0)for(;E<F;E++)i[w+E]=i[W+E];else if(R==1){for(;E<k;E++)i[w+E]=i[W+E];for(;E<F;E++)i[w+E]=i[W+E]+i[w+E-k]}else if(R==2)for(;E<F;E++)i[w+E]=i[W+E]+i[w+E-F];else if(R==3){for(;E<k;E++)i[w+E]=i[W+E]+(i[w+E-F]>>>1);for(;E<F;E++)i[w+E]=i[W+E]+(i[w+E-F]+i[w+E-k]>>>1)}else{for(;E<k;E++)i[w+E]=i[W+E]+f(0,i[w+E-F],0);for(;E<F;E++)i[w+E]=i[W+E]+f(i[w+E-k],i[w+E-F],i[w+E-k-F])}return i}function f(i,o,l){const m=i+o-l,b=m-i,k=m-o,F=m-l;return b*b<=k*k&&b*b<=F*F?i:k*k<=F*F?o:l}function c(i,o,l){l.width=s.readUint(i,o),o+=4,l.height=s.readUint(i,o),o+=4,l.depth=i[o],o++,l.ctype=i[o],o++,l.compress=i[o],o++,l.filter=i[o],o++,l.interlace=i[o],o++}function g(i,o,l,m,b,k,F,w,W){const R=Math.min(o,b),E=Math.min(l,k);let S=0,_=0;for(let C=0;C<E;C++)for(let p=0;p<R;p++)if(F>=0&&w>=0?(S=C*o+p<<2,_=(w+C)*b+F+p<<2):(S=(-w+C)*o-F+p<<2,_=C*b+p<<2),W==0)m[_]=i[S],m[_+1]=i[S+1],m[_+2]=i[S+2],m[_+3]=i[S+3];else if(W==1){var x=i[S+3]*.00392156862745098,h=i[S]*x,y=i[S+1]*x,D=i[S+2]*x,A=m[_+3]*(1/255),M=m[_]*A,O=m[_+1]*A,T=m[_+2]*A;const v=1-x,P=x+A*v,I=P==0?0:1/P;m[_+3]=255*P,m[_+0]=(h+M*v)*I,m[_+1]=(y+O*v)*I,m[_+2]=(D+T*v)*I}else if(W==2)x=i[S+3],h=i[S],y=i[S+1],D=i[S+2],A=m[_+3],M=m[_],O=m[_+1],T=m[_+2],x==A&&h==M&&y==O&&D==T?(m[_]=0,m[_+1]=0,m[_+2]=0,m[_+3]=0):(m[_]=h,m[_+1]=y,m[_+2]=D,m[_+3]=x);else if(W==3){if(x=i[S+3],h=i[S],y=i[S+1],D=i[S+2],A=m[_+3],M=m[_],O=m[_+1],T=m[_+2],x==A&&h==M&&y==O&&D==T)continue;if(x<220&&A>20)return!1}return!0}return{decode:function(o){const l=new Uint8Array(o);let m=8;const b=s,k=b.readUshort,F=b.readUint,w={tabs:{},frames:[]},W=new Uint8Array(l.length);let R,E=0,S=0;const _=[137,80,78,71,13,10,26,10];for(var x=0;x<8;x++)if(l[x]!=_[x])throw"The input is not a PNG file!";for(;m<l.length;){const C=b.readUint(l,m);m+=4;const p=b.readASCII(l,m,4);if(m+=4,p=="IHDR")c(l,m,w);else if(p=="iCCP"){for(var h=m;l[h]!=0;)h++;b.readASCII(l,m,h-m),l[h+1];const v=l.slice(h+2,m+C);let P=null;try{P=t(v)}catch{P=r(v)}w.tabs[p]=P}else if(p=="CgBI")w.tabs[p]=l.slice(m,m+4);else if(p=="IDAT"){for(x=0;x<C;x++)W[E+x]=l[m+x];E+=C}else if(p=="acTL")w.tabs[p]={num_frames:F(l,m),num_plays:F(l,m+4)},R=new Uint8Array(l.length);else if(p=="fcTL"){S!=0&&((T=w.frames[w.frames.length-1]).data=n(w,R.slice(0,S),T.rect.width,T.rect.height),S=0);const v={x:F(l,m+12),y:F(l,m+16),width:F(l,m+4),height:F(l,m+8)};let P=k(l,m+22);P=k(l,m+20)/(P==0?100:P);const I={rect:v,delay:Math.round(1e3*P),dispose:l[m+24],blend:l[m+25]};w.frames.push(I)}else if(p=="fdAT"){for(x=0;x<C-4;x++)R[S+x]=l[m+x+4];S+=C-4}else if(p=="pHYs")w.tabs[p]=[b.readUint(l,m),b.readUint(l,m+4),l[m+8]];else if(p=="cHRM")for(w.tabs[p]=[],x=0;x<8;x++)w.tabs[p].push(b.readUint(l,m+4*x));else if(p=="tEXt"||p=="zTXt"){w.tabs[p]==null&&(w.tabs[p]={});var y=b.nextZero(l,m),D=b.readASCII(l,m,y-m),A=m+C-y-1;if(p=="tEXt")O=b.readASCII(l,y+1,A);else{var M=t(l.slice(y+2,y+2+A));O=b.readUTF8(M,0,M.length)}w.tabs[p][D]=O}else if(p=="iTXt"){w.tabs[p]==null&&(w.tabs[p]={}),y=0,h=m,y=b.nextZero(l,h),D=b.readASCII(l,h,y-h);const v=l[h=y+1];var O;l[h+1],h+=2,y=b.nextZero(l,h),b.readASCII(l,h,y-h),h=y+1,y=b.nextZero(l,h),b.readUTF8(l,h,y-h),A=C-((h=y+1)-m),v==0?O=b.readUTF8(l,h,A):(M=t(l.slice(h,h+A)),O=b.readUTF8(M,0,M.length)),w.tabs[p][D]=O}else if(p=="PLTE")w.tabs[p]=b.readBytes(l,m,C);else if(p=="hIST"){const v=w.tabs.PLTE.length/3;for(w.tabs[p]=[],x=0;x<v;x++)w.tabs[p].push(k(l,m+2*x))}else if(p=="tRNS")w.ctype==3?w.tabs[p]=b.readBytes(l,m,C):w.ctype==0?w.tabs[p]=k(l,m):w.ctype==2&&(w.tabs[p]=[k(l,m),k(l,m+2),k(l,m+4)]);else if(p=="gAMA")w.tabs[p]=b.readUint(l,m)/1e5;else if(p=="sRGB")w.tabs[p]=l[m];else if(p=="bKGD")w.ctype==0||w.ctype==4?w.tabs[p]=[k(l,m)]:w.ctype==2||w.ctype==6?w.tabs[p]=[k(l,m),k(l,m+2),k(l,m+4)]:w.ctype==3&&(w.tabs[p]=l[m]);else if(p=="IEND")break;m+=C,b.readUint(l,m),m+=4}var T;return S!=0&&((T=w.frames[w.frames.length-1]).data=n(w,R.slice(0,S),T.rect.width,T.rect.height)),w.data=n(w,W,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(o){const l=o.width,m=o.height;if(o.tabs.acTL==null)return[e(o.data,l,m,o).buffer];const b=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const k=l*m*4,F=new Uint8Array(k),w=new Uint8Array(k),W=new Uint8Array(k);for(let E=0;E<o.frames.length;E++){const S=o.frames[E],_=S.rect.x,x=S.rect.y,h=S.rect.width,y=S.rect.height,D=e(S.data,h,y,o);if(E!=0)for(var R=0;R<k;R++)W[R]=F[R];if(S.blend==0?g(D,h,y,F,l,m,_,x,0):S.blend==1&&g(D,h,y,F,l,m,_,x,1),b.push(F.buffer.slice(0)),S.dispose!=0){if(S.dispose==1)g(w,h,y,F,l,m,_,x,0);else if(S.dispose==2)for(R=0;R<k;R++)F[R]=W[R]}}return b},_paeth:f,_copyTile:g,_bin:s}}();(function(){const{_copyTile:s}=it,{_bin:e}=it,n=it._paeth;var t={table:function(){const h=new Uint32Array(256);for(let y=0;y<256;y++){let D=y;for(let A=0;A<8;A++)1&D?D=3988292384^D>>>1:D>>>=1;h[y]=D}return h}(),update(h,y,D,A){for(let M=0;M<A;M++)h=t.table[255&(h^y[D+M])]^h>>>8;return h},crc:(h,y,D)=>4294967295^t.update(4294967295,h,y,D)};function r(h,y,D,A){y[D]+=h[0]*A>>4,y[D+1]+=h[1]*A>>4,y[D+2]+=h[2]*A>>4,y[D+3]+=h[3]*A>>4}function a(h){return Math.max(0,Math.min(255,h))}function u(h,y){const D=h[0]-y[0],A=h[1]-y[1],M=h[2]-y[2],O=h[3]-y[3];return D*D+A*A+M*M+O*O}function f(h,y,D,A,M,O,T){T==null&&(T=1);const C=A.length,p=[];for(var v=0;v<C;v++){const H=A[v];p.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(v=0;v<C;v++){let H=4294967295;for(var P=0,I=0;I<C;I++){var N=u(p[v],p[I]);I!=v&&N<H&&(H=N,P=I)}}const j=new Uint32Array(M.buffer),q=new Int16Array(y*D*4),B=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(v=0;v<B.length;v++)B[v]=255*((B[v]+.5)/16-.5);for(let H=0;H<D;H++)for(let le=0;le<y;le++){var L;v=4*(H*y+le),T!=2?L=[a(h[v]+q[v]),a(h[v+1]+q[v+1]),a(h[v+2]+q[v+2]),a(h[v+3]+q[v+3])]:(N=B[4*(3&H)+(3&le)],L=[a(h[v]+N),a(h[v+1]+N),a(h[v+2]+N),a(h[v+3]+N)]),P=0;let re=16777215;for(I=0;I<C;I++){const be=u(L,p[I]);be<re&&(re=be,P=I)}const ie=p[P],de=[L[0]-ie[0],L[1]-ie[1],L[2]-ie[2],L[3]-ie[3]];T==1&&(le!=y-1&&r(de,q,v+4,7),H!=D-1&&(le!=0&&r(de,q,v+4*y-4,3),r(de,q,v+4*y,5),le!=y-1&&r(de,q,v+4*y+4,1))),O[v>>2]=P,j[v>>2]=A[P]}}function c(h,y,D,A,M){M==null&&(M={});const{crc:O}=t,T=e.writeUint,C=e.writeUshort,p=e.writeASCII;let v=8;const P=h.frames.length>1;let I,N=!1,j=33+(P?20:0);if(M.sRGB!=null&&(j+=13),M.pHYs!=null&&(j+=21),M.iCCP!=null&&(I=pako.deflate(M.iCCP),j+=21+I.length+4),h.ctype==3){for(var q=h.plte.length,B=0;B<q;B++)h.plte[B]>>>24!=255&&(N=!0);j+=8+3*q+4+(N?8+1*q+4:0)}for(var L=0;L<h.frames.length;L++)P&&(j+=38),j+=(ie=h.frames[L]).cimg.length+12,L!=0&&(j+=4);j+=12;const H=new Uint8Array(j),le=[137,80,78,71,13,10,26,10];for(B=0;B<8;B++)H[B]=le[B];if(T(H,v,13),v+=4,p(H,v,"IHDR"),v+=4,T(H,v,y),v+=4,T(H,v,D),v+=4,H[v]=h.depth,v++,H[v]=h.ctype,v++,H[v]=0,v++,H[v]=0,v++,H[v]=0,v++,T(H,v,O(H,v-17,17)),v+=4,M.sRGB!=null&&(T(H,v,1),v+=4,p(H,v,"sRGB"),v+=4,H[v]=M.sRGB,v++,T(H,v,O(H,v-5,5)),v+=4),M.iCCP!=null){const de=13+I.length;T(H,v,de),v+=4,p(H,v,"iCCP"),v+=4,p(H,v,"ICC profile"),v+=11,v+=2,H.set(I,v),v+=I.length,T(H,v,O(H,v-(de+4),de+4)),v+=4}if(M.pHYs!=null&&(T(H,v,9),v+=4,p(H,v,"pHYs"),v+=4,T(H,v,M.pHYs[0]),v+=4,T(H,v,M.pHYs[1]),v+=4,H[v]=M.pHYs[2],v++,T(H,v,O(H,v-13,13)),v+=4),P&&(T(H,v,8),v+=4,p(H,v,"acTL"),v+=4,T(H,v,h.frames.length),v+=4,T(H,v,M.loop!=null?M.loop:0),v+=4,T(H,v,O(H,v-12,12)),v+=4),h.ctype==3){for(T(H,v,3*(q=h.plte.length)),v+=4,p(H,v,"PLTE"),v+=4,B=0;B<q;B++){const de=3*B,be=h.plte[B],De=255&be,G=be>>>8&255,ne=be>>>16&255;H[v+de+0]=De,H[v+de+1]=G,H[v+de+2]=ne}if(v+=3*q,T(H,v,O(H,v-3*q-4,3*q+4)),v+=4,N){for(T(H,v,q),v+=4,p(H,v,"tRNS"),v+=4,B=0;B<q;B++)H[v+B]=h.plte[B]>>>24&255;v+=q,T(H,v,O(H,v-q-4,q+4)),v+=4}}let re=0;for(L=0;L<h.frames.length;L++){var ie=h.frames[L];P&&(T(H,v,26),v+=4,p(H,v,"fcTL"),v+=4,T(H,v,re++),v+=4,T(H,v,ie.rect.width),v+=4,T(H,v,ie.rect.height),v+=4,T(H,v,ie.rect.x),v+=4,T(H,v,ie.rect.y),v+=4,C(H,v,A[L]),v+=2,C(H,v,1e3),v+=2,H[v]=ie.dispose,v++,H[v]=ie.blend,v++,T(H,v,O(H,v-30,30)),v+=4);const de=ie.cimg;T(H,v,(q=de.length)+(L==0?0:4)),v+=4;const be=v;p(H,v,L==0?"IDAT":"fdAT"),v+=4,L!=0&&(T(H,v,re++),v+=4),H.set(de,v),v+=q,T(H,v,O(H,be,v-be)),v+=4}return T(H,v,0),v+=4,p(H,v,"IEND"),v+=4,T(H,v,O(H,v-4,4)),v+=4,H.buffer}function g(h,y,D){for(let A=0;A<h.frames.length;A++){const M=h.frames[A];M.rect.width;const O=M.rect.height,T=new Uint8Array(O*M.bpl+O);M.cimg=m(M.img,O,M.bpp,M.bpl,T,y,D)}}function i(h,y,D,A,M){const O=M[0],T=M[1],C=M[2],p=M[3],v=M[4],P=M[5];let I=6,N=8,j=255;for(var q=0;q<h.length;q++){const se=new Uint8Array(h[q]);for(var B=se.length,L=0;L<B;L+=4)j&=se[L+3]}const H=j!=255,le=function(ae,X,J,fe,ue,he){const we=[];for(var ye=0;ye<ae.length;ye++){const Ce=new Uint8Array(ae[ye]),Ae=new Uint32Array(Ce.buffer);var Se;let Fe=0,We=0,Be=X,tt=J,Rt=fe?1:0;if(ye!=0){const Qt=he||fe||ye==1||we[ye-2].dispose!=0?1:2;let jt=0,Xt=1e9;for(let Ft=0;Ft<Qt;Ft++){var ze=new Uint8Array(ae[ye-1-Ft]);const Jt=new Uint32Array(ae[ye-1-Ft]);let lt=X,st=J,_t=-1,bt=-1;for(let wt=0;wt<J;wt++)for(let xt=0;xt<X;xt++)Ae[Ue=wt*X+xt]!=Jt[Ue]&&(xt<lt&&(lt=xt),xt>_t&&(_t=xt),wt<st&&(st=wt),wt>bt&&(bt=wt));_t==-1&&(lt=st=_t=bt=0),ue&&((1&lt)==1&&lt--,(1&st)==1&&st--);const zt=(_t-lt+1)*(bt-st+1);zt<Xt&&(Xt=zt,jt=Ft,Fe=lt,We=st,Be=_t-lt+1,tt=bt-st+1)}ze=new Uint8Array(ae[ye-1-jt]),jt==1&&(we[ye-1].dispose=2),Se=new Uint8Array(Be*tt*4),s(ze,X,J,Se,Be,tt,-Fe,-We,0),Rt=s(Ce,X,J,Se,Be,tt,-Fe,-We,3)?1:0,Rt==1?l(Ce,X,J,Se,{x:Fe,y:We,width:Be,height:tt}):s(Ce,X,J,Se,Be,tt,-Fe,-We,0)}else Se=Ce.slice(0);we.push({rect:{x:Fe,y:We,width:Be,height:tt},img:Se,blend:Rt,dispose:0})}if(fe)for(ye=0;ye<we.length;ye++){if((qe=we[ye]).blend==1)continue;const Ce=qe.rect,Ae=we[ye-1].rect,Fe=Math.min(Ce.x,Ae.x),We=Math.min(Ce.y,Ae.y),Be={x:Fe,y:We,width:Math.max(Ce.x+Ce.width,Ae.x+Ae.width)-Fe,height:Math.max(Ce.y+Ce.height,Ae.y+Ae.height)-We};we[ye-1].dispose=1,ye-1!=0&&o(ae,X,J,we,ye-1,Be,ue),o(ae,X,J,we,ye,Be,ue)}let Ve=0;if(ae.length!=1)for(var Ue=0;Ue<we.length;Ue++){var qe;Ve+=(qe=we[Ue]).rect.width*qe.rect.height}return we}(h,y,D,O,T,C),re={},ie=[],de=[];if(A!=0){const se=[];for(L=0;L<le.length;L++)se.push(le[L].img.buffer);const ae=function(ue){let he=0;for(var we=0;we<ue.length;we++)he+=ue[we].byteLength;const ye=new Uint8Array(he);let Se=0;for(we=0;we<ue.length;we++){const ze=new Uint8Array(ue[we]),Ve=ze.length;for(let Ue=0;Ue<Ve;Ue+=4){let qe=ze[Ue],Ce=ze[Ue+1],Ae=ze[Ue+2];const Fe=ze[Ue+3];Fe==0&&(qe=Ce=Ae=0),ye[Se+Ue]=qe,ye[Se+Ue+1]=Ce,ye[Se+Ue+2]=Ae,ye[Se+Ue+3]=Fe}Se+=Ve}return ye.buffer}(se),X=k(ae,A);for(L=0;L<X.plte.length;L++)ie.push(X.plte[L].est.rgba);let J=0;for(L=0;L<le.length;L++){const fe=(De=le[L]).img.length;var be=new Uint8Array(X.inds.buffer,J>>2,fe>>2);de.push(be);const ue=new Uint8Array(X.abuf,J,fe);P&&f(De.img,De.rect.width,De.rect.height,ie,ue,be),De.img.set(ue),J+=fe}}else for(q=0;q<le.length;q++){var De=le[q];const se=new Uint32Array(De.img.buffer);var G=De.rect.width;for(B=se.length,be=new Uint8Array(B),de.push(be),L=0;L<B;L++){const ae=se[L];if(L!=0&&ae==se[L-1])be[L]=be[L-1];else if(L>G&&ae==se[L-G])be[L]=be[L-G];else{let X=re[ae];if(X==null&&(re[ae]=X=ie.length,ie.push(ae),ie.length>=300))break;be[L]=X}}}const ne=ie.length;for(ne<=256&&v==0&&(N=ne<=2?1:ne<=4?2:ne<=16?4:8,N=Math.max(N,p)),q=0;q<le.length;q++){(De=le[q]).rect.x,De.rect.y,G=De.rect.width;const se=De.rect.height;let ae=De.img;new Uint32Array(ae.buffer);let X=4*G,J=4;if(ne<=256&&v==0){X=Math.ceil(N*G/8);var Q=new Uint8Array(X*se);const fe=de[q];for(let ue=0;ue<se;ue++){L=ue*X;const he=ue*G;if(N==8)for(var ee=0;ee<G;ee++)Q[L+ee]=fe[he+ee];else if(N==4)for(ee=0;ee<G;ee++)Q[L+(ee>>1)]|=fe[he+ee]<<4-4*(1&ee);else if(N==2)for(ee=0;ee<G;ee++)Q[L+(ee>>2)]|=fe[he+ee]<<6-2*(3&ee);else if(N==1)for(ee=0;ee<G;ee++)Q[L+(ee>>3)]|=fe[he+ee]<<7-1*(7&ee)}ae=Q,I=3,J=1}else if(H==0&&le.length==1){Q=new Uint8Array(G*se*3);const fe=G*se;for(L=0;L<fe;L++){const ue=3*L,he=4*L;Q[ue]=ae[he],Q[ue+1]=ae[he+1],Q[ue+2]=ae[he+2]}ae=Q,I=2,J=3,X=3*G}De.img=ae,De.bpl=X,De.bpp=J}return{ctype:I,depth:N,plte:ie,frames:le}}function o(h,y,D,A,M,O,T){const C=Uint8Array,p=Uint32Array,v=new C(h[M-1]),P=new p(h[M-1]),I=M+1<h.length?new C(h[M+1]):null,N=new C(h[M]),j=new p(N.buffer);let q=y,B=D,L=-1,H=-1;for(let re=0;re<O.height;re++)for(let ie=0;ie<O.width;ie++){const de=O.x+ie,be=O.y+re,De=be*y+de,G=j[De];G==0||A[M-1].dispose==0&&P[De]==G&&(I==null||I[4*De+3]!=0)||(de<q&&(q=de),de>L&&(L=de),be<B&&(B=be),be>H&&(H=be))}L==-1&&(q=B=L=H=0),T&&((1&q)==1&&q--,(1&B)==1&&B--),O={x:q,y:B,width:L-q+1,height:H-B+1};const le=A[M];le.rect=O,le.blend=1,le.img=new Uint8Array(O.width*O.height*4),A[M-1].dispose==0?(s(v,y,D,le.img,O.width,O.height,-O.x,-O.y,0),l(N,y,D,le.img,O)):s(N,y,D,le.img,O.width,O.height,-O.x,-O.y,0)}function l(h,y,D,A,M){s(h,y,D,A,M.width,M.height,-M.x,-M.y,2)}function m(h,y,D,A,M,O,T){const C=[];let p,v=[0,1,2,3,4];O!=-1?v=[O]:(y*A>5e5||D==1)&&(v=[0]),T&&(p={level:0});const P=po;for(var I=0;I<v.length;I++){for(let q=0;q<y;q++)b(M,h,q,A,D,v[I]);C.push(P.deflate(M,p))}let N,j=1e9;for(I=0;I<C.length;I++)C[I].length<j&&(N=I,j=C[I].length);return C[N]}function b(h,y,D,A,M,O){const T=D*A;let C=T+D;if(h[C]=O,C++,O==0)if(A<500)for(var p=0;p<A;p++)h[C+p]=y[T+p];else h.set(new Uint8Array(y.buffer,T,A),C);else if(O==1){for(p=0;p<M;p++)h[C+p]=y[T+p];for(p=M;p<A;p++)h[C+p]=y[T+p]-y[T+p-M]+256&255}else if(D==0){for(p=0;p<M;p++)h[C+p]=y[T+p];if(O==2)for(p=M;p<A;p++)h[C+p]=y[T+p];if(O==3)for(p=M;p<A;p++)h[C+p]=y[T+p]-(y[T+p-M]>>1)+256&255;if(O==4)for(p=M;p<A;p++)h[C+p]=y[T+p]-n(y[T+p-M],0,0)+256&255}else{if(O==2)for(p=0;p<A;p++)h[C+p]=y[T+p]+256-y[T+p-A]&255;if(O==3){for(p=0;p<M;p++)h[C+p]=y[T+p]+256-(y[T+p-A]>>1)&255;for(p=M;p<A;p++)h[C+p]=y[T+p]+256-(y[T+p-A]+y[T+p-M]>>1)&255}if(O==4){for(p=0;p<M;p++)h[C+p]=y[T+p]+256-n(0,y[T+p-A],0)&255;for(p=M;p<A;p++)h[C+p]=y[T+p]+256-n(y[T+p-M],y[T+p-A],y[T+p-M-A])&255}}}function k(h,y){const D=new Uint8Array(h),A=D.slice(0),M=new Uint32Array(A.buffer),O=F(A,y),T=O[0],C=O[1],p=D.length,v=new Uint8Array(p>>2);let P;if(D.length<2e7)for(var I=0;I<p;I+=4)P=w(T,N=D[I]*(1/255),j=D[I+1]*(1/255),q=D[I+2]*(1/255),B=D[I+3]*(1/255)),v[I>>2]=P.ind,M[I>>2]=P.est.rgba;else for(I=0;I<p;I+=4){var N=D[I]*.00392156862745098,j=D[I+1]*(1/255),q=D[I+2]*(1/255),B=D[I+3]*(1/255);for(P=T;P.left;)P=W(P.est,N,j,q,B)<=0?P.left:P.right;v[I>>2]=P.ind,M[I>>2]=P.est.rgba}return{abuf:A.buffer,inds:v,plte:C}}function F(h,y,D){D==null&&(D=1e-4);const A=new Uint32Array(h.buffer),M={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};M.bst=S(h,M.i0,M.i1),M.est=_(M.bst);const O=[M];for(;O.length<y;){let C=0,p=0;for(var T=0;T<O.length;T++)O[T].est.L>C&&(C=O[T].est.L,p=T);if(C<D)break;const v=O[p],P=R(h,A,v.i0,v.i1,v.est.e,v.est.eMq255);if(v.i0>=P||v.i1<=P){v.est.L=0;continue}const I={i0:v.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};I.bst=S(h,I.i0,I.i1),I.est=_(I.bst);const N={i0:P,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};for(N.bst={R:[],m:[],N:v.bst.N-I.bst.N},T=0;T<16;T++)N.bst.R[T]=v.bst.R[T]-I.bst.R[T];for(T=0;T<4;T++)N.bst.m[T]=v.bst.m[T]-I.bst.m[T];N.est=_(N.bst),v.left=I,v.right=N,O[p]=I,O.push(N)}for(O.sort((C,p)=>p.bst.N-C.bst.N),T=0;T<O.length;T++)O[T].ind=T;return[M,O]}function w(h,y,D,A,M){if(h.left==null)return h.tdst=function(I,N,j,q,B){const L=N-I[0],H=j-I[1],le=q-I[2],re=B-I[3];return L*L+H*H+le*le+re*re}(h.est.q,y,D,A,M),h;const O=W(h.est,y,D,A,M);let T=h.left,C=h.right;O>0&&(T=h.right,C=h.left);const p=w(T,y,D,A,M);if(p.tdst<=O*O)return p;const v=w(C,y,D,A,M);return v.tdst<p.tdst?v:p}function W(h,y,D,A,M){const{e:O}=h;return O[0]*y+O[1]*D+O[2]*A+O[3]*M-h.eMq}function R(h,y,D,A,M,O){for(A-=4;D<A;){for(;E(h,D,M)<=O;)D+=4;for(;E(h,A,M)>O;)A-=4;if(D>=A)break;const T=y[D>>2];y[D>>2]=y[A>>2],y[A>>2]=T,D+=4,A-=4}for(;E(h,D,M)>O;)D-=4;return D+4}function E(h,y,D){return h[y]*D[0]+h[y+1]*D[1]+h[y+2]*D[2]+h[y+3]*D[3]}function S(h,y,D){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M=[0,0,0,0],O=D-y>>2;for(let T=y;T<D;T+=4){const C=h[T]*.00392156862745098,p=h[T+1]*(1/255),v=h[T+2]*(1/255),P=h[T+3]*(1/255);M[0]+=C,M[1]+=p,M[2]+=v,M[3]+=P,A[0]+=C*C,A[1]+=C*p,A[2]+=C*v,A[3]+=C*P,A[5]+=p*p,A[6]+=p*v,A[7]+=p*P,A[10]+=v*v,A[11]+=v*P,A[15]+=P*P}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:M,N:O}}function _(h){const{R:y}=h,{m:D}=h,{N:A}=h,M=D[0],O=D[1],T=D[2],C=D[3],p=A==0?0:1/A,v=[y[0]-M*M*p,y[1]-M*O*p,y[2]-M*T*p,y[3]-M*C*p,y[4]-O*M*p,y[5]-O*O*p,y[6]-O*T*p,y[7]-O*C*p,y[8]-T*M*p,y[9]-T*O*p,y[10]-T*T*p,y[11]-T*C*p,y[12]-C*M*p,y[13]-C*O*p,y[14]-C*T*p,y[15]-C*C*p],P=v,I=x;let N=[Math.random(),Math.random(),Math.random(),Math.random()],j=0,q=0;if(A!=0)for(let L=0;L<16&&(N=I.multVec(P,N),q=Math.sqrt(I.dot(N,N)),N=I.sml(1/q,N),!(L!=0&&Math.abs(q-j)<1e-9));L++)j=q;const B=[M*p,O*p,T*p,C*p];return{Cov:v,q:B,e:N,L:j,eMq255:I.dot(I.sml(255,B),N),eMq:I.dot(N,B),rgba:(Math.round(255*B[3])<<24|Math.round(255*B[2])<<16|Math.round(255*B[1])<<8|Math.round(255*B[0])<<0)>>>0}}var x={multVec:(h,y)=>[h[0]*y[0]+h[1]*y[1]+h[2]*y[2]+h[3]*y[3],h[4]*y[0]+h[5]*y[1]+h[6]*y[2]+h[7]*y[3],h[8]*y[0]+h[9]*y[1]+h[10]*y[2]+h[11]*y[3],h[12]*y[0]+h[13]*y[1]+h[14]*y[2]+h[15]*y[3]],dot:(h,y)=>h[0]*y[0]+h[1]*y[1]+h[2]*y[2]+h[3]*y[3],sml:(h,y)=>[h*y[0],h*y[1],h*y[2],h*y[3]]};it.encode=function(y,D,A,M,O,T,C){M==null&&(M=0),C==null&&(C=!1);const p=i(y,D,A,M,[!1,!1,!1,0,C,!1]);return g(p,-1),c(p,D,A,O,T)},it.encodeLL=function(y,D,A,M,O,T,C,p){const v={ctype:0+(M==1?0:2)+(O==0?0:4),depth:T,frames:[]},P=(M+O)*T,I=P*D;for(let N=0;N<y.length;N++)v.frames.push({rect:{x:0,y:0,width:D,height:A},img:new Uint8Array(y[N]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(I/8)});return g(v,0,!0),c(v,D,A,C,p)},it.encode.compress=i,it.encode.dither=f,it.quantize=k,it.quantize.getKDtree=F,it.quantize.getNearest=w})();const zn={toArrayBuffer(s,e){const n=s.width,t=s.height,r=n<<2,a=s.getContext("2d").getImageData(0,0,n,t),u=new Uint32Array(a.data.buffer),f=(32*n+31)/32<<2,c=f*t,g=122+c,i=new ArrayBuffer(g),o=new DataView(i),l=1<<20;let m,b,k,F,w=l,W=0,R=0,E=0;function S(h){o.setUint16(R,h,!0),R+=2}function _(h){o.setUint32(R,h,!0),R+=4}function x(h){R+=h}S(19778),_(g),x(4),_(122),_(108),_(n),_(-t>>>0),S(1),S(32),_(3),_(c),_(2835),_(2835),x(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function h(){for(;W<t&&w>0;){for(F=122+W*f,m=0;m<r;)w--,b=u[E++],k=b>>>24,o.setUint32(F+m,b<<8|k),m+=4;W++}E<u.length?(w=l,setTimeout(h,zn._dly)):e(i)}()},toBlob(s,e){this.toArrayBuffer(s,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},yo={[Xe.CHROME]:16384,[Xe.FIREFOX]:11180,[Xe.DESKTOP_SAFARI]:16384,[Xe.IE]:8192,[Xe.IOS]:4096,[Xe.ETC]:8192};const Br=typeof window<"u",Wn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,fr=Br&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),go=(Br||Wn)&&(fr&&fr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),qn=(Br||Wn)&&(fr&&fr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function $r(s,e,n=Date.now()){return new Promise(t=>{const r=s.split(","),a=r[0].match(/:(.*?);/)[1],u=globalThis.atob(r[1]);let f=u.length;const c=new Uint8Array(f);for(;f--;)c[f]=u.charCodeAt(f);const g=new Blob([c],{type:a});g.name=e,g.lastModified=n,t(g)})}function Bn(s){return new Promise((e,n)=>{const t=new qn;t.onload=()=>e(t.result),t.onerror=r=>n(r),t.readAsDataURL(s)})}function $n(s){return new Promise((e,n)=>{const t=new Image;t.onload=()=>e(t),t.onerror=r=>n(r),t.src=s})}function Ut(){if(Ut.cachedResult!==void 0)return Ut.cachedResult;let s=Xe.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?s=Xe.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?s=Xe.IOS:/Safari/i.test(e)?s=Xe.DESKTOP_SAFARI:/Firefox/i.test(e)?s=Xe.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(s=Xe.IE),Ut.cachedResult=s,Ut.cachedResult}function Qn(s,e){const n=Ut(),t=yo[n];let r=s,a=e,u=r*a;const f=r>a?a/r:r/a;for(;u>t*t;){const c=(t+r)/2,g=(t+a)/2;c<g?(a=g,r=g*f):(a=c*f,r=c),u=r*a}return{width:r,height:a}}function hr(s,e){let n,t;try{if(n=new OffscreenCanvas(s,e),t=n.getContext("2d"),t===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),t=n.getContext("2d")}return n.width=s,n.height=e,[n,t]}function jn(s,e){const{width:n,height:t}=Qn(s.width,s.height),[r,a]=hr(n,t);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,r.width,r.height)),a.drawImage(s,0,0,r.width,r.height),r}function sr(){return sr.cachedResult!==void 0||(sr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),sr.cachedResult}function vr(s,e={}){return new Promise(function(n,t){let r,a;var u=function(){try{return a=jn(r,e.fileType||s.type),n([r,a])}catch(c){return t(c)}},f=function(c){try{var g=function(i){try{throw i}catch(o){return t(o)}};try{let i;return Bn(s).then(function(o){try{return i=o,$n(i).then(function(l){try{return r=l,function(){try{return u()}catch(m){return t(m)}}()}catch(m){return g(m)}},g)}catch(l){return g(l)}},g)}catch(i){g(i)}}catch(i){return t(i)}};try{if(sr()||[Xe.DESKTOP_SAFARI,Xe.MOBILE_SAFARI].includes(Ut()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(s).then(function(c){try{return r=c,u()}catch{return f()}},f)}catch{f()}})}function mr(s,e,n,t,r=1){return new Promise(function(a,u){let f;if(e==="image/png"){let g,i,o;return g=s.getContext("2d"),{data:i}=g.getImageData(0,0,s.width,s.height),o=it.encode([i.buffer],s.width,s.height,4096*r),f=new Blob([o],{type:e}),f.name=n,f.lastModified=t,c.call(this)}{let g=function(){return c.call(this)};if(e==="image/bmp")return new Promise(i=>zn.toBlob(s,i)).then(function(i){try{return f=i,f.name=n,f.lastModified=t,g.call(this)}catch(o){return u(o)}}.bind(this),u);{let i=function(){return g.call(this)};if(typeof OffscreenCanvas=="function"&&s instanceof OffscreenCanvas)return s.convertToBlob({type:e,quality:r}).then(function(o){try{return f=o,f.name=n,f.lastModified=t,i.call(this)}catch(l){return u(l)}}.bind(this),u);{let o;return o=s.toDataURL(e,r),$r(o,n,t).then(function(l){try{return f=l,i.call(this)}catch(m){return u(m)}}.bind(this),u)}}}function c(){return a(f)}})}function dt(s){s.width=0,s.height=0}function qt(){return new Promise(function(s,e){let n,t,r,a;return qt.cachedResult!==void 0?s(qt.cachedResult):$r("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return n=u,vr(n).then(function(f){try{return t=f[1],mr(t,n.type,n.name,n.lastModified).then(function(c){try{return r=c,dt(t),vr(r).then(function(g){try{return a=g[0],qt.cachedResult=a.width===1&&a.height===2,s(qt.cachedResult)}catch(i){return e(i)}},e)}catch(g){return e(g)}},e)}catch(c){return e(c)}},e)}catch(f){return e(f)}},e)})}function Gn(s){return new Promise((e,n)=>{const t=new qn;t.onload=r=>{const a=new DataView(r.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const u=a.byteLength;let f=2;for(;f<u;){if(a.getUint16(f+2,!1)<=8)return e(-1);const c=a.getUint16(f,!1);if(f+=2,c==65505){if(a.getUint32(f+=2,!1)!=1165519206)return e(-1);const g=a.getUint16(f+=6,!1)==18761;f+=a.getUint32(f+4,g);const i=a.getUint16(f,g);f+=2;for(let o=0;o<i;o++)if(a.getUint16(f+12*o,g)==274)return e(a.getUint16(f+12*o+8,g))}else{if((65280&c)!=65280)break;f+=a.getUint16(f,!1)}}return e(-1)},t.onerror=r=>n(r),t.readAsArrayBuffer(s)})}function Zn(s,e){const{width:n}=s,{height:t}=s,{maxWidthOrHeight:r}=e;let a,u=s;return isFinite(r)&&(n>r||t>r)&&([u,a]=hr(n,t),n>t?(u.width=r,u.height=t/n*r):(u.width=n/t*r,u.height=r),a.drawImage(s,0,0,u.width,u.height),dt(s)),u}function Kn(s,e){const{width:n}=s,{height:t}=s,[r,a]=hr(n,t);switch(e>4&&e<9?(r.width=t,r.height=n):(r.width=n,r.height=t),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,t);break;case 4:a.transform(1,0,0,-1,0,t);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,t,0);break;case 7:a.transform(0,-1,-1,0,t,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(s,0,0,n,t),dt(s),r}function yn(s,e,n=0){return new Promise(function(t,r){let a,u,f,c,g,i,o,l,m,b,k,F,w,W,R,E,S,_,x,h;function y(A=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=A,e.onProgress(Math.min(a,100))}function D(A){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(A,a),100),e.onProgress(a)}return a=n,u=e.maxIteration||10,f=1024*e.maxSizeMB*1024,y(),vr(s,e).then(function(A){try{return[,c]=A,y(),g=Zn(c,e),y(),new Promise(function(M,O){var T;if(!(T=e.exifOrientation))return Gn(s).then(function(p){try{return T=p,C.call(this)}catch(v){return O(v)}}.bind(this),O);function C(){return M(T)}return C.call(this)}).then(function(M){try{return i=M,y(),qt().then(function(O){try{return o=O?g:Kn(g,i),y(),l=e.initialQuality||1,m=e.fileType||s.type,mr(o,m,s.name,s.lastModified,l).then(function(T){try{{let p=function(){if(u--&&(R>f||R>w)){let P,I;return P=h?.95*x.width:x.width,I=h?.95*x.height:x.height,[S,_]=hr(P,I),_.drawImage(x,0,0,P,I),l*=m==="image/png"?.85:.95,mr(S,m,s.name,s.lastModified,l).then(function(N){try{return E=N,dt(x),x=S,R=E.size,D(Math.min(99,Math.floor((W-R)/(W-f)*100))),p}catch(j){return r(j)}},r)}return[1]},v=function(){return dt(x),dt(S),dt(g),dt(o),dt(c),D(100),t(E)};if(b=T,y(),k=b.size>f,F=b.size>s.size,!k&&!F)return D(100),t(b);var C;return w=s.size,W=b.size,R=W,x=o,h=!e.alwaysKeepResolution&&k,(C=function(P){for(;P;){if(P.then)return void P.then(C,r);try{if(P.pop){if(P.length)return P.pop()?v.call(this):P;P=p}else P=P.call(this)}catch(I){return r(I)}}}.bind(this))(p)}}catch(p){return r(p)}}.bind(this),r)}catch(T){return r(T)}}.bind(this),r)}catch(O){return r(O)}}.bind(this),r)}catch(M){return r(M)}}.bind(this),r)})}const _o=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let kr;function bo(s,e){return new Promise((n,t)=>{kr||(kr=function(u){const f=[];return f.push(u),URL.createObjectURL(new Blob(f))}(_o));const r=new Worker(kr);r.addEventListener("message",function(u){if(e.signal&&e.signal.aborted)r.terminate();else if(u.data.progress===void 0){if(u.data.error)return t(new Error(u.data.error)),void r.terminate();n(u.data.file),r.terminate()}else e.onProgress(u.data.progress)}),r.addEventListener("error",t),e.signal&&e.signal.addEventListener("abort",()=>{t(e.signal.reason),r.terminate()}),r.postMessage({file:s,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function je(s,e){return new Promise(function(n,t){let r,a,u,f,c,g;if(r={...e},u=0,{onProgress:f}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=m=>{u=m,typeof f=="function"&&f(u)},!(s instanceof Blob||s instanceof go))return t(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(s.type))return t(new Error("The file given is not an image"));if(g=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||g)return yn(s,r).then(function(m){try{return a=m,l.call(this)}catch(b){return t(b)}}.bind(this),t);var i=function(){try{return l.call(this)}catch(m){return t(m)}}.bind(this),o=function(m){try{return yn(s,r).then(function(b){try{return a=b,i()}catch(k){return t(k)}},t)}catch(b){return t(b)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",bo(s,r).then(function(m){try{return a=m,i()}catch{return o()}},o)}catch{o()}function l(){try{a.name=s.name,a.lastModified=s.lastModified}catch{}try{r.preserveExif&&s.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===s.type)&&(a=Hn(s,a))}catch{}return n(a)}})}je.getDataUrlFromFile=Bn,je.getFilefromDataUrl=$r,je.loadImage=$n,je.drawImageInCanvas=jn,je.drawFileInCanvas=vr,je.canvasToFile=mr,je.getExifOrientation=Gn,je.handleMaxWidthOrHeight=Zn,je.followExifOrientation=Kn,je.cleanupCanvasMemory=dt,je.isAutoOrientationInBrowser=qt,je.approximateBelowMaximumCanvasSizeOfBrowser=Qn,je.copyExifWithoutOrientation=Hn,je.getBrowserName=Ut,je.version="2.0.2";const wo={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function xo(s,e,n={},t){const r={...wo,...n};try{let a=s;if(s.type.startsWith("image/")&&s.size>r.compressionThresholdMB*1024*1024){t?.("Compressing image...");try{const c=await je(s,{maxSizeMB:r.maxSizeMB,maxWidthOrHeight:r.maxWidthOrHeight,initialQuality:r.initialQuality,useWebWorker:r.useWebWorker});a=c;const g=(s.size/(1024*1024)).toFixed(2),i=(c.size/(1024*1024)).toFixed(2),o=((1-c.size/s.size)*100).toFixed(0);console.log(`Image compressed: ${g}MB → ${i}MB (${o}% smaller)`)}catch(c){console.warn("Image compression failed, uploading original:",c)}}return t?.("Uploading file..."),{success:!0,attachment:await On(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function Do(s){try{const e=zr(s.url);return await Pn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function ko(s,e,n){return s.map(t=>t.id===e?{...t,name:n}:t)}function Eo(s,e=5){const n=s.type.startsWith("image/"),t=e*1024*1024;if(!n&&s.size>t){const r=(s.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${r}MB)`}}return{valid:!0}}function To(s){return{uploadAttachment:(e,n,t)=>xo(e,n,s,t),removeAttachment:Do,updateAttachmentName:ko,validateFile:Eo}}function gn(s,e){const[n,t]=e.split(":").map(Number);let r=Ns(s,n);return r=Ys(r,t),r}function _n(s){return Array.from(new Set(s)).sort((e,n)=>e-n)}function Ao(s,e){if(e.includes(s))return 0;const n=e.find(t=>t>s);return n!==void 0?n-s:7-s+e[0]}function Mo(s,e,n){const t=new Date(s),r=yt(t,$e),a=r.getDay(),u=Ao(a,n);if(u===0)return{start_time:s,end_time:e};const f=Nt(r,u),c=It(f,$e);let g=e;if(e){const i=yt(new Date(e),$e),o=Nt(i,u);g=It(o,$e).toISOString()}return{start_time:c.toISOString(),end_time:g}}function Vn({eventItem:s,dateInput:e,startTimeInput:n,endTimeInput:t,attachments:r,isRecurring:a,recurrenceFrequency:u,recurrenceInterval:f,recurringDays:c,recurrenceEndDate:g,hasEndDate:i,monthlyType:o}){const l=!s.id,m={...s.meta_data??{}};if(s.category&&(m.category=s.category),l){const E=Ca(),S=E?Ar(E.stores.currentUser):void 0,_=S?.displayName||S?.username,x=S?.id;_&&!m.submitted_by_name&&(m.submitted_by_name=_),x&&!m.submitted_by_user_id&&(m.submitted_by_user_id=x),m.submitted_at||(m.submitted_at=new Date().toISOString())}const b=Object.keys(m).length?m:void 0,k={title:s.title,description:s.description,location:s.location,is_public:s.is_public??!0,event_type:s.event_type,meta_data:b,attachments:r.length>0?r:null};if(s.event_type!=="calendar_event")return{...k,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const F=e?lr(e,"yyyy-MM-dd",new Date):new Date;let w,W;if(s.is_all_day){const E=It(F,$e);w=E.toISOString(),W=E.toISOString()}else{const E=new Date(F.getTime()),S=new Date(F.getTime()),_=n?gn(E,n):F,x=t?gn(S,t):F;w=It(_,$e).toISOString(),W=It(x,$e).toISOString()}const R={...k,start_time:w,end_time:W,is_all_day:s.is_all_day};if(a&&R.start_time){if(u==="weekly"&&c.length>0){const S=_n(c),_=Mo(R.start_time,R.end_time,S);R.start_time=_.start_time,R.end_time=_.end_time}if(u==="daily"||u==="yearly"||u==="weekly"&&c.length>0||u==="monthly"){const{recurrence_rule:S,recurrence_end_date:_}=qr({frequency:u,interval:f,recurringDays:u==="weekly"?_n(c):[],recurrenceEndDate:g,hasEndDate:i,monthlyType:o,startTime:R.start_time});R.recurrence_rule=S,R.recurrence_end_date=_}else R.recurrence_rule=void 0,R.recurrence_end_date=void 0}else R.recurrence_rule=void 0,R.recurrence_end_date=void 0;return R}async function Io({id:s,...e}){const n=Vn(e);return s?{action:"update",event:await Ct(s,n)}:{action:"create",event:await Lr(n)}}async function Co(s){await Hr(s)}function Ro({event:s,newDate:e}){const n=s.start_time?new Date(s.start_time):new Date,t=s.end_time?new Date(s.end_time):new Date,[r,a,u]=e.split("-").map(Number),f=new Date(n);f.setFullYear(r,a-1,u);const c=new Date(t);return c.setFullYear(r,a-1,u),{...s,id:void 0,title:`CLONED - ${s.title}`,start_time:f.toISOString(),end_time:c.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function Fo(s,e,n){const t=await Ht(s);if(!t)throw new Error("Event not found");const r=t.recurrence_exceptions||[];r.includes(e)||r.push(e);const a=t.recurrence_overrides||{};a[e]={title:n.title,description:n.description,location:n.location,start_time:n.start_time,end_time:n.end_time,is_all_day:n.is_all_day,meta_data:n.meta_data},await Ct(s,{recurrence_exceptions:r,recurrence_overrides:a})}async function Oo(s,e,n){const t=await Ht(s);if(!t||!t.recurrence_rule||!t.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:r,generateRecurrenceRule:a}=await Mr(async()=>{const{parseRecurrenceRule:R,generateRecurrenceRule:E}=await Promise.resolve().then(()=>Fr);return{parseRecurrenceRule:R,generateRecurrenceRule:E}},void 0,import.meta.url),u=r(t.recurrence_rule,t.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const f=Ie(new Date(t.start_time),"yyyy-MM-dd"),c=lr(e,"yyyy-MM-dd",new Date),g=lr(f,"yyyy-MM-dd",new Date);if(c<=g)return await Ct(s,n),s;const i=Nt(c,-1),o=Ie(i,"yyyy-MM-dd"),{recurrence_rule:l,recurrence_end_date:m}=a({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:o,hasEndDate:!0,monthlyType:u.monthlyType,startTime:t.start_time});await Ct(s,{recurrence_rule:l,recurrence_end_date:m});const b=u.hasEndDate?u.recurrenceEndDate:"",{recurrence_rule:k,recurrence_end_date:F}=a({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:b,hasEndDate:u.hasEndDate,monthlyType:u.monthlyType,startTime:n.start_time||t.start_time}),w={...n,recurrence_rule:k,recurrence_end_date:F};return(await Lr(w))?.id||0}async function Po(s,e){const n=await Ht(s);if(!n)throw new Error("Event not found");const t={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:n.start_time,end_time:n.end_time,recurrence_rule:n.recurrence_rule,recurrence_end_date:n.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Ct(s,t)}async function So(s,e){const n=await Ht(s);if(!n)throw new Error("Event not found");const t=n.recurrence_exceptions||[];t.includes(e)||t.push(e);const r=n.recurrence_overrides||{};r[e]&&delete r[e],await Ct(s,{recurrence_exceptions:t,recurrence_overrides:r})}async function Uo(s,e){const n=await Ht(s);if(!n||!n.recurrence_rule||!n.start_time)throw new Error("Event not found or is not recurring");const t=lr(e,"yyyy-MM-dd",new Date),r=Nt(t,-1),a=Ie(r,"yyyy-MM-dd"),{parseRecurrenceRule:u}=await Mr(async()=>{const{parseRecurrenceRule:o}=await Promise.resolve().then(()=>Fr);return{parseRecurrenceRule:o}},void 0,import.meta.url),f=u(n.recurrence_rule,n.recurrence_end_date);if(!f)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:c}=await Mr(async()=>{const{generateRecurrenceRule:o}=await Promise.resolve().then(()=>Fr);return{generateRecurrenceRule:o}},void 0,import.meta.url),{recurrence_rule:g,recurrence_end_date:i}=c({frequency:f.frequency,interval:f.interval,recurringDays:f.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:f.monthlyType,startTime:n.start_time});await Ct(s,{recurrence_rule:g,recurrence_end_date:i})}async function No(s){await Hr(s)}function Yo(){return{saveEvent:Io,deleteEventById:Co,cloneEventForDate:Ro,buildEventPayload:Vn,saveSingleInstance:Fo,saveFutureInstances:Oo,saveAllInstances:Po,deleteSingleInstance:So,deleteFutureInstances:Uo,deleteAllInstances:No}}var Lo=oe('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Ho=oe('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),zo=oe("<!> <!>",1),Wo=oe('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),qo=oe("<span>Save</span>"),Bo=oe("<span>Create</span>"),$o=oe('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Qo=oe('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div></div> <!> <!>',1);function Cl(s,e){nt(e,!1);const n=()=>bn(l,"$validationErrors",t),[t,r]=wn(),a=ve(),u=ve(),f=ve();let c=pe(e,"name",8,""),g=pe(e,"drawerId",8,""),i=pe(e,"eventItem",12,Ra);const{actions:{reload:o}}=Un(),{validationErrors:l,validate:m,getErrorMessages:b,clearErrors:k}=fo(),{parseRecurrenceRule:F}=Ln(),{uploadAttachment:w,removeAttachment:W,updateAttachmentName:R,validateFile:E}=To(),{saveEvent:S,deleteEventById:_,cloneEventForDate:x,buildEventPayload:h,saveSingleInstance:y,saveFutureInstances:D,saveAllInstances:A,deleteSingleInstance:M,deleteFutureInstances:O,deleteAllInstances:T}=Yo();let C=ve(!1),p=ve(!1),v=ve(!1),P=ve("weekly"),I=ve(1),N=ve([]),j=ve(""),q=ve(!0),B=ve("date"),L=ve([]),H=ve(!1),le=ve(!1),re=ve(void 0),ie=ve(void 0),de=ve(!1),be=ve(null),De=ve(!1),G=ve(null),ne=ve(0),Q=ve({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),ee=ve({message:"",type:"info"}),se=ve(""),ae=ve(""),X=ve(""),J=ve({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"});const fe=(ce,Z)=>ce.length===Z.length&&ce.every((ke,Re)=>ke===Z[Re]),ue=()=>{const ce=`[data-bs-target="#${g()}"]`,Z=document.querySelector(ce);Z&&Z.click()},he=(ce,Z=0,ke="info")=>{gr(ee,d(ee).message=ce),gr(ee,d(ee).type=ke),Z&&setTimeout(()=>{gr(ee,d(ee).message="")},Z)},we=async ce=>{const Z=ce.detail;if(!Z)return;const ke=E(Z);if(!ke.valid){he(ke.error??"Invalid file selected",7e3,"danger");return}z(p,!0);try{const Re=await w(Z,d(a)??"temp",Ot=>he(Ot));if(!Re.success||!Re.attachment)throw new Error(Re.error??"Upload failed");z(L,[...d(L),Re.attachment]),z(H,!0),he("File uploaded!",3e3,"success")}catch(Re){console.error("File upload failed:",Re),he("Failed to upload file. Please try again.",7e3,"danger")}finally{z(p,!1)}},ye=ce=>{const{attachment:Z,newName:ke}=ce.detail;z(L,R(d(L),Z.id,ke)),z(H,!0),he("Attachment name updated!",3e3,"success")},Se=async ce=>{const Z=ce.detail;if(Z){z(p,!0);try{if(!await W(Z))throw new Error("Failed to remove attachment");z(L,d(L).filter(Re=>Re.id!==Z.id)),z(H,!0),he("Attachment removed!",3e3,"success")}catch(ke){console.error("Failed to remove attachment:",ke),he("Failed to remove attachment. Please try again.",7e3,"danger")}finally{z(p,!1)}}},ze=async()=>{if(!d(a)){he("ID is not defined",0,"danger");return}try{await _(d(a)),await o(),Dt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{z(C,!1),z(Q,{...i(),id:d(a)}),he("Event Deleted",3e3,"success"),ue()},800)}catch(ce){Dt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{z(C,!1),console.error("Delete failed:",ce),he("Failed to delete event. Please try again.",7e3,"danger")},800)}},Ve=()=>!!i().recurrence_rule,Ue=async()=>{const ce=d(a)||i().meta_data?.recurring_parent_id;if(ce&&d(le)&&d(ie)&&d(re)){if(z(G,null),z(De,!0),await new Promise(Z=>{const ke=setInterval(()=>{d(De)||(clearInterval(ke),Z())},50)}),!d(G))return;z(C,!0);try{d(G)==="single"?await M(ce,d(re)):d(G)==="future"?await O(ce,d(re)):d(G)==="all"&&await T(ce),await o(),Dt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{z(C,!1),z(Q,{...i(),id:d(a)}),he("Event Deleted",3e3,"success"),ue()},800)}catch(Z){Dt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{z(C,!1),console.error("Delete failed:",Z),he("Failed to delete event. Please try again.",7e3,"danger")},800)}}else z(C,!0),Pa({title:"Delete Confirmation",message:Ve()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:Z=>{Z?ze():z(C,!1)}})},qe=ce=>{if(d(a))try{const Z=x({event:i(),newDate:ce});Dt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),he("Event cloned. Review and click Create to save.",5e3,"success"),i(Z),z(se,Z.start_time?Ie(new Date(Z.start_time),"yyyy-MM-dd"):""),z(ae,Z.start_time?Ie(new Date(Z.start_time),"HH:mm"):""),z(X,Z.end_time?Ie(new Date(Z.end_time),"HH:mm"):""),z(L,[]),z(v,!1),z(N,[]),z(j,""),z(q,!0),z(H,!0),z(ne,void 0),z(Q,{...Z}),z(J,{dateInput:d(se),startTimeInput:d(ae),endTimeInput:d(X),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(Z){console.error("Clone failed:",Z),he("Failed to clone event. Please try again.",7e3,"danger")}},Ce=()=>{co({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:d(se),callback:(ce,Z)=>{ce&&Z&&qe(Z)}})},Ae=async()=>{if(d(a)&&!d(f)){he("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await m({title:i().title,event_type:i().event_type,category:i().category??"",description:i().description,location:i().location,is_all_day:i().is_all_day,dateInput:d(se),startTimeInput:d(ae),endTimeInput:d(X),isRecurring:d(v),recurrenceFrequency:d(P),recurringDays:d(v)?d(N):[],recurrenceEndDate:d(v)?d(j):void 0,hasEndDate:d(q)})){const ke=b();ke.length&&he(ke.join(". ")+".  Please address accordingly.",0,"danger");return}const Z=d(a)||i().meta_data?.recurring_parent_id;if(Z&&d(le)&&d(ie)&&d(re)){if(z(be,null),z(de,!0),await new Promise(Re=>{const Ot=setInterval(()=>{d(de)||(clearInterval(Ot),Re())},100)}),!d(be)||d(C))return;he("Saving ..."),z(C,!0);const ke=h({eventItem:i(),dateInput:d(se),startTimeInput:d(ae),endTimeInput:d(X),attachments:d(L),isRecurring:d(u)&&d(v),recurrenceFrequency:d(P),recurrenceInterval:d(I),recurringDays:d(v)?d(N):[],recurrenceEndDate:d(v)?d(j):"",hasEndDate:d(q),monthlyType:d(B)});try{let Re;d(be)==="single"?await y(Z,d(re),ke):d(be)==="future"?Re=await D(Z,d(re),ke):d(be)==="all"&&await A(Z,ke),await o(),await ha(),Dt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${i().title}`,1),z(C,!1),Re&&i({...i(),id:Re}),i(i().attachments=d(L),!0),z(Q,{...i(),id:Re||Z}),z(H,!1),he("Saved",3e3,"success"),ue()}catch(Re){Dt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${i().title}`,1),setTimeout(()=>{z(C,!1),console.error("Save failed:",Re),he("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(d(C))return;he("Saving ..."),z(C,!0);try{const ke=await S({id:d(a),eventItem:i(),dateInput:d(se),startTimeInput:d(ae),endTimeInput:d(X),attachments:d(L),isRecurring:d(u)&&d(v),recurrenceFrequency:d(P),recurrenceInterval:d(I),recurringDays:d(v)?d(N):[],recurrenceEndDate:d(v)?d(j):"",hasEndDate:d(q),monthlyType:d(B)});ke.event&&i({...i(),...ke.event}),i(i().attachments=d(L),!0),await o(),Dt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${i().title}`,1),setTimeout(()=>{z(C,!1),z(Q,{...i(),id:d(a)}),z(H,!1),he("Saved",3e3,"success"),ue()},800)}catch(ke){Dt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${i().title}`,1),setTimeout(()=>{z(C,!1),console.error("Save failed:",ke),he("Failed to save event. Please try again.",7e3,"danger")},800)}}};Oe(()=>K(i()),()=>{z(a,i().id)}),Oe(()=>K(i()),()=>{z(u,i().event_type==="calendar_event")}),Oe(()=>(d(u),d(v),d(N),d(j)),()=>{!d(u)&&(d(v)||d(N).length>0||d(j))&&(z(v,!1),z(P,"weekly"),z(I,1),z(N,[]),z(j,""),z(q,!0),z(B,"date"))}),Oe(()=>(K(i()),d(ne),d(Q),d(H),d(se),d(ae),d(X),d(v),d(P),d(I),d(N),d(j),d(q),d(B)),()=>{if(i()?.id!==d(ne)||i()?.start_time!==d(Q).start_time||i()?.meta_data?.recurring_instance_index!==d(Q).meta_data?.recurring_instance_index){z(C,!0);const ce=d(H),Z=i();setTimeout(()=>{const ke=Z.event_type==="calendar_event";if(z(se,ke&&Z.start_time?Ie(new Date(Z.start_time),"yyyy-MM-dd"):""),z(ae,ke&&Z.start_time?Ie(new Date(Z.start_time),"HH:mm"):""),z(X,ke&&Z.end_time?Ie(new Date(Z.end_time),"HH:mm"):""),ce||z(L,Z.attachments?[...Z.attachments]:[]),Z.meta_data?.recurring_instance&&Z.start_time?(z(ie,Z.recurrence_rule),z(le,!0),z(re,Ie(new Date(Z.start_time),"yyyy-MM-dd"))):(z(ie,void 0),z(le,!1),z(re,void 0)),Z.recurrence_rule){const Re=F(Z.recurrence_rule,Z.recurrence_end_date);Re?(z(v,!0),z(P,Re.frequency),z(I,Re.interval),z(N,Re.recurringDays),z(j,Re.recurrenceEndDate),z(q,Re.hasEndDate),z(B,Re.monthlyType)):(z(v,!1),z(P,"weekly"),z(I,1),z(N,[]),z(j,""),z(q,!0),z(B,"date"))}else z(v,!1),z(P,"weekly"),z(I,1),z(N,[]),z(j,""),z(q,!0),z(B,"date");z(ne,Z.id),z(Q,{...Z}),z(C,!1),z(H,!1),k(),z(J,{dateInput:d(se),startTimeInput:d(ae),endTimeInput:d(X),isRecurring:d(v),recurrenceFrequency:d(P),recurrenceInterval:d(I),recurringDays:[...d(N)],recurrenceEndDate:d(j),hasEndDate:d(q),monthlyType:d(B)})},200)}}),Oe(()=>(d(Q),K(i()),d(L),d(se),d(J),d(ae),d(X),d(v),d(P),d(I),d(N),d(j),d(q),d(B)),()=>{z(f,d(Q).title!==i().title||d(Q).start_time!==i().start_time||d(Q).end_time!==i().end_time||d(Q).description!==i().description||d(Q).location!==i().location||d(Q).is_public!==i().is_public||d(Q).category!==i().category||d(Q).is_all_day!==i().is_all_day||JSON.stringify(d(L))!==JSON.stringify(i().attachments||[])||d(Q).recurrence_rule!==i().recurrence_rule||d(Q).recurrence_end_date!==i().recurrence_end_date||d(se)!==d(J).dateInput||d(ae)!==d(J).startTimeInput||d(X)!==d(J).endTimeInput||d(v)!==d(J).isRecurring||d(P)!==d(J).recurrenceFrequency||d(I)!==d(J).recurrenceInterval||!fe(d(N),d(J).recurringDays)||d(j)!==d(J).recurrenceEndDate||d(q)!==d(J).hasEndDate||d(B)!==d(J).monthlyType)}),Yt(),ot();var Fe=Qo(),We=Qe(Fe),Be=Y(We);{var tt=ce=>{var Z=Lo();te(ce,Z)};me(Be,ce=>{K(i()),d(a),V(()=>i().recurrence_rule&&d(a))&&ce(tt)})}var Rt=$(Be,2),Qt=Y(Rt),jt=$(Y(Qt),2);{var Xt=ce=>{var Z=Ho();ge(()=>Z.disabled=d(C)||d(p)),xe("click",Z,Ce),te(ce,Z)};me(jt,ce=>{d(a)&&ce(Xt)})}U(Qt);var Ft=$(Qt,2);{let ce=Wt(()=>d(C)||d(p));Fi(Ft,{get disabled(){return d(ce)},get name(){return c()},get validationErrors(){return n()},get title(){return i().title},set title(Z){i(i().title=Z,!0)},get eventType(){return i().event_type},set eventType(Z){i(i().event_type=Z,!0)},get category(){return i().category},set category(Z){i(i().category=Z,!0)},get isPublic(){return i().is_public},set isPublic(Z){i(i().is_public=Z,!0)},get description(){return i().description},set description(Z){i(i().description=Z,!0)},$$legacy:!0})}U(Rt);var Jt=$(Rt,2);{var lt=ce=>{var Z=zo(),ke=Qe(Z);{let Ot=Wt(()=>d(C)||d(p));Yi(ke,{get disabled(){return d(Ot)},get name(){return c()},get validationErrors(){return n()},get dateInput(){return d(se)},set dateInput(Ye){z(se,Ye)},get startTimeInput(){return d(ae)},set startTimeInput(Ye){z(ae,Ye)},get endTimeInput(){return d(X)},set endTimeInput(Ye){z(X,Ye)},get isAllDay(){return i().is_all_day},set isAllDay(Ye){i(i().is_all_day=Ye,!0)},$$legacy:!0})}var Re=$(ke,2);{let Ot=Wt(()=>d(C)||d(p));Qi(Re,{get disabled(){return d(Ot)},get name(){return c()},get validationErrors(){return n()},get isRecurring(){return d(v)},set isRecurring(Ye){z(v,Ye)},get recurrenceFrequency(){return d(P)},set recurrenceFrequency(Ye){z(P,Ye)},get recurrenceInterval(){return d(I)},set recurrenceInterval(Ye){z(I,Ye)},get recurringDays(){return d(N)},set recurringDays(Ye){z(N,Ye)},get recurrenceEndDate(){return d(j)},set recurrenceEndDate(Ye){z(j,Ye)},get monthlyType(){return d(B)},set monthlyType(Ye){z(B,Ye)},get dateInput(){return d(se)},set dateInput(Ye){z(se,Ye)},$$legacy:!0})}te(ce,Z)};me(Jt,ce=>{d(u)&&ce(lt)})}var st=$(Jt,2);{let ce=Wt(()=>d(C)||d(p));ro(st,{get attachments(){return d(L)},get uploadingFile(){return d(p)},get disabled(){return d(ce)},$$events:{upload:we,edit:ye,remove:Se}})}var _t=$(st,2);{let ce=Wt(()=>d(C)||d(p)),Z=Wt(()=>`${c()}-location`);Gi(_t,{get disabled(){return d(ce)},get name(){return d(Z)},get value(){return i().location},set value(ke){i(i().location=ke,!0)},$$legacy:!0})}var bt=$(_t,2),zt=Y(bt),wt=Y(zt);{var xt=ce=>{var Z=Wo();ge(()=>Z.disabled=d(C)||d(p)),xe("click",Z,Ue),te(ce,Z)};me(wt,ce=>{(d(a)||d(le))&&ce(xt)})}U(zt);var Qr=$(zt,2),pr=Y(Qr),er=$(pr,2),jr=Y(er);{var Xn=ce=>{var Z=qo();te(ce,Z)},Jn=ce=>{var Z=Bo();te(ce,Z)};me(jr,ce=>{d(a)||d(le)?ce(Xn):ce(Jn,!1)})}var ea=$(jr,2);{var ta=ce=>{var Z=$o();te(ce,Z)};me(ea,ce=>{d(f)&&ce(ta)})}U(er),U(Qr),U(bt);var Gr=$(bt,2),tr=Y(Gr),ra=Y(tr,!0);U(tr);var yr=$(tr,2);let Zr;var na=Y(yr);Tn(na,{size:"xs"}),U(yr),U(Gr),U(We);var Kr=$(We,2);{var aa=ce=>{ao(ce,{get eventTitle(){return K(i()),V(()=>i().title)},get occurrenceDate(){return d(re)},callback:Z=>{z(be,Z),z(de,!1)}})};me(Kr,ce=>{d(de)&&d(re)&&ce(aa)})}var sa=$(Kr,2);{var ia=ce=>{io(ce,{get eventTitle(){return K(i()),V(()=>i().title)},get occurrenceDate(){return d(re)},callback:Z=>{z(G,Z),z(De,!1)}})};me(sa,ce=>{d(De)&&d(re)&&ce(ia)})}ge(()=>{pr.disabled=d(C)||d(p),er.disabled=d(C)||d(p),et(tr,1,`fw-lighter fst-italic text-${d(ee),V(()=>d(ee).type)??""}`),_e(ra,(d(ee),V(()=>d(ee).message))),Zr=et(yr,1,"",null,Zr,{"d-none":!d(C)})}),xe("click",pr,ue),xe("click",er,Ae),te(s,Fe),at(),r()}var jo=oe('<span class="text-muted">•</span>'),Go=oe("<span> </span> <!>",1),Zo=oe('<span class="text-muted">•</span>'),Ko=oe('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Vo=oe('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Xo=oe('<div class="small text-muted posted-meta svelte-1bpzga2">Posted <!> <!></div>'),Jo=oe('<div class="small svelte-1bpzga2"><!> <!></div>'),el=oe('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),tl=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),rl=oe('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),nl=oe('<div class="details-container svelte-1bpzga2"><!> <!></div>'),al=oe('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),sl=oe('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Rl(s,e){nt(e,!1);const n=ve(),t=ve(),r=ve(),a=ve(),u=ve(),f=ve();let c=pe(e,"item",8),g=pe(e,"showDetails",12,!1),i=pe(e,"searchQuery",8,"");const o=v=>v<1024?v+" B":v<1024*1024?(v/1024).toFixed(1)+" KB":(v/(1024*1024)).toFixed(1)+" MB",l=v=>v.startsWith("image/"),m=v=>{window.open(v,"_blank")},b=v=>{if(!v)return"";try{return Ie(vt(v),"MMM d, yyyy 'at' h:mm a")}catch{return""}},k=()=>{d(t)&&g(!g())},F=v=>{d(t)&&(v.key==="Enter"||v.key===" ")&&k()};Oe(()=>K(c()),()=>{z(n,c().attachments&&c().attachments.length>0?c().attachments.find(v=>l(v.type)):void 0)}),Oe(()=>K(c()),()=>{z(t,!!(c().description||c().attachments&&c().attachments.length>0))}),Oe(()=>K(c()),()=>{z(r,c().meta_data?.submitted_at??c().created_at)}),Oe(()=>d(r),()=>{z(a,b(d(r)))}),Oe(()=>K(c()),()=>{z(u,c().meta_data?.submitted_by_name)}),Oe(()=>(d(a),d(u)),()=>{z(f,!!(d(a)||d(u)))}),Yt(),ot();var w=sl(),W=Y(w),R=Y(W),E=Y(R),S=Y(E);$t(S,()=>(K(At),K(c()),K(i()),V(()=>At(c().title||"",i())))),U(E);var _=$(E,2),x=Y(_);{var h=v=>{var P=Go(),I=Qe(P),N=Y(I,!0);U(I);var j=$(I,2);{var q=B=>{var L=jo();te(B,L)};me(j,B=>{K(c()),V(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&B(q)})}ge((B,L)=>{et(I,1,`badge rounded-pill bg-color-${B??""}`,"svelte-1bpzga2"),_e(N,L)},[()=>(K(Tt),K(c()),V(()=>Tt(c()?.meta_data?.category)?.color_number)),()=>(K(Tt),K(c()),V(()=>Tt(c()?.meta_data?.category)?.label))]),te(v,P)};me(x,v=>{K(c()),V(()=>c()?.meta_data?.category)&&v(h)})}var y=$(x,2);{var D=v=>{var P=Ko(),I=Qe(P),N=Y(I);$t(N,()=>(K(At),K(c()),K(i()),V(()=>At(c().location,i())))),U(I);var j=$(I,2);{var q=B=>{var L=Zo();te(B,L)};me(j,B=>{K(c()),V(()=>c().description||c().attachments&&c().attachments.length>0)&&B(q)})}te(v,P)};me(y,v=>{K(c()),V(()=>c().location)&&v(D)})}var A=$(y,2);{var M=v=>{var P=Vo(),I=Y(P);{var N=q=>{var B=ft("Hide");te(q,B)},j=q=>{var B=ft("Show");te(q,B)};me(I,q=>{g()?q(N):q(j,!1)})}rt(),U(P),te(v,P)};me(A,v=>{K(c()),V(()=>c().description||c().attachments&&c().attachments.length>0)&&v(M)})}U(_);var O=$(_,2);{var T=v=>{var P=nl(),I=Y(P);{var N=B=>{var L=Jo(),H=Y(L);$t(H,()=>(K(ur),K(c()),K(i()),V(()=>ur(c().description,i()))));var le=$(H,2);{var re=ie=>{var de=Xo(),be=$(Y(de));{var De=Q=>{var ee=ft();ge(()=>_e(ee,d(a))),te(Q,ee)};me(be,Q=>{d(a)&&Q(De)})}var G=$(be,2);{var ne=Q=>{var ee=Zt(),se=Qe(ee);{var ae=J=>{var fe=ft();ge(()=>_e(fe,`by ${d(u)??""}`)),te(J,fe)},X=J=>{var fe=ft();ge(()=>_e(fe,`by ${d(u)??""}`)),te(J,fe)};me(se,J=>{d(a)?J(ae):J(X,!1)})}te(Q,ee)};me(G,Q=>{d(u)&&Q(ne)})}U(de),te(ie,de)};me(le,ie=>{d(f)&&ie(re)})}U(L),te(B,L)};me(I,B=>{K(c()),V(()=>c().description)&&B(N)})}var j=$(I,2);{var q=B=>{var L=rl(),H=$(Y(L),2);Vt(H,5,()=>(K(c()),V(()=>c().attachments)),le=>le.id,(le,re)=>{var ie=Zt(),de=Qe(ie);{var be=G=>{var ne=el(),Q=Y(ne),ee=Y(Q);U(Q);var se=$(Q,2),ae=Y(se),X=Y(ae,!0);U(ae),U(se),U(ne),ge(()=>{Ee(Q,"title",`Open ${d(re),V(()=>d(re).name)??""}`),Ee(ee,"src",(d(re),V(()=>d(re).url))),Ee(ee,"alt",(d(re),V(()=>d(re).name))),_e(X,(d(re),V(()=>d(re).name)))}),xe("click",Q,ir(()=>m(d(re).url))),te(G,ne)},De=G=>{var ne=tl(),Q=$(Y(ne),2),ee=Y(Q,!0);U(Q);var se=$(Q,2),ae=Y(se);U(se),U(ne),ge(X=>{Ee(ne,"title",`Open ${d(re),V(()=>d(re).name)??""}`),_e(ee,(d(re),V(()=>d(re).name))),_e(ae,`(${X??""})`)},[()=>(d(re),V(()=>o(d(re).size)))]),xe("click",ne,ir(()=>m(d(re).url))),te(G,ne)};me(de,G=>{d(re),V(()=>l(d(re).type))?G(be):G(De,!1)})}te(le,ie)}),U(H),U(L),te(B,L)};me(j,B=>{K(c()),V(()=>c().attachments&&c().attachments.length>0)&&B(q)})}U(P),te(v,P)};me(O,v=>{g()&&v(T)})}U(R);var C=$(R,2);{var p=v=>{var P=al(),I=Y(P);U(P),ge(()=>{Ee(I,"src",(d(n),V(()=>d(n).url))),Ee(I,"alt",(d(n),V(()=>d(n).name)))}),te(v,P)};me(C,v=>{d(n)&&v(p)})}U(W),U(w),ge(()=>Dn(w,d(t)?"cursor: pointer;":"")),xe("keydown",w,F),xe("click",w,k),te(s,w),at()}export{Cl as A,Ml as E,Il as a,Rl as b,Gt as c,ni as d,St as e,Nt as f,Un as g,Al as h,lr as p};
