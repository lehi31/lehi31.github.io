import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as et,ai as Fe,D as B,E as ve,w as V,g as l,aj as Ct,c as S,s as Q,u as X,r as U,t as ye,a as tt,f as We,F as Je,i as dr,am as Dn,R as Tt,as as lr,z as An}from"./CPOcesE7.js";import{p as he,i as me,e as Ee,s as _e,b as fr,a as Ur,c as Tn,m as In,u as Mn}from"./CCh4w6lW.js";import{f as ce,a as te,c as Bt,t as ft}from"./YsHTGu5k.js";import{e as qt,i as Sr}from"./DAwrR-3T.js";import{f as St,h as Ot,i as _t,b as wt,t as xt,j as Gt,g as Lr,D as Rn,k as Mt,l as Cn,m as Fn,u as Pn,n as zr,o as Nt,p as Rt,q as Hr,B as On}from"./Yr1apH5u.js";import{e as Br,s as Ae,b as vr,r as Ge}from"./CGwXOSlZ.js";import{w as qr,t as bt,v as Ve,H as Un,I as Sn,J as Ln,K as zn,k as mr,G as Nr,L as Hn,F as Bn,l as Yr,B as qn,M as Ir,N as Nn,Q as Mr,R as Yn,c as Ze,h as Wn,f as Oe,p as Ht,A as Ke,g as Wr,T as Qn,O as Ne}from"./Dlh-YxiV.js";import{s as Kt}from"./CdEA5IGF.js";import{i as at}from"./C2Q_9cr2.js";import{R as Re}from"./CLt3oPSS.js";import{S as Qr}from"./ef-6hLZm.js";import{b as ht,a as gr,c as cr}from"./QDlYjqxz.js";import{b as Ut}from"./C34nsrD6.js";import{b as Et}from"./DLuN8Kcu.js";import{c as $n,o as jn,w as Gn,g as hr}from"./DHXte27T.js";import{t as gt}from"./r7-tBYgy.js";import{c as Kn}from"./B-KyreCV.js";import{c as Vn,a as ut,e as Rr,f as Xn,d as Zn,V as Jn}from"./Bai7YTd4.js";import{_ as pr}from"./CmsKOCeN.js";function ea(){return Object.assign({},qr())}function ta(d){let i=bt(d).getDay();return i===0&&(i=7),i}function ra(d,e){const i=e instanceof Date?Ve(e,0):new e(0);return i.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),i.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),i}const na=10;class $r{subPriority=0;validate(e,i){return!0}}class aa extends $r{constructor(e,i,t,r,n){super(),this.value=e,this.validateValue=i,this.setValue=t,this.priority=r,n&&(this.subPriority=n)}validate(e,i){return this.validateValue(e,this.value,i)}set(e,i,t){return this.setValue(e,i,this.value,t)}}class ia extends $r{priority=na;subPriority=-1;set(e,i){return i.timestampIsSet?e:Ve(e,ra(e,Date))}}class Ie{run(e,i,t,r){const n=this.parse(e,i,t,r);return n?{setter:new aa(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(e,i,t){return!0}}class sa extends Ie{priority=140;parse(e,i,t){switch(i){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}}set(e,i,t){return i.era=t,e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const He={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},vt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Be(d,e){return d&&{value:e(d.value),rest:d.rest}}function Ue(d,e){const i=e.match(d);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function mt(d,e){const i=e.match(d);if(!i)return null;if(i[0]==="Z")return{value:0,rest:e.slice(1)};const t=i[1]==="+"?1:-1,r=i[2]?parseInt(i[2],10):0,n=i[3]?parseInt(i[3],10):0,u=i[5]?parseInt(i[5],10):0;return{value:t*(r*Un+n*Sn+u*Ln),rest:e.slice(i[0].length)}}function jr(d){return Ue(He.anyDigitsSigned,d)}function Se(d,e){switch(d){case 1:return Ue(He.singleDigit,e);case 2:return Ue(He.twoDigits,e);case 3:return Ue(He.threeDigits,e);case 4:return Ue(He.fourDigits,e);default:return Ue(new RegExp("^\\d{1,"+d+"}"),e)}}function Vt(d,e){switch(d){case 1:return Ue(He.singleDigitSigned,e);case 2:return Ue(He.twoDigitsSigned,e);case 3:return Ue(He.threeDigitsSigned,e);case 4:return Ue(He.fourDigitsSigned,e);default:return Ue(new RegExp("^-?\\d{1,"+d+"}"),e)}}function br(d){switch(d){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Gr(d,e){const i=e>0,t=i?e:1-e;let r;if(t<=50)r=d||100;else{const n=t+50,u=Math.trunc(n/100)*100,v=d>=n%100;r=d+u-(v?100:0)}return i?r:1-r}function Kr(d){return d%400===0||d%4===0&&d%100!==0}class oa extends Ie{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,i,t){const r=n=>({year:n,isTwoDigitYear:i==="yy"});switch(i){case"y":return Be(Se(4,e),r);case"yo":return Be(t.ordinalNumber(e,{unit:"year"}),r);default:return Be(Se(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,t){const r=e.getFullYear();if(t.isTwoDigitYear){const u=Gr(t.year,r);return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}const n=!("era"in i)||i.era===1?t.year:1-t.year;return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class la extends Ie{priority=130;parse(e,i,t){const r=n=>({year:n,isTwoDigitYear:i==="YY"});switch(i){case"Y":return Be(Se(4,e),r);case"Yo":return Be(t.ordinalNumber(e,{unit:"year"}),r);default:return Be(Se(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,t,r){const n=zn(e,r);if(t.isTwoDigitYear){const v=Gr(t.year,n);return e.setFullYear(v,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),mr(e,r)}const u=!("era"in i)||i.era===1?t.year:1-t.year;return e.setFullYear(u,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),mr(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class ca extends Ie{priority=130;parse(e,i){return Vt(i==="R"?4:i.length,e)}set(e,i,t){const r=Ve(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Nr(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class ua extends Ie{priority=130;parse(e,i){return Vt(i==="u"?4:i.length,e)}set(e,i,t){return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class da extends Ie{priority=120;parse(e,i,t){switch(i){case"Q":case"QQ":return Se(i.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class fa extends Ie{priority=120;parse(e,i,t){switch(i){case"q":case"qq":return Se(i.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class va extends Ie{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,i,t){const r=n=>n-1;switch(i){case"M":return Be(Ue(He.month,e),r);case"MM":return Be(Se(2,e),r);case"Mo":return Be(t.ordinalNumber(e,{unit:"month"}),r);case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}}class ma extends Ie{priority=110;parse(e,i,t){const r=n=>n-1;switch(i){case"L":return Be(Ue(He.month,e),r);case"LL":return Be(Se(2,e),r);case"Lo":return Be(t.ordinalNumber(e,{unit:"month"}),r);case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function ha(d,e,i){const t=bt(d),r=Hn(t,i)-e;return t.setDate(t.getDate()-r*7),t}class pa extends Ie{priority=100;parse(e,i,t){switch(i){case"w":return Ue(He.week,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return Se(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,t,r){return mr(ha(e,t,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ya(d,e){const i=bt(d),t=Bn(i)-e;return i.setDate(i.getDate()-t*7),i}class ga extends Ie{priority=100;parse(e,i,t){switch(i){case"I":return Ue(He.week,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return Se(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,t){return Nr(ya(e,t))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ba=[31,28,31,30,31,30,31,31,30,31,30,31],_a=[31,29,31,30,31,30,31,31,30,31,30,31];class wa extends Ie{priority=90;subPriority=1;parse(e,i,t){switch(i){case"d":return Ue(He.date,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return Se(i.length,e)}}validate(e,i){const t=e.getFullYear(),r=Kr(t),n=e.getMonth();return r?i>=1&&i<=_a[n]:i>=1&&i<=ba[n]}set(e,i,t){return e.setDate(t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class xa extends Ie{priority=90;subpriority=1;parse(e,i,t){switch(i){case"D":case"DD":return Ue(He.dayOfYear,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return Se(i.length,e)}}validate(e,i){const t=e.getFullYear();return Kr(t)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,t){return e.setMonth(0,t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function _r(d,e,i){const t=qr(),r=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,n=bt(d),u=n.getDay(),c=(e%7+7)%7,b=7-r,o=e<0||e>6?e-(u+b)%7:(c+b)%7-(u+b)%7;return St(n,o)}class Ea extends Ie{priority=90;parse(e,i,t){switch(i){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=_r(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ka extends Ie{priority=90;parse(e,i,t,r){const n=u=>{const v=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+v};switch(i){case"e":case"ee":return Be(Se(i.length,e),n);case"eo":return Be(t.ordinalNumber(e,{unit:"day"}),n);case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=_r(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Da extends Ie{priority=90;parse(e,i,t,r){const n=u=>{const v=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+v};switch(i){case"c":case"cc":return Be(Se(i.length,e),n);case"co":return Be(t.ordinalNumber(e,{unit:"day"}),n);case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=_r(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Aa(d,e){const i=bt(d),t=ta(i),r=e-t;return St(i,r)}class Ta extends Ie{priority=90;parse(e,i,t){const r=n=>n===0?7:n;switch(i){case"i":case"ii":return Se(i.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return Be(t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Be(t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Be(t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Be(t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,i){return i>=1&&i<=7}set(e,i,t){return e=Aa(e,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Ia extends Ie{priority=80;parse(e,i,t){switch(i){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(br(t),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Ma extends Ie{priority=80;parse(e,i,t){switch(i){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(br(t),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Ra extends Ie{priority=80;parse(e,i,t){switch(i){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(br(t),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Ca extends Ie{priority=70;parse(e,i,t){switch(i){case"h":return Ue(He.hour12h,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return Se(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,t){const r=e.getHours()>=12;return r&&t<12?e.setHours(t+12,0,0,0):!r&&t===12?e.setHours(0,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Fa extends Ie{priority=70;parse(e,i,t){switch(i){case"H":return Ue(He.hour23h,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return Se(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,t){return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Pa extends Ie{priority=70;parse(e,i,t){switch(i){case"K":return Ue(He.hour11h,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return Se(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.getHours()>=12&&t<12?e.setHours(t+12,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Oa extends Ie{priority=70;parse(e,i,t){switch(i){case"k":return Ue(He.hour24h,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return Se(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,t){const r=t<=24?t%24:t;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Ua extends Ie{priority=60;parse(e,i,t){switch(i){case"m":return Ue(He.minute,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return Se(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,t){return e.setMinutes(t,0,0),e}incompatibleTokens=["t","T"]}class Sa extends Ie{priority=50;parse(e,i,t){switch(i){case"s":return Ue(He.second,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return Se(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,t){return e.setSeconds(t,0),e}incompatibleTokens=["t","T"]}class La extends Ie{priority=30;parse(e,i){const t=r=>Math.trunc(r*Math.pow(10,-i.length+3));return Be(Se(i.length,e),t)}set(e,i,t){return e.setMilliseconds(t),e}incompatibleTokens=["t","T"]}class za extends Ie{priority=10;parse(e,i){switch(i){case"X":return mt(vt.basicOptionalMinutes,e);case"XX":return mt(vt.basic,e);case"XXXX":return mt(vt.basicOptionalSeconds,e);case"XXXXX":return mt(vt.extendedOptionalSeconds,e);case"XXX":default:return mt(vt.extended,e)}}set(e,i,t){return i.timestampIsSet?e:Ve(e,e.getTime()-Yr(e)-t)}incompatibleTokens=["t","T","x"]}class Ha extends Ie{priority=10;parse(e,i){switch(i){case"x":return mt(vt.basicOptionalMinutes,e);case"xx":return mt(vt.basic,e);case"xxxx":return mt(vt.basicOptionalSeconds,e);case"xxxxx":return mt(vt.extendedOptionalSeconds,e);case"xxx":default:return mt(vt.extended,e)}}set(e,i,t){return i.timestampIsSet?e:Ve(e,e.getTime()-Yr(e)-t)}incompatibleTokens=["t","T","X"]}class Ba extends Ie{priority=40;parse(e){return jr(e)}set(e,i,t){return[Ve(e,t*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class qa extends Ie{priority=20;parse(e){return jr(e)}set(e,i,t){return[Ve(e,t),{timestampIsSet:!0}]}incompatibleTokens="*"}const Na={G:new sa,y:new oa,Y:new la,R:new ca,u:new ua,Q:new da,q:new fa,M:new va,L:new ma,w:new pa,I:new ga,d:new wa,D:new xa,E:new Ea,e:new ka,c:new Da,i:new Ta,a:new Ia,b:new Ma,B:new Ra,h:new Ca,H:new Fa,K:new Pa,k:new Oa,m:new Ua,s:new Sa,S:new La,X:new za,x:new Ha,t:new Ba,T:new qa},Ya=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qa=/^'([^]*?)'?$/,$a=/''/g,ja=/\S/,Ga=/[a-zA-Z]/;function Xt(d,e,i,t){const r=ea(),n=t?.locale??r.locale??qn,u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,v=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(e==="")return d===""?bt(i):Ve(i,NaN);const c={firstWeekContainsDate:u,weekStartsOn:v,locale:n},b=[new ia],o=e.match(Wa).map(E=>{const I=E[0];if(I in Ir){const w=Ir[I];return w(E,n.formatLong)}return E}).join("").match(Ya),a=[];for(let E of o){!t?.useAdditionalWeekYearTokens&&Nn(E)&&Mr(E,e,d),!t?.useAdditionalDayOfYearTokens&&Yn(E)&&Mr(E,e,d);const I=E[0],w=Na[I];if(w){const{incompatibleTokens:Y}=w;if(Array.isArray(Y)){const R=a.find(z=>Y.includes(z.token)||z.token===I);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${E}\` at the same time`)}else if(w.incompatibleTokens==="*"&&a.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);a.push({token:I,fullToken:E});const P=w.run(d,E,n.match,c);if(!P)return Ve(i,NaN);b.push(P.setter),d=P.rest}else{if(I.match(Ga))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(E==="''"?E="'":I==="'"&&(E=Ka(E)),d.indexOf(E)===0)d=d.slice(E.length);else return Ve(i,NaN)}}if(d.length>0&&ja.test(d))return Ve(i,NaN);const s=b.map(E=>E.priority).sort((E,I)=>I-E).filter((E,I,w)=>w.indexOf(E)===I).map(E=>b.filter(I=>I.priority===E).sort((I,w)=>w.subPriority-I.subPriority)).map(E=>E[0]);let m=bt(i);if(isNaN(m.getTime()))return Ve(i,NaN);const g={};for(const E of s){if(!E.validate(m,c))return Ve(i,NaN);const I=E.set(m,g,c);Array.isArray(I)?(m=I[0],Object.assign(g,I[1])):m=I}return Ve(i,m)}function Ka(d){return d.match(Qa)[1].replace($a,"'")}function Va(d,e){const i=bt(d);return i.setHours(e),i}function Xa(d,e){const i=bt(d);return i.setMinutes(e),i}var Za=ce('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),Ja=ce('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),ei=ce('<span class="d-block small svelte-1rksp2z"> </span>'),ti=ce('<span class="text-muted">•</span>'),ri=ce("<span> </span> <!>",1),ni=ce('<span class="text-muted">•</span>'),ai=ce('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),ii=ce('<span class="text-muted">•</span>'),si=ce('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),oi=ce('<span class="text-muted">•</span>'),li=ce('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),ci=ce('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),ui=ce('<div class="small svelte-1rksp2z"><!></div>'),di=ce('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),fi=ce('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),vi=ce('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),mi=ce('<div class="small text-muted posted-meta svelte-1rksp2z">Posted <!> <!></div>'),hi=ce('<div class="details-container svelte-1rksp2z"><!> <!> <!></div>'),pi=ce('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),yi=ce('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="fw-bold svelte-1rksp2z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function bo(d,e){et(e,!1);const i=ve(),t=ve(),r=ve(),n=ve(),u=ve(),v=ve();let c=he(e,"item",8),b=he(e,"showDetails",12,!1),o=he(e,"showDate",8,!0),a=he(e,"searchQuery",8,"");const s=G=>{if(!G)return"";const ne=Ht(G),K=xt(ne,Ke);return Oe(K,"h:mm aa")},m=G=>{if(!G)return"";const ne=Ht(G),K=xt(ne,Ke);return Oe(K,"EEE")},g=G=>{if(!G)return"";const ne=Ht(G),K=xt(ne,Ke);return Oe(K,"MMM, dd")},E=()=>{l(t)&&b(!b())},I=G=>{l(t)&&(G.key==="Enter"||G.key===" ")&&E()},w=G=>G<1024?G+" B":G<1024*1024?(G/1024).toFixed(1)+" KB":(G/(1024*1024)).toFixed(1)+" MB",Y=G=>G.startsWith("image/"),P=G=>{window.open(G,"_blank")},R=G=>{if(!G)return"";try{return Oe(Ht(G),"MMM d, yyyy 'at' h:mm a")}catch{return""}},z=G=>{try{const K=Re.fromString(G).origOptions,re=K.interval||1,oe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ie=["","1st","2nd","3rd","4th","5th"];if(K.freq===Re.DAILY)return re===1?"Repeats daily":`Repeats every ${re} days`;if(K.freq===Re.WEEKLY){if(K.byweekday){const J=(Array.isArray(K.byweekday)?K.byweekday:[K.byweekday]).map(ee=>{const ue=typeof ee=="number"?ee:ee.weekday,de=ue===6?0:ue+1;return oe[de]});return re===1?J.length===1?`Repeats every ${J[0]}`:`Repeats on ${J.join(", ")}`:`Repeats every ${re} weeks on ${J.join(", ")}`}return re===1?"Repeats weekly":`Repeats every ${re} weeks`}if(K.freq===Re.MONTHLY){if(K.byweekday){const J=(Array.isArray(K.byweekday)?K.byweekday:[K.byweekday])[0];if(J&&typeof J=="object"&&"n"in J&&"weekday"in J){const ee=J.weekday,ue=ee===6?0:ee+1,de=J.n,Te=ie[de]||`${de}th`;return re===1?`Repeats on the ${Te} ${oe[ue]} of the month`:`Repeats on the ${Te} ${oe[ue]} every ${re} months`}}if(K.bymonthday){const Z=Array.isArray(K.bymonthday)?K.bymonthday[0]:K.bymonthday,J=Z===1?"st":Z===2?"nd":Z===3?"rd":"th";return re===1?`Repeats on the ${Z}${J} of the month`:`Repeats on the ${Z}${J} every ${re} months`}return re===1?"Repeats monthly":`Repeats every ${re} months`}if(K.freq===Re.YEARLY){if(K.bymonth&&K.bymonthday){const Z=["","January","February","March","April","May","June","July","August","September","October","November","December"],J=Array.isArray(K.bymonth)?K.bymonth[0]:K.bymonth,ee=Array.isArray(K.bymonthday)?K.bymonthday[0]:K.bymonthday,ue=ee===1?"st":ee===2?"nd":ee===3?"rd":"th";return re===1?`Repeats every ${Z[J]} ${ee}${ue}`:`Repeats every ${re} years on ${Z[J]} ${ee}${ue}`}return re===1?"Repeats yearly":`Repeats every ${re} years`}return"Repeats"}catch{return"Repeats"}};let _=ve("");Fe(()=>V(o()),()=>{B(_,o()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Fe(()=>V(c()),()=>{B(i,c().attachments?.find(G=>Y(G.type)))}),Fe(()=>V(c()),()=>{B(t,!!(c().description||c().attachments&&c().attachments.length>0))}),Fe(()=>V(c()),()=>{B(r,c().meta_data?.submitted_at??c().created_at)}),Fe(()=>l(r),()=>{B(n,R(l(r)))}),Fe(()=>V(c()),()=>{B(u,c().meta_data?.submitted_by_name)}),Fe(()=>(l(n),l(u)),()=>{B(v,!!(l(n)||l(u)))}),Ct(),at();var M=yi(),h=S(M);{var p=G=>{var ne=Za(),K=S(ne),re=S(K,!0);U(K);var oe=Q(K,2),ie=S(oe),Z=S(ie,!0);U(ie),U(oe),U(ne),ye((J,ee)=>{_e(re,J),_e(Z,ee)},[()=>(V(c()),X(()=>m(c().start_time))),()=>(V(c()),X(()=>g(c().start_time)))]),te(G,ne)};me(h,G=>{o()&&G(p)})}var x=Q(h,2),A=S(x),T=S(A),C=S(T);Ot(C,()=>(V(_t),V(c()),V(a()),X(()=>_t(c().title||"",a())))),U(T);var D=Q(T,2);{var F=G=>{var ne=Ja();te(G,ne)},y=G=>{var ne=ei(),K=S(ne);U(ne),ye((re,oe)=>_e(K,`${re??""} to ${oe??""}`),[()=>(V(c()),X(()=>s(c().start_time))),()=>(V(c()),X(()=>s(c().end_time)))]),te(G,ne)};me(D,G=>{V(c()),X(()=>c().is_all_day)?G(F):G(y,!1)})}var f=Q(D,2),O=S(f);{var k=G=>{var ne=ri(),K=We(ne),re=S(K,!0);U(K);var oe=Q(K,2);{var ie=Z=>{var J=ti();te(Z,J)};me(oe,Z=>{V(c()),X(()=>c().recurrence_rule||c()?.meta_data?.recurring_instance||c().location||c().description||c().attachments&&c().attachments.length>0)&&Z(ie)})}ye((Z,J)=>{Ze(K,1,`badge rounded-pill bg-color-${Z??""}`,"svelte-1rksp2z"),_e(re,J)},[()=>(V(wt),V(c()),X(()=>wt(c()?.meta_data?.category)?.color_number)),()=>(V(wt),V(c()),X(()=>wt(c()?.meta_data?.category)?.label))]),te(G,ne)};me(O,G=>{V(c()),X(()=>c()?.meta_data?.category)&&G(k)})}var H=Q(O,2);{var $=G=>{var ne=ai(),K=We(ne),re=Q(S(K));U(K);var oe=Q(K,2);{var ie=Z=>{var J=ni();te(Z,J)};me(oe,Z=>{V(c()),X(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&Z(ie)})}ye(Z=>_e(re,` ${Z??""}`),[()=>(V(c()),X(()=>z(c().recurrence_rule)))]),te(G,ne)},N=G=>{var ne=Bt(),K=We(ne);{var re=oe=>{var ie=si(),Z=Q(We(ie),2);{var J=ee=>{var ue=ii();te(ee,ue)};me(Z,ee=>{V(c()),X(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&ee(J)})}te(oe,ie)};me(K,oe=>{V(c()),X(()=>c()?.meta_data?.recurring_instance)&&oe(re)},!0)}te(G,ne)};me(H,G=>{V(c()),X(()=>c().recurrence_rule)?G($):G(N,!1)})}var W=Q(H,2);{var q=G=>{var ne=li(),K=We(ne),re=S(K);Ot(re,()=>(V(_t),V(c()),V(a()),X(()=>_t(c().location,a())))),U(K);var oe=Q(K,2);{var ie=Z=>{var J=oi();te(Z,J)};me(oe,Z=>{V(c()),X(()=>c().description||c().attachments&&c().attachments.length>0)&&Z(ie)})}te(G,ne)};me(W,G=>{V(c()),X(()=>c().location)&&G(q)})}var L=Q(W,2);{var ae=G=>{var ne=ci(),K=S(ne);{var re=ie=>{var Z=ft("Hide");te(ie,Z)},oe=ie=>{var Z=ft("Show");te(ie,Z)};me(K,ie=>{b()?ie(re):ie(oe,!1)})}Je(),U(ne),te(G,ne)};me(L,G=>{V(c()),X(()=>c().description||c().attachments&&c().attachments.length>0)&&G(ae)})}U(f);var se=Q(f,2);{var pe=G=>{var ne=hi(),K=S(ne);{var re=ee=>{var ue=ui(),de=S(ue);Ot(de,()=>(V(Gt),V(c()),V(a()),X(()=>Gt(c().description,a())))),U(ue),te(ee,ue)};me(K,ee=>{V(c()),X(()=>c().description)&&ee(re)})}var oe=Q(K,2);{var ie=ee=>{var ue=vi(),de=Q(S(ue),2);qt(de,5,()=>(V(c()),X(()=>c().attachments)),Te=>Te.id,(Te,ge)=>{var xe=Bt(),be=We(xe);{var Ye=Ce=>{var Le=di(),De=S(Le),Pe=S(De);U(De);var qe=Q(De,2),Qe=S(qe),$e=S(Qe,!0);U(Qe),U(qe),U(Le),ye(()=>{Ae(De,"title",`Open ${l(ge),X(()=>l(ge).name)??""}`),Ae(Pe,"src",(l(ge),X(()=>l(ge).url))),Ae(Pe,"alt",(l(ge),X(()=>l(ge).name))),_e($e,(l(ge),X(()=>l(ge).name)))}),Ee("click",De,Kt(()=>P(l(ge).url))),te(Ce,Le)},it=Ce=>{var Le=fi(),De=Q(S(Le),2),Pe=S(De,!0);U(De);var qe=Q(De,2),Qe=S(qe);U(qe),U(Le),ye($e=>{Ae(Le,"title",`Open ${l(ge),X(()=>l(ge).name)??""}`),_e(Pe,(l(ge),X(()=>l(ge).name))),_e(Qe,`(${$e??""})`)},[()=>(l(ge),X(()=>w(l(ge).size)))]),Ee("click",Le,Kt(()=>P(l(ge).url))),te(Ce,Le)};me(be,Ce=>{l(ge),X(()=>Y(l(ge).type))?Ce(Ye):Ce(it,!1)})}te(Te,xe)}),U(de),U(ue),te(ee,ue)};me(oe,ee=>{V(c()),X(()=>c().attachments&&c().attachments.length>0)&&ee(ie)})}var Z=Q(oe,2);{var J=ee=>{var ue=mi(),de=Q(S(ue));{var Te=be=>{var Ye=ft();ye(()=>_e(Ye,l(n))),te(be,Ye)};me(de,be=>{l(n)&&be(Te)})}var ge=Q(de,2);{var xe=be=>{var Ye=Bt(),it=We(Ye);{var Ce=De=>{var Pe=ft();ye(()=>_e(Pe,`by ${l(u)??""}`)),te(De,Pe)},Le=De=>{var Pe=ft();ye(()=>_e(Pe,`by ${l(u)??""}`)),te(De,Pe)};me(it,De=>{l(n)?De(Ce):De(Le,!1)})}te(be,Ye)};me(ge,be=>{l(u)&&be(xe)})}U(ue),te(ee,ue)};me(Z,ee=>{l(v)&&ee(J)})}U(ne),te(G,ne)};me(se,G=>{b()&&G(pe)})}U(A);var fe=Q(A,2);{var we=G=>{var ne=pi(),K=S(ne);U(ne),ye(()=>{Ae(K,"src",(l(i),X(()=>l(i).url))),Ae(K,"alt",(l(i),X(()=>l(i).name)))}),te(G,ne)};me(fe,G=>{l(i)&&G(we)})}U(x),U(M),ye(()=>{Ze(M,1,Wn(l(_)),"svelte-1rksp2z"),Br(M,l(t)?"cursor: pointer;":"")}),Ee("keydown",M,I),Ee("click",M,E),te(d,M),tt()}var gi=ce('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function _o(d,e){et(e,!1);const i=()=>fr(n,"$weeksExpanded",t),[t,r]=Ur(),{stores:{weeksExpanded:n}}=Lr();function u(){Tn(n,!i())}at();var v=gi(),c=S(v),b=Q(c);U(v),ye(()=>{Ze(c,1,`bi ${i()?"bi-chevron-up":"bi-chevron-down"}`),_e(b,` ${i()?"Collapse All":"Expand All"}`)}),Ee("click",v,u),te(d,v),tt(),r()}var bi=ce('<div class="invalid-feedback d-block"> </div>'),_i=ce("<option> </option>"),wi=ce('<div class="invalid-feedback d-block"> </div>'),xi=ce('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function Ei(d,e){et(e,!1);const i=ve(),t=ve();let r=he(e,"title",12,""),n=he(e,"eventType",12,"calendar_event"),u=he(e,"category",12,""),v=he(e,"isPublic",12,!0),c=he(e,"description",12,""),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),a=he(e,"validationErrors",24,()=>({})),s=ve(),m=ve();function g(){l(s)?.focus()}function E(){l(m)?.focus()}Fe(()=>V(a()),()=>{B(i,!!a().title)}),Fe(()=>V(a()),()=>{B(t,!!a().description)}),Ct();var I={focusTitle:g,focusDescription:E};at();var w=xi(),Y=S(w),P=Q(S(Y),2);Ge(P);let R;Et(P,N=>B(s,N),()=>l(s));var z=Q(P,2);{var _=N=>{var W=bi(),q=S(W,!0);U(W),ye(()=>_e(q,(V(a()),X(()=>a().title)))),te(N,W)};me(z,N=>{V(a()),X(()=>a().title)&&N(_)})}Je(2),U(Y);var M=Q(Y,2),h=Q(S(M),2);ye(()=>{n(),dr(()=>{b()})});var p=S(h);p.value=p.__value="calendar_event";var x=Q(p);x.value=x.__value="announcement",U(h),U(M);var A=Q(M,2),T=Q(S(A),2);ye(()=>{u(),dr(()=>{b()})}),qt(T,5,()=>Rn,Sr,(N,W)=>{var q=_i(),L=S(q,!0);U(q);var ae={};ye(()=>{_e(L,(l(W),X(()=>l(W).label))),ae!==(ae=(l(W),X(()=>l(W).key)))&&(q.value=(q.__value=(l(W),X(()=>l(W).key)))??"")}),te(N,q)}),U(T),U(A);var C=Q(A,2),D=Q(S(C),2),F=S(D);Ge(F);var y=Q(F,2);U(D),Je(2),U(C);var f=Q(C,2),O=Q(S(f),2);Dn(O);let k;Et(O,N=>B(m,N),()=>l(m));var H=Q(O,2);{var $=N=>{var W=wi(),q=S(W,!0);U(W),ye(()=>_e(q,(V(a()),X(()=>a().description)))),te(N,W)};me(H,N=>{V(a()),X(()=>a().description)&&N($)})}return Je(2),U(f),U(w),ye(()=>{Ae(P,"name",`${o()??""}-title`),R=Ze(P,1,"form-control",null,R,{"is-invalid":l(i)}),P.disabled=b(),h.disabled=b(),T.disabled=b(),Ae(F,"id",`${o()??""}-is-public`),F.disabled=b(),Ae(y,"for",`${o()??""}-is-public`),Ae(O,"name",`${o()??""}-description`),k=Ze(O,1,"form-control",null,k,{"is-invalid":l(t)}),O.disabled=b()}),Ee("focus",P,()=>l(s).select()),ht(P,r),vr(h,n),vr(T,u),gr(F,v),Ee("focus",O,()=>l(m).select()),ht(O,c),te(d,w),Ut(e,"focusTitle",g),Ut(e,"focusDescription",E),tt(I)}var ki=ce('<div class="invalid-feedback d-block"> </div>'),Di=ce('<div class="invalid-feedback d-block"> </div>'),Ai=ce('<div class="invalid-feedback d-block"> </div>'),Ti=ce('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Ii=ce('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Mi(d,e){et(e,!1);const i=ve(),t=ve(),r=ve();let n=he(e,"dateInput",12,""),u=he(e,"startTimeInput",12,""),v=he(e,"endTimeInput",12,""),c=he(e,"isAllDay",12,!1),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),a=he(e,"validationErrors",24,()=>({})),s=ve(),m=ve(),g=ve();function E(){l(s)?.focus()}function I(){l(m)?.focus()}function w(){l(g)?.focus()}Fe(()=>V(a()),()=>{B(i,!!a().dateInput)}),Fe(()=>V(a()),()=>{B(t,!!a().startTimeInput)}),Fe(()=>V(a()),()=>{B(r,!!a().endTimeInput)}),Ct();var Y={focusDate:E,focusStartTime:I,focusEndTime:w};at();var P=Ii(),R=S(P),z=Q(S(R),2);Ge(z);let _;Et(z,F=>B(s,F),()=>l(s));var M=Q(z,2);{var h=F=>{var y=ki(),f=S(y,!0);U(y),ye(()=>_e(f,(V(a()),X(()=>a().dateInput)))),te(F,y)};me(M,F=>{V(a()),X(()=>a().dateInput)&&F(h)})}U(R);var p=Q(R,2),x=S(p),A=S(x);Ge(A);var T=Q(A,2);U(x),U(p);var C=Q(p,2);{var D=F=>{var y=Ti(),f=S(y),O=Q(S(f),2);Ge(O),Ae(O,"step",900);let k;Et(O,se=>B(m,se),()=>l(m));var H=Q(O,2);{var $=se=>{var pe=Di(),fe=S(pe,!0);U(pe),ye(()=>_e(fe,(V(a()),X(()=>a().startTimeInput)))),te(se,pe)};me(H,se=>{V(a()),X(()=>a().startTimeInput)&&se($)})}U(f);var N=Q(f,2),W=Q(S(N),2);Ge(W),Ae(W,"step",900);let q;Et(W,se=>B(g,se),()=>l(g));var L=Q(W,2);{var ae=se=>{var pe=Ai(),fe=S(pe,!0);U(pe),ye(()=>_e(fe,(V(a()),X(()=>a().endTimeInput)))),te(se,pe)};me(L,se=>{V(a()),X(()=>a().endTimeInput)&&se(ae)})}U(N),U(y),ye(()=>{Ae(O,"name",`${o()??""}-start-time`),k=Ze(O,1,"form-control",null,k,{"is-invalid":l(t)}),O.disabled=b(),Ae(W,"name",`${o()??""}-end-time`),q=Ze(W,1,"form-control",null,q,{"is-invalid":l(r)}),W.disabled=b()}),Ee("focus",O,()=>l(m).select()),ht(O,u),Ee("focus",W,()=>l(g).select()),ht(W,v),te(F,y)};me(C,F=>{c()||F(D)})}return U(P),ye(()=>{Ae(z,"name",`${o()??""}-date`),_=Ze(z,1,"form-control",null,_,{"is-invalid":l(i)}),z.disabled=b(),Ae(A,"id",`${o()??""}-all-day-check`),A.disabled=b(),Ae(T,"for",`${o()??""}-all-day-check`)}),Ee("focus",z,()=>l(s).select()),ht(z,n),gr(A,c),te(d,P),Ut(e,"focusDate",E),Ut(e,"focusStartTime",I),Ut(e,"focusEndTime",w),tt(Y)}var Ri=ce('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Ci=ce('<div class="invalid-feedback d-block"> </div>'),Fi=ce('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Pi=ce('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),Oi=ce('<div class="invalid-feedback d-block"> </div>'),Ui=ce('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),Si=ce('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function Li(d,e){et(e,!1);const i=[],t=[];let r=he(e,"isRecurring",12,!1),n=he(e,"recurrenceFrequency",12,"weekly"),u=he(e,"recurrenceInterval",12,1),v=he(e,"recurringDays",28,()=>[]),c=he(e,"recurrenceEndDate",12,""),b=he(e,"monthlyType",12,"date"),o=he(e,"dateInput",8,""),a=he(e,"disabled",8,!1),s=he(e,"name",8,"event"),m=he(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function E(M){if(!M)return"Same weekday of the month";try{const h=new Date(M),p=Oe(h,"EEEE"),x=Math.ceil(h.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][x]} ${p} of the month`}catch{return"Same weekday of the month"}}function I(M){if(!M)return 1;try{return M.split("-").map(Number)[2]}catch{return 1}}at();var w=Si(),Y=S(w),P=S(Y);Ge(P);var R=Q(P,2);U(Y);var z=Q(Y,2);{var _=M=>{var h=Ui(),p=S(h),x=Q(S(p),2),A=Q(S(x),2),T=S(A);Ge(T),U(A);var C=Q(A,2),D=S(C);ye(()=>{n(),dr(()=>{a(),u()})});var F=S(D),y=S(F,!0);U(F),F.value=F.__value="daily";var f=Q(F),O=S(f,!0);U(f),f.value=f.__value="weekly";var k=Q(f),H=S(k,!0);U(k),k.value=k.__value="monthly";var $=Q(k),N=S($,!0);U($),$.value=$.__value="yearly",U(D),U(C),U(x),U(p);var W=Q(p,2);{var q=K=>{var re=Fi(),oe=Q(S(re),2);qt(oe,5,()=>g,Sr,(J,ee)=>{var ue=Ri(),de=S(ue);Ge(de);var Te,ge=Q(de,2),xe=S(ge,!0);U(ge),U(ue),ye(()=>{Ae(de,"id",`${s()??""}-day-${l(ee),X(()=>l(ee).value)??""}`),de.disabled=a(),Te!==(Te=(l(ee),X(()=>l(ee).value)))&&(de.value=(de.__value=(l(ee),X(()=>l(ee).value)))??""),Ae(ge,"for",`${s()??""}-day-${l(ee),X(()=>l(ee).value)??""}`),_e(xe,(l(ee),X(()=>l(ee).label)))}),cr(i,[],de,()=>(l(ee),X(()=>l(ee).value),v()),v),te(J,ue)}),U(oe);var ie=Q(oe,2);{var Z=J=>{var ee=Ci(),ue=S(ee,!0);U(ee),ye(()=>_e(ue,(V(m()),X(()=>m().recurringDays)))),te(J,ee)};me(ie,J=>{V(m()),X(()=>m().recurringDays)&&J(Z)})}Je(2),U(re),te(K,re)};me(W,K=>{n()==="weekly"&&K(q)})}var L=Q(W,2);{var ae=K=>{var re=Pi(),oe=Q(S(re),2),ie=S(oe),Z=S(ie);Ge(Z),Z.value=Z.__value="date";var J=Q(Z,2),ee=S(J);U(J),U(ie);var ue=Q(ie,2),de=S(ue);Ge(de),de.value=de.__value="weekday";var Te=Q(de,2),ge=S(Te);U(Te),U(ue),U(oe),U(re),ye((xe,be)=>{Ae(Z,"id",`${s()??""}-monthly-date`),Z.disabled=a(),Ae(J,"for",`${s()??""}-monthly-date`),_e(ee,`On day ${xe??""} of the month`),Ae(de,"id",`${s()??""}-monthly-weekday`),de.disabled=a(),Ae(Te,"for",`${s()??""}-monthly-weekday`),_e(ge,`On the ${be??""}`)},[()=>(V(o()),X(()=>I(o()))),()=>(V(o()),X(()=>E(o())))]),cr(t,[],Z,b,b),cr(t,[],de,b,b),te(K,re)};me(L,K=>{n()==="monthly"&&K(ae)})}var se=Q(L,2),pe=S(se),fe=Q(pe,2);Ge(fe);let we;var G=Q(fe,2);{var ne=K=>{var re=Oi(),oe=S(re,!0);U(re),ye(()=>_e(oe,(V(m()),X(()=>m().recurrenceEndDate)))),te(K,re)};me(G,K=>{V(m()),X(()=>m().recurrenceEndDate)&&K(ne)})}Je(2),U(se),U(h),ye(()=>{T.disabled=a(),D.disabled=a(),_e(y,u()===1?"day":"days"),_e(O,u()===1?"week":"weeks"),_e(H,u()===1?"month":"months"),_e(N,u()===1?"year":"years"),Ae(pe,"for",`${s()??""}-recurrence-end-date`),we=Ze(fe,1,"form-control",null,we,{"is-invalid":!!m().recurrenceEndDate}),Ae(fe,"id",`${s()??""}-recurrence-end-date`),fe.disabled=a()}),ht(T,u),vr(D,n),ht(fe,c),te(M,h)};me(z,M=>{r()&&M(_)})}U(w),ye(()=>{Ae(P,"id",`${s()??""}-is-recurring`),P.disabled=a(),Ae(R,"for",`${s()??""}-is-recurring`)}),gr(P,r),te(d,w),tt()}var zi=ce('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function Hi(d,e){et(e,!1);let i=he(e,"value",12,""),t=he(e,"disabled",8,!1),r=he(e,"name",8,"location"),n=ve();function u(){l(n)?.focus()}var v={focus:u},c=zi(),b=Q(S(c),2);return Ge(b),Et(b,o=>B(n,o),()=>l(n)),Je(2),U(c),ye(()=>{Ae(b,"name",r()),b.disabled=t()}),Ee("focus",b,()=>l(n).select()),ht(b,i),te(d,c),Ut(e,"focus",u),tt(v)}var Bi=ce('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),qi=ce('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Ni=ce('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),Yi=ce('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Wi=ce('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),Qi=ce('<div class="d-flex flex-column gap-2 mb-2"></div>'),$i=ce('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function ji(d,e){et(e,!1);let i=he(e,"attachments",24,()=>[]),t=he(e,"disabled",8,!1),r=he(e,"uploadingFile",8,!1);const n=$n();let u=ve(),v=ve(null),c=ve("");const b=M=>{if(M===0)return"0 Bytes";const h=1024,p=["Bytes","KB","MB"],x=Math.floor(Math.log(M)/Math.log(h));return Math.round(M/Math.pow(h,x)*100)/100+" "+p[x]},o=M=>{const h=M.target;h.files&&h.files[0]&&(n("upload",h.files[0]),h.value="")},a=M=>{B(v,M.id),B(c,M.name)},s=M=>{l(c).trim()&&l(c)!==M.name&&n("edit",{attachment:M,newName:l(c).trim()}),B(v,null),B(c,"")},m=()=>{B(v,null),B(c,"")},g=M=>{n("remove",M)};at();var E=$i(),I=Q(S(E),2);{var w=M=>{var h=Qi();qt(h,5,i,p=>p.id,(p,x)=>{var A=Wi(),T=S(A),C=S(T);{var D=k=>{var H=Bi(),$=We(H);Ge($);var N=Q($,2),W=S(N,!0);U(N),ye(q=>{$.disabled=t(),_e(W,q)},[()=>(l(x),X(()=>b(l(x).size)))]),ht($,()=>l(c),q=>B(c,q)),Ee("keydown",$,q=>{q.key==="Enter"&&s(l(x)),q.key==="Escape"&&m()}),te(k,H)},F=k=>{var H=qi(),$=We(H),N=S($,!0);U($);var W=Q($,2),q=S(W,!0);U(W),ye(L=>{_e(N,(l(x),X(()=>l(x).name))),_e(q,L)},[()=>(l(x),X(()=>b(l(x).size)))]),te(k,H)};me(C,k=>{l(v),l(x),X(()=>l(v)===l(x).id)?k(D):k(F,!1)})}U(T);var y=Q(T,2);{var f=k=>{var H=Ni(),$=We(H),N=Q($,2);ye(()=>{$.disabled=t(),N.disabled=t()}),Ee("click",$,()=>s(l(x))),Ee("click",N,m),te(k,H)},O=k=>{var H=Yi(),$=We(H),N=Q($,2);ye(()=>{$.disabled=t(),N.disabled=t()}),Ee("click",$,()=>a(l(x))),Ee("click",N,()=>g(l(x))),te(k,H)};me(y,k=>{l(v),l(x),X(()=>l(v)===l(x).id)?k(f):k(O,!1)})}U(A),te(p,A)}),U(h),te(M,h)};me(I,M=>{V(i()),X(()=>i().length>0)&&M(w)})}var Y=Q(I,2),P=S(Y),R=S(P);Et(R,M=>B(u,M),()=>l(u));var z=Q(R,2);{var _=M=>{Qr(M,{size:"sm"})};me(z,M=>{r()&&M(_)})}U(P),Je(2),U(Y),U(E),ye(()=>R.disabled=t()||r()),Ee("change",R,o),te(d,E),tt()}var Gi=ce('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Ki(d,e){et(e,!1);const i=ve();let t=he(e,"eventTitle",8),r=he(e,"occurrenceDate",8),n=he(e,"callback",8);function u(A){n()(A)}function v(){n()(null)}Fe(()=>(V(r()),Oe),()=>{B(i,(()=>{try{const[A,T,C]=r().split("-").map(Number),D=new Date(A,T-1,C);return Oe(D,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),Ct(),at();var c=Gi(),b=S(c),o=S(b),a=S(o),s=Q(S(a),2);U(a);var m=Q(a,2),g=S(m),E=S(g),I=S(E);U(E),Je(),U(g);var w=Q(g,4),Y=S(w),P=Q(S(Y),2),R=S(P,!0);U(P),U(Y);var z=Q(Y,2),_=Q(S(z),2),M=S(_);U(_),U(z);var h=Q(z,2);U(w),U(m);var p=Q(m,2),x=S(p);U(p),U(o),U(b),U(c),ye(()=>{_e(I,`"${t()??""}"`),_e(R,l(i)),_e(M,`From ${l(i)??""} onwards`)}),Ee("click",s,v),Ee("click",Y,()=>u("single")),Ee("click",z,()=>u("future")),Ee("click",h,()=>u("all")),Ee("click",x,v),te(d,c),tt()}var Vi=ce('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Xi(d,e){et(e,!1);const i=ve();let t=he(e,"eventTitle",8),r=he(e,"occurrenceDate",8),n=he(e,"callback",8);function u(A){n()(A)}function v(){n()(null)}Fe(()=>(V(r()),Oe),()=>{B(i,(()=>{try{const[A,T,C]=r().split("-").map(Number),D=new Date(A,T-1,C);return Oe(D,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),Ct(),at();var c=Vi(),b=S(c),o=S(b),a=S(o),s=Q(S(a),2);U(a);var m=Q(a,2),g=S(m),E=S(g),I=S(E);U(E),Je(),U(g);var w=Q(g,4),Y=S(w),P=Q(S(Y),2),R=S(P,!0);U(P),U(Y);var z=Q(Y,2),_=Q(S(z),2),M=S(_);U(_),U(z);var h=Q(z,2);U(w),U(m);var p=Q(m,2),x=S(p);U(p),U(o),U(b),U(c),ye(()=>{_e(I,`"${t()??""}"`),_e(R,l(i)),_e(M,`From ${l(i)??""} onwards`)}),Ee("click",s,v),Ee("click",Y,()=>u("single")),Ee("click",z,()=>u("future")),Ee("click",h,()=>u("all")),Ee("click",x,v),te(d,c),tt()}var Zi=ce('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function Ji(d,e){et(e,!1);let i=he(e,"title",8,"Clone Event"),t=he(e,"message",8,"Select a date for the cloned event:"),r=he(e,"confirmButtonLabel",8,"Clone"),n=he(e,"confirmButtonCSS",8,"btn-primary"),u=he(e,"rejectButtonLabel",8,"Cancel"),v=he(e,"rejectButtonCSS",8,"btn-secondary"),c=he(e,"defaultDate",8,void 0),b=he(e,"callback",8,()=>{}),o=ve(),a=ve(c()||Oe(new Date,"yyyy-MM-dd")),s=!1,m;jn(()=>{const y=window.bootstrap.Modal;new y(l(o)).show(),l(o).addEventListener("hidden.bs.modal",()=>{s?b()(!0,m):b()(!1)})});function g(){s=!0,m=l(a),window.bootstrap.Modal.getInstance(l(o)).hide()}function E(){s=!1,window.bootstrap.Modal.getInstance(l(o)).hide()}at();var I=Zi(),w=S(I),Y=S(w),P=S(Y),R=S(P),z=S(R,!0);U(R),Je(2),U(P);var _=Q(P,2),M=S(_),h=S(M,!0);U(M);var p=Q(M,2),x=Q(S(p),2);Ge(x),U(p),U(_);var A=Q(_,2),T=S(A),C=S(T,!0);U(T);var D=Q(T,2),F=S(D,!0);U(D),U(A),U(Y),U(w),U(I),Et(I,y=>B(o,y),()=>l(o)),ye(()=>{_e(z,i()),_e(h,t()),Ze(T,1,`btn ${v()??""}`),_e(C,u()),Ze(D,1,`btn ${n()??""}`),_e(F,r())}),ht(x,()=>l(a),y=>B(a,y)),Ee("click",T,E),Ee("click",D,g),te(d,I),tt()}let $t;function es(d){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const i={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};d.title&&(i.title=d.title),d.message&&(i.message=d.message),d.confirmButtonLabel&&(i.confirmButtonLabel=d.confirmButtonLabel),d.confirmButtonCSS&&(i.confirmButtonCSS=d.confirmButtonCSS),d.rejectButtonLabel&&(i.rejectButtonLabel=d.rejectButtonLabel),d.rejectButtonCSS&&(i.rejectButtonCSS=d.rejectButtonCSS),d.defaultDate&&(i.defaultDate=d.defaultDate),i.callback=(t,r)=>{console.log("Clone confirm result:",t,r),$t&&(Mn($t),$t=void 0),e.remove(),d.callback&&typeof d.callback=="function"&&d.callback(t,r)},$t=In(Ji,{target:e,props:i})}const ts=Vn().shape({title:ut().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ut().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ut().required("Category is required"),description:ut().nullable().max(1e4,"Description is too long"),location:ut().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ut().when("event_type",{is:"calendar_event",then:d=>d.required("Date is required"),otherwise:d=>d.nullable()}),startTimeInput:ut().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("Start time is required"),otherwise:d=>d.nullable()}),endTimeInput:ut().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("End time is required"),otherwise:d=>d.nullable()}),isRecurring:Rr(),recurrenceFrequency:ut().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Xn().of(Zn().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(d,e)=>d&&e==="weekly",then:d=>d.min(1,"Select at least one day for weekly recurring events").required(),otherwise:d=>d.nullable()}),hasEndDate:Rr(),recurrenceEndDate:ut().when(["isRecurring","hasEndDate"],{is:(d,e)=>d&&e,then:d=>d.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const i=new Date(e),t=new Date;return t.setHours(0,0,0,0),i>=t}),otherwise:d=>d.nullable()})});function rs(){const d=Gn({});async function e(r){try{return await ts.validate(r,{abortEarly:!1}),d.set({}),!0}catch(n){if(n instanceof Jn){const u={};return n.inner.forEach(v=>{v.path&&(u[v.path]=v.message)}),d.set(u),!1}return!1}}function i(){d.set({})}function t(){return Object.values(hr(d)).filter(n=>n.length>0)}return{validationErrors:d,validate:e,clearErrors:i,getErrorMessages:t}}function wr(d){const{frequency:e,interval:i,recurringDays:t,recurrenceEndDate:r,hasEndDate:n,monthlyType:u,startTime:v}=d,c={0:Re.SU,1:Re.MO,2:Re.TU,3:Re.WE,4:Re.TH,5:Re.FR,6:Re.SA},b={daily:Re.DAILY,weekly:Re.WEEKLY,monthly:Re.MONTHLY,yearly:Re.YEARLY},o=new Date(v),a=xt(o,Ke),s=new Date(a);s.setHours(12,0,0,0);const m=Mt(s,Ke),g={freq:b[e],interval:i,dtstart:m};if(n&&r){const I=new Date(`${r}T23:59:59.999`),w=Mt(I,Ke);g.until=w}if(e==="weekly"&&t.length>0)g.byweekday=t.map(I=>c[I]);else if(e==="monthly")if(u==="date")g.bymonthday=[s.getDate()];else{const I=Math.ceil(s.getDate()/7),w=s.getDay(),Y=[Re.SU,Re.MO,Re.TU,Re.WE,Re.TH,Re.FR,Re.SA];g.byweekday=[Y[w].nth(I)]}else e==="yearly"&&(g.bymonth=[s.getMonth()+1],g.bymonthday=[s.getDate()]);return{recurrence_rule:new Re(g).toString(),recurrence_end_date:n&&r?g.until.toISOString():void 0}}function Vr(d,e){try{const t=Re.fromString(d).origOptions,r={6:0,0:1,1:2,2:3,3:4,4:5,5:6},n={[Re.DAILY]:"daily",[Re.WEEKLY]:"weekly",[Re.MONTHLY]:"monthly",[Re.YEARLY]:"yearly"},u=(t.freq!==void 0?n[t.freq]:null)||"weekly",v=t.interval||1;let c=[],b="date";t.byweekday&&u==="weekly"&&(c=(Array.isArray(t.byweekday)?t.byweekday:[t.byweekday]).map(s=>{const m=typeof s=="number"?s:s.weekday;return r[m]})),u==="monthly"&&(t.bymonthday&&Array.isArray(t.bymonthday)&&t.bymonthday.length>0?b="date":t.byweekday&&(b="weekday"));let o="",a=!1;if(e){a=!0;const s=xt(new Date(e),Ke);o=Oe(s,"yyyy-MM-dd")}else if(t.until){a=!0;const s=xt(t.until,Ke);o=Oe(s,"yyyy-MM-dd")}return{frequency:u,interval:v,recurringDays:c,recurrenceEndDate:o,hasEndDate:a,monthlyType:b}}catch(i){return console.error("Failed to parse recurrence rule:",i),null}}function Xr(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Zr(){return{generateRecurrenceRule:wr,parseRecurrenceRule:Vr,clearRecurrence:Xr}}const yr=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Xr,generateRecurrenceRule:wr,parseRecurrenceRule:Vr,useRecurrenceLogic:Zr},Symbol.toStringTag,{value:"Module"}));function ns(d,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(t){if(t!=="default"&&!(t in d)){var r=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(d,t,r.get?r:{enumerable:!0,get:function(){return i[t]}})}})}),Object.freeze(d)}function Jr(d,e){return new Promise(function(i,t){let r;return as(d).then(function(n){try{return r=n,i(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(u){return t(u)}},t)})}const as=d=>new Promise((e,i)=>{const t=new FileReader;t.addEventListener("load",({target:{result:r}})=>{const n=new DataView(r);let u=0;if(n.getUint16(u)!==65496)return i("not a valid JPEG");for(u+=2;;){const v=n.getUint16(u);if(v===65498)break;const c=n.getUint16(u+2);if(v===65505&&n.getUint32(u+4)===1165519206){const b=u+10;let o;switch(n.getUint16(b)){case 18761:o=!0;break;case 19789:o=!1;break;default:return i("TIFF header contains invalid endian")}if(n.getUint16(b+2,o)!==42)return i("TIFF header contains invalid version");const a=n.getUint32(b+4,o),s=b+a+2+12*n.getUint16(b+a,o);for(let m=b+a+2;m<s;m+=12)if(n.getUint16(m,o)==274){if(n.getUint16(m+2,o)!==3)return i("Orientation data type is invalid");if(n.getUint32(m+4,o)!==1)return i("Orientation data count is invalid");n.setUint16(m+8,1,o);break}return e(r.slice(u,u+2+c))}u+=2+c}return e(new Blob)}),t.readAsArrayBuffer(d)});var Zt={},is={get exports(){return Zt},set exports(d){Zt=d}};(function(d){var e,i,t={};is.exports=t,t.parse=function(r,n){for(var u=t.bin.readUshort,v=t.bin.readUint,c=0,b={},o=new Uint8Array(r),a=o.length-4;v(o,a)!=101010256;)a--;c=a,c+=4;var s=u(o,c+=4);u(o,c+=2);var m=v(o,c+=2),g=v(o,c+=4);c+=4,c=g;for(var E=0;E<s;E++){v(o,c),c+=4,c+=4,c+=4,v(o,c+=4),m=v(o,c+=4);var I=v(o,c+=4),w=u(o,c+=4),Y=u(o,c+2),P=u(o,c+4);c+=6;var R=v(o,c+=8);c+=4,c+=w+Y+P,t._readLocal(o,R,b,m,I,n)}return b},t._readLocal=function(r,n,u,v,c,b){var o=t.bin.readUshort,a=t.bin.readUint;a(r,n),o(r,n+=4),o(r,n+=2);var s=o(r,n+=2);a(r,n+=2),a(r,n+=4),n+=4;var m=o(r,n+=8),g=o(r,n+=2);n+=2;var E=t.bin.readUTF8(r,n,m);if(n+=m,n+=g,b)u[E]={size:c,csize:v};else{var I=new Uint8Array(r.buffer,n);if(s==0)u[E]=new Uint8Array(I.buffer.slice(n,n+v));else{if(s!=8)throw"unknown compression method: "+s;var w=new Uint8Array(c);t.inflateRaw(I,w),u[E]=w}}},t.inflateRaw=function(r,n){return t.F.inflate(r,n)},t.inflate=function(r,n){return r[0],r[1],t.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),n)},t.deflate=function(r,n){n==null&&(n={level:6});var u=0,v=new Uint8Array(50+Math.floor(1.1*r.length));v[u]=120,v[u+1]=156,u+=2,u=t.F.deflateRaw(r,v,u,n.level);var c=t.adler(r,0,r.length);return v[u+0]=c>>>24&255,v[u+1]=c>>>16&255,v[u+2]=c>>>8&255,v[u+3]=c>>>0&255,new Uint8Array(v.buffer,0,u+4)},t.deflateRaw=function(r,n){n==null&&(n={level:6});var u=new Uint8Array(50+Math.floor(1.1*r.length)),v=t.F.deflateRaw(r,u,v,n.level);return new Uint8Array(u.buffer,0,v)},t.encode=function(r,n){n==null&&(n=!1);var u=0,v=t.bin.writeUint,c=t.bin.writeUshort,b={};for(var o in r){var a=!t._noNeed(o)&&!n,s=r[o],m=t.crc.crc(s,0,s.length);b[o]={cpr:a,usize:s.length,crc:m,file:a?t.deflateRaw(s):s}}for(var o in b)u+=b[o].file.length+30+46+2*t.bin.sizeUTF8(o);u+=22;var g=new Uint8Array(u),E=0,I=[];for(var o in b){var w=b[o];I.push(E),E=t._writeHeader(g,E,o,w,0)}var Y=0,P=E;for(var o in b)w=b[o],I.push(E),E=t._writeHeader(g,E,o,w,1,I[Y++]);var R=E-P;return v(g,E,101010256),E+=4,c(g,E+=4,Y),c(g,E+=2,Y),v(g,E+=2,R),v(g,E+=4,P),E+=4,E+=2,g.buffer},t._noNeed=function(r){var n=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},t._writeHeader=function(r,n,u,v,c,b){var o=t.bin.writeUint,a=t.bin.writeUshort,s=v.file;return o(r,n,c==0?67324752:33639248),n+=4,c==1&&(n+=2),a(r,n,20),a(r,n+=2,0),a(r,n+=2,v.cpr?8:0),o(r,n+=2,0),o(r,n+=4,v.crc),o(r,n+=4,s.length),o(r,n+=4,v.usize),a(r,n+=4,t.bin.sizeUTF8(u)),a(r,n+=2,0),n+=2,c==1&&(n+=2,n+=2,o(r,n+=6,b),n+=4),n+=t.bin.writeUTF8(r,n,u),c==0&&(r.set(s,n),n+=s.length),n},t.crc={table:function(){for(var r=new Uint32Array(256),n=0;n<256;n++){for(var u=n,v=0;v<8;v++)1&u?u=3988292384^u>>>1:u>>>=1;r[n]=u}return r}(),update:function(r,n,u,v){for(var c=0;c<v;c++)r=t.crc.table[255&(r^n[u+c])]^r>>>8;return r},crc:function(r,n,u){return 4294967295^t.crc.update(4294967295,r,n,u)}},t.adler=function(r,n,u){for(var v=1,c=0,b=n,o=n+u;b<o;){for(var a=Math.min(b+5552,o);b<a;)c+=v+=r[b++];v%=65521,c%=65521}return c<<16|v},t.bin={readUshort:function(r,n){return r[n]|r[n+1]<<8},writeUshort:function(r,n,u){r[n]=255&u,r[n+1]=u>>8&255},readUint:function(r,n){return 16777216*r[n+3]+(r[n+2]<<16|r[n+1]<<8|r[n])},writeUint:function(r,n,u){r[n]=255&u,r[n+1]=u>>8&255,r[n+2]=u>>16&255,r[n+3]=u>>24&255},readASCII:function(r,n,u){for(var v="",c=0;c<u;c++)v+=String.fromCharCode(r[n+c]);return v},writeASCII:function(r,n,u){for(var v=0;v<u.length;v++)r[n+v]=u.charCodeAt(v)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,n,u){for(var v,c="",b=0;b<u;b++)c+="%"+t.bin.pad(r[n+b].toString(16));try{v=decodeURIComponent(c)}catch{return t.bin.readASCII(r,n,u)}return v},writeUTF8:function(r,n,u){for(var v=u.length,c=0,b=0;b<v;b++){var o=u.charCodeAt(b);if(!(4294967168&o))r[n+c]=o,c++;else if(!(4294965248&o))r[n+c]=192|o>>6,r[n+c+1]=128|o>>0&63,c+=2;else if(!(4294901760&o))r[n+c]=224|o>>12,r[n+c+1]=128|o>>6&63,r[n+c+2]=128|o>>0&63,c+=3;else{if(4292870144&o)throw"e";r[n+c]=240|o>>18,r[n+c+1]=128|o>>12&63,r[n+c+2]=128|o>>6&63,r[n+c+3]=128|o>>0&63,c+=4}}return c},sizeUTF8:function(r){for(var n=r.length,u=0,v=0;v<n;v++){var c=r.charCodeAt(v);if(!(4294967168&c))u++;else if(!(4294965248&c))u+=2;else if(!(4294901760&c))u+=3;else{if(4292870144&c)throw"e";u+=4}}return u}},t.F={},t.F.deflateRaw=function(r,n,u,v){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][v],b=t.F.U,o=t.F._goodIndex;t.F._hash;var a=t.F._putsE,s=0,m=u<<3,g=0,E=r.length;if(v==0){for(;s<E;)a(n,m,s+(A=Math.min(65535,E-s))==E?1:0),m=t.F._copyExact(r,s,A,n,m+8),s+=A;return m>>>3}var I=b.lits,w=b.strt,Y=b.prev,P=0,R=0,z=0,_=0,M=0,h=0;for(E>2&&(w[h=t.F._hash(r,0)]=0),s=0;s<E;s++){if(M=h,s+1<E-2){h=t.F._hash(r,s+1);var p=s+1&32767;Y[p]=w[h],w[h]=p}if(g<=s){(P>14e3||R>26697)&&E-s>100&&(g<s&&(I[P]=s-g,P+=2,g=s),m=t.F._writeBlock(s==E-1||g==E?1:0,I,P,_,r,z,s-z,n,m),P=R=_=0,z=s);var x=0;s<E-2&&(x=t.F._bestMatch(r,s,Y,M,Math.min(c[2],E-s),c[3]));var A=x>>>16,T=65535&x;if(x!=0){T=65535&x;var C=o(A=x>>>16,b.of0);b.lhst[257+C]++;var D=o(T,b.df0);b.dhst[D]++,_+=b.exb[C]+b.dxb[D],I[P]=A<<23|s-g,I[P+1]=T<<16|C<<8|D,P+=2,g=s+A}else b.lhst[r[s]]++;R++}}for(z==s&&r.length!=0||(g<s&&(I[P]=s-g,P+=2,g=s),m=t.F._writeBlock(1,I,P,_,r,z,s-z,n,m),P=0,R=0,P=R=_=0,z=s);7&m;)m++;return m>>>3},t.F._bestMatch=function(r,n,u,v,c,b){var o=32767&n,a=u[o],s=o-a+32768&32767;if(a==o||v!=t.F._hash(r,n-s))return 0;for(var m=0,g=0,E=Math.min(32767,n);s<=E&&--b!=0&&a!=o;){if(m==0||r[n+m]==r[n+m-s]){var I=t.F._howLong(r,n,s);if(I>m){if(g=s,(m=I)>=c)break;s+2<I&&(I=s+2);for(var w=0,Y=0;Y<I-2;Y++){var P=n-s+Y+32768&32767,R=P-u[P]+32768&32767;R>w&&(w=R,a=P)}}}s+=(o=a)-(a=u[o])+32768&32767}return m<<16|g},t.F._howLong=function(r,n,u){if(r[n]!=r[n-u]||r[n+1]!=r[n+1-u]||r[n+2]!=r[n+2-u])return 0;var v=n,c=Math.min(r.length,n+258);for(n+=3;n<c&&r[n]==r[n-u];)n++;return n-v},t.F._hash=function(r,n){return(r[n]<<8|r[n+1])+(r[n+2]<<4)&65535},t.saved=0,t.F._writeBlock=function(r,n,u,v,c,b,o,a,s){var m,g,E,I,w,Y,P,R,z,_=t.F.U,M=t.F._putsF,h=t.F._putsE;_.lhst[256]++,g=(m=t.F.getTrees())[0],E=m[1],I=m[2],w=m[3],Y=m[4],P=m[5],R=m[6],z=m[7];var p=32+(s+3&7?8-(s+3&7):0)+(o<<3),x=v+t.F.contSize(_.fltree,_.lhst)+t.F.contSize(_.fdtree,_.dhst),A=v+t.F.contSize(_.ltree,_.lhst)+t.F.contSize(_.dtree,_.dhst);A+=14+3*P+t.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var T=0;T<286;T++)_.lhst[T]=0;for(T=0;T<30;T++)_.dhst[T]=0;for(T=0;T<19;T++)_.ihst[T]=0;var C=p<x&&p<A?0:x<A?1:2;if(M(a,s,r),M(a,s+1,C),s+=3,C==0){for(;7&s;)s++;s=t.F._copyExact(c,b,o,a,s)}else{var D,F;if(C==1&&(D=_.fltree,F=_.fdtree),C==2){t.F.makeCodes(_.ltree,g),t.F.revCodes(_.ltree,g),t.F.makeCodes(_.dtree,E),t.F.revCodes(_.dtree,E),t.F.makeCodes(_.itree,I),t.F.revCodes(_.itree,I),D=_.ltree,F=_.dtree,h(a,s,w-257),h(a,s+=5,Y-1),h(a,s+=5,P-4),s+=4;for(var y=0;y<P;y++)h(a,s+3*y,_.itree[1+(_.ordr[y]<<1)]);s+=3*P,s=t.F._codeTiny(R,_.itree,a,s),s=t.F._codeTiny(z,_.itree,a,s)}for(var f=b,O=0;O<u;O+=2){for(var k=n[O],H=k>>>23,$=f+(8388607&k);f<$;)s=t.F._writeLit(c[f++],D,a,s);if(H!=0){var N=n[O+1],W=N>>16,q=N>>8&255,L=255&N;h(a,s=t.F._writeLit(257+q,D,a,s),H-_.of0[q]),s+=_.exb[q],M(a,s=t.F._writeLit(L,F,a,s),W-_.df0[L]),s+=_.dxb[L],f+=H}}s=t.F._writeLit(256,D,a,s)}return s},t.F._copyExact=function(r,n,u,v,c){var b=c>>>3;return v[b]=u,v[b+1]=u>>>8,v[b+2]=255-v[b],v[b+3]=255-v[b+1],b+=4,v.set(new Uint8Array(r.buffer,n,u),b),c+(u+4<<3)},t.F.getTrees=function(){for(var r=t.F.U,n=t.F._hufTree(r.lhst,r.ltree,15),u=t.F._hufTree(r.dhst,r.dtree,15),v=[],c=t.F._lenCodes(r.ltree,v),b=[],o=t.F._lenCodes(r.dtree,b),a=0;a<v.length;a+=2)r.ihst[v[a]]++;for(a=0;a<b.length;a+=2)r.ihst[b[a]]++;for(var s=t.F._hufTree(r.ihst,r.itree,7),m=19;m>4&&r.itree[1+(r.ordr[m-1]<<1)]==0;)m--;return[n,u,s,c,o,m,v,b]},t.F.getSecond=function(r){for(var n=[],u=0;u<r.length;u+=2)n.push(r[u+1]);return n},t.F.nonZero=function(r){for(var n="",u=0;u<r.length;u+=2)r[u+1]!=0&&(n+=(u>>1)+",");return n},t.F.contSize=function(r,n){for(var u=0,v=0;v<n.length;v++)u+=n[v]*r[1+(v<<1)];return u},t.F._codeTiny=function(r,n,u,v){for(var c=0;c<r.length;c+=2){var b=r[c],o=r[c+1];v=t.F._writeLit(b,n,u,v);var a=b==16?2:b==17?3:7;b>15&&(t.F._putsE(u,v,o,a),v+=a)}return v},t.F._lenCodes=function(r,n){for(var u=r.length;u!=2&&r[u-1]==0;)u-=2;for(var v=0;v<u;v+=2){var c=r[v+1],b=v+3<u?r[v+3]:-1,o=v+5<u?r[v+5]:-1,a=v==0?-1:r[v-1];if(c==0&&b==c&&o==c){for(var s=v+5;s+2<u&&r[s+2]==c;)s+=2;(m=Math.min(s+1-v>>>1,138))<11?n.push(17,m-3):n.push(18,m-11),v+=2*m-2}else if(c==a&&b==c&&o==c){for(s=v+5;s+2<u&&r[s+2]==c;)s+=2;var m=Math.min(s+1-v>>>1,6);n.push(16,m-3),v+=2*m-2}else n.push(c,0)}return u>>>1},t.F._hufTree=function(r,n,u){var v=[],c=r.length,b=n.length,o=0;for(o=0;o<b;o+=2)n[o]=0,n[o+1]=0;for(o=0;o<c;o++)r[o]!=0&&v.push({lit:o,f:r[o]});var a=v.length,s=v.slice(0);if(a==0)return 0;if(a==1){var m=v[0].lit;return s=m==0?1:0,n[1+(m<<1)]=1,n[1+(s<<1)]=1,1}v.sort(function(R,z){return R.f-z.f});var g=v[0],E=v[1],I=0,w=1,Y=2;for(v[0]={lit:-1,f:g.f+E.f,l:g,r:E,d:0};w!=a-1;)g=I!=w&&(Y==a||v[I].f<v[Y].f)?v[I++]:v[Y++],E=I!=w&&(Y==a||v[I].f<v[Y].f)?v[I++]:v[Y++],v[w++]={lit:-1,f:g.f+E.f,l:g,r:E};var P=t.F.setDepth(v[w-1],0);for(P>u&&(t.F.restrictDepth(s,u,P),P=u),o=0;o<a;o++)n[1+(s[o].lit<<1)]=s[o].d;return P},t.F.setDepth=function(r,n){return r.lit!=-1?(r.d=n,n):Math.max(t.F.setDepth(r.l,n+1),t.F.setDepth(r.r,n+1))},t.F.restrictDepth=function(r,n,u){var v=0,c=1<<u-n,b=0;for(r.sort(function(a,s){return s.d==a.d?a.f-s.f:s.d-a.d}),v=0;v<r.length&&r[v].d>n;v++){var o=r[v].d;r[v].d=n,b+=c-(1<<u-o)}for(b>>>=u-n;b>0;)(o=r[v].d)<n?(r[v].d++,b-=1<<n-o-1):v++;for(;v>=0;v--)r[v].d==n&&b<0&&(r[v].d--,b++);b!=0&&console.log("debt left")},t.F._goodIndex=function(r,n){var u=0;return n[16|u]<=r&&(u|=16),n[8|u]<=r&&(u|=8),n[4|u]<=r&&(u|=4),n[2|u]<=r&&(u|=2),n[1|u]<=r&&(u|=1),u},t.F._writeLit=function(r,n,u,v){return t.F._putsF(u,v,n[r<<1]),v+n[1+(r<<1)]},t.F.inflate=function(r,n){var u=Uint8Array;if(r[0]==3&&r[1]==0)return n||new u(0);var v=t.F,c=v._bitsF,b=v._bitsE,o=v._decodeTiny,a=v.makeCodes,s=v.codes2map,m=v._get17,g=v.U,E=n==null;E&&(n=new u(r.length>>>2<<3));for(var I,w,Y=0,P=0,R=0,z=0,_=0,M=0,h=0,p=0,x=0;Y==0;)if(Y=c(r,x,1),P=c(r,x+1,2),x+=3,P!=0){if(E&&(n=t.F._check(n,p+(1<<17))),P==1&&(I=g.flmap,w=g.fdmap,M=511,h=31),P==2){R=b(r,x,5)+257,z=b(r,x+5,5)+1,_=b(r,x+10,4)+4,x+=14;for(var A=0;A<38;A+=2)g.itree[A]=0,g.itree[A+1]=0;var T=1;for(A=0;A<_;A++){var C=b(r,x+3*A,3);g.itree[1+(g.ordr[A]<<1)]=C,C>T&&(T=C)}x+=3*_,a(g.itree,T),s(g.itree,T,g.imap),I=g.lmap,w=g.dmap,x=o(g.imap,(1<<T)-1,R+z,r,x,g.ttree);var D=v._copyOut(g.ttree,0,R,g.ltree);M=(1<<D)-1;var F=v._copyOut(g.ttree,R,z,g.dtree);h=(1<<F)-1,a(g.ltree,D),s(g.ltree,D,I),a(g.dtree,F),s(g.dtree,F,w)}for(;;){var y=I[m(r,x)&M];x+=15&y;var f=y>>>4;if(!(f>>>8))n[p++]=f;else{if(f==256)break;var O=p+f-254;if(f>264){var k=g.ldef[f-257];O=p+(k>>>3)+b(r,x,7&k),x+=7&k}var H=w[m(r,x)&h];x+=15&H;var $=H>>>4,N=g.ddef[$],W=(N>>>4)+c(r,x,15&N);for(x+=15&N,E&&(n=t.F._check(n,p+(1<<17)));p<O;)n[p]=n[p++-W],n[p]=n[p++-W],n[p]=n[p++-W],n[p]=n[p++-W];p=O}}}else{7&x&&(x+=8-(7&x));var q=4+(x>>>3),L=r[q-4]|r[q-3]<<8;E&&(n=t.F._check(n,p+L)),n.set(new u(r.buffer,r.byteOffset+q,L),p),x=q+L<<3,p+=L}return n.length==p?n:n.slice(0,p)},t.F._check=function(r,n){var u=r.length;if(n<=u)return r;var v=new Uint8Array(Math.max(u<<1,n));return v.set(r,0),v},t.F._decodeTiny=function(r,n,u,v,c,b){for(var o=t.F._bitsE,a=t.F._get17,s=0;s<u;){var m=r[a(v,c)&n];c+=15&m;var g=m>>>4;if(g<=15)b[s]=g,s++;else{var E=0,I=0;g==16?(I=3+o(v,c,2),c+=2,E=b[s-1]):g==17?(I=3+o(v,c,3),c+=3):g==18&&(I=11+o(v,c,7),c+=7);for(var w=s+I;s<w;)b[s]=E,s++}}return c},t.F._copyOut=function(r,n,u,v){for(var c=0,b=0,o=v.length>>>1;b<u;){var a=r[b+n];v[b<<1]=0,v[1+(b<<1)]=a,a>c&&(c=a),b++}for(;b<o;)v[b<<1]=0,v[1+(b<<1)]=0,b++;return c},t.F.makeCodes=function(r,n){for(var u,v,c,b,o=t.F.U,a=r.length,s=o.bl_count,m=0;m<=n;m++)s[m]=0;for(m=1;m<a;m+=2)s[r[m]]++;var g=o.next_code;for(u=0,s[0]=0,v=1;v<=n;v++)u=u+s[v-1]<<1,g[v]=u;for(c=0;c<a;c+=2)(b=r[c+1])!=0&&(r[c]=g[b],g[b]++)},t.F.codes2map=function(r,n,u){for(var v=r.length,c=t.F.U.rev15,b=0;b<v;b+=2)if(r[b+1]!=0)for(var o=b>>1,a=r[b+1],s=o<<4|a,m=n-a,g=r[b]<<m,E=g+(1<<m);g!=E;)u[c[g]>>>15-n]=s,g++},t.F.revCodes=function(r,n){for(var u=t.F.U.rev15,v=15-n,c=0;c<r.length;c+=2){var b=r[c]<<n-r[c+1];r[c]=u[b]>>>v}},t.F._putsE=function(r,n,u){u<<=7&n;var v=n>>>3;r[v]|=u,r[v+1]|=u>>>8},t.F._putsF=function(r,n,u){u<<=7&n;var v=n>>>3;r[v]|=u,r[v+1]|=u>>>8,r[v+2]|=u>>>16},t.F._bitsE=function(r,n,u){return(r[n>>>3]|r[1+(n>>>3)]<<8)>>>(7&n)&(1<<u)-1},t.F._bitsF=function(r,n,u){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16)>>>(7&n)&(1<<u)-1},t.F._get17=function(r,n){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16)>>>(7&n)},t.F._get25=function(r,n){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16|r[3+(n>>>3)]<<24)>>>(7&n)},t.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=t.F.U,n=0;n<32768;n++){var u=n;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,r.rev15[n]=(u>>>16|u<<16)>>>17}function v(c,b,o){for(;b--!=0;)c.push(0,o)}for(n=0;n<32;n++)r.ldef[n]=r.of0[n]<<3|r.exb[n],r.ddef[n]=r.df0[n]<<4|r.dxb[n];v(r.fltree,144,8),v(r.fltree,112,9),v(r.fltree,24,7),v(r.fltree,8,8),t.F.makeCodes(r.fltree,9),t.F.codes2map(r.fltree,9,r.flmap),t.F.revCodes(r.fltree,9),v(r.fdtree,32,5),t.F.makeCodes(r.fdtree,5),t.F.codes2map(r.fdtree,5,r.fdmap),t.F.revCodes(r.fdtree,5),v(r.itree,19,0),v(r.ltree,286,0),v(r.dtree,30,0),v(r.ttree,320,0)}()})();var ss=ns({__proto__:null,default:Zt},[Zt]);const nt=function(){var d={nextZero(o,a){for(;o[a]!=0;)a++;return a},readUshort:(o,a)=>o[a]<<8|o[a+1],writeUshort(o,a,s){o[a]=s>>8&255,o[a+1]=255&s},readUint:(o,a)=>16777216*o[a]+(o[a+1]<<16|o[a+2]<<8|o[a+3]),writeUint(o,a,s){o[a]=s>>24&255,o[a+1]=s>>16&255,o[a+2]=s>>8&255,o[a+3]=255&s},readASCII(o,a,s){let m="";for(let g=0;g<s;g++)m+=String.fromCharCode(o[a+g]);return m},writeASCII(o,a,s){for(let m=0;m<s.length;m++)o[a+m]=s.charCodeAt(m)},readBytes(o,a,s){const m=[];for(let g=0;g<s;g++)m.push(o[a+g]);return m},pad:o=>o.length<2?`0${o}`:o,readUTF8(o,a,s){let m,g="";for(let E=0;E<s;E++)g+=`%${d.pad(o[a+E].toString(16))}`;try{m=decodeURIComponent(g)}catch{return d.readASCII(o,a,s)}return m}};function e(o,a,s,m){const g=a*s,E=n(m),I=Math.ceil(a*E/8),w=new Uint8Array(4*g),Y=new Uint32Array(w.buffer),{ctype:P}=m,{depth:R}=m,z=d.readUshort;if(P==6){const k=g<<2;if(R==8)for(var _=0;_<k;_+=4)w[_]=o[_],w[_+1]=o[_+1],w[_+2]=o[_+2],w[_+3]=o[_+3];if(R==16)for(_=0;_<k;_++)w[_]=o[_<<1]}else if(P==2){const k=m.tabs.tRNS;if(k==null){if(R==8)for(_=0;_<g;_++){var M=3*_;Y[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M]}if(R==16)for(_=0;_<g;_++)M=6*_,Y[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M]}else{var h=k[0];const H=k[1],$=k[2];if(R==8)for(_=0;_<g;_++){var p=_<<2;M=3*_,Y[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M],o[M]==h&&o[M+1]==H&&o[M+2]==$&&(w[p+3]=0)}if(R==16)for(_=0;_<g;_++)p=_<<2,M=6*_,Y[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M],z(o,M)==h&&z(o,M+2)==H&&z(o,M+4)==$&&(w[p+3]=0)}}else if(P==3){const k=m.tabs.PLTE,H=m.tabs.tRNS,$=H?H.length:0;if(R==1)for(var x=0;x<s;x++){var A=x*I,T=x*a;for(_=0;_<a;_++){p=T+_<<2;var C=3*(D=o[A+(_>>3)]>>7-((7&_)<<0)&1);w[p]=k[C],w[p+1]=k[C+1],w[p+2]=k[C+2],w[p+3]=D<$?H[D]:255}}if(R==2)for(x=0;x<s;x++)for(A=x*I,T=x*a,_=0;_<a;_++)p=T+_<<2,C=3*(D=o[A+(_>>2)]>>6-((3&_)<<1)&3),w[p]=k[C],w[p+1]=k[C+1],w[p+2]=k[C+2],w[p+3]=D<$?H[D]:255;if(R==4)for(x=0;x<s;x++)for(A=x*I,T=x*a,_=0;_<a;_++)p=T+_<<2,C=3*(D=o[A+(_>>1)]>>4-((1&_)<<2)&15),w[p]=k[C],w[p+1]=k[C+1],w[p+2]=k[C+2],w[p+3]=D<$?H[D]:255;if(R==8)for(_=0;_<g;_++){var D;p=_<<2,C=3*(D=o[_]),w[p]=k[C],w[p+1]=k[C+1],w[p+2]=k[C+2],w[p+3]=D<$?H[D]:255}}else if(P==4){if(R==8)for(_=0;_<g;_++){p=_<<2;var F=o[y=_<<1];w[p]=F,w[p+1]=F,w[p+2]=F,w[p+3]=o[y+1]}if(R==16)for(_=0;_<g;_++){var y;p=_<<2,F=o[y=_<<2],w[p]=F,w[p+1]=F,w[p+2]=F,w[p+3]=o[y+2]}}else if(P==0)for(h=m.tabs.tRNS?m.tabs.tRNS:-1,x=0;x<s;x++){const k=x*I,H=x*a;if(R==1)for(var f=0;f<a;f++){var O=(F=255*(o[k+(f>>>3)]>>>7-(7&f)&1))==255*h?0:255;Y[H+f]=O<<24|F<<16|F<<8|F}else if(R==2)for(f=0;f<a;f++)O=(F=85*(o[k+(f>>>2)]>>>6-((3&f)<<1)&3))==85*h?0:255,Y[H+f]=O<<24|F<<16|F<<8|F;else if(R==4)for(f=0;f<a;f++)O=(F=17*(o[k+(f>>>1)]>>>4-((1&f)<<2)&15))==17*h?0:255,Y[H+f]=O<<24|F<<16|F<<8|F;else if(R==8)for(f=0;f<a;f++)O=(F=o[k+f])==h?0:255,Y[H+f]=O<<24|F<<16|F<<8|F;else if(R==16)for(f=0;f<a;f++)F=o[k+(f<<1)],O=z(o,k+(f<<1))==h?0:255,Y[H+f]=O<<24|F<<16|F<<8|F}return w}function i(o,a,s,m){const g=n(o),E=Math.ceil(s*g/8),I=new Uint8Array((E+1+o.interlace)*m);return a=o.tabs.CgBI?r(a,I):t(a,I),o.interlace==0?a=u(a,o,0,s,m):o.interlace==1&&(a=function(Y,P){const R=P.width,z=P.height,_=n(P),M=_>>3,h=Math.ceil(R*_/8),p=new Uint8Array(z*h);let x=0;const A=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const f=C[F],O=D[F];let k=0,H=0,$=A[F];for(;$<z;)$+=f,H++;let N=T[F];for(;N<R;)N+=O,k++;const W=Math.ceil(k*_/8);u(Y,P,x,k,H);let q=0,L=A[F];for(;L<z;){let ae=T[F],se=x+q*W<<3;for(;ae<R;){var y;if(_==1&&(y=(y=Y[se>>3])>>7-(7&se)&1,p[L*h+(ae>>3)]|=y<<7-((7&ae)<<0)),_==2&&(y=(y=Y[se>>3])>>6-(7&se)&3,p[L*h+(ae>>2)]|=y<<6-((3&ae)<<1)),_==4&&(y=(y=Y[se>>3])>>4-(7&se)&15,p[L*h+(ae>>1)]|=y<<4-((1&ae)<<2)),_>=8){const pe=L*h+ae*M;for(let fe=0;fe<M;fe++)p[pe+fe]=Y[(se>>3)+fe]}se+=_,ae+=O}q++,L+=f}k*H!=0&&(x+=H*(1+W)),F+=1}return p}(a,o)),a}function t(o,a){return r(new Uint8Array(o.buffer,2,o.length-6),a)}var r=function(){const o={H:{}};return o.H.N=function(a,s){const m=Uint8Array;let g,E,I=0,w=0,Y=0,P=0,R=0,z=0,_=0,M=0,h=0;if(a[0]==3&&a[1]==0)return s||new m(0);const p=o.H,x=p.b,A=p.e,T=p.R,C=p.n,D=p.A,F=p.Z,y=p.m,f=s==null;for(f&&(s=new m(a.length>>>2<<5));I==0;)if(I=x(a,h,1),w=x(a,h+1,2),h+=3,w!=0){if(f&&(s=o.H.W(s,M+(1<<17))),w==1&&(g=y.J,E=y.h,z=511,_=31),w==2){Y=A(a,h,5)+257,P=A(a,h+5,5)+1,R=A(a,h+10,4)+4,h+=14;let k=1;for(var O=0;O<38;O+=2)y.Q[O]=0,y.Q[O+1]=0;for(O=0;O<R;O++){const N=A(a,h+3*O,3);y.Q[1+(y.X[O]<<1)]=N,N>k&&(k=N)}h+=3*R,C(y.Q,k),D(y.Q,k,y.u),g=y.w,E=y.d,h=T(y.u,(1<<k)-1,Y+P,a,h,y.v);const H=p.V(y.v,0,Y,y.C);z=(1<<H)-1;const $=p.V(y.v,Y,P,y.D);_=(1<<$)-1,C(y.C,H),D(y.C,H,g),C(y.D,$),D(y.D,$,E)}for(;;){const k=g[F(a,h)&z];h+=15&k;const H=k>>>4;if(!(H>>>8))s[M++]=H;else{if(H==256)break;{let $=M+H-254;if(H>264){const ae=y.q[H-257];$=M+(ae>>>3)+A(a,h,7&ae),h+=7&ae}const N=E[F(a,h)&_];h+=15&N;const W=N>>>4,q=y.c[W],L=(q>>>4)+x(a,h,15&q);for(h+=15&q;M<$;)s[M]=s[M++-L],s[M]=s[M++-L],s[M]=s[M++-L],s[M]=s[M++-L];M=$}}}}else{7&h&&(h+=8-(7&h));const k=4+(h>>>3),H=a[k-4]|a[k-3]<<8;f&&(s=o.H.W(s,M+H)),s.set(new m(a.buffer,a.byteOffset+k,H),M),h=k+H<<3,M+=H}return s.length==M?s:s.slice(0,M)},o.H.W=function(a,s){const m=a.length;if(s<=m)return a;const g=new Uint8Array(m<<1);return g.set(a,0),g},o.H.R=function(a,s,m,g,E,I){const w=o.H.e,Y=o.H.Z;let P=0;for(;P<m;){const R=a[Y(g,E)&s];E+=15&R;const z=R>>>4;if(z<=15)I[P]=z,P++;else{let _=0,M=0;z==16?(M=3+w(g,E,2),E+=2,_=I[P-1]):z==17?(M=3+w(g,E,3),E+=3):z==18&&(M=11+w(g,E,7),E+=7);const h=P+M;for(;P<h;)I[P]=_,P++}}return E},o.H.V=function(a,s,m,g){let E=0,I=0;const w=g.length>>>1;for(;I<m;){const Y=a[I+s];g[I<<1]=0,g[1+(I<<1)]=Y,Y>E&&(E=Y),I++}for(;I<w;)g[I<<1]=0,g[1+(I<<1)]=0,I++;return E},o.H.n=function(a,s){const m=o.H.m,g=a.length;let E,I,w,Y;const P=m.j;for(var R=0;R<=s;R++)P[R]=0;for(R=1;R<g;R+=2)P[a[R]]++;const z=m.K;for(E=0,P[0]=0,I=1;I<=s;I++)E=E+P[I-1]<<1,z[I]=E;for(w=0;w<g;w+=2)Y=a[w+1],Y!=0&&(a[w]=z[Y],z[Y]++)},o.H.A=function(a,s,m){const g=a.length,E=o.H.m.r;for(let I=0;I<g;I+=2)if(a[I+1]!=0){const w=I>>1,Y=a[I+1],P=w<<4|Y,R=s-Y;let z=a[I]<<R;const _=z+(1<<R);for(;z!=_;)m[E[z]>>>15-s]=P,z++}},o.H.l=function(a,s){const m=o.H.m.r,g=15-s;for(let E=0;E<a.length;E+=2){const I=a[E]<<s-a[E+1];a[E]=m[I]>>>g}},o.H.M=function(a,s,m){m<<=7&s;const g=s>>>3;a[g]|=m,a[g+1]|=m>>>8},o.H.I=function(a,s,m){m<<=7&s;const g=s>>>3;a[g]|=m,a[g+1]|=m>>>8,a[g+2]|=m>>>16},o.H.e=function(a,s,m){return(a[s>>>3]|a[1+(s>>>3)]<<8)>>>(7&s)&(1<<m)-1},o.H.b=function(a,s,m){return(a[s>>>3]|a[1+(s>>>3)]<<8|a[2+(s>>>3)]<<16)>>>(7&s)&(1<<m)-1},o.H.Z=function(a,s){return(a[s>>>3]|a[1+(s>>>3)]<<8|a[2+(s>>>3)]<<16)>>>(7&s)},o.H.i=function(a,s){return(a[s>>>3]|a[1+(s>>>3)]<<8|a[2+(s>>>3)]<<16|a[3+(s>>>3)]<<24)>>>(7&s)},o.H.m=function(){const a=Uint16Array,s=Uint32Array;return{K:new a(16),j:new a(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new a(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new s(32),J:new a(512),_:[],h:new a(32),$:[],w:new a(32768),C:[],v:[],d:new a(32768),D:[],u:new a(512),Q:[],r:new a(32768),s:new s(286),Y:new s(30),a:new s(19),t:new s(15e3),k:new a(65536),g:new a(32768)}}(),function(){const a=o.H.m;for(var s=0;s<32768;s++){let g=s;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,a.r[s]=(g>>>16|g<<16)>>>17}function m(g,E,I){for(;E--!=0;)g.push(0,I)}for(s=0;s<32;s++)a.q[s]=a.S[s]<<3|a.T[s],a.c[s]=a.p[s]<<4|a.z[s];m(a._,144,8),m(a._,112,9),m(a._,24,7),m(a._,8,8),o.H.n(a._,9),o.H.A(a._,9,a.J),o.H.l(a._,9),m(a.$,32,5),o.H.n(a.$,5),o.H.A(a.$,5,a.h),o.H.l(a.$,5),m(a.Q,19,0),m(a.C,286,0),m(a.D,30,0),m(a.v,320,0)}(),o.H.N}();function n(o){return[1,null,3,1,2,null,4][o.ctype]*o.depth}function u(o,a,s,m,g){let E=n(a);const I=Math.ceil(m*E/8);let w,Y;E=Math.ceil(E/8);let P=o[s],R=0;if(P>1&&(o[s]=[0,0,1][P-2]),P==3)for(R=E;R<I;R++)o[R+1]=o[R+1]+(o[R+1-E]>>>1)&255;for(let z=0;z<g;z++)if(w=s+z*I,Y=w+z+1,P=o[Y-1],R=0,P==0)for(;R<I;R++)o[w+R]=o[Y+R];else if(P==1){for(;R<E;R++)o[w+R]=o[Y+R];for(;R<I;R++)o[w+R]=o[Y+R]+o[w+R-E]}else if(P==2)for(;R<I;R++)o[w+R]=o[Y+R]+o[w+R-I];else if(P==3){for(;R<E;R++)o[w+R]=o[Y+R]+(o[w+R-I]>>>1);for(;R<I;R++)o[w+R]=o[Y+R]+(o[w+R-I]+o[w+R-E]>>>1)}else{for(;R<E;R++)o[w+R]=o[Y+R]+v(0,o[w+R-I],0);for(;R<I;R++)o[w+R]=o[Y+R]+v(o[w+R-E],o[w+R-I],o[w+R-E-I])}return o}function v(o,a,s){const m=o+a-s,g=m-o,E=m-a,I=m-s;return g*g<=E*E&&g*g<=I*I?o:E*E<=I*I?a:s}function c(o,a,s){s.width=d.readUint(o,a),a+=4,s.height=d.readUint(o,a),a+=4,s.depth=o[a],a++,s.ctype=o[a],a++,s.compress=o[a],a++,s.filter=o[a],a++,s.interlace=o[a],a++}function b(o,a,s,m,g,E,I,w,Y){const P=Math.min(a,g),R=Math.min(s,E);let z=0,_=0;for(let F=0;F<R;F++)for(let y=0;y<P;y++)if(I>=0&&w>=0?(z=F*a+y<<2,_=(w+F)*g+I+y<<2):(z=(-w+F)*a-I+y<<2,_=F*g+y<<2),Y==0)m[_]=o[z],m[_+1]=o[z+1],m[_+2]=o[z+2],m[_+3]=o[z+3];else if(Y==1){var M=o[z+3]*.00392156862745098,h=o[z]*M,p=o[z+1]*M,x=o[z+2]*M,A=m[_+3]*(1/255),T=m[_]*A,C=m[_+1]*A,D=m[_+2]*A;const f=1-M,O=M+A*f,k=O==0?0:1/O;m[_+3]=255*O,m[_+0]=(h+T*f)*k,m[_+1]=(p+C*f)*k,m[_+2]=(x+D*f)*k}else if(Y==2)M=o[z+3],h=o[z],p=o[z+1],x=o[z+2],A=m[_+3],T=m[_],C=m[_+1],D=m[_+2],M==A&&h==T&&p==C&&x==D?(m[_]=0,m[_+1]=0,m[_+2]=0,m[_+3]=0):(m[_]=h,m[_+1]=p,m[_+2]=x,m[_+3]=M);else if(Y==3){if(M=o[z+3],h=o[z],p=o[z+1],x=o[z+2],A=m[_+3],T=m[_],C=m[_+1],D=m[_+2],M==A&&h==T&&p==C&&x==D)continue;if(M<220&&A>20)return!1}return!0}return{decode:function(a){const s=new Uint8Array(a);let m=8;const g=d,E=g.readUshort,I=g.readUint,w={tabs:{},frames:[]},Y=new Uint8Array(s.length);let P,R=0,z=0;const _=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(s[M]!=_[M])throw"The input is not a PNG file!";for(;m<s.length;){const F=g.readUint(s,m);m+=4;const y=g.readASCII(s,m,4);if(m+=4,y=="IHDR")c(s,m,w);else if(y=="iCCP"){for(var h=m;s[h]!=0;)h++;g.readASCII(s,m,h-m),s[h+1];const f=s.slice(h+2,m+F);let O=null;try{O=t(f)}catch{O=r(f)}w.tabs[y]=O}else if(y=="CgBI")w.tabs[y]=s.slice(m,m+4);else if(y=="IDAT"){for(M=0;M<F;M++)Y[R+M]=s[m+M];R+=F}else if(y=="acTL")w.tabs[y]={num_frames:I(s,m),num_plays:I(s,m+4)},P=new Uint8Array(s.length);else if(y=="fcTL"){z!=0&&((D=w.frames[w.frames.length-1]).data=i(w,P.slice(0,z),D.rect.width,D.rect.height),z=0);const f={x:I(s,m+12),y:I(s,m+16),width:I(s,m+4),height:I(s,m+8)};let O=E(s,m+22);O=E(s,m+20)/(O==0?100:O);const k={rect:f,delay:Math.round(1e3*O),dispose:s[m+24],blend:s[m+25]};w.frames.push(k)}else if(y=="fdAT"){for(M=0;M<F-4;M++)P[z+M]=s[m+M+4];z+=F-4}else if(y=="pHYs")w.tabs[y]=[g.readUint(s,m),g.readUint(s,m+4),s[m+8]];else if(y=="cHRM")for(w.tabs[y]=[],M=0;M<8;M++)w.tabs[y].push(g.readUint(s,m+4*M));else if(y=="tEXt"||y=="zTXt"){w.tabs[y]==null&&(w.tabs[y]={});var p=g.nextZero(s,m),x=g.readASCII(s,m,p-m),A=m+F-p-1;if(y=="tEXt")C=g.readASCII(s,p+1,A);else{var T=t(s.slice(p+2,p+2+A));C=g.readUTF8(T,0,T.length)}w.tabs[y][x]=C}else if(y=="iTXt"){w.tabs[y]==null&&(w.tabs[y]={}),p=0,h=m,p=g.nextZero(s,h),x=g.readASCII(s,h,p-h);const f=s[h=p+1];var C;s[h+1],h+=2,p=g.nextZero(s,h),g.readASCII(s,h,p-h),h=p+1,p=g.nextZero(s,h),g.readUTF8(s,h,p-h),A=F-((h=p+1)-m),f==0?C=g.readUTF8(s,h,A):(T=t(s.slice(h,h+A)),C=g.readUTF8(T,0,T.length)),w.tabs[y][x]=C}else if(y=="PLTE")w.tabs[y]=g.readBytes(s,m,F);else if(y=="hIST"){const f=w.tabs.PLTE.length/3;for(w.tabs[y]=[],M=0;M<f;M++)w.tabs[y].push(E(s,m+2*M))}else if(y=="tRNS")w.ctype==3?w.tabs[y]=g.readBytes(s,m,F):w.ctype==0?w.tabs[y]=E(s,m):w.ctype==2&&(w.tabs[y]=[E(s,m),E(s,m+2),E(s,m+4)]);else if(y=="gAMA")w.tabs[y]=g.readUint(s,m)/1e5;else if(y=="sRGB")w.tabs[y]=s[m];else if(y=="bKGD")w.ctype==0||w.ctype==4?w.tabs[y]=[E(s,m)]:w.ctype==2||w.ctype==6?w.tabs[y]=[E(s,m),E(s,m+2),E(s,m+4)]:w.ctype==3&&(w.tabs[y]=s[m]);else if(y=="IEND")break;m+=F,g.readUint(s,m),m+=4}var D;return z!=0&&((D=w.frames[w.frames.length-1]).data=i(w,P.slice(0,z),D.rect.width,D.rect.height)),w.data=i(w,Y,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(a){const s=a.width,m=a.height;if(a.tabs.acTL==null)return[e(a.data,s,m,a).buffer];const g=[];a.frames[0].data==null&&(a.frames[0].data=a.data);const E=s*m*4,I=new Uint8Array(E),w=new Uint8Array(E),Y=new Uint8Array(E);for(let R=0;R<a.frames.length;R++){const z=a.frames[R],_=z.rect.x,M=z.rect.y,h=z.rect.width,p=z.rect.height,x=e(z.data,h,p,a);if(R!=0)for(var P=0;P<E;P++)Y[P]=I[P];if(z.blend==0?b(x,h,p,I,s,m,_,M,0):z.blend==1&&b(x,h,p,I,s,m,_,M,1),g.push(I.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)b(w,h,p,I,s,m,_,M,0);else if(z.dispose==2)for(P=0;P<E;P++)I[P]=Y[P]}}return g},_paeth:v,_copyTile:b,_bin:d}}();(function(){const{_copyTile:d}=nt,{_bin:e}=nt,i=nt._paeth;var t={table:function(){const h=new Uint32Array(256);for(let p=0;p<256;p++){let x=p;for(let A=0;A<8;A++)1&x?x=3988292384^x>>>1:x>>>=1;h[p]=x}return h}(),update(h,p,x,A){for(let T=0;T<A;T++)h=t.table[255&(h^p[x+T])]^h>>>8;return h},crc:(h,p,x)=>4294967295^t.update(4294967295,h,p,x)};function r(h,p,x,A){p[x]+=h[0]*A>>4,p[x+1]+=h[1]*A>>4,p[x+2]+=h[2]*A>>4,p[x+3]+=h[3]*A>>4}function n(h){return Math.max(0,Math.min(255,h))}function u(h,p){const x=h[0]-p[0],A=h[1]-p[1],T=h[2]-p[2],C=h[3]-p[3];return x*x+A*A+T*T+C*C}function v(h,p,x,A,T,C,D){D==null&&(D=1);const F=A.length,y=[];for(var f=0;f<F;f++){const L=A[f];y.push([L>>>0&255,L>>>8&255,L>>>16&255,L>>>24&255])}for(f=0;f<F;f++){let L=4294967295;for(var O=0,k=0;k<F;k++){var H=u(y[f],y[k]);k!=f&&H<L&&(L=H,O=k)}}const $=new Uint32Array(T.buffer),N=new Int16Array(p*x*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<W.length;f++)W[f]=255*((W[f]+.5)/16-.5);for(let L=0;L<x;L++)for(let ae=0;ae<p;ae++){var q;f=4*(L*p+ae),D!=2?q=[n(h[f]+N[f]),n(h[f+1]+N[f+1]),n(h[f+2]+N[f+2]),n(h[f+3]+N[f+3])]:(H=W[4*(3&L)+(3&ae)],q=[n(h[f]+H),n(h[f+1]+H),n(h[f+2]+H),n(h[f+3]+H)]),O=0;let se=16777215;for(k=0;k<F;k++){const we=u(q,y[k]);we<se&&(se=we,O=k)}const pe=y[O],fe=[q[0]-pe[0],q[1]-pe[1],q[2]-pe[2],q[3]-pe[3]];D==1&&(ae!=p-1&&r(fe,N,f+4,7),L!=x-1&&(ae!=0&&r(fe,N,f+4*p-4,3),r(fe,N,f+4*p,5),ae!=p-1&&r(fe,N,f+4*p+4,1))),C[f>>2]=O,$[f>>2]=A[O]}}function c(h,p,x,A,T){T==null&&(T={});const{crc:C}=t,D=e.writeUint,F=e.writeUshort,y=e.writeASCII;let f=8;const O=h.frames.length>1;let k,H=!1,$=33+(O?20:0);if(T.sRGB!=null&&($+=13),T.pHYs!=null&&($+=21),T.iCCP!=null&&(k=pako.deflate(T.iCCP),$+=21+k.length+4),h.ctype==3){for(var N=h.plte.length,W=0;W<N;W++)h.plte[W]>>>24!=255&&(H=!0);$+=8+3*N+4+(H?8+1*N+4:0)}for(var q=0;q<h.frames.length;q++)O&&($+=38),$+=(pe=h.frames[q]).cimg.length+12,q!=0&&($+=4);$+=12;const L=new Uint8Array($),ae=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)L[W]=ae[W];if(D(L,f,13),f+=4,y(L,f,"IHDR"),f+=4,D(L,f,p),f+=4,D(L,f,x),f+=4,L[f]=h.depth,f++,L[f]=h.ctype,f++,L[f]=0,f++,L[f]=0,f++,L[f]=0,f++,D(L,f,C(L,f-17,17)),f+=4,T.sRGB!=null&&(D(L,f,1),f+=4,y(L,f,"sRGB"),f+=4,L[f]=T.sRGB,f++,D(L,f,C(L,f-5,5)),f+=4),T.iCCP!=null){const fe=13+k.length;D(L,f,fe),f+=4,y(L,f,"iCCP"),f+=4,y(L,f,"ICC profile"),f+=11,f+=2,L.set(k,f),f+=k.length,D(L,f,C(L,f-(fe+4),fe+4)),f+=4}if(T.pHYs!=null&&(D(L,f,9),f+=4,y(L,f,"pHYs"),f+=4,D(L,f,T.pHYs[0]),f+=4,D(L,f,T.pHYs[1]),f+=4,L[f]=T.pHYs[2],f++,D(L,f,C(L,f-13,13)),f+=4),O&&(D(L,f,8),f+=4,y(L,f,"acTL"),f+=4,D(L,f,h.frames.length),f+=4,D(L,f,T.loop!=null?T.loop:0),f+=4,D(L,f,C(L,f-12,12)),f+=4),h.ctype==3){for(D(L,f,3*(N=h.plte.length)),f+=4,y(L,f,"PLTE"),f+=4,W=0;W<N;W++){const fe=3*W,we=h.plte[W],G=255&we,ne=we>>>8&255,K=we>>>16&255;L[f+fe+0]=G,L[f+fe+1]=ne,L[f+fe+2]=K}if(f+=3*N,D(L,f,C(L,f-3*N-4,3*N+4)),f+=4,H){for(D(L,f,N),f+=4,y(L,f,"tRNS"),f+=4,W=0;W<N;W++)L[f+W]=h.plte[W]>>>24&255;f+=N,D(L,f,C(L,f-N-4,N+4)),f+=4}}let se=0;for(q=0;q<h.frames.length;q++){var pe=h.frames[q];O&&(D(L,f,26),f+=4,y(L,f,"fcTL"),f+=4,D(L,f,se++),f+=4,D(L,f,pe.rect.width),f+=4,D(L,f,pe.rect.height),f+=4,D(L,f,pe.rect.x),f+=4,D(L,f,pe.rect.y),f+=4,F(L,f,A[q]),f+=2,F(L,f,1e3),f+=2,L[f]=pe.dispose,f++,L[f]=pe.blend,f++,D(L,f,C(L,f-30,30)),f+=4);const fe=pe.cimg;D(L,f,(N=fe.length)+(q==0?0:4)),f+=4;const we=f;y(L,f,q==0?"IDAT":"fdAT"),f+=4,q!=0&&(D(L,f,se++),f+=4),L.set(fe,f),f+=N,D(L,f,C(L,we,f-we)),f+=4}return D(L,f,0),f+=4,y(L,f,"IEND"),f+=4,D(L,f,C(L,f-4,4)),f+=4,L.buffer}function b(h,p,x){for(let A=0;A<h.frames.length;A++){const T=h.frames[A];T.rect.width;const C=T.rect.height,D=new Uint8Array(C*T.bpl+C);T.cimg=m(T.img,C,T.bpp,T.bpl,D,p,x)}}function o(h,p,x,A,T){const C=T[0],D=T[1],F=T[2],y=T[3],f=T[4],O=T[5];let k=6,H=8,$=255;for(var N=0;N<h.length;N++){const ie=new Uint8Array(h[N]);for(var W=ie.length,q=0;q<W;q+=4)$&=ie[q+3]}const L=$!=255,ae=function(Z,J,ee,ue,de,Te){const ge=[];for(var xe=0;xe<Z.length;xe++){const De=new Uint8Array(Z[xe]),Pe=new Uint32Array(De.buffer);var be;let qe=0,Qe=0,$e=J,st=ee,kt=ue?1:0;if(xe!=0){const Yt=Te||ue||xe==1||ge[xe-2].dispose!=0?1:2;let Lt=0,Ft=1e9;for(let pt=0;pt<Yt;pt++){var Ye=new Uint8Array(Z[xe-1-pt]);const nr=new Uint32Array(Z[xe-1-pt]);let ot=J,lt=ee,yt=-1,Dt=-1;for(let ct=0;ct<ee;ct++)for(let rt=0;rt<J;rt++)Pe[Ce=ct*J+rt]!=nr[Ce]&&(rt<ot&&(ot=rt),rt>yt&&(yt=rt),ct<lt&&(lt=ct),ct>Dt&&(Dt=ct));yt==-1&&(ot=lt=yt=Dt=0),de&&((1&ot)==1&&ot--,(1&lt)==1&&lt--);const zt=(yt-ot+1)*(Dt-lt+1);zt<Ft&&(Ft=zt,Lt=pt,qe=ot,Qe=lt,$e=yt-ot+1,st=Dt-lt+1)}Ye=new Uint8Array(Z[xe-1-Lt]),Lt==1&&(ge[xe-1].dispose=2),be=new Uint8Array($e*st*4),d(Ye,J,ee,be,$e,st,-qe,-Qe,0),kt=d(De,J,ee,be,$e,st,-qe,-Qe,3)?1:0,kt==1?s(De,J,ee,be,{x:qe,y:Qe,width:$e,height:st}):d(De,J,ee,be,$e,st,-qe,-Qe,0)}else be=De.slice(0);ge.push({rect:{x:qe,y:Qe,width:$e,height:st},img:be,blend:kt,dispose:0})}if(ue)for(xe=0;xe<ge.length;xe++){if((Le=ge[xe]).blend==1)continue;const De=Le.rect,Pe=ge[xe-1].rect,qe=Math.min(De.x,Pe.x),Qe=Math.min(De.y,Pe.y),$e={x:qe,y:Qe,width:Math.max(De.x+De.width,Pe.x+Pe.width)-qe,height:Math.max(De.y+De.height,Pe.y+Pe.height)-Qe};ge[xe-1].dispose=1,xe-1!=0&&a(Z,J,ee,ge,xe-1,$e,de),a(Z,J,ee,ge,xe,$e,de)}let it=0;if(Z.length!=1)for(var Ce=0;Ce<ge.length;Ce++){var Le;it+=(Le=ge[Ce]).rect.width*Le.rect.height}return ge}(h,p,x,C,D,F),se={},pe=[],fe=[];if(A!=0){const ie=[];for(q=0;q<ae.length;q++)ie.push(ae[q].img.buffer);const Z=function(de){let Te=0;for(var ge=0;ge<de.length;ge++)Te+=de[ge].byteLength;const xe=new Uint8Array(Te);let be=0;for(ge=0;ge<de.length;ge++){const Ye=new Uint8Array(de[ge]),it=Ye.length;for(let Ce=0;Ce<it;Ce+=4){let Le=Ye[Ce],De=Ye[Ce+1],Pe=Ye[Ce+2];const qe=Ye[Ce+3];qe==0&&(Le=De=Pe=0),xe[be+Ce]=Le,xe[be+Ce+1]=De,xe[be+Ce+2]=Pe,xe[be+Ce+3]=qe}be+=it}return xe.buffer}(ie),J=E(Z,A);for(q=0;q<J.plte.length;q++)pe.push(J.plte[q].est.rgba);let ee=0;for(q=0;q<ae.length;q++){const ue=(G=ae[q]).img.length;var we=new Uint8Array(J.inds.buffer,ee>>2,ue>>2);fe.push(we);const de=new Uint8Array(J.abuf,ee,ue);O&&v(G.img,G.rect.width,G.rect.height,pe,de,we),G.img.set(de),ee+=ue}}else for(N=0;N<ae.length;N++){var G=ae[N];const ie=new Uint32Array(G.img.buffer);var ne=G.rect.width;for(W=ie.length,we=new Uint8Array(W),fe.push(we),q=0;q<W;q++){const Z=ie[q];if(q!=0&&Z==ie[q-1])we[q]=we[q-1];else if(q>ne&&Z==ie[q-ne])we[q]=we[q-ne];else{let J=se[Z];if(J==null&&(se[Z]=J=pe.length,pe.push(Z),pe.length>=300))break;we[q]=J}}}const K=pe.length;for(K<=256&&f==0&&(H=K<=2?1:K<=4?2:K<=16?4:8,H=Math.max(H,y)),N=0;N<ae.length;N++){(G=ae[N]).rect.x,G.rect.y,ne=G.rect.width;const ie=G.rect.height;let Z=G.img;new Uint32Array(Z.buffer);let J=4*ne,ee=4;if(K<=256&&f==0){J=Math.ceil(H*ne/8);var re=new Uint8Array(J*ie);const ue=fe[N];for(let de=0;de<ie;de++){q=de*J;const Te=de*ne;if(H==8)for(var oe=0;oe<ne;oe++)re[q+oe]=ue[Te+oe];else if(H==4)for(oe=0;oe<ne;oe++)re[q+(oe>>1)]|=ue[Te+oe]<<4-4*(1&oe);else if(H==2)for(oe=0;oe<ne;oe++)re[q+(oe>>2)]|=ue[Te+oe]<<6-2*(3&oe);else if(H==1)for(oe=0;oe<ne;oe++)re[q+(oe>>3)]|=ue[Te+oe]<<7-1*(7&oe)}Z=re,k=3,ee=1}else if(L==0&&ae.length==1){re=new Uint8Array(ne*ie*3);const ue=ne*ie;for(q=0;q<ue;q++){const de=3*q,Te=4*q;re[de]=Z[Te],re[de+1]=Z[Te+1],re[de+2]=Z[Te+2]}Z=re,k=2,ee=3,J=3*ne}G.img=Z,G.bpl=J,G.bpp=ee}return{ctype:k,depth:H,plte:pe,frames:ae}}function a(h,p,x,A,T,C,D){const F=Uint8Array,y=Uint32Array,f=new F(h[T-1]),O=new y(h[T-1]),k=T+1<h.length?new F(h[T+1]):null,H=new F(h[T]),$=new y(H.buffer);let N=p,W=x,q=-1,L=-1;for(let se=0;se<C.height;se++)for(let pe=0;pe<C.width;pe++){const fe=C.x+pe,we=C.y+se,G=we*p+fe,ne=$[G];ne==0||A[T-1].dispose==0&&O[G]==ne&&(k==null||k[4*G+3]!=0)||(fe<N&&(N=fe),fe>q&&(q=fe),we<W&&(W=we),we>L&&(L=we))}q==-1&&(N=W=q=L=0),D&&((1&N)==1&&N--,(1&W)==1&&W--),C={x:N,y:W,width:q-N+1,height:L-W+1};const ae=A[T];ae.rect=C,ae.blend=1,ae.img=new Uint8Array(C.width*C.height*4),A[T-1].dispose==0?(d(f,p,x,ae.img,C.width,C.height,-C.x,-C.y,0),s(H,p,x,ae.img,C)):d(H,p,x,ae.img,C.width,C.height,-C.x,-C.y,0)}function s(h,p,x,A,T){d(h,p,x,A,T.width,T.height,-T.x,-T.y,2)}function m(h,p,x,A,T,C,D){const F=[];let y,f=[0,1,2,3,4];C!=-1?f=[C]:(p*A>5e5||x==1)&&(f=[0]),D&&(y={level:0});const O=ss;for(var k=0;k<f.length;k++){for(let N=0;N<p;N++)g(T,h,N,A,x,f[k]);F.push(O.deflate(T,y))}let H,$=1e9;for(k=0;k<F.length;k++)F[k].length<$&&(H=k,$=F[k].length);return F[H]}function g(h,p,x,A,T,C){const D=x*A;let F=D+x;if(h[F]=C,F++,C==0)if(A<500)for(var y=0;y<A;y++)h[F+y]=p[D+y];else h.set(new Uint8Array(p.buffer,D,A),F);else if(C==1){for(y=0;y<T;y++)h[F+y]=p[D+y];for(y=T;y<A;y++)h[F+y]=p[D+y]-p[D+y-T]+256&255}else if(x==0){for(y=0;y<T;y++)h[F+y]=p[D+y];if(C==2)for(y=T;y<A;y++)h[F+y]=p[D+y];if(C==3)for(y=T;y<A;y++)h[F+y]=p[D+y]-(p[D+y-T]>>1)+256&255;if(C==4)for(y=T;y<A;y++)h[F+y]=p[D+y]-i(p[D+y-T],0,0)+256&255}else{if(C==2)for(y=0;y<A;y++)h[F+y]=p[D+y]+256-p[D+y-A]&255;if(C==3){for(y=0;y<T;y++)h[F+y]=p[D+y]+256-(p[D+y-A]>>1)&255;for(y=T;y<A;y++)h[F+y]=p[D+y]+256-(p[D+y-A]+p[D+y-T]>>1)&255}if(C==4){for(y=0;y<T;y++)h[F+y]=p[D+y]+256-i(0,p[D+y-A],0)&255;for(y=T;y<A;y++)h[F+y]=p[D+y]+256-i(p[D+y-T],p[D+y-A],p[D+y-T-A])&255}}}function E(h,p){const x=new Uint8Array(h),A=x.slice(0),T=new Uint32Array(A.buffer),C=I(A,p),D=C[0],F=C[1],y=x.length,f=new Uint8Array(y>>2);let O;if(x.length<2e7)for(var k=0;k<y;k+=4)O=w(D,H=x[k]*(1/255),$=x[k+1]*(1/255),N=x[k+2]*(1/255),W=x[k+3]*(1/255)),f[k>>2]=O.ind,T[k>>2]=O.est.rgba;else for(k=0;k<y;k+=4){var H=x[k]*.00392156862745098,$=x[k+1]*(1/255),N=x[k+2]*(1/255),W=x[k+3]*(1/255);for(O=D;O.left;)O=Y(O.est,H,$,N,W)<=0?O.left:O.right;f[k>>2]=O.ind,T[k>>2]=O.est.rgba}return{abuf:A.buffer,inds:f,plte:F}}function I(h,p,x){x==null&&(x=1e-4);const A=new Uint32Array(h.buffer),T={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};T.bst=z(h,T.i0,T.i1),T.est=_(T.bst);const C=[T];for(;C.length<p;){let F=0,y=0;for(var D=0;D<C.length;D++)C[D].est.L>F&&(F=C[D].est.L,y=D);if(F<x)break;const f=C[y],O=P(h,A,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=O||f.i1<=O){f.est.L=0;continue}const k={i0:f.i0,i1:O,bst:null,est:null,tdst:0,left:null,right:null};k.bst=z(h,k.i0,k.i1),k.est=_(k.bst);const H={i0:O,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:f.bst.N-k.bst.N},D=0;D<16;D++)H.bst.R[D]=f.bst.R[D]-k.bst.R[D];for(D=0;D<4;D++)H.bst.m[D]=f.bst.m[D]-k.bst.m[D];H.est=_(H.bst),f.left=k,f.right=H,C[y]=k,C.push(H)}for(C.sort((F,y)=>y.bst.N-F.bst.N),D=0;D<C.length;D++)C[D].ind=D;return[T,C]}function w(h,p,x,A,T){if(h.left==null)return h.tdst=function(k,H,$,N,W){const q=H-k[0],L=$-k[1],ae=N-k[2],se=W-k[3];return q*q+L*L+ae*ae+se*se}(h.est.q,p,x,A,T),h;const C=Y(h.est,p,x,A,T);let D=h.left,F=h.right;C>0&&(D=h.right,F=h.left);const y=w(D,p,x,A,T);if(y.tdst<=C*C)return y;const f=w(F,p,x,A,T);return f.tdst<y.tdst?f:y}function Y(h,p,x,A,T){const{e:C}=h;return C[0]*p+C[1]*x+C[2]*A+C[3]*T-h.eMq}function P(h,p,x,A,T,C){for(A-=4;x<A;){for(;R(h,x,T)<=C;)x+=4;for(;R(h,A,T)>C;)A-=4;if(x>=A)break;const D=p[x>>2];p[x>>2]=p[A>>2],p[A>>2]=D,x+=4,A-=4}for(;R(h,x,T)>C;)x-=4;return x+4}function R(h,p,x){return h[p]*x[0]+h[p+1]*x[1]+h[p+2]*x[2]+h[p+3]*x[3]}function z(h,p,x){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],C=x-p>>2;for(let D=p;D<x;D+=4){const F=h[D]*.00392156862745098,y=h[D+1]*(1/255),f=h[D+2]*(1/255),O=h[D+3]*(1/255);T[0]+=F,T[1]+=y,T[2]+=f,T[3]+=O,A[0]+=F*F,A[1]+=F*y,A[2]+=F*f,A[3]+=F*O,A[5]+=y*y,A[6]+=y*f,A[7]+=y*O,A[10]+=f*f,A[11]+=f*O,A[15]+=O*O}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:T,N:C}}function _(h){const{R:p}=h,{m:x}=h,{N:A}=h,T=x[0],C=x[1],D=x[2],F=x[3],y=A==0?0:1/A,f=[p[0]-T*T*y,p[1]-T*C*y,p[2]-T*D*y,p[3]-T*F*y,p[4]-C*T*y,p[5]-C*C*y,p[6]-C*D*y,p[7]-C*F*y,p[8]-D*T*y,p[9]-D*C*y,p[10]-D*D*y,p[11]-D*F*y,p[12]-F*T*y,p[13]-F*C*y,p[14]-F*D*y,p[15]-F*F*y],O=f,k=M;let H=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,N=0;if(A!=0)for(let q=0;q<16&&(H=k.multVec(O,H),N=Math.sqrt(k.dot(H,H)),H=k.sml(1/N,H),!(q!=0&&Math.abs(N-$)<1e-9));q++)$=N;const W=[T*y,C*y,D*y,F*y];return{Cov:f,q:W,e:H,L:$,eMq255:k.dot(k.sml(255,W),H),eMq:k.dot(H,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var M={multVec:(h,p)=>[h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],h[4]*p[0]+h[5]*p[1]+h[6]*p[2]+h[7]*p[3],h[8]*p[0]+h[9]*p[1]+h[10]*p[2]+h[11]*p[3],h[12]*p[0]+h[13]*p[1]+h[14]*p[2]+h[15]*p[3]],dot:(h,p)=>h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],sml:(h,p)=>[h*p[0],h*p[1],h*p[2],h*p[3]]};nt.encode=function(p,x,A,T,C,D,F){T==null&&(T=0),F==null&&(F=!1);const y=o(p,x,A,T,[!1,!1,!1,0,F,!1]);return b(y,-1),c(y,x,A,C,D)},nt.encodeLL=function(p,x,A,T,C,D,F,y){const f={ctype:0+(T==1?0:2)+(C==0?0:4),depth:D,frames:[]},O=(T+C)*D,k=O*x;for(let H=0;H<p.length;H++)f.frames.push({rect:{x:0,y:0,width:x,height:A},img:new Uint8Array(p[H]),blend:0,dispose:1,bpp:Math.ceil(O/8),bpl:Math.ceil(k/8)});return b(f,0,!0),c(f,x,A,F,y)},nt.encode.compress=o,nt.encode.dither=v,nt.quantize=E,nt.quantize.getKDtree=I,nt.quantize.getNearest=w})();const en={toArrayBuffer(d,e){const i=d.width,t=d.height,r=i<<2,n=d.getContext("2d").getImageData(0,0,i,t),u=new Uint32Array(n.data.buffer),v=(32*i+31)/32<<2,c=v*t,b=122+c,o=new ArrayBuffer(b),a=new DataView(o),s=1<<20;let m,g,E,I,w=s,Y=0,P=0,R=0;function z(h){a.setUint16(P,h,!0),P+=2}function _(h){a.setUint32(P,h,!0),P+=4}function M(h){P+=h}z(19778),_(b),M(4),_(122),_(108),_(i),_(-t>>>0),z(1),z(32),_(3),_(c),_(2835),_(2835),M(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function h(){for(;Y<t&&w>0;){for(I=122+Y*v,m=0;m<r;)w--,g=u[R++],E=g>>>24,a.setUint32(I+m,g<<8|E),m+=4;Y++}R<u.length?(w=s,setTimeout(h,en._dly)):e(o)}()},toBlob(d,e){this.toArrayBuffer(d,i=>{e(new Blob([i],{type:"image/bmp"}))})},_dly:9};var Xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},os={[Xe.CHROME]:16384,[Xe.FIREFOX]:11180,[Xe.DESKTOP_SAFARI]:16384,[Xe.IE]:8192,[Xe.IOS]:4096,[Xe.ETC]:8192};const xr=typeof window<"u",tn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jt=xr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ls=(xr||tn)&&(Jt&&Jt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),rn=(xr||tn)&&(Jt&&Jt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Er(d,e,i=Date.now()){return new Promise(t=>{const r=d.split(","),n=r[0].match(/:(.*?);/)[1],u=globalThis.atob(r[1]);let v=u.length;const c=new Uint8Array(v);for(;v--;)c[v]=u.charCodeAt(v);const b=new Blob([c],{type:n});b.name=e,b.lastModified=i,t(b)})}function nn(d){return new Promise((e,i)=>{const t=new rn;t.onload=()=>e(t.result),t.onerror=r=>i(r),t.readAsDataURL(d)})}function an(d){return new Promise((e,i)=>{const t=new Image;t.onload=()=>e(t),t.onerror=r=>i(r),t.src=d})}function It(){if(It.cachedResult!==void 0)return It.cachedResult;let d=Xe.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?d=Xe.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?d=Xe.IOS:/Safari/i.test(e)?d=Xe.DESKTOP_SAFARI:/Firefox/i.test(e)?d=Xe.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(d=Xe.IE),It.cachedResult=d,It.cachedResult}function sn(d,e){const i=It(),t=os[i];let r=d,n=e,u=r*n;const v=r>n?n/r:r/n;for(;u>t*t;){const c=(t+r)/2,b=(t+n)/2;c<b?(n=b,r=b*v):(n=c*v,r=c),u=r*n}return{width:r,height:n}}function rr(d,e){let i,t;try{if(i=new OffscreenCanvas(d,e),t=i.getContext("2d"),t===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),t=i.getContext("2d")}return i.width=d,i.height=e,[i,t]}function on(d,e){const{width:i,height:t}=sn(d.width,d.height),[r,n]=rr(i,t);return e&&/jpe?g/.test(e)&&(n.fillStyle="white",n.fillRect(0,0,r.width,r.height)),n.drawImage(d,0,0,r.width,r.height),r}function jt(){return jt.cachedResult!==void 0||(jt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),jt.cachedResult}function er(d,e={}){return new Promise(function(i,t){let r,n;var u=function(){try{return n=on(r,e.fileType||d.type),i([r,n])}catch(c){return t(c)}},v=function(c){try{var b=function(o){try{throw o}catch(a){return t(a)}};try{let o;return nn(d).then(function(a){try{return o=a,an(o).then(function(s){try{return r=s,function(){try{return u()}catch(m){return t(m)}}()}catch(m){return b(m)}},b)}catch(s){return b(s)}},b)}catch(o){b(o)}}catch(o){return t(o)}};try{if(jt()||[Xe.DESKTOP_SAFARI,Xe.MOBILE_SAFARI].includes(It()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then(function(c){try{return r=c,u()}catch{return v()}},v)}catch{v()}})}function tr(d,e,i,t,r=1){return new Promise(function(n,u){let v;if(e==="image/png"){let b,o,a;return b=d.getContext("2d"),{data:o}=b.getImageData(0,0,d.width,d.height),a=nt.encode([o.buffer],d.width,d.height,4096*r),v=new Blob([a],{type:e}),v.name=i,v.lastModified=t,c.call(this)}{let b=function(){return c.call(this)};if(e==="image/bmp")return new Promise(o=>en.toBlob(d,o)).then(function(o){try{return v=o,v.name=i,v.lastModified=t,b.call(this)}catch(a){return u(a)}}.bind(this),u);{let o=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:e,quality:r}).then(function(a){try{return v=a,v.name=i,v.lastModified=t,o.call(this)}catch(s){return u(s)}}.bind(this),u);{let a;return a=d.toDataURL(e,r),Er(a,i,t).then(function(s){try{return v=s,o.call(this)}catch(m){return u(m)}}.bind(this),u)}}}function c(){return n(v)}})}function dt(d){d.width=0,d.height=0}function Pt(){return new Promise(function(d,e){let i,t,r,n;return Pt.cachedResult!==void 0?d(Pt.cachedResult):Er("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return i=u,er(i).then(function(v){try{return t=v[1],tr(t,i.type,i.name,i.lastModified).then(function(c){try{return r=c,dt(t),er(r).then(function(b){try{return n=b[0],Pt.cachedResult=n.width===1&&n.height===2,d(Pt.cachedResult)}catch(o){return e(o)}},e)}catch(b){return e(b)}},e)}catch(c){return e(c)}},e)}catch(v){return e(v)}},e)})}function ln(d){return new Promise((e,i)=>{const t=new rn;t.onload=r=>{const n=new DataView(r.target.result);if(n.getUint16(0,!1)!=65496)return e(-2);const u=n.byteLength;let v=2;for(;v<u;){if(n.getUint16(v+2,!1)<=8)return e(-1);const c=n.getUint16(v,!1);if(v+=2,c==65505){if(n.getUint32(v+=2,!1)!=1165519206)return e(-1);const b=n.getUint16(v+=6,!1)==18761;v+=n.getUint32(v+4,b);const o=n.getUint16(v,b);v+=2;for(let a=0;a<o;a++)if(n.getUint16(v+12*a,b)==274)return e(n.getUint16(v+12*a+8,b))}else{if((65280&c)!=65280)break;v+=n.getUint16(v,!1)}}return e(-1)},t.onerror=r=>i(r),t.readAsArrayBuffer(d)})}function cn(d,e){const{width:i}=d,{height:t}=d,{maxWidthOrHeight:r}=e;let n,u=d;return isFinite(r)&&(i>r||t>r)&&([u,n]=rr(i,t),i>t?(u.width=r,u.height=t/i*r):(u.width=i/t*r,u.height=r),n.drawImage(d,0,0,u.width,u.height),dt(d)),u}function un(d,e){const{width:i}=d,{height:t}=d,[r,n]=rr(i,t);switch(e>4&&e<9?(r.width=t,r.height=i):(r.width=i,r.height=t),e){case 2:n.transform(-1,0,0,1,i,0);break;case 3:n.transform(-1,0,0,-1,i,t);break;case 4:n.transform(1,0,0,-1,0,t);break;case 5:n.transform(0,1,1,0,0,0);break;case 6:n.transform(0,1,-1,0,t,0);break;case 7:n.transform(0,-1,-1,0,t,i);break;case 8:n.transform(0,-1,1,0,0,i)}return n.drawImage(d,0,0,i,t),dt(d),r}function Cr(d,e,i=0){return new Promise(function(t,r){let n,u,v,c,b,o,a,s,m,g,E,I,w,Y,P,R,z,_,M,h;function p(A=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;n+=A,e.onProgress(Math.min(n,100))}function x(A){if(e.signal&&e.signal.aborted)throw e.signal.reason;n=Math.min(Math.max(A,n),100),e.onProgress(n)}return n=i,u=e.maxIteration||10,v=1024*e.maxSizeMB*1024,p(),er(d,e).then(function(A){try{return[,c]=A,p(),b=cn(c,e),p(),new Promise(function(T,C){var D;if(!(D=e.exifOrientation))return ln(d).then(function(y){try{return D=y,F.call(this)}catch(f){return C(f)}}.bind(this),C);function F(){return T(D)}return F.call(this)}).then(function(T){try{return o=T,p(),Pt().then(function(C){try{return a=C?b:un(b,o),p(),s=e.initialQuality||1,m=e.fileType||d.type,tr(a,m,d.name,d.lastModified,s).then(function(D){try{{let y=function(){if(u--&&(P>v||P>w)){let O,k;return O=h?.95*M.width:M.width,k=h?.95*M.height:M.height,[z,_]=rr(O,k),_.drawImage(M,0,0,O,k),s*=m==="image/png"?.85:.95,tr(z,m,d.name,d.lastModified,s).then(function(H){try{return R=H,dt(M),M=z,P=R.size,x(Math.min(99,Math.floor((Y-P)/(Y-v)*100))),y}catch($){return r($)}},r)}return[1]},f=function(){return dt(M),dt(z),dt(b),dt(a),dt(c),x(100),t(R)};if(g=D,p(),E=g.size>v,I=g.size>d.size,!E&&!I)return x(100),t(g);var F;return w=d.size,Y=g.size,P=Y,M=a,h=!e.alwaysKeepResolution&&E,(F=function(O){for(;O;){if(O.then)return void O.then(F,r);try{if(O.pop){if(O.length)return O.pop()?f.call(this):O;O=y}else O=O.call(this)}catch(k){return r(k)}}}.bind(this))(y)}}catch(y){return r(y)}}.bind(this),r)}catch(D){return r(D)}}.bind(this),r)}catch(C){return r(C)}}.bind(this),r)}catch(T){return r(T)}}.bind(this),r)})}const cs=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ur;function us(d,e){return new Promise((i,t)=>{ur||(ur=function(u){const v=[];return v.push(u),URL.createObjectURL(new Blob(v))}(cs));const r=new Worker(ur);r.addEventListener("message",function(u){if(e.signal&&e.signal.aborted)r.terminate();else if(u.data.progress===void 0){if(u.data.error)return t(new Error(u.data.error)),void r.terminate();i(u.data.file),r.terminate()}else e.onProgress(u.data.progress)}),r.addEventListener("error",t),e.signal&&e.signal.addEventListener("abort",()=>{t(e.signal.reason),r.terminate()}),r.postMessage({file:d,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function je(d,e){return new Promise(function(i,t){let r,n,u,v,c,b;if(r={...e},u=0,{onProgress:v}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=m=>{u=m,typeof v=="function"&&v(u)},!(d instanceof Blob||d instanceof ls))return t(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return t(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||b)return Cr(d,r).then(function(m){try{return n=m,s.call(this)}catch(g){return t(g)}}.bind(this),t);var o=function(){try{return s.call(this)}catch(m){return t(m)}}.bind(this),a=function(m){try{return Cr(d,r).then(function(g){try{return n=g,o()}catch(E){return t(E)}},t)}catch(g){return t(g)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",us(d,r).then(function(m){try{return n=m,o()}catch{return a()}},a)}catch{a()}function s(){try{n.name=d.name,n.lastModified=d.lastModified}catch{}try{r.preserveExif&&d.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===d.type)&&(n=Jr(d,n))}catch{}return i(n)}})}je.getDataUrlFromFile=nn,je.getFilefromDataUrl=Er,je.loadImage=an,je.drawImageInCanvas=on,je.drawFileInCanvas=er,je.canvasToFile=tr,je.getExifOrientation=ln,je.handleMaxWidthOrHeight=cn,je.followExifOrientation=un,je.cleanupCanvasMemory=dt,je.isAutoOrientationInBrowser=Pt,je.approximateBelowMaximumCanvasSizeOfBrowser=sn,je.copyExifWithoutOrientation=Jr,je.getBrowserName=It,je.version="2.0.2";const ds={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function fs(d,e,i={},t){const r={...ds,...i};try{let n=d;if(d.type.startsWith("image/")&&d.size>r.compressionThresholdMB*1024*1024){t?.("Compressing image...");try{const c=await je(d,{maxSizeMB:r.maxSizeMB,maxWidthOrHeight:r.maxWidthOrHeight,initialQuality:r.initialQuality,useWebWorker:r.useWebWorker});n=c;const b=(d.size/(1024*1024)).toFixed(2),o=(c.size/(1024*1024)).toFixed(2),a=((1-c.size/d.size)*100).toFixed(0);console.log(`Image compressed: ${b}MB → ${o}MB (${a}% smaller)`)}catch(c){console.warn("Image compression failed, uploading original:",c)}}return t?.("Uploading file..."),{success:!0,attachment:await Pn(n,e)}}catch(n){return console.error("File upload failed:",n),{success:!1,error:n instanceof Error?n.message:"Upload failed"}}}async function vs(d){try{const e=Cn(d.url);return await Fn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function ms(d,e,i){return d.map(t=>t.id===e?{...t,name:i}:t)}function hs(d,e=5){const i=d.type.startsWith("image/"),t=e*1024*1024;if(!i&&d.size>t){const r=(d.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${r}MB)`}}return{valid:!0}}function ps(d){return{uploadAttachment:(e,i,t)=>fs(e,i,d,t),removeAttachment:vs,updateAttachmentName:ms,validateFile:hs}}function Fr(d,e){const[i,t]=e.split(":").map(Number);let r=Va(d,i);return r=Xa(r,t),r}function Pr(d){return Array.from(new Set(d)).sort((e,i)=>e-i)}function ys(d,e){if(e.includes(d))return 0;const i=e.find(t=>t>d);return i!==void 0?i-d:7-d+e[0]}function gs(d,e,i){const t=new Date(d),r=xt(t,Ke),n=r.getDay(),u=ys(n,i);if(u===0)return{start_time:d,end_time:e};const v=St(r,u),c=Mt(v,Ke);let b=e;if(e){const o=xt(new Date(e),Ke),a=St(o,u);b=Mt(a,Ke).toISOString()}return{start_time:c.toISOString(),end_time:b}}function dn({eventItem:d,dateInput:e,startTimeInput:i,endTimeInput:t,attachments:r,isRecurring:n,recurrenceFrequency:u,recurrenceInterval:v,recurringDays:c,recurrenceEndDate:b,hasEndDate:o,monthlyType:a}){const s=!d.id,m={...d.meta_data??{}};if(d.category&&(m.category=d.category),s){const R=Wr(),z=R?hr(R.stores.currentUser):void 0,_=R?hr(R.stores.userOrganizations):void 0,M=z?.displayName||z?.username,h=z?.id;M&&!m.submitted_by_name&&(m.submitted_by_name=M),h&&!m.submitted_by_user_id&&(m.submitted_by_user_id=h);const p=_?Array.from(_):[];p.length&&!m.submitted_by_organizations&&(m.submitted_by_organizations=p),m.submitted_at||(m.submitted_at=new Date().toISOString())}const g=Object.keys(m).length?m:void 0,E={title:d.title,description:d.description,location:d.location,is_public:d.is_public??!0,event_type:d.event_type,meta_data:g,attachments:r.length>0?r:null};if(d.event_type!=="calendar_event")return{...E,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const I=e?Xt(e,"yyyy-MM-dd",new Date):new Date;let w,Y;if(d.is_all_day){const R=Mt(I,Ke);w=R.toISOString(),Y=R.toISOString()}else{const R=new Date(I.getTime()),z=new Date(I.getTime()),_=i?Fr(R,i):I,M=t?Fr(z,t):I;w=Mt(_,Ke).toISOString(),Y=Mt(M,Ke).toISOString()}const P={...E,start_time:w,end_time:Y,is_all_day:d.is_all_day};if(n&&P.start_time){if(u==="weekly"&&c.length>0){const z=Pr(c),_=gs(P.start_time,P.end_time,z);P.start_time=_.start_time,P.end_time=_.end_time}if(u==="daily"||u==="yearly"||u==="weekly"&&c.length>0||u==="monthly"){const{recurrence_rule:z,recurrence_end_date:_}=wr({frequency:u,interval:v,recurringDays:u==="weekly"?Pr(c):[],recurrenceEndDate:b,hasEndDate:o,monthlyType:a,startTime:P.start_time});P.recurrence_rule=z,P.recurrence_end_date=_}else P.recurrence_rule=void 0,P.recurrence_end_date=void 0}else P.recurrence_rule=void 0,P.recurrence_end_date=void 0;return P}async function bs({id:d,...e}){const i=dn(e);return d?(e.eventItem.bishop_approval==="NO"&&Object.assign(i,{bishop_approval:null,bishop_approval_at:null,bishop_approval_by_user_id:null,first_counselor_approval:null,first_counselor_approval_at:null,first_counselor_approval_by_user_id:null,second_counselor_approval:null,second_counselor_approval_at:null,second_counselor_approval_by_user_id:null}),{action:"update",event:await Rt(d,i)}):{action:"create",event:await Hr(i)}}async function _s(d){await zr(d)}function ws({event:d,newDate:e}){const i=d.start_time?new Date(d.start_time):new Date,t=d.end_time?new Date(d.end_time):new Date,[r,n,u]=e.split("-").map(Number),v=new Date(i);v.setFullYear(r,n-1,u);const c=new Date(t);return c.setFullYear(r,n-1,u),{...d,id:void 0,title:`CLONED - ${d.title}`,start_time:v.toISOString(),end_time:c.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function xs(d,e,i){const t=await Nt(d);if(!t)throw new Error("Event not found");const r=t.recurrence_exceptions||[];r.includes(e)||r.push(e);const n=t.recurrence_overrides||{};n[e]={title:i.title,description:i.description,location:i.location,start_time:i.start_time,end_time:i.end_time,is_all_day:i.is_all_day,meta_data:i.meta_data},await Rt(d,{recurrence_exceptions:r,recurrence_overrides:n})}async function Es(d,e,i){const t=await Nt(d);if(!t||!t.recurrence_rule||!t.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:r,generateRecurrenceRule:n}=await pr(async()=>{const{parseRecurrenceRule:P,generateRecurrenceRule:R}=await Promise.resolve().then(()=>yr);return{parseRecurrenceRule:P,generateRecurrenceRule:R}},void 0,import.meta.url),u=r(t.recurrence_rule,t.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const v=Oe(new Date(t.start_time),"yyyy-MM-dd"),c=Xt(e,"yyyy-MM-dd",new Date),b=Xt(v,"yyyy-MM-dd",new Date);if(c<=b)return await Rt(d,i),d;const o=St(c,-1),a=Oe(o,"yyyy-MM-dd"),{recurrence_rule:s,recurrence_end_date:m}=n({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:t.start_time});await Rt(d,{recurrence_rule:s,recurrence_end_date:m});const g=u.hasEndDate?u.recurrenceEndDate:"",{recurrence_rule:E,recurrence_end_date:I}=n({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:g,hasEndDate:u.hasEndDate,monthlyType:u.monthlyType,startTime:i.start_time||t.start_time}),w={...i,recurrence_rule:E,recurrence_end_date:I};return(await Hr(w))?.id||0}async function ks(d,e){const i=await Nt(d);if(!i)throw new Error("Event not found");const t={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:i.start_time,end_time:i.end_time,recurrence_rule:i.recurrence_rule,recurrence_end_date:i.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Rt(d,t)}async function Ds(d,e){const i=await Nt(d);if(!i)throw new Error("Event not found");const t=i.recurrence_exceptions||[];t.includes(e)||t.push(e);const r=i.recurrence_overrides||{};r[e]&&delete r[e],await Rt(d,{recurrence_exceptions:t,recurrence_overrides:r})}async function As(d,e){const i=await Nt(d);if(!i||!i.recurrence_rule||!i.start_time)throw new Error("Event not found or is not recurring");const t=Xt(e,"yyyy-MM-dd",new Date),r=St(t,-1),n=Oe(r,"yyyy-MM-dd"),{parseRecurrenceRule:u}=await pr(async()=>{const{parseRecurrenceRule:a}=await Promise.resolve().then(()=>yr);return{parseRecurrenceRule:a}},void 0,import.meta.url),v=u(i.recurrence_rule,i.recurrence_end_date);if(!v)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:c}=await pr(async()=>{const{generateRecurrenceRule:a}=await Promise.resolve().then(()=>yr);return{generateRecurrenceRule:a}},void 0,import.meta.url),{recurrence_rule:b,recurrence_end_date:o}=c({frequency:v.frequency,interval:v.interval,recurringDays:v.recurringDays,recurrenceEndDate:n,hasEndDate:!0,monthlyType:v.monthlyType,startTime:i.start_time});await Rt(d,{recurrence_rule:b,recurrence_end_date:o})}async function Ts(d){await zr(d)}function Is(){return{saveEvent:bs,deleteEventById:_s,cloneEventForDate:ws,buildEventPayload:dn,saveSingleInstance:xs,saveFutureInstances:Es,saveAllInstances:ks,deleteSingleInstance:Ds,deleteFutureInstances:As,deleteAllInstances:Ts}}var Ms=ce('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Rs=ce('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Cs=ce("<!> <!>",1),Fs=ce('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Ps=ce("<span>Save</span>"),Os=ce("<span>Create</span>"),Us=ce('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Ss=ce('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div> <!></div> <!> <!>',1);function wo(d,e){et(e,!1);const i=()=>fr(m,"$userOrganizations",r),t=()=>fr(g,"$validationErrors",r),[r,n]=Ur(),u=ve(),v=ve(),c=ve();let b=he(e,"name",8,""),o=he(e,"drawerId",8,""),a=he(e,"eventItem",12,Qn);const{actions:{reload:s}}=Lr(),{stores:{userOrganizations:m}}=Wr(),{validationErrors:g,validate:E,getErrorMessages:I,clearErrors:w}=rs(),{parseRecurrenceRule:Y}=Zr(),{uploadAttachment:P,removeAttachment:R,updateAttachmentName:z,validateFile:_}=ps(),{saveEvent:M,deleteEventById:h,cloneEventForDate:p,buildEventPayload:x,saveSingleInstance:A,saveFutureInstances:T,saveAllInstances:C,deleteSingleInstance:D,deleteFutureInstances:F,deleteAllInstances:y}=Is();let f=ve(!1),O=ve(!1),k=ve(!1),H=ve("weekly"),$=ve(1),N=ve([]),W=ve(""),q=ve(!0),L=ve("date"),ae=ve([]),se=ve(!1),pe=ve(!1),fe=ve(void 0),we=ve(void 0),G=ve(!1),ne=ve(null),K=ve(!1),re=ve(null),oe=ve(0),ie=ve({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),Z=ve({message:"",type:"info"}),J=ve(""),ee=ve(""),ue=ve(""),de=ve({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"}),Te=ve(!1);const ge=(le,j)=>le.length===j.length&&le.every((ke,Me)=>ke===j[Me]),xe=()=>{const le=`[data-bs-target="#${o()}"]`,j=document.querySelector(le);j&&j.click()},be=(le,j=0,ke="info")=>{lr(Z,l(Z).message=le),lr(Z,l(Z).type=ke),j&&setTimeout(()=>{lr(Z,l(Z).message="")},j)},Ye=async le=>{const j=le.detail;if(!j)return;const ke=_(j);if(!ke.valid){be(ke.error??"Invalid file selected",7e3,"danger");return}B(O,!0);try{const Me=await P(j,l(u)??"temp",At=>be(At));if(!Me.success||!Me.attachment)throw new Error(Me.error??"Upload failed");B(ae,[...l(ae),Me.attachment]),B(se,!0),be("File uploaded!",3e3,"success")}catch(Me){console.error("File upload failed:",Me),be("Failed to upload file. Please try again.",7e3,"danger")}finally{B(O,!1)}},it=le=>{const{attachment:j,newName:ke}=le.detail;B(ae,z(l(ae),j.id,ke)),B(se,!0),be("Attachment name updated!",3e3,"success")},Ce=async le=>{const j=le.detail;if(j){B(O,!0);try{if(!await R(j))throw new Error("Failed to remove attachment");B(ae,l(ae).filter(Me=>Me.id!==j.id)),B(se,!0),be("Attachment removed!",3e3,"success")}catch(ke){console.error("Failed to remove attachment:",ke),be("Failed to remove attachment. Please try again.",7e3,"danger")}finally{B(O,!1)}}},Le=async()=>{if(!l(u)){be("ID is not defined",0,"danger");return}try{await h(l(u)),await s(),gt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{B(f,!1),B(ie,{...a(),id:l(u)}),be("Event Deleted",3e3,"success"),xe()},800)}catch(le){gt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{B(f,!1),console.error("Delete failed:",le),be("Failed to delete event. Please try again.",7e3,"danger")},800)}},De=()=>!!a().recurrence_rule,Pe=async()=>{const le=l(u)||a().meta_data?.recurring_parent_id;if(le&&l(pe)&&l(we)&&l(fe)){if(B(re,null),B(K,!0),await new Promise(j=>{const ke=setInterval(()=>{l(K)||(clearInterval(ke),j())},50)}),!l(re))return;B(f,!0);try{l(re)==="single"?await D(le,l(fe)):l(re)==="future"?await F(le,l(fe)):l(re)==="all"&&await y(le),await s(),gt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{B(f,!1),B(ie,{...a(),id:l(u)}),be("Event Deleted",3e3,"success"),xe()},800)}catch(j){gt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{B(f,!1),console.error("Delete failed:",j),be("Failed to delete event. Please try again.",7e3,"danger")},800)}}else B(f,!0),Kn({title:"Delete Confirmation",message:De()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:j=>{j?Le():B(f,!1)}})},qe=le=>{if(l(u))try{const j=p({event:a(),newDate:le});gt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),be("Event cloned. Review and click Create to save.",5e3,"success"),a(j),B(J,j.start_time?Oe(new Date(j.start_time),"yyyy-MM-dd"):""),B(ee,j.start_time?Oe(new Date(j.start_time),"HH:mm"):""),B(ue,j.end_time?Oe(new Date(j.end_time),"HH:mm"):""),B(ae,[]),B(k,!1),B(N,[]),B(W,""),B(q,!0),B(se,!0),B(oe,void 0),B(ie,{...j}),B(de,{dateInput:l(J),startTimeInput:l(ee),endTimeInput:l(ue),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(j){console.error("Clone failed:",j),be("Failed to clone event. Please try again.",7e3,"danger")}},Qe=()=>{es({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:l(J),callback:(le,j)=>{le&&j&&qe(j)}})},$e=async()=>{if(l(u)&&!l(c)){be("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await E({title:a().title,event_type:a().event_type,category:a().category??"",description:a().description,location:a().location,is_all_day:a().is_all_day,dateInput:l(J),startTimeInput:l(ee),endTimeInput:l(ue),isRecurring:l(k),recurrenceFrequency:l(H),recurringDays:l(k)?l(N):[],recurrenceEndDate:l(k)?l(W):void 0,hasEndDate:l(q)})){const ke=I();ke.length&&be(ke.join(". ")+".  Please address accordingly.",0,"danger");return}const j=l(u)||a().meta_data?.recurring_parent_id;if(j&&l(pe)&&l(we)&&l(fe)){if(B(ne,null),B(G,!0),await new Promise(Me=>{const At=setInterval(()=>{l(G)||(clearInterval(At),Me())},100)}),!l(ne)||l(f))return;be("Saving ..."),B(f,!0);const ke=x({eventItem:a(),dateInput:l(J),startTimeInput:l(ee),endTimeInput:l(ue),attachments:l(ae),isRecurring:l(v)&&l(k),recurrenceFrequency:l(H),recurrenceInterval:l($),recurringDays:l(k)?l(N):[],recurrenceEndDate:l(k)?l(W):"",hasEndDate:l(q),monthlyType:l(L)});try{let Me;l(ne)==="single"?await A(j,l(fe),ke):l(ne)==="future"?Me=await T(j,l(fe),ke):l(ne)==="all"&&await C(j,ke),await s(),await An(),gt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${a().title}`,1),B(f,!1),Me&&a({...a(),id:Me}),a(a().attachments=l(ae),!0),B(ie,{...a(),id:Me||j}),B(se,!1),be("Saved",3e3,"success"),xe()}catch(Me){gt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${a().title}`,1),setTimeout(()=>{B(f,!1),console.error("Save failed:",Me),be("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(l(f))return;be("Saving ..."),B(f,!0);try{const ke=await M({id:l(u),eventItem:a(),dateInput:l(J),startTimeInput:l(ee),endTimeInput:l(ue),attachments:l(ae),isRecurring:l(v)&&l(k),recurrenceFrequency:l(H),recurrenceInterval:l($),recurringDays:l(k)?l(N):[],recurrenceEndDate:l(k)?l(W):"",hasEndDate:l(q),monthlyType:l(L)});ke.event&&a({...a(),...ke.event}),a(a().attachments=l(ae),!0),await s(),gt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${a().title}`,1),setTimeout(()=>{B(f,!1),B(ie,{...a(),id:l(u)}),B(se,!1),be("Saved",3e3,"success"),xe()},800)}catch(ke){gt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${a().title}`,1),setTimeout(()=>{B(f,!1),console.error("Save failed:",ke),be("Failed to save event. Please try again.",7e3,"danger")},800)}}};Fe(()=>V(a()),()=>{B(u,a().id)}),Fe(()=>V(a()),()=>{B(v,a().event_type==="calendar_event")}),Fe(()=>(l(v),l(k),l(N),l(W)),()=>{!l(v)&&(l(k)||l(N).length>0||l(W))&&(B(k,!1),B(H,"weekly"),B($,1),B(N,[]),B(W,""),B(q,!0),B(L,"date"))}),Fe(()=>(V(a()),l(oe),l(ie),l(se),l(J),l(ee),l(ue),l(k),l(H),l($),l(N),l(W),l(q),l(L)),()=>{if(a()?.id!==l(oe)||a()?.start_time!==l(ie).start_time||a()?.meta_data?.recurring_instance_index!==l(ie).meta_data?.recurring_instance_index){B(f,!0);const le=l(se),j=a();setTimeout(()=>{const ke=j.event_type==="calendar_event";if(B(J,ke&&j.start_time?Oe(new Date(j.start_time),"yyyy-MM-dd"):""),B(ee,ke&&j.start_time?Oe(new Date(j.start_time),"HH:mm"):""),B(ue,ke&&j.end_time?Oe(new Date(j.end_time),"HH:mm"):""),le||B(ae,j.attachments?[...j.attachments]:[]),j.meta_data?.recurring_instance&&j.start_time?(B(we,j.recurrence_rule),B(pe,!0),B(fe,Oe(new Date(j.start_time),"yyyy-MM-dd"))):(B(we,void 0),B(pe,!1),B(fe,void 0)),j.recurrence_rule){const Me=Y(j.recurrence_rule,j.recurrence_end_date);Me?(B(k,!0),B(H,Me.frequency),B($,Me.interval),B(N,Me.recurringDays),B(W,Me.recurrenceEndDate),B(q,Me.hasEndDate),B(L,Me.monthlyType)):(B(k,!1),B(H,"weekly"),B($,1),B(N,[]),B(W,""),B(q,!0),B(L,"date"))}else B(k,!1),B(H,"weekly"),B($,1),B(N,[]),B(W,""),B(q,!0),B(L,"date");B(oe,j.id),B(ie,{...j}),B(f,!1),B(se,!1),w(),B(de,{dateInput:l(J),startTimeInput:l(ee),endTimeInput:l(ue),isRecurring:l(k),recurrenceFrequency:l(H),recurrenceInterval:l($),recurringDays:[...l(N)],recurrenceEndDate:l(W),hasEndDate:l(q),monthlyType:l(L)})},200)}}),Fe(()=>(l(ie),V(a()),l(ae),l(J),l(de),l(ee),l(ue),l(k),l(H),l($),l(N),l(W),l(q),l(L)),()=>{B(c,l(ie).title!==a().title||l(ie).start_time!==a().start_time||l(ie).end_time!==a().end_time||l(ie).description!==a().description||l(ie).location!==a().location||l(ie).is_public!==a().is_public||l(ie).category!==a().category||l(ie).is_all_day!==a().is_all_day||JSON.stringify(l(ae))!==JSON.stringify(a().attachments||[])||l(ie).recurrence_rule!==a().recurrence_rule||l(ie).recurrence_end_date!==a().recurrence_end_date||l(J)!==l(de).dateInput||l(ee)!==l(de).startTimeInput||l(ue)!==l(de).endTimeInput||l(k)!==l(de).isRecurring||l(H)!==l(de).recurrenceFrequency||l($)!==l(de).recurrenceInterval||!ge(l(N),l(de).recurringDays)||l(W)!==l(de).recurrenceEndDate||l(q)!==l(de).hasEndDate||l(L)!==l(de).monthlyType)}),Fe(()=>(i(),Ne),()=>{B(Te,i().has(Ne.Bishopric))}),Ct(),at();var st=Ss(),kt=We(st),Yt=S(kt);{var Lt=le=>{var j=Ms();te(le,j)};me(Yt,le=>{V(a()),l(u),X(()=>a().recurrence_rule&&l(u))&&le(Lt)})}var Ft=Q(Yt,2),pt=S(Ft),nr=Q(S(pt),2);{var ot=le=>{var j=Rs();ye(()=>j.disabled=l(f)||l(O)),Ee("click",j,Qe),te(le,j)};me(nr,le=>{l(u)&&le(ot)})}U(pt);var lt=Q(pt,2);{let le=Tt(()=>l(f)||l(O));Ei(lt,{get disabled(){return l(le)},get name(){return b()},get validationErrors(){return t()},get title(){return a().title},set title(j){a(a().title=j,!0)},get eventType(){return a().event_type},set eventType(j){a(a().event_type=j,!0)},get category(){return a().category},set category(j){a(a().category=j,!0)},get isPublic(){return a().is_public},set isPublic(j){a(a().is_public=j,!0)},get description(){return a().description},set description(j){a(a().description=j,!0)},$$legacy:!0})}U(Ft);var yt=Q(Ft,2);{var Dt=le=>{var j=Cs(),ke=We(j);{let At=Tt(()=>l(f)||l(O));Mi(ke,{get disabled(){return l(At)},get name(){return b()},get validationErrors(){return t()},get dateInput(){return l(J)},set dateInput(ze){B(J,ze)},get startTimeInput(){return l(ee)},set startTimeInput(ze){B(ee,ze)},get endTimeInput(){return l(ue)},set endTimeInput(ze){B(ue,ze)},get isAllDay(){return a().is_all_day},set isAllDay(ze){a(a().is_all_day=ze,!0)},$$legacy:!0})}var Me=Q(ke,2);{let At=Tt(()=>l(f)||l(O));Li(Me,{get disabled(){return l(At)},get name(){return b()},get validationErrors(){return t()},get isRecurring(){return l(k)},set isRecurring(ze){B(k,ze)},get recurrenceFrequency(){return l(H)},set recurrenceFrequency(ze){B(H,ze)},get recurrenceInterval(){return l($)},set recurrenceInterval(ze){B($,ze)},get recurringDays(){return l(N)},set recurringDays(ze){B(N,ze)},get recurrenceEndDate(){return l(W)},set recurrenceEndDate(ze){B(W,ze)},get monthlyType(){return l(L)},set monthlyType(ze){B(L,ze)},get dateInput(){return l(J)},set dateInput(ze){B(J,ze)},$$legacy:!0})}te(le,j)};me(yt,le=>{l(v)&&le(Dt)})}var zt=Q(yt,2);{let le=Tt(()=>l(f)||l(O));ji(zt,{get attachments(){return l(ae)},get uploadingFile(){return l(O)},get disabled(){return l(le)},$$events:{upload:Ye,edit:it,remove:Ce}})}var ct=Q(zt,2);{let le=Tt(()=>l(f)||l(O)),j=Tt(()=>`${b()}-location`);Hi(ct,{get disabled(){return l(le)},get name(){return l(j)},get value(){return a().location},set value(ke){a(a().location=ke,!0)},$$legacy:!0})}var rt=Q(ct,2),ar=S(rt),fn=S(ar);{var vn=le=>{var j=Fs();ye(()=>j.disabled=l(f)||l(O)),Ee("click",j,Pe),te(le,j)};me(fn,le=>{(l(u)||l(pe))&&le(vn)})}U(ar);var kr=Q(ar,2),ir=S(kr),Wt=Q(ir,2),Dr=S(Wt);{var mn=le=>{var j=Ps();te(le,j)},hn=le=>{var j=Os();te(le,j)};me(Dr,le=>{l(u)||l(pe)?le(mn):le(hn,!1)})}var pn=Q(Dr,2);{var yn=le=>{var j=Us();te(le,j)};me(pn,le=>{l(c)&&le(yn)})}U(Wt),U(kr),U(rt);var sr=Q(rt,2),Qt=S(sr),gn=S(Qt,!0);U(Qt);var or=Q(Qt,2);let Ar;var bn=S(or);Qr(bn,{size:"xs"}),U(or),U(sr);var _n=Q(sr,2);{var wn=le=>{{let j=Tt(()=>l(f)||l(O));On(le,{get disabled(){return l(j)},get reloadEvents(){return s},get eventItem(){return a()},set eventItem(ke){a(ke)},$$legacy:!0})}};me(_n,le=>{l(Te)&&le(wn)})}U(kt);var Tr=Q(kt,2);{var xn=le=>{Ki(le,{get eventTitle(){return V(a()),X(()=>a().title)},get occurrenceDate(){return l(fe)},callback:j=>{B(ne,j),B(G,!1)}})};me(Tr,le=>{l(G)&&l(fe)&&le(xn)})}var En=Q(Tr,2);{var kn=le=>{Xi(le,{get eventTitle(){return V(a()),X(()=>a().title)},get occurrenceDate(){return l(fe)},callback:j=>{B(re,j),B(K,!1)}})};me(En,le=>{l(K)&&l(fe)&&le(kn)})}ye(()=>{ir.disabled=l(f)||l(O),Wt.disabled=l(f)||l(O),Ze(Qt,1,`fw-lighter fst-italic text-${l(Z),X(()=>l(Z).type)??""}`),_e(gn,(l(Z),X(()=>l(Z).message))),Ar=Ze(or,1,"",null,Ar,{"d-none":!l(f)})}),Ee("click",ir,xe),Ee("click",Wt,$e),te(d,st),tt(),n()}const Or={RES:[Ne.ReliefSociety],ELQ:[Ne.EldersQuorum],YOU:[Ne.YoungWomen,Ne.YoungMen],YOW:[Ne.YoungWomen],YWP:[Ne.YoungWomen],YWR:[Ne.YoungWomen],YWD:[Ne.YoungWomen],YOM:[Ne.YoungMen],YMD:[Ne.YoungMen],YMT:[Ne.YoungMen],YMP:[Ne.YoungMen],PRI:[Ne.Primary],PRN:[Ne.Primary],PRS:[Ne.Primary],PRC:[Ne.Primary],PRV:[Ne.Primary],SUS:[Ne.SundaySchool]},Ls=d=>{const e=new Set,i=d.meta_data?.submitted_by_organizations;if(i?.length)return i.forEach(r=>e.add(r)),e;const t=d.meta_data?.category;return t&&Or[t]&&Or[t].forEach(r=>e.add(r)),e},xo=(d,e)=>{if(!d)return!1;const{currentUserId:i,isPrivileged:t,canEditOwnOrgEvents:r,userOrganizations:n}=e;if(t)return!0;const u=d.meta_data?.submitted_by_user_id;if(i&&typeof u=="number"&&u===i)return!0;if(!r)return!1;const v=Ls(d);if(!v.size)return!1;for(const c of v)if(n.has(c))return!0;return!1};var zs=ce('<span class="text-muted">•</span>'),Hs=ce("<span> </span> <!>",1),Bs=ce('<span class="text-muted">•</span>'),qs=ce('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Ns=ce('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Ys=ce('<div class="small text-muted posted-meta svelte-1bpzga2">Posted <!> <!></div>'),Ws=ce('<div class="small svelte-1bpzga2"><!> <!></div>'),Qs=ce('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),$s=ce('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),js=ce('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Gs=ce('<div class="details-container svelte-1bpzga2"><!> <!></div>'),Ks=ce('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),Vs=ce('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Eo(d,e){et(e,!1);const i=ve(),t=ve(),r=ve(),n=ve(),u=ve(),v=ve();let c=he(e,"item",8),b=he(e,"showDetails",12,!1),o=he(e,"searchQuery",8,"");const a=f=>f<1024?f+" B":f<1024*1024?(f/1024).toFixed(1)+" KB":(f/(1024*1024)).toFixed(1)+" MB",s=f=>f.startsWith("image/"),m=f=>{window.open(f,"_blank")},g=f=>{if(!f)return"";try{return Oe(Ht(f),"MMM d, yyyy 'at' h:mm a")}catch{return""}},E=()=>{l(t)&&b(!b())},I=f=>{l(t)&&(f.key==="Enter"||f.key===" ")&&E()};Fe(()=>V(c()),()=>{B(i,c().attachments&&c().attachments.length>0?c().attachments.find(f=>s(f.type)):void 0)}),Fe(()=>V(c()),()=>{B(t,!!(c().description||c().attachments&&c().attachments.length>0))}),Fe(()=>V(c()),()=>{B(r,c().meta_data?.submitted_at??c().created_at)}),Fe(()=>l(r),()=>{B(n,g(l(r)))}),Fe(()=>V(c()),()=>{B(u,c().meta_data?.submitted_by_name)}),Fe(()=>(l(n),l(u)),()=>{B(v,!!(l(n)||l(u)))}),Ct(),at();var w=Vs(),Y=S(w),P=S(Y),R=S(P),z=S(R);Ot(z,()=>(V(_t),V(c()),V(o()),X(()=>_t(c().title||"",o())))),U(R);var _=Q(R,2),M=S(_);{var h=f=>{var O=Hs(),k=We(O),H=S(k,!0);U(k);var $=Q(k,2);{var N=W=>{var q=zs();te(W,q)};me($,W=>{V(c()),X(()=>c().location||c().description||c().attachments&&c().attachments.length>0)&&W(N)})}ye((W,q)=>{Ze(k,1,`badge rounded-pill bg-color-${W??""}`,"svelte-1bpzga2"),_e(H,q)},[()=>(V(wt),V(c()),X(()=>wt(c()?.meta_data?.category)?.color_number)),()=>(V(wt),V(c()),X(()=>wt(c()?.meta_data?.category)?.label))]),te(f,O)};me(M,f=>{V(c()),X(()=>c()?.meta_data?.category)&&f(h)})}var p=Q(M,2);{var x=f=>{var O=qs(),k=We(O),H=S(k);Ot(H,()=>(V(_t),V(c()),V(o()),X(()=>_t(c().location,o())))),U(k);var $=Q(k,2);{var N=W=>{var q=Bs();te(W,q)};me($,W=>{V(c()),X(()=>c().description||c().attachments&&c().attachments.length>0)&&W(N)})}te(f,O)};me(p,f=>{V(c()),X(()=>c().location)&&f(x)})}var A=Q(p,2);{var T=f=>{var O=Ns(),k=S(O);{var H=N=>{var W=ft("Hide");te(N,W)},$=N=>{var W=ft("Show");te(N,W)};me(k,N=>{b()?N(H):N($,!1)})}Je(),U(O),te(f,O)};me(A,f=>{V(c()),X(()=>c().description||c().attachments&&c().attachments.length>0)&&f(T)})}U(_);var C=Q(_,2);{var D=f=>{var O=Gs(),k=S(O);{var H=W=>{var q=Ws(),L=S(q);Ot(L,()=>(V(Gt),V(c()),V(o()),X(()=>Gt(c().description,o()))));var ae=Q(L,2);{var se=pe=>{var fe=Ys(),we=Q(S(fe));{var G=re=>{var oe=ft();ye(()=>_e(oe,l(n))),te(re,oe)};me(we,re=>{l(n)&&re(G)})}var ne=Q(we,2);{var K=re=>{var oe=Bt(),ie=We(oe);{var Z=ee=>{var ue=ft();ye(()=>_e(ue,`by ${l(u)??""}`)),te(ee,ue)},J=ee=>{var ue=ft();ye(()=>_e(ue,`by ${l(u)??""}`)),te(ee,ue)};me(ie,ee=>{l(n)?ee(Z):ee(J,!1)})}te(re,oe)};me(ne,re=>{l(u)&&re(K)})}U(fe),te(pe,fe)};me(ae,pe=>{l(v)&&pe(se)})}U(q),te(W,q)};me(k,W=>{V(c()),X(()=>c().description)&&W(H)})}var $=Q(k,2);{var N=W=>{var q=js(),L=Q(S(q),2);qt(L,5,()=>(V(c()),X(()=>c().attachments)),ae=>ae.id,(ae,se)=>{var pe=Bt(),fe=We(pe);{var we=ne=>{var K=Qs(),re=S(K),oe=S(re);U(re);var ie=Q(re,2),Z=S(ie),J=S(Z,!0);U(Z),U(ie),U(K),ye(()=>{Ae(re,"title",`Open ${l(se),X(()=>l(se).name)??""}`),Ae(oe,"src",(l(se),X(()=>l(se).url))),Ae(oe,"alt",(l(se),X(()=>l(se).name))),_e(J,(l(se),X(()=>l(se).name)))}),Ee("click",re,Kt(()=>m(l(se).url))),te(ne,K)},G=ne=>{var K=$s(),re=Q(S(K),2),oe=S(re,!0);U(re);var ie=Q(re,2),Z=S(ie);U(ie),U(K),ye(J=>{Ae(K,"title",`Open ${l(se),X(()=>l(se).name)??""}`),_e(oe,(l(se),X(()=>l(se).name))),_e(Z,`(${J??""})`)},[()=>(l(se),X(()=>a(l(se).size)))]),Ee("click",K,Kt(()=>m(l(se).url))),te(ne,K)};me(fe,ne=>{l(se),X(()=>s(l(se).type))?ne(we):ne(G,!1)})}te(ae,pe)}),U(L),U(q),te(W,q)};me($,W=>{V(c()),X(()=>c().attachments&&c().attachments.length>0)&&W(N)})}U(O),te(f,O)};me(C,f=>{b()&&f(D)})}U(P);var F=Q(P,2);{var y=f=>{var O=Ks(),k=S(O);U(O),ye(()=>{Ae(k,"src",(l(i),X(()=>l(i).url))),Ae(k,"alt",(l(i),X(()=>l(i).name)))}),te(f,O)};me(F,f=>{l(i)&&f(y)})}U(Y),U(w),ye(()=>Br(w,l(t)?"cursor: pointer;":"")),Ee("keydown",w,I),Ee("click",w,E),te(d,w),tt()}export{wo as A,bo as E,_o as a,Eo as b,xo as c,Xt as p};
