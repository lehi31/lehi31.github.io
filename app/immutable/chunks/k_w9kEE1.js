const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as lt,ai as Ie,D as U,E as ce,w as V,g as s,aj as St,c as z,s as N,u as Z,r as S,t as pe,a as ct,f as Ge,F as it,i as xr,am as ta,R as pt,as as br,z as ra}from"./CPOcesE7.js";import{p as ye,i as de,e as Te,s as ge,b as Xt,a as Vr,k as na,m as aa,u as ia}from"./opPvMm1W.js";import{f as oe,a as J,c as Qt,t as rt}from"./YsHTGu5k.js";import{e as $t,i as Xr}from"./DAwrR-3T.js";import{k as Ht,h as zt,m as It,b as Mt,t as Rt,n as Jt,g as Zr,D as sa,f as Ot,o as oa,p as la,u as ca,q as Jr,r as jt,s as Ut,v as en,w as da,B as ua,x as fa,y as va,z as ma}from"./GMaj12wg.js";import{e as tn,s as Me,b as Er,r as Je}from"./DkuyyxNK.js";import{z as rn,t as At,y as nt,I as ha,J as pa,K as ya,L as ba,o as Dr,H as nn,M as ga,G as _a,q as an,B as wa,N as Yr,Q as xa,R as Wr,T as Ea,c as st,h as Da,f as He,p as Wt,A as et,g as sn,U as ka,O as je,b as gr}from"./D5qJ9p7b.js";import{s as er}from"./CdEA5IGF.js";import{i as ut}from"./C2Q_9cr2.js";import{R as Se}from"./DnG2cP5g.js";import{_ as tr}from"./CmsKOCeN.js";import{c as Aa,o as on,w as Ta,g as kr,a as Ia}from"./DHXte27T.js";import{S as ln}from"./-BUSlPEz.js";import{b as wt,a as Tr,c as _r}from"./QDlYjqxz.js";import{b as Bt}from"./C34nsrD6.js";import{b as Ct}from"./DLuN8Kcu.js";import{t as kt}from"./r7-tBYgy.js";import{c as Ma}from"./DPl74Ce3.js";import{c as Ra,a as yt,e as Qr,f as Ca,d as Fa,V as Pa}from"./Bai7YTd4.js";import{v as Oa,D as Ua}from"./BKffbvTk.js";function Sa(){return Object.assign({},rn())}function La(c){let i=At(c).getDay();return i===0&&(i=7),i}function za(c,e){const i=e instanceof Date?nt(e,0):new e(0);return i.setFullYear(c.getFullYear(),c.getMonth(),c.getDate()),i.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()),i}const Ba=10;class cn{subPriority=0;validate(e,i){return!0}}class Ha extends cn{constructor(e,i,t,r,a){super(),this.value=e,this.validateValue=i,this.setValue=t,this.priority=r,a&&(this.subPriority=a)}validate(e,i){return this.validateValue(e,this.value,i)}set(e,i,t){return this.setValue(e,i,this.value,t)}}class qa extends cn{priority=Ba;subPriority=-1;set(e,i){return i.timestampIsSet?e:nt(e,za(e,Date))}}class Pe{run(e,i,t,r){const a=this.parse(e,i,t,r);return a?{setter:new Ha(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,i,t){return!0}}class Na extends Pe{priority=140;parse(e,i,t){switch(i){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}}set(e,i,t){return i.era=t,e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Qe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},gt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function $e(c,e){return c&&{value:e(c.value),rest:c.rest}}function qe(c,e){const i=e.match(c);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function _t(c,e){const i=e.match(c);if(!i)return null;if(i[0]==="Z")return{value:0,rest:e.slice(1)};const t=i[1]==="+"?1:-1,r=i[2]?parseInt(i[2],10):0,a=i[3]?parseInt(i[3],10):0,u=i[5]?parseInt(i[5],10):0;return{value:t*(r*ha+a*pa+u*ya),rest:e.slice(i[0].length)}}function dn(c){return qe(Qe.anyDigitsSigned,c)}function Ye(c,e){switch(c){case 1:return qe(Qe.singleDigit,e);case 2:return qe(Qe.twoDigits,e);case 3:return qe(Qe.threeDigits,e);case 4:return qe(Qe.fourDigits,e);default:return qe(new RegExp("^\\d{1,"+c+"}"),e)}}function rr(c,e){switch(c){case 1:return qe(Qe.singleDigitSigned,e);case 2:return qe(Qe.twoDigitsSigned,e);case 3:return qe(Qe.threeDigitsSigned,e);case 4:return qe(Qe.fourDigitsSigned,e);default:return qe(new RegExp("^-?\\d{1,"+c+"}"),e)}}function Ir(c){switch(c){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function un(c,e){const i=e>0,t=i?e:1-e;let r;if(t<=50)r=c||100;else{const a=t+50,u=Math.trunc(a/100)*100,d=c>=a%100;r=c+u-(d?100:0)}return i?r:1-r}function fn(c){return c%400===0||c%4===0&&c%100!==0}class Ya extends Pe{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,i,t){const r=a=>({year:a,isTwoDigitYear:i==="yy"});switch(i){case"y":return $e(Ye(4,e),r);case"yo":return $e(t.ordinalNumber(e,{unit:"year"}),r);default:return $e(Ye(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,t){const r=e.getFullYear();if(t.isTwoDigitYear){const u=un(t.year,r);return e.setFullYear(u,0,1),e.setHours(0,0,0,0),e}const a=!("era"in i)||i.era===1?t.year:1-t.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Wa extends Pe{priority=130;parse(e,i,t){const r=a=>({year:a,isTwoDigitYear:i==="YY"});switch(i){case"Y":return $e(Ye(4,e),r);case"Yo":return $e(t.ordinalNumber(e,{unit:"year"}),r);default:return $e(Ye(i.length,e),r)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,t,r){const a=ba(e,r);if(t.isTwoDigitYear){const d=un(t.year,a);return e.setFullYear(d,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Dr(e,r)}const u=!("era"in i)||i.era===1?t.year:1-t.year;return e.setFullYear(u,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Dr(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Qa extends Pe{priority=130;parse(e,i){return rr(i==="R"?4:i.length,e)}set(e,i,t){const r=nt(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),nn(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class $a extends Pe{priority=130;parse(e,i){return rr(i==="u"?4:i.length,e)}set(e,i,t){return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class ja extends Pe{priority=120;parse(e,i,t){switch(i){case"Q":case"QQ":return Ye(i.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Ga extends Pe{priority=120;parse(e,i,t){switch(i){case"q":case"qq":return Ye(i.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Ka extends Pe{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,i,t){const r=a=>a-1;switch(i){case"M":return $e(qe(Qe.month,e),r);case"MM":return $e(Ye(2,e),r);case"Mo":return $e(t.ordinalNumber(e,{unit:"month"}),r);case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}}class Va extends Pe{priority=110;parse(e,i,t){const r=a=>a-1;switch(i){case"L":return $e(qe(Qe.month,e),r);case"LL":return $e(Ye(2,e),r);case"Lo":return $e(t.ordinalNumber(e,{unit:"month"}),r);case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Xa(c,e,i){const t=At(c),r=ga(t,i)-e;return t.setDate(t.getDate()-r*7),t}class Za extends Pe{priority=100;parse(e,i,t){switch(i){case"w":return qe(Qe.week,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return Ye(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,t,r){return Dr(Xa(e,t,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Ja(c,e){const i=At(c),t=_a(i)-e;return i.setDate(i.getDate()-t*7),i}class ei extends Pe{priority=100;parse(e,i,t){switch(i){case"I":return qe(Qe.week,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return Ye(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,t){return nn(Ja(e,t))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ti=[31,28,31,30,31,30,31,31,30,31,30,31],ri=[31,29,31,30,31,30,31,31,30,31,30,31];class ni extends Pe{priority=90;subPriority=1;parse(e,i,t){switch(i){case"d":return qe(Qe.date,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return Ye(i.length,e)}}validate(e,i){const t=e.getFullYear(),r=fn(t),a=e.getMonth();return r?i>=1&&i<=ri[a]:i>=1&&i<=ti[a]}set(e,i,t){return e.setDate(t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class ai extends Pe{priority=90;subpriority=1;parse(e,i,t){switch(i){case"D":case"DD":return qe(Qe.dayOfYear,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return Ye(i.length,e)}}validate(e,i){const t=e.getFullYear();return fn(t)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,t){return e.setMonth(0,t),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Mr(c,e,i){const t=rn(),r=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,a=At(c),u=a.getDay(),b=(e%7+7)%7,g=7-r,l=e<0||e>6?e-(u+g)%7:(b+g)%7-(u+g)%7;return Ht(a,l)}class ii extends Pe{priority=90;parse(e,i,t){switch(i){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=Mr(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class si extends Pe{priority=90;parse(e,i,t,r){const a=u=>{const d=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+d};switch(i){case"e":case"ee":return $e(Ye(i.length,e),a);case"eo":return $e(t.ordinalNumber(e,{unit:"day"}),a);case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=Mr(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class oi extends Pe{priority=90;parse(e,i,t,r){const a=u=>{const d=Math.floor((u-1)/7)*7;return(u+r.weekStartsOn+6)%7+d};switch(i){case"c":case"cc":return $e(Ye(i.length,e),a);case"co":return $e(t.ordinalNumber(e,{unit:"day"}),a);case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,t,r){return e=Mr(e,t,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function li(c,e){const i=At(c),t=La(i),r=e-t;return Ht(i,r)}class ci extends Pe{priority=90;parse(e,i,t){const r=a=>a===0?7:a;switch(i){case"i":case"ii":return Ye(i.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return $e(t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return $e(t.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return $e(t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return $e(t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,i){return i>=1&&i<=7}set(e,i,t){return e=li(e,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class di extends Pe{priority=80;parse(e,i,t){switch(i){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(Ir(t),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class ui extends Pe{priority=80;parse(e,i,t){switch(i){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(Ir(t),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class fi extends Pe{priority=80;parse(e,i,t){switch(i){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,t){return e.setHours(Ir(t),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class vi extends Pe{priority=70;parse(e,i,t){switch(i){case"h":return qe(Qe.hour12h,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return Ye(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,t){const r=e.getHours()>=12;return r&&t<12?e.setHours(t+12,0,0,0):!r&&t===12?e.setHours(0,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class mi extends Pe{priority=70;parse(e,i,t){switch(i){case"H":return qe(Qe.hour23h,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return Ye(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,t){return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class hi extends Pe{priority=70;parse(e,i,t){switch(i){case"K":return qe(Qe.hour11h,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return Ye(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,t){return e.getHours()>=12&&t<12?e.setHours(t+12,0,0,0):e.setHours(t,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class pi extends Pe{priority=70;parse(e,i,t){switch(i){case"k":return qe(Qe.hour24h,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return Ye(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,t){const r=t<=24?t%24:t;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class yi extends Pe{priority=60;parse(e,i,t){switch(i){case"m":return qe(Qe.minute,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return Ye(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,t){return e.setMinutes(t,0,0),e}incompatibleTokens=["t","T"]}class bi extends Pe{priority=50;parse(e,i,t){switch(i){case"s":return qe(Qe.second,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return Ye(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,t){return e.setSeconds(t,0),e}incompatibleTokens=["t","T"]}class gi extends Pe{priority=30;parse(e,i){const t=r=>Math.trunc(r*Math.pow(10,-i.length+3));return $e(Ye(i.length,e),t)}set(e,i,t){return e.setMilliseconds(t),e}incompatibleTokens=["t","T"]}class _i extends Pe{priority=10;parse(e,i){switch(i){case"X":return _t(gt.basicOptionalMinutes,e);case"XX":return _t(gt.basic,e);case"XXXX":return _t(gt.basicOptionalSeconds,e);case"XXXXX":return _t(gt.extendedOptionalSeconds,e);case"XXX":default:return _t(gt.extended,e)}}set(e,i,t){return i.timestampIsSet?e:nt(e,e.getTime()-an(e)-t)}incompatibleTokens=["t","T","x"]}class wi extends Pe{priority=10;parse(e,i){switch(i){case"x":return _t(gt.basicOptionalMinutes,e);case"xx":return _t(gt.basic,e);case"xxxx":return _t(gt.basicOptionalSeconds,e);case"xxxxx":return _t(gt.extendedOptionalSeconds,e);case"xxx":default:return _t(gt.extended,e)}}set(e,i,t){return i.timestampIsSet?e:nt(e,e.getTime()-an(e)-t)}incompatibleTokens=["t","T","X"]}class xi extends Pe{priority=40;parse(e){return dn(e)}set(e,i,t){return[nt(e,t*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Ei extends Pe{priority=20;parse(e){return dn(e)}set(e,i,t){return[nt(e,t),{timestampIsSet:!0}]}incompatibleTokens="*"}const Di={G:new Na,y:new Ya,Y:new Wa,R:new Qa,u:new $a,Q:new ja,q:new Ga,M:new Ka,L:new Va,w:new Za,I:new ei,d:new ni,D:new ai,E:new ii,e:new si,c:new oi,i:new ci,a:new di,b:new ui,B:new fi,h:new vi,H:new mi,K:new hi,k:new pi,m:new yi,s:new bi,S:new gi,X:new _i,x:new wi,t:new xi,T:new Ei},ki=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ai=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ti=/^'([^]*?)'?$/,Ii=/''/g,Mi=/\S/,Ri=/[a-zA-Z]/;function nr(c,e,i,t){const r=Sa(),a=t?.locale??r.locale??wa,u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,d=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(e==="")return c===""?At(i):nt(i,NaN);const b={firstWeekContainsDate:u,weekStartsOn:d,locale:a},g=[new qa],l=e.match(Ai).map(E=>{const T=E[0];if(T in Yr){const w=Yr[T];return w(E,a.formatLong)}return E}).join("").match(ki),n=[];for(let E of l){!t?.useAdditionalWeekYearTokens&&xa(E)&&Wr(E,e,c),!t?.useAdditionalDayOfYearTokens&&Ea(E)&&Wr(E,e,c);const T=E[0],w=Di[T];if(w){const{incompatibleTokens:H}=w;if(Array.isArray(H)){const F=n.find(B=>H.includes(B.token)||B.token===T);if(F)throw new RangeError(`The format string mustn't contain \`${F.fullToken}\` and \`${E}\` at the same time`)}else if(w.incompatibleTokens==="*"&&n.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);n.push({token:T,fullToken:E});const L=w.run(c,E,a.match,b);if(!L)return nt(i,NaN);g.push(L.setter),c=L.rest}else{if(T.match(Ri))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if(E==="''"?E="'":T==="'"&&(E=Ci(E)),c.indexOf(E)===0)c=c.slice(E.length);else return nt(i,NaN)}}if(c.length>0&&Mi.test(c))return nt(i,NaN);const o=g.map(E=>E.priority).sort((E,T)=>T-E).filter((E,T,w)=>w.indexOf(E)===T).map(E=>g.filter(T=>T.priority===E).sort((T,w)=>w.subPriority-T.subPriority)).map(E=>E[0]);let v=At(i);if(isNaN(v.getTime()))return nt(i,NaN);const f={};for(const E of o){if(!E.validate(v,b))return nt(i,NaN);const T=E.set(v,f,b);Array.isArray(T)?(v=T[0],Object.assign(f,T[1])):v=T}return nt(i,v)}function Ci(c){return c.match(Ti)[1].replace(Ii,"'")}function Fi(c,e){const i=At(c);return i.setHours(e),i}function Pi(c,e){const i=At(c);return i.setMinutes(e),i}var Oi=oe('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),Ui=oe('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),Si=oe('<span class="d-block small svelte-1rksp2z"> </span>'),Li=oe('<span class="text-muted">•</span>'),zi=oe("<span> </span> <!>",1),Bi=oe('<span class="text-muted">•</span>'),Hi=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),qi=oe('<span class="text-muted">•</span>'),Ni=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),Yi=oe('<span class="text-muted">•</span>'),Wi=oe('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),Qi=oe('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),$i=oe('<div class="small svelte-1rksp2z"><!></div>'),ji=oe('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),Gi=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Ki=oe('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Vi=oe('<div class="small text-muted posted-meta svelte-1rksp2z">Posted <!> <!></div>'),Xi=oe('<div class="small text-muted posted-meta svelte-1rksp2z">Last edited <!> <!></div>'),Zi=oe('<div class="details-container svelte-1rksp2z"><!> <!> <!> <!></div>'),Ji=oe('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),es=oe('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="fw-bold svelte-1rksp2z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function ll(c,e){lt(e,!1);const i=ce(),t=ce(),r=ce(),a=ce(),u=ce(),d=ce(),b=ce(),g=ce(),l=ce();let n=ye(e,"item",8),o=ye(e,"showDetails",12,!1),v=ye(e,"showDate",8,!0),f=ye(e,"searchQuery",8,"");const E=j=>{if(!j)return"";const X=Wt(j),K=Rt(X,et);return He(K,"h:mm aa")},T=j=>{if(!j)return"";const X=Wt(j),K=Rt(X,et);return He(K,"EEE")},w=j=>{if(!j)return"";const X=Wt(j),K=Rt(X,et);return He(K,"MMM, dd")},H=()=>{s(t)&&o(!o())},L=j=>{s(t)&&(j.key==="Enter"||j.key===" ")&&H()},F=j=>j<1024?j+" B":j<1024*1024?(j/1024).toFixed(1)+" KB":(j/(1024*1024)).toFixed(1)+" MB",B=j=>j.startsWith("image/"),_=j=>{window.open(j,"_blank")},I=j=>{if(!j)return"";try{return He(Wt(j),"MMM d, yyyy 'at' h:mm a")}catch{return""}},h=j=>{try{const K=Se.fromString(j).origOptions,re=K.interval||1,se=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ne=["","1st","2nd","3rd","4th","5th"];if(K.freq===Se.DAILY)return re===1?"Repeats daily":`Repeats every ${re} days`;if(K.freq===Se.WEEKLY){if(K.byweekday){const ie=(Array.isArray(K.byweekday)?K.byweekday:[K.byweekday]).map(me=>{const _e=typeof me=="number"?me:me.weekday,le=_e===6?0:_e+1;return se[le]});return re===1?ie.length===1?`Repeats every ${ie[0]}`:`Repeats on ${ie.join(", ")}`:`Repeats every ${re} weeks on ${ie.join(", ")}`}return re===1?"Repeats weekly":`Repeats every ${re} weeks`}if(K.freq===Se.MONTHLY){if(K.byweekday){const ie=(Array.isArray(K.byweekday)?K.byweekday:[K.byweekday])[0];if(ie&&typeof ie=="object"&&"n"in ie&&"weekday"in ie){const me=ie.weekday,_e=me===6?0:me+1,le=ie.n,be=ne[le]||`${le}th`;return re===1?`Repeats on the ${be} ${se[_e]} of the month`:`Repeats on the ${be} ${se[_e]} every ${re} months`}}if(K.bymonthday){const ae=Array.isArray(K.bymonthday)?K.bymonthday[0]:K.bymonthday,ie=ae===1?"st":ae===2?"nd":ae===3?"rd":"th";return re===1?`Repeats on the ${ae}${ie} of the month`:`Repeats on the ${ae}${ie} every ${re} months`}return re===1?"Repeats monthly":`Repeats every ${re} months`}if(K.freq===Se.YEARLY){if(K.bymonth&&K.bymonthday){const ae=["","January","February","March","April","May","June","July","August","September","October","November","December"],ie=Array.isArray(K.bymonth)?K.bymonth[0]:K.bymonth,me=Array.isArray(K.bymonthday)?K.bymonthday[0]:K.bymonthday,_e=me===1?"st":me===2?"nd":me===3?"rd":"th";return re===1?`Repeats every ${ae[ie]} ${me}${_e}`:`Repeats every ${re} years on ${ae[ie]} ${me}${_e}`}return re===1?"Repeats yearly":`Repeats every ${re} years`}return"Repeats"}catch{return"Repeats"}};let p=ce("");Ie(()=>V(v()),()=>{U(p,v()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Ie(()=>V(n()),()=>{U(i,n().attachments?.find(j=>B(j.type)))}),Ie(()=>V(n()),()=>{U(t,!!(n().description||n().attachments&&n().attachments.length>0))}),Ie(()=>V(n()),()=>{U(r,n().meta_data?.submitted_at??n().created_at)}),Ie(()=>s(r),()=>{U(a,I(s(r)))}),Ie(()=>V(n()),()=>{U(u,n().meta_data?.submitted_by_name)}),Ie(()=>(s(a),s(u)),()=>{U(d,!!(s(a)||s(u)))}),Ie(()=>V(n()),()=>{U(b,I(n().meta_data?.edited_at))}),Ie(()=>V(n()),()=>{U(g,n().meta_data?.edited_by_name)}),Ie(()=>(s(b),s(g)),()=>{U(l,!!(s(b)||s(g)))}),St(),ut();var x=es(),k=z(x);{var A=j=>{var X=Oi(),K=z(X),re=z(K,!0);S(K);var se=N(K,2),ne=z(se),ae=z(ne,!0);S(ne),S(se),S(X),pe((ie,me)=>{ge(re,ie),ge(ae,me)},[()=>(V(n()),Z(()=>T(n().start_time))),()=>(V(n()),Z(()=>w(n().start_time)))]),J(j,X)};de(k,j=>{v()&&j(A)})}var M=N(k,2),D=z(M),R=z(D),y=z(R);zt(y,()=>(V(It),V(n()),V(f()),Z(()=>It(n().title||"",f())))),S(R);var m=N(R,2);{var Y=j=>{var X=Ui();J(j,X)},C=j=>{var X=Si(),K=z(X);S(X),pe((re,se)=>ge(K,`${re??""} to ${se??""}`),[()=>(V(n()),Z(()=>E(n().start_time))),()=>(V(n()),Z(()=>E(n().end_time)))]),J(j,X)};de(m,j=>{V(n()),Z(()=>n().is_all_day)?j(Y):j(C,!1)})}var O=N(m,2),G=z(O);{var Q=j=>{var X=zi(),K=Ge(X),re=z(K,!0);S(K);var se=N(K,2);{var ne=ae=>{var ie=Li();J(ae,ie)};de(se,ae=>{V(n()),Z(()=>n().recurrence_rule||n()?.meta_data?.recurring_instance||n().location||n().description||n().attachments&&n().attachments.length>0)&&ae(ne)})}pe((ae,ie)=>{st(K,1,`badge rounded-pill bg-color-${ae??""}`,"svelte-1rksp2z"),ge(re,ie)},[()=>(V(Mt),V(n()),Z(()=>Mt(n()?.meta_data?.category)?.color_number)),()=>(V(Mt),V(n()),Z(()=>Mt(n()?.meta_data?.category)?.label))]),J(j,X)};de(G,j=>{V(n()),Z(()=>n()?.meta_data?.category)&&j(Q)})}var W=N(G,2);{var q=j=>{var X=Hi(),K=Ge(X),re=N(z(K));S(K);var se=N(K,2);{var ne=ae=>{var ie=Bi();J(ae,ie)};de(se,ae=>{V(n()),Z(()=>n().location||n().description||n().attachments&&n().attachments.length>0)&&ae(ne)})}pe(ae=>ge(re,` ${ae??""}`),[()=>(V(n()),Z(()=>h(n().recurrence_rule)))]),J(j,X)},P=j=>{var X=Qt(),K=Ge(X);{var re=se=>{var ne=Ni(),ae=N(Ge(ne),2);{var ie=me=>{var _e=qi();J(me,_e)};de(ae,me=>{V(n()),Z(()=>n().location||n().description||n().attachments&&n().attachments.length>0)&&me(ie)})}J(se,ne)};de(K,se=>{V(n()),Z(()=>n()?.meta_data?.recurring_instance)&&se(re)},!0)}J(j,X)};de(W,j=>{V(n()),Z(()=>n().recurrence_rule)?j(q):j(P,!1)})}var ee=N(W,2);{var ue=j=>{var X=Wi(),K=Ge(X),re=z(K);zt(re,()=>(V(It),V(n()),V(f()),Z(()=>It(n().location,f())))),S(K);var se=N(K,2);{var ne=ae=>{var ie=Yi();J(ae,ie)};de(se,ae=>{V(n()),Z(()=>n().description||n().attachments&&n().attachments.length>0)&&ae(ne)})}J(j,X)};de(ee,j=>{V(n()),Z(()=>n().location)&&j(ue)})}var he=N(ee,2);{var fe=j=>{var X=Qi(),K=z(X);{var re=ne=>{var ae=rt("Hide");J(ne,ae)},se=ne=>{var ae=rt("Show");J(ne,ae)};de(K,ne=>{o()?ne(re):ne(se,!1)})}it(),S(X),J(j,X)};de(he,j=>{V(n()),Z(()=>n().description||n().attachments&&n().attachments.length>0)&&j(fe)})}S(O);var ve=N(O,2);{var Ee=j=>{var X=Zi(),K=z(X);{var re=le=>{var be=$i(),Ce=z(be);zt(Ce,()=>(V(Jt),V(n()),V(f()),Z(()=>Jt(n().description,f())))),S(be),J(le,be)};de(K,le=>{V(n()),Z(()=>n().description)&&le(re)})}var se=N(K,2);{var ne=le=>{var be=Ki(),Ce=N(z(be),2);$t(Ce,5,()=>(V(n()),Z(()=>n().attachments)),ze=>ze.id,(ze,xe)=>{var Ve=Qt(),ke=Ge(Ve);{var Fe=Ne=>{var Le=ji(),Oe=z(Le),Ke=z(Oe);S(Oe);var xt=N(Oe,2),ft=z(xt),vt=z(ft,!0);S(ft),S(xt),S(Le),pe(()=>{Me(Oe,"title",`Open ${s(xe),Z(()=>s(xe).name)??""}`),Me(Ke,"src",(s(xe),Z(()=>s(xe).url))),Me(Ke,"alt",(s(xe),Z(()=>s(xe).name))),ge(vt,(s(xe),Z(()=>s(xe).name)))}),Te("click",Oe,er(()=>_(s(xe).url))),J(Ne,Le)},We=Ne=>{var Le=Gi(),Oe=N(z(Le),2),Ke=z(Oe,!0);S(Oe);var xt=N(Oe,2),ft=z(xt);S(xt),S(Le),pe(vt=>{Me(Le,"title",`Open ${s(xe),Z(()=>s(xe).name)??""}`),ge(Ke,(s(xe),Z(()=>s(xe).name))),ge(ft,`(${vt??""})`)},[()=>(s(xe),Z(()=>F(s(xe).size)))]),Te("click",Le,er(()=>_(s(xe).url))),J(Ne,Le)};de(ke,Ne=>{s(xe),Z(()=>B(s(xe).type))?Ne(Fe):Ne(We,!1)})}J(ze,Ve)}),S(Ce),S(be),J(le,be)};de(se,le=>{V(n()),Z(()=>n().attachments&&n().attachments.length>0)&&le(ne)})}var ae=N(se,2);{var ie=le=>{var be=Vi(),Ce=N(z(be));{var ze=ke=>{var Fe=rt();pe(()=>ge(Fe,s(a))),J(ke,Fe)};de(Ce,ke=>{s(a)&&ke(ze)})}var xe=N(Ce,2);{var Ve=ke=>{var Fe=Qt(),We=Ge(Fe);{var Ne=Oe=>{var Ke=rt();pe(()=>ge(Ke,`by ${s(u)??""}`)),J(Oe,Ke)},Le=Oe=>{var Ke=rt();pe(()=>ge(Ke,`by ${s(u)??""}`)),J(Oe,Ke)};de(We,Oe=>{s(a)?Oe(Ne):Oe(Le,!1)})}J(ke,Fe)};de(xe,ke=>{s(u)&&ke(Ve)})}S(be),J(le,be)};de(ae,le=>{s(d)&&le(ie)})}var me=N(ae,2);{var _e=le=>{var be=Xi(),Ce=N(z(be));{var ze=ke=>{var Fe=rt();pe(()=>ge(Fe,s(b))),J(ke,Fe)};de(Ce,ke=>{s(b)&&ke(ze)})}var xe=N(Ce,2);{var Ve=ke=>{var Fe=rt();pe(()=>ge(Fe,`by ${s(g)??""}`)),J(ke,Fe)};de(xe,ke=>{s(g)&&ke(Ve)})}S(be),J(le,be)};de(me,le=>{s(l)&&le(_e)})}S(X),J(j,X)};de(ve,j=>{o()&&j(Ee)})}S(D);var De=N(D,2);{var Ae=j=>{var X=Ji(),K=z(X);S(X),pe(()=>{Me(K,"src",(s(i),Z(()=>s(i).url))),Me(K,"alt",(s(i),Z(()=>s(i).name)))}),J(j,X)};de(De,j=>{s(i)&&j(Ae)})}S(M),S(x),pe(()=>{st(x,1,Da(s(p)),"svelte-1rksp2z"),tn(x,s(t)?"cursor: pointer;":"")}),Te("keydown",x,L),Te("click",x,H),J(c,x),ct()}var ts=oe('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function cl(c,e){lt(e,!1);const i=()=>Xt(a,"$weeksExpanded",t),[t,r]=Vr(),{stores:{weeksExpanded:a}}=Zr();function u(){na(a,!i())}ut();var d=ts(),b=z(d),g=N(b);S(d),pe(()=>{st(b,1,`bi ${i()?"bi-chevron-up":"bi-chevron-down"}`),ge(g,` ${i()?"Collapse All":"Expand All"}`)}),Te("click",d,u),J(c,d),ct(),r()}var rs=oe('<div class="invalid-feedback d-block"> </div>'),ns=oe("<option> </option>"),as=oe('<div class="invalid-feedback d-block"> </div>'),is=oe(`<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Displayed publicly on the calendar and announcements page. e.g. Ward Conference, Ward BBQ
			Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select> <small class="fw-lighter fst-italic">Displayed as a public badge on the event listing.</small></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Shown publicly when viewers expand the event details. Supports basic HTML formatting.</small></div></div>`);function ss(c,e){lt(e,!1);const i=ce(),t=ce();let r=ye(e,"title",12,""),a=ye(e,"eventType",12,"calendar_event"),u=ye(e,"category",12,""),d=ye(e,"isPublic",12,!0),b=ye(e,"description",12,""),g=ye(e,"disabled",8,!1),l=ye(e,"name",8,"event"),n=ye(e,"validationErrors",24,()=>({})),o=ce(),v=ce();function f(){s(o)?.focus()}function E(){s(v)?.focus()}Ie(()=>V(n()),()=>{U(i,!!n().title)}),Ie(()=>V(n()),()=>{U(t,!!n().description)}),St();var T={focusTitle:f,focusDescription:E};ut();var w=is(),H=z(w),L=N(z(H),2);Je(L);let F;Ct(L,Q=>U(o,Q),()=>s(o));var B=N(L,2);{var _=Q=>{var W=rs(),q=z(W,!0);S(W),pe(()=>ge(q,(V(n()),Z(()=>n().title)))),J(Q,W)};de(B,Q=>{V(n()),Z(()=>n().title)&&Q(_)})}it(2),S(H);var I=N(H,2),h=N(z(I),2);pe(()=>{a(),xr(()=>{g()})});var p=z(h);p.value=p.__value="calendar_event";var x=N(p);x.value=x.__value="announcement",S(h),S(I);var k=N(I,2),A=N(z(k),2);pe(()=>{u(),xr(()=>{g()})}),$t(A,5,()=>sa,Xr,(Q,W)=>{var q=ns(),P=z(q,!0);S(q);var ee={};pe(()=>{ge(P,(s(W),Z(()=>s(W).label))),ee!==(ee=(s(W),Z(()=>s(W).key)))&&(q.value=(q.__value=(s(W),Z(()=>s(W).key)))??"")}),J(Q,q)}),S(A),it(2),S(k);var M=N(k,2),D=N(z(M),2),R=z(D);Je(R);var y=N(R,2);S(D),it(2),S(M);var m=N(M,2),Y=N(z(m),2);ta(Y);let C;Ct(Y,Q=>U(v,Q),()=>s(v));var O=N(Y,2);{var G=Q=>{var W=as(),q=z(W,!0);S(W),pe(()=>ge(q,(V(n()),Z(()=>n().description)))),J(Q,W)};de(O,Q=>{V(n()),Z(()=>n().description)&&Q(G)})}return it(2),S(m),S(w),pe(()=>{Me(L,"name",`${l()??""}-title`),F=st(L,1,"form-control",null,F,{"is-invalid":s(i)}),L.disabled=g(),h.disabled=g(),A.disabled=g(),Me(R,"id",`${l()??""}-is-public`),R.disabled=g(),Me(y,"for",`${l()??""}-is-public`),Me(Y,"name",`${l()??""}-description`),C=st(Y,1,"form-control",null,C,{"is-invalid":s(t)}),Y.disabled=g()}),Te("focus",L,()=>s(o).select()),wt(L,r),Er(h,a),Er(A,u),Tr(R,d),Te("focus",Y,()=>s(v).select()),wt(Y,b),J(c,w),Bt(e,"focusTitle",f),Bt(e,"focusDescription",E),ct(T)}var os=oe('<div class="invalid-feedback d-block"> </div>'),ls=oe('<div class="invalid-feedback d-block"> </div>'),cs=oe('<div class="invalid-feedback d-block"> </div>'),ds=oe('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),us=oe('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function fs(c,e){lt(e,!1);const i=ce(),t=ce(),r=ce();let a=ye(e,"dateInput",12,""),u=ye(e,"startTimeInput",12,""),d=ye(e,"endTimeInput",12,""),b=ye(e,"isAllDay",12,!1),g=ye(e,"disabled",8,!1),l=ye(e,"name",8,"event"),n=ye(e,"validationErrors",24,()=>({})),o=ce(),v=ce(),f=ce();function E(){s(o)?.focus()}function T(){s(v)?.focus()}function w(){s(f)?.focus()}Ie(()=>V(n()),()=>{U(i,!!n().dateInput)}),Ie(()=>V(n()),()=>{U(t,!!n().startTimeInput)}),Ie(()=>V(n()),()=>{U(r,!!n().endTimeInput)}),St();var H={focusDate:E,focusStartTime:T,focusEndTime:w};ut();var L=us(),F=z(L),B=N(z(F),2);Je(B);let _;Ct(B,R=>U(o,R),()=>s(o));var I=N(B,2);{var h=R=>{var y=os(),m=z(y,!0);S(y),pe(()=>ge(m,(V(n()),Z(()=>n().dateInput)))),J(R,y)};de(I,R=>{V(n()),Z(()=>n().dateInput)&&R(h)})}S(F);var p=N(F,2),x=z(p),k=z(x);Je(k);var A=N(k,2);S(x),S(p);var M=N(p,2);{var D=R=>{var y=ds(),m=z(y),Y=N(z(m),2);Je(Y),Me(Y,"step",900);let C;Ct(Y,ue=>U(v,ue),()=>s(v));var O=N(Y,2);{var G=ue=>{var he=ls(),fe=z(he,!0);S(he),pe(()=>ge(fe,(V(n()),Z(()=>n().startTimeInput)))),J(ue,he)};de(O,ue=>{V(n()),Z(()=>n().startTimeInput)&&ue(G)})}S(m);var Q=N(m,2),W=N(z(Q),2);Je(W),Me(W,"step",900);let q;Ct(W,ue=>U(f,ue),()=>s(f));var P=N(W,2);{var ee=ue=>{var he=cs(),fe=z(he,!0);S(he),pe(()=>ge(fe,(V(n()),Z(()=>n().endTimeInput)))),J(ue,he)};de(P,ue=>{V(n()),Z(()=>n().endTimeInput)&&ue(ee)})}S(Q),S(y),pe(()=>{Me(Y,"name",`${l()??""}-start-time`),C=st(Y,1,"form-control",null,C,{"is-invalid":s(t)}),Y.disabled=g(),Me(W,"name",`${l()??""}-end-time`),q=st(W,1,"form-control",null,q,{"is-invalid":s(r)}),W.disabled=g()}),Te("focus",Y,()=>s(v).select()),wt(Y,u),Te("focus",W,()=>s(f).select()),wt(W,d),J(R,y)};de(M,R=>{b()||R(D)})}return S(L),pe(()=>{Me(B,"name",`${l()??""}-date`),_=st(B,1,"form-control",null,_,{"is-invalid":s(i)}),B.disabled=g(),Me(k,"id",`${l()??""}-all-day-check`),k.disabled=g(),Me(A,"for",`${l()??""}-all-day-check`)}),Te("focus",B,()=>s(o).select()),wt(B,a),Tr(k,b),J(c,L),Bt(e,"focusDate",E),Bt(e,"focusStartTime",T),Bt(e,"focusEndTime",w),ct(H)}var vs=oe('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),ms=oe('<div class="invalid-feedback d-block"> </div>'),hs=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),ps=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),ys=oe('<div class="invalid-feedback d-block"> </div>'),bs=oe('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),gs=oe('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function _s(c,e){lt(e,!1);const i=[],t=[];let r=ye(e,"isRecurring",12,!1),a=ye(e,"recurrenceFrequency",12,"weekly"),u=ye(e,"recurrenceInterval",12,1),d=ye(e,"recurringDays",28,()=>[]),b=ye(e,"recurrenceEndDate",12,""),g=ye(e,"monthlyType",12,"date"),l=ye(e,"dateInput",8,""),n=ye(e,"disabled",8,!1),o=ye(e,"name",8,"event"),v=ye(e,"validationErrors",24,()=>({}));const f=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function E(I){if(!I)return"Same weekday of the month";try{const h=new Date(I),p=He(h,"EEEE"),x=Math.ceil(h.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][x]} ${p} of the month`}catch{return"Same weekday of the month"}}function T(I){if(!I)return 1;try{return I.split("-").map(Number)[2]}catch{return 1}}ut();var w=gs(),H=z(w),L=z(H);Je(L);var F=N(L,2);S(H);var B=N(H,2);{var _=I=>{var h=bs(),p=z(h),x=N(z(p),2),k=N(z(x),2),A=z(k);Je(A),S(k);var M=N(k,2),D=z(M);pe(()=>{a(),xr(()=>{n(),u()})});var R=z(D),y=z(R,!0);S(R),R.value=R.__value="daily";var m=N(R),Y=z(m,!0);S(m),m.value=m.__value="weekly";var C=N(m),O=z(C,!0);S(C),C.value=C.__value="monthly";var G=N(C),Q=z(G,!0);S(G),G.value=G.__value="yearly",S(D),S(M),S(x),S(p);var W=N(p,2);{var q=Ae=>{var j=hs(),X=N(z(j),2);$t(X,5,()=>f,Xr,(se,ne)=>{var ae=vs(),ie=z(ae);Je(ie);var me,_e=N(ie,2),le=z(_e,!0);S(_e),S(ae),pe(()=>{Me(ie,"id",`${o()??""}-day-${s(ne),Z(()=>s(ne).value)??""}`),ie.disabled=n(),me!==(me=(s(ne),Z(()=>s(ne).value)))&&(ie.value=(ie.__value=(s(ne),Z(()=>s(ne).value)))??""),Me(_e,"for",`${o()??""}-day-${s(ne),Z(()=>s(ne).value)??""}`),ge(le,(s(ne),Z(()=>s(ne).label)))}),_r(i,[],ie,()=>(s(ne),Z(()=>s(ne).value),d()),d),J(se,ae)}),S(X);var K=N(X,2);{var re=se=>{var ne=ms(),ae=z(ne,!0);S(ne),pe(()=>ge(ae,(V(v()),Z(()=>v().recurringDays)))),J(se,ne)};de(K,se=>{V(v()),Z(()=>v().recurringDays)&&se(re)})}it(2),S(j),J(Ae,j)};de(W,Ae=>{a()==="weekly"&&Ae(q)})}var P=N(W,2);{var ee=Ae=>{var j=ps(),X=N(z(j),2),K=z(X),re=z(K);Je(re),re.value=re.__value="date";var se=N(re,2),ne=z(se);S(se),S(K);var ae=N(K,2),ie=z(ae);Je(ie),ie.value=ie.__value="weekday";var me=N(ie,2),_e=z(me);S(me),S(ae),S(X),S(j),pe((le,be)=>{Me(re,"id",`${o()??""}-monthly-date`),re.disabled=n(),Me(se,"for",`${o()??""}-monthly-date`),ge(ne,`On day ${le??""} of the month`),Me(ie,"id",`${o()??""}-monthly-weekday`),ie.disabled=n(),Me(me,"for",`${o()??""}-monthly-weekday`),ge(_e,`On the ${be??""}`)},[()=>(V(l()),Z(()=>T(l()))),()=>(V(l()),Z(()=>E(l())))]),_r(t,[],re,g,g),_r(t,[],ie,g,g),J(Ae,j)};de(P,Ae=>{a()==="monthly"&&Ae(ee)})}var ue=N(P,2),he=z(ue),fe=N(he,2);Je(fe);let ve;var Ee=N(fe,2);{var De=Ae=>{var j=ys(),X=z(j,!0);S(j),pe(()=>ge(X,(V(v()),Z(()=>v().recurrenceEndDate)))),J(Ae,j)};de(Ee,Ae=>{V(v()),Z(()=>v().recurrenceEndDate)&&Ae(De)})}it(2),S(ue),S(h),pe(()=>{A.disabled=n(),D.disabled=n(),ge(y,u()===1?"day":"days"),ge(Y,u()===1?"week":"weeks"),ge(O,u()===1?"month":"months"),ge(Q,u()===1?"year":"years"),Me(he,"for",`${o()??""}-recurrence-end-date`),ve=st(fe,1,"form-control",null,ve,{"is-invalid":!!v().recurrenceEndDate}),Me(fe,"id",`${o()??""}-recurrence-end-date`),fe.disabled=n()}),wt(A,u),Er(D,a),wt(fe,b),J(I,h)};de(B,I=>{r()&&I(_)})}S(w),pe(()=>{Me(L,"id",`${o()??""}-is-recurring`),L.disabled=n(),Me(F,"for",`${o()??""}-is-recurring`)}),Tr(L,r),J(c,w),ct()}var ws=oe('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Displayed publicly on the event listing. e.g. Cultural Hall, Stake Center</small></div>');function xs(c,e){lt(e,!1);let i=ye(e,"value",12,""),t=ye(e,"disabled",8,!1),r=ye(e,"name",8,"location"),a=ce();function u(){s(a)?.focus()}var d={focus:u},b=ws(),g=N(z(b),2);return Je(g),Ct(g,l=>U(a,l),()=>s(a)),it(2),S(b),pe(()=>{Me(g,"name",r()),g.disabled=t()}),Te("focus",g,()=>s(a).select()),wt(g,i),J(c,b),Bt(e,"focus",u),ct(d)}var Es=oe('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Ds=oe('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),ks=oe('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),As=oe('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Ts=oe('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),Is=oe('<div class="d-flex flex-column gap-2 mb-2"></div>'),Ms=oe('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Publicly visible in the event details. Max 5MB per file. Supports: images, PDFs</small></div></div>');function Rs(c,e){lt(e,!1);let i=ye(e,"attachments",24,()=>[]),t=ye(e,"disabled",8,!1),r=ye(e,"uploadingFile",8,!1);const a=Aa();let u=ce(),d=ce(null),b=ce("");const g=I=>{if(I===0)return"0 Bytes";const h=1024,p=["Bytes","KB","MB"],x=Math.floor(Math.log(I)/Math.log(h));return Math.round(I/Math.pow(h,x)*100)/100+" "+p[x]},l=I=>{const h=I.target;h.files&&h.files[0]&&(a("upload",h.files[0]),h.value="")},n=I=>{U(d,I.id),U(b,I.name)},o=I=>{s(b).trim()&&s(b)!==I.name&&a("edit",{attachment:I,newName:s(b).trim()}),U(d,null),U(b,"")},v=()=>{U(d,null),U(b,"")},f=I=>{a("remove",I)};ut();var E=Ms(),T=N(z(E),2);{var w=I=>{var h=Is();$t(h,5,i,p=>p.id,(p,x)=>{var k=Ts(),A=z(k),M=z(A);{var D=C=>{var O=Es(),G=Ge(O);Je(G);var Q=N(G,2),W=z(Q,!0);S(Q),pe(q=>{G.disabled=t(),ge(W,q)},[()=>(s(x),Z(()=>g(s(x).size)))]),wt(G,()=>s(b),q=>U(b,q)),Te("keydown",G,q=>{q.key==="Enter"&&o(s(x)),q.key==="Escape"&&v()}),J(C,O)},R=C=>{var O=Ds(),G=Ge(O),Q=z(G,!0);S(G);var W=N(G,2),q=z(W,!0);S(W),pe(P=>{ge(Q,(s(x),Z(()=>s(x).name))),ge(q,P)},[()=>(s(x),Z(()=>g(s(x).size)))]),J(C,O)};de(M,C=>{s(d),s(x),Z(()=>s(d)===s(x).id)?C(D):C(R,!1)})}S(A);var y=N(A,2);{var m=C=>{var O=ks(),G=Ge(O),Q=N(G,2);pe(()=>{G.disabled=t(),Q.disabled=t()}),Te("click",G,()=>o(s(x))),Te("click",Q,v),J(C,O)},Y=C=>{var O=As(),G=Ge(O),Q=N(G,2);pe(()=>{G.disabled=t(),Q.disabled=t()}),Te("click",G,()=>n(s(x))),Te("click",Q,()=>f(s(x))),J(C,O)};de(y,C=>{s(d),s(x),Z(()=>s(d)===s(x).id)?C(m):C(Y,!1)})}S(k),J(p,k)}),S(h),J(I,h)};de(T,I=>{V(i()),Z(()=>i().length>0)&&I(w)})}var H=N(T,2),L=z(H),F=z(L);Ct(F,I=>U(u,I),()=>s(u));var B=N(F,2);{var _=I=>{ln(I,{size:"sm"})};de(B,I=>{r()&&I(_)})}S(L),it(2),S(H),S(E),pe(()=>F.disabled=t()||r()),Te("change",F,l),J(c,E),ct()}var Cs=oe('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Fs(c,e){lt(e,!1);const i=ce();let t=ye(e,"eventTitle",8),r=ye(e,"occurrenceDate",8),a=ye(e,"callback",8);function u(k){a()(k)}function d(){a()(null)}Ie(()=>(V(r()),He),()=>{U(i,(()=>{try{const[k,A,M]=r().split("-").map(Number),D=new Date(k,A-1,M);return He(D,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),St(),ut();var b=Cs(),g=z(b),l=z(g),n=z(l),o=N(z(n),2);S(n);var v=N(n,2),f=z(v),E=z(f),T=z(E);S(E),it(),S(f);var w=N(f,4),H=z(w),L=N(z(H),2),F=z(L,!0);S(L),S(H);var B=N(H,2),_=N(z(B),2),I=z(_);S(_),S(B);var h=N(B,2);S(w),S(v);var p=N(v,2),x=z(p);S(p),S(l),S(g),S(b),pe(()=>{ge(T,`"${t()??""}"`),ge(F,s(i)),ge(I,`From ${s(i)??""} onwards`)}),Te("click",o,d),Te("click",H,()=>u("single")),Te("click",B,()=>u("future")),Te("click",h,()=>u("all")),Te("click",x,d),J(c,b),ct()}var Ps=oe('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Os(c,e){lt(e,!1);const i=ce();let t=ye(e,"eventTitle",8),r=ye(e,"occurrenceDate",8),a=ye(e,"callback",8);function u(k){a()(k)}function d(){a()(null)}Ie(()=>(V(r()),He),()=>{U(i,(()=>{try{const[k,A,M]=r().split("-").map(Number),D=new Date(k,A-1,M);return He(D,"EEEE, MMMM d, yyyy")}catch{return r()}})())}),St(),ut();var b=Ps(),g=z(b),l=z(g),n=z(l),o=N(z(n),2);S(n);var v=N(n,2),f=z(v),E=z(f),T=z(E);S(E),it(),S(f);var w=N(f,4),H=z(w),L=N(z(H),2),F=z(L,!0);S(L),S(H);var B=N(H,2),_=N(z(B),2),I=z(_);S(_),S(B);var h=N(B,2);S(w),S(v);var p=N(v,2),x=z(p);S(p),S(l),S(g),S(b),pe(()=>{ge(T,`"${t()??""}"`),ge(F,s(i)),ge(I,`From ${s(i)??""} onwards`)}),Te("click",o,d),Te("click",H,()=>u("single")),Te("click",B,()=>u("future")),Te("click",h,()=>u("all")),Te("click",x,d),J(c,b),ct()}var Us=oe('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function Ss(c,e){lt(e,!1);let i=ye(e,"title",8,"Clone Event"),t=ye(e,"message",8,"Select a date for the cloned event:"),r=ye(e,"confirmButtonLabel",8,"Clone"),a=ye(e,"confirmButtonCSS",8,"btn-primary"),u=ye(e,"rejectButtonLabel",8,"Cancel"),d=ye(e,"rejectButtonCSS",8,"btn-secondary"),b=ye(e,"defaultDate",8,void 0),g=ye(e,"callback",8,()=>{}),l=ce(),n=ce(b()||He(new Date,"yyyy-MM-dd")),o=!1,v;on(()=>{const y=window.bootstrap.Modal;new y(s(l)).show(),s(l).addEventListener("hidden.bs.modal",()=>{o?g()(!0,v):g()(!1)})});function f(){o=!0,v=s(n),window.bootstrap.Modal.getInstance(s(l)).hide()}function E(){o=!1,window.bootstrap.Modal.getInstance(s(l)).hide()}ut();var T=Us(),w=z(T),H=z(w),L=z(H),F=z(L),B=z(F,!0);S(F),it(2),S(L);var _=N(L,2),I=z(_),h=z(I,!0);S(I);var p=N(I,2),x=N(z(p),2);Je(x),S(p),S(_);var k=N(_,2),A=z(k),M=z(A,!0);S(A);var D=N(A,2),R=z(D,!0);S(D),S(k),S(H),S(w),S(T),Ct(T,y=>U(l,y),()=>s(l)),pe(()=>{ge(B,i()),ge(h,t()),st(A,1,`btn ${d()??""}`),ge(M,u()),st(D,1,`btn ${a()??""}`),ge(R,r())}),wt(x,()=>s(n),y=>U(n,y)),Te("click",A,E),Te("click",D,f),J(c,T),ct()}let Vt;function Ls(c){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const i={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};c.title&&(i.title=c.title),c.message&&(i.message=c.message),c.confirmButtonLabel&&(i.confirmButtonLabel=c.confirmButtonLabel),c.confirmButtonCSS&&(i.confirmButtonCSS=c.confirmButtonCSS),c.rejectButtonLabel&&(i.rejectButtonLabel=c.rejectButtonLabel),c.rejectButtonCSS&&(i.rejectButtonCSS=c.rejectButtonCSS),c.defaultDate&&(i.defaultDate=c.defaultDate),i.callback=(t,r)=>{console.log("Clone confirm result:",t,r),Vt&&(ia(Vt),Vt=void 0),e.remove(),c.callback&&typeof c.callback=="function"&&c.callback(t,r)},Vt=aa(Ss,{target:e,props:i})}const zs=Ra().shape({title:yt().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:yt().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:yt().required("Category is required"),description:yt().nullable().max(1e4,"Description is too long"),location:yt().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:yt().when("event_type",{is:"calendar_event",then:c=>c.required("Date is required"),otherwise:c=>c.nullable()}),startTimeInput:yt().when(["event_type","is_all_day"],{is:(c,e)=>c==="calendar_event"&&!e,then:c=>c.required("Start time is required"),otherwise:c=>c.nullable()}),endTimeInput:yt().when(["event_type","is_all_day"],{is:(c,e)=>c==="calendar_event"&&!e,then:c=>c.required("End time is required"),otherwise:c=>c.nullable()}),isRecurring:Qr(),recurrenceFrequency:yt().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Ca().of(Fa().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(c,e)=>c&&e==="weekly",then:c=>c.min(1,"Select at least one day for weekly recurring events").required(),otherwise:c=>c.nullable()}),hasEndDate:Qr(),recurrenceEndDate:yt().when(["isRecurring","hasEndDate"],{is:(c,e)=>c&&e,then:c=>c.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const i=new Date(e),t=new Date;return t.setHours(0,0,0,0),i>=t}),otherwise:c=>c.nullable()})});function Bs(){const c=Ta({});async function e(r){try{return await zs.validate(r,{abortEarly:!1}),c.set({}),!0}catch(a){if(a instanceof Pa){const u={};return a.inner.forEach(d=>{d.path&&(u[d.path]=d.message)}),c.set(u),!1}return!1}}function i(){c.set({})}function t(){return Object.values(kr(c)).filter(a=>a.length>0)}return{validationErrors:c,validate:e,clearErrors:i,getErrorMessages:t}}function Rr(c){const{frequency:e,interval:i,recurringDays:t,recurrenceEndDate:r,hasEndDate:a,monthlyType:u,startTime:d}=c,b={0:Se.SU,1:Se.MO,2:Se.TU,3:Se.WE,4:Se.TH,5:Se.FR,6:Se.SA},g={daily:Se.DAILY,weekly:Se.WEEKLY,monthly:Se.MONTHLY,yearly:Se.YEARLY},l=new Date(d),n=Rt(l,et),o=new Date(n);o.setHours(12,0,0,0);const v=Ot(o,et),f={freq:g[e],interval:i,dtstart:v};if(a&&r){const T=new Date(`${r}T23:59:59.999`),w=Ot(T,et);f.until=w}if(e==="weekly"&&t.length>0)f.byweekday=t.map(T=>b[T]);else if(e==="monthly")if(u==="date")f.bymonthday=[o.getDate()];else{const T=Math.ceil(o.getDate()/7),w=o.getDay(),H=[Se.SU,Se.MO,Se.TU,Se.WE,Se.TH,Se.FR,Se.SA];f.byweekday=[H[w].nth(T)]}else e==="yearly"&&(f.bymonth=[o.getMonth()+1],f.bymonthday=[o.getDate()]);return{recurrence_rule:new Se(f).toString(),recurrence_end_date:a&&r?f.until.toISOString():void 0}}function vn(c,e){try{const t=Se.fromString(c).origOptions,r={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Se.DAILY]:"daily",[Se.WEEKLY]:"weekly",[Se.MONTHLY]:"monthly",[Se.YEARLY]:"yearly"},u=(t.freq!==void 0?a[t.freq]:null)||"weekly",d=t.interval||1;let b=[],g="date";t.byweekday&&u==="weekly"&&(b=(Array.isArray(t.byweekday)?t.byweekday:[t.byweekday]).map(o=>{const v=typeof o=="number"?o:o.weekday;return r[v]})),u==="monthly"&&(t.bymonthday&&Array.isArray(t.bymonthday)&&t.bymonthday.length>0?g="date":t.byweekday&&(g="weekday"));let l="",n=!1;if(e){n=!0;const o=Rt(new Date(e),et);l=He(o,"yyyy-MM-dd")}else if(t.until){n=!0;const o=Rt(t.until,et);l=He(o,"yyyy-MM-dd")}return{frequency:u,interval:d,recurringDays:b,recurrenceEndDate:l,hasEndDate:n,monthlyType:g}}catch(i){return console.error("Failed to parse recurrence rule:",i),null}}function mn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function hn(){return{generateRecurrenceRule:Rr,parseRecurrenceRule:vn,clearRecurrence:mn}}const Ar=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:mn,generateRecurrenceRule:Rr,parseRecurrenceRule:vn,useRecurrenceLogic:hn},Symbol.toStringTag,{value:"Module"}));function Hs(c,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(t){if(t!=="default"&&!(t in c)){var r=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(c,t,r.get?r:{enumerable:!0,get:function(){return i[t]}})}})}),Object.freeze(c)}function pn(c,e){return new Promise(function(i,t){let r;return qs(c).then(function(a){try{return r=a,i(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(u){return t(u)}},t)})}const qs=c=>new Promise((e,i)=>{const t=new FileReader;t.addEventListener("load",({target:{result:r}})=>{const a=new DataView(r);let u=0;if(a.getUint16(u)!==65496)return i("not a valid JPEG");for(u+=2;;){const d=a.getUint16(u);if(d===65498)break;const b=a.getUint16(u+2);if(d===65505&&a.getUint32(u+4)===1165519206){const g=u+10;let l;switch(a.getUint16(g)){case 18761:l=!0;break;case 19789:l=!1;break;default:return i("TIFF header contains invalid endian")}if(a.getUint16(g+2,l)!==42)return i("TIFF header contains invalid version");const n=a.getUint32(g+4,l),o=g+n+2+12*a.getUint16(g+n,l);for(let v=g+n+2;v<o;v+=12)if(a.getUint16(v,l)==274){if(a.getUint16(v+2,l)!==3)return i("Orientation data type is invalid");if(a.getUint32(v+4,l)!==1)return i("Orientation data count is invalid");a.setUint16(v+8,1,l);break}return e(r.slice(u,u+2+b))}u+=2+b}return e(new Blob)}),t.readAsArrayBuffer(c)});var ar={},Ns={get exports(){return ar},set exports(c){ar=c}};(function(c){var e,i,t={};Ns.exports=t,t.parse=function(r,a){for(var u=t.bin.readUshort,d=t.bin.readUint,b=0,g={},l=new Uint8Array(r),n=l.length-4;d(l,n)!=101010256;)n--;b=n,b+=4;var o=u(l,b+=4);u(l,b+=2);var v=d(l,b+=2),f=d(l,b+=4);b+=4,b=f;for(var E=0;E<o;E++){d(l,b),b+=4,b+=4,b+=4,d(l,b+=4),v=d(l,b+=4);var T=d(l,b+=4),w=u(l,b+=4),H=u(l,b+2),L=u(l,b+4);b+=6;var F=d(l,b+=8);b+=4,b+=w+H+L,t._readLocal(l,F,g,v,T,a)}return g},t._readLocal=function(r,a,u,d,b,g){var l=t.bin.readUshort,n=t.bin.readUint;n(r,a),l(r,a+=4),l(r,a+=2);var o=l(r,a+=2);n(r,a+=2),n(r,a+=4),a+=4;var v=l(r,a+=8),f=l(r,a+=2);a+=2;var E=t.bin.readUTF8(r,a,v);if(a+=v,a+=f,g)u[E]={size:b,csize:d};else{var T=new Uint8Array(r.buffer,a);if(o==0)u[E]=new Uint8Array(T.buffer.slice(a,a+d));else{if(o!=8)throw"unknown compression method: "+o;var w=new Uint8Array(b);t.inflateRaw(T,w),u[E]=w}}},t.inflateRaw=function(r,a){return t.F.inflate(r,a)},t.inflate=function(r,a){return r[0],r[1],t.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),a)},t.deflate=function(r,a){a==null&&(a={level:6});var u=0,d=new Uint8Array(50+Math.floor(1.1*r.length));d[u]=120,d[u+1]=156,u+=2,u=t.F.deflateRaw(r,d,u,a.level);var b=t.adler(r,0,r.length);return d[u+0]=b>>>24&255,d[u+1]=b>>>16&255,d[u+2]=b>>>8&255,d[u+3]=b>>>0&255,new Uint8Array(d.buffer,0,u+4)},t.deflateRaw=function(r,a){a==null&&(a={level:6});var u=new Uint8Array(50+Math.floor(1.1*r.length)),d=t.F.deflateRaw(r,u,d,a.level);return new Uint8Array(u.buffer,0,d)},t.encode=function(r,a){a==null&&(a=!1);var u=0,d=t.bin.writeUint,b=t.bin.writeUshort,g={};for(var l in r){var n=!t._noNeed(l)&&!a,o=r[l],v=t.crc.crc(o,0,o.length);g[l]={cpr:n,usize:o.length,crc:v,file:n?t.deflateRaw(o):o}}for(var l in g)u+=g[l].file.length+30+46+2*t.bin.sizeUTF8(l);u+=22;var f=new Uint8Array(u),E=0,T=[];for(var l in g){var w=g[l];T.push(E),E=t._writeHeader(f,E,l,w,0)}var H=0,L=E;for(var l in g)w=g[l],T.push(E),E=t._writeHeader(f,E,l,w,1,T[H++]);var F=E-L;return d(f,E,101010256),E+=4,b(f,E+=4,H),b(f,E+=2,H),d(f,E+=2,F),d(f,E+=4,L),E+=4,E+=2,f.buffer},t._noNeed=function(r){var a=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},t._writeHeader=function(r,a,u,d,b,g){var l=t.bin.writeUint,n=t.bin.writeUshort,o=d.file;return l(r,a,b==0?67324752:33639248),a+=4,b==1&&(a+=2),n(r,a,20),n(r,a+=2,0),n(r,a+=2,d.cpr?8:0),l(r,a+=2,0),l(r,a+=4,d.crc),l(r,a+=4,o.length),l(r,a+=4,d.usize),n(r,a+=4,t.bin.sizeUTF8(u)),n(r,a+=2,0),a+=2,b==1&&(a+=2,a+=2,l(r,a+=6,g),a+=4),a+=t.bin.writeUTF8(r,a,u),b==0&&(r.set(o,a),a+=o.length),a},t.crc={table:function(){for(var r=new Uint32Array(256),a=0;a<256;a++){for(var u=a,d=0;d<8;d++)1&u?u=3988292384^u>>>1:u>>>=1;r[a]=u}return r}(),update:function(r,a,u,d){for(var b=0;b<d;b++)r=t.crc.table[255&(r^a[u+b])]^r>>>8;return r},crc:function(r,a,u){return 4294967295^t.crc.update(4294967295,r,a,u)}},t.adler=function(r,a,u){for(var d=1,b=0,g=a,l=a+u;g<l;){for(var n=Math.min(g+5552,l);g<n;)b+=d+=r[g++];d%=65521,b%=65521}return b<<16|d},t.bin={readUshort:function(r,a){return r[a]|r[a+1]<<8},writeUshort:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255},readUint:function(r,a){return 16777216*r[a+3]+(r[a+2]<<16|r[a+1]<<8|r[a])},writeUint:function(r,a,u){r[a]=255&u,r[a+1]=u>>8&255,r[a+2]=u>>16&255,r[a+3]=u>>24&255},readASCII:function(r,a,u){for(var d="",b=0;b<u;b++)d+=String.fromCharCode(r[a+b]);return d},writeASCII:function(r,a,u){for(var d=0;d<u.length;d++)r[a+d]=u.charCodeAt(d)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,a,u){for(var d,b="",g=0;g<u;g++)b+="%"+t.bin.pad(r[a+g].toString(16));try{d=decodeURIComponent(b)}catch{return t.bin.readASCII(r,a,u)}return d},writeUTF8:function(r,a,u){for(var d=u.length,b=0,g=0;g<d;g++){var l=u.charCodeAt(g);if(!(4294967168&l))r[a+b]=l,b++;else if(!(4294965248&l))r[a+b]=192|l>>6,r[a+b+1]=128|l>>0&63,b+=2;else if(!(4294901760&l))r[a+b]=224|l>>12,r[a+b+1]=128|l>>6&63,r[a+b+2]=128|l>>0&63,b+=3;else{if(4292870144&l)throw"e";r[a+b]=240|l>>18,r[a+b+1]=128|l>>12&63,r[a+b+2]=128|l>>6&63,r[a+b+3]=128|l>>0&63,b+=4}}return b},sizeUTF8:function(r){for(var a=r.length,u=0,d=0;d<a;d++){var b=r.charCodeAt(d);if(!(4294967168&b))u++;else if(!(4294965248&b))u+=2;else if(!(4294901760&b))u+=3;else{if(4292870144&b)throw"e";u+=4}}return u}},t.F={},t.F.deflateRaw=function(r,a,u,d){var b=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][d],g=t.F.U,l=t.F._goodIndex;t.F._hash;var n=t.F._putsE,o=0,v=u<<3,f=0,E=r.length;if(d==0){for(;o<E;)n(a,v,o+(k=Math.min(65535,E-o))==E?1:0),v=t.F._copyExact(r,o,k,a,v+8),o+=k;return v>>>3}var T=g.lits,w=g.strt,H=g.prev,L=0,F=0,B=0,_=0,I=0,h=0;for(E>2&&(w[h=t.F._hash(r,0)]=0),o=0;o<E;o++){if(I=h,o+1<E-2){h=t.F._hash(r,o+1);var p=o+1&32767;H[p]=w[h],w[h]=p}if(f<=o){(L>14e3||F>26697)&&E-o>100&&(f<o&&(T[L]=o-f,L+=2,f=o),v=t.F._writeBlock(o==E-1||f==E?1:0,T,L,_,r,B,o-B,a,v),L=F=_=0,B=o);var x=0;o<E-2&&(x=t.F._bestMatch(r,o,H,I,Math.min(b[2],E-o),b[3]));var k=x>>>16,A=65535&x;if(x!=0){A=65535&x;var M=l(k=x>>>16,g.of0);g.lhst[257+M]++;var D=l(A,g.df0);g.dhst[D]++,_+=g.exb[M]+g.dxb[D],T[L]=k<<23|o-f,T[L+1]=A<<16|M<<8|D,L+=2,f=o+k}else g.lhst[r[o]]++;F++}}for(B==o&&r.length!=0||(f<o&&(T[L]=o-f,L+=2,f=o),v=t.F._writeBlock(1,T,L,_,r,B,o-B,a,v),L=0,F=0,L=F=_=0,B=o);7&v;)v++;return v>>>3},t.F._bestMatch=function(r,a,u,d,b,g){var l=32767&a,n=u[l],o=l-n+32768&32767;if(n==l||d!=t.F._hash(r,a-o))return 0;for(var v=0,f=0,E=Math.min(32767,a);o<=E&&--g!=0&&n!=l;){if(v==0||r[a+v]==r[a+v-o]){var T=t.F._howLong(r,a,o);if(T>v){if(f=o,(v=T)>=b)break;o+2<T&&(T=o+2);for(var w=0,H=0;H<T-2;H++){var L=a-o+H+32768&32767,F=L-u[L]+32768&32767;F>w&&(w=F,n=L)}}}o+=(l=n)-(n=u[l])+32768&32767}return v<<16|f},t.F._howLong=function(r,a,u){if(r[a]!=r[a-u]||r[a+1]!=r[a+1-u]||r[a+2]!=r[a+2-u])return 0;var d=a,b=Math.min(r.length,a+258);for(a+=3;a<b&&r[a]==r[a-u];)a++;return a-d},t.F._hash=function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<4)&65535},t.saved=0,t.F._writeBlock=function(r,a,u,d,b,g,l,n,o){var v,f,E,T,w,H,L,F,B,_=t.F.U,I=t.F._putsF,h=t.F._putsE;_.lhst[256]++,f=(v=t.F.getTrees())[0],E=v[1],T=v[2],w=v[3],H=v[4],L=v[5],F=v[6],B=v[7];var p=32+(o+3&7?8-(o+3&7):0)+(l<<3),x=d+t.F.contSize(_.fltree,_.lhst)+t.F.contSize(_.fdtree,_.dhst),k=d+t.F.contSize(_.ltree,_.lhst)+t.F.contSize(_.dtree,_.dhst);k+=14+3*L+t.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var A=0;A<286;A++)_.lhst[A]=0;for(A=0;A<30;A++)_.dhst[A]=0;for(A=0;A<19;A++)_.ihst[A]=0;var M=p<x&&p<k?0:x<k?1:2;if(I(n,o,r),I(n,o+1,M),o+=3,M==0){for(;7&o;)o++;o=t.F._copyExact(b,g,l,n,o)}else{var D,R;if(M==1&&(D=_.fltree,R=_.fdtree),M==2){t.F.makeCodes(_.ltree,f),t.F.revCodes(_.ltree,f),t.F.makeCodes(_.dtree,E),t.F.revCodes(_.dtree,E),t.F.makeCodes(_.itree,T),t.F.revCodes(_.itree,T),D=_.ltree,R=_.dtree,h(n,o,w-257),h(n,o+=5,H-1),h(n,o+=5,L-4),o+=4;for(var y=0;y<L;y++)h(n,o+3*y,_.itree[1+(_.ordr[y]<<1)]);o+=3*L,o=t.F._codeTiny(F,_.itree,n,o),o=t.F._codeTiny(B,_.itree,n,o)}for(var m=g,Y=0;Y<u;Y+=2){for(var C=a[Y],O=C>>>23,G=m+(8388607&C);m<G;)o=t.F._writeLit(b[m++],D,n,o);if(O!=0){var Q=a[Y+1],W=Q>>16,q=Q>>8&255,P=255&Q;h(n,o=t.F._writeLit(257+q,D,n,o),O-_.of0[q]),o+=_.exb[q],I(n,o=t.F._writeLit(P,R,n,o),W-_.df0[P]),o+=_.dxb[P],m+=O}}o=t.F._writeLit(256,D,n,o)}return o},t.F._copyExact=function(r,a,u,d,b){var g=b>>>3;return d[g]=u,d[g+1]=u>>>8,d[g+2]=255-d[g],d[g+3]=255-d[g+1],g+=4,d.set(new Uint8Array(r.buffer,a,u),g),b+(u+4<<3)},t.F.getTrees=function(){for(var r=t.F.U,a=t.F._hufTree(r.lhst,r.ltree,15),u=t.F._hufTree(r.dhst,r.dtree,15),d=[],b=t.F._lenCodes(r.ltree,d),g=[],l=t.F._lenCodes(r.dtree,g),n=0;n<d.length;n+=2)r.ihst[d[n]]++;for(n=0;n<g.length;n+=2)r.ihst[g[n]]++;for(var o=t.F._hufTree(r.ihst,r.itree,7),v=19;v>4&&r.itree[1+(r.ordr[v-1]<<1)]==0;)v--;return[a,u,o,b,l,v,d,g]},t.F.getSecond=function(r){for(var a=[],u=0;u<r.length;u+=2)a.push(r[u+1]);return a},t.F.nonZero=function(r){for(var a="",u=0;u<r.length;u+=2)r[u+1]!=0&&(a+=(u>>1)+",");return a},t.F.contSize=function(r,a){for(var u=0,d=0;d<a.length;d++)u+=a[d]*r[1+(d<<1)];return u},t.F._codeTiny=function(r,a,u,d){for(var b=0;b<r.length;b+=2){var g=r[b],l=r[b+1];d=t.F._writeLit(g,a,u,d);var n=g==16?2:g==17?3:7;g>15&&(t.F._putsE(u,d,l,n),d+=n)}return d},t.F._lenCodes=function(r,a){for(var u=r.length;u!=2&&r[u-1]==0;)u-=2;for(var d=0;d<u;d+=2){var b=r[d+1],g=d+3<u?r[d+3]:-1,l=d+5<u?r[d+5]:-1,n=d==0?-1:r[d-1];if(b==0&&g==b&&l==b){for(var o=d+5;o+2<u&&r[o+2]==b;)o+=2;(v=Math.min(o+1-d>>>1,138))<11?a.push(17,v-3):a.push(18,v-11),d+=2*v-2}else if(b==n&&g==b&&l==b){for(o=d+5;o+2<u&&r[o+2]==b;)o+=2;var v=Math.min(o+1-d>>>1,6);a.push(16,v-3),d+=2*v-2}else a.push(b,0)}return u>>>1},t.F._hufTree=function(r,a,u){var d=[],b=r.length,g=a.length,l=0;for(l=0;l<g;l+=2)a[l]=0,a[l+1]=0;for(l=0;l<b;l++)r[l]!=0&&d.push({lit:l,f:r[l]});var n=d.length,o=d.slice(0);if(n==0)return 0;if(n==1){var v=d[0].lit;return o=v==0?1:0,a[1+(v<<1)]=1,a[1+(o<<1)]=1,1}d.sort(function(F,B){return F.f-B.f});var f=d[0],E=d[1],T=0,w=1,H=2;for(d[0]={lit:-1,f:f.f+E.f,l:f,r:E,d:0};w!=n-1;)f=T!=w&&(H==n||d[T].f<d[H].f)?d[T++]:d[H++],E=T!=w&&(H==n||d[T].f<d[H].f)?d[T++]:d[H++],d[w++]={lit:-1,f:f.f+E.f,l:f,r:E};var L=t.F.setDepth(d[w-1],0);for(L>u&&(t.F.restrictDepth(o,u,L),L=u),l=0;l<n;l++)a[1+(o[l].lit<<1)]=o[l].d;return L},t.F.setDepth=function(r,a){return r.lit!=-1?(r.d=a,a):Math.max(t.F.setDepth(r.l,a+1),t.F.setDepth(r.r,a+1))},t.F.restrictDepth=function(r,a,u){var d=0,b=1<<u-a,g=0;for(r.sort(function(n,o){return o.d==n.d?n.f-o.f:o.d-n.d}),d=0;d<r.length&&r[d].d>a;d++){var l=r[d].d;r[d].d=a,g+=b-(1<<u-l)}for(g>>>=u-a;g>0;)(l=r[d].d)<a?(r[d].d++,g-=1<<a-l-1):d++;for(;d>=0;d--)r[d].d==a&&g<0&&(r[d].d--,g++);g!=0&&console.log("debt left")},t.F._goodIndex=function(r,a){var u=0;return a[16|u]<=r&&(u|=16),a[8|u]<=r&&(u|=8),a[4|u]<=r&&(u|=4),a[2|u]<=r&&(u|=2),a[1|u]<=r&&(u|=1),u},t.F._writeLit=function(r,a,u,d){return t.F._putsF(u,d,a[r<<1]),d+a[1+(r<<1)]},t.F.inflate=function(r,a){var u=Uint8Array;if(r[0]==3&&r[1]==0)return a||new u(0);var d=t.F,b=d._bitsF,g=d._bitsE,l=d._decodeTiny,n=d.makeCodes,o=d.codes2map,v=d._get17,f=d.U,E=a==null;E&&(a=new u(r.length>>>2<<3));for(var T,w,H=0,L=0,F=0,B=0,_=0,I=0,h=0,p=0,x=0;H==0;)if(H=b(r,x,1),L=b(r,x+1,2),x+=3,L!=0){if(E&&(a=t.F._check(a,p+(1<<17))),L==1&&(T=f.flmap,w=f.fdmap,I=511,h=31),L==2){F=g(r,x,5)+257,B=g(r,x+5,5)+1,_=g(r,x+10,4)+4,x+=14;for(var k=0;k<38;k+=2)f.itree[k]=0,f.itree[k+1]=0;var A=1;for(k=0;k<_;k++){var M=g(r,x+3*k,3);f.itree[1+(f.ordr[k]<<1)]=M,M>A&&(A=M)}x+=3*_,n(f.itree,A),o(f.itree,A,f.imap),T=f.lmap,w=f.dmap,x=l(f.imap,(1<<A)-1,F+B,r,x,f.ttree);var D=d._copyOut(f.ttree,0,F,f.ltree);I=(1<<D)-1;var R=d._copyOut(f.ttree,F,B,f.dtree);h=(1<<R)-1,n(f.ltree,D),o(f.ltree,D,T),n(f.dtree,R),o(f.dtree,R,w)}for(;;){var y=T[v(r,x)&I];x+=15&y;var m=y>>>4;if(!(m>>>8))a[p++]=m;else{if(m==256)break;var Y=p+m-254;if(m>264){var C=f.ldef[m-257];Y=p+(C>>>3)+g(r,x,7&C),x+=7&C}var O=w[v(r,x)&h];x+=15&O;var G=O>>>4,Q=f.ddef[G],W=(Q>>>4)+b(r,x,15&Q);for(x+=15&Q,E&&(a=t.F._check(a,p+(1<<17)));p<Y;)a[p]=a[p++-W],a[p]=a[p++-W],a[p]=a[p++-W],a[p]=a[p++-W];p=Y}}}else{7&x&&(x+=8-(7&x));var q=4+(x>>>3),P=r[q-4]|r[q-3]<<8;E&&(a=t.F._check(a,p+P)),a.set(new u(r.buffer,r.byteOffset+q,P),p),x=q+P<<3,p+=P}return a.length==p?a:a.slice(0,p)},t.F._check=function(r,a){var u=r.length;if(a<=u)return r;var d=new Uint8Array(Math.max(u<<1,a));return d.set(r,0),d},t.F._decodeTiny=function(r,a,u,d,b,g){for(var l=t.F._bitsE,n=t.F._get17,o=0;o<u;){var v=r[n(d,b)&a];b+=15&v;var f=v>>>4;if(f<=15)g[o]=f,o++;else{var E=0,T=0;f==16?(T=3+l(d,b,2),b+=2,E=g[o-1]):f==17?(T=3+l(d,b,3),b+=3):f==18&&(T=11+l(d,b,7),b+=7);for(var w=o+T;o<w;)g[o]=E,o++}}return b},t.F._copyOut=function(r,a,u,d){for(var b=0,g=0,l=d.length>>>1;g<u;){var n=r[g+a];d[g<<1]=0,d[1+(g<<1)]=n,n>b&&(b=n),g++}for(;g<l;)d[g<<1]=0,d[1+(g<<1)]=0,g++;return b},t.F.makeCodes=function(r,a){for(var u,d,b,g,l=t.F.U,n=r.length,o=l.bl_count,v=0;v<=a;v++)o[v]=0;for(v=1;v<n;v+=2)o[r[v]]++;var f=l.next_code;for(u=0,o[0]=0,d=1;d<=a;d++)u=u+o[d-1]<<1,f[d]=u;for(b=0;b<n;b+=2)(g=r[b+1])!=0&&(r[b]=f[g],f[g]++)},t.F.codes2map=function(r,a,u){for(var d=r.length,b=t.F.U.rev15,g=0;g<d;g+=2)if(r[g+1]!=0)for(var l=g>>1,n=r[g+1],o=l<<4|n,v=a-n,f=r[g]<<v,E=f+(1<<v);f!=E;)u[b[f]>>>15-a]=o,f++},t.F.revCodes=function(r,a){for(var u=t.F.U.rev15,d=15-a,b=0;b<r.length;b+=2){var g=r[b]<<a-r[b+1];r[b]=u[g]>>>d}},t.F._putsE=function(r,a,u){u<<=7&a;var d=a>>>3;r[d]|=u,r[d+1]|=u>>>8},t.F._putsF=function(r,a,u){u<<=7&a;var d=a>>>3;r[d]|=u,r[d+1]|=u>>>8,r[d+2]|=u>>>16},t.F._bitsE=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8)>>>(7&a)&(1<<u)-1},t.F._bitsF=function(r,a,u){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)&(1<<u)-1},t.F._get17=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)},t.F._get25=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16|r[3+(a>>>3)]<<24)>>>(7&a)},t.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=t.F.U,a=0;a<32768;a++){var u=a;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,r.rev15[a]=(u>>>16|u<<16)>>>17}function d(b,g,l){for(;g--!=0;)b.push(0,l)}for(a=0;a<32;a++)r.ldef[a]=r.of0[a]<<3|r.exb[a],r.ddef[a]=r.df0[a]<<4|r.dxb[a];d(r.fltree,144,8),d(r.fltree,112,9),d(r.fltree,24,7),d(r.fltree,8,8),t.F.makeCodes(r.fltree,9),t.F.codes2map(r.fltree,9,r.flmap),t.F.revCodes(r.fltree,9),d(r.fdtree,32,5),t.F.makeCodes(r.fdtree,5),t.F.codes2map(r.fdtree,5,r.fdmap),t.F.revCodes(r.fdtree,5),d(r.itree,19,0),d(r.ltree,286,0),d(r.dtree,30,0),d(r.ttree,320,0)}()})();var Ys=Hs({__proto__:null,default:ar},[ar]);const dt=function(){var c={nextZero(l,n){for(;l[n]!=0;)n++;return n},readUshort:(l,n)=>l[n]<<8|l[n+1],writeUshort(l,n,o){l[n]=o>>8&255,l[n+1]=255&o},readUint:(l,n)=>16777216*l[n]+(l[n+1]<<16|l[n+2]<<8|l[n+3]),writeUint(l,n,o){l[n]=o>>24&255,l[n+1]=o>>16&255,l[n+2]=o>>8&255,l[n+3]=255&o},readASCII(l,n,o){let v="";for(let f=0;f<o;f++)v+=String.fromCharCode(l[n+f]);return v},writeASCII(l,n,o){for(let v=0;v<o.length;v++)l[n+v]=o.charCodeAt(v)},readBytes(l,n,o){const v=[];for(let f=0;f<o;f++)v.push(l[n+f]);return v},pad:l=>l.length<2?`0${l}`:l,readUTF8(l,n,o){let v,f="";for(let E=0;E<o;E++)f+=`%${c.pad(l[n+E].toString(16))}`;try{v=decodeURIComponent(f)}catch{return c.readASCII(l,n,o)}return v}};function e(l,n,o,v){const f=n*o,E=a(v),T=Math.ceil(n*E/8),w=new Uint8Array(4*f),H=new Uint32Array(w.buffer),{ctype:L}=v,{depth:F}=v,B=c.readUshort;if(L==6){const C=f<<2;if(F==8)for(var _=0;_<C;_+=4)w[_]=l[_],w[_+1]=l[_+1],w[_+2]=l[_+2],w[_+3]=l[_+3];if(F==16)for(_=0;_<C;_++)w[_]=l[_<<1]}else if(L==2){const C=v.tabs.tRNS;if(C==null){if(F==8)for(_=0;_<f;_++){var I=3*_;H[_]=255<<24|l[I+2]<<16|l[I+1]<<8|l[I]}if(F==16)for(_=0;_<f;_++)I=6*_,H[_]=255<<24|l[I+4]<<16|l[I+2]<<8|l[I]}else{var h=C[0];const O=C[1],G=C[2];if(F==8)for(_=0;_<f;_++){var p=_<<2;I=3*_,H[_]=255<<24|l[I+2]<<16|l[I+1]<<8|l[I],l[I]==h&&l[I+1]==O&&l[I+2]==G&&(w[p+3]=0)}if(F==16)for(_=0;_<f;_++)p=_<<2,I=6*_,H[_]=255<<24|l[I+4]<<16|l[I+2]<<8|l[I],B(l,I)==h&&B(l,I+2)==O&&B(l,I+4)==G&&(w[p+3]=0)}}else if(L==3){const C=v.tabs.PLTE,O=v.tabs.tRNS,G=O?O.length:0;if(F==1)for(var x=0;x<o;x++){var k=x*T,A=x*n;for(_=0;_<n;_++){p=A+_<<2;var M=3*(D=l[k+(_>>3)]>>7-((7&_)<<0)&1);w[p]=C[M],w[p+1]=C[M+1],w[p+2]=C[M+2],w[p+3]=D<G?O[D]:255}}if(F==2)for(x=0;x<o;x++)for(k=x*T,A=x*n,_=0;_<n;_++)p=A+_<<2,M=3*(D=l[k+(_>>2)]>>6-((3&_)<<1)&3),w[p]=C[M],w[p+1]=C[M+1],w[p+2]=C[M+2],w[p+3]=D<G?O[D]:255;if(F==4)for(x=0;x<o;x++)for(k=x*T,A=x*n,_=0;_<n;_++)p=A+_<<2,M=3*(D=l[k+(_>>1)]>>4-((1&_)<<2)&15),w[p]=C[M],w[p+1]=C[M+1],w[p+2]=C[M+2],w[p+3]=D<G?O[D]:255;if(F==8)for(_=0;_<f;_++){var D;p=_<<2,M=3*(D=l[_]),w[p]=C[M],w[p+1]=C[M+1],w[p+2]=C[M+2],w[p+3]=D<G?O[D]:255}}else if(L==4){if(F==8)for(_=0;_<f;_++){p=_<<2;var R=l[y=_<<1];w[p]=R,w[p+1]=R,w[p+2]=R,w[p+3]=l[y+1]}if(F==16)for(_=0;_<f;_++){var y;p=_<<2,R=l[y=_<<2],w[p]=R,w[p+1]=R,w[p+2]=R,w[p+3]=l[y+2]}}else if(L==0)for(h=v.tabs.tRNS?v.tabs.tRNS:-1,x=0;x<o;x++){const C=x*T,O=x*n;if(F==1)for(var m=0;m<n;m++){var Y=(R=255*(l[C+(m>>>3)]>>>7-(7&m)&1))==255*h?0:255;H[O+m]=Y<<24|R<<16|R<<8|R}else if(F==2)for(m=0;m<n;m++)Y=(R=85*(l[C+(m>>>2)]>>>6-((3&m)<<1)&3))==85*h?0:255,H[O+m]=Y<<24|R<<16|R<<8|R;else if(F==4)for(m=0;m<n;m++)Y=(R=17*(l[C+(m>>>1)]>>>4-((1&m)<<2)&15))==17*h?0:255,H[O+m]=Y<<24|R<<16|R<<8|R;else if(F==8)for(m=0;m<n;m++)Y=(R=l[C+m])==h?0:255,H[O+m]=Y<<24|R<<16|R<<8|R;else if(F==16)for(m=0;m<n;m++)R=l[C+(m<<1)],Y=B(l,C+(m<<1))==h?0:255,H[O+m]=Y<<24|R<<16|R<<8|R}return w}function i(l,n,o,v){const f=a(l),E=Math.ceil(o*f/8),T=new Uint8Array((E+1+l.interlace)*v);return n=l.tabs.CgBI?r(n,T):t(n,T),l.interlace==0?n=u(n,l,0,o,v):l.interlace==1&&(n=function(H,L){const F=L.width,B=L.height,_=a(L),I=_>>3,h=Math.ceil(F*_/8),p=new Uint8Array(B*h);let x=0;const k=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],M=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let R=0;for(;R<7;){const m=M[R],Y=D[R];let C=0,O=0,G=k[R];for(;G<B;)G+=m,O++;let Q=A[R];for(;Q<F;)Q+=Y,C++;const W=Math.ceil(C*_/8);u(H,L,x,C,O);let q=0,P=k[R];for(;P<B;){let ee=A[R],ue=x+q*W<<3;for(;ee<F;){var y;if(_==1&&(y=(y=H[ue>>3])>>7-(7&ue)&1,p[P*h+(ee>>3)]|=y<<7-((7&ee)<<0)),_==2&&(y=(y=H[ue>>3])>>6-(7&ue)&3,p[P*h+(ee>>2)]|=y<<6-((3&ee)<<1)),_==4&&(y=(y=H[ue>>3])>>4-(7&ue)&15,p[P*h+(ee>>1)]|=y<<4-((1&ee)<<2)),_>=8){const he=P*h+ee*I;for(let fe=0;fe<I;fe++)p[he+fe]=H[(ue>>3)+fe]}ue+=_,ee+=Y}q++,P+=m}C*O!=0&&(x+=O*(1+W)),R+=1}return p}(n,l)),n}function t(l,n){return r(new Uint8Array(l.buffer,2,l.length-6),n)}var r=function(){const l={H:{}};return l.H.N=function(n,o){const v=Uint8Array;let f,E,T=0,w=0,H=0,L=0,F=0,B=0,_=0,I=0,h=0;if(n[0]==3&&n[1]==0)return o||new v(0);const p=l.H,x=p.b,k=p.e,A=p.R,M=p.n,D=p.A,R=p.Z,y=p.m,m=o==null;for(m&&(o=new v(n.length>>>2<<5));T==0;)if(T=x(n,h,1),w=x(n,h+1,2),h+=3,w!=0){if(m&&(o=l.H.W(o,I+(1<<17))),w==1&&(f=y.J,E=y.h,B=511,_=31),w==2){H=k(n,h,5)+257,L=k(n,h+5,5)+1,F=k(n,h+10,4)+4,h+=14;let C=1;for(var Y=0;Y<38;Y+=2)y.Q[Y]=0,y.Q[Y+1]=0;for(Y=0;Y<F;Y++){const Q=k(n,h+3*Y,3);y.Q[1+(y.X[Y]<<1)]=Q,Q>C&&(C=Q)}h+=3*F,M(y.Q,C),D(y.Q,C,y.u),f=y.w,E=y.d,h=A(y.u,(1<<C)-1,H+L,n,h,y.v);const O=p.V(y.v,0,H,y.C);B=(1<<O)-1;const G=p.V(y.v,H,L,y.D);_=(1<<G)-1,M(y.C,O),D(y.C,O,f),M(y.D,G),D(y.D,G,E)}for(;;){const C=f[R(n,h)&B];h+=15&C;const O=C>>>4;if(!(O>>>8))o[I++]=O;else{if(O==256)break;{let G=I+O-254;if(O>264){const ee=y.q[O-257];G=I+(ee>>>3)+k(n,h,7&ee),h+=7&ee}const Q=E[R(n,h)&_];h+=15&Q;const W=Q>>>4,q=y.c[W],P=(q>>>4)+x(n,h,15&q);for(h+=15&q;I<G;)o[I]=o[I++-P],o[I]=o[I++-P],o[I]=o[I++-P],o[I]=o[I++-P];I=G}}}}else{7&h&&(h+=8-(7&h));const C=4+(h>>>3),O=n[C-4]|n[C-3]<<8;m&&(o=l.H.W(o,I+O)),o.set(new v(n.buffer,n.byteOffset+C,O),I),h=C+O<<3,I+=O}return o.length==I?o:o.slice(0,I)},l.H.W=function(n,o){const v=n.length;if(o<=v)return n;const f=new Uint8Array(v<<1);return f.set(n,0),f},l.H.R=function(n,o,v,f,E,T){const w=l.H.e,H=l.H.Z;let L=0;for(;L<v;){const F=n[H(f,E)&o];E+=15&F;const B=F>>>4;if(B<=15)T[L]=B,L++;else{let _=0,I=0;B==16?(I=3+w(f,E,2),E+=2,_=T[L-1]):B==17?(I=3+w(f,E,3),E+=3):B==18&&(I=11+w(f,E,7),E+=7);const h=L+I;for(;L<h;)T[L]=_,L++}}return E},l.H.V=function(n,o,v,f){let E=0,T=0;const w=f.length>>>1;for(;T<v;){const H=n[T+o];f[T<<1]=0,f[1+(T<<1)]=H,H>E&&(E=H),T++}for(;T<w;)f[T<<1]=0,f[1+(T<<1)]=0,T++;return E},l.H.n=function(n,o){const v=l.H.m,f=n.length;let E,T,w,H;const L=v.j;for(var F=0;F<=o;F++)L[F]=0;for(F=1;F<f;F+=2)L[n[F]]++;const B=v.K;for(E=0,L[0]=0,T=1;T<=o;T++)E=E+L[T-1]<<1,B[T]=E;for(w=0;w<f;w+=2)H=n[w+1],H!=0&&(n[w]=B[H],B[H]++)},l.H.A=function(n,o,v){const f=n.length,E=l.H.m.r;for(let T=0;T<f;T+=2)if(n[T+1]!=0){const w=T>>1,H=n[T+1],L=w<<4|H,F=o-H;let B=n[T]<<F;const _=B+(1<<F);for(;B!=_;)v[E[B]>>>15-o]=L,B++}},l.H.l=function(n,o){const v=l.H.m.r,f=15-o;for(let E=0;E<n.length;E+=2){const T=n[E]<<o-n[E+1];n[E]=v[T]>>>f}},l.H.M=function(n,o,v){v<<=7&o;const f=o>>>3;n[f]|=v,n[f+1]|=v>>>8},l.H.I=function(n,o,v){v<<=7&o;const f=o>>>3;n[f]|=v,n[f+1]|=v>>>8,n[f+2]|=v>>>16},l.H.e=function(n,o,v){return(n[o>>>3]|n[1+(o>>>3)]<<8)>>>(7&o)&(1<<v)-1},l.H.b=function(n,o,v){return(n[o>>>3]|n[1+(o>>>3)]<<8|n[2+(o>>>3)]<<16)>>>(7&o)&(1<<v)-1},l.H.Z=function(n,o){return(n[o>>>3]|n[1+(o>>>3)]<<8|n[2+(o>>>3)]<<16)>>>(7&o)},l.H.i=function(n,o){return(n[o>>>3]|n[1+(o>>>3)]<<8|n[2+(o>>>3)]<<16|n[3+(o>>>3)]<<24)>>>(7&o)},l.H.m=function(){const n=Uint16Array,o=Uint32Array;return{K:new n(16),j:new n(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new n(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new o(32),J:new n(512),_:[],h:new n(32),$:[],w:new n(32768),C:[],v:[],d:new n(32768),D:[],u:new n(512),Q:[],r:new n(32768),s:new o(286),Y:new o(30),a:new o(19),t:new o(15e3),k:new n(65536),g:new n(32768)}}(),function(){const n=l.H.m;for(var o=0;o<32768;o++){let f=o;f=(2863311530&f)>>>1|(1431655765&f)<<1,f=(3435973836&f)>>>2|(858993459&f)<<2,f=(4042322160&f)>>>4|(252645135&f)<<4,f=(4278255360&f)>>>8|(16711935&f)<<8,n.r[o]=(f>>>16|f<<16)>>>17}function v(f,E,T){for(;E--!=0;)f.push(0,T)}for(o=0;o<32;o++)n.q[o]=n.S[o]<<3|n.T[o],n.c[o]=n.p[o]<<4|n.z[o];v(n._,144,8),v(n._,112,9),v(n._,24,7),v(n._,8,8),l.H.n(n._,9),l.H.A(n._,9,n.J),l.H.l(n._,9),v(n.$,32,5),l.H.n(n.$,5),l.H.A(n.$,5,n.h),l.H.l(n.$,5),v(n.Q,19,0),v(n.C,286,0),v(n.D,30,0),v(n.v,320,0)}(),l.H.N}();function a(l){return[1,null,3,1,2,null,4][l.ctype]*l.depth}function u(l,n,o,v,f){let E=a(n);const T=Math.ceil(v*E/8);let w,H;E=Math.ceil(E/8);let L=l[o],F=0;if(L>1&&(l[o]=[0,0,1][L-2]),L==3)for(F=E;F<T;F++)l[F+1]=l[F+1]+(l[F+1-E]>>>1)&255;for(let B=0;B<f;B++)if(w=o+B*T,H=w+B+1,L=l[H-1],F=0,L==0)for(;F<T;F++)l[w+F]=l[H+F];else if(L==1){for(;F<E;F++)l[w+F]=l[H+F];for(;F<T;F++)l[w+F]=l[H+F]+l[w+F-E]}else if(L==2)for(;F<T;F++)l[w+F]=l[H+F]+l[w+F-T];else if(L==3){for(;F<E;F++)l[w+F]=l[H+F]+(l[w+F-T]>>>1);for(;F<T;F++)l[w+F]=l[H+F]+(l[w+F-T]+l[w+F-E]>>>1)}else{for(;F<E;F++)l[w+F]=l[H+F]+d(0,l[w+F-T],0);for(;F<T;F++)l[w+F]=l[H+F]+d(l[w+F-E],l[w+F-T],l[w+F-E-T])}return l}function d(l,n,o){const v=l+n-o,f=v-l,E=v-n,T=v-o;return f*f<=E*E&&f*f<=T*T?l:E*E<=T*T?n:o}function b(l,n,o){o.width=c.readUint(l,n),n+=4,o.height=c.readUint(l,n),n+=4,o.depth=l[n],n++,o.ctype=l[n],n++,o.compress=l[n],n++,o.filter=l[n],n++,o.interlace=l[n],n++}function g(l,n,o,v,f,E,T,w,H){const L=Math.min(n,f),F=Math.min(o,E);let B=0,_=0;for(let R=0;R<F;R++)for(let y=0;y<L;y++)if(T>=0&&w>=0?(B=R*n+y<<2,_=(w+R)*f+T+y<<2):(B=(-w+R)*n-T+y<<2,_=R*f+y<<2),H==0)v[_]=l[B],v[_+1]=l[B+1],v[_+2]=l[B+2],v[_+3]=l[B+3];else if(H==1){var I=l[B+3]*.00392156862745098,h=l[B]*I,p=l[B+1]*I,x=l[B+2]*I,k=v[_+3]*(1/255),A=v[_]*k,M=v[_+1]*k,D=v[_+2]*k;const m=1-I,Y=I+k*m,C=Y==0?0:1/Y;v[_+3]=255*Y,v[_+0]=(h+A*m)*C,v[_+1]=(p+M*m)*C,v[_+2]=(x+D*m)*C}else if(H==2)I=l[B+3],h=l[B],p=l[B+1],x=l[B+2],k=v[_+3],A=v[_],M=v[_+1],D=v[_+2],I==k&&h==A&&p==M&&x==D?(v[_]=0,v[_+1]=0,v[_+2]=0,v[_+3]=0):(v[_]=h,v[_+1]=p,v[_+2]=x,v[_+3]=I);else if(H==3){if(I=l[B+3],h=l[B],p=l[B+1],x=l[B+2],k=v[_+3],A=v[_],M=v[_+1],D=v[_+2],I==k&&h==A&&p==M&&x==D)continue;if(I<220&&k>20)return!1}return!0}return{decode:function(n){const o=new Uint8Array(n);let v=8;const f=c,E=f.readUshort,T=f.readUint,w={tabs:{},frames:[]},H=new Uint8Array(o.length);let L,F=0,B=0;const _=[137,80,78,71,13,10,26,10];for(var I=0;I<8;I++)if(o[I]!=_[I])throw"The input is not a PNG file!";for(;v<o.length;){const R=f.readUint(o,v);v+=4;const y=f.readASCII(o,v,4);if(v+=4,y=="IHDR")b(o,v,w);else if(y=="iCCP"){for(var h=v;o[h]!=0;)h++;f.readASCII(o,v,h-v),o[h+1];const m=o.slice(h+2,v+R);let Y=null;try{Y=t(m)}catch{Y=r(m)}w.tabs[y]=Y}else if(y=="CgBI")w.tabs[y]=o.slice(v,v+4);else if(y=="IDAT"){for(I=0;I<R;I++)H[F+I]=o[v+I];F+=R}else if(y=="acTL")w.tabs[y]={num_frames:T(o,v),num_plays:T(o,v+4)},L=new Uint8Array(o.length);else if(y=="fcTL"){B!=0&&((D=w.frames[w.frames.length-1]).data=i(w,L.slice(0,B),D.rect.width,D.rect.height),B=0);const m={x:T(o,v+12),y:T(o,v+16),width:T(o,v+4),height:T(o,v+8)};let Y=E(o,v+22);Y=E(o,v+20)/(Y==0?100:Y);const C={rect:m,delay:Math.round(1e3*Y),dispose:o[v+24],blend:o[v+25]};w.frames.push(C)}else if(y=="fdAT"){for(I=0;I<R-4;I++)L[B+I]=o[v+I+4];B+=R-4}else if(y=="pHYs")w.tabs[y]=[f.readUint(o,v),f.readUint(o,v+4),o[v+8]];else if(y=="cHRM")for(w.tabs[y]=[],I=0;I<8;I++)w.tabs[y].push(f.readUint(o,v+4*I));else if(y=="tEXt"||y=="zTXt"){w.tabs[y]==null&&(w.tabs[y]={});var p=f.nextZero(o,v),x=f.readASCII(o,v,p-v),k=v+R-p-1;if(y=="tEXt")M=f.readASCII(o,p+1,k);else{var A=t(o.slice(p+2,p+2+k));M=f.readUTF8(A,0,A.length)}w.tabs[y][x]=M}else if(y=="iTXt"){w.tabs[y]==null&&(w.tabs[y]={}),p=0,h=v,p=f.nextZero(o,h),x=f.readASCII(o,h,p-h);const m=o[h=p+1];var M;o[h+1],h+=2,p=f.nextZero(o,h),f.readASCII(o,h,p-h),h=p+1,p=f.nextZero(o,h),f.readUTF8(o,h,p-h),k=R-((h=p+1)-v),m==0?M=f.readUTF8(o,h,k):(A=t(o.slice(h,h+k)),M=f.readUTF8(A,0,A.length)),w.tabs[y][x]=M}else if(y=="PLTE")w.tabs[y]=f.readBytes(o,v,R);else if(y=="hIST"){const m=w.tabs.PLTE.length/3;for(w.tabs[y]=[],I=0;I<m;I++)w.tabs[y].push(E(o,v+2*I))}else if(y=="tRNS")w.ctype==3?w.tabs[y]=f.readBytes(o,v,R):w.ctype==0?w.tabs[y]=E(o,v):w.ctype==2&&(w.tabs[y]=[E(o,v),E(o,v+2),E(o,v+4)]);else if(y=="gAMA")w.tabs[y]=f.readUint(o,v)/1e5;else if(y=="sRGB")w.tabs[y]=o[v];else if(y=="bKGD")w.ctype==0||w.ctype==4?w.tabs[y]=[E(o,v)]:w.ctype==2||w.ctype==6?w.tabs[y]=[E(o,v),E(o,v+2),E(o,v+4)]:w.ctype==3&&(w.tabs[y]=o[v]);else if(y=="IEND")break;v+=R,f.readUint(o,v),v+=4}var D;return B!=0&&((D=w.frames[w.frames.length-1]).data=i(w,L.slice(0,B),D.rect.width,D.rect.height)),w.data=i(w,H,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(n){const o=n.width,v=n.height;if(n.tabs.acTL==null)return[e(n.data,o,v,n).buffer];const f=[];n.frames[0].data==null&&(n.frames[0].data=n.data);const E=o*v*4,T=new Uint8Array(E),w=new Uint8Array(E),H=new Uint8Array(E);for(let F=0;F<n.frames.length;F++){const B=n.frames[F],_=B.rect.x,I=B.rect.y,h=B.rect.width,p=B.rect.height,x=e(B.data,h,p,n);if(F!=0)for(var L=0;L<E;L++)H[L]=T[L];if(B.blend==0?g(x,h,p,T,o,v,_,I,0):B.blend==1&&g(x,h,p,T,o,v,_,I,1),f.push(T.buffer.slice(0)),B.dispose!=0){if(B.dispose==1)g(w,h,p,T,o,v,_,I,0);else if(B.dispose==2)for(L=0;L<E;L++)T[L]=H[L]}}return f},_paeth:d,_copyTile:g,_bin:c}}();(function(){const{_copyTile:c}=dt,{_bin:e}=dt,i=dt._paeth;var t={table:function(){const h=new Uint32Array(256);for(let p=0;p<256;p++){let x=p;for(let k=0;k<8;k++)1&x?x=3988292384^x>>>1:x>>>=1;h[p]=x}return h}(),update(h,p,x,k){for(let A=0;A<k;A++)h=t.table[255&(h^p[x+A])]^h>>>8;return h},crc:(h,p,x)=>4294967295^t.update(4294967295,h,p,x)};function r(h,p,x,k){p[x]+=h[0]*k>>4,p[x+1]+=h[1]*k>>4,p[x+2]+=h[2]*k>>4,p[x+3]+=h[3]*k>>4}function a(h){return Math.max(0,Math.min(255,h))}function u(h,p){const x=h[0]-p[0],k=h[1]-p[1],A=h[2]-p[2],M=h[3]-p[3];return x*x+k*k+A*A+M*M}function d(h,p,x,k,A,M,D){D==null&&(D=1);const R=k.length,y=[];for(var m=0;m<R;m++){const P=k[m];y.push([P>>>0&255,P>>>8&255,P>>>16&255,P>>>24&255])}for(m=0;m<R;m++){let P=4294967295;for(var Y=0,C=0;C<R;C++){var O=u(y[m],y[C]);C!=m&&O<P&&(P=O,Y=C)}}const G=new Uint32Array(A.buffer),Q=new Int16Array(p*x*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(m=0;m<W.length;m++)W[m]=255*((W[m]+.5)/16-.5);for(let P=0;P<x;P++)for(let ee=0;ee<p;ee++){var q;m=4*(P*p+ee),D!=2?q=[a(h[m]+Q[m]),a(h[m+1]+Q[m+1]),a(h[m+2]+Q[m+2]),a(h[m+3]+Q[m+3])]:(O=W[4*(3&P)+(3&ee)],q=[a(h[m]+O),a(h[m+1]+O),a(h[m+2]+O),a(h[m+3]+O)]),Y=0;let ue=16777215;for(C=0;C<R;C++){const ve=u(q,y[C]);ve<ue&&(ue=ve,Y=C)}const he=y[Y],fe=[q[0]-he[0],q[1]-he[1],q[2]-he[2],q[3]-he[3]];D==1&&(ee!=p-1&&r(fe,Q,m+4,7),P!=x-1&&(ee!=0&&r(fe,Q,m+4*p-4,3),r(fe,Q,m+4*p,5),ee!=p-1&&r(fe,Q,m+4*p+4,1))),M[m>>2]=Y,G[m>>2]=k[Y]}}function b(h,p,x,k,A){A==null&&(A={});const{crc:M}=t,D=e.writeUint,R=e.writeUshort,y=e.writeASCII;let m=8;const Y=h.frames.length>1;let C,O=!1,G=33+(Y?20:0);if(A.sRGB!=null&&(G+=13),A.pHYs!=null&&(G+=21),A.iCCP!=null&&(C=pako.deflate(A.iCCP),G+=21+C.length+4),h.ctype==3){for(var Q=h.plte.length,W=0;W<Q;W++)h.plte[W]>>>24!=255&&(O=!0);G+=8+3*Q+4+(O?8+1*Q+4:0)}for(var q=0;q<h.frames.length;q++)Y&&(G+=38),G+=(he=h.frames[q]).cimg.length+12,q!=0&&(G+=4);G+=12;const P=new Uint8Array(G),ee=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)P[W]=ee[W];if(D(P,m,13),m+=4,y(P,m,"IHDR"),m+=4,D(P,m,p),m+=4,D(P,m,x),m+=4,P[m]=h.depth,m++,P[m]=h.ctype,m++,P[m]=0,m++,P[m]=0,m++,P[m]=0,m++,D(P,m,M(P,m-17,17)),m+=4,A.sRGB!=null&&(D(P,m,1),m+=4,y(P,m,"sRGB"),m+=4,P[m]=A.sRGB,m++,D(P,m,M(P,m-5,5)),m+=4),A.iCCP!=null){const fe=13+C.length;D(P,m,fe),m+=4,y(P,m,"iCCP"),m+=4,y(P,m,"ICC profile"),m+=11,m+=2,P.set(C,m),m+=C.length,D(P,m,M(P,m-(fe+4),fe+4)),m+=4}if(A.pHYs!=null&&(D(P,m,9),m+=4,y(P,m,"pHYs"),m+=4,D(P,m,A.pHYs[0]),m+=4,D(P,m,A.pHYs[1]),m+=4,P[m]=A.pHYs[2],m++,D(P,m,M(P,m-13,13)),m+=4),Y&&(D(P,m,8),m+=4,y(P,m,"acTL"),m+=4,D(P,m,h.frames.length),m+=4,D(P,m,A.loop!=null?A.loop:0),m+=4,D(P,m,M(P,m-12,12)),m+=4),h.ctype==3){for(D(P,m,3*(Q=h.plte.length)),m+=4,y(P,m,"PLTE"),m+=4,W=0;W<Q;W++){const fe=3*W,ve=h.plte[W],Ee=255&ve,De=ve>>>8&255,Ae=ve>>>16&255;P[m+fe+0]=Ee,P[m+fe+1]=De,P[m+fe+2]=Ae}if(m+=3*Q,D(P,m,M(P,m-3*Q-4,3*Q+4)),m+=4,O){for(D(P,m,Q),m+=4,y(P,m,"tRNS"),m+=4,W=0;W<Q;W++)P[m+W]=h.plte[W]>>>24&255;m+=Q,D(P,m,M(P,m-Q-4,Q+4)),m+=4}}let ue=0;for(q=0;q<h.frames.length;q++){var he=h.frames[q];Y&&(D(P,m,26),m+=4,y(P,m,"fcTL"),m+=4,D(P,m,ue++),m+=4,D(P,m,he.rect.width),m+=4,D(P,m,he.rect.height),m+=4,D(P,m,he.rect.x),m+=4,D(P,m,he.rect.y),m+=4,R(P,m,k[q]),m+=2,R(P,m,1e3),m+=2,P[m]=he.dispose,m++,P[m]=he.blend,m++,D(P,m,M(P,m-30,30)),m+=4);const fe=he.cimg;D(P,m,(Q=fe.length)+(q==0?0:4)),m+=4;const ve=m;y(P,m,q==0?"IDAT":"fdAT"),m+=4,q!=0&&(D(P,m,ue++),m+=4),P.set(fe,m),m+=Q,D(P,m,M(P,ve,m-ve)),m+=4}return D(P,m,0),m+=4,y(P,m,"IEND"),m+=4,D(P,m,M(P,m-4,4)),m+=4,P.buffer}function g(h,p,x){for(let k=0;k<h.frames.length;k++){const A=h.frames[k];A.rect.width;const M=A.rect.height,D=new Uint8Array(M*A.bpl+M);A.cimg=v(A.img,M,A.bpp,A.bpl,D,p,x)}}function l(h,p,x,k,A){const M=A[0],D=A[1],R=A[2],y=A[3],m=A[4],Y=A[5];let C=6,O=8,G=255;for(var Q=0;Q<h.length;Q++){const K=new Uint8Array(h[Q]);for(var W=K.length,q=0;q<W;q+=4)G&=K[q+3]}const P=G!=255,ee=function(re,se,ne,ae,ie,me){const _e=[];for(var le=0;le<re.length;le++){const ke=new Uint8Array(re[le]),Fe=new Uint32Array(ke.buffer);var be;let We=0,Ne=0,Le=se,Oe=ne,Ke=ae?1:0;if(le!=0){const xt=me||ae||le==1||_e[le-2].dispose!=0?1:2;let ft=0,vt=1e9;for(let mt=0;mt<xt;mt++){var Ce=new Uint8Array(re[le-1-mt]);const cr=new Uint32Array(re[le-1-mt]);let ht=se,tt=ne,Ue=-1,Ft=-1;for(let Et=0;Et<ne;Et++)for(let Dt=0;Dt<se;Dt++)Fe[xe=Et*se+Dt]!=cr[xe]&&(Dt<ht&&(ht=Dt),Dt>Ue&&(Ue=Dt),Et<tt&&(tt=Et),Et>Ft&&(Ft=Et));Ue==-1&&(ht=tt=Ue=Ft=0),ie&&((1&ht)==1&&ht--,(1&tt)==1&&tt--);const Gt=(Ue-ht+1)*(Ft-tt+1);Gt<vt&&(vt=Gt,ft=mt,We=ht,Ne=tt,Le=Ue-ht+1,Oe=Ft-tt+1)}Ce=new Uint8Array(re[le-1-ft]),ft==1&&(_e[le-1].dispose=2),be=new Uint8Array(Le*Oe*4),c(Ce,se,ne,be,Le,Oe,-We,-Ne,0),Ke=c(ke,se,ne,be,Le,Oe,-We,-Ne,3)?1:0,Ke==1?o(ke,se,ne,be,{x:We,y:Ne,width:Le,height:Oe}):c(ke,se,ne,be,Le,Oe,-We,-Ne,0)}else be=ke.slice(0);_e.push({rect:{x:We,y:Ne,width:Le,height:Oe},img:be,blend:Ke,dispose:0})}if(ae)for(le=0;le<_e.length;le++){if((Ve=_e[le]).blend==1)continue;const ke=Ve.rect,Fe=_e[le-1].rect,We=Math.min(ke.x,Fe.x),Ne=Math.min(ke.y,Fe.y),Le={x:We,y:Ne,width:Math.max(ke.x+ke.width,Fe.x+Fe.width)-We,height:Math.max(ke.y+ke.height,Fe.y+Fe.height)-Ne};_e[le-1].dispose=1,le-1!=0&&n(re,se,ne,_e,le-1,Le,ie),n(re,se,ne,_e,le,Le,ie)}let ze=0;if(re.length!=1)for(var xe=0;xe<_e.length;xe++){var Ve;ze+=(Ve=_e[xe]).rect.width*Ve.rect.height}return _e}(h,p,x,M,D,R),ue={},he=[],fe=[];if(k!=0){const K=[];for(q=0;q<ee.length;q++)K.push(ee[q].img.buffer);const re=function(ie){let me=0;for(var _e=0;_e<ie.length;_e++)me+=ie[_e].byteLength;const le=new Uint8Array(me);let be=0;for(_e=0;_e<ie.length;_e++){const Ce=new Uint8Array(ie[_e]),ze=Ce.length;for(let xe=0;xe<ze;xe+=4){let Ve=Ce[xe],ke=Ce[xe+1],Fe=Ce[xe+2];const We=Ce[xe+3];We==0&&(Ve=ke=Fe=0),le[be+xe]=Ve,le[be+xe+1]=ke,le[be+xe+2]=Fe,le[be+xe+3]=We}be+=ze}return le.buffer}(K),se=E(re,k);for(q=0;q<se.plte.length;q++)he.push(se.plte[q].est.rgba);let ne=0;for(q=0;q<ee.length;q++){const ae=(Ee=ee[q]).img.length;var ve=new Uint8Array(se.inds.buffer,ne>>2,ae>>2);fe.push(ve);const ie=new Uint8Array(se.abuf,ne,ae);Y&&d(Ee.img,Ee.rect.width,Ee.rect.height,he,ie,ve),Ee.img.set(ie),ne+=ae}}else for(Q=0;Q<ee.length;Q++){var Ee=ee[Q];const K=new Uint32Array(Ee.img.buffer);var De=Ee.rect.width;for(W=K.length,ve=new Uint8Array(W),fe.push(ve),q=0;q<W;q++){const re=K[q];if(q!=0&&re==K[q-1])ve[q]=ve[q-1];else if(q>De&&re==K[q-De])ve[q]=ve[q-De];else{let se=ue[re];if(se==null&&(ue[re]=se=he.length,he.push(re),he.length>=300))break;ve[q]=se}}}const Ae=he.length;for(Ae<=256&&m==0&&(O=Ae<=2?1:Ae<=4?2:Ae<=16?4:8,O=Math.max(O,y)),Q=0;Q<ee.length;Q++){(Ee=ee[Q]).rect.x,Ee.rect.y,De=Ee.rect.width;const K=Ee.rect.height;let re=Ee.img;new Uint32Array(re.buffer);let se=4*De,ne=4;if(Ae<=256&&m==0){se=Math.ceil(O*De/8);var j=new Uint8Array(se*K);const ae=fe[Q];for(let ie=0;ie<K;ie++){q=ie*se;const me=ie*De;if(O==8)for(var X=0;X<De;X++)j[q+X]=ae[me+X];else if(O==4)for(X=0;X<De;X++)j[q+(X>>1)]|=ae[me+X]<<4-4*(1&X);else if(O==2)for(X=0;X<De;X++)j[q+(X>>2)]|=ae[me+X]<<6-2*(3&X);else if(O==1)for(X=0;X<De;X++)j[q+(X>>3)]|=ae[me+X]<<7-1*(7&X)}re=j,C=3,ne=1}else if(P==0&&ee.length==1){j=new Uint8Array(De*K*3);const ae=De*K;for(q=0;q<ae;q++){const ie=3*q,me=4*q;j[ie]=re[me],j[ie+1]=re[me+1],j[ie+2]=re[me+2]}re=j,C=2,ne=3,se=3*De}Ee.img=re,Ee.bpl=se,Ee.bpp=ne}return{ctype:C,depth:O,plte:he,frames:ee}}function n(h,p,x,k,A,M,D){const R=Uint8Array,y=Uint32Array,m=new R(h[A-1]),Y=new y(h[A-1]),C=A+1<h.length?new R(h[A+1]):null,O=new R(h[A]),G=new y(O.buffer);let Q=p,W=x,q=-1,P=-1;for(let ue=0;ue<M.height;ue++)for(let he=0;he<M.width;he++){const fe=M.x+he,ve=M.y+ue,Ee=ve*p+fe,De=G[Ee];De==0||k[A-1].dispose==0&&Y[Ee]==De&&(C==null||C[4*Ee+3]!=0)||(fe<Q&&(Q=fe),fe>q&&(q=fe),ve<W&&(W=ve),ve>P&&(P=ve))}q==-1&&(Q=W=q=P=0),D&&((1&Q)==1&&Q--,(1&W)==1&&W--),M={x:Q,y:W,width:q-Q+1,height:P-W+1};const ee=k[A];ee.rect=M,ee.blend=1,ee.img=new Uint8Array(M.width*M.height*4),k[A-1].dispose==0?(c(m,p,x,ee.img,M.width,M.height,-M.x,-M.y,0),o(O,p,x,ee.img,M)):c(O,p,x,ee.img,M.width,M.height,-M.x,-M.y,0)}function o(h,p,x,k,A){c(h,p,x,k,A.width,A.height,-A.x,-A.y,2)}function v(h,p,x,k,A,M,D){const R=[];let y,m=[0,1,2,3,4];M!=-1?m=[M]:(p*k>5e5||x==1)&&(m=[0]),D&&(y={level:0});const Y=Ys;for(var C=0;C<m.length;C++){for(let Q=0;Q<p;Q++)f(A,h,Q,k,x,m[C]);R.push(Y.deflate(A,y))}let O,G=1e9;for(C=0;C<R.length;C++)R[C].length<G&&(O=C,G=R[C].length);return R[O]}function f(h,p,x,k,A,M){const D=x*k;let R=D+x;if(h[R]=M,R++,M==0)if(k<500)for(var y=0;y<k;y++)h[R+y]=p[D+y];else h.set(new Uint8Array(p.buffer,D,k),R);else if(M==1){for(y=0;y<A;y++)h[R+y]=p[D+y];for(y=A;y<k;y++)h[R+y]=p[D+y]-p[D+y-A]+256&255}else if(x==0){for(y=0;y<A;y++)h[R+y]=p[D+y];if(M==2)for(y=A;y<k;y++)h[R+y]=p[D+y];if(M==3)for(y=A;y<k;y++)h[R+y]=p[D+y]-(p[D+y-A]>>1)+256&255;if(M==4)for(y=A;y<k;y++)h[R+y]=p[D+y]-i(p[D+y-A],0,0)+256&255}else{if(M==2)for(y=0;y<k;y++)h[R+y]=p[D+y]+256-p[D+y-k]&255;if(M==3){for(y=0;y<A;y++)h[R+y]=p[D+y]+256-(p[D+y-k]>>1)&255;for(y=A;y<k;y++)h[R+y]=p[D+y]+256-(p[D+y-k]+p[D+y-A]>>1)&255}if(M==4){for(y=0;y<A;y++)h[R+y]=p[D+y]+256-i(0,p[D+y-k],0)&255;for(y=A;y<k;y++)h[R+y]=p[D+y]+256-i(p[D+y-A],p[D+y-k],p[D+y-A-k])&255}}}function E(h,p){const x=new Uint8Array(h),k=x.slice(0),A=new Uint32Array(k.buffer),M=T(k,p),D=M[0],R=M[1],y=x.length,m=new Uint8Array(y>>2);let Y;if(x.length<2e7)for(var C=0;C<y;C+=4)Y=w(D,O=x[C]*(1/255),G=x[C+1]*(1/255),Q=x[C+2]*(1/255),W=x[C+3]*(1/255)),m[C>>2]=Y.ind,A[C>>2]=Y.est.rgba;else for(C=0;C<y;C+=4){var O=x[C]*.00392156862745098,G=x[C+1]*(1/255),Q=x[C+2]*(1/255),W=x[C+3]*(1/255);for(Y=D;Y.left;)Y=H(Y.est,O,G,Q,W)<=0?Y.left:Y.right;m[C>>2]=Y.ind,A[C>>2]=Y.est.rgba}return{abuf:k.buffer,inds:m,plte:R}}function T(h,p,x){x==null&&(x=1e-4);const k=new Uint32Array(h.buffer),A={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=B(h,A.i0,A.i1),A.est=_(A.bst);const M=[A];for(;M.length<p;){let R=0,y=0;for(var D=0;D<M.length;D++)M[D].est.L>R&&(R=M[D].est.L,y=D);if(R<x)break;const m=M[y],Y=L(h,k,m.i0,m.i1,m.est.e,m.est.eMq255);if(m.i0>=Y||m.i1<=Y){m.est.L=0;continue}const C={i0:m.i0,i1:Y,bst:null,est:null,tdst:0,left:null,right:null};C.bst=B(h,C.i0,C.i1),C.est=_(C.bst);const O={i0:Y,i1:m.i1,bst:null,est:null,tdst:0,left:null,right:null};for(O.bst={R:[],m:[],N:m.bst.N-C.bst.N},D=0;D<16;D++)O.bst.R[D]=m.bst.R[D]-C.bst.R[D];for(D=0;D<4;D++)O.bst.m[D]=m.bst.m[D]-C.bst.m[D];O.est=_(O.bst),m.left=C,m.right=O,M[y]=C,M.push(O)}for(M.sort((R,y)=>y.bst.N-R.bst.N),D=0;D<M.length;D++)M[D].ind=D;return[A,M]}function w(h,p,x,k,A){if(h.left==null)return h.tdst=function(C,O,G,Q,W){const q=O-C[0],P=G-C[1],ee=Q-C[2],ue=W-C[3];return q*q+P*P+ee*ee+ue*ue}(h.est.q,p,x,k,A),h;const M=H(h.est,p,x,k,A);let D=h.left,R=h.right;M>0&&(D=h.right,R=h.left);const y=w(D,p,x,k,A);if(y.tdst<=M*M)return y;const m=w(R,p,x,k,A);return m.tdst<y.tdst?m:y}function H(h,p,x,k,A){const{e:M}=h;return M[0]*p+M[1]*x+M[2]*k+M[3]*A-h.eMq}function L(h,p,x,k,A,M){for(k-=4;x<k;){for(;F(h,x,A)<=M;)x+=4;for(;F(h,k,A)>M;)k-=4;if(x>=k)break;const D=p[x>>2];p[x>>2]=p[k>>2],p[k>>2]=D,x+=4,k-=4}for(;F(h,x,A)>M;)x-=4;return x+4}function F(h,p,x){return h[p]*x[0]+h[p+1]*x[1]+h[p+2]*x[2]+h[p+3]*x[3]}function B(h,p,x){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],M=x-p>>2;for(let D=p;D<x;D+=4){const R=h[D]*.00392156862745098,y=h[D+1]*(1/255),m=h[D+2]*(1/255),Y=h[D+3]*(1/255);A[0]+=R,A[1]+=y,A[2]+=m,A[3]+=Y,k[0]+=R*R,k[1]+=R*y,k[2]+=R*m,k[3]+=R*Y,k[5]+=y*y,k[6]+=y*m,k[7]+=y*Y,k[10]+=m*m,k[11]+=m*Y,k[15]+=Y*Y}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:A,N:M}}function _(h){const{R:p}=h,{m:x}=h,{N:k}=h,A=x[0],M=x[1],D=x[2],R=x[3],y=k==0?0:1/k,m=[p[0]-A*A*y,p[1]-A*M*y,p[2]-A*D*y,p[3]-A*R*y,p[4]-M*A*y,p[5]-M*M*y,p[6]-M*D*y,p[7]-M*R*y,p[8]-D*A*y,p[9]-D*M*y,p[10]-D*D*y,p[11]-D*R*y,p[12]-R*A*y,p[13]-R*M*y,p[14]-R*D*y,p[15]-R*R*y],Y=m,C=I;let O=[Math.random(),Math.random(),Math.random(),Math.random()],G=0,Q=0;if(k!=0)for(let q=0;q<16&&(O=C.multVec(Y,O),Q=Math.sqrt(C.dot(O,O)),O=C.sml(1/Q,O),!(q!=0&&Math.abs(Q-G)<1e-9));q++)G=Q;const W=[A*y,M*y,D*y,R*y];return{Cov:m,q:W,e:O,L:G,eMq255:C.dot(C.sml(255,W),O),eMq:C.dot(O,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var I={multVec:(h,p)=>[h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],h[4]*p[0]+h[5]*p[1]+h[6]*p[2]+h[7]*p[3],h[8]*p[0]+h[9]*p[1]+h[10]*p[2]+h[11]*p[3],h[12]*p[0]+h[13]*p[1]+h[14]*p[2]+h[15]*p[3]],dot:(h,p)=>h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],sml:(h,p)=>[h*p[0],h*p[1],h*p[2],h*p[3]]};dt.encode=function(p,x,k,A,M,D,R){A==null&&(A=0),R==null&&(R=!1);const y=l(p,x,k,A,[!1,!1,!1,0,R,!1]);return g(y,-1),b(y,x,k,M,D)},dt.encodeLL=function(p,x,k,A,M,D,R,y){const m={ctype:0+(A==1?0:2)+(M==0?0:4),depth:D,frames:[]},Y=(A+M)*D,C=Y*x;for(let O=0;O<p.length;O++)m.frames.push({rect:{x:0,y:0,width:x,height:k},img:new Uint8Array(p[O]),blend:0,dispose:1,bpp:Math.ceil(Y/8),bpl:Math.ceil(C/8)});return g(m,0,!0),b(m,x,k,R,y)},dt.encode.compress=l,dt.encode.dither=d,dt.quantize=E,dt.quantize.getKDtree=T,dt.quantize.getNearest=w})();const yn={toArrayBuffer(c,e){const i=c.width,t=c.height,r=i<<2,a=c.getContext("2d").getImageData(0,0,i,t),u=new Uint32Array(a.data.buffer),d=(32*i+31)/32<<2,b=d*t,g=122+b,l=new ArrayBuffer(g),n=new DataView(l),o=1<<20;let v,f,E,T,w=o,H=0,L=0,F=0;function B(h){n.setUint16(L,h,!0),L+=2}function _(h){n.setUint32(L,h,!0),L+=4}function I(h){L+=h}B(19778),_(g),I(4),_(122),_(108),_(i),_(-t>>>0),B(1),B(32),_(3),_(b),_(2835),_(2835),I(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function h(){for(;H<t&&w>0;){for(T=122+H*d,v=0;v<r;)w--,f=u[F++],E=f>>>24,n.setUint32(T+v,f<<8|E),v+=4;H++}F<u.length?(w=o,setTimeout(h,yn._dly)):e(l)}()},toBlob(c,e){this.toArrayBuffer(c,i=>{e(new Blob([i],{type:"image/bmp"}))})},_dly:9};var at={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Ws={[at.CHROME]:16384,[at.FIREFOX]:11180,[at.DESKTOP_SAFARI]:16384,[at.IE]:8192,[at.IOS]:4096,[at.ETC]:8192};const Cr=typeof window<"u",bn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ir=Cr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Qs=(Cr||bn)&&(ir&&ir.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gn=(Cr||bn)&&(ir&&ir.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Fr(c,e,i=Date.now()){return new Promise(t=>{const r=c.split(","),a=r[0].match(/:(.*?);/)[1],u=globalThis.atob(r[1]);let d=u.length;const b=new Uint8Array(d);for(;d--;)b[d]=u.charCodeAt(d);const g=new Blob([b],{type:a});g.name=e,g.lastModified=i,t(g)})}function _n(c){return new Promise((e,i)=>{const t=new gn;t.onload=()=>e(t.result),t.onerror=r=>i(r),t.readAsDataURL(c)})}function wn(c){return new Promise((e,i)=>{const t=new Image;t.onload=()=>e(t),t.onerror=r=>i(r),t.src=c})}function Pt(){if(Pt.cachedResult!==void 0)return Pt.cachedResult;let c=at.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?c=at.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?c=at.IOS:/Safari/i.test(e)?c=at.DESKTOP_SAFARI:/Firefox/i.test(e)?c=at.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(c=at.IE),Pt.cachedResult=c,Pt.cachedResult}function xn(c,e){const i=Pt(),t=Ws[i];let r=c,a=e,u=r*a;const d=r>a?a/r:r/a;for(;u>t*t;){const b=(t+r)/2,g=(t+a)/2;b<g?(a=g,r=g*d):(a=b*d,r=b),u=r*a}return{width:r,height:a}}function lr(c,e){let i,t;try{if(i=new OffscreenCanvas(c,e),t=i.getContext("2d"),t===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),t=i.getContext("2d")}return i.width=c,i.height=e,[i,t]}function En(c,e){const{width:i,height:t}=xn(c.width,c.height),[r,a]=lr(i,t);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,r.width,r.height)),a.drawImage(c,0,0,r.width,r.height),r}function Zt(){return Zt.cachedResult!==void 0||(Zt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Zt.cachedResult}function sr(c,e={}){return new Promise(function(i,t){let r,a;var u=function(){try{return a=En(r,e.fileType||c.type),i([r,a])}catch(b){return t(b)}},d=function(b){try{var g=function(l){try{throw l}catch(n){return t(n)}};try{let l;return _n(c).then(function(n){try{return l=n,wn(l).then(function(o){try{return r=o,function(){try{return u()}catch(v){return t(v)}}()}catch(v){return g(v)}},g)}catch(o){return g(o)}},g)}catch(l){g(l)}}catch(l){return t(l)}};try{if(Zt()||[at.DESKTOP_SAFARI,at.MOBILE_SAFARI].includes(Pt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(c).then(function(b){try{return r=b,u()}catch{return d()}},d)}catch{d()}})}function or(c,e,i,t,r=1){return new Promise(function(a,u){let d;if(e==="image/png"){let g,l,n;return g=c.getContext("2d"),{data:l}=g.getImageData(0,0,c.width,c.height),n=dt.encode([l.buffer],c.width,c.height,4096*r),d=new Blob([n],{type:e}),d.name=i,d.lastModified=t,b.call(this)}{let g=function(){return b.call(this)};if(e==="image/bmp")return new Promise(l=>yn.toBlob(c,l)).then(function(l){try{return d=l,d.name=i,d.lastModified=t,g.call(this)}catch(n){return u(n)}}.bind(this),u);{let l=function(){return g.call(this)};if(typeof OffscreenCanvas=="function"&&c instanceof OffscreenCanvas)return c.convertToBlob({type:e,quality:r}).then(function(n){try{return d=n,d.name=i,d.lastModified=t,l.call(this)}catch(o){return u(o)}}.bind(this),u);{let n;return n=c.toDataURL(e,r),Fr(n,i,t).then(function(o){try{return d=o,l.call(this)}catch(v){return u(v)}}.bind(this),u)}}}function b(){return a(d)}})}function bt(c){c.width=0,c.height=0}function Lt(){return new Promise(function(c,e){let i,t,r,a;return Lt.cachedResult!==void 0?c(Lt.cachedResult):Fr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(u){try{return i=u,sr(i).then(function(d){try{return t=d[1],or(t,i.type,i.name,i.lastModified).then(function(b){try{return r=b,bt(t),sr(r).then(function(g){try{return a=g[0],Lt.cachedResult=a.width===1&&a.height===2,c(Lt.cachedResult)}catch(l){return e(l)}},e)}catch(g){return e(g)}},e)}catch(b){return e(b)}},e)}catch(d){return e(d)}},e)})}function Dn(c){return new Promise((e,i)=>{const t=new gn;t.onload=r=>{const a=new DataView(r.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const u=a.byteLength;let d=2;for(;d<u;){if(a.getUint16(d+2,!1)<=8)return e(-1);const b=a.getUint16(d,!1);if(d+=2,b==65505){if(a.getUint32(d+=2,!1)!=1165519206)return e(-1);const g=a.getUint16(d+=6,!1)==18761;d+=a.getUint32(d+4,g);const l=a.getUint16(d,g);d+=2;for(let n=0;n<l;n++)if(a.getUint16(d+12*n,g)==274)return e(a.getUint16(d+12*n+8,g))}else{if((65280&b)!=65280)break;d+=a.getUint16(d,!1)}}return e(-1)},t.onerror=r=>i(r),t.readAsArrayBuffer(c)})}function kn(c,e){const{width:i}=c,{height:t}=c,{maxWidthOrHeight:r}=e;let a,u=c;return isFinite(r)&&(i>r||t>r)&&([u,a]=lr(i,t),i>t?(u.width=r,u.height=t/i*r):(u.width=i/t*r,u.height=r),a.drawImage(c,0,0,u.width,u.height),bt(c)),u}function An(c,e){const{width:i}=c,{height:t}=c,[r,a]=lr(i,t);switch(e>4&&e<9?(r.width=t,r.height=i):(r.width=i,r.height=t),e){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,t);break;case 4:a.transform(1,0,0,-1,0,t);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,t,0);break;case 7:a.transform(0,-1,-1,0,t,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(c,0,0,i,t),bt(c),r}function $r(c,e,i=0){return new Promise(function(t,r){let a,u,d,b,g,l,n,o,v,f,E,T,w,H,L,F,B,_,I,h;function p(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=k,e.onProgress(Math.min(a,100))}function x(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(k,a),100),e.onProgress(a)}return a=i,u=e.maxIteration||10,d=1024*e.maxSizeMB*1024,p(),sr(c,e).then(function(k){try{return[,b]=k,p(),g=kn(b,e),p(),new Promise(function(A,M){var D;if(!(D=e.exifOrientation))return Dn(c).then(function(y){try{return D=y,R.call(this)}catch(m){return M(m)}}.bind(this),M);function R(){return A(D)}return R.call(this)}).then(function(A){try{return l=A,p(),Lt().then(function(M){try{return n=M?g:An(g,l),p(),o=e.initialQuality||1,v=e.fileType||c.type,or(n,v,c.name,c.lastModified,o).then(function(D){try{{let y=function(){if(u--&&(L>d||L>w)){let Y,C;return Y=h?.95*I.width:I.width,C=h?.95*I.height:I.height,[B,_]=lr(Y,C),_.drawImage(I,0,0,Y,C),o*=v==="image/png"?.85:.95,or(B,v,c.name,c.lastModified,o).then(function(O){try{return F=O,bt(I),I=B,L=F.size,x(Math.min(99,Math.floor((H-L)/(H-d)*100))),y}catch(G){return r(G)}},r)}return[1]},m=function(){return bt(I),bt(B),bt(g),bt(n),bt(b),x(100),t(F)};if(f=D,p(),E=f.size>d,T=f.size>c.size,!E&&!T)return x(100),t(f);var R;return w=c.size,H=f.size,L=H,I=n,h=!e.alwaysKeepResolution&&E,(R=function(Y){for(;Y;){if(Y.then)return void Y.then(R,r);try{if(Y.pop){if(Y.length)return Y.pop()?m.call(this):Y;Y=y}else Y=Y.call(this)}catch(C){return r(C)}}}.bind(this))(y)}}catch(y){return r(y)}}.bind(this),r)}catch(D){return r(D)}}.bind(this),r)}catch(M){return r(M)}}.bind(this),r)}catch(A){return r(A)}}.bind(this),r)})}const $s=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let wr;function js(c,e){return new Promise((i,t)=>{wr||(wr=function(u){const d=[];return d.push(u),URL.createObjectURL(new Blob(d))}($s));const r=new Worker(wr);r.addEventListener("message",function(u){if(e.signal&&e.signal.aborted)r.terminate();else if(u.data.progress===void 0){if(u.data.error)return t(new Error(u.data.error)),void r.terminate();i(u.data.file),r.terminate()}else e.onProgress(u.data.progress)}),r.addEventListener("error",t),e.signal&&e.signal.addEventListener("abort",()=>{t(e.signal.reason),r.terminate()}),r.postMessage({file:c,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Xe(c,e){return new Promise(function(i,t){let r,a,u,d,b,g;if(r={...e},u=0,{onProgress:d}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,b=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=v=>{u=v,typeof d=="function"&&d(u)},!(c instanceof Blob||c instanceof Qs))return t(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(c.type))return t(new Error("The file given is not an image"));if(g=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!b||typeof Worker!="function"||g)return $r(c,r).then(function(v){try{return a=v,o.call(this)}catch(f){return t(f)}}.bind(this),t);var l=function(){try{return o.call(this)}catch(v){return t(v)}}.bind(this),n=function(v){try{return $r(c,r).then(function(f){try{return a=f,l()}catch(E){return t(E)}},t)}catch(f){return t(f)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",js(c,r).then(function(v){try{return a=v,l()}catch{return n()}},n)}catch{n()}function o(){try{a.name=c.name,a.lastModified=c.lastModified}catch{}try{r.preserveExif&&c.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===c.type)&&(a=pn(c,a))}catch{}return i(a)}})}Xe.getDataUrlFromFile=_n,Xe.getFilefromDataUrl=Fr,Xe.loadImage=wn,Xe.drawImageInCanvas=En,Xe.drawFileInCanvas=sr,Xe.canvasToFile=or,Xe.getExifOrientation=Dn,Xe.handleMaxWidthOrHeight=kn,Xe.followExifOrientation=An,Xe.cleanupCanvasMemory=bt,Xe.isAutoOrientationInBrowser=Lt,Xe.approximateBelowMaximumCanvasSizeOfBrowser=xn,Xe.copyExifWithoutOrientation=pn,Xe.getBrowserName=Pt,Xe.version="2.0.2";const Gs={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function Ks(c,e,i={},t){const r={...Gs,...i};try{let a=c;if(c.type.startsWith("image/")&&c.size>r.compressionThresholdMB*1024*1024){t?.("Compressing image...");try{const b=await Xe(c,{maxSizeMB:r.maxSizeMB,maxWidthOrHeight:r.maxWidthOrHeight,initialQuality:r.initialQuality,useWebWorker:r.useWebWorker});a=b;const g=(c.size/(1024*1024)).toFixed(2),l=(b.size/(1024*1024)).toFixed(2),n=((1-b.size/c.size)*100).toFixed(0);console.log(`Image compressed: ${g}MB → ${l}MB (${n}% smaller)`)}catch(b){console.warn("Image compression failed, uploading original:",b)}}return t?.("Uploading file..."),{success:!0,attachment:await ca(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function Vs(c){try{const e=oa(c.url);return await la(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function Xs(c,e,i){return c.map(t=>t.id===e?{...t,name:i}:t)}function Zs(c,e=5){const i=c.type.startsWith("image/"),t=e*1024*1024;if(!i&&c.size>t){const r=(c.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${r}MB)`}}return{valid:!0}}function Js(c){return{uploadAttachment:(e,i,t)=>Ks(e,i,c,t),removeAttachment:Vs,updateAttachmentName:Xs,validateFile:Zs}}function jr(c,e){const[i,t]=e.split(":").map(Number);let r=Fi(c,i);return r=Pi(r,t),r}function Gr(c){return Array.from(new Set(c)).sort((e,i)=>e-i)}function eo(c,e){if(e.includes(c))return 0;const i=e.find(t=>t>c);return i!==void 0?i-c:7-c+e[0]}function to(c,e,i){const t=new Date(c),r=Rt(t,et),a=r.getDay(),u=eo(a,i);if(u===0)return{start_time:c,end_time:e};const d=Ht(r,u),b=Ot(d,et);let g=e;if(e){const l=Rt(new Date(e),et),n=Ht(l,u);g=Ot(n,et).toISOString()}return{start_time:b.toISOString(),end_time:g}}function Tn({eventItem:c,dateInput:e,startTimeInput:i,endTimeInput:t,attachments:r,isRecurring:a,recurrenceFrequency:u,recurrenceInterval:d,recurringDays:b,recurrenceEndDate:g,hasEndDate:l,monthlyType:n}){const o=!c.id,v={...c.meta_data??{}};c.category&&(v.category=c.category);const f=sn(),E=f?kr(f.stores.currentUser):void 0;if(o){const _=f?kr(f.stores.userOrganizations):void 0,I=E?.displayName||E?.username,h=E?.id;I&&!v.submitted_by_name&&(v.submitted_by_name=I),h&&!v.submitted_by_user_id&&(v.submitted_by_user_id=h);const p=_?Array.from(_):[];p.length&&!v.submitted_by_organizations&&(v.submitted_by_organizations=p),v.submitted_at||(v.submitted_at=new Date().toISOString())}else{const _=E?.displayName||E?.username;_&&(v.edited_by_name=_),E?.id&&(v.edited_by_user_id=E.id),v.edited_at=new Date().toISOString()}const T=Object.keys(v).length?v:void 0,w={title:c.title,description:c.description,location:c.location,is_public:c.is_public??!0,event_type:c.event_type,meta_data:T,attachments:r.length>0?r:null};if(c.event_type!=="calendar_event")return{...w,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const H=e?nr(e,"yyyy-MM-dd",new Date):new Date;let L,F;if(c.is_all_day){const _=Ot(H,et);L=_.toISOString(),F=_.toISOString()}else{const _=new Date(H.getTime()),I=new Date(H.getTime()),h=i?jr(_,i):H,p=t?jr(I,t):H;L=Ot(h,et).toISOString(),F=Ot(p,et).toISOString()}const B={...w,start_time:L,end_time:F,is_all_day:c.is_all_day};if(a&&B.start_time){if(u==="weekly"&&b.length>0){const I=Gr(b),h=to(B.start_time,B.end_time,I);B.start_time=h.start_time,B.end_time=h.end_time}if(u==="daily"||u==="yearly"||u==="weekly"&&b.length>0||u==="monthly"){const{recurrence_rule:I,recurrence_end_date:h}=Rr({frequency:u,interval:d,recurringDays:u==="weekly"?Gr(b):[],recurrenceEndDate:g,hasEndDate:l,monthlyType:n,startTime:B.start_time});B.recurrence_rule=I,B.recurrence_end_date=h}else B.recurrence_rule=void 0,B.recurrence_end_date=void 0}else B.recurrence_rule=void 0,B.recurrence_end_date=void 0;return B}async function ro({id:c,...e}){const i=Tn(e);return c?(e.eventItem.bishop_approval==="NO"&&Object.assign(i,{bishop_approval:null,bishop_approval_at:null,bishop_approval_by_user_id:null,first_counselor_approval:null,first_counselor_approval_at:null,first_counselor_approval_by_user_id:null,second_counselor_approval:null,second_counselor_approval_at:null,second_counselor_approval_by_user_id:null}),{action:"update",event:await Ut(c,i)}):{action:"create",event:await en(i)}}async function no(c){await Jr(c)}function ao({event:c,newDate:e}){const i=c.start_time?new Date(c.start_time):new Date,t=c.end_time?new Date(c.end_time):new Date,[r,a,u]=e.split("-").map(Number),d=new Date(i);d.setFullYear(r,a-1,u);const b=new Date(t);return b.setFullYear(r,a-1,u),{...c,id:void 0,title:`CLONED - ${c.title}`,start_time:d.toISOString(),end_time:b.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function io(c,e,i){const t=await jt(c);if(!t)throw new Error("Event not found");const r=t.recurrence_exceptions||[];r.includes(e)||r.push(e);const a=t.recurrence_overrides||{};a[e]={title:i.title,description:i.description,location:i.location,start_time:i.start_time,end_time:i.end_time,is_all_day:i.is_all_day,meta_data:i.meta_data},await Ut(c,{recurrence_exceptions:r,recurrence_overrides:a})}async function so(c,e,i){const t=await jt(c);if(!t||!t.recurrence_rule||!t.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:r,generateRecurrenceRule:a}=await tr(async()=>{const{parseRecurrenceRule:L,generateRecurrenceRule:F}=await Promise.resolve().then(()=>Ar);return{parseRecurrenceRule:L,generateRecurrenceRule:F}},void 0,import.meta.url),u=r(t.recurrence_rule,t.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const d=He(new Date(t.start_time),"yyyy-MM-dd"),b=nr(e,"yyyy-MM-dd",new Date),g=nr(d,"yyyy-MM-dd",new Date);if(b<=g)return await Ut(c,i),c;const l=Ht(b,-1),n=He(l,"yyyy-MM-dd"),{recurrence_rule:o,recurrence_end_date:v}=a({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:n,hasEndDate:!0,monthlyType:u.monthlyType,startTime:t.start_time});await Ut(c,{recurrence_rule:o,recurrence_end_date:v});const f=u.hasEndDate?u.recurrenceEndDate:"",{recurrence_rule:E,recurrence_end_date:T}=a({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:f,hasEndDate:u.hasEndDate,monthlyType:u.monthlyType,startTime:i.start_time||t.start_time}),w={...i,recurrence_rule:E,recurrence_end_date:T};return(await en(w))?.id||0}async function oo(c,e){const i=await jt(c);if(!i)throw new Error("Event not found");const t={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:i.start_time,end_time:i.end_time,recurrence_rule:i.recurrence_rule,recurrence_end_date:i.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Ut(c,t)}async function lo(c,e){const i=await jt(c);if(!i)throw new Error("Event not found");const t=i.recurrence_exceptions||[];t.includes(e)||t.push(e);const r=i.recurrence_overrides||{};r[e]&&delete r[e],await Ut(c,{recurrence_exceptions:t,recurrence_overrides:r})}async function co(c,e){const i=await jt(c);if(!i||!i.recurrence_rule||!i.start_time)throw new Error("Event not found or is not recurring");const t=nr(e,"yyyy-MM-dd",new Date),r=Ht(t,-1),a=He(r,"yyyy-MM-dd"),{parseRecurrenceRule:u}=await tr(async()=>{const{parseRecurrenceRule:n}=await Promise.resolve().then(()=>Ar);return{parseRecurrenceRule:n}},void 0,import.meta.url),d=u(i.recurrence_rule,i.recurrence_end_date);if(!d)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:b}=await tr(async()=>{const{generateRecurrenceRule:n}=await Promise.resolve().then(()=>Ar);return{generateRecurrenceRule:n}},void 0,import.meta.url),{recurrence_rule:g,recurrence_end_date:l}=b({frequency:d.frequency,interval:d.interval,recurringDays:d.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:d.monthlyType,startTime:i.start_time});await Ut(c,{recurrence_rule:g,recurrence_end_date:l})}async function uo(c){await Jr(c)}function fo(){return{saveEvent:ro,deleteEventById:no,cloneEventForDate:ao,buildEventPayload:Tn,saveSingleInstance:io,saveFutureInstances:so,saveAllInstances:oo,deleteSingleInstance:lo,deleteFutureInstances:co,deleteAllInstances:uo}}var vo=oe('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),mo=oe('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),ho=oe("<!> <!>",1),po=oe('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),yo=oe('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 submitter-chat-toggle svelte-zsu5u8"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Bishopric</span> <small class="text-muted">Ask questions or respond to feedback</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),bo=oe('<div class="alert alert-info small mb-0 d-flex align-items-start gap-2"><i class="bi bi-info-circle mt-1"></i> <span>All submissions require bishopric approval before they appear on the public calendar.</span></div> <!>',1),go=oe('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),_o=oe("<span>Save</span>"),wo=oe("<span>Create</span>"),xo=oe('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Eo=oe('<button class="btn btn-primary position-relative"><!> <!></button>'),Do=oe('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <!></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div> <!></div> <!> <!>',1);function dl(c,e){lt(e,!1);const i=()=>Xt(H,"$userOrganizations",a),t=()=>Xt(L,"$currentUser",a),r=()=>Xt(F,"$validationErrors",a),[a,u]=Vr(),d=ce(),b=ce(),g=ce(),l=ce(),n=ce();let o=ye(e,"name",8,""),v=ye(e,"drawerId",8,""),f=ye(e,"eventItem",12,ka),E=ye(e,"canDelete",8,!0),T=ye(e,"canCreate",8,!0);const{actions:{reload:w}}=Zr(),{stores:{userOrganizations:H,currentUser:L}}=sn(),{validationErrors:F,validate:B,getErrorMessages:_,clearErrors:I}=Bs(),{parseRecurrenceRule:h}=hn(),{uploadAttachment:p,removeAttachment:x,updateAttachmentName:k,validateFile:A}=Js(),{saveEvent:M,deleteEventById:D,cloneEventForDate:R,buildEventPayload:y,saveSingleInstance:m,saveFutureInstances:Y,saveAllInstances:C,deleteSingleInstance:O,deleteFutureInstances:G,deleteAllInstances:Q}=fo();let W=ce(!1),q=ce(!1),P=ce(!1),ee=ce("weekly"),ue=ce(1),he=ce([]),fe=ce(""),ve=ce(!0),Ee=ce("date"),De=ce([]),Ae=ce(!1),j=ce(!1),X=ce(void 0),K=ce(void 0),re=ce(!1),se=ce(null),ne=ce(!1),ae=ce(null),ie=ce(0),me=ce({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),_e=ce({message:"",type:"info"}),le=ce(""),be=ce(""),Ce=ce(""),ze=ce({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"}),xe=ce(!1);const Ve=(te,$)=>te.length===$.length&&te.every((we,Re)=>we===$[Re]);let ke=ce([]),Fe=ce(!1),We=ce(!1);const Ne=`submitter-chat-form-${Oa()}`;let Le=ce(null),Oe=null,Ke=null;on(async()=>{typeof window<"u"&&(Ke=(await tr(()=>import("./DO0djbQe.js").then($=>$.o),__vite__mapDeps([0,1]),import.meta.url)).default)}),Ia(()=>{vt()});function xt(){if(!Ke)return;const te=document.getElementById(Ne);if(!te)return;Ke.getOrCreateInstance(te).show()}function ft(te){const $=te??f()?.id??null;if(Oe||!$)return;const we=typeof window<"u"?localStorage.getItem("authToken"):null;we&&gr.realtime.setAuth(we),Oe=gr.channel(`submitter-comments-form-${$}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${$}`},()=>{mt($)}).subscribe()}function vt(){Oe&&(gr.removeChannel(Oe),Oe=null)}async function mt(te){const $=te??f()?.id??null;if($){s(We)||U(Fe,!0);try{const we=await da($);$===(f()?.id??null)&&(U(ke,we),U(We,!0))}catch(we){console.error("Failed to load submitter comments:",we)}finally{$===(f()?.id??null)&&U(Fe,!1)}}}async function cr(te){if(!f()?.id||!t()?.id)return;const $=t().displayName||t().username||"Unknown";await ma(f().id,t().id,$,te),await mt()}async function ht(te){await va(te),await mt()}const tt=()=>{const te=`[data-bs-target="#${v()}"]`,$=document.querySelector(te);$&&$.click()},Ue=(te,$=0,we="info")=>{br(_e,s(_e).message=te),br(_e,s(_e).type=we),$&&setTimeout(()=>{br(_e,s(_e).message="")},$)},Ft=async te=>{const $=te.detail;if(!$)return;const we=A($);if(!we.valid){Ue(we.error??"Invalid file selected",7e3,"danger");return}U(q,!0);try{const Re=await p($,s(d)??"temp",ot=>Ue(ot));if(!Re.success||!Re.attachment)throw new Error(Re.error??"Upload failed");U(De,[...s(De),Re.attachment]),U(Ae,!0),Ue("File uploaded!",3e3,"success")}catch(Re){console.error("File upload failed:",Re),Ue("Failed to upload file. Please try again.",7e3,"danger")}finally{U(q,!1)}},Gt=te=>{const{attachment:$,newName:we}=te.detail;U(De,k(s(De),$.id,we)),U(Ae,!0),Ue("Attachment name updated!",3e3,"success")},Et=async te=>{const $=te.detail;if($){U(q,!0);try{if(!await x($))throw new Error("Failed to remove attachment");U(De,s(De).filter(Re=>Re.id!==$.id)),U(Ae,!0),Ue("Attachment removed!",3e3,"success")}catch(we){console.error("Failed to remove attachment:",we),Ue("Failed to remove attachment. Please try again.",7e3,"danger")}finally{U(q,!1)}}},Dt=async()=>{if(!s(d)){Ue("ID is not defined",0,"danger");return}try{await D(s(d)),await w(),kt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{U(W,!1),U(me,{...f(),id:s(d)}),Ue("Event Deleted",3e3,"success"),tt()},800)}catch(te){kt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{U(W,!1),console.error("Delete failed:",te),Ue("Failed to delete event. Please try again.",7e3,"danger")},800)}},In=()=>!!f().recurrence_rule,Mn=async()=>{const te=s(d)||f().meta_data?.recurring_parent_id;if(te&&s(j)&&s(K)&&s(X)){if(U(ae,null),U(ne,!0),await new Promise($=>{const we=setInterval(()=>{s(ne)||(clearInterval(we),$())},50)}),!s(ae))return;U(W,!0);try{s(ae)==="single"?await O(te,s(X)):s(ae)==="future"?await G(te,s(X)):s(ae)==="all"&&await Q(te),await w(),kt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{U(W,!1),U(me,{...f(),id:s(d)}),Ue("Event Deleted",3e3,"success"),tt()},800)}catch($){kt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{U(W,!1),console.error("Delete failed:",$),Ue("Failed to delete event. Please try again.",7e3,"danger")},800)}}else U(W,!0),Ma({title:"Delete Confirmation",message:In()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:$=>{$?Dt():U(W,!1)}})},Rn=te=>{if(s(d))try{const $=R({event:f(),newDate:te});kt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),Ue("Event cloned. Review and click Create to save.",5e3,"success"),f($),U(le,$.start_time?He(new Date($.start_time),"yyyy-MM-dd"):""),U(be,$.start_time?He(new Date($.start_time),"HH:mm"):""),U(Ce,$.end_time?He(new Date($.end_time),"HH:mm"):""),U(De,[]),U(P,!1),U(he,[]),U(fe,""),U(ve,!0),U(Ae,!0),U(ie,void 0),U(me,{...$}),U(ze,{dateInput:s(le),startTimeInput:s(be),endTimeInput:s(Ce),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch($){console.error("Clone failed:",$),Ue("Failed to clone event. Please try again.",7e3,"danger")}},Cn=()=>{Ls({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:s(le),callback:(te,$)=>{te&&$&&Rn($)}})},Fn=async()=>{if(s(d)&&!s(g)){Ue("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await B({title:f().title,event_type:f().event_type,category:f().category??"",description:f().description,location:f().location,is_all_day:f().is_all_day,dateInput:s(le),startTimeInput:s(be),endTimeInput:s(Ce),isRecurring:s(P),recurrenceFrequency:s(ee),recurringDays:s(P)?s(he):[],recurrenceEndDate:s(P)?s(fe):void 0,hasEndDate:s(ve)})){const we=_();we.length&&Ue(we.join(". ")+".  Please address accordingly.",0,"danger");return}const $=s(d)||f().meta_data?.recurring_parent_id;if($&&s(j)&&s(K)&&s(X)){if(U(se,null),U(re,!0),await new Promise(Re=>{const ot=setInterval(()=>{s(re)||(clearInterval(ot),Re())},100)}),!s(se)||s(W))return;Ue("Saving ..."),U(W,!0);const we=y({eventItem:f(),dateInput:s(le),startTimeInput:s(be),endTimeInput:s(Ce),attachments:s(De),isRecurring:s(b)&&s(P),recurrenceFrequency:s(ee),recurrenceInterval:s(ue),recurringDays:s(P)?s(he):[],recurrenceEndDate:s(P)?s(fe):"",hasEndDate:s(ve),monthlyType:s(Ee)});try{let Re;s(se)==="single"?await m($,s(X),we):s(se)==="future"?Re=await Y($,s(X),we):s(se)==="all"&&await C($,we),await w(),await ra(),kt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${f().title}`,1),U(W,!1),Re&&f({...f(),id:Re}),f(f().attachments=s(De),!0),U(me,{...f(),id:Re||$}),U(Ae,!1),Ue("Saved",3e3,"success"),tt()}catch(Re){kt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${f().title}`,1),setTimeout(()=>{U(W,!1),console.error("Save failed:",Re),Ue("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(s(W))return;Ue("Saving ..."),U(W,!0);try{const we=await M({id:s(d),eventItem:f(),dateInput:s(le),startTimeInput:s(be),endTimeInput:s(Ce),attachments:s(De),isRecurring:s(b)&&s(P),recurrenceFrequency:s(ee),recurrenceInterval:s(ue),recurringDays:s(P)?s(he):[],recurrenceEndDate:s(P)?s(fe):"",hasEndDate:s(ve),monthlyType:s(Ee)});we.event&&f({...f(),...we.event}),f(f().attachments=s(De),!0),await w(),kt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${f().title}`,1),setTimeout(()=>{U(W,!1),U(me,{...f(),id:s(d)}),U(Ae,!1),Ue("Saved",3e3,"success"),tt()},800)}catch(we){kt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${f().title}`,1),setTimeout(()=>{U(W,!1),console.error("Save failed:",we),Ue("Failed to save event. Please try again.",7e3,"danger")},800)}}};Ie(()=>V(f()),()=>{U(d,f().id)}),Ie(()=>V(f()),()=>{U(b,f().event_type==="calendar_event")}),Ie(()=>(s(b),s(P),s(he),s(fe)),()=>{!s(b)&&(s(P)||s(he).length>0||s(fe))&&(U(P,!1),U(ee,"weekly"),U(ue,1),U(he,[]),U(fe,""),U(ve,!0),U(Ee,"date"))}),Ie(()=>(V(f()),s(ie),s(me),s(Ae),s(le),s(be),s(Ce),s(P),s(ee),s(ue),s(he),s(fe),s(ve),s(Ee)),()=>{if(f()?.id!==s(ie)||f()?.start_time!==s(me).start_time||f()?.meta_data?.recurring_instance_index!==s(me).meta_data?.recurring_instance_index){U(W,!0);const te=s(Ae),$=f();setTimeout(()=>{const we=$.event_type==="calendar_event";if(U(le,we&&$.start_time?He(new Date($.start_time),"yyyy-MM-dd"):""),U(be,we&&$.start_time?He(new Date($.start_time),"HH:mm"):""),U(Ce,we&&$.end_time?He(new Date($.end_time),"HH:mm"):""),te||U(De,$.attachments?[...$.attachments]:[]),$.meta_data?.recurring_instance&&$.start_time?(U(K,$.recurrence_rule),U(j,!0),U(X,He(new Date($.start_time),"yyyy-MM-dd"))):(U(K,void 0),U(j,!1),U(X,void 0)),$.recurrence_rule){const Re=h($.recurrence_rule,$.recurrence_end_date);Re?(U(P,!0),U(ee,Re.frequency),U(ue,Re.interval),U(he,Re.recurringDays),U(fe,Re.recurrenceEndDate),U(ve,Re.hasEndDate),U(Ee,Re.monthlyType)):(U(P,!1),U(ee,"weekly"),U(ue,1),U(he,[]),U(fe,""),U(ve,!0),U(Ee,"date"))}else U(P,!1),U(ee,"weekly"),U(ue,1),U(he,[]),U(fe,""),U(ve,!0),U(Ee,"date");U(ie,$.id),U(me,{...$}),U(W,!1),U(Ae,!1),I(),U(ze,{dateInput:s(le),startTimeInput:s(be),endTimeInput:s(Ce),isRecurring:s(P),recurrenceFrequency:s(ee),recurrenceInterval:s(ue),recurringDays:[...s(he)],recurrenceEndDate:s(fe),hasEndDate:s(ve),monthlyType:s(Ee)})},200)}}),Ie(()=>(s(me),V(f()),s(De),s(le),s(ze),s(be),s(Ce),s(P),s(ee),s(ue),s(he),s(fe),s(ve),s(Ee)),()=>{U(g,s(me).title!==f().title||s(me).start_time!==f().start_time||s(me).end_time!==f().end_time||s(me).description!==f().description||s(me).location!==f().location||s(me).is_public!==f().is_public||s(me).category!==f().category||s(me).is_all_day!==f().is_all_day||JSON.stringify(s(De))!==JSON.stringify(f().attachments||[])||s(me).recurrence_rule!==f().recurrence_rule||s(me).recurrence_end_date!==f().recurrence_end_date||s(le)!==s(ze).dateInput||s(be)!==s(ze).startTimeInput||s(Ce)!==s(ze).endTimeInput||s(P)!==s(ze).isRecurring||s(ee)!==s(ze).recurrenceFrequency||s(ue)!==s(ze).recurrenceInterval||!Ve(s(he),s(ze).recurringDays)||s(fe)!==s(ze).recurrenceEndDate||s(ve)!==s(ze).hasEndDate||s(Ee)!==s(ze).monthlyType)}),Ie(()=>(i(),je),()=>{U(xe,i().has(je.Bishopric))}),Ie(()=>(V(f()),t()),()=>{U(l,!!f()?.id&&!!t()?.id&&f().meta_data?.submitted_by_user_id===t().id)}),Ie(()=>(s(l),s(xe)),()=>{U(n,s(l)&&!s(xe))}),Ie(()=>(s(n),V(f()),s(Le)),()=>{const te=s(n)?f()?.id??null:null;te&&te!==s(Le)?(U(Le,te),U(ke,[]),U(We,!1),U(Fe,!1),vt(),mt(te),ft(te)):!te&&s(Le)!==null&&(U(Le,null),U(ke,[]),U(We,!1),U(Fe,!1),vt())}),St(),ut();var Pr=Do(),dr=Ge(Pr),Or=z(dr);{var Pn=te=>{var $=vo();J(te,$)};de(Or,te=>{V(f()),s(d),Z(()=>f().recurrence_rule&&s(d))&&te(Pn)})}var ur=N(Or,2),fr=z(ur),On=N(z(fr),2);{var Un=te=>{var $=mo();pe(()=>$.disabled=s(W)||s(q)),Te("click",$,Cn),J(te,$)};de(On,te=>{s(d)&&te(Un)})}S(fr);var Sn=N(fr,2);{let te=pt(()=>s(W)||s(q));ss(Sn,{get disabled(){return s(te)},get name(){return o()},get validationErrors(){return r()},get title(){return f().title},set title($){f(f().title=$,!0)},get eventType(){return f().event_type},set eventType($){f(f().event_type=$,!0)},get category(){return f().category},set category($){f(f().category=$,!0)},get isPublic(){return f().is_public},set isPublic($){f(f().is_public=$,!0)},get description(){return f().description},set description($){f(f().description=$,!0)},$$legacy:!0})}S(ur);var Ur=N(ur,2);{var Ln=te=>{var $=ho(),we=Ge($);{let ot=pt(()=>s(W)||s(q));fs(we,{get disabled(){return s(ot)},get name(){return o()},get validationErrors(){return r()},get dateInput(){return s(le)},set dateInput(Be){U(le,Be)},get startTimeInput(){return s(be)},set startTimeInput(Be){U(be,Be)},get endTimeInput(){return s(Ce)},set endTimeInput(Be){U(Ce,Be)},get isAllDay(){return f().is_all_day},set isAllDay(Be){f(f().is_all_day=Be,!0)},$$legacy:!0})}var Re=N(we,2);{let ot=pt(()=>s(W)||s(q));_s(Re,{get disabled(){return s(ot)},get name(){return o()},get validationErrors(){return r()},get isRecurring(){return s(P)},set isRecurring(Be){U(P,Be)},get recurrenceFrequency(){return s(ee)},set recurrenceFrequency(Be){U(ee,Be)},get recurrenceInterval(){return s(ue)},set recurrenceInterval(Be){U(ue,Be)},get recurringDays(){return s(he)},set recurringDays(Be){U(he,Be)},get recurrenceEndDate(){return s(fe)},set recurrenceEndDate(Be){U(fe,Be)},get monthlyType(){return s(Ee)},set monthlyType(Be){U(Ee,Be)},get dateInput(){return s(le)},set dateInput(Be){U(le,Be)},$$legacy:!0})}J(te,$)};de(Ur,te=>{s(b)&&te(Ln)})}var Sr=N(Ur,2);{let te=pt(()=>s(W)||s(q));Rs(Sr,{get attachments(){return s(De)},get uploadingFile(){return s(q)},get disabled(){return s(te)},$$events:{upload:Ft,edit:Gt,remove:Et}})}var Lr=N(Sr,2);{let te=pt(()=>s(W)||s(q)),$=pt(()=>`${o()}-location`);xs(Lr,{get disabled(){return s(te)},get name(){return s($)},get value(){return f().location},set value(we){f(f().location=we,!0)},$$legacy:!0})}var zr=N(Lr,2);{var zn=te=>{var $=bo(),we=N(Ge($),2);{var Re=ot=>{var Be=yo(),qt=Ge(Be),Ze=z(qt),Tt=N(z(Ze),4),Vn=z(Tt);{var Xn=Nt=>{var Yt=po(),Nr=z(Yt,!0);S(Yt),pe(()=>ge(Nr,(s(ke),Z(()=>s(ke).length)))),J(Nt,Yt)};de(Vn,Nt=>{s(ke),Z(()=>s(ke).length>0)&&Nt(Xn)})}it(2),S(Tt),S(Ze),S(qt);var Zn=N(qt,2);{let Nt=pt(()=>(V(f()),Z(()=>f()?.title||"Event")));Ua(Zn,{get id(){return Ne},subtitle:"Discussion with Bishopric",get title(){return s(Nt)},className:"submitter-chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(Yt,Nr)=>{{let Jn=pt(()=>(t(),Z(()=>t()?.id??-1))),ea=pt(()=>s(W)||s(q));fa(Yt,{get comments(){return s(ke)},get currentUserId(){return s(Jn)},onSend:cr,onDelete:ht,get loading(){return s(Fe)},fullHeight:!0,get disabled(){return s(ea)}})}},$$slots:{default:!0}})}pe(()=>Me(Ze,"aria-controls",Ne)),Te("click",Ze,xt),J(ot,Be)};de(we,ot=>{s(n)&&ot(Re)})}J(te,$)};de(zr,te=>{s(xe)||te(zn)})}var vr=N(zr,2),mr=z(vr),Bn=z(mr);{var Hn=te=>{var $=go();pe(()=>$.disabled=s(W)||s(q)),Te("click",$,Mn),J(te,$)};de(Bn,te=>{(s(d)||s(j))&&E()&&te(Hn)})}S(mr);var Br=N(mr,2),hr=z(Br),qn=N(hr,2);{var Nn=te=>{var $=Eo(),we=z($);{var Re=Ze=>{var Tt=_o();J(Ze,Tt)},ot=Ze=>{var Tt=wo();J(Ze,Tt)};de(we,Ze=>{s(d)||s(j)?Ze(Re):Ze(ot,!1)})}var Be=N(we,2);{var qt=Ze=>{var Tt=xo();J(Ze,Tt)};de(Be,Ze=>{s(g)&&Ze(qt)})}S($),pe(()=>$.disabled=s(W)||s(q)),Te("click",$,Fn),J(te,$)};de(qn,te=>{(s(d)||s(j)||T())&&te(Nn)})}S(Br),S(vr);var pr=N(vr,2),Kt=z(pr),Yn=z(Kt,!0);S(Kt);var yr=N(Kt,2);let Hr;var Wn=z(yr);ln(Wn,{size:"xs"}),S(yr),S(pr);var Qn=N(pr,2);{var $n=te=>{{let $=pt(()=>s(W)||s(q));ua(te,{get disabled(){return s($)},get reloadEvents(){return w},get eventItem(){return f()},set eventItem(we){f(we)},$$legacy:!0})}};de(Qn,te=>{s(xe)&&te($n)})}S(dr);var qr=N(dr,2);{var jn=te=>{Fs(te,{get eventTitle(){return V(f()),Z(()=>f().title)},get occurrenceDate(){return s(X)},callback:$=>{U(se,$),U(re,!1)}})};de(qr,te=>{s(re)&&s(X)&&te(jn)})}var Gn=N(qr,2);{var Kn=te=>{Os(te,{get eventTitle(){return V(f()),Z(()=>f().title)},get occurrenceDate(){return s(X)},callback:$=>{U(ae,$),U(ne,!1)}})};de(Gn,te=>{s(ne)&&s(X)&&te(Kn)})}pe(()=>{hr.disabled=s(W)||s(q),st(Kt,1,`fw-lighter fst-italic text-${s(_e),Z(()=>s(_e).type)??""}`,"svelte-zsu5u8"),ge(Yn,(s(_e),Z(()=>s(_e).message))),Hr=st(yr,1,"",null,Hr,{"d-none":!s(W)})}),Te("click",hr,tt),J(c,Pr),ct(),u()}const Kr={RES:[je.ReliefSociety],ELQ:[je.EldersQuorum],YOU:[je.YoungWomen,je.YoungMen],YOW:[je.YoungWomen],YWP:[je.YoungWomen],YWR:[je.YoungWomen],YWD:[je.YoungWomen],YOM:[je.YoungMen],YMD:[je.YoungMen],YMT:[je.YoungMen],YMP:[je.YoungMen],PRI:[je.Primary],PRN:[je.Primary],PRS:[je.Primary],PRC:[je.Primary],PRV:[je.Primary],SUS:[je.SundaySchool]},ko=c=>{const e=new Set,i=c.meta_data?.submitted_by_organizations;if(i?.length)return i.forEach(r=>e.add(r)),e;const t=c.meta_data?.category;return t&&Kr[t]&&Kr[t].forEach(r=>e.add(r)),e},ul=(c,e)=>{if(!c)return!1;const{currentUserId:i,isPrivileged:t,canEditOwnOrgEvents:r,userOrganizations:a}=e;if(t)return!0;const u=c.meta_data?.submitted_by_user_id;if(i&&typeof u=="number"&&u===i)return!0;if(!r)return!1;const d=ko(c);if(!d.size)return!1;for(const b of d)if(a.has(b))return!0;return!1};var Ao=oe('<span class="text-muted">•</span>'),To=oe("<span> </span> <!>",1),Io=oe('<span class="text-muted">•</span>'),Mo=oe('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Ro=oe('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Co=oe('<div class="small text-muted posted-meta svelte-1bpzga2">Posted <!> <!></div>'),Fo=oe('<div class="small text-muted posted-meta svelte-1bpzga2">Last edited <!> <!></div>'),Po=oe('<div class="small svelte-1bpzga2"><!> <!> <!></div>'),Oo=oe('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),Uo=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),So=oe('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Lo=oe('<div class="details-container svelte-1bpzga2"><!> <!></div>'),zo=oe('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),Bo=oe('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function fl(c,e){lt(e,!1);const i=ce(),t=ce(),r=ce(),a=ce(),u=ce(),d=ce(),b=ce(),g=ce(),l=ce();let n=ye(e,"item",8),o=ye(e,"showDetails",12,!1),v=ye(e,"searchQuery",8,"");const f=O=>O<1024?O+" B":O<1024*1024?(O/1024).toFixed(1)+" KB":(O/(1024*1024)).toFixed(1)+" MB",E=O=>O.startsWith("image/"),T=O=>{window.open(O,"_blank")},w=O=>{if(!O)return"";try{return He(Wt(O),"MMM d, yyyy 'at' h:mm a")}catch{return""}},H=()=>{s(t)&&o(!o())},L=O=>{s(t)&&(O.key==="Enter"||O.key===" ")&&H()};Ie(()=>V(n()),()=>{U(i,n().attachments&&n().attachments.length>0?n().attachments.find(O=>E(O.type)):void 0)}),Ie(()=>V(n()),()=>{U(t,!!(n().description||n().attachments&&n().attachments.length>0))}),Ie(()=>V(n()),()=>{U(r,n().meta_data?.submitted_at??n().created_at)}),Ie(()=>s(r),()=>{U(a,w(s(r)))}),Ie(()=>V(n()),()=>{U(u,n().meta_data?.submitted_by_name)}),Ie(()=>(s(a),s(u)),()=>{U(d,!!(s(a)||s(u)))}),Ie(()=>V(n()),()=>{U(b,w(n().meta_data?.edited_at))}),Ie(()=>V(n()),()=>{U(g,n().meta_data?.edited_by_name)}),Ie(()=>(s(b),s(g)),()=>{U(l,!!(s(b)||s(g)))}),St(),ut();var F=Bo(),B=z(F),_=z(B),I=z(_),h=z(I);zt(h,()=>(V(It),V(n()),V(v()),Z(()=>It(n().title||"",v())))),S(I);var p=N(I,2),x=z(p);{var k=O=>{var G=To(),Q=Ge(G),W=z(Q,!0);S(Q);var q=N(Q,2);{var P=ee=>{var ue=Ao();J(ee,ue)};de(q,ee=>{V(n()),Z(()=>n().location||n().description||n().attachments&&n().attachments.length>0)&&ee(P)})}pe((ee,ue)=>{st(Q,1,`badge rounded-pill bg-color-${ee??""}`,"svelte-1bpzga2"),ge(W,ue)},[()=>(V(Mt),V(n()),Z(()=>Mt(n()?.meta_data?.category)?.color_number)),()=>(V(Mt),V(n()),Z(()=>Mt(n()?.meta_data?.category)?.label))]),J(O,G)};de(x,O=>{V(n()),Z(()=>n()?.meta_data?.category)&&O(k)})}var A=N(x,2);{var M=O=>{var G=Mo(),Q=Ge(G),W=z(Q);zt(W,()=>(V(It),V(n()),V(v()),Z(()=>It(n().location,v())))),S(Q);var q=N(Q,2);{var P=ee=>{var ue=Io();J(ee,ue)};de(q,ee=>{V(n()),Z(()=>n().description||n().attachments&&n().attachments.length>0)&&ee(P)})}J(O,G)};de(A,O=>{V(n()),Z(()=>n().location)&&O(M)})}var D=N(A,2);{var R=O=>{var G=Ro(),Q=z(G);{var W=P=>{var ee=rt("Hide");J(P,ee)},q=P=>{var ee=rt("Show");J(P,ee)};de(Q,P=>{o()?P(W):P(q,!1)})}it(),S(G),J(O,G)};de(D,O=>{V(n()),Z(()=>n().description||n().attachments&&n().attachments.length>0)&&O(R)})}S(p);var y=N(p,2);{var m=O=>{var G=Lo(),Q=z(G);{var W=ee=>{var ue=Po(),he=z(ue);zt(he,()=>(V(Jt),V(n()),V(v()),Z(()=>Jt(n().description,v()))));var fe=N(he,2);{var ve=Ae=>{var j=Co(),X=N(z(j));{var K=ne=>{var ae=rt();pe(()=>ge(ae,s(a))),J(ne,ae)};de(X,ne=>{s(a)&&ne(K)})}var re=N(X,2);{var se=ne=>{var ae=Qt(),ie=Ge(ae);{var me=le=>{var be=rt();pe(()=>ge(be,`by ${s(u)??""}`)),J(le,be)},_e=le=>{var be=rt();pe(()=>ge(be,`by ${s(u)??""}`)),J(le,be)};de(ie,le=>{s(a)?le(me):le(_e,!1)})}J(ne,ae)};de(re,ne=>{s(u)&&ne(se)})}S(j),J(Ae,j)};de(fe,Ae=>{s(d)&&Ae(ve)})}var Ee=N(fe,2);{var De=Ae=>{var j=Fo(),X=N(z(j));{var K=ne=>{var ae=rt();pe(()=>ge(ae,s(b))),J(ne,ae)};de(X,ne=>{s(b)&&ne(K)})}var re=N(X,2);{var se=ne=>{var ae=rt();pe(()=>ge(ae,`by ${s(g)??""}`)),J(ne,ae)};de(re,ne=>{s(g)&&ne(se)})}S(j),J(Ae,j)};de(Ee,Ae=>{s(l)&&Ae(De)})}S(ue),J(ee,ue)};de(Q,ee=>{V(n()),Z(()=>n().description)&&ee(W)})}var q=N(Q,2);{var P=ee=>{var ue=So(),he=N(z(ue),2);$t(he,5,()=>(V(n()),Z(()=>n().attachments)),fe=>fe.id,(fe,ve)=>{var Ee=Qt(),De=Ge(Ee);{var Ae=X=>{var K=Oo(),re=z(K),se=z(re);S(re);var ne=N(re,2),ae=z(ne),ie=z(ae,!0);S(ae),S(ne),S(K),pe(()=>{Me(re,"title",`Open ${s(ve),Z(()=>s(ve).name)??""}`),Me(se,"src",(s(ve),Z(()=>s(ve).url))),Me(se,"alt",(s(ve),Z(()=>s(ve).name))),ge(ie,(s(ve),Z(()=>s(ve).name)))}),Te("click",re,er(()=>T(s(ve).url))),J(X,K)},j=X=>{var K=Uo(),re=N(z(K),2),se=z(re,!0);S(re);var ne=N(re,2),ae=z(ne);S(ne),S(K),pe(ie=>{Me(K,"title",`Open ${s(ve),Z(()=>s(ve).name)??""}`),ge(se,(s(ve),Z(()=>s(ve).name))),ge(ae,`(${ie??""})`)},[()=>(s(ve),Z(()=>f(s(ve).size)))]),Te("click",K,er(()=>T(s(ve).url))),J(X,K)};de(De,X=>{s(ve),Z(()=>E(s(ve).type))?X(Ae):X(j,!1)})}J(fe,Ee)}),S(he),S(ue),J(ee,ue)};de(q,ee=>{V(n()),Z(()=>n().attachments&&n().attachments.length>0)&&ee(P)})}S(G),J(O,G)};de(y,O=>{o()&&O(m)})}S(_);var Y=N(_,2);{var C=O=>{var G=zo(),Q=z(G);S(G),pe(()=>{Me(Q,"src",(s(i),Z(()=>s(i).url))),Me(Q,"alt",(s(i),Z(()=>s(i).name)))}),J(O,G)};de(Y,O=>{s(i)&&O(C)})}S(B),S(F),pe(()=>tn(F,s(t)?"cursor: pointer;":"")),Te("keydown",F,L),Te("click",F,H),J(c,F),ct()}export{dl as A,ll as E,cl as a,fl as b,ul as c,nr as p};
