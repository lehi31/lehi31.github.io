import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as at,ai as Me,D as B,E as le,w as V,g as l,aj as Ot,c as H,s as W,u as te,r as U,t as pe,a as it,f as je,F as nt,i as ur,am as Dn,R as Rt,as as lr,z as An}from"./CPOcesE7.js";import{p as he,i as ce,e as xe,s as ge,b as fr,a as Ur,k as Tn,m as In,u as Mn}from"./opPvMm1W.js";import{f as oe,a as ne,c as qt,t as Je}from"./YsHTGu5k.js";import{e as Nt,i as Sr}from"./DAwrR-3T.js";import{f as zt,h as St,i as kt,b as Dt,t as At,j as Gt,g as Lr,D as Rn,k as Ft,l as Cn,m as Fn,u as Pn,n as zr,o as Yt,p as Pt,q as Hr,B as On}from"./Da1xw-WN.js";import{e as Br,s as Ie,b as vr,r as Ve}from"./BfgZi7SE.js";import{w as qr,t as Et,v as et,H as Un,I as Sn,J as Ln,K as zn,k as mr,G as Nr,L as Hn,F as Bn,l as Yr,B as qn,M as Ir,N as Nn,Q as Mr,R as Yn,c as rt,h as Wn,f as Se,p as Bt,A as Xe,g as Wr,T as Qn,O as We}from"./CRguhLJ9.js";import{s as Kt}from"./CdEA5IGF.js";import{i as lt}from"./C2Q_9cr2.js";import{R as Fe}from"./apYiRYNW.js";import{S as Qr}from"./cMhuJJIW.js";import{b as bt,a as gr,c as cr}from"./QDlYjqxz.js";import{b as Lt}from"./C34nsrD6.js";import{b as Tt}from"./DLuN8Kcu.js";import{c as $n,o as jn,w as Gn,g as hr}from"./DHXte27T.js";import{t as xt}from"./r7-tBYgy.js";import{c as Kn}from"./DZF19kDD.js";import{c as Vn,a as ht,e as Rr,f as Xn,d as Zn,V as Jn}from"./Bai7YTd4.js";import{_ as pr}from"./CmsKOCeN.js";function ea(){return Object.assign({},qr())}function ta(d){let i=Et(d).getDay();return i===0&&(i=7),i}function ra(d,e){const i=e instanceof Date?et(e,0):new e(0);return i.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),i.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),i}const na=10;class $r{subPriority=0;validate(e,i){return!0}}class aa extends $r{constructor(e,i,r,n,a){super(),this.value=e,this.validateValue=i,this.setValue=r,this.priority=n,a&&(this.subPriority=a)}validate(e,i){return this.validateValue(e,this.value,i)}set(e,i,r){return this.setValue(e,i,this.value,r)}}class ia extends $r{priority=na;subPriority=-1;set(e,i){return i.timestampIsSet?e:et(e,ra(e,Date))}}class Re{run(e,i,r,n){const a=this.parse(e,i,r,n);return a?{setter:new aa(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,i,r){return!0}}class sa extends Re{priority=140;parse(e,i,r){switch(i){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,i,r){return i.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const qe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},yt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ne(d,e){return d&&{value:e(d.value),rest:d.rest}}function Le(d,e){const i=e.match(d);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function gt(d,e){const i=e.match(d);if(!i)return null;if(i[0]==="Z")return{value:0,rest:e.slice(1)};const r=i[1]==="+"?1:-1,n=i[2]?parseInt(i[2],10):0,a=i[3]?parseInt(i[3],10):0,c=i[5]?parseInt(i[5],10):0;return{value:r*(n*Un+a*Sn+c*Ln),rest:e.slice(i[0].length)}}function jr(d){return Le(qe.anyDigitsSigned,d)}function ze(d,e){switch(d){case 1:return Le(qe.singleDigit,e);case 2:return Le(qe.twoDigits,e);case 3:return Le(qe.threeDigits,e);case 4:return Le(qe.fourDigits,e);default:return Le(new RegExp("^\\d{1,"+d+"}"),e)}}function Vt(d,e){switch(d){case 1:return Le(qe.singleDigitSigned,e);case 2:return Le(qe.twoDigitsSigned,e);case 3:return Le(qe.threeDigitsSigned,e);case 4:return Le(qe.fourDigitsSigned,e);default:return Le(new RegExp("^-?\\d{1,"+d+"}"),e)}}function br(d){switch(d){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Gr(d,e){const i=e>0,r=i?e:1-e;let n;if(r<=50)n=d||100;else{const a=r+50,c=Math.trunc(a/100)*100,u=d>=a%100;n=d+c-(u?100:0)}return i?n:1-n}function Kr(d){return d%400===0||d%4===0&&d%100!==0}class oa extends Re{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,i,r){const n=a=>({year:a,isTwoDigitYear:i==="yy"});switch(i){case"y":return Ne(ze(4,e),n);case"yo":return Ne(r.ordinalNumber(e,{unit:"year"}),n);default:return Ne(ze(i.length,e),n)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r){const n=e.getFullYear();if(r.isTwoDigitYear){const c=Gr(r.year,n);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class la extends Re{priority=130;parse(e,i,r){const n=a=>({year:a,isTwoDigitYear:i==="YY"});switch(i){case"Y":return Ne(ze(4,e),n);case"Yo":return Ne(r.ordinalNumber(e,{unit:"year"}),n);default:return Ne(ze(i.length,e),n)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r,n){const a=zn(e,n);if(r.isTwoDigitYear){const u=Gr(r.year,a);return e.setFullYear(u,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),mr(e,n)}const c=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(c,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),mr(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class ca extends Re{priority=130;parse(e,i){return Vt(i==="R"?4:i.length,e)}set(e,i,r){const n=et(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Nr(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class da extends Re{priority=130;parse(e,i){return Vt(i==="u"?4:i.length,e)}set(e,i,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class ua extends Re{priority=120;parse(e,i,r){switch(i){case"Q":case"QQ":return ze(i.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class fa extends Re{priority=120;parse(e,i,r){switch(i){case"q":case"qq":return ze(i.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class va extends Re{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,i,r){const n=a=>a-1;switch(i){case"M":return Ne(Le(qe.month,e),n);case"MM":return Ne(ze(2,e),n);case"Mo":return Ne(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ma extends Re{priority=110;parse(e,i,r){const n=a=>a-1;switch(i){case"L":return Ne(Le(qe.month,e),n);case"LL":return Ne(ze(2,e),n);case"Lo":return Ne(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function ha(d,e,i){const r=Et(d),n=Hn(r,i)-e;return r.setDate(r.getDate()-n*7),r}class pa extends Re{priority=100;parse(e,i,r){switch(i){case"w":return Le(qe.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return ze(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r,n){return mr(ha(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ya(d,e){const i=Et(d),r=Bn(i)-e;return i.setDate(i.getDate()-r*7),i}class ga extends Re{priority=100;parse(e,i,r){switch(i){case"I":return Le(qe.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return ze(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r){return Nr(ya(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ba=[31,28,31,30,31,30,31,31,30,31,30,31],_a=[31,29,31,30,31,30,31,31,30,31,30,31];class wa extends Re{priority=90;subPriority=1;parse(e,i,r){switch(i){case"d":return Le(qe.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return ze(i.length,e)}}validate(e,i){const r=e.getFullYear(),n=Kr(r),a=e.getMonth();return n?i>=1&&i<=_a[a]:i>=1&&i<=ba[a]}set(e,i,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class xa extends Re{priority=90;subpriority=1;parse(e,i,r){switch(i){case"D":case"DD":return Le(qe.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return ze(i.length,e)}}validate(e,i){const r=e.getFullYear();return Kr(r)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function _r(d,e,i){const r=qr(),n=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Et(d),c=a.getDay(),y=(e%7+7)%7,b=7-n,o=e<0||e>6?e-(c+b)%7:(y+b)%7-(c+b)%7;return zt(a,o)}class Ea extends Re{priority=90;parse(e,i,r){switch(i){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=_r(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ka extends Re{priority=90;parse(e,i,r,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(i){case"e":case"ee":return Ne(ze(i.length,e),a);case"eo":return Ne(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=_r(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Da extends Re{priority=90;parse(e,i,r,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(i){case"c":case"cc":return Ne(ze(i.length,e),a);case"co":return Ne(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=_r(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Aa(d,e){const i=Et(d),r=ta(i),n=e-r;return zt(i,n)}class Ta extends Re{priority=90;parse(e,i,r){const n=a=>a===0?7:a;switch(i){case"i":case"ii":return ze(i.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ne(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Ne(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Ne(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return Ne(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,i){return i>=1&&i<=7}set(e,i,r){return e=Aa(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Ia extends Re{priority=80;parse(e,i,r){switch(i){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(br(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Ma extends Re{priority=80;parse(e,i,r){switch(i){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(br(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Ra extends Re{priority=80;parse(e,i,r){switch(i){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(br(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Ca extends Re{priority=70;parse(e,i,r){switch(i){case"h":return Le(qe.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return ze(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Fa extends Re{priority=70;parse(e,i,r){switch(i){case"H":return Le(qe.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return ze(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Pa extends Re{priority=70;parse(e,i,r){switch(i){case"K":return Le(qe.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return ze(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Oa extends Re{priority=70;parse(e,i,r){switch(i){case"k":return Le(qe.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return ze(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class Ua extends Re{priority=60;parse(e,i,r){switch(i){case"m":return Le(qe.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return ze(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class Sa extends Re{priority=50;parse(e,i,r){switch(i){case"s":return Le(qe.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return ze(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class La extends Re{priority=30;parse(e,i){const r=n=>Math.trunc(n*Math.pow(10,-i.length+3));return Ne(ze(i.length,e),r)}set(e,i,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class za extends Re{priority=10;parse(e,i){switch(i){case"X":return gt(yt.basicOptionalMinutes,e);case"XX":return gt(yt.basic,e);case"XXXX":return gt(yt.basicOptionalSeconds,e);case"XXXXX":return gt(yt.extendedOptionalSeconds,e);case"XXX":default:return gt(yt.extended,e)}}set(e,i,r){return i.timestampIsSet?e:et(e,e.getTime()-Yr(e)-r)}incompatibleTokens=["t","T","x"]}class Ha extends Re{priority=10;parse(e,i){switch(i){case"x":return gt(yt.basicOptionalMinutes,e);case"xx":return gt(yt.basic,e);case"xxxx":return gt(yt.basicOptionalSeconds,e);case"xxxxx":return gt(yt.extendedOptionalSeconds,e);case"xxx":default:return gt(yt.extended,e)}}set(e,i,r){return i.timestampIsSet?e:et(e,e.getTime()-Yr(e)-r)}incompatibleTokens=["t","T","X"]}class Ba extends Re{priority=40;parse(e){return jr(e)}set(e,i,r){return[et(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class qa extends Re{priority=20;parse(e){return jr(e)}set(e,i,r){return[et(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Na={G:new sa,y:new oa,Y:new la,R:new ca,u:new da,Q:new ua,q:new fa,M:new va,L:new ma,w:new pa,I:new ga,d:new wa,D:new xa,E:new Ea,e:new ka,c:new Da,i:new Ta,a:new Ia,b:new Ma,B:new Ra,h:new Ca,H:new Fa,K:new Pa,k:new Oa,m:new Ua,s:new Sa,S:new La,X:new za,x:new Ha,t:new Ba,T:new qa},Ya=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qa=/^'([^]*?)'?$/,$a=/''/g,ja=/\S/,Ga=/[a-zA-Z]/;function Xt(d,e,i,r){const n=ea(),a=r?.locale??n.locale??qn,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0;if(e==="")return d===""?Et(i):et(i,NaN);const y={firstWeekContainsDate:c,weekStartsOn:u,locale:a},b=[new ia],o=e.match(Wa).map(x=>{const I=x[0];if(I in Ir){const E=Ir[I];return E(x,a.formatLong)}return x}).join("").match(Ya),t=[];for(let x of o){!r?.useAdditionalWeekYearTokens&&Nn(x)&&Mr(x,e,d),!r?.useAdditionalDayOfYearTokens&&Yn(x)&&Mr(x,e,d);const I=x[0],E=Na[I];if(E){const{incompatibleTokens:N}=E;if(Array.isArray(N)){const P=t.find(L=>N.includes(L.token)||L.token===I);if(P)throw new RangeError(`The format string mustn't contain \`${P.fullToken}\` and \`${x}\` at the same time`)}else if(E.incompatibleTokens==="*"&&t.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);t.push({token:I,fullToken:x});const O=E.run(d,x,a.match,y);if(!O)return et(i,NaN);b.push(O.setter),d=O.rest}else{if(I.match(Ga))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(x==="''"?x="'":I==="'"&&(x=Ka(x)),d.indexOf(x)===0)d=d.slice(x.length);else return et(i,NaN)}}if(d.length>0&&ja.test(d))return et(i,NaN);const s=b.map(x=>x.priority).sort((x,I)=>I-x).filter((x,I,E)=>E.indexOf(x)===I).map(x=>b.filter(I=>I.priority===x).sort((I,E)=>E.subPriority-I.subPriority)).map(x=>x[0]);let f=Et(i);if(isNaN(f.getTime()))return et(i,NaN);const g={};for(const x of s){if(!x.validate(f,y))return et(i,NaN);const I=x.set(f,g,y);Array.isArray(I)?(f=I[0],Object.assign(g,I[1])):f=I}return et(i,f)}function Ka(d){return d.match(Qa)[1].replace($a,"'")}function Va(d,e){const i=Et(d);return i.setHours(e),i}function Xa(d,e){const i=Et(d);return i.setMinutes(e),i}var Za=oe('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),Ja=oe('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),ei=oe('<span class="d-block small svelte-1rksp2z"> </span>'),ti=oe('<span class="text-muted">•</span>'),ri=oe("<span> </span> <!>",1),ni=oe('<span class="text-muted">•</span>'),ai=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),ii=oe('<span class="text-muted">•</span>'),si=oe('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),oi=oe('<span class="text-muted">•</span>'),li=oe('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),ci=oe('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),di=oe('<div class="small svelte-1rksp2z"><!></div>'),ui=oe('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),fi=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),vi=oe('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),mi=oe('<div class="small text-muted posted-meta svelte-1rksp2z">Posted <!> <!></div>'),hi=oe('<div class="small text-muted posted-meta svelte-1rksp2z">Last edited <!> <!></div>'),pi=oe('<div class="details-container svelte-1rksp2z"><!> <!> <!> <!></div>'),yi=oe('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),gi=oe('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="fw-bold svelte-1rksp2z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function wo(d,e){at(e,!1);const i=le(),r=le(),n=le(),a=le(),c=le(),u=le(),y=le(),b=le(),o=le();let t=he(e,"item",8),s=he(e,"showDetails",12,!1),f=he(e,"showDate",8,!0),g=he(e,"searchQuery",8,"");const x=G=>{if(!G)return"";const re=Bt(G),$=At(re,Xe);return Se($,"h:mm aa")},I=G=>{if(!G)return"";const re=Bt(G),$=At(re,Xe);return Se($,"EEE")},E=G=>{if(!G)return"";const re=Bt(G),$=At(re,Xe);return Se($,"MMM, dd")},N=()=>{l(r)&&s(!s())},O=G=>{l(r)&&(G.key==="Enter"||G.key===" ")&&N()},P=G=>G<1024?G+" B":G<1024*1024?(G/1024).toFixed(1)+" KB":(G/(1024*1024)).toFixed(1)+" MB",L=G=>G.startsWith("image/"),_=G=>{window.open(G,"_blank")},M=G=>{if(!G)return"";try{return Se(Bt(G),"MMM d, yyyy 'at' h:mm a")}catch{return""}},m=G=>{try{const $=Fe.fromString(G).origOptions,J=$.interval||1,ie=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],X=["","1st","2nd","3rd","4th","5th"];if($.freq===Fe.DAILY)return J===1?"Repeats daily":`Repeats every ${J} days`;if($.freq===Fe.WEEKLY){if($.byweekday){const ae=(Array.isArray($.byweekday)?$.byweekday:[$.byweekday]).map(be=>{const _e=typeof be=="number"?be:be.weekday,fe=_e===6?0:_e+1;return ie[fe]});return J===1?ae.length===1?`Repeats every ${ae[0]}`:`Repeats on ${ae.join(", ")}`:`Repeats every ${J} weeks on ${ae.join(", ")}`}return J===1?"Repeats weekly":`Repeats every ${J} weeks`}if($.freq===Fe.MONTHLY){if($.byweekday){const ae=(Array.isArray($.byweekday)?$.byweekday:[$.byweekday])[0];if(ae&&typeof ae=="object"&&"n"in ae&&"weekday"in ae){const be=ae.weekday,_e=be===6?0:be+1,fe=ae.n,ve=X[fe]||`${fe}th`;return J===1?`Repeats on the ${ve} ${ie[_e]} of the month`:`Repeats on the ${ve} ${ie[_e]} every ${J} months`}}if($.bymonthday){const ee=Array.isArray($.bymonthday)?$.bymonthday[0]:$.bymonthday,ae=ee===1?"st":ee===2?"nd":ee===3?"rd":"th";return J===1?`Repeats on the ${ee}${ae} of the month`:`Repeats on the ${ee}${ae} every ${J} months`}return J===1?"Repeats monthly":`Repeats every ${J} months`}if($.freq===Fe.YEARLY){if($.bymonth&&$.bymonthday){const ee=["","January","February","March","April","May","June","July","August","September","October","November","December"],ae=Array.isArray($.bymonth)?$.bymonth[0]:$.bymonth,be=Array.isArray($.bymonthday)?$.bymonthday[0]:$.bymonthday,_e=be===1?"st":be===2?"nd":be===3?"rd":"th";return J===1?`Repeats every ${ee[ae]} ${be}${_e}`:`Repeats every ${J} years on ${ee[ae]} ${be}${_e}`}return J===1?"Repeats yearly":`Repeats every ${J} years`}return"Repeats"}catch{return"Repeats"}};let h=le("");Me(()=>V(f()),()=>{B(h,f()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Me(()=>V(t()),()=>{B(i,t().attachments?.find(G=>L(G.type)))}),Me(()=>V(t()),()=>{B(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Me(()=>V(t()),()=>{B(n,t().meta_data?.submitted_at??t().created_at)}),Me(()=>l(n),()=>{B(a,M(l(n)))}),Me(()=>V(t()),()=>{B(c,t().meta_data?.submitted_by_name)}),Me(()=>(l(a),l(c)),()=>{B(u,!!(l(a)||l(c)))}),Me(()=>V(t()),()=>{B(y,M(t().meta_data?.edited_at))}),Me(()=>V(t()),()=>{B(b,t().meta_data?.edited_by_name)}),Me(()=>(l(y),l(b)),()=>{B(o,!!(l(y)||l(b)))}),Ot(),lt();var w=gi(),D=H(w);{var A=G=>{var re=Za(),$=H(re),J=H($,!0);U($);var ie=W($,2),X=H(ie),ee=H(X,!0);U(X),U(ie),U(re),pe((ae,be)=>{ge(J,ae),ge(ee,be)},[()=>(V(t()),te(()=>I(t().start_time))),()=>(V(t()),te(()=>E(t().start_time)))]),ne(G,re)};ce(D,G=>{f()&&G(A)})}var R=W(D,2),k=H(R),C=H(k),p=H(C);St(p,()=>(V(kt),V(t()),V(g()),te(()=>kt(t().title||"",g())))),U(C);var v=W(C,2);{var z=G=>{var re=Ja();ne(G,re)},T=G=>{var re=ei(),$=H(re);U(re),pe((J,ie)=>ge($,`${J??""} to ${ie??""}`),[()=>(V(t()),te(()=>x(t().start_time))),()=>(V(t()),te(()=>x(t().end_time)))]),ne(G,re)};ce(v,G=>{V(t()),te(()=>t().is_all_day)?G(z):G(T,!1)})}var F=W(v,2),j=H(F);{var q=G=>{var re=ri(),$=je(re),J=H($,!0);U($);var ie=W($,2);{var X=ee=>{var ae=ti();ne(ee,ae)};ce(ie,ee=>{V(t()),te(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&ee(X)})}pe((ee,ae)=>{rt($,1,`badge rounded-pill bg-color-${ee??""}`,"svelte-1rksp2z"),ge(J,ae)},[()=>(V(Dt),V(t()),te(()=>Dt(t()?.meta_data?.category)?.color_number)),()=>(V(Dt),V(t()),te(()=>Dt(t()?.meta_data?.category)?.label))]),ne(G,re)};ce(j,G=>{V(t()),te(()=>t()?.meta_data?.category)&&G(q)})}var Q=W(j,2);{var Y=G=>{var re=ai(),$=je(re),J=W(H($));U($);var ie=W($,2);{var X=ee=>{var ae=ni();ne(ee,ae)};ce(ie,ee=>{V(t()),te(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&ee(X)})}pe(ee=>ge(J,` ${ee??""}`),[()=>(V(t()),te(()=>m(t().recurrence_rule)))]),ne(G,re)},S=G=>{var re=qt(),$=je(re);{var J=ie=>{var X=si(),ee=W(je(X),2);{var ae=be=>{var _e=ii();ne(be,_e)};ce(ee,be=>{V(t()),te(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&be(ae)})}ne(ie,X)};ce($,ie=>{V(t()),te(()=>t()?.meta_data?.recurring_instance)&&ie(J)},!0)}ne(G,re)};ce(Q,G=>{V(t()),te(()=>t().recurrence_rule)?G(Y):G(S,!1)})}var Z=W(Q,2);{var de=G=>{var re=li(),$=je(re),J=H($);St(J,()=>(V(kt),V(t()),V(g()),te(()=>kt(t().location,g())))),U($);var ie=W($,2);{var X=ee=>{var ae=oi();ne(ee,ae)};ce(ie,ee=>{V(t()),te(()=>t().description||t().attachments&&t().attachments.length>0)&&ee(X)})}ne(G,re)};ce(Z,G=>{V(t()),te(()=>t().location)&&G(de)})}var ye=W(Z,2);{var ue=G=>{var re=ci(),$=H(re);{var J=X=>{var ee=Je("Hide");ne(X,ee)},ie=X=>{var ee=Je("Show");ne(X,ee)};ce($,X=>{s()?X(J):X(ie,!1)})}nt(),U(re),ne(G,re)};ce(ye,G=>{V(t()),te(()=>t().description||t().attachments&&t().attachments.length>0)&&G(ue)})}U(F);var me=W(F,2);{var De=G=>{var re=pi(),$=H(re);{var J=fe=>{var ve=di(),He=H(ve);St(He,()=>(V(Gt),V(t()),V(g()),te(()=>Gt(t().description,g())))),U(ve),ne(fe,ve)};ce($,fe=>{V(t()),te(()=>t().description)&&fe(J)})}var ie=W($,2);{var X=fe=>{var ve=vi(),He=W(H(ve),2);Nt(He,5,()=>(V(t()),te(()=>t().attachments)),Ze=>Ze.id,(Ze,we)=>{var Ge=qt(),Ae=je(Ge);{var Pe=Ye=>{var Ue=ui(),Oe=H(Ue),$e=H(Oe);U(Oe);var ct=W(Oe,2),dt=H(ct),ut=H(dt,!0);U(dt),U(ct),U(Ue),pe(()=>{Ie(Oe,"title",`Open ${l(we),te(()=>l(we).name)??""}`),Ie($e,"src",(l(we),te(()=>l(we).url))),Ie($e,"alt",(l(we),te(()=>l(we).name))),ge(ut,(l(we),te(()=>l(we).name)))}),xe("click",Oe,Kt(()=>_(l(we).url))),ne(Ye,Ue)},Qe=Ye=>{var Ue=fi(),Oe=W(H(Ue),2),$e=H(Oe,!0);U(Oe);var ct=W(Oe,2),dt=H(ct);U(ct),U(Ue),pe(ut=>{Ie(Ue,"title",`Open ${l(we),te(()=>l(we).name)??""}`),ge($e,(l(we),te(()=>l(we).name))),ge(dt,`(${ut??""})`)},[()=>(l(we),te(()=>P(l(we).size)))]),xe("click",Ue,Kt(()=>_(l(we).url))),ne(Ye,Ue)};ce(Ae,Ye=>{l(we),te(()=>L(l(we).type))?Ye(Pe):Ye(Qe,!1)})}ne(Ze,Ge)}),U(He),U(ve),ne(fe,ve)};ce(ie,fe=>{V(t()),te(()=>t().attachments&&t().attachments.length>0)&&fe(X)})}var ee=W(ie,2);{var ae=fe=>{var ve=mi(),He=W(H(ve));{var Ze=Ae=>{var Pe=Je();pe(()=>ge(Pe,l(a))),ne(Ae,Pe)};ce(He,Ae=>{l(a)&&Ae(Ze)})}var we=W(He,2);{var Ge=Ae=>{var Pe=qt(),Qe=je(Pe);{var Ye=Oe=>{var $e=Je();pe(()=>ge($e,`by ${l(c)??""}`)),ne(Oe,$e)},Ue=Oe=>{var $e=Je();pe(()=>ge($e,`by ${l(c)??""}`)),ne(Oe,$e)};ce(Qe,Oe=>{l(a)?Oe(Ye):Oe(Ue,!1)})}ne(Ae,Pe)};ce(we,Ae=>{l(c)&&Ae(Ge)})}U(ve),ne(fe,ve)};ce(ee,fe=>{l(u)&&fe(ae)})}var be=W(ee,2);{var _e=fe=>{var ve=hi(),He=W(H(ve));{var Ze=Ae=>{var Pe=Je();pe(()=>ge(Pe,l(y))),ne(Ae,Pe)};ce(He,Ae=>{l(y)&&Ae(Ze)})}var we=W(He,2);{var Ge=Ae=>{var Pe=Je();pe(()=>ge(Pe,`by ${l(b)??""}`)),ne(Ae,Pe)};ce(we,Ae=>{l(b)&&Ae(Ge)})}U(ve),ne(fe,ve)};ce(be,fe=>{l(o)&&fe(_e)})}U(re),ne(G,re)};ce(me,G=>{s()&&G(De)})}U(k);var Te=W(k,2);{var Ee=G=>{var re=yi(),$=H(re);U(re),pe(()=>{Ie($,"src",(l(i),te(()=>l(i).url))),Ie($,"alt",(l(i),te(()=>l(i).name)))}),ne(G,re)};ce(Te,G=>{l(i)&&G(Ee)})}U(R),U(w),pe(()=>{rt(w,1,Wn(l(h)),"svelte-1rksp2z"),Br(w,l(r)?"cursor: pointer;":"")}),xe("keydown",w,O),xe("click",w,N),ne(d,w),it()}var bi=oe('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function xo(d,e){at(e,!1);const i=()=>fr(a,"$weeksExpanded",r),[r,n]=Ur(),{stores:{weeksExpanded:a}}=Lr();function c(){Tn(a,!i())}lt();var u=bi(),y=H(u),b=W(y);U(u),pe(()=>{rt(y,1,`bi ${i()?"bi-chevron-up":"bi-chevron-down"}`),ge(b,` ${i()?"Collapse All":"Expand All"}`)}),xe("click",u,c),ne(d,u),it(),n()}var _i=oe('<div class="invalid-feedback d-block"> </div>'),wi=oe("<option> </option>"),xi=oe('<div class="invalid-feedback d-block"> </div>'),Ei=oe('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function ki(d,e){at(e,!1);const i=le(),r=le();let n=he(e,"title",12,""),a=he(e,"eventType",12,"calendar_event"),c=he(e,"category",12,""),u=he(e,"isPublic",12,!0),y=he(e,"description",12,""),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),t=he(e,"validationErrors",24,()=>({})),s=le(),f=le();function g(){l(s)?.focus()}function x(){l(f)?.focus()}Me(()=>V(t()),()=>{B(i,!!t().title)}),Me(()=>V(t()),()=>{B(r,!!t().description)}),Ot();var I={focusTitle:g,focusDescription:x};lt();var E=Ei(),N=H(E),O=W(H(N),2);Ve(O);let P;Tt(O,q=>B(s,q),()=>l(s));var L=W(O,2);{var _=q=>{var Q=_i(),Y=H(Q,!0);U(Q),pe(()=>ge(Y,(V(t()),te(()=>t().title)))),ne(q,Q)};ce(L,q=>{V(t()),te(()=>t().title)&&q(_)})}nt(2),U(N);var M=W(N,2),m=W(H(M),2);pe(()=>{a(),ur(()=>{b()})});var h=H(m);h.value=h.__value="calendar_event";var w=W(h);w.value=w.__value="announcement",U(m),U(M);var D=W(M,2),A=W(H(D),2);pe(()=>{c(),ur(()=>{b()})}),Nt(A,5,()=>Rn,Sr,(q,Q)=>{var Y=wi(),S=H(Y,!0);U(Y);var Z={};pe(()=>{ge(S,(l(Q),te(()=>l(Q).label))),Z!==(Z=(l(Q),te(()=>l(Q).key)))&&(Y.value=(Y.__value=(l(Q),te(()=>l(Q).key)))??"")}),ne(q,Y)}),U(A),U(D);var R=W(D,2),k=W(H(R),2),C=H(k);Ve(C);var p=W(C,2);U(k),nt(2),U(R);var v=W(R,2),z=W(H(v),2);Dn(z);let T;Tt(z,q=>B(f,q),()=>l(f));var F=W(z,2);{var j=q=>{var Q=xi(),Y=H(Q,!0);U(Q),pe(()=>ge(Y,(V(t()),te(()=>t().description)))),ne(q,Q)};ce(F,q=>{V(t()),te(()=>t().description)&&q(j)})}return nt(2),U(v),U(E),pe(()=>{Ie(O,"name",`${o()??""}-title`),P=rt(O,1,"form-control",null,P,{"is-invalid":l(i)}),O.disabled=b(),m.disabled=b(),A.disabled=b(),Ie(C,"id",`${o()??""}-is-public`),C.disabled=b(),Ie(p,"for",`${o()??""}-is-public`),Ie(z,"name",`${o()??""}-description`),T=rt(z,1,"form-control",null,T,{"is-invalid":l(r)}),z.disabled=b()}),xe("focus",O,()=>l(s).select()),bt(O,n),vr(m,a),vr(A,c),gr(C,u),xe("focus",z,()=>l(f).select()),bt(z,y),ne(d,E),Lt(e,"focusTitle",g),Lt(e,"focusDescription",x),it(I)}var Di=oe('<div class="invalid-feedback d-block"> </div>'),Ai=oe('<div class="invalid-feedback d-block"> </div>'),Ti=oe('<div class="invalid-feedback d-block"> </div>'),Ii=oe('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Mi=oe('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Ri(d,e){at(e,!1);const i=le(),r=le(),n=le();let a=he(e,"dateInput",12,""),c=he(e,"startTimeInput",12,""),u=he(e,"endTimeInput",12,""),y=he(e,"isAllDay",12,!1),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),t=he(e,"validationErrors",24,()=>({})),s=le(),f=le(),g=le();function x(){l(s)?.focus()}function I(){l(f)?.focus()}function E(){l(g)?.focus()}Me(()=>V(t()),()=>{B(i,!!t().dateInput)}),Me(()=>V(t()),()=>{B(r,!!t().startTimeInput)}),Me(()=>V(t()),()=>{B(n,!!t().endTimeInput)}),Ot();var N={focusDate:x,focusStartTime:I,focusEndTime:E};lt();var O=Mi(),P=H(O),L=W(H(P),2);Ve(L);let _;Tt(L,C=>B(s,C),()=>l(s));var M=W(L,2);{var m=C=>{var p=Di(),v=H(p,!0);U(p),pe(()=>ge(v,(V(t()),te(()=>t().dateInput)))),ne(C,p)};ce(M,C=>{V(t()),te(()=>t().dateInput)&&C(m)})}U(P);var h=W(P,2),w=H(h),D=H(w);Ve(D);var A=W(D,2);U(w),U(h);var R=W(h,2);{var k=C=>{var p=Ii(),v=H(p),z=W(H(v),2);Ve(z),Ie(z,"step",900);let T;Tt(z,de=>B(f,de),()=>l(f));var F=W(z,2);{var j=de=>{var ye=Ai(),ue=H(ye,!0);U(ye),pe(()=>ge(ue,(V(t()),te(()=>t().startTimeInput)))),ne(de,ye)};ce(F,de=>{V(t()),te(()=>t().startTimeInput)&&de(j)})}U(v);var q=W(v,2),Q=W(H(q),2);Ve(Q),Ie(Q,"step",900);let Y;Tt(Q,de=>B(g,de),()=>l(g));var S=W(Q,2);{var Z=de=>{var ye=Ti(),ue=H(ye,!0);U(ye),pe(()=>ge(ue,(V(t()),te(()=>t().endTimeInput)))),ne(de,ye)};ce(S,de=>{V(t()),te(()=>t().endTimeInput)&&de(Z)})}U(q),U(p),pe(()=>{Ie(z,"name",`${o()??""}-start-time`),T=rt(z,1,"form-control",null,T,{"is-invalid":l(r)}),z.disabled=b(),Ie(Q,"name",`${o()??""}-end-time`),Y=rt(Q,1,"form-control",null,Y,{"is-invalid":l(n)}),Q.disabled=b()}),xe("focus",z,()=>l(f).select()),bt(z,c),xe("focus",Q,()=>l(g).select()),bt(Q,u),ne(C,p)};ce(R,C=>{y()||C(k)})}return U(O),pe(()=>{Ie(L,"name",`${o()??""}-date`),_=rt(L,1,"form-control",null,_,{"is-invalid":l(i)}),L.disabled=b(),Ie(D,"id",`${o()??""}-all-day-check`),D.disabled=b(),Ie(A,"for",`${o()??""}-all-day-check`)}),xe("focus",L,()=>l(s).select()),bt(L,a),gr(D,y),ne(d,O),Lt(e,"focusDate",x),Lt(e,"focusStartTime",I),Lt(e,"focusEndTime",E),it(N)}var Ci=oe('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Fi=oe('<div class="invalid-feedback d-block"> </div>'),Pi=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Oi=oe('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),Ui=oe('<div class="invalid-feedback d-block"> </div>'),Si=oe('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),Li=oe('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function zi(d,e){at(e,!1);const i=[],r=[];let n=he(e,"isRecurring",12,!1),a=he(e,"recurrenceFrequency",12,"weekly"),c=he(e,"recurrenceInterval",12,1),u=he(e,"recurringDays",28,()=>[]),y=he(e,"recurrenceEndDate",12,""),b=he(e,"monthlyType",12,"date"),o=he(e,"dateInput",8,""),t=he(e,"disabled",8,!1),s=he(e,"name",8,"event"),f=he(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function x(M){if(!M)return"Same weekday of the month";try{const m=new Date(M),h=Se(m,"EEEE"),w=Math.ceil(m.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][w]} ${h} of the month`}catch{return"Same weekday of the month"}}function I(M){if(!M)return 1;try{return M.split("-").map(Number)[2]}catch{return 1}}lt();var E=Li(),N=H(E),O=H(N);Ve(O);var P=W(O,2);U(N);var L=W(N,2);{var _=M=>{var m=Si(),h=H(m),w=W(H(h),2),D=W(H(w),2),A=H(D);Ve(A),U(D);var R=W(D,2),k=H(R);pe(()=>{a(),ur(()=>{t(),c()})});var C=H(k),p=H(C,!0);U(C),C.value=C.__value="daily";var v=W(C),z=H(v,!0);U(v),v.value=v.__value="weekly";var T=W(v),F=H(T,!0);U(T),T.value=T.__value="monthly";var j=W(T),q=H(j,!0);U(j),j.value=j.__value="yearly",U(k),U(R),U(w),U(h);var Q=W(h,2);{var Y=Ee=>{var G=Pi(),re=W(H(G),2);Nt(re,5,()=>g,Sr,(ie,X)=>{var ee=Ci(),ae=H(ee);Ve(ae);var be,_e=W(ae,2),fe=H(_e,!0);U(_e),U(ee),pe(()=>{Ie(ae,"id",`${s()??""}-day-${l(X),te(()=>l(X).value)??""}`),ae.disabled=t(),be!==(be=(l(X),te(()=>l(X).value)))&&(ae.value=(ae.__value=(l(X),te(()=>l(X).value)))??""),Ie(_e,"for",`${s()??""}-day-${l(X),te(()=>l(X).value)??""}`),ge(fe,(l(X),te(()=>l(X).label)))}),cr(i,[],ae,()=>(l(X),te(()=>l(X).value),u()),u),ne(ie,ee)}),U(re);var $=W(re,2);{var J=ie=>{var X=Fi(),ee=H(X,!0);U(X),pe(()=>ge(ee,(V(f()),te(()=>f().recurringDays)))),ne(ie,X)};ce($,ie=>{V(f()),te(()=>f().recurringDays)&&ie(J)})}nt(2),U(G),ne(Ee,G)};ce(Q,Ee=>{a()==="weekly"&&Ee(Y)})}var S=W(Q,2);{var Z=Ee=>{var G=Oi(),re=W(H(G),2),$=H(re),J=H($);Ve(J),J.value=J.__value="date";var ie=W(J,2),X=H(ie);U(ie),U($);var ee=W($,2),ae=H(ee);Ve(ae),ae.value=ae.__value="weekday";var be=W(ae,2),_e=H(be);U(be),U(ee),U(re),U(G),pe((fe,ve)=>{Ie(J,"id",`${s()??""}-monthly-date`),J.disabled=t(),Ie(ie,"for",`${s()??""}-monthly-date`),ge(X,`On day ${fe??""} of the month`),Ie(ae,"id",`${s()??""}-monthly-weekday`),ae.disabled=t(),Ie(be,"for",`${s()??""}-monthly-weekday`),ge(_e,`On the ${ve??""}`)},[()=>(V(o()),te(()=>I(o()))),()=>(V(o()),te(()=>x(o())))]),cr(r,[],J,b,b),cr(r,[],ae,b,b),ne(Ee,G)};ce(S,Ee=>{a()==="monthly"&&Ee(Z)})}var de=W(S,2),ye=H(de),ue=W(ye,2);Ve(ue);let me;var De=W(ue,2);{var Te=Ee=>{var G=Ui(),re=H(G,!0);U(G),pe(()=>ge(re,(V(f()),te(()=>f().recurrenceEndDate)))),ne(Ee,G)};ce(De,Ee=>{V(f()),te(()=>f().recurrenceEndDate)&&Ee(Te)})}nt(2),U(de),U(m),pe(()=>{A.disabled=t(),k.disabled=t(),ge(p,c()===1?"day":"days"),ge(z,c()===1?"week":"weeks"),ge(F,c()===1?"month":"months"),ge(q,c()===1?"year":"years"),Ie(ye,"for",`${s()??""}-recurrence-end-date`),me=rt(ue,1,"form-control",null,me,{"is-invalid":!!f().recurrenceEndDate}),Ie(ue,"id",`${s()??""}-recurrence-end-date`),ue.disabled=t()}),bt(A,c),vr(k,a),bt(ue,y),ne(M,m)};ce(L,M=>{n()&&M(_)})}U(E),pe(()=>{Ie(O,"id",`${s()??""}-is-recurring`),O.disabled=t(),Ie(P,"for",`${s()??""}-is-recurring`)}),gr(O,n),ne(d,E),it()}var Hi=oe('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function Bi(d,e){at(e,!1);let i=he(e,"value",12,""),r=he(e,"disabled",8,!1),n=he(e,"name",8,"location"),a=le();function c(){l(a)?.focus()}var u={focus:c},y=Hi(),b=W(H(y),2);return Ve(b),Tt(b,o=>B(a,o),()=>l(a)),nt(2),U(y),pe(()=>{Ie(b,"name",n()),b.disabled=r()}),xe("focus",b,()=>l(a).select()),bt(b,i),ne(d,y),Lt(e,"focus",c),it(u)}var qi=oe('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Ni=oe('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Yi=oe('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),Wi=oe('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Qi=oe('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),$i=oe('<div class="d-flex flex-column gap-2 mb-2"></div>'),ji=oe('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function Gi(d,e){at(e,!1);let i=he(e,"attachments",24,()=>[]),r=he(e,"disabled",8,!1),n=he(e,"uploadingFile",8,!1);const a=$n();let c=le(),u=le(null),y=le("");const b=M=>{if(M===0)return"0 Bytes";const m=1024,h=["Bytes","KB","MB"],w=Math.floor(Math.log(M)/Math.log(m));return Math.round(M/Math.pow(m,w)*100)/100+" "+h[w]},o=M=>{const m=M.target;m.files&&m.files[0]&&(a("upload",m.files[0]),m.value="")},t=M=>{B(u,M.id),B(y,M.name)},s=M=>{l(y).trim()&&l(y)!==M.name&&a("edit",{attachment:M,newName:l(y).trim()}),B(u,null),B(y,"")},f=()=>{B(u,null),B(y,"")},g=M=>{a("remove",M)};lt();var x=ji(),I=W(H(x),2);{var E=M=>{var m=$i();Nt(m,5,i,h=>h.id,(h,w)=>{var D=Qi(),A=H(D),R=H(A);{var k=T=>{var F=qi(),j=je(F);Ve(j);var q=W(j,2),Q=H(q,!0);U(q),pe(Y=>{j.disabled=r(),ge(Q,Y)},[()=>(l(w),te(()=>b(l(w).size)))]),bt(j,()=>l(y),Y=>B(y,Y)),xe("keydown",j,Y=>{Y.key==="Enter"&&s(l(w)),Y.key==="Escape"&&f()}),ne(T,F)},C=T=>{var F=Ni(),j=je(F),q=H(j,!0);U(j);var Q=W(j,2),Y=H(Q,!0);U(Q),pe(S=>{ge(q,(l(w),te(()=>l(w).name))),ge(Y,S)},[()=>(l(w),te(()=>b(l(w).size)))]),ne(T,F)};ce(R,T=>{l(u),l(w),te(()=>l(u)===l(w).id)?T(k):T(C,!1)})}U(A);var p=W(A,2);{var v=T=>{var F=Yi(),j=je(F),q=W(j,2);pe(()=>{j.disabled=r(),q.disabled=r()}),xe("click",j,()=>s(l(w))),xe("click",q,f),ne(T,F)},z=T=>{var F=Wi(),j=je(F),q=W(j,2);pe(()=>{j.disabled=r(),q.disabled=r()}),xe("click",j,()=>t(l(w))),xe("click",q,()=>g(l(w))),ne(T,F)};ce(p,T=>{l(u),l(w),te(()=>l(u)===l(w).id)?T(v):T(z,!1)})}U(D),ne(h,D)}),U(m),ne(M,m)};ce(I,M=>{V(i()),te(()=>i().length>0)&&M(E)})}var N=W(I,2),O=H(N),P=H(O);Tt(P,M=>B(c,M),()=>l(c));var L=W(P,2);{var _=M=>{Qr(M,{size:"sm"})};ce(L,M=>{n()&&M(_)})}U(O),nt(2),U(N),U(x),pe(()=>P.disabled=r()||n()),xe("change",P,o),ne(d,x),it()}var Ki=oe('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Vi(d,e){at(e,!1);const i=le();let r=he(e,"eventTitle",8),n=he(e,"occurrenceDate",8),a=he(e,"callback",8);function c(D){a()(D)}function u(){a()(null)}Me(()=>(V(n()),Se),()=>{B(i,(()=>{try{const[D,A,R]=n().split("-").map(Number),k=new Date(D,A-1,R);return Se(k,"EEEE, MMMM d, yyyy")}catch{return n()}})())}),Ot(),lt();var y=Ki(),b=H(y),o=H(b),t=H(o),s=W(H(t),2);U(t);var f=W(t,2),g=H(f),x=H(g),I=H(x);U(x),nt(),U(g);var E=W(g,4),N=H(E),O=W(H(N),2),P=H(O,!0);U(O),U(N);var L=W(N,2),_=W(H(L),2),M=H(_);U(_),U(L);var m=W(L,2);U(E),U(f);var h=W(f,2),w=H(h);U(h),U(o),U(b),U(y),pe(()=>{ge(I,`"${r()??""}"`),ge(P,l(i)),ge(M,`From ${l(i)??""} onwards`)}),xe("click",s,u),xe("click",N,()=>c("single")),xe("click",L,()=>c("future")),xe("click",m,()=>c("all")),xe("click",w,u),ne(d,y),it()}var Xi=oe('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Zi(d,e){at(e,!1);const i=le();let r=he(e,"eventTitle",8),n=he(e,"occurrenceDate",8),a=he(e,"callback",8);function c(D){a()(D)}function u(){a()(null)}Me(()=>(V(n()),Se),()=>{B(i,(()=>{try{const[D,A,R]=n().split("-").map(Number),k=new Date(D,A-1,R);return Se(k,"EEEE, MMMM d, yyyy")}catch{return n()}})())}),Ot(),lt();var y=Xi(),b=H(y),o=H(b),t=H(o),s=W(H(t),2);U(t);var f=W(t,2),g=H(f),x=H(g),I=H(x);U(x),nt(),U(g);var E=W(g,4),N=H(E),O=W(H(N),2),P=H(O,!0);U(O),U(N);var L=W(N,2),_=W(H(L),2),M=H(_);U(_),U(L);var m=W(L,2);U(E),U(f);var h=W(f,2),w=H(h);U(h),U(o),U(b),U(y),pe(()=>{ge(I,`"${r()??""}"`),ge(P,l(i)),ge(M,`From ${l(i)??""} onwards`)}),xe("click",s,u),xe("click",N,()=>c("single")),xe("click",L,()=>c("future")),xe("click",m,()=>c("all")),xe("click",w,u),ne(d,y),it()}var Ji=oe('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function es(d,e){at(e,!1);let i=he(e,"title",8,"Clone Event"),r=he(e,"message",8,"Select a date for the cloned event:"),n=he(e,"confirmButtonLabel",8,"Clone"),a=he(e,"confirmButtonCSS",8,"btn-primary"),c=he(e,"rejectButtonLabel",8,"Cancel"),u=he(e,"rejectButtonCSS",8,"btn-secondary"),y=he(e,"defaultDate",8,void 0),b=he(e,"callback",8,()=>{}),o=le(),t=le(y()||Se(new Date,"yyyy-MM-dd")),s=!1,f;jn(()=>{const p=window.bootstrap.Modal;new p(l(o)).show(),l(o).addEventListener("hidden.bs.modal",()=>{s?b()(!0,f):b()(!1)})});function g(){s=!0,f=l(t),window.bootstrap.Modal.getInstance(l(o)).hide()}function x(){s=!1,window.bootstrap.Modal.getInstance(l(o)).hide()}lt();var I=Ji(),E=H(I),N=H(E),O=H(N),P=H(O),L=H(P,!0);U(P),nt(2),U(O);var _=W(O,2),M=H(_),m=H(M,!0);U(M);var h=W(M,2),w=W(H(h),2);Ve(w),U(h),U(_);var D=W(_,2),A=H(D),R=H(A,!0);U(A);var k=W(A,2),C=H(k,!0);U(k),U(D),U(N),U(E),U(I),Tt(I,p=>B(o,p),()=>l(o)),pe(()=>{ge(L,i()),ge(m,r()),rt(A,1,`btn ${u()??""}`),ge(R,c()),rt(k,1,`btn ${a()??""}`),ge(C,n())}),bt(w,()=>l(t),p=>B(t,p)),xe("click",A,x),xe("click",k,g),ne(d,I),it()}let $t;function ts(d){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const i={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};d.title&&(i.title=d.title),d.message&&(i.message=d.message),d.confirmButtonLabel&&(i.confirmButtonLabel=d.confirmButtonLabel),d.confirmButtonCSS&&(i.confirmButtonCSS=d.confirmButtonCSS),d.rejectButtonLabel&&(i.rejectButtonLabel=d.rejectButtonLabel),d.rejectButtonCSS&&(i.rejectButtonCSS=d.rejectButtonCSS),d.defaultDate&&(i.defaultDate=d.defaultDate),i.callback=(r,n)=>{console.log("Clone confirm result:",r,n),$t&&(Mn($t),$t=void 0),e.remove(),d.callback&&typeof d.callback=="function"&&d.callback(r,n)},$t=In(es,{target:e,props:i})}const rs=Vn().shape({title:ht().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ht().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ht().required("Category is required"),description:ht().nullable().max(1e4,"Description is too long"),location:ht().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ht().when("event_type",{is:"calendar_event",then:d=>d.required("Date is required"),otherwise:d=>d.nullable()}),startTimeInput:ht().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("Start time is required"),otherwise:d=>d.nullable()}),endTimeInput:ht().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("End time is required"),otherwise:d=>d.nullable()}),isRecurring:Rr(),recurrenceFrequency:ht().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Xn().of(Zn().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(d,e)=>d&&e==="weekly",then:d=>d.min(1,"Select at least one day for weekly recurring events").required(),otherwise:d=>d.nullable()}),hasEndDate:Rr(),recurrenceEndDate:ht().when(["isRecurring","hasEndDate"],{is:(d,e)=>d&&e,then:d=>d.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const i=new Date(e),r=new Date;return r.setHours(0,0,0,0),i>=r}),otherwise:d=>d.nullable()})});function ns(){const d=Gn({});async function e(n){try{return await rs.validate(n,{abortEarly:!1}),d.set({}),!0}catch(a){if(a instanceof Jn){const c={};return a.inner.forEach(u=>{u.path&&(c[u.path]=u.message)}),d.set(c),!1}return!1}}function i(){d.set({})}function r(){return Object.values(hr(d)).filter(a=>a.length>0)}return{validationErrors:d,validate:e,clearErrors:i,getErrorMessages:r}}function wr(d){const{frequency:e,interval:i,recurringDays:r,recurrenceEndDate:n,hasEndDate:a,monthlyType:c,startTime:u}=d,y={0:Fe.SU,1:Fe.MO,2:Fe.TU,3:Fe.WE,4:Fe.TH,5:Fe.FR,6:Fe.SA},b={daily:Fe.DAILY,weekly:Fe.WEEKLY,monthly:Fe.MONTHLY,yearly:Fe.YEARLY},o=new Date(u),t=At(o,Xe),s=new Date(t);s.setHours(12,0,0,0);const f=Ft(s,Xe),g={freq:b[e],interval:i,dtstart:f};if(a&&n){const I=new Date(`${n}T23:59:59.999`),E=Ft(I,Xe);g.until=E}if(e==="weekly"&&r.length>0)g.byweekday=r.map(I=>y[I]);else if(e==="monthly")if(c==="date")g.bymonthday=[s.getDate()];else{const I=Math.ceil(s.getDate()/7),E=s.getDay(),N=[Fe.SU,Fe.MO,Fe.TU,Fe.WE,Fe.TH,Fe.FR,Fe.SA];g.byweekday=[N[E].nth(I)]}else e==="yearly"&&(g.bymonth=[s.getMonth()+1],g.bymonthday=[s.getDate()]);return{recurrence_rule:new Fe(g).toString(),recurrence_end_date:a&&n?g.until.toISOString():void 0}}function Vr(d,e){try{const r=Fe.fromString(d).origOptions,n={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Fe.DAILY]:"daily",[Fe.WEEKLY]:"weekly",[Fe.MONTHLY]:"monthly",[Fe.YEARLY]:"yearly"},c=(r.freq!==void 0?a[r.freq]:null)||"weekly",u=r.interval||1;let y=[],b="date";r.byweekday&&c==="weekly"&&(y=(Array.isArray(r.byweekday)?r.byweekday:[r.byweekday]).map(s=>{const f=typeof s=="number"?s:s.weekday;return n[f]})),c==="monthly"&&(r.bymonthday&&Array.isArray(r.bymonthday)&&r.bymonthday.length>0?b="date":r.byweekday&&(b="weekday"));let o="",t=!1;if(e){t=!0;const s=At(new Date(e),Xe);o=Se(s,"yyyy-MM-dd")}else if(r.until){t=!0;const s=At(r.until,Xe);o=Se(s,"yyyy-MM-dd")}return{frequency:c,interval:u,recurringDays:y,recurrenceEndDate:o,hasEndDate:t,monthlyType:b}}catch(i){return console.error("Failed to parse recurrence rule:",i),null}}function Xr(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Zr(){return{generateRecurrenceRule:wr,parseRecurrenceRule:Vr,clearRecurrence:Xr}}const yr=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Xr,generateRecurrenceRule:wr,parseRecurrenceRule:Vr,useRecurrenceLogic:Zr},Symbol.toStringTag,{value:"Module"}));function as(d,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(r){if(r!=="default"&&!(r in d)){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(d,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}})}),Object.freeze(d)}function Jr(d,e){return new Promise(function(i,r){let n;return is(d).then(function(a){try{return n=a,i(new Blob([e.slice(0,2),n,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}},r)})}const is=d=>new Promise((e,i)=>{const r=new FileReader;r.addEventListener("load",({target:{result:n}})=>{const a=new DataView(n);let c=0;if(a.getUint16(c)!==65496)return i("not a valid JPEG");for(c+=2;;){const u=a.getUint16(c);if(u===65498)break;const y=a.getUint16(c+2);if(u===65505&&a.getUint32(c+4)===1165519206){const b=c+10;let o;switch(a.getUint16(b)){case 18761:o=!0;break;case 19789:o=!1;break;default:return i("TIFF header contains invalid endian")}if(a.getUint16(b+2,o)!==42)return i("TIFF header contains invalid version");const t=a.getUint32(b+4,o),s=b+t+2+12*a.getUint16(b+t,o);for(let f=b+t+2;f<s;f+=12)if(a.getUint16(f,o)==274){if(a.getUint16(f+2,o)!==3)return i("Orientation data type is invalid");if(a.getUint32(f+4,o)!==1)return i("Orientation data count is invalid");a.setUint16(f+8,1,o);break}return e(n.slice(c,c+2+y))}c+=2+y}return e(new Blob)}),r.readAsArrayBuffer(d)});var Zt={},ss={get exports(){return Zt},set exports(d){Zt=d}};(function(d){var e,i,r={};ss.exports=r,r.parse=function(n,a){for(var c=r.bin.readUshort,u=r.bin.readUint,y=0,b={},o=new Uint8Array(n),t=o.length-4;u(o,t)!=101010256;)t--;y=t,y+=4;var s=c(o,y+=4);c(o,y+=2);var f=u(o,y+=2),g=u(o,y+=4);y+=4,y=g;for(var x=0;x<s;x++){u(o,y),y+=4,y+=4,y+=4,u(o,y+=4),f=u(o,y+=4);var I=u(o,y+=4),E=c(o,y+=4),N=c(o,y+2),O=c(o,y+4);y+=6;var P=u(o,y+=8);y+=4,y+=E+N+O,r._readLocal(o,P,b,f,I,a)}return b},r._readLocal=function(n,a,c,u,y,b){var o=r.bin.readUshort,t=r.bin.readUint;t(n,a),o(n,a+=4),o(n,a+=2);var s=o(n,a+=2);t(n,a+=2),t(n,a+=4),a+=4;var f=o(n,a+=8),g=o(n,a+=2);a+=2;var x=r.bin.readUTF8(n,a,f);if(a+=f,a+=g,b)c[x]={size:y,csize:u};else{var I=new Uint8Array(n.buffer,a);if(s==0)c[x]=new Uint8Array(I.buffer.slice(a,a+u));else{if(s!=8)throw"unknown compression method: "+s;var E=new Uint8Array(y);r.inflateRaw(I,E),c[x]=E}}},r.inflateRaw=function(n,a){return r.F.inflate(n,a)},r.inflate=function(n,a){return n[0],n[1],r.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),a)},r.deflate=function(n,a){a==null&&(a={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*n.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(n,u,c,a.level);var y=r.adler(n,0,n.length);return u[c+0]=y>>>24&255,u[c+1]=y>>>16&255,u[c+2]=y>>>8&255,u[c+3]=y>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(n,a){a==null&&(a={level:6});var c=new Uint8Array(50+Math.floor(1.1*n.length)),u=r.F.deflateRaw(n,c,u,a.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(n,a){a==null&&(a=!1);var c=0,u=r.bin.writeUint,y=r.bin.writeUshort,b={};for(var o in n){var t=!r._noNeed(o)&&!a,s=n[o],f=r.crc.crc(s,0,s.length);b[o]={cpr:t,usize:s.length,crc:f,file:t?r.deflateRaw(s):s}}for(var o in b)c+=b[o].file.length+30+46+2*r.bin.sizeUTF8(o);c+=22;var g=new Uint8Array(c),x=0,I=[];for(var o in b){var E=b[o];I.push(x),x=r._writeHeader(g,x,o,E,0)}var N=0,O=x;for(var o in b)E=b[o],I.push(x),x=r._writeHeader(g,x,o,E,1,I[N++]);var P=x-O;return u(g,x,101010256),x+=4,y(g,x+=4,N),y(g,x+=2,N),u(g,x+=2,P),u(g,x+=4,O),x+=4,x+=2,g.buffer},r._noNeed=function(n){var a=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(n,a,c,u,y,b){var o=r.bin.writeUint,t=r.bin.writeUshort,s=u.file;return o(n,a,y==0?67324752:33639248),a+=4,y==1&&(a+=2),t(n,a,20),t(n,a+=2,0),t(n,a+=2,u.cpr?8:0),o(n,a+=2,0),o(n,a+=4,u.crc),o(n,a+=4,s.length),o(n,a+=4,u.usize),t(n,a+=4,r.bin.sizeUTF8(c)),t(n,a+=2,0),a+=2,y==1&&(a+=2,a+=2,o(n,a+=6,b),a+=4),a+=r.bin.writeUTF8(n,a,c),y==0&&(n.set(s,a),a+=s.length),a},r.crc={table:function(){for(var n=new Uint32Array(256),a=0;a<256;a++){for(var c=a,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;n[a]=c}return n}(),update:function(n,a,c,u){for(var y=0;y<u;y++)n=r.crc.table[255&(n^a[c+y])]^n>>>8;return n},crc:function(n,a,c){return 4294967295^r.crc.update(4294967295,n,a,c)}},r.adler=function(n,a,c){for(var u=1,y=0,b=a,o=a+c;b<o;){for(var t=Math.min(b+5552,o);b<t;)y+=u+=n[b++];u%=65521,y%=65521}return y<<16|u},r.bin={readUshort:function(n,a){return n[a]|n[a+1]<<8},writeUshort:function(n,a,c){n[a]=255&c,n[a+1]=c>>8&255},readUint:function(n,a){return 16777216*n[a+3]+(n[a+2]<<16|n[a+1]<<8|n[a])},writeUint:function(n,a,c){n[a]=255&c,n[a+1]=c>>8&255,n[a+2]=c>>16&255,n[a+3]=c>>24&255},readASCII:function(n,a,c){for(var u="",y=0;y<c;y++)u+=String.fromCharCode(n[a+y]);return u},writeASCII:function(n,a,c){for(var u=0;u<c.length;u++)n[a+u]=c.charCodeAt(u)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,a,c){for(var u,y="",b=0;b<c;b++)y+="%"+r.bin.pad(n[a+b].toString(16));try{u=decodeURIComponent(y)}catch{return r.bin.readASCII(n,a,c)}return u},writeUTF8:function(n,a,c){for(var u=c.length,y=0,b=0;b<u;b++){var o=c.charCodeAt(b);if(!(4294967168&o))n[a+y]=o,y++;else if(!(4294965248&o))n[a+y]=192|o>>6,n[a+y+1]=128|o>>0&63,y+=2;else if(!(4294901760&o))n[a+y]=224|o>>12,n[a+y+1]=128|o>>6&63,n[a+y+2]=128|o>>0&63,y+=3;else{if(4292870144&o)throw"e";n[a+y]=240|o>>18,n[a+y+1]=128|o>>12&63,n[a+y+2]=128|o>>6&63,n[a+y+3]=128|o>>0&63,y+=4}}return y},sizeUTF8:function(n){for(var a=n.length,c=0,u=0;u<a;u++){var y=n.charCodeAt(u);if(!(4294967168&y))c++;else if(!(4294965248&y))c+=2;else if(!(4294901760&y))c+=3;else{if(4292870144&y)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(n,a,c,u){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],b=r.F.U,o=r.F._goodIndex;r.F._hash;var t=r.F._putsE,s=0,f=c<<3,g=0,x=n.length;if(u==0){for(;s<x;)t(a,f,s+(D=Math.min(65535,x-s))==x?1:0),f=r.F._copyExact(n,s,D,a,f+8),s+=D;return f>>>3}var I=b.lits,E=b.strt,N=b.prev,O=0,P=0,L=0,_=0,M=0,m=0;for(x>2&&(E[m=r.F._hash(n,0)]=0),s=0;s<x;s++){if(M=m,s+1<x-2){m=r.F._hash(n,s+1);var h=s+1&32767;N[h]=E[m],E[m]=h}if(g<=s){(O>14e3||P>26697)&&x-s>100&&(g<s&&(I[O]=s-g,O+=2,g=s),f=r.F._writeBlock(s==x-1||g==x?1:0,I,O,_,n,L,s-L,a,f),O=P=_=0,L=s);var w=0;s<x-2&&(w=r.F._bestMatch(n,s,N,M,Math.min(y[2],x-s),y[3]));var D=w>>>16,A=65535&w;if(w!=0){A=65535&w;var R=o(D=w>>>16,b.of0);b.lhst[257+R]++;var k=o(A,b.df0);b.dhst[k]++,_+=b.exb[R]+b.dxb[k],I[O]=D<<23|s-g,I[O+1]=A<<16|R<<8|k,O+=2,g=s+D}else b.lhst[n[s]]++;P++}}for(L==s&&n.length!=0||(g<s&&(I[O]=s-g,O+=2,g=s),f=r.F._writeBlock(1,I,O,_,n,L,s-L,a,f),O=0,P=0,O=P=_=0,L=s);7&f;)f++;return f>>>3},r.F._bestMatch=function(n,a,c,u,y,b){var o=32767&a,t=c[o],s=o-t+32768&32767;if(t==o||u!=r.F._hash(n,a-s))return 0;for(var f=0,g=0,x=Math.min(32767,a);s<=x&&--b!=0&&t!=o;){if(f==0||n[a+f]==n[a+f-s]){var I=r.F._howLong(n,a,s);if(I>f){if(g=s,(f=I)>=y)break;s+2<I&&(I=s+2);for(var E=0,N=0;N<I-2;N++){var O=a-s+N+32768&32767,P=O-c[O]+32768&32767;P>E&&(E=P,t=O)}}}s+=(o=t)-(t=c[o])+32768&32767}return f<<16|g},r.F._howLong=function(n,a,c){if(n[a]!=n[a-c]||n[a+1]!=n[a+1-c]||n[a+2]!=n[a+2-c])return 0;var u=a,y=Math.min(n.length,a+258);for(a+=3;a<y&&n[a]==n[a-c];)a++;return a-u},r.F._hash=function(n,a){return(n[a]<<8|n[a+1])+(n[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(n,a,c,u,y,b,o,t,s){var f,g,x,I,E,N,O,P,L,_=r.F.U,M=r.F._putsF,m=r.F._putsE;_.lhst[256]++,g=(f=r.F.getTrees())[0],x=f[1],I=f[2],E=f[3],N=f[4],O=f[5],P=f[6],L=f[7];var h=32+(s+3&7?8-(s+3&7):0)+(o<<3),w=u+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),D=u+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);D+=14+3*O+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var A=0;A<286;A++)_.lhst[A]=0;for(A=0;A<30;A++)_.dhst[A]=0;for(A=0;A<19;A++)_.ihst[A]=0;var R=h<w&&h<D?0:w<D?1:2;if(M(t,s,n),M(t,s+1,R),s+=3,R==0){for(;7&s;)s++;s=r.F._copyExact(y,b,o,t,s)}else{var k,C;if(R==1&&(k=_.fltree,C=_.fdtree),R==2){r.F.makeCodes(_.ltree,g),r.F.revCodes(_.ltree,g),r.F.makeCodes(_.dtree,x),r.F.revCodes(_.dtree,x),r.F.makeCodes(_.itree,I),r.F.revCodes(_.itree,I),k=_.ltree,C=_.dtree,m(t,s,E-257),m(t,s+=5,N-1),m(t,s+=5,O-4),s+=4;for(var p=0;p<O;p++)m(t,s+3*p,_.itree[1+(_.ordr[p]<<1)]);s+=3*O,s=r.F._codeTiny(P,_.itree,t,s),s=r.F._codeTiny(L,_.itree,t,s)}for(var v=b,z=0;z<c;z+=2){for(var T=a[z],F=T>>>23,j=v+(8388607&T);v<j;)s=r.F._writeLit(y[v++],k,t,s);if(F!=0){var q=a[z+1],Q=q>>16,Y=q>>8&255,S=255&q;m(t,s=r.F._writeLit(257+Y,k,t,s),F-_.of0[Y]),s+=_.exb[Y],M(t,s=r.F._writeLit(S,C,t,s),Q-_.df0[S]),s+=_.dxb[S],v+=F}}s=r.F._writeLit(256,k,t,s)}return s},r.F._copyExact=function(n,a,c,u,y){var b=y>>>3;return u[b]=c,u[b+1]=c>>>8,u[b+2]=255-u[b],u[b+3]=255-u[b+1],b+=4,u.set(new Uint8Array(n.buffer,a,c),b),y+(c+4<<3)},r.F.getTrees=function(){for(var n=r.F.U,a=r.F._hufTree(n.lhst,n.ltree,15),c=r.F._hufTree(n.dhst,n.dtree,15),u=[],y=r.F._lenCodes(n.ltree,u),b=[],o=r.F._lenCodes(n.dtree,b),t=0;t<u.length;t+=2)n.ihst[u[t]]++;for(t=0;t<b.length;t+=2)n.ihst[b[t]]++;for(var s=r.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[a,c,s,y,o,f,u,b]},r.F.getSecond=function(n){for(var a=[],c=0;c<n.length;c+=2)a.push(n[c+1]);return a},r.F.nonZero=function(n){for(var a="",c=0;c<n.length;c+=2)n[c+1]!=0&&(a+=(c>>1)+",");return a},r.F.contSize=function(n,a){for(var c=0,u=0;u<a.length;u++)c+=a[u]*n[1+(u<<1)];return c},r.F._codeTiny=function(n,a,c,u){for(var y=0;y<n.length;y+=2){var b=n[y],o=n[y+1];u=r.F._writeLit(b,a,c,u);var t=b==16?2:b==17?3:7;b>15&&(r.F._putsE(c,u,o,t),u+=t)}return u},r.F._lenCodes=function(n,a){for(var c=n.length;c!=2&&n[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var y=n[u+1],b=u+3<c?n[u+3]:-1,o=u+5<c?n[u+5]:-1,t=u==0?-1:n[u-1];if(y==0&&b==y&&o==y){for(var s=u+5;s+2<c&&n[s+2]==y;)s+=2;(f=Math.min(s+1-u>>>1,138))<11?a.push(17,f-3):a.push(18,f-11),u+=2*f-2}else if(y==t&&b==y&&o==y){for(s=u+5;s+2<c&&n[s+2]==y;)s+=2;var f=Math.min(s+1-u>>>1,6);a.push(16,f-3),u+=2*f-2}else a.push(y,0)}return c>>>1},r.F._hufTree=function(n,a,c){var u=[],y=n.length,b=a.length,o=0;for(o=0;o<b;o+=2)a[o]=0,a[o+1]=0;for(o=0;o<y;o++)n[o]!=0&&u.push({lit:o,f:n[o]});var t=u.length,s=u.slice(0);if(t==0)return 0;if(t==1){var f=u[0].lit;return s=f==0?1:0,a[1+(f<<1)]=1,a[1+(s<<1)]=1,1}u.sort(function(P,L){return P.f-L.f});var g=u[0],x=u[1],I=0,E=1,N=2;for(u[0]={lit:-1,f:g.f+x.f,l:g,r:x,d:0};E!=t-1;)g=I!=E&&(N==t||u[I].f<u[N].f)?u[I++]:u[N++],x=I!=E&&(N==t||u[I].f<u[N].f)?u[I++]:u[N++],u[E++]={lit:-1,f:g.f+x.f,l:g,r:x};var O=r.F.setDepth(u[E-1],0);for(O>c&&(r.F.restrictDepth(s,c,O),O=c),o=0;o<t;o++)a[1+(s[o].lit<<1)]=s[o].d;return O},r.F.setDepth=function(n,a){return n.lit!=-1?(n.d=a,a):Math.max(r.F.setDepth(n.l,a+1),r.F.setDepth(n.r,a+1))},r.F.restrictDepth=function(n,a,c){var u=0,y=1<<c-a,b=0;for(n.sort(function(t,s){return s.d==t.d?t.f-s.f:s.d-t.d}),u=0;u<n.length&&n[u].d>a;u++){var o=n[u].d;n[u].d=a,b+=y-(1<<c-o)}for(b>>>=c-a;b>0;)(o=n[u].d)<a?(n[u].d++,b-=1<<a-o-1):u++;for(;u>=0;u--)n[u].d==a&&b<0&&(n[u].d--,b++);b!=0&&console.log("debt left")},r.F._goodIndex=function(n,a){var c=0;return a[16|c]<=n&&(c|=16),a[8|c]<=n&&(c|=8),a[4|c]<=n&&(c|=4),a[2|c]<=n&&(c|=2),a[1|c]<=n&&(c|=1),c},r.F._writeLit=function(n,a,c,u){return r.F._putsF(c,u,a[n<<1]),u+a[1+(n<<1)]},r.F.inflate=function(n,a){var c=Uint8Array;if(n[0]==3&&n[1]==0)return a||new c(0);var u=r.F,y=u._bitsF,b=u._bitsE,o=u._decodeTiny,t=u.makeCodes,s=u.codes2map,f=u._get17,g=u.U,x=a==null;x&&(a=new c(n.length>>>2<<3));for(var I,E,N=0,O=0,P=0,L=0,_=0,M=0,m=0,h=0,w=0;N==0;)if(N=y(n,w,1),O=y(n,w+1,2),w+=3,O!=0){if(x&&(a=r.F._check(a,h+(1<<17))),O==1&&(I=g.flmap,E=g.fdmap,M=511,m=31),O==2){P=b(n,w,5)+257,L=b(n,w+5,5)+1,_=b(n,w+10,4)+4,w+=14;for(var D=0;D<38;D+=2)g.itree[D]=0,g.itree[D+1]=0;var A=1;for(D=0;D<_;D++){var R=b(n,w+3*D,3);g.itree[1+(g.ordr[D]<<1)]=R,R>A&&(A=R)}w+=3*_,t(g.itree,A),s(g.itree,A,g.imap),I=g.lmap,E=g.dmap,w=o(g.imap,(1<<A)-1,P+L,n,w,g.ttree);var k=u._copyOut(g.ttree,0,P,g.ltree);M=(1<<k)-1;var C=u._copyOut(g.ttree,P,L,g.dtree);m=(1<<C)-1,t(g.ltree,k),s(g.ltree,k,I),t(g.dtree,C),s(g.dtree,C,E)}for(;;){var p=I[f(n,w)&M];w+=15&p;var v=p>>>4;if(!(v>>>8))a[h++]=v;else{if(v==256)break;var z=h+v-254;if(v>264){var T=g.ldef[v-257];z=h+(T>>>3)+b(n,w,7&T),w+=7&T}var F=E[f(n,w)&m];w+=15&F;var j=F>>>4,q=g.ddef[j],Q=(q>>>4)+y(n,w,15&q);for(w+=15&q,x&&(a=r.F._check(a,h+(1<<17)));h<z;)a[h]=a[h++-Q],a[h]=a[h++-Q],a[h]=a[h++-Q],a[h]=a[h++-Q];h=z}}}else{7&w&&(w+=8-(7&w));var Y=4+(w>>>3),S=n[Y-4]|n[Y-3]<<8;x&&(a=r.F._check(a,h+S)),a.set(new c(n.buffer,n.byteOffset+Y,S),h),w=Y+S<<3,h+=S}return a.length==h?a:a.slice(0,h)},r.F._check=function(n,a){var c=n.length;if(a<=c)return n;var u=new Uint8Array(Math.max(c<<1,a));return u.set(n,0),u},r.F._decodeTiny=function(n,a,c,u,y,b){for(var o=r.F._bitsE,t=r.F._get17,s=0;s<c;){var f=n[t(u,y)&a];y+=15&f;var g=f>>>4;if(g<=15)b[s]=g,s++;else{var x=0,I=0;g==16?(I=3+o(u,y,2),y+=2,x=b[s-1]):g==17?(I=3+o(u,y,3),y+=3):g==18&&(I=11+o(u,y,7),y+=7);for(var E=s+I;s<E;)b[s]=x,s++}}return y},r.F._copyOut=function(n,a,c,u){for(var y=0,b=0,o=u.length>>>1;b<c;){var t=n[b+a];u[b<<1]=0,u[1+(b<<1)]=t,t>y&&(y=t),b++}for(;b<o;)u[b<<1]=0,u[1+(b<<1)]=0,b++;return y},r.F.makeCodes=function(n,a){for(var c,u,y,b,o=r.F.U,t=n.length,s=o.bl_count,f=0;f<=a;f++)s[f]=0;for(f=1;f<t;f+=2)s[n[f]]++;var g=o.next_code;for(c=0,s[0]=0,u=1;u<=a;u++)c=c+s[u-1]<<1,g[u]=c;for(y=0;y<t;y+=2)(b=n[y+1])!=0&&(n[y]=g[b],g[b]++)},r.F.codes2map=function(n,a,c){for(var u=n.length,y=r.F.U.rev15,b=0;b<u;b+=2)if(n[b+1]!=0)for(var o=b>>1,t=n[b+1],s=o<<4|t,f=a-t,g=n[b]<<f,x=g+(1<<f);g!=x;)c[y[g]>>>15-a]=s,g++},r.F.revCodes=function(n,a){for(var c=r.F.U.rev15,u=15-a,y=0;y<n.length;y+=2){var b=n[y]<<a-n[y+1];n[y]=c[b]>>>u}},r.F._putsE=function(n,a,c){c<<=7&a;var u=a>>>3;n[u]|=c,n[u+1]|=c>>>8},r.F._putsF=function(n,a,c){c<<=7&a;var u=a>>>3;n[u]|=c,n[u+1]|=c>>>8,n[u+2]|=c>>>16},r.F._bitsE=function(n,a,c){return(n[a>>>3]|n[1+(a>>>3)]<<8)>>>(7&a)&(1<<c)-1},r.F._bitsF=function(n,a,c){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16)>>>(7&a)&(1<<c)-1},r.F._get17=function(n,a){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(n,a){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16|n[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var n=r.F.U,a=0;a<32768;a++){var c=a;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,n.rev15[a]=(c>>>16|c<<16)>>>17}function u(y,b,o){for(;b--!=0;)y.push(0,o)}for(a=0;a<32;a++)n.ldef[a]=n.of0[a]<<3|n.exb[a],n.ddef[a]=n.df0[a]<<4|n.dxb[a];u(n.fltree,144,8),u(n.fltree,112,9),u(n.fltree,24,7),u(n.fltree,8,8),r.F.makeCodes(n.fltree,9),r.F.codes2map(n.fltree,9,n.flmap),r.F.revCodes(n.fltree,9),u(n.fdtree,32,5),r.F.makeCodes(n.fdtree,5),r.F.codes2map(n.fdtree,5,n.fdmap),r.F.revCodes(n.fdtree,5),u(n.itree,19,0),u(n.ltree,286,0),u(n.dtree,30,0),u(n.ttree,320,0)}()})();var os=as({__proto__:null,default:Zt},[Zt]);const ot=function(){var d={nextZero(o,t){for(;o[t]!=0;)t++;return t},readUshort:(o,t)=>o[t]<<8|o[t+1],writeUshort(o,t,s){o[t]=s>>8&255,o[t+1]=255&s},readUint:(o,t)=>16777216*o[t]+(o[t+1]<<16|o[t+2]<<8|o[t+3]),writeUint(o,t,s){o[t]=s>>24&255,o[t+1]=s>>16&255,o[t+2]=s>>8&255,o[t+3]=255&s},readASCII(o,t,s){let f="";for(let g=0;g<s;g++)f+=String.fromCharCode(o[t+g]);return f},writeASCII(o,t,s){for(let f=0;f<s.length;f++)o[t+f]=s.charCodeAt(f)},readBytes(o,t,s){const f=[];for(let g=0;g<s;g++)f.push(o[t+g]);return f},pad:o=>o.length<2?`0${o}`:o,readUTF8(o,t,s){let f,g="";for(let x=0;x<s;x++)g+=`%${d.pad(o[t+x].toString(16))}`;try{f=decodeURIComponent(g)}catch{return d.readASCII(o,t,s)}return f}};function e(o,t,s,f){const g=t*s,x=a(f),I=Math.ceil(t*x/8),E=new Uint8Array(4*g),N=new Uint32Array(E.buffer),{ctype:O}=f,{depth:P}=f,L=d.readUshort;if(O==6){const T=g<<2;if(P==8)for(var _=0;_<T;_+=4)E[_]=o[_],E[_+1]=o[_+1],E[_+2]=o[_+2],E[_+3]=o[_+3];if(P==16)for(_=0;_<T;_++)E[_]=o[_<<1]}else if(O==2){const T=f.tabs.tRNS;if(T==null){if(P==8)for(_=0;_<g;_++){var M=3*_;N[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M]}if(P==16)for(_=0;_<g;_++)M=6*_,N[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M]}else{var m=T[0];const F=T[1],j=T[2];if(P==8)for(_=0;_<g;_++){var h=_<<2;M=3*_,N[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M],o[M]==m&&o[M+1]==F&&o[M+2]==j&&(E[h+3]=0)}if(P==16)for(_=0;_<g;_++)h=_<<2,M=6*_,N[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M],L(o,M)==m&&L(o,M+2)==F&&L(o,M+4)==j&&(E[h+3]=0)}}else if(O==3){const T=f.tabs.PLTE,F=f.tabs.tRNS,j=F?F.length:0;if(P==1)for(var w=0;w<s;w++){var D=w*I,A=w*t;for(_=0;_<t;_++){h=A+_<<2;var R=3*(k=o[D+(_>>3)]>>7-((7&_)<<0)&1);E[h]=T[R],E[h+1]=T[R+1],E[h+2]=T[R+2],E[h+3]=k<j?F[k]:255}}if(P==2)for(w=0;w<s;w++)for(D=w*I,A=w*t,_=0;_<t;_++)h=A+_<<2,R=3*(k=o[D+(_>>2)]>>6-((3&_)<<1)&3),E[h]=T[R],E[h+1]=T[R+1],E[h+2]=T[R+2],E[h+3]=k<j?F[k]:255;if(P==4)for(w=0;w<s;w++)for(D=w*I,A=w*t,_=0;_<t;_++)h=A+_<<2,R=3*(k=o[D+(_>>1)]>>4-((1&_)<<2)&15),E[h]=T[R],E[h+1]=T[R+1],E[h+2]=T[R+2],E[h+3]=k<j?F[k]:255;if(P==8)for(_=0;_<g;_++){var k;h=_<<2,R=3*(k=o[_]),E[h]=T[R],E[h+1]=T[R+1],E[h+2]=T[R+2],E[h+3]=k<j?F[k]:255}}else if(O==4){if(P==8)for(_=0;_<g;_++){h=_<<2;var C=o[p=_<<1];E[h]=C,E[h+1]=C,E[h+2]=C,E[h+3]=o[p+1]}if(P==16)for(_=0;_<g;_++){var p;h=_<<2,C=o[p=_<<2],E[h]=C,E[h+1]=C,E[h+2]=C,E[h+3]=o[p+2]}}else if(O==0)for(m=f.tabs.tRNS?f.tabs.tRNS:-1,w=0;w<s;w++){const T=w*I,F=w*t;if(P==1)for(var v=0;v<t;v++){var z=(C=255*(o[T+(v>>>3)]>>>7-(7&v)&1))==255*m?0:255;N[F+v]=z<<24|C<<16|C<<8|C}else if(P==2)for(v=0;v<t;v++)z=(C=85*(o[T+(v>>>2)]>>>6-((3&v)<<1)&3))==85*m?0:255,N[F+v]=z<<24|C<<16|C<<8|C;else if(P==4)for(v=0;v<t;v++)z=(C=17*(o[T+(v>>>1)]>>>4-((1&v)<<2)&15))==17*m?0:255,N[F+v]=z<<24|C<<16|C<<8|C;else if(P==8)for(v=0;v<t;v++)z=(C=o[T+v])==m?0:255,N[F+v]=z<<24|C<<16|C<<8|C;else if(P==16)for(v=0;v<t;v++)C=o[T+(v<<1)],z=L(o,T+(v<<1))==m?0:255,N[F+v]=z<<24|C<<16|C<<8|C}return E}function i(o,t,s,f){const g=a(o),x=Math.ceil(s*g/8),I=new Uint8Array((x+1+o.interlace)*f);return t=o.tabs.CgBI?n(t,I):r(t,I),o.interlace==0?t=c(t,o,0,s,f):o.interlace==1&&(t=function(N,O){const P=O.width,L=O.height,_=a(O),M=_>>3,m=Math.ceil(P*_/8),h=new Uint8Array(L*m);let w=0;const D=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],k=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const v=R[C],z=k[C];let T=0,F=0,j=D[C];for(;j<L;)j+=v,F++;let q=A[C];for(;q<P;)q+=z,T++;const Q=Math.ceil(T*_/8);c(N,O,w,T,F);let Y=0,S=D[C];for(;S<L;){let Z=A[C],de=w+Y*Q<<3;for(;Z<P;){var p;if(_==1&&(p=(p=N[de>>3])>>7-(7&de)&1,h[S*m+(Z>>3)]|=p<<7-((7&Z)<<0)),_==2&&(p=(p=N[de>>3])>>6-(7&de)&3,h[S*m+(Z>>2)]|=p<<6-((3&Z)<<1)),_==4&&(p=(p=N[de>>3])>>4-(7&de)&15,h[S*m+(Z>>1)]|=p<<4-((1&Z)<<2)),_>=8){const ye=S*m+Z*M;for(let ue=0;ue<M;ue++)h[ye+ue]=N[(de>>3)+ue]}de+=_,Z+=z}Y++,S+=v}T*F!=0&&(w+=F*(1+Q)),C+=1}return h}(t,o)),t}function r(o,t){return n(new Uint8Array(o.buffer,2,o.length-6),t)}var n=function(){const o={H:{}};return o.H.N=function(t,s){const f=Uint8Array;let g,x,I=0,E=0,N=0,O=0,P=0,L=0,_=0,M=0,m=0;if(t[0]==3&&t[1]==0)return s||new f(0);const h=o.H,w=h.b,D=h.e,A=h.R,R=h.n,k=h.A,C=h.Z,p=h.m,v=s==null;for(v&&(s=new f(t.length>>>2<<5));I==0;)if(I=w(t,m,1),E=w(t,m+1,2),m+=3,E!=0){if(v&&(s=o.H.W(s,M+(1<<17))),E==1&&(g=p.J,x=p.h,L=511,_=31),E==2){N=D(t,m,5)+257,O=D(t,m+5,5)+1,P=D(t,m+10,4)+4,m+=14;let T=1;for(var z=0;z<38;z+=2)p.Q[z]=0,p.Q[z+1]=0;for(z=0;z<P;z++){const q=D(t,m+3*z,3);p.Q[1+(p.X[z]<<1)]=q,q>T&&(T=q)}m+=3*P,R(p.Q,T),k(p.Q,T,p.u),g=p.w,x=p.d,m=A(p.u,(1<<T)-1,N+O,t,m,p.v);const F=h.V(p.v,0,N,p.C);L=(1<<F)-1;const j=h.V(p.v,N,O,p.D);_=(1<<j)-1,R(p.C,F),k(p.C,F,g),R(p.D,j),k(p.D,j,x)}for(;;){const T=g[C(t,m)&L];m+=15&T;const F=T>>>4;if(!(F>>>8))s[M++]=F;else{if(F==256)break;{let j=M+F-254;if(F>264){const Z=p.q[F-257];j=M+(Z>>>3)+D(t,m,7&Z),m+=7&Z}const q=x[C(t,m)&_];m+=15&q;const Q=q>>>4,Y=p.c[Q],S=(Y>>>4)+w(t,m,15&Y);for(m+=15&Y;M<j;)s[M]=s[M++-S],s[M]=s[M++-S],s[M]=s[M++-S],s[M]=s[M++-S];M=j}}}}else{7&m&&(m+=8-(7&m));const T=4+(m>>>3),F=t[T-4]|t[T-3]<<8;v&&(s=o.H.W(s,M+F)),s.set(new f(t.buffer,t.byteOffset+T,F),M),m=T+F<<3,M+=F}return s.length==M?s:s.slice(0,M)},o.H.W=function(t,s){const f=t.length;if(s<=f)return t;const g=new Uint8Array(f<<1);return g.set(t,0),g},o.H.R=function(t,s,f,g,x,I){const E=o.H.e,N=o.H.Z;let O=0;for(;O<f;){const P=t[N(g,x)&s];x+=15&P;const L=P>>>4;if(L<=15)I[O]=L,O++;else{let _=0,M=0;L==16?(M=3+E(g,x,2),x+=2,_=I[O-1]):L==17?(M=3+E(g,x,3),x+=3):L==18&&(M=11+E(g,x,7),x+=7);const m=O+M;for(;O<m;)I[O]=_,O++}}return x},o.H.V=function(t,s,f,g){let x=0,I=0;const E=g.length>>>1;for(;I<f;){const N=t[I+s];g[I<<1]=0,g[1+(I<<1)]=N,N>x&&(x=N),I++}for(;I<E;)g[I<<1]=0,g[1+(I<<1)]=0,I++;return x},o.H.n=function(t,s){const f=o.H.m,g=t.length;let x,I,E,N;const O=f.j;for(var P=0;P<=s;P++)O[P]=0;for(P=1;P<g;P+=2)O[t[P]]++;const L=f.K;for(x=0,O[0]=0,I=1;I<=s;I++)x=x+O[I-1]<<1,L[I]=x;for(E=0;E<g;E+=2)N=t[E+1],N!=0&&(t[E]=L[N],L[N]++)},o.H.A=function(t,s,f){const g=t.length,x=o.H.m.r;for(let I=0;I<g;I+=2)if(t[I+1]!=0){const E=I>>1,N=t[I+1],O=E<<4|N,P=s-N;let L=t[I]<<P;const _=L+(1<<P);for(;L!=_;)f[x[L]>>>15-s]=O,L++}},o.H.l=function(t,s){const f=o.H.m.r,g=15-s;for(let x=0;x<t.length;x+=2){const I=t[x]<<s-t[x+1];t[x]=f[I]>>>g}},o.H.M=function(t,s,f){f<<=7&s;const g=s>>>3;t[g]|=f,t[g+1]|=f>>>8},o.H.I=function(t,s,f){f<<=7&s;const g=s>>>3;t[g]|=f,t[g+1]|=f>>>8,t[g+2]|=f>>>16},o.H.e=function(t,s,f){return(t[s>>>3]|t[1+(s>>>3)]<<8)>>>(7&s)&(1<<f)-1},o.H.b=function(t,s,f){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16)>>>(7&s)&(1<<f)-1},o.H.Z=function(t,s){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16)>>>(7&s)},o.H.i=function(t,s){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16|t[3+(s>>>3)]<<24)>>>(7&s)},o.H.m=function(){const t=Uint16Array,s=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new s(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new s(286),Y:new s(30),a:new s(19),t:new s(15e3),k:new t(65536),g:new t(32768)}}(),function(){const t=o.H.m;for(var s=0;s<32768;s++){let g=s;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,t.r[s]=(g>>>16|g<<16)>>>17}function f(g,x,I){for(;x--!=0;)g.push(0,I)}for(s=0;s<32;s++)t.q[s]=t.S[s]<<3|t.T[s],t.c[s]=t.p[s]<<4|t.z[s];f(t._,144,8),f(t._,112,9),f(t._,24,7),f(t._,8,8),o.H.n(t._,9),o.H.A(t._,9,t.J),o.H.l(t._,9),f(t.$,32,5),o.H.n(t.$,5),o.H.A(t.$,5,t.h),o.H.l(t.$,5),f(t.Q,19,0),f(t.C,286,0),f(t.D,30,0),f(t.v,320,0)}(),o.H.N}();function a(o){return[1,null,3,1,2,null,4][o.ctype]*o.depth}function c(o,t,s,f,g){let x=a(t);const I=Math.ceil(f*x/8);let E,N;x=Math.ceil(x/8);let O=o[s],P=0;if(O>1&&(o[s]=[0,0,1][O-2]),O==3)for(P=x;P<I;P++)o[P+1]=o[P+1]+(o[P+1-x]>>>1)&255;for(let L=0;L<g;L++)if(E=s+L*I,N=E+L+1,O=o[N-1],P=0,O==0)for(;P<I;P++)o[E+P]=o[N+P];else if(O==1){for(;P<x;P++)o[E+P]=o[N+P];for(;P<I;P++)o[E+P]=o[N+P]+o[E+P-x]}else if(O==2)for(;P<I;P++)o[E+P]=o[N+P]+o[E+P-I];else if(O==3){for(;P<x;P++)o[E+P]=o[N+P]+(o[E+P-I]>>>1);for(;P<I;P++)o[E+P]=o[N+P]+(o[E+P-I]+o[E+P-x]>>>1)}else{for(;P<x;P++)o[E+P]=o[N+P]+u(0,o[E+P-I],0);for(;P<I;P++)o[E+P]=o[N+P]+u(o[E+P-x],o[E+P-I],o[E+P-x-I])}return o}function u(o,t,s){const f=o+t-s,g=f-o,x=f-t,I=f-s;return g*g<=x*x&&g*g<=I*I?o:x*x<=I*I?t:s}function y(o,t,s){s.width=d.readUint(o,t),t+=4,s.height=d.readUint(o,t),t+=4,s.depth=o[t],t++,s.ctype=o[t],t++,s.compress=o[t],t++,s.filter=o[t],t++,s.interlace=o[t],t++}function b(o,t,s,f,g,x,I,E,N){const O=Math.min(t,g),P=Math.min(s,x);let L=0,_=0;for(let C=0;C<P;C++)for(let p=0;p<O;p++)if(I>=0&&E>=0?(L=C*t+p<<2,_=(E+C)*g+I+p<<2):(L=(-E+C)*t-I+p<<2,_=C*g+p<<2),N==0)f[_]=o[L],f[_+1]=o[L+1],f[_+2]=o[L+2],f[_+3]=o[L+3];else if(N==1){var M=o[L+3]*.00392156862745098,m=o[L]*M,h=o[L+1]*M,w=o[L+2]*M,D=f[_+3]*(1/255),A=f[_]*D,R=f[_+1]*D,k=f[_+2]*D;const v=1-M,z=M+D*v,T=z==0?0:1/z;f[_+3]=255*z,f[_+0]=(m+A*v)*T,f[_+1]=(h+R*v)*T,f[_+2]=(w+k*v)*T}else if(N==2)M=o[L+3],m=o[L],h=o[L+1],w=o[L+2],D=f[_+3],A=f[_],R=f[_+1],k=f[_+2],M==D&&m==A&&h==R&&w==k?(f[_]=0,f[_+1]=0,f[_+2]=0,f[_+3]=0):(f[_]=m,f[_+1]=h,f[_+2]=w,f[_+3]=M);else if(N==3){if(M=o[L+3],m=o[L],h=o[L+1],w=o[L+2],D=f[_+3],A=f[_],R=f[_+1],k=f[_+2],M==D&&m==A&&h==R&&w==k)continue;if(M<220&&D>20)return!1}return!0}return{decode:function(t){const s=new Uint8Array(t);let f=8;const g=d,x=g.readUshort,I=g.readUint,E={tabs:{},frames:[]},N=new Uint8Array(s.length);let O,P=0,L=0;const _=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(s[M]!=_[M])throw"The input is not a PNG file!";for(;f<s.length;){const C=g.readUint(s,f);f+=4;const p=g.readASCII(s,f,4);if(f+=4,p=="IHDR")y(s,f,E);else if(p=="iCCP"){for(var m=f;s[m]!=0;)m++;g.readASCII(s,f,m-f),s[m+1];const v=s.slice(m+2,f+C);let z=null;try{z=r(v)}catch{z=n(v)}E.tabs[p]=z}else if(p=="CgBI")E.tabs[p]=s.slice(f,f+4);else if(p=="IDAT"){for(M=0;M<C;M++)N[P+M]=s[f+M];P+=C}else if(p=="acTL")E.tabs[p]={num_frames:I(s,f),num_plays:I(s,f+4)},O=new Uint8Array(s.length);else if(p=="fcTL"){L!=0&&((k=E.frames[E.frames.length-1]).data=i(E,O.slice(0,L),k.rect.width,k.rect.height),L=0);const v={x:I(s,f+12),y:I(s,f+16),width:I(s,f+4),height:I(s,f+8)};let z=x(s,f+22);z=x(s,f+20)/(z==0?100:z);const T={rect:v,delay:Math.round(1e3*z),dispose:s[f+24],blend:s[f+25]};E.frames.push(T)}else if(p=="fdAT"){for(M=0;M<C-4;M++)O[L+M]=s[f+M+4];L+=C-4}else if(p=="pHYs")E.tabs[p]=[g.readUint(s,f),g.readUint(s,f+4),s[f+8]];else if(p=="cHRM")for(E.tabs[p]=[],M=0;M<8;M++)E.tabs[p].push(g.readUint(s,f+4*M));else if(p=="tEXt"||p=="zTXt"){E.tabs[p]==null&&(E.tabs[p]={});var h=g.nextZero(s,f),w=g.readASCII(s,f,h-f),D=f+C-h-1;if(p=="tEXt")R=g.readASCII(s,h+1,D);else{var A=r(s.slice(h+2,h+2+D));R=g.readUTF8(A,0,A.length)}E.tabs[p][w]=R}else if(p=="iTXt"){E.tabs[p]==null&&(E.tabs[p]={}),h=0,m=f,h=g.nextZero(s,m),w=g.readASCII(s,m,h-m);const v=s[m=h+1];var R;s[m+1],m+=2,h=g.nextZero(s,m),g.readASCII(s,m,h-m),m=h+1,h=g.nextZero(s,m),g.readUTF8(s,m,h-m),D=C-((m=h+1)-f),v==0?R=g.readUTF8(s,m,D):(A=r(s.slice(m,m+D)),R=g.readUTF8(A,0,A.length)),E.tabs[p][w]=R}else if(p=="PLTE")E.tabs[p]=g.readBytes(s,f,C);else if(p=="hIST"){const v=E.tabs.PLTE.length/3;for(E.tabs[p]=[],M=0;M<v;M++)E.tabs[p].push(x(s,f+2*M))}else if(p=="tRNS")E.ctype==3?E.tabs[p]=g.readBytes(s,f,C):E.ctype==0?E.tabs[p]=x(s,f):E.ctype==2&&(E.tabs[p]=[x(s,f),x(s,f+2),x(s,f+4)]);else if(p=="gAMA")E.tabs[p]=g.readUint(s,f)/1e5;else if(p=="sRGB")E.tabs[p]=s[f];else if(p=="bKGD")E.ctype==0||E.ctype==4?E.tabs[p]=[x(s,f)]:E.ctype==2||E.ctype==6?E.tabs[p]=[x(s,f),x(s,f+2),x(s,f+4)]:E.ctype==3&&(E.tabs[p]=s[f]);else if(p=="IEND")break;f+=C,g.readUint(s,f),f+=4}var k;return L!=0&&((k=E.frames[E.frames.length-1]).data=i(E,O.slice(0,L),k.rect.width,k.rect.height)),E.data=i(E,N,E.width,E.height),delete E.compress,delete E.interlace,delete E.filter,E},toRGBA8:function(t){const s=t.width,f=t.height;if(t.tabs.acTL==null)return[e(t.data,s,f,t).buffer];const g=[];t.frames[0].data==null&&(t.frames[0].data=t.data);const x=s*f*4,I=new Uint8Array(x),E=new Uint8Array(x),N=new Uint8Array(x);for(let P=0;P<t.frames.length;P++){const L=t.frames[P],_=L.rect.x,M=L.rect.y,m=L.rect.width,h=L.rect.height,w=e(L.data,m,h,t);if(P!=0)for(var O=0;O<x;O++)N[O]=I[O];if(L.blend==0?b(w,m,h,I,s,f,_,M,0):L.blend==1&&b(w,m,h,I,s,f,_,M,1),g.push(I.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)b(E,m,h,I,s,f,_,M,0);else if(L.dispose==2)for(O=0;O<x;O++)I[O]=N[O]}}return g},_paeth:u,_copyTile:b,_bin:d}}();(function(){const{_copyTile:d}=ot,{_bin:e}=ot,i=ot._paeth;var r={table:function(){const m=new Uint32Array(256);for(let h=0;h<256;h++){let w=h;for(let D=0;D<8;D++)1&w?w=3988292384^w>>>1:w>>>=1;m[h]=w}return m}(),update(m,h,w,D){for(let A=0;A<D;A++)m=r.table[255&(m^h[w+A])]^m>>>8;return m},crc:(m,h,w)=>4294967295^r.update(4294967295,m,h,w)};function n(m,h,w,D){h[w]+=m[0]*D>>4,h[w+1]+=m[1]*D>>4,h[w+2]+=m[2]*D>>4,h[w+3]+=m[3]*D>>4}function a(m){return Math.max(0,Math.min(255,m))}function c(m,h){const w=m[0]-h[0],D=m[1]-h[1],A=m[2]-h[2],R=m[3]-h[3];return w*w+D*D+A*A+R*R}function u(m,h,w,D,A,R,k){k==null&&(k=1);const C=D.length,p=[];for(var v=0;v<C;v++){const S=D[v];p.push([S>>>0&255,S>>>8&255,S>>>16&255,S>>>24&255])}for(v=0;v<C;v++){let S=4294967295;for(var z=0,T=0;T<C;T++){var F=c(p[v],p[T]);T!=v&&F<S&&(S=F,z=T)}}const j=new Uint32Array(A.buffer),q=new Int16Array(h*w*4),Q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(v=0;v<Q.length;v++)Q[v]=255*((Q[v]+.5)/16-.5);for(let S=0;S<w;S++)for(let Z=0;Z<h;Z++){var Y;v=4*(S*h+Z),k!=2?Y=[a(m[v]+q[v]),a(m[v+1]+q[v+1]),a(m[v+2]+q[v+2]),a(m[v+3]+q[v+3])]:(F=Q[4*(3&S)+(3&Z)],Y=[a(m[v]+F),a(m[v+1]+F),a(m[v+2]+F),a(m[v+3]+F)]),z=0;let de=16777215;for(T=0;T<C;T++){const me=c(Y,p[T]);me<de&&(de=me,z=T)}const ye=p[z],ue=[Y[0]-ye[0],Y[1]-ye[1],Y[2]-ye[2],Y[3]-ye[3]];k==1&&(Z!=h-1&&n(ue,q,v+4,7),S!=w-1&&(Z!=0&&n(ue,q,v+4*h-4,3),n(ue,q,v+4*h,5),Z!=h-1&&n(ue,q,v+4*h+4,1))),R[v>>2]=z,j[v>>2]=D[z]}}function y(m,h,w,D,A){A==null&&(A={});const{crc:R}=r,k=e.writeUint,C=e.writeUshort,p=e.writeASCII;let v=8;const z=m.frames.length>1;let T,F=!1,j=33+(z?20:0);if(A.sRGB!=null&&(j+=13),A.pHYs!=null&&(j+=21),A.iCCP!=null&&(T=pako.deflate(A.iCCP),j+=21+T.length+4),m.ctype==3){for(var q=m.plte.length,Q=0;Q<q;Q++)m.plte[Q]>>>24!=255&&(F=!0);j+=8+3*q+4+(F?8+1*q+4:0)}for(var Y=0;Y<m.frames.length;Y++)z&&(j+=38),j+=(ye=m.frames[Y]).cimg.length+12,Y!=0&&(j+=4);j+=12;const S=new Uint8Array(j),Z=[137,80,78,71,13,10,26,10];for(Q=0;Q<8;Q++)S[Q]=Z[Q];if(k(S,v,13),v+=4,p(S,v,"IHDR"),v+=4,k(S,v,h),v+=4,k(S,v,w),v+=4,S[v]=m.depth,v++,S[v]=m.ctype,v++,S[v]=0,v++,S[v]=0,v++,S[v]=0,v++,k(S,v,R(S,v-17,17)),v+=4,A.sRGB!=null&&(k(S,v,1),v+=4,p(S,v,"sRGB"),v+=4,S[v]=A.sRGB,v++,k(S,v,R(S,v-5,5)),v+=4),A.iCCP!=null){const ue=13+T.length;k(S,v,ue),v+=4,p(S,v,"iCCP"),v+=4,p(S,v,"ICC profile"),v+=11,v+=2,S.set(T,v),v+=T.length,k(S,v,R(S,v-(ue+4),ue+4)),v+=4}if(A.pHYs!=null&&(k(S,v,9),v+=4,p(S,v,"pHYs"),v+=4,k(S,v,A.pHYs[0]),v+=4,k(S,v,A.pHYs[1]),v+=4,S[v]=A.pHYs[2],v++,k(S,v,R(S,v-13,13)),v+=4),z&&(k(S,v,8),v+=4,p(S,v,"acTL"),v+=4,k(S,v,m.frames.length),v+=4,k(S,v,A.loop!=null?A.loop:0),v+=4,k(S,v,R(S,v-12,12)),v+=4),m.ctype==3){for(k(S,v,3*(q=m.plte.length)),v+=4,p(S,v,"PLTE"),v+=4,Q=0;Q<q;Q++){const ue=3*Q,me=m.plte[Q],De=255&me,Te=me>>>8&255,Ee=me>>>16&255;S[v+ue+0]=De,S[v+ue+1]=Te,S[v+ue+2]=Ee}if(v+=3*q,k(S,v,R(S,v-3*q-4,3*q+4)),v+=4,F){for(k(S,v,q),v+=4,p(S,v,"tRNS"),v+=4,Q=0;Q<q;Q++)S[v+Q]=m.plte[Q]>>>24&255;v+=q,k(S,v,R(S,v-q-4,q+4)),v+=4}}let de=0;for(Y=0;Y<m.frames.length;Y++){var ye=m.frames[Y];z&&(k(S,v,26),v+=4,p(S,v,"fcTL"),v+=4,k(S,v,de++),v+=4,k(S,v,ye.rect.width),v+=4,k(S,v,ye.rect.height),v+=4,k(S,v,ye.rect.x),v+=4,k(S,v,ye.rect.y),v+=4,C(S,v,D[Y]),v+=2,C(S,v,1e3),v+=2,S[v]=ye.dispose,v++,S[v]=ye.blend,v++,k(S,v,R(S,v-30,30)),v+=4);const ue=ye.cimg;k(S,v,(q=ue.length)+(Y==0?0:4)),v+=4;const me=v;p(S,v,Y==0?"IDAT":"fdAT"),v+=4,Y!=0&&(k(S,v,de++),v+=4),S.set(ue,v),v+=q,k(S,v,R(S,me,v-me)),v+=4}return k(S,v,0),v+=4,p(S,v,"IEND"),v+=4,k(S,v,R(S,v-4,4)),v+=4,S.buffer}function b(m,h,w){for(let D=0;D<m.frames.length;D++){const A=m.frames[D];A.rect.width;const R=A.rect.height,k=new Uint8Array(R*A.bpl+R);A.cimg=f(A.img,R,A.bpp,A.bpl,k,h,w)}}function o(m,h,w,D,A){const R=A[0],k=A[1],C=A[2],p=A[3],v=A[4],z=A[5];let T=6,F=8,j=255;for(var q=0;q<m.length;q++){const $=new Uint8Array(m[q]);for(var Q=$.length,Y=0;Y<Q;Y+=4)j&=$[Y+3]}const S=j!=255,Z=function(J,ie,X,ee,ae,be){const _e=[];for(var fe=0;fe<J.length;fe++){const Ae=new Uint8Array(J[fe]),Pe=new Uint32Array(Ae.buffer);var ve;let Qe=0,Ye=0,Ue=ie,Oe=X,$e=ee?1:0;if(fe!=0){const ct=be||ee||fe==1||_e[fe-2].dispose!=0?1:2;let dt=0,ut=1e9;for(let _t=0;_t<ct;_t++){var He=new Uint8Array(J[fe-1-_t]);const nr=new Uint32Array(J[fe-1-_t]);let ft=ie,vt=X,wt=-1,It=-1;for(let mt=0;mt<X;mt++)for(let st=0;st<ie;st++)Pe[we=mt*ie+st]!=nr[we]&&(st<ft&&(ft=st),st>wt&&(wt=st),mt<vt&&(vt=mt),mt>It&&(It=mt));wt==-1&&(ft=vt=wt=It=0),ae&&((1&ft)==1&&ft--,(1&vt)==1&&vt--);const Ht=(wt-ft+1)*(It-vt+1);Ht<ut&&(ut=Ht,dt=_t,Qe=ft,Ye=vt,Ue=wt-ft+1,Oe=It-vt+1)}He=new Uint8Array(J[fe-1-dt]),dt==1&&(_e[fe-1].dispose=2),ve=new Uint8Array(Ue*Oe*4),d(He,ie,X,ve,Ue,Oe,-Qe,-Ye,0),$e=d(Ae,ie,X,ve,Ue,Oe,-Qe,-Ye,3)?1:0,$e==1?s(Ae,ie,X,ve,{x:Qe,y:Ye,width:Ue,height:Oe}):d(Ae,ie,X,ve,Ue,Oe,-Qe,-Ye,0)}else ve=Ae.slice(0);_e.push({rect:{x:Qe,y:Ye,width:Ue,height:Oe},img:ve,blend:$e,dispose:0})}if(ee)for(fe=0;fe<_e.length;fe++){if((Ge=_e[fe]).blend==1)continue;const Ae=Ge.rect,Pe=_e[fe-1].rect,Qe=Math.min(Ae.x,Pe.x),Ye=Math.min(Ae.y,Pe.y),Ue={x:Qe,y:Ye,width:Math.max(Ae.x+Ae.width,Pe.x+Pe.width)-Qe,height:Math.max(Ae.y+Ae.height,Pe.y+Pe.height)-Ye};_e[fe-1].dispose=1,fe-1!=0&&t(J,ie,X,_e,fe-1,Ue,ae),t(J,ie,X,_e,fe,Ue,ae)}let Ze=0;if(J.length!=1)for(var we=0;we<_e.length;we++){var Ge;Ze+=(Ge=_e[we]).rect.width*Ge.rect.height}return _e}(m,h,w,R,k,C),de={},ye=[],ue=[];if(D!=0){const $=[];for(Y=0;Y<Z.length;Y++)$.push(Z[Y].img.buffer);const J=function(ae){let be=0;for(var _e=0;_e<ae.length;_e++)be+=ae[_e].byteLength;const fe=new Uint8Array(be);let ve=0;for(_e=0;_e<ae.length;_e++){const He=new Uint8Array(ae[_e]),Ze=He.length;for(let we=0;we<Ze;we+=4){let Ge=He[we],Ae=He[we+1],Pe=He[we+2];const Qe=He[we+3];Qe==0&&(Ge=Ae=Pe=0),fe[ve+we]=Ge,fe[ve+we+1]=Ae,fe[ve+we+2]=Pe,fe[ve+we+3]=Qe}ve+=Ze}return fe.buffer}($),ie=x(J,D);for(Y=0;Y<ie.plte.length;Y++)ye.push(ie.plte[Y].est.rgba);let X=0;for(Y=0;Y<Z.length;Y++){const ee=(De=Z[Y]).img.length;var me=new Uint8Array(ie.inds.buffer,X>>2,ee>>2);ue.push(me);const ae=new Uint8Array(ie.abuf,X,ee);z&&u(De.img,De.rect.width,De.rect.height,ye,ae,me),De.img.set(ae),X+=ee}}else for(q=0;q<Z.length;q++){var De=Z[q];const $=new Uint32Array(De.img.buffer);var Te=De.rect.width;for(Q=$.length,me=new Uint8Array(Q),ue.push(me),Y=0;Y<Q;Y++){const J=$[Y];if(Y!=0&&J==$[Y-1])me[Y]=me[Y-1];else if(Y>Te&&J==$[Y-Te])me[Y]=me[Y-Te];else{let ie=de[J];if(ie==null&&(de[J]=ie=ye.length,ye.push(J),ye.length>=300))break;me[Y]=ie}}}const Ee=ye.length;for(Ee<=256&&v==0&&(F=Ee<=2?1:Ee<=4?2:Ee<=16?4:8,F=Math.max(F,p)),q=0;q<Z.length;q++){(De=Z[q]).rect.x,De.rect.y,Te=De.rect.width;const $=De.rect.height;let J=De.img;new Uint32Array(J.buffer);let ie=4*Te,X=4;if(Ee<=256&&v==0){ie=Math.ceil(F*Te/8);var G=new Uint8Array(ie*$);const ee=ue[q];for(let ae=0;ae<$;ae++){Y=ae*ie;const be=ae*Te;if(F==8)for(var re=0;re<Te;re++)G[Y+re]=ee[be+re];else if(F==4)for(re=0;re<Te;re++)G[Y+(re>>1)]|=ee[be+re]<<4-4*(1&re);else if(F==2)for(re=0;re<Te;re++)G[Y+(re>>2)]|=ee[be+re]<<6-2*(3&re);else if(F==1)for(re=0;re<Te;re++)G[Y+(re>>3)]|=ee[be+re]<<7-1*(7&re)}J=G,T=3,X=1}else if(S==0&&Z.length==1){G=new Uint8Array(Te*$*3);const ee=Te*$;for(Y=0;Y<ee;Y++){const ae=3*Y,be=4*Y;G[ae]=J[be],G[ae+1]=J[be+1],G[ae+2]=J[be+2]}J=G,T=2,X=3,ie=3*Te}De.img=J,De.bpl=ie,De.bpp=X}return{ctype:T,depth:F,plte:ye,frames:Z}}function t(m,h,w,D,A,R,k){const C=Uint8Array,p=Uint32Array,v=new C(m[A-1]),z=new p(m[A-1]),T=A+1<m.length?new C(m[A+1]):null,F=new C(m[A]),j=new p(F.buffer);let q=h,Q=w,Y=-1,S=-1;for(let de=0;de<R.height;de++)for(let ye=0;ye<R.width;ye++){const ue=R.x+ye,me=R.y+de,De=me*h+ue,Te=j[De];Te==0||D[A-1].dispose==0&&z[De]==Te&&(T==null||T[4*De+3]!=0)||(ue<q&&(q=ue),ue>Y&&(Y=ue),me<Q&&(Q=me),me>S&&(S=me))}Y==-1&&(q=Q=Y=S=0),k&&((1&q)==1&&q--,(1&Q)==1&&Q--),R={x:q,y:Q,width:Y-q+1,height:S-Q+1};const Z=D[A];Z.rect=R,Z.blend=1,Z.img=new Uint8Array(R.width*R.height*4),D[A-1].dispose==0?(d(v,h,w,Z.img,R.width,R.height,-R.x,-R.y,0),s(F,h,w,Z.img,R)):d(F,h,w,Z.img,R.width,R.height,-R.x,-R.y,0)}function s(m,h,w,D,A){d(m,h,w,D,A.width,A.height,-A.x,-A.y,2)}function f(m,h,w,D,A,R,k){const C=[];let p,v=[0,1,2,3,4];R!=-1?v=[R]:(h*D>5e5||w==1)&&(v=[0]),k&&(p={level:0});const z=os;for(var T=0;T<v.length;T++){for(let q=0;q<h;q++)g(A,m,q,D,w,v[T]);C.push(z.deflate(A,p))}let F,j=1e9;for(T=0;T<C.length;T++)C[T].length<j&&(F=T,j=C[T].length);return C[F]}function g(m,h,w,D,A,R){const k=w*D;let C=k+w;if(m[C]=R,C++,R==0)if(D<500)for(var p=0;p<D;p++)m[C+p]=h[k+p];else m.set(new Uint8Array(h.buffer,k,D),C);else if(R==1){for(p=0;p<A;p++)m[C+p]=h[k+p];for(p=A;p<D;p++)m[C+p]=h[k+p]-h[k+p-A]+256&255}else if(w==0){for(p=0;p<A;p++)m[C+p]=h[k+p];if(R==2)for(p=A;p<D;p++)m[C+p]=h[k+p];if(R==3)for(p=A;p<D;p++)m[C+p]=h[k+p]-(h[k+p-A]>>1)+256&255;if(R==4)for(p=A;p<D;p++)m[C+p]=h[k+p]-i(h[k+p-A],0,0)+256&255}else{if(R==2)for(p=0;p<D;p++)m[C+p]=h[k+p]+256-h[k+p-D]&255;if(R==3){for(p=0;p<A;p++)m[C+p]=h[k+p]+256-(h[k+p-D]>>1)&255;for(p=A;p<D;p++)m[C+p]=h[k+p]+256-(h[k+p-D]+h[k+p-A]>>1)&255}if(R==4){for(p=0;p<A;p++)m[C+p]=h[k+p]+256-i(0,h[k+p-D],0)&255;for(p=A;p<D;p++)m[C+p]=h[k+p]+256-i(h[k+p-A],h[k+p-D],h[k+p-A-D])&255}}}function x(m,h){const w=new Uint8Array(m),D=w.slice(0),A=new Uint32Array(D.buffer),R=I(D,h),k=R[0],C=R[1],p=w.length,v=new Uint8Array(p>>2);let z;if(w.length<2e7)for(var T=0;T<p;T+=4)z=E(k,F=w[T]*(1/255),j=w[T+1]*(1/255),q=w[T+2]*(1/255),Q=w[T+3]*(1/255)),v[T>>2]=z.ind,A[T>>2]=z.est.rgba;else for(T=0;T<p;T+=4){var F=w[T]*.00392156862745098,j=w[T+1]*(1/255),q=w[T+2]*(1/255),Q=w[T+3]*(1/255);for(z=k;z.left;)z=N(z.est,F,j,q,Q)<=0?z.left:z.right;v[T>>2]=z.ind,A[T>>2]=z.est.rgba}return{abuf:D.buffer,inds:v,plte:C}}function I(m,h,w){w==null&&(w=1e-4);const D=new Uint32Array(m.buffer),A={i0:0,i1:m.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=L(m,A.i0,A.i1),A.est=_(A.bst);const R=[A];for(;R.length<h;){let C=0,p=0;for(var k=0;k<R.length;k++)R[k].est.L>C&&(C=R[k].est.L,p=k);if(C<w)break;const v=R[p],z=O(m,D,v.i0,v.i1,v.est.e,v.est.eMq255);if(v.i0>=z||v.i1<=z){v.est.L=0;continue}const T={i0:v.i0,i1:z,bst:null,est:null,tdst:0,left:null,right:null};T.bst=L(m,T.i0,T.i1),T.est=_(T.bst);const F={i0:z,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:v.bst.N-T.bst.N},k=0;k<16;k++)F.bst.R[k]=v.bst.R[k]-T.bst.R[k];for(k=0;k<4;k++)F.bst.m[k]=v.bst.m[k]-T.bst.m[k];F.est=_(F.bst),v.left=T,v.right=F,R[p]=T,R.push(F)}for(R.sort((C,p)=>p.bst.N-C.bst.N),k=0;k<R.length;k++)R[k].ind=k;return[A,R]}function E(m,h,w,D,A){if(m.left==null)return m.tdst=function(T,F,j,q,Q){const Y=F-T[0],S=j-T[1],Z=q-T[2],de=Q-T[3];return Y*Y+S*S+Z*Z+de*de}(m.est.q,h,w,D,A),m;const R=N(m.est,h,w,D,A);let k=m.left,C=m.right;R>0&&(k=m.right,C=m.left);const p=E(k,h,w,D,A);if(p.tdst<=R*R)return p;const v=E(C,h,w,D,A);return v.tdst<p.tdst?v:p}function N(m,h,w,D,A){const{e:R}=m;return R[0]*h+R[1]*w+R[2]*D+R[3]*A-m.eMq}function O(m,h,w,D,A,R){for(D-=4;w<D;){for(;P(m,w,A)<=R;)w+=4;for(;P(m,D,A)>R;)D-=4;if(w>=D)break;const k=h[w>>2];h[w>>2]=h[D>>2],h[D>>2]=k,w+=4,D-=4}for(;P(m,w,A)>R;)w-=4;return w+4}function P(m,h,w){return m[h]*w[0]+m[h+1]*w[1]+m[h+2]*w[2]+m[h+3]*w[3]}function L(m,h,w){const D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],R=w-h>>2;for(let k=h;k<w;k+=4){const C=m[k]*.00392156862745098,p=m[k+1]*(1/255),v=m[k+2]*(1/255),z=m[k+3]*(1/255);A[0]+=C,A[1]+=p,A[2]+=v,A[3]+=z,D[0]+=C*C,D[1]+=C*p,D[2]+=C*v,D[3]+=C*z,D[5]+=p*p,D[6]+=p*v,D[7]+=p*z,D[10]+=v*v,D[11]+=v*z,D[15]+=z*z}return D[4]=D[1],D[8]=D[2],D[9]=D[6],D[12]=D[3],D[13]=D[7],D[14]=D[11],{R:D,m:A,N:R}}function _(m){const{R:h}=m,{m:w}=m,{N:D}=m,A=w[0],R=w[1],k=w[2],C=w[3],p=D==0?0:1/D,v=[h[0]-A*A*p,h[1]-A*R*p,h[2]-A*k*p,h[3]-A*C*p,h[4]-R*A*p,h[5]-R*R*p,h[6]-R*k*p,h[7]-R*C*p,h[8]-k*A*p,h[9]-k*R*p,h[10]-k*k*p,h[11]-k*C*p,h[12]-C*A*p,h[13]-C*R*p,h[14]-C*k*p,h[15]-C*C*p],z=v,T=M;let F=[Math.random(),Math.random(),Math.random(),Math.random()],j=0,q=0;if(D!=0)for(let Y=0;Y<16&&(F=T.multVec(z,F),q=Math.sqrt(T.dot(F,F)),F=T.sml(1/q,F),!(Y!=0&&Math.abs(q-j)<1e-9));Y++)j=q;const Q=[A*p,R*p,k*p,C*p];return{Cov:v,q:Q,e:F,L:j,eMq255:T.dot(T.sml(255,Q),F),eMq:T.dot(F,Q),rgba:(Math.round(255*Q[3])<<24|Math.round(255*Q[2])<<16|Math.round(255*Q[1])<<8|Math.round(255*Q[0])<<0)>>>0}}var M={multVec:(m,h)=>[m[0]*h[0]+m[1]*h[1]+m[2]*h[2]+m[3]*h[3],m[4]*h[0]+m[5]*h[1]+m[6]*h[2]+m[7]*h[3],m[8]*h[0]+m[9]*h[1]+m[10]*h[2]+m[11]*h[3],m[12]*h[0]+m[13]*h[1]+m[14]*h[2]+m[15]*h[3]],dot:(m,h)=>m[0]*h[0]+m[1]*h[1]+m[2]*h[2]+m[3]*h[3],sml:(m,h)=>[m*h[0],m*h[1],m*h[2],m*h[3]]};ot.encode=function(h,w,D,A,R,k,C){A==null&&(A=0),C==null&&(C=!1);const p=o(h,w,D,A,[!1,!1,!1,0,C,!1]);return b(p,-1),y(p,w,D,R,k)},ot.encodeLL=function(h,w,D,A,R,k,C,p){const v={ctype:0+(A==1?0:2)+(R==0?0:4),depth:k,frames:[]},z=(A+R)*k,T=z*w;for(let F=0;F<h.length;F++)v.frames.push({rect:{x:0,y:0,width:w,height:D},img:new Uint8Array(h[F]),blend:0,dispose:1,bpp:Math.ceil(z/8),bpl:Math.ceil(T/8)});return b(v,0,!0),y(v,w,D,C,p)},ot.encode.compress=o,ot.encode.dither=u,ot.quantize=x,ot.quantize.getKDtree=I,ot.quantize.getNearest=E})();const en={toArrayBuffer(d,e){const i=d.width,r=d.height,n=i<<2,a=d.getContext("2d").getImageData(0,0,i,r),c=new Uint32Array(a.data.buffer),u=(32*i+31)/32<<2,y=u*r,b=122+y,o=new ArrayBuffer(b),t=new DataView(o),s=1<<20;let f,g,x,I,E=s,N=0,O=0,P=0;function L(m){t.setUint16(O,m,!0),O+=2}function _(m){t.setUint32(O,m,!0),O+=4}function M(m){O+=m}L(19778),_(b),M(4),_(122),_(108),_(i),_(-r>>>0),L(1),L(32),_(3),_(y),_(2835),_(2835),M(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function m(){for(;N<r&&E>0;){for(I=122+N*u,f=0;f<n;)E--,g=c[P++],x=g>>>24,t.setUint32(I+f,g<<8|x),f+=4;N++}P<c.length?(E=s,setTimeout(m,en._dly)):e(o)}()},toBlob(d,e){this.toArrayBuffer(d,i=>{e(new Blob([i],{type:"image/bmp"}))})},_dly:9};var tt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ls={[tt.CHROME]:16384,[tt.FIREFOX]:11180,[tt.DESKTOP_SAFARI]:16384,[tt.IE]:8192,[tt.IOS]:4096,[tt.ETC]:8192};const xr=typeof window<"u",tn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Jt=xr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),cs=(xr||tn)&&(Jt&&Jt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),rn=(xr||tn)&&(Jt&&Jt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Er(d,e,i=Date.now()){return new Promise(r=>{const n=d.split(","),a=n[0].match(/:(.*?);/)[1],c=globalThis.atob(n[1]);let u=c.length;const y=new Uint8Array(u);for(;u--;)y[u]=c.charCodeAt(u);const b=new Blob([y],{type:a});b.name=e,b.lastModified=i,r(b)})}function nn(d){return new Promise((e,i)=>{const r=new rn;r.onload=()=>e(r.result),r.onerror=n=>i(n),r.readAsDataURL(d)})}function an(d){return new Promise((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=n=>i(n),r.src=d})}function Ct(){if(Ct.cachedResult!==void 0)return Ct.cachedResult;let d=tt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?d=tt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?d=tt.IOS:/Safari/i.test(e)?d=tt.DESKTOP_SAFARI:/Firefox/i.test(e)?d=tt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(d=tt.IE),Ct.cachedResult=d,Ct.cachedResult}function sn(d,e){const i=Ct(),r=ls[i];let n=d,a=e,c=n*a;const u=n>a?a/n:n/a;for(;c>r*r;){const y=(r+n)/2,b=(r+a)/2;y<b?(a=b,n=b*u):(a=y*u,n=y),c=n*a}return{width:n,height:a}}function rr(d,e){let i,r;try{if(i=new OffscreenCanvas(d,e),r=i.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),r=i.getContext("2d")}return i.width=d,i.height=e,[i,r]}function on(d,e){const{width:i,height:r}=sn(d.width,d.height),[n,a]=rr(i,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,n.width,n.height)),a.drawImage(d,0,0,n.width,n.height),n}function jt(){return jt.cachedResult!==void 0||(jt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),jt.cachedResult}function er(d,e={}){return new Promise(function(i,r){let n,a;var c=function(){try{return a=on(n,e.fileType||d.type),i([n,a])}catch(y){return r(y)}},u=function(y){try{var b=function(o){try{throw o}catch(t){return r(t)}};try{let o;return nn(d).then(function(t){try{return o=t,an(o).then(function(s){try{return n=s,function(){try{return c()}catch(f){return r(f)}}()}catch(f){return b(f)}},b)}catch(s){return b(s)}},b)}catch(o){b(o)}}catch(o){return r(o)}};try{if(jt()||[tt.DESKTOP_SAFARI,tt.MOBILE_SAFARI].includes(Ct()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then(function(y){try{return n=y,c()}catch{return u()}},u)}catch{u()}})}function tr(d,e,i,r,n=1){return new Promise(function(a,c){let u;if(e==="image/png"){let b,o,t;return b=d.getContext("2d"),{data:o}=b.getImageData(0,0,d.width,d.height),t=ot.encode([o.buffer],d.width,d.height,4096*n),u=new Blob([t],{type:e}),u.name=i,u.lastModified=r,y.call(this)}{let b=function(){return y.call(this)};if(e==="image/bmp")return new Promise(o=>en.toBlob(d,o)).then(function(o){try{return u=o,u.name=i,u.lastModified=r,b.call(this)}catch(t){return c(t)}}.bind(this),c);{let o=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:e,quality:n}).then(function(t){try{return u=t,u.name=i,u.lastModified=r,o.call(this)}catch(s){return c(s)}}.bind(this),c);{let t;return t=d.toDataURL(e,n),Er(t,i,r).then(function(s){try{return u=s,o.call(this)}catch(f){return c(f)}}.bind(this),c)}}}function y(){return a(u)}})}function pt(d){d.width=0,d.height=0}function Ut(){return new Promise(function(d,e){let i,r,n,a;return Ut.cachedResult!==void 0?d(Ut.cachedResult):Er("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return i=c,er(i).then(function(u){try{return r=u[1],tr(r,i.type,i.name,i.lastModified).then(function(y){try{return n=y,pt(r),er(n).then(function(b){try{return a=b[0],Ut.cachedResult=a.width===1&&a.height===2,d(Ut.cachedResult)}catch(o){return e(o)}},e)}catch(b){return e(b)}},e)}catch(y){return e(y)}},e)}catch(u){return e(u)}},e)})}function ln(d){return new Promise((e,i)=>{const r=new rn;r.onload=n=>{const a=new DataView(n.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const c=a.byteLength;let u=2;for(;u<c;){if(a.getUint16(u+2,!1)<=8)return e(-1);const y=a.getUint16(u,!1);if(u+=2,y==65505){if(a.getUint32(u+=2,!1)!=1165519206)return e(-1);const b=a.getUint16(u+=6,!1)==18761;u+=a.getUint32(u+4,b);const o=a.getUint16(u,b);u+=2;for(let t=0;t<o;t++)if(a.getUint16(u+12*t,b)==274)return e(a.getUint16(u+12*t+8,b))}else{if((65280&y)!=65280)break;u+=a.getUint16(u,!1)}}return e(-1)},r.onerror=n=>i(n),r.readAsArrayBuffer(d)})}function cn(d,e){const{width:i}=d,{height:r}=d,{maxWidthOrHeight:n}=e;let a,c=d;return isFinite(n)&&(i>n||r>n)&&([c,a]=rr(i,r),i>r?(c.width=n,c.height=r/i*n):(c.width=i/r*n,c.height=n),a.drawImage(d,0,0,c.width,c.height),pt(d)),c}function dn(d,e){const{width:i}=d,{height:r}=d,[n,a]=rr(i,r);switch(e>4&&e<9?(n.width=r,n.height=i):(n.width=i,n.height=r),e){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(d,0,0,i,r),pt(d),n}function Cr(d,e,i=0){return new Promise(function(r,n){let a,c,u,y,b,o,t,s,f,g,x,I,E,N,O,P,L,_,M,m;function h(D=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=D,e.onProgress(Math.min(a,100))}function w(D){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(D,a),100),e.onProgress(a)}return a=i,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,h(),er(d,e).then(function(D){try{return[,y]=D,h(),b=cn(y,e),h(),new Promise(function(A,R){var k;if(!(k=e.exifOrientation))return ln(d).then(function(p){try{return k=p,C.call(this)}catch(v){return R(v)}}.bind(this),R);function C(){return A(k)}return C.call(this)}).then(function(A){try{return o=A,h(),Ut().then(function(R){try{return t=R?b:dn(b,o),h(),s=e.initialQuality||1,f=e.fileType||d.type,tr(t,f,d.name,d.lastModified,s).then(function(k){try{{let p=function(){if(c--&&(O>u||O>E)){let z,T;return z=m?.95*M.width:M.width,T=m?.95*M.height:M.height,[L,_]=rr(z,T),_.drawImage(M,0,0,z,T),s*=f==="image/png"?.85:.95,tr(L,f,d.name,d.lastModified,s).then(function(F){try{return P=F,pt(M),M=L,O=P.size,w(Math.min(99,Math.floor((N-O)/(N-u)*100))),p}catch(j){return n(j)}},n)}return[1]},v=function(){return pt(M),pt(L),pt(b),pt(t),pt(y),w(100),r(P)};if(g=k,h(),x=g.size>u,I=g.size>d.size,!x&&!I)return w(100),r(g);var C;return E=d.size,N=g.size,O=N,M=t,m=!e.alwaysKeepResolution&&x,(C=function(z){for(;z;){if(z.then)return void z.then(C,n);try{if(z.pop){if(z.length)return z.pop()?v.call(this):z;z=p}else z=z.call(this)}catch(T){return n(T)}}}.bind(this))(p)}}catch(p){return n(p)}}.bind(this),n)}catch(k){return n(k)}}.bind(this),n)}catch(R){return n(R)}}.bind(this),n)}catch(A){return n(A)}}.bind(this),n)})}const ds=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let dr;function us(d,e){return new Promise((i,r)=>{dr||(dr=function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))}(ds));const n=new Worker(dr);n.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)n.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void n.terminate();i(c.data.file),n.terminate()}else e.onProgress(c.data.progress)}),n.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),n.terminate()}),n.postMessage({file:d,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Ke(d,e){return new Promise(function(i,r){let n,a,c,u,y,b;if(n={...e},c=0,{onProgress:u}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{c=f,typeof u=="function"&&u(c)},!(d instanceof Blob||d instanceof cs))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return r(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||b)return Cr(d,n).then(function(f){try{return a=f,s.call(this)}catch(g){return r(g)}}.bind(this),r);var o=function(){try{return s.call(this)}catch(f){return r(f)}}.bind(this),t=function(f){try{return Cr(d,n).then(function(g){try{return a=g,o()}catch(x){return r(x)}},r)}catch(g){return r(g)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",us(d,n).then(function(f){try{return a=f,o()}catch{return t()}},t)}catch{t()}function s(){try{a.name=d.name,a.lastModified=d.lastModified}catch{}try{n.preserveExif&&d.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===d.type)&&(a=Jr(d,a))}catch{}return i(a)}})}Ke.getDataUrlFromFile=nn,Ke.getFilefromDataUrl=Er,Ke.loadImage=an,Ke.drawImageInCanvas=on,Ke.drawFileInCanvas=er,Ke.canvasToFile=tr,Ke.getExifOrientation=ln,Ke.handleMaxWidthOrHeight=cn,Ke.followExifOrientation=dn,Ke.cleanupCanvasMemory=pt,Ke.isAutoOrientationInBrowser=Ut,Ke.approximateBelowMaximumCanvasSizeOfBrowser=sn,Ke.copyExifWithoutOrientation=Jr,Ke.getBrowserName=Ct,Ke.version="2.0.2";const fs={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function vs(d,e,i={},r){const n={...fs,...i};try{let a=d;if(d.type.startsWith("image/")&&d.size>n.compressionThresholdMB*1024*1024){r?.("Compressing image...");try{const y=await Ke(d,{maxSizeMB:n.maxSizeMB,maxWidthOrHeight:n.maxWidthOrHeight,initialQuality:n.initialQuality,useWebWorker:n.useWebWorker});a=y;const b=(d.size/(1024*1024)).toFixed(2),o=(y.size/(1024*1024)).toFixed(2),t=((1-y.size/d.size)*100).toFixed(0);console.log(`Image compressed: ${b}MB → ${o}MB (${t}% smaller)`)}catch(y){console.warn("Image compression failed, uploading original:",y)}}return r?.("Uploading file..."),{success:!0,attachment:await Pn(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function ms(d){try{const e=Cn(d.url);return await Fn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function hs(d,e,i){return d.map(r=>r.id===e?{...r,name:i}:r)}function ps(d,e=5){const i=d.type.startsWith("image/"),r=e*1024*1024;if(!i&&d.size>r){const n=(d.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${n}MB)`}}return{valid:!0}}function ys(d){return{uploadAttachment:(e,i,r)=>vs(e,i,d,r),removeAttachment:ms,updateAttachmentName:hs,validateFile:ps}}function Fr(d,e){const[i,r]=e.split(":").map(Number);let n=Va(d,i);return n=Xa(n,r),n}function Pr(d){return Array.from(new Set(d)).sort((e,i)=>e-i)}function gs(d,e){if(e.includes(d))return 0;const i=e.find(r=>r>d);return i!==void 0?i-d:7-d+e[0]}function bs(d,e,i){const r=new Date(d),n=At(r,Xe),a=n.getDay(),c=gs(a,i);if(c===0)return{start_time:d,end_time:e};const u=zt(n,c),y=Ft(u,Xe);let b=e;if(e){const o=At(new Date(e),Xe),t=zt(o,c);b=Ft(t,Xe).toISOString()}return{start_time:y.toISOString(),end_time:b}}function un({eventItem:d,dateInput:e,startTimeInput:i,endTimeInput:r,attachments:n,isRecurring:a,recurrenceFrequency:c,recurrenceInterval:u,recurringDays:y,recurrenceEndDate:b,hasEndDate:o,monthlyType:t}){const s=!d.id,f={...d.meta_data??{}};d.category&&(f.category=d.category);const g=Wr(),x=g?hr(g.stores.currentUser):void 0;if(s){const _=g?hr(g.stores.userOrganizations):void 0,M=x?.displayName||x?.username,m=x?.id;M&&!f.submitted_by_name&&(f.submitted_by_name=M),m&&!f.submitted_by_user_id&&(f.submitted_by_user_id=m);const h=_?Array.from(_):[];h.length&&!f.submitted_by_organizations&&(f.submitted_by_organizations=h),f.submitted_at||(f.submitted_at=new Date().toISOString())}else{const _=x?.displayName||x?.username;_&&(f.edited_by_name=_),x?.id&&(f.edited_by_user_id=x.id),f.edited_at=new Date().toISOString()}const I=Object.keys(f).length?f:void 0,E={title:d.title,description:d.description,location:d.location,is_public:d.is_public??!0,event_type:d.event_type,meta_data:I,attachments:n.length>0?n:null};if(d.event_type!=="calendar_event")return{...E,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const N=e?Xt(e,"yyyy-MM-dd",new Date):new Date;let O,P;if(d.is_all_day){const _=Ft(N,Xe);O=_.toISOString(),P=_.toISOString()}else{const _=new Date(N.getTime()),M=new Date(N.getTime()),m=i?Fr(_,i):N,h=r?Fr(M,r):N;O=Ft(m,Xe).toISOString(),P=Ft(h,Xe).toISOString()}const L={...E,start_time:O,end_time:P,is_all_day:d.is_all_day};if(a&&L.start_time){if(c==="weekly"&&y.length>0){const M=Pr(y),m=bs(L.start_time,L.end_time,M);L.start_time=m.start_time,L.end_time=m.end_time}if(c==="daily"||c==="yearly"||c==="weekly"&&y.length>0||c==="monthly"){const{recurrence_rule:M,recurrence_end_date:m}=wr({frequency:c,interval:u,recurringDays:c==="weekly"?Pr(y):[],recurrenceEndDate:b,hasEndDate:o,monthlyType:t,startTime:L.start_time});L.recurrence_rule=M,L.recurrence_end_date=m}else L.recurrence_rule=void 0,L.recurrence_end_date=void 0}else L.recurrence_rule=void 0,L.recurrence_end_date=void 0;return L}async function _s({id:d,...e}){const i=un(e);return d?(e.eventItem.bishop_approval==="NO"&&Object.assign(i,{bishop_approval:null,bishop_approval_at:null,bishop_approval_by_user_id:null,first_counselor_approval:null,first_counselor_approval_at:null,first_counselor_approval_by_user_id:null,second_counselor_approval:null,second_counselor_approval_at:null,second_counselor_approval_by_user_id:null}),{action:"update",event:await Pt(d,i)}):{action:"create",event:await Hr(i)}}async function ws(d){await zr(d)}function xs({event:d,newDate:e}){const i=d.start_time?new Date(d.start_time):new Date,r=d.end_time?new Date(d.end_time):new Date,[n,a,c]=e.split("-").map(Number),u=new Date(i);u.setFullYear(n,a-1,c);const y=new Date(r);return y.setFullYear(n,a-1,c),{...d,id:void 0,title:`CLONED - ${d.title}`,start_time:u.toISOString(),end_time:y.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function Es(d,e,i){const r=await Yt(d);if(!r)throw new Error("Event not found");const n=r.recurrence_exceptions||[];n.includes(e)||n.push(e);const a=r.recurrence_overrides||{};a[e]={title:i.title,description:i.description,location:i.location,start_time:i.start_time,end_time:i.end_time,is_all_day:i.is_all_day,meta_data:i.meta_data},await Pt(d,{recurrence_exceptions:n,recurrence_overrides:a})}async function ks(d,e,i){const r=await Yt(d);if(!r||!r.recurrence_rule||!r.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:n,generateRecurrenceRule:a}=await pr(async()=>{const{parseRecurrenceRule:O,generateRecurrenceRule:P}=await Promise.resolve().then(()=>yr);return{parseRecurrenceRule:O,generateRecurrenceRule:P}},void 0,import.meta.url),c=n(r.recurrence_rule,r.recurrence_end_date);if(!c)throw new Error("Failed to parse recurrence rule");const u=Se(new Date(r.start_time),"yyyy-MM-dd"),y=Xt(e,"yyyy-MM-dd",new Date),b=Xt(u,"yyyy-MM-dd",new Date);if(y<=b)return await Pt(d,i),d;const o=zt(y,-1),t=Se(o,"yyyy-MM-dd"),{recurrence_rule:s,recurrence_end_date:f}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:t,hasEndDate:!0,monthlyType:c.monthlyType,startTime:r.start_time});await Pt(d,{recurrence_rule:s,recurrence_end_date:f});const g=c.hasEndDate?c.recurrenceEndDate:"",{recurrence_rule:x,recurrence_end_date:I}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:g,hasEndDate:c.hasEndDate,monthlyType:c.monthlyType,startTime:i.start_time||r.start_time}),E={...i,recurrence_rule:x,recurrence_end_date:I};return(await Hr(E))?.id||0}async function Ds(d,e){const i=await Yt(d);if(!i)throw new Error("Event not found");const r={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:i.start_time,end_time:i.end_time,recurrence_rule:i.recurrence_rule,recurrence_end_date:i.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Pt(d,r)}async function As(d,e){const i=await Yt(d);if(!i)throw new Error("Event not found");const r=i.recurrence_exceptions||[];r.includes(e)||r.push(e);const n=i.recurrence_overrides||{};n[e]&&delete n[e],await Pt(d,{recurrence_exceptions:r,recurrence_overrides:n})}async function Ts(d,e){const i=await Yt(d);if(!i||!i.recurrence_rule||!i.start_time)throw new Error("Event not found or is not recurring");const r=Xt(e,"yyyy-MM-dd",new Date),n=zt(r,-1),a=Se(n,"yyyy-MM-dd"),{parseRecurrenceRule:c}=await pr(async()=>{const{parseRecurrenceRule:t}=await Promise.resolve().then(()=>yr);return{parseRecurrenceRule:t}},void 0,import.meta.url),u=c(i.recurrence_rule,i.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:y}=await pr(async()=>{const{generateRecurrenceRule:t}=await Promise.resolve().then(()=>yr);return{generateRecurrenceRule:t}},void 0,import.meta.url),{recurrence_rule:b,recurrence_end_date:o}=y({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:i.start_time});await Pt(d,{recurrence_rule:b,recurrence_end_date:o})}async function Is(d){await zr(d)}function Ms(){return{saveEvent:_s,deleteEventById:ws,cloneEventForDate:xs,buildEventPayload:un,saveSingleInstance:Es,saveFutureInstances:ks,saveAllInstances:Ds,deleteSingleInstance:As,deleteFutureInstances:Ts,deleteAllInstances:Is}}var Rs=oe('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Cs=oe('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Fs=oe("<!> <!>",1),Ps=oe('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Os=oe("<span>Save</span>"),Us=oe("<span>Create</span>"),Ss=oe('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Ls=oe('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div> <!></div> <!> <!>',1);function Eo(d,e){at(e,!1);const i=()=>fr(f,"$userOrganizations",n),r=()=>fr(g,"$validationErrors",n),[n,a]=Ur(),c=le(),u=le(),y=le();let b=he(e,"name",8,""),o=he(e,"drawerId",8,""),t=he(e,"eventItem",12,Qn);const{actions:{reload:s}}=Lr(),{stores:{userOrganizations:f}}=Wr(),{validationErrors:g,validate:x,getErrorMessages:I,clearErrors:E}=ns(),{parseRecurrenceRule:N}=Zr(),{uploadAttachment:O,removeAttachment:P,updateAttachmentName:L,validateFile:_}=ys(),{saveEvent:M,deleteEventById:m,cloneEventForDate:h,buildEventPayload:w,saveSingleInstance:D,saveFutureInstances:A,saveAllInstances:R,deleteSingleInstance:k,deleteFutureInstances:C,deleteAllInstances:p}=Ms();let v=le(!1),z=le(!1),T=le(!1),F=le("weekly"),j=le(1),q=le([]),Q=le(""),Y=le(!0),S=le("date"),Z=le([]),de=le(!1),ye=le(!1),ue=le(void 0),me=le(void 0),De=le(!1),Te=le(null),Ee=le(!1),G=le(null),re=le(0),$=le({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),J=le({message:"",type:"info"}),ie=le(""),X=le(""),ee=le(""),ae=le({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"}),be=le(!1);const _e=(se,K)=>se.length===K.length&&se.every((ke,Ce)=>ke===K[Ce]),fe=()=>{const se=`[data-bs-target="#${o()}"]`,K=document.querySelector(se);K&&K.click()},ve=(se,K=0,ke="info")=>{lr(J,l(J).message=se),lr(J,l(J).type=ke),K&&setTimeout(()=>{lr(J,l(J).message="")},K)},He=async se=>{const K=se.detail;if(!K)return;const ke=_(K);if(!ke.valid){ve(ke.error??"Invalid file selected",7e3,"danger");return}B(z,!0);try{const Ce=await O(K,l(c)??"temp",Mt=>ve(Mt));if(!Ce.success||!Ce.attachment)throw new Error(Ce.error??"Upload failed");B(Z,[...l(Z),Ce.attachment]),B(de,!0),ve("File uploaded!",3e3,"success")}catch(Ce){console.error("File upload failed:",Ce),ve("Failed to upload file. Please try again.",7e3,"danger")}finally{B(z,!1)}},Ze=se=>{const{attachment:K,newName:ke}=se.detail;B(Z,L(l(Z),K.id,ke)),B(de,!0),ve("Attachment name updated!",3e3,"success")},we=async se=>{const K=se.detail;if(K){B(z,!0);try{if(!await P(K))throw new Error("Failed to remove attachment");B(Z,l(Z).filter(Ce=>Ce.id!==K.id)),B(de,!0),ve("Attachment removed!",3e3,"success")}catch(ke){console.error("Failed to remove attachment:",ke),ve("Failed to remove attachment. Please try again.",7e3,"danger")}finally{B(z,!1)}}},Ge=async()=>{if(!l(c)){ve("ID is not defined",0,"danger");return}try{await m(l(c)),await s(),xt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{B(v,!1),B($,{...t(),id:l(c)}),ve("Event Deleted",3e3,"success"),fe()},800)}catch(se){xt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{B(v,!1),console.error("Delete failed:",se),ve("Failed to delete event. Please try again.",7e3,"danger")},800)}},Ae=()=>!!t().recurrence_rule,Pe=async()=>{const se=l(c)||t().meta_data?.recurring_parent_id;if(se&&l(ye)&&l(me)&&l(ue)){if(B(G,null),B(Ee,!0),await new Promise(K=>{const ke=setInterval(()=>{l(Ee)||(clearInterval(ke),K())},50)}),!l(G))return;B(v,!0);try{l(G)==="single"?await k(se,l(ue)):l(G)==="future"?await C(se,l(ue)):l(G)==="all"&&await p(se),await s(),xt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{B(v,!1),B($,{...t(),id:l(c)}),ve("Event Deleted",3e3,"success"),fe()},800)}catch(K){xt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{B(v,!1),console.error("Delete failed:",K),ve("Failed to delete event. Please try again.",7e3,"danger")},800)}}else B(v,!0),Kn({title:"Delete Confirmation",message:Ae()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:K=>{K?Ge():B(v,!1)}})},Qe=se=>{if(l(c))try{const K=h({event:t(),newDate:se});xt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),ve("Event cloned. Review and click Create to save.",5e3,"success"),t(K),B(ie,K.start_time?Se(new Date(K.start_time),"yyyy-MM-dd"):""),B(X,K.start_time?Se(new Date(K.start_time),"HH:mm"):""),B(ee,K.end_time?Se(new Date(K.end_time),"HH:mm"):""),B(Z,[]),B(T,!1),B(q,[]),B(Q,""),B(Y,!0),B(de,!0),B(re,void 0),B($,{...K}),B(ae,{dateInput:l(ie),startTimeInput:l(X),endTimeInput:l(ee),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(K){console.error("Clone failed:",K),ve("Failed to clone event. Please try again.",7e3,"danger")}},Ye=()=>{ts({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:l(ie),callback:(se,K)=>{se&&K&&Qe(K)}})},Ue=async()=>{if(l(c)&&!l(y)){ve("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await x({title:t().title,event_type:t().event_type,category:t().category??"",description:t().description,location:t().location,is_all_day:t().is_all_day,dateInput:l(ie),startTimeInput:l(X),endTimeInput:l(ee),isRecurring:l(T),recurrenceFrequency:l(F),recurringDays:l(T)?l(q):[],recurrenceEndDate:l(T)?l(Q):void 0,hasEndDate:l(Y)})){const ke=I();ke.length&&ve(ke.join(". ")+".  Please address accordingly.",0,"danger");return}const K=l(c)||t().meta_data?.recurring_parent_id;if(K&&l(ye)&&l(me)&&l(ue)){if(B(Te,null),B(De,!0),await new Promise(Ce=>{const Mt=setInterval(()=>{l(De)||(clearInterval(Mt),Ce())},100)}),!l(Te)||l(v))return;ve("Saving ..."),B(v,!0);const ke=w({eventItem:t(),dateInput:l(ie),startTimeInput:l(X),endTimeInput:l(ee),attachments:l(Z),isRecurring:l(u)&&l(T),recurrenceFrequency:l(F),recurrenceInterval:l(j),recurringDays:l(T)?l(q):[],recurrenceEndDate:l(T)?l(Q):"",hasEndDate:l(Y),monthlyType:l(S)});try{let Ce;l(Te)==="single"?await D(K,l(ue),ke):l(Te)==="future"?Ce=await A(K,l(ue),ke):l(Te)==="all"&&await R(K,ke),await s(),await An(),xt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${t().title}`,1),B(v,!1),Ce&&t({...t(),id:Ce}),t(t().attachments=l(Z),!0),B($,{...t(),id:Ce||K}),B(de,!1),ve("Saved",3e3,"success"),fe()}catch(Ce){xt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${t().title}`,1),setTimeout(()=>{B(v,!1),console.error("Save failed:",Ce),ve("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(l(v))return;ve("Saving ..."),B(v,!0);try{const ke=await M({id:l(c),eventItem:t(),dateInput:l(ie),startTimeInput:l(X),endTimeInput:l(ee),attachments:l(Z),isRecurring:l(u)&&l(T),recurrenceFrequency:l(F),recurrenceInterval:l(j),recurringDays:l(T)?l(q):[],recurrenceEndDate:l(T)?l(Q):"",hasEndDate:l(Y),monthlyType:l(S)});ke.event&&t({...t(),...ke.event}),t(t().attachments=l(Z),!0),await s(),xt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${t().title}`,1),setTimeout(()=>{B(v,!1),B($,{...t(),id:l(c)}),B(de,!1),ve("Saved",3e3,"success"),fe()},800)}catch(ke){xt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${t().title}`,1),setTimeout(()=>{B(v,!1),console.error("Save failed:",ke),ve("Failed to save event. Please try again.",7e3,"danger")},800)}}};Me(()=>V(t()),()=>{B(c,t().id)}),Me(()=>V(t()),()=>{B(u,t().event_type==="calendar_event")}),Me(()=>(l(u),l(T),l(q),l(Q)),()=>{!l(u)&&(l(T)||l(q).length>0||l(Q))&&(B(T,!1),B(F,"weekly"),B(j,1),B(q,[]),B(Q,""),B(Y,!0),B(S,"date"))}),Me(()=>(V(t()),l(re),l($),l(de),l(ie),l(X),l(ee),l(T),l(F),l(j),l(q),l(Q),l(Y),l(S)),()=>{if(t()?.id!==l(re)||t()?.start_time!==l($).start_time||t()?.meta_data?.recurring_instance_index!==l($).meta_data?.recurring_instance_index){B(v,!0);const se=l(de),K=t();setTimeout(()=>{const ke=K.event_type==="calendar_event";if(B(ie,ke&&K.start_time?Se(new Date(K.start_time),"yyyy-MM-dd"):""),B(X,ke&&K.start_time?Se(new Date(K.start_time),"HH:mm"):""),B(ee,ke&&K.end_time?Se(new Date(K.end_time),"HH:mm"):""),se||B(Z,K.attachments?[...K.attachments]:[]),K.meta_data?.recurring_instance&&K.start_time?(B(me,K.recurrence_rule),B(ye,!0),B(ue,Se(new Date(K.start_time),"yyyy-MM-dd"))):(B(me,void 0),B(ye,!1),B(ue,void 0)),K.recurrence_rule){const Ce=N(K.recurrence_rule,K.recurrence_end_date);Ce?(B(T,!0),B(F,Ce.frequency),B(j,Ce.interval),B(q,Ce.recurringDays),B(Q,Ce.recurrenceEndDate),B(Y,Ce.hasEndDate),B(S,Ce.monthlyType)):(B(T,!1),B(F,"weekly"),B(j,1),B(q,[]),B(Q,""),B(Y,!0),B(S,"date"))}else B(T,!1),B(F,"weekly"),B(j,1),B(q,[]),B(Q,""),B(Y,!0),B(S,"date");B(re,K.id),B($,{...K}),B(v,!1),B(de,!1),E(),B(ae,{dateInput:l(ie),startTimeInput:l(X),endTimeInput:l(ee),isRecurring:l(T),recurrenceFrequency:l(F),recurrenceInterval:l(j),recurringDays:[...l(q)],recurrenceEndDate:l(Q),hasEndDate:l(Y),monthlyType:l(S)})},200)}}),Me(()=>(l($),V(t()),l(Z),l(ie),l(ae),l(X),l(ee),l(T),l(F),l(j),l(q),l(Q),l(Y),l(S)),()=>{B(y,l($).title!==t().title||l($).start_time!==t().start_time||l($).end_time!==t().end_time||l($).description!==t().description||l($).location!==t().location||l($).is_public!==t().is_public||l($).category!==t().category||l($).is_all_day!==t().is_all_day||JSON.stringify(l(Z))!==JSON.stringify(t().attachments||[])||l($).recurrence_rule!==t().recurrence_rule||l($).recurrence_end_date!==t().recurrence_end_date||l(ie)!==l(ae).dateInput||l(X)!==l(ae).startTimeInput||l(ee)!==l(ae).endTimeInput||l(T)!==l(ae).isRecurring||l(F)!==l(ae).recurrenceFrequency||l(j)!==l(ae).recurrenceInterval||!_e(l(q),l(ae).recurringDays)||l(Q)!==l(ae).recurrenceEndDate||l(Y)!==l(ae).hasEndDate||l(S)!==l(ae).monthlyType)}),Me(()=>(i(),We),()=>{B(be,i().has(We.Bishopric))}),Ot(),lt();var Oe=Ls(),$e=je(Oe),ct=H($e);{var dt=se=>{var K=Rs();ne(se,K)};ce(ct,se=>{V(t()),l(c),te(()=>t().recurrence_rule&&l(c))&&se(dt)})}var ut=W(ct,2),_t=H(ut),nr=W(H(_t),2);{var ft=se=>{var K=Cs();pe(()=>K.disabled=l(v)||l(z)),xe("click",K,Ye),ne(se,K)};ce(nr,se=>{l(c)&&se(ft)})}U(_t);var vt=W(_t,2);{let se=Rt(()=>l(v)||l(z));ki(vt,{get disabled(){return l(se)},get name(){return b()},get validationErrors(){return r()},get title(){return t().title},set title(K){t(t().title=K,!0)},get eventType(){return t().event_type},set eventType(K){t(t().event_type=K,!0)},get category(){return t().category},set category(K){t(t().category=K,!0)},get isPublic(){return t().is_public},set isPublic(K){t(t().is_public=K,!0)},get description(){return t().description},set description(K){t(t().description=K,!0)},$$legacy:!0})}U(ut);var wt=W(ut,2);{var It=se=>{var K=Fs(),ke=je(K);{let Mt=Rt(()=>l(v)||l(z));Ri(ke,{get disabled(){return l(Mt)},get name(){return b()},get validationErrors(){return r()},get dateInput(){return l(ie)},set dateInput(Be){B(ie,Be)},get startTimeInput(){return l(X)},set startTimeInput(Be){B(X,Be)},get endTimeInput(){return l(ee)},set endTimeInput(Be){B(ee,Be)},get isAllDay(){return t().is_all_day},set isAllDay(Be){t(t().is_all_day=Be,!0)},$$legacy:!0})}var Ce=W(ke,2);{let Mt=Rt(()=>l(v)||l(z));zi(Ce,{get disabled(){return l(Mt)},get name(){return b()},get validationErrors(){return r()},get isRecurring(){return l(T)},set isRecurring(Be){B(T,Be)},get recurrenceFrequency(){return l(F)},set recurrenceFrequency(Be){B(F,Be)},get recurrenceInterval(){return l(j)},set recurrenceInterval(Be){B(j,Be)},get recurringDays(){return l(q)},set recurringDays(Be){B(q,Be)},get recurrenceEndDate(){return l(Q)},set recurrenceEndDate(Be){B(Q,Be)},get monthlyType(){return l(S)},set monthlyType(Be){B(S,Be)},get dateInput(){return l(ie)},set dateInput(Be){B(ie,Be)},$$legacy:!0})}ne(se,K)};ce(wt,se=>{l(u)&&se(It)})}var Ht=W(wt,2);{let se=Rt(()=>l(v)||l(z));Gi(Ht,{get attachments(){return l(Z)},get uploadingFile(){return l(z)},get disabled(){return l(se)},$$events:{upload:He,edit:Ze,remove:we}})}var mt=W(Ht,2);{let se=Rt(()=>l(v)||l(z)),K=Rt(()=>`${b()}-location`);Bi(mt,{get disabled(){return l(se)},get name(){return l(K)},get value(){return t().location},set value(ke){t(t().location=ke,!0)},$$legacy:!0})}var st=W(mt,2),ar=H(st),fn=H(ar);{var vn=se=>{var K=Ps();pe(()=>K.disabled=l(v)||l(z)),xe("click",K,Pe),ne(se,K)};ce(fn,se=>{(l(c)||l(ye))&&se(vn)})}U(ar);var kr=W(ar,2),ir=H(kr),Wt=W(ir,2),Dr=H(Wt);{var mn=se=>{var K=Os();ne(se,K)},hn=se=>{var K=Us();ne(se,K)};ce(Dr,se=>{l(c)||l(ye)?se(mn):se(hn,!1)})}var pn=W(Dr,2);{var yn=se=>{var K=Ss();ne(se,K)};ce(pn,se=>{l(y)&&se(yn)})}U(Wt),U(kr),U(st);var sr=W(st,2),Qt=H(sr),gn=H(Qt,!0);U(Qt);var or=W(Qt,2);let Ar;var bn=H(or);Qr(bn,{size:"xs"}),U(or),U(sr);var _n=W(sr,2);{var wn=se=>{{let K=Rt(()=>l(v)||l(z));On(se,{get disabled(){return l(K)},get reloadEvents(){return s},get eventItem(){return t()},set eventItem(ke){t(ke)},$$legacy:!0})}};ce(_n,se=>{l(be)&&se(wn)})}U($e);var Tr=W($e,2);{var xn=se=>{Vi(se,{get eventTitle(){return V(t()),te(()=>t().title)},get occurrenceDate(){return l(ue)},callback:K=>{B(Te,K),B(De,!1)}})};ce(Tr,se=>{l(De)&&l(ue)&&se(xn)})}var En=W(Tr,2);{var kn=se=>{Zi(se,{get eventTitle(){return V(t()),te(()=>t().title)},get occurrenceDate(){return l(ue)},callback:K=>{B(G,K),B(Ee,!1)}})};ce(En,se=>{l(Ee)&&l(ue)&&se(kn)})}pe(()=>{ir.disabled=l(v)||l(z),Wt.disabled=l(v)||l(z),rt(Qt,1,`fw-lighter fst-italic text-${l(J),te(()=>l(J).type)??""}`),ge(gn,(l(J),te(()=>l(J).message))),Ar=rt(or,1,"",null,Ar,{"d-none":!l(v)})}),xe("click",ir,fe),xe("click",Wt,Ue),ne(d,Oe),it(),a()}const Or={RES:[We.ReliefSociety],ELQ:[We.EldersQuorum],YOU:[We.YoungWomen,We.YoungMen],YOW:[We.YoungWomen],YWP:[We.YoungWomen],YWR:[We.YoungWomen],YWD:[We.YoungWomen],YOM:[We.YoungMen],YMD:[We.YoungMen],YMT:[We.YoungMen],YMP:[We.YoungMen],PRI:[We.Primary],PRN:[We.Primary],PRS:[We.Primary],PRC:[We.Primary],PRV:[We.Primary],SUS:[We.SundaySchool]},zs=d=>{const e=new Set,i=d.meta_data?.submitted_by_organizations;if(i?.length)return i.forEach(n=>e.add(n)),e;const r=d.meta_data?.category;return r&&Or[r]&&Or[r].forEach(n=>e.add(n)),e},ko=(d,e)=>{if(!d)return!1;const{currentUserId:i,isPrivileged:r,canEditOwnOrgEvents:n,userOrganizations:a}=e;if(r)return!0;const c=d.meta_data?.submitted_by_user_id;if(i&&typeof c=="number"&&c===i)return!0;if(!n)return!1;const u=zs(d);if(!u.size)return!1;for(const y of u)if(a.has(y))return!0;return!1};var Hs=oe('<span class="text-muted">•</span>'),Bs=oe("<span> </span> <!>",1),qs=oe('<span class="text-muted">•</span>'),Ns=oe('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Ys=oe('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Ws=oe('<div class="small text-muted posted-meta svelte-1bpzga2">Posted <!> <!></div>'),Qs=oe('<div class="small text-muted posted-meta svelte-1bpzga2">Last edited <!> <!></div>'),$s=oe('<div class="small svelte-1bpzga2"><!> <!> <!></div>'),js=oe('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),Gs=oe('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Ks=oe('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Vs=oe('<div class="details-container svelte-1bpzga2"><!> <!></div>'),Xs=oe('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),Zs=oe('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Do(d,e){at(e,!1);const i=le(),r=le(),n=le(),a=le(),c=le(),u=le(),y=le(),b=le(),o=le();let t=he(e,"item",8),s=he(e,"showDetails",12,!1),f=he(e,"searchQuery",8,"");const g=F=>F<1024?F+" B":F<1024*1024?(F/1024).toFixed(1)+" KB":(F/(1024*1024)).toFixed(1)+" MB",x=F=>F.startsWith("image/"),I=F=>{window.open(F,"_blank")},E=F=>{if(!F)return"";try{return Se(Bt(F),"MMM d, yyyy 'at' h:mm a")}catch{return""}},N=()=>{l(r)&&s(!s())},O=F=>{l(r)&&(F.key==="Enter"||F.key===" ")&&N()};Me(()=>V(t()),()=>{B(i,t().attachments&&t().attachments.length>0?t().attachments.find(F=>x(F.type)):void 0)}),Me(()=>V(t()),()=>{B(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Me(()=>V(t()),()=>{B(n,t().meta_data?.submitted_at??t().created_at)}),Me(()=>l(n),()=>{B(a,E(l(n)))}),Me(()=>V(t()),()=>{B(c,t().meta_data?.submitted_by_name)}),Me(()=>(l(a),l(c)),()=>{B(u,!!(l(a)||l(c)))}),Me(()=>V(t()),()=>{B(y,E(t().meta_data?.edited_at))}),Me(()=>V(t()),()=>{B(b,t().meta_data?.edited_by_name)}),Me(()=>(l(y),l(b)),()=>{B(o,!!(l(y)||l(b)))}),Ot(),lt();var P=Zs(),L=H(P),_=H(L),M=H(_),m=H(M);St(m,()=>(V(kt),V(t()),V(f()),te(()=>kt(t().title||"",f())))),U(M);var h=W(M,2),w=H(h);{var D=F=>{var j=Bs(),q=je(j),Q=H(q,!0);U(q);var Y=W(q,2);{var S=Z=>{var de=Hs();ne(Z,de)};ce(Y,Z=>{V(t()),te(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&Z(S)})}pe((Z,de)=>{rt(q,1,`badge rounded-pill bg-color-${Z??""}`,"svelte-1bpzga2"),ge(Q,de)},[()=>(V(Dt),V(t()),te(()=>Dt(t()?.meta_data?.category)?.color_number)),()=>(V(Dt),V(t()),te(()=>Dt(t()?.meta_data?.category)?.label))]),ne(F,j)};ce(w,F=>{V(t()),te(()=>t()?.meta_data?.category)&&F(D)})}var A=W(w,2);{var R=F=>{var j=Ns(),q=je(j),Q=H(q);St(Q,()=>(V(kt),V(t()),V(f()),te(()=>kt(t().location,f())))),U(q);var Y=W(q,2);{var S=Z=>{var de=qs();ne(Z,de)};ce(Y,Z=>{V(t()),te(()=>t().description||t().attachments&&t().attachments.length>0)&&Z(S)})}ne(F,j)};ce(A,F=>{V(t()),te(()=>t().location)&&F(R)})}var k=W(A,2);{var C=F=>{var j=Ys(),q=H(j);{var Q=S=>{var Z=Je("Hide");ne(S,Z)},Y=S=>{var Z=Je("Show");ne(S,Z)};ce(q,S=>{s()?S(Q):S(Y,!1)})}nt(),U(j),ne(F,j)};ce(k,F=>{V(t()),te(()=>t().description||t().attachments&&t().attachments.length>0)&&F(C)})}U(h);var p=W(h,2);{var v=F=>{var j=Vs(),q=H(j);{var Q=Z=>{var de=$s(),ye=H(de);St(ye,()=>(V(Gt),V(t()),V(f()),te(()=>Gt(t().description,f()))));var ue=W(ye,2);{var me=Ee=>{var G=Ws(),re=W(H(G));{var $=X=>{var ee=Je();pe(()=>ge(ee,l(a))),ne(X,ee)};ce(re,X=>{l(a)&&X($)})}var J=W(re,2);{var ie=X=>{var ee=qt(),ae=je(ee);{var be=fe=>{var ve=Je();pe(()=>ge(ve,`by ${l(c)??""}`)),ne(fe,ve)},_e=fe=>{var ve=Je();pe(()=>ge(ve,`by ${l(c)??""}`)),ne(fe,ve)};ce(ae,fe=>{l(a)?fe(be):fe(_e,!1)})}ne(X,ee)};ce(J,X=>{l(c)&&X(ie)})}U(G),ne(Ee,G)};ce(ue,Ee=>{l(u)&&Ee(me)})}var De=W(ue,2);{var Te=Ee=>{var G=Qs(),re=W(H(G));{var $=X=>{var ee=Je();pe(()=>ge(ee,l(y))),ne(X,ee)};ce(re,X=>{l(y)&&X($)})}var J=W(re,2);{var ie=X=>{var ee=Je();pe(()=>ge(ee,`by ${l(b)??""}`)),ne(X,ee)};ce(J,X=>{l(b)&&X(ie)})}U(G),ne(Ee,G)};ce(De,Ee=>{l(o)&&Ee(Te)})}U(de),ne(Z,de)};ce(q,Z=>{V(t()),te(()=>t().description)&&Z(Q)})}var Y=W(q,2);{var S=Z=>{var de=Ks(),ye=W(H(de),2);Nt(ye,5,()=>(V(t()),te(()=>t().attachments)),ue=>ue.id,(ue,me)=>{var De=qt(),Te=je(De);{var Ee=re=>{var $=js(),J=H($),ie=H(J);U(J);var X=W(J,2),ee=H(X),ae=H(ee,!0);U(ee),U(X),U($),pe(()=>{Ie(J,"title",`Open ${l(me),te(()=>l(me).name)??""}`),Ie(ie,"src",(l(me),te(()=>l(me).url))),Ie(ie,"alt",(l(me),te(()=>l(me).name))),ge(ae,(l(me),te(()=>l(me).name)))}),xe("click",J,Kt(()=>I(l(me).url))),ne(re,$)},G=re=>{var $=Gs(),J=W(H($),2),ie=H(J,!0);U(J);var X=W(J,2),ee=H(X);U(X),U($),pe(ae=>{Ie($,"title",`Open ${l(me),te(()=>l(me).name)??""}`),ge(ie,(l(me),te(()=>l(me).name))),ge(ee,`(${ae??""})`)},[()=>(l(me),te(()=>g(l(me).size)))]),xe("click",$,Kt(()=>I(l(me).url))),ne(re,$)};ce(Te,re=>{l(me),te(()=>x(l(me).type))?re(Ee):re(G,!1)})}ne(ue,De)}),U(ye),U(de),ne(Z,de)};ce(Y,Z=>{V(t()),te(()=>t().attachments&&t().attachments.length>0)&&Z(S)})}U(j),ne(F,j)};ce(p,F=>{s()&&F(v)})}U(_);var z=W(_,2);{var T=F=>{var j=Xs(),q=H(j);U(j),pe(()=>{Ie(q,"src",(l(i),te(()=>l(i).url))),Ie(q,"alt",(l(i),te(()=>l(i).name)))}),ne(F,j)};ce(z,F=>{l(i)&&F(T)})}U(L),U(P),pe(()=>Br(P,l(r)?"cursor: pointer;":"")),xe("keydown",P,O),xe("click",P,N),ne(d,P),it()}export{Eo as A,wo as E,xo as a,Do as b,ko as c,Xt as p};
