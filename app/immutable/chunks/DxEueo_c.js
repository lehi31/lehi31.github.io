import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as be,t as L,a as he,s,c as t,r as e,aj as oe,D as j,g as a,E as F,ak as Ge,u as k,i as Pt,ao as ke,f as $e,w,am as pt,an as ft,R as ht}from"./JKZwkikK.js";import{s as v,p as X,i as W,e as De,o as xt,a as it,c as wt,b as Ce}from"./CvNikv6W.js";import{f as E,a as M,t as Re,c as ot}from"./JDsN5plM.js";import{s as re,r as At,b as Rt,d as Dt}from"./CClCjED1.js";import{i as xe}from"./b8c_lO2i.js";import{W as Y,S as ce,e as lt,t as ae,x as Wt,y as Gt,z as Ft,l as Tt,A as $t,B as at,f as ie,b as Be}from"./DR5el1AL.js";import{w as rt,g as Lt,d as Ne,o as kt,a as Yt}from"./DjNGvcU6.js";import{e as We,i as Ue}from"./B2BlSr7K.js";import{b as qt}from"./Bk8fdyPk.js";import{v as Ut,D as Xt}from"./CpU0bqHj.js";import{b as zt}from"./BL6gm64P.js";import{g as Ht}from"./BfiuFwAr.js";import{p as pe}from"./Ce58fFvv.js";import{S as Vt}from"./C6z3IOqV.js";var Jt=E('<div class="card"><div class="card-header">Ward Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Chapel Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small">Hours</li> <li class="list-group-item"><span class="d-block fw-lighter"><strong>Sacrament</strong> </span> <span class="d-block fw-lighter"><strong>2nd Hour</strong> </span></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function fn(l,o){be(o,!1),xe();var n=Jt(),c=s(t(n),2),u=s(t(c),2),y=t(u),f=t(y),_=s(f,2),x=s(_,2);e(y),e(u);var b=s(u,4),g=t(b),$=s(t(g));e(g);var i=s(g,2),D=s(t(i));e(i),e(b);var r=s(b,2),d=t(r);e(r);var h=s(r,2),S=t(h),m=s(S),p=t(m,!0);e(m),e(h);var I=s(h,2),z=t(I);e(I);var K=s(I,2),ne=t(K),ee=s(ne),B=t(ee,!0);e(ee),e(K),e(c),e(n),L((q,N)=>{re(y,"href",Y.chapel.mapLink),v(f,`${Y.chapel.address.street??""}, ${Y.chapel.address.city??""}`),v(_,` ${Y.chapel.address.state??""}
				${Y.chapel.address.zip??""}`),v(x,` ${Y.chapel.address.country??""}`),v($,`:
				${Y.meetingTimes.sacrament.start??""} to
				${Y.meetingTimes.sacrament.end??""}`),v(D,`:
				${Y.meetingTimes.secondHour.start??""} to
				${Y.meetingTimes.secondHour.end??""}`),v(d,`${Y.contacts.executiveSecretary.purpose??""}:`),v(S,`${Y.contacts.executiveSecretary.name??""} | `),re(m,"href",`sms:${q??""}`),v(p,Y.contacts.executiveSecretary.phone),v(z,`${Y.contacts.bishop.purpose??""}:`),v(ne,`${Y.contacts.bishop.name??""} | `),re(ee,"href",`sms:${N??""}`),v(B,Y.contacts.bishop.phone)},[()=>Y.contacts.executiveSecretary.phone.replace(/-/g,""),()=>Y.contacts.bishop.phone.replace(/-/g,"")]),M(l,n),he()}var Kt=E('<div class="card"><div class="card-header">Stake Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function gn(l,o){be(o,!1),xe();var n=Kt(),c=s(t(n),2),u=s(t(c),2),y=t(u),f=t(y),_=s(f,2),x=s(_,2);e(y),e(u);var b=s(u,2),g=t(b);e(b);var $=s(b,2),i=t($),D=s(i),r=t(D,!0);e(D),e($);var d=s($,2),h=t(d);e(d);var S=s(d,2),m=t(S),p=s(m),I=t(p,!0);e(p),e(S),e(c),e(n),L((z,K)=>{re(y,"href",ce.building.mapLink),v(f,`${ce.building.address.street},`),v(_,` ${ce.building.address.city}, ${ce.building.address.state}
				${ce.building.address.zip}`),v(x,` ${ce.building.address.country}`),v(g,`${ce.contacts.templeRecommend.purpose}:`),v(i,`${ce.contacts.templeRecommend.name} | `),re(D,"href",`sms:${z??""}`),v(r,ce.contacts.templeRecommend.phone),v(h,`${ce.contacts.president.purpose}:`),v(m,`${ce.contacts.president.name} | `),re(p,"href",`sms:${K??""}`),v(I,ce.contacts.president.phone)},[()=>ce.contacts.templeRecommend.phone.replace(/-/g,""),()=>ce.contacts.president.phone.replace(/-/g,"")]),M(l,n),he()}var Qt=E('<div class="card"><div class="card-header"> </div> <div class="card-body"><figure class="text-center"><blockquote class="blockquote"><p> </p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title"> </cite></figcaption></figure></div></div>');function yn(l,o){be(o,!1),xe();var n=Qt(),c=t(n),u=t(c);e(c);var y=s(c,2),f=t(y),_=t(f),x=t(_),b=t(x,!0);e(x),e(_);var g=s(_,2),$=t(g),i=t($,!0);e($),e(g),e(f),e(y),e(n),L(()=>{v(u,`Ward Theme ${Y.theme.year??""}`),v(b,Y.theme.scripture.text),v(i,Y.theme.scripture.reference)}),M(l,n),he()}var Zt=E('<small class="fw-lighter text-muted"> </small>'),ea=E('<div class="d-flex flex-row gap-3 justify-content-between align-items-end"><div><span> </span> <!></div> <div class="d-flex flex-row gap-3 align-items-center"><button class="btn btn-sm btn-primary" aria-label="Decrement count"><i class="bi bi-dash"></i></button> <div class="count-container d-flex justify-content-end svelte-2jbj3e"> </div> <button class="btn btn-sm btn-primary" aria-label="Increment count"><i class="bi bi-plus"></i></button></div></div>');function Ae(l,o){let n=X(o,"count",12,0),c=X(o,"label",8,"Count"),u=X(o,"description",8,"");const y=()=>{xt(n)},f=()=>{n()<=0||xt(n,-1)};var _=ea(),x=t(_),b=t(x),g=t(b,!0);e(b);var $=s(b,2);{var i=m=>{var p=Zt(),I=t(p,!0);e(p),L(()=>v(I,u())),M(m,p)};W($,m=>{u()&&m(i)})}e(x);var D=s(x,2),r=t(D),d=s(r,2),h=t(d,!0);e(d);var S=s(d,2);e(D),e(_),L(()=>{v(g,c()),v(h,n())}),De("click",r,f),De("click",S,y),M(l,_)}const Mt=rt([]);let nt=!1;async function ct(){if(nt)return Lt(Mt);nt=!0;try{const{data:l,error:o}=await lt.from("temple_challenge_entries").select("*");if(o)throw console.error("[API] Get temple entries failed:",o),new Error(`Failed to load entries: ${o.message}`);const n=l||[];return Mt.set(n),setTimeout(()=>nt=!1,800),n}catch(l){throw nt=!1,console.error("[API] Unexpected error fetching temple entries:",l),l}}async function ta(l){try{const{data:o,error:n}=await lt.from("temple_challenge_entries").insert([l]).select();if(n)throw console.error("[API] Create temple entry failed:",n),n.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):n.code==="42501"?new Error("Permission denied - please check your authentication"):n.code==="23505"?new Error("This entry already exists"):n.message.includes("fetch")||n.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${n.message}`);return await ct(),console.log("[API] Temple entry created successfully"),o?o[0]:void 0}catch(o){throw console.error("[API] Unexpected error creating temple entry:",o),o}}async function aa(l,o){const{data:n,error:c}=await lt.from("temple_challenge_entries").update(o).eq("id",l).select();if(c)throw c;return await ct(),n?n[0]:void 0}async function na(l){const{error:o}=await lt.from("temple_challenge_entries").delete().eq("id",l);if(o)throw o;await ct()}function ra(l,o,n){return l.filter(c=>c.date>=o&&c.date<=n)}function sa(l){return l.reduce((o,n)=>o+(n.baptism_ordinances_count??0)+(n.confirmation_ordinances_count??0)+(n.initiatory_ordinances_count??0)+(n.endowment_ordinances_count??0)+(n.sealing_ordinances_count??0),0)}function oa(l){return l.reduce((o,n)=>o+(n.prepared_names_count??0),0)}let Xe=null;const ia=()=>{const l=rt(!1),o=rt(!1),n=rt([]),c=Ne([n],([r])=>{const d=r.reduce((S,m)=>{const p=new Date(m.date),I=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}`;return(S[I]||=[]).push(m),S},{}),h=Object.entries(d).sort(([S],[m])=>new Date(m).getTime()-new Date(S).getTime()).map(([S,m])=>[S,m.sort((p,I)=>new Date(I.created_at??"").getTime()-new Date(p.created_at??"").getTime())]);return Object.fromEntries(h)}),u=Ne([n],([r])=>{const d=r.reduce((S,m)=>((S[m.date]||=[]).push(m),S),{}),h=Object.entries(d).sort(([S],[m])=>new Date(m).getTime()-new Date(S).getTime()).map(([S,m])=>[S,m.sort((p,I)=>new Date(I.created_at??"").getTime()-new Date(p.created_at??"").getTime())]);return Object.fromEntries(h)}),y=Ne(n,r=>r.reduce((d,h)=>({baptism_ordinances_count:d.baptism_ordinances_count+(h.baptism_ordinances_count??0),confirmation_ordinances_count:d.confirmation_ordinances_count+(h.confirmation_ordinances_count??0),initiatory_ordinances_count:d.initiatory_ordinances_count+(h.initiatory_ordinances_count??0),endowment_ordinances_count:d.endowment_ordinances_count+(h.endowment_ordinances_count??0),sealing_ordinances_count:d.sealing_ordinances_count+(h.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),f=Ne(u,r=>{const d={};for(const[h,S]of Object.entries(r))d[h]=S.reduce((m,p)=>({...m,entry_type:m.entry_type,prepared_names_count:(m.prepared_names_count??0)+(p.prepared_names_count??0),baptism_ordinances_count:(m.baptism_ordinances_count??0)+(p.baptism_ordinances_count??0),confirmation_ordinances_count:(m.confirmation_ordinances_count??0)+(p.confirmation_ordinances_count??0),initiatory_ordinances_count:(m.initiatory_ordinances_count??0)+(p.initiatory_ordinances_count??0),endowment_ordinances_count:(m.endowment_ordinances_count??0)+(p.endowment_ordinances_count??0),sealing_ordinances_count:(m.sealing_ordinances_count??0)+(p.sealing_ordinances_count??0),date:h,created_at:m.created_at||p.created_at}),{});return d}),_=Ne(c,r=>{const d={};for(const[h,S]of Object.entries(r))d[h]=S.reduce((m,p)=>({...m,entry_type:m.entry_type,prepared_names_count:(m.prepared_names_count??0)+(p.prepared_names_count??0),baptism_ordinances_count:(m.baptism_ordinances_count??0)+(p.baptism_ordinances_count??0),confirmation_ordinances_count:(m.confirmation_ordinances_count??0)+(p.confirmation_ordinances_count??0),initiatory_ordinances_count:(m.initiatory_ordinances_count??0)+(p.initiatory_ordinances_count??0),endowment_ordinances_count:(m.endowment_ordinances_count??0)+(p.endowment_ordinances_count??0),sealing_ordinances_count:(m.sealing_ordinances_count??0)+(p.sealing_ordinances_count??0),date:m.date||p.date,created_at:m.created_at||p.created_at}),{});return d}),x=Ne(n,r=>r.reduce((d,h)=>d+(h.baptism_ordinances_count??0)+(h.confirmation_ordinances_count??0)+(h.initiatory_ordinances_count??0)+(h.endowment_ordinances_count??0)+(h.sealing_ordinances_count??0),0)),b=Ne(n,r=>r.reduce((d,h)=>d+(h.prepared_names_count??0),0));return Xe={stores:{ready:l,loading:o,data:n,groupedByDate:u,groupedByMonth:c,detailTotals:y,detailTotalsByDay:f,detailTotalsByMonth:_,totalOrdinancesPerformed:x,totalNamesPrepared:b},actions:{reload:async()=>{const r=await ct();r?.length&&n.set(r)},apiCreate:async r=>{await ta(r)},apiUpdate:async(r,d)=>{await aa(r,d)},apiDelete:async r=>{await na(r)}}},Xe},dt=()=>Xe?.stores&&Object.keys(Xe.stores).length>0?Xe:ia();function bn(l){return ae(l).getDay()===0}function st(l,o){const n=ae(l),c=ae(o),u=n.getTime()-c.getTime();return u<0?-1:u>0?1:u}function la(l){return Wt(l,Date.now())}function ca(l,o){const n=ae(l),c=ae(o),u=n.getFullYear()-c.getFullYear(),y=n.getMonth()-c.getMonth();return u*12+y}function da(l){return o=>{const c=(l?Math[l]:Math.trunc)(o);return c===0?0:c}}function ua(l,o){return+ae(l)-+ae(o)}function _a(l){const o=ae(l);return o.setHours(23,59,59,999),o}function ma(l){const o=ae(l),n=o.getMonth();return o.setFullYear(o.getFullYear(),n+1,0),o.setHours(23,59,59,999),o}function va(l){const o=ae(l);return+_a(o)==+ma(o)}function pa(l,o){const n=ae(l),c=ae(o),u=st(n,c),y=Math.abs(ca(n,c));let f;if(y<1)f=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-u*y);let _=st(n,c)===-u;va(ae(l))&&y===1&&st(l,c)===1&&(_=!1),f=u*(y-Number(_))}return f===0?0:f}function fa(l,o,n){const c=ua(l,o)/1e3;return da(n?.roundingMethod)(c)}function ga(l,o,n){const c=Gt(),u=n?.locale??c.locale??Ft,y=2520,f=st(l,o);if(isNaN(f))throw new RangeError("Invalid time value");const _=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:f});let x,b;f>0?(x=ae(o),b=ae(l)):(x=ae(l),b=ae(o));const g=fa(b,x),$=(Tt(b)-Tt(x))/1e3,i=Math.round((g-$)/60);let D;if(i<2)return n?.includeSeconds?g<5?u.formatDistance("lessThanXSeconds",5,_):g<10?u.formatDistance("lessThanXSeconds",10,_):g<20?u.formatDistance("lessThanXSeconds",20,_):g<40?u.formatDistance("halfAMinute",0,_):g<60?u.formatDistance("lessThanXMinutes",1,_):u.formatDistance("xMinutes",1,_):i===0?u.formatDistance("lessThanXMinutes",1,_):u.formatDistance("xMinutes",i,_);if(i<45)return u.formatDistance("xMinutes",i,_);if(i<90)return u.formatDistance("aboutXHours",1,_);if(i<$t){const r=Math.round(i/60);return u.formatDistance("aboutXHours",r,_)}else{if(i<y)return u.formatDistance("xDays",1,_);if(i<at){const r=Math.round(i/$t);return u.formatDistance("xDays",r,_)}else if(i<at*2)return D=Math.round(i/at),u.formatDistance("aboutXMonths",D,_)}if(D=pa(b,x),D<12){const r=Math.round(i/at);return u.formatDistance("xMonths",r,_)}else{const r=D%12,d=Math.trunc(D/12);return r<3?u.formatDistance("aboutXYears",d,_):r<9?u.formatDistance("overXYears",d,_):u.formatDistance("almostXYears",d+1,_)}}function St(l,o){return ga(l,la(l),o)}var ya=E('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),ba=E('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),ha=E("<option> </option>"),xa=E('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" class="form-control" id="endDate" required/></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select class="form-select form-control-sm"></select></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder" style="margin-right: 47px"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function wa(l,o){be(o,!1);const[n,c]=it(),u=F();let y=X(o,"drawerId",8,""),f=X(o,"minDate",8,null),_=X(o,"maxDate",8,null);const{stores:{loading:x},actions:{apiCreate:b,reload:g}}=dt(),$=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function i(){const T=ie(new Date,"yyyy-MM-dd");return!f()||!_()||T>=f()&&T<=_()?T:T<f()?f():_()}const D={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:i(),approved:!0};let r=F({...D}),d=F({message:"",type:null});const h=()=>{j(r,{...D,date:i()}),j(d,{message:"",type:null});const T=`[data-bs-target="#${y()}"]`,J=document.querySelector(T);J&&J.click()},S=()=>{window.location.reload()},m=()=>{I()},p=()=>{j(d,{message:"",type:null})},I=async()=>{try{wt(x,!0),j(d,{message:"",type:null}),await b({prepared_names_count:a(r).prepared_names_count,baptism_ordinances_count:a(r).baptism_ordinances_count,confirmation_ordinances_count:a(r).confirmation_ordinances_count,initiatory_ordinances_count:a(r).initiatory_ordinances_count,endowment_ordinances_count:a(r).endowment_ordinances_count,sealing_ordinances_count:a(r).sealing_ordinances_count,entry_type:a(r).entry_type,date:a(r).date,created_at:new Date().toISOString(),approved:!0}),await g(),h()}catch(T){console.error("[WardGoalEntryForm] Submission failed:",T),T instanceof Error?T.message.includes("expired")||T.message.includes("JWT")?j(d,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):T.message.includes("fetch")||T.message.includes("network")?j(d,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):j(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):j(d,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{wt(x,!1)}};oe(()=>a(r),()=>{j(u,a(r).prepared_names_count+a(r).baptism_ordinances_count+a(r).confirmation_ordinances_count+a(r).initiatory_ordinances_count+a(r).endowment_ordinances_count+a(r).sealing_ordinances_count)}),Ge(),xe();var z=xa(),K=t(z);{var ne=T=>{var J=ba(),ge=t(J),Me=s(t(ge),2),ye=t(Me),ze=t(ye);{var He=ue=>{var we=Re("⚠️ Session Issue");M(ue,we)},ut=ue=>{var we=ot(),Pe=$e(we);{var et=Se=>{var Oe=Re("⚠️ Connection Problem");M(Se,Oe)},tt=Se=>{var Oe=Re("⚠️ Something Went Wrong");M(Se,Oe)};W(Pe,Se=>{a(d),k(()=>a(d).type==="network")?Se(et):Se(tt,!1)},!0)}M(ue,we)};W(ze,ue=>{a(d),k(()=>a(d).type==="expired")?ue(He):ue(ut,!1)})}e(ye);var Ee=s(ye,2),Ve=t(Ee,!0);e(Ee);var Je=s(Ee,2),Ke=t(Je);{var Qe=ue=>{var we=ya();De("click",we,m),M(ue,we)};W(Ke,ue=>{a(d),k(()=>a(d).type==="network")&&ue(Qe)})}var Ze=s(Ke,2);e(Je),e(Me);var Le=s(Me,2);e(ge),e(J),L(()=>{v(Ve,(a(d),k(()=>a(d).message))),Be(Ze,1,`btn btn-${a(d),k(()=>a(d).type==="network"?"secondary":"primary")??""}`)}),De("click",Ze,S),De("click",Le,p),M(T,J)};W(K,T=>{a(d),k(()=>a(d).type)&&T(ne)})}var ee=s(K,4),B=s(t(ee),2),q=t(B);{var N=T=>{var J=Re();L(()=>v(J,`Select a date within the goal period (${f()??""} to ${_()??""})`)),M(T,J)},P=T=>{var J=Re("When was this activity done?");M(T,J)};W(q,T=>{f()&&_()?T(N):T(P,!1)})}e(B);var G=s(B,2);At(G),e(ee);var U=s(ee,2),H=s(t(U),4);L(()=>{a(r),Pt(()=>{})}),We(H,5,()=>$,Ue,(T,J)=>{var ge=ha(),Me=t(ge,!0);e(ge);var ye={};L(()=>{v(Me,a(J)),ye!==(ye=a(J))&&(ge.value=(ge.__value=a(J))??"")}),M(T,ge)}),e(H),e(U);var V=s(U,2);Ae(V,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get count(){return a(r).prepared_names_count},set count(T){ke(r,a(r).prepared_names_count=T)},$$legacy:!0});var Q=s(V,2);Ae(Q,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get count(){return a(r).baptism_ordinances_count},set count(T){ke(r,a(r).baptism_ordinances_count=T)},$$legacy:!0});var O=s(Q,2);Ae(O,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get count(){return a(r).confirmation_ordinances_count},set count(T){ke(r,a(r).confirmation_ordinances_count=T)},$$legacy:!0});var A=s(O,2);Ae(A,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get count(){return a(r).initiatory_ordinances_count},set count(T){ke(r,a(r).initiatory_ordinances_count=T)},$$legacy:!0});var Z=s(A,2);Ae(Z,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get count(){return a(r).endowment_ordinances_count},set count(T){ke(r,a(r).endowment_ordinances_count=T)},$$legacy:!0});var de=s(Z,2);Ae(de,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get count(){return a(r).sealing_ordinances_count},set count(T){ke(r,a(r).sealing_ordinances_count=T)},$$legacy:!0});var te=s(de,2),se=s(t(te),2),le=t(se,!0);e(se),e(te);var ve=s(te,2),fe=t(ve),Fe=s(fe,2);e(ve),e(z),L(()=>{re(G,"min",f()),re(G,"max",_()),v(le,a(u))}),zt(G,()=>a(r).date,T=>ke(r,a(r).date=T)),Rt(H,()=>a(r).entry_type,T=>ke(r,a(r).entry_type=T)),De("click",fe,h),De("click",Fe,I),M(l,z),he(),c()}var Da=E('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),Ta=E('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),$a=E('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function gt(l,o){be(o,!1);let n=X(o,"entry",8),c=X(o,"showSubmittedData",8,!1),u=X(o,"showType",8,!1);xe();var y=$a(),f=t(y);{var _=P=>{var G=Da(),U=t(G),H=t(U,!0);e(U),e(G),L(()=>v(H,(w(n()),k(()=>n()?.entry_type)))),M(P,G)};W(f,P=>{u()&&P(_)})}var x=s(f,2),b=s(t(x),2),g=t(b,!0);e(b),e(x);var $=s(x,2),i=s(t($),2),D=t(i,!0);e(i),e($);var r=s($,2),d=s(t(r),2),h=t(d,!0);e(d),e(r);var S=s(r,2),m=s(t(S),2),p=t(m,!0);e(m),e(S);var I=s(S,2),z=s(t(I),2),K=t(z,!0);e(z),e(I);var ne=s(I,2),ee=s(t(ne),2),B=t(ee,!0);e(ee),e(ne);var q=s(ne,2);{var N=P=>{var G=Ta(),U=s(t(G),2),H=t(U),V=t(H,!0);e(H);var Q=s(H,2),O=t(Q,!0);e(Q),e(U),e(G),L((A,Z)=>{v(V,A),v(O,Z)},[()=>(w(St),w(n()),k(()=>St(new Date(n().created_at),{addSuffix:!0}))),()=>(w(ie),w(n()),k(()=>ie(new Date(n().created_at),"MMMM d, yyyy 'at' h:mm a")))]),M(P,G)};W(q,P=>{w(c()),w(n()),k(()=>c()&&n()?.created_at)&&P(N)})}e(y),L(()=>{v(g,(w(n()),k(()=>n()?.prepared_names_count))),v(D,(w(n()),k(()=>n()?.baptism_ordinances_count))),v(h,(w(n()),k(()=>n()?.confirmation_ordinances_count))),v(p,(w(n()),k(()=>n()?.initiatory_ordinances_count))),v(K,(w(n()),k(()=>n()?.endowment_ordinances_count))),v(B,(w(n()),k(()=>n()?.sealing_ordinances_count)))}),M(l,y),he()}var Ma=E('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Sa(l,o){be(o,!1);const n=F();let c=X(o,"entry",8),u=X(o,"date",8);oe(()=>w(c()),()=>{j(n,c().baptism_ordinances_count+c().confirmation_ordinances_count+c().initiatory_ordinances_count+c().endowment_ordinances_count+c().sealing_ordinances_count)}),Ge(),xe();var y=Ma(),f=$e(y),_=t(f),x=t(_,!0);e(_);var b=s(_,2);e(f);var g=s(f,2),$=t(g),i=t($),D=t(i);gt(D,{get entry(){return c()}});var r=s(D,2),d=t(r),h=s(t(d),2),S=t(h,!0);e(h),e(d),e(r),e(i),e($),e(g),L((m,p)=>{v(x,m),v(b,` ${p??""}`),v(S,a(n))},[()=>(w(ie),w(pe),w(u()),k(()=>ie(pe(u(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(w(ie),w(pe),w(u()),k(()=>ie(pe(u(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),M(l,y),he()}var ka=E('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Ca(l,o){be(o,!1);let n=X(o,"entry",8),c=X(o,"date",8),u=F(0);oe(()=>w(n()),()=>{j(u,n().baptism_ordinances_count+n().confirmation_ordinances_count+n().initiatory_ordinances_count+n().endowment_ordinances_count+n().sealing_ordinances_count)}),Ge(),xe();var y=ka(),f=$e(y),_=t(f),x=t(_,!0);e(_);var b=s(_,2);e(f);var g=s(f,2),$=t(g),i=t($),D=t(i);gt(D,{get entry(){return n()}});var r=s(D,2),d=t(r),h=s(t(d),2),S=t(h,!0);e(h),e(d),e(r),e(i),e($),e(g),L((m,p)=>{v(x,m),v(b,` ${p??""}`),v(S,a(u))},[()=>(w(ie),w(pe),w(c()),k(()=>ie(pe(c(),"yyyy-MM",new Date),"yyyy"))),()=>(w(ie),w(pe),w(c()),k(()=>ie(pe(c(),"yyyy-MM",new Date),"MMMM")))]),M(l,y),he()}var Ea=E('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),Oa=E('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function ja(l,o){be(o,!1);let n=X(o,"entries",8),c=X(o,"date",8);xe();var u=Oa(),y=$e(u),f=t(y),_=t(f,!0);e(f);var x=s(f,2);e(y);var b=s(y,2);We(b,5,n,Ue,(g,$)=>{var i=Ea(),D=t(i),r=t(D);gt(r,{get entry(){return a($)},showSubmittedData:!0,showType:!0}),e(D),e(i),M(g,i)}),e(b),L((g,$)=>{v(_,g),v(x,` ${$??""}`)},[()=>(w(ie),w(pe),w(c()),k(()=>ie(pe(c(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(w(ie),w(pe),w(c()),k(()=>ie(pe(c(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),M(l,u),he()}var Ia=E('<div class="d-flex flex-column gap-3"><!></div>'),Na=E('<div class="d-flex flex-column gap-3"></div>'),Ba=E('<div class="d-flex flex-column gap-3"></div>'),Pa=E('<div class="d-flex flex-column gap-3"><!> <!> <!> <!></div>');function Aa(l,o){be(o,!1);const n=()=>Ce(b,"$groupedByDate",y),c=()=>Ce(g,"$detailTotalsByDay",y),u=()=>Ce($,"$detailTotalsByMonth",y),[y,f]=it(),_=F(),{stores:{data:x,groupedByDate:b,detailTotalsByDay:g,detailTotalsByMonth:$},actions:{reload:i}}=dt();let D=X(o,"query",8,""),r=F([]),d=F([]);const h=x.subscribe(B=>{j(r,B),j(d,[...B])});function S(B){return B?B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const m=B=>{let q=[...a(r)];return B&&(q=q.filter(N=>N?.entry_type?N?.entry_type?.trim().toLowerCase().match(a(_).trim().toLowerCase()):!1)),q};kt(i),Yt(h);let p=F("by-month");const I=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"}];oe(()=>w(D()),()=>{j(_,S(D()?.trim().toLowerCase()))}),oe(()=>(w(D()),a(d)),()=>{D()?j(r,m(D())):j(r,[...a(d)])}),Ge(),xe();var z=ot(),K=$e(z);{var ne=B=>{var q=Pa(),N=t(q);Vt(N,{get options(){return I},helperText:"",label:"Filter",disabled:!1,get value(){return a(p)},set value(O){j(p,O)},$$legacy:!0});var P=s(N,2);{var G=O=>{var A=ot(),Z=$e(A);We(Z,1,()=>(n(),k(()=>Object.entries(n()))),Ue,(de,te)=>{var se=pt(()=>ft(a(te),2));let le=()=>a(se)[0],ve=()=>a(se)[1];var fe=Ia(),Fe=t(fe);ja(Fe,{get date(){return le()},get entries(){return ve()}}),e(fe),M(de,fe)}),M(O,A)};W(P,O=>{a(p)==="by-submission"&&O(G)})}var U=s(P,2);{var H=O=>{var A=Na();We(A,5,()=>(c(),k(()=>Object.entries(c()))),Ue,(Z,de)=>{var te=pt(()=>ft(a(de),2));let se=()=>a(te)[0],le=()=>a(te)[1];Sa(Z,{get date(){return se()},get entry(){return le()}})}),e(A),M(O,A)};W(U,O=>{a(p)==="by-day"&&O(H)})}var V=s(U,2);{var Q=O=>{var A=Ba();We(A,5,()=>(u(),k(()=>Object.entries(u()))),Ue,(Z,de)=>{var te=pt(()=>ft(a(de),2));let se=()=>a(te)[0],le=()=>a(te)[1];Ca(Z,{get date(){return se()},get entry(){return le()}})}),e(A),M(O,A)};W(V,O=>{a(p)==="by-month"&&O(Q)})}e(q),M(B,q)},ee=B=>{var q=Re("No Data Found");M(B,q)};W(K,B=>{a(r),k(()=>a(r)?.length)?B(ne):B(ee,!1)})}M(l,z),he(),f()}var Ra=E('<span class="d-flex justify-content-end">0</span>'),Wa=E('<span class="d-flex justify-content-end">0</span>'),Ga=E('<span class="d-flex justify-content-end"> </span>'),Fa=E('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),La=E('<span class="d-flex justify-content-end"> </span>'),Ya=E('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),qa=E('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function Ua(l,o){be(o,!1);const n=()=>Ce(h,"$entries",u),c=()=>Ce(S,"$loading",u),[u,y]=it(),f=F(),_=F(),x=F(),b=F(),g=F(),$=F();let i=X(o,"goal",8),D=X(o,"drawerId",8),r=X(o,"onSubmitClick",8),d=X(o,"onViewResultsClick",8);const{stores:{data:h,loading:S}}=dt();function m(C,R){const[_e,me,Te]=C.split("-").map(Number),[je,Ie,Ye]=R.split("-").map(Number),qe=new Date(_e,me-1,Te),It=new Date(je,Ie-1,Ye),Nt=qe.toLocaleDateString("en-US",{month:"short"}),Bt=It.toLocaleDateString("en-US",{month:"short"});return`${Nt} to ${Bt}`}function p(C){return C.toLocaleString("en-US")}function I(C){return C!==null?p(C):"--"}oe(()=>(n(),w(i())),()=>{j(f,ra(n(),i().start_date,i().end_date))}),oe(()=>a(f),()=>{j(_,sa(a(f)))}),oe(()=>a(f),()=>{j(x,oa(a(f)))}),oe(()=>w(i()),()=>{j(b,m(i().start_date,i().end_date))}),oe(()=>(w(i()),a(_)),()=>{j(g,i().temple_ordinances_goal&&i().temple_ordinances_goal>0?Math.round(a(_)/i().temple_ordinances_goal*100):null)}),oe(()=>(w(i()),a(x)),()=>{j($,i().names_prepared_goal&&i().names_prepared_goal>0?Math.round(a(x)/i().names_prepared_goal*100):null)}),Ge(),xe();var z=qa(),K=t(z),ne=t(K),ee=s(ne),B=t(ee);e(ee),e(K);var q=s(K,2),N=t(q),P=t(N),G=t(P),U=s(t(G)),H=t(U),V=s(t(H)),Q=t(V),O=t(Q,!0);e(Q),e(V);var A=s(V),Z=t(A);{var de=C=>{var R=Ra();M(C,R)};W(Z,C=>{c()||C(de)})}e(A),e(H);var te=s(H),se=s(t(te)),le=t(se),ve=t(le,!0);e(le),e(se);var fe=s(se),Fe=t(fe);{var T=C=>{var R=Wa();M(C,R)};W(Fe,C=>{c()||C(T)})}e(fe),e(te);var J=s(te),ge=t(J);let Me;var ye=s(ge);let ze;var He=t(ye),ut=t(He,!0);e(He),e(ye);var Ee=s(ye);let Ve;var Je=t(Ee);{var Ke=C=>{var R=Ga(),_e=t(R,!0);e(R),L(me=>v(_e,me),[()=>(a(_),k(()=>p(a(_))))]),M(C,R)};W(Je,C=>{c()||C(Ke)})}e(Ee),e(J);var Qe=s(J);{var Ze=C=>{var R=Fa(),_e=t(R),me=t(_e),Te=t(me),je=t(Te);e(Te);var Ie=s(Te,2),Ye=t(Ie);e(Ie),e(me),e(_e),e(R),L(qe=>{Dt(je,`width: ${qe??""}%`),re(je,"aria-valuenow",a(g)),v(Ye,`${a(g)??""}%`)},[()=>(a(g),k(()=>Math.min(a(g),100)))]),M(C,R)};W(Qe,C=>{a(g),w(i()),k(()=>a(g)!==null&&i().temple_ordinances_goal)&&C(Ze)})}var Le=s(Qe),ue=t(Le);let we;var Pe=s(ue);let et;var tt=t(Pe),Se=t(tt,!0);e(tt),e(Pe);var Oe=s(Pe);let yt;var Ct=t(Oe);{var Et=C=>{var R=La(),_e=t(R,!0);e(R),L(me=>v(_e,me),[()=>(a(x),k(()=>p(a(x))))]),M(C,R)};W(Ct,C=>{c()||C(Et)})}e(Oe),e(Le);var Ot=s(Le);{var jt=C=>{var R=Ya(),_e=t(R),me=t(_e),Te=t(me),je=t(Te);e(Te);var Ie=s(Te,2),Ye=t(Ie);e(Ie),e(me),e(_e),e(R),L(qe=>{Dt(je,`width: ${qe??""}%`),re(je,"aria-valuenow",a($)),v(Ye,`${a(g)??""}%`)},[()=>(a($),k(()=>Math.min(a($),100)))]),M(C,R)};W(Ot,C=>{a($),w(i()),k(()=>a($)!==null&&i().names_prepared_goal)&&C(jt)})}e(U),e(G),e(P);var _t=s(P,2),mt=t(_t);e(_t);var bt=s(_t,2),vt=t(bt);e(bt),e(N),e(q),e(z),L((C,R,_e,me)=>{v(ne,`Ward Mission Goal ${w(i()),k(()=>i().year)??""} `),v(B,`(${a(b)??""})`),v(O,C),v(ve,R),Me=Be(ge,1,"",null,Me,{"border-bottom-0":a(g)!==null&&i().temple_ordinances_goal}),ze=Be(ye,1,"",null,ze,{"border-bottom-0":a(g)!==null&&i().temple_ordinances_goal}),v(ut,_e),Ve=Be(Ee,1,"",null,Ve,{"border-bottom-0":a(g)!==null&&i().temple_ordinances_goal}),we=Be(ue,1,"",null,we,{"border-bottom-0":a($)!==null&&i().names_prepared_goal}),et=Be(Pe,1,"",null,et,{"border-bottom-0":a($)!==null&&i().names_prepared_goal}),v(Se,me),yt=Be(Oe,1,"",null,yt,{"border-bottom-0":a($)!==null&&i().names_prepared_goal}),re(mt,"data-bs-target",`#${D()??""}`),re(mt,"aria-controls",D()),re(vt,"data-bs-target",`#${D()??""}`),re(vt,"aria-controls",D())},[()=>(w(i()),k(()=>I(i().baptisms_goal))),()=>(w(i()),k(()=>I(i().family_sealings_goal))),()=>(w(i()),k(()=>I(i().temple_ordinances_goal))),()=>(w(i()),k(()=>I(i().names_prepared_goal)))]),De("click",mt,function(...C){r()?.apply(this,C)}),De("click",vt,function(...C){d()?.apply(this,C)}),M(l,z),he(),y()}var Xa=E("<!> <!>",1),za=E('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),Ha=E('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),Va=E('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),Ja=E('<div class="col-12"><!> <!></div>'),Ka=E('<div class="row g-3"></div>'),Qa=E("<!> <!>",1);function hn(l,o){be(o,!1);const n=()=>Ce(d,"$activeGoals",y),c=()=>Ce(S,"$currentGoalPeriod",y),u=()=>Ce(h,"$goalsLoading",y),[y,f]=it(),_=F(),x=F();let b=F("form"),g=Ut(),$=F("end"),i=F(),D=F(!1);const{actions:{reload:r}}=dt(),{stores:{activeGoals:d,loading:h,currentGoalPeriod:S},actions:{reload:m}}=Ht();let p=F(null);function I(){j(b,"form")}function z(){j(b,"results")}kt(async()=>{await Promise.all([m(),r()]);const N=new URLSearchParams(window.location.search);j(p,N.get("log-temple-activity"))}),oe(()=>(a(p),a(i),a(D)),()=>{a(p)&&a(p)==="yes"&&a(i)&&!a(D)&&(a(i).click(),j(D,!0))}),oe(()=>a(b),()=>{j($,a(b)==="form"?"end":"start")}),oe(()=>a(b),()=>{j(_,a(b)==="form"?"Temple Activity":"Temple Activity Results")}),oe(()=>n(),()=>{j(x,(()=>{const N=new Date().toISOString().split("T")[0];return n().filter(P=>P.start_date<=N&&P.end_date>=N)})())}),Ge(),xe();var K=Qa(),ne=$e(K);Xt(ne,{get placement(){return a($)},get title(){return a(_)},get id(){return g},children:(N,P)=>{var G=Xa(),U=$e(G);{var H=O=>{{let A=ht(()=>(c(),k(()=>c()?.start_date))),Z=ht(()=>(c(),k(()=>c()?.end_date)));wa(O,{get drawerId(){return g},get minDate(){return a(A)},get maxDate(){return a(Z)}})}};W(U,O=>{a(b)==="form"&&O(H)})}var V=s(U,2);{var Q=O=>{Aa(O,{})};W(V,O=>{a(b)==="results"&&O(Q)})}M(N,G)},$$slots:{default:!0}});var ee=s(ne,2);{var B=N=>{var P=za();M(N,P)},q=N=>{var P=ot(),G=$e(P);{var U=V=>{var Q=Ha();M(V,Q)},H=V=>{var Q=Ka();We(Q,5,()=>a(x),O=>O.id,(O,A)=>{var Z=Ja(),de=t(Z);Ua(de,{get goal(){return a(A)},get drawerId(){return g},onSubmitClick:I,onViewResultsClick:z});var te=s(de,2);{var se=le=>{var ve=Va();qt(ve,fe=>j(i,fe),()=>a(i)),L(()=>{re(ve,"data-bs-target",`#${g??""}`),re(ve,"aria-controls",g)}),De("click",ve,I),M(le,ve)};W(te,le=>{a(A),a(x),k(()=>a(A)===a(x)[0])&&le(se)})}e(Z),M(O,Z)}),e(Q),M(V,Q)};W(G,V=>{a(x),k(()=>a(x).length===0)?V(U):V(H,!1)},!0)}M(N,P)};W(ee,N=>{u()?N(B):N(q,!1)})}M(l,K),he(),f()}export{gn as S,yn as W,hn as a,fn as b,bn as i};
