import{s as Re,n as we,A as ot,r as ii,o as en,t as Qt,h as me,p as pr,B as Ee,c as wt,u as $t,g as kt,a as St,b as _n,C as Ri}from"./scheduler.CCvw2hB5.js";import{S as De,i as Le,e as T,m as J,s as D,c as E,b as j,n as G,f as _,d as L,h as g,A as un,j as U,k as b,u as de,o as M,g as se,q as H,y as ee,D as it,r as F,C as Ae,t as I,a as R,v as V,l as Tt,E as Vt,F as gr,x as Ge,w as Ke,G as Pe,z as Yt}from"./index.jnR6YpJ6.js";import{e as Ie,i as Di,f as Li}from"./Header.i_Nu0xGR.js";import{H as pe,a as Ui,b as Ni,c as Bi,n as Mi,d as Hi,C as Fi}from"./CheatSheet.BAAMGsJU.js";import{_ as Et}from"./preload-helper.C1FmrZbK.js";import{w as at}from"./index.BO4-_5vX.js";import{S as ai}from"./Spinner.BkGhK_Eq.js";import{U as Vi,g as oi}from"./app.state.BnBRdF4Q.js";import{P as qi}from"./PageLayout.CzrN2nOD.js";import{B as xi}from"./BOMChallenge.ImnGoodr.js";import{A as zi}from"./Announcements.ZCBXDOIE.js";const Ji=!0,Jc=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ji},Symbol.toStringTag,{value:"Module"}));function Gi(s){let e,t,n,r,i,a,o,l,u,c,p,h,d,f,m;return{c(){e=T("div"),t=T("div"),n=J(s[0]),r=D(),i=T("div"),a=J(s[1]),o=T("br"),l=D(),u=T("small"),c=J(s[2]),p=J(" Hymn No. "),h=J(s[3]),d=D(),f=T("a"),m=J("Lyrics"),this.h()},l($){e=E($,"DIV",{class:!0});var P=j(e);t=E(P,"DIV",{});var S=j(t);n=G(S,s[0]),S.forEach(_),r=L(P),i=E(P,"DIV",{class:!0});var C=j(i);a=G(C,s[1]),o=E(C,"BR",{}),l=L(C),u=E(C,"SMALL",{});var y=j(u);c=G(y,s[2]),p=G(y," Hymn No. "),h=G(y,s[3]),y.forEach(_),d=L(C),f=E(C,"A",{href:!0,class:!0,target:!0,tabindex:!0,role:!0,style:!0});var k=j(f);m=G(k,"Lyrics"),k.forEach(_),C.forEach(_),P.forEach(_),this.h()},h(){g(f,"href",s[4]),g(f,"class","btn btn-secondary btn-sm d-print-none"),g(f,"target","_blank"),g(f,"tabindex","-1"),g(f,"role","button"),un(f,"--bs-btn-padding-y",".25rem"),un(f,"--bs-btn-padding-x",".5rem"),un(f,"--bs-btn-font-size",".70rem"),g(i,"class","text-end"),g(e,"class","d-flex justify-content-between")},m($,P){U($,e,P),b(e,t),b(t,n),b(e,r),b(e,i),b(i,a),b(i,o),b(i,l),b(i,u),b(u,c),b(u,p),b(u,h),b(i,d),b(i,f),b(f,m)},p($,[P]){P&1&&de(n,$[0]),P&2&&de(a,$[1]),P&4&&de(c,$[2]),P&8&&de(h,$[3]),P&16&&g(f,"href",$[4])},i:we,o:we,d($){$&&_(e)}}}function Ki(s,e,t){let{assignment:n=""}=e,{title:r=""}=e,{language:i=""}=e,{page:a=0}=e,{link:o=""}=e;return s.$$set=l=>{"assignment"in l&&t(0,n=l.assignment),"title"in l&&t(1,r=l.title),"language"in l&&t(2,i=l.language),"page"in l&&t(3,a=l.page),"link"in l&&t(4,o=l.link)},[n,r,i,a,o]}class Wt extends De{constructor(e){super(),Le(this,e,Ki,Gi,Re,{assignment:0,title:1,language:2,page:3,link:4})}}function Wi(s){let e,t,n,r,i,a,o,l,u,c;return{c(){e=T("div"),t=T("div"),n=J(s[0]),r=D(),i=T("div"),a=J(s[1]),o=T("br"),l=D(),u=T("em"),c=J(s[2]),this.h()},l(p){e=E(p,"DIV",{class:!0});var h=j(e);t=E(h,"DIV",{});var d=j(t);n=G(d,s[0]),d.forEach(_),r=L(h),i=E(h,"DIV",{class:!0});var f=j(i);a=G(f,s[1]),o=E(f,"BR",{}),l=L(f),u=E(f,"EM",{class:!0});var m=j(u);c=G(m,s[2]),m.forEach(_),f.forEach(_),h.forEach(_),this.h()},h(){g(u,"class","small fw-lighter"),g(i,"class","text-end"),g(e,"class","d-flex justify-content-between")},m(p,h){U(p,e,h),b(e,t),b(t,n),b(e,r),b(e,i),b(i,a),b(i,o),b(i,l),b(i,u),b(u,c)},p(p,[h]){h&1&&de(n,p[0]),h&2&&de(a,p[1]),h&4&&de(c,p[2])},i:we,o:we,d(p){p&&_(e)}}}function Qi(s,e,t){let{assignment:n=""}=e,{name:r=""}=e,{details:i=""}=e;return s.$$set=a=>{"assignment"in a&&t(0,n=a.assignment),"name"in a&&t(1,r=a.name),"details"in a&&t(2,i=a.details)},[n,r,i]}class qe extends De{constructor(e){super(),Le(this,e,Qi,Wi,Re,{assignment:0,name:1,details:2})}}const Yi=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Et(async()=>{const{default:n}=await Promise.resolve().then(()=>Ot);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class On extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Xi extends On{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zi extends On{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ea extends On{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vn;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(vn||(vn={}));var ta=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class na{constructor(e,{headers:t={},customFetch:n,region:r=vn.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Yi(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return ta(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u}).catch(f=>{throw new Xi(f)}),p=c.headers.get("x-relay-error");if(p&&p==="true")throw new Zi(c);if(!c.ok)throw new ea(c);let h=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield c.json():h==="application/octet-stream"?d=yield c.blob():h==="text/event-stream"?d=c:h==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(r){return{data:null,error:r}}})}}var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gc(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function sa(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var Ce={},An={},tn={},Nt={},nn={},sn={},ra=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pt=ra();const ia=Pt.fetch,li=Pt.fetch.bind(Pt),ci=Pt.Headers,aa=Pt.Request,oa=Pt.Response,Ot=Object.freeze(Object.defineProperty({__proto__:null,Headers:ci,Request:aa,Response:oa,default:li,fetch:ia},Symbol.toStringTag,{value:"Module"})),la=sa(Ot);var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});class ca extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}Cn.default=ca;var ui=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(sn,"__esModule",{value:!0});const ua=ui(la),ha=ui(Cn);let da=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ua.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let u=null,c=null,p=null,h=i.status,d=i.statusText;if(i.ok){if(this.method!=="HEAD"){const P=await i.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=P:c=JSON.parse(P))}const m=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),$=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&$&&$.length>1&&(p=parseInt($[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,p=null,h=406,d="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await i.text();try{u=JSON.parse(m),Array.isArray(u)&&i.status===404&&(c=[],u=null,h=200,d="OK")}catch{i.status===404&&m===""?(h=204,d="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,d="OK"),u&&this.shouldThrowOnError)throw new ha.default(u)}return{error:u,data:c,count:p,status:h,statusText:d}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}};sn.default=da;var fa=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(nn,"__esModule",{value:!0});const pa=fa(sn);let ga=class extends pa.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nn.default=ga;var ma=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Nt,"__esModule",{value:!0});const _a=ma(nn);let va=class extends _a.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Nt.default=va;var ba=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(tn,"__esModule",{value:!0});const It=ba(Nt);let ya=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new It.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new It.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new It.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new It.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new It.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tn.default=ya;var rn={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.version=void 0;an.version="0.0.0-automated";Object.defineProperty(rn,"__esModule",{value:!0});rn.DEFAULT_HEADERS=void 0;const wa=an;rn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wa.version}`};var hi=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(An,"__esModule",{value:!0});const $a=hi(tn),ka=hi(Nt),Sa=rn;let Ta=class di{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Sa.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new $a.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new di(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(([c,p])=>p!==void 0).map(([c,p])=>[c,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([c,p])=>{o.searchParams.append(c,p)})):(a="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ka.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};An.default=Ta;var Bt=je&&je.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const fi=Bt(An);Ce.PostgrestClient=fi.default;const pi=Bt(tn);Ce.PostgrestQueryBuilder=pi.default;const gi=Bt(Nt);Ce.PostgrestFilterBuilder=gi.default;const mi=Bt(nn);Ce.PostgrestTransformBuilder=mi.default;const _i=Bt(sn);Ce.PostgrestBuilder=_i.default;var Ea=Ce.default={PostgrestClient:fi.default,PostgrestQueryBuilder:pi.default,PostgrestFilterBuilder:gi.default,PostgrestTransformBuilder:mi.default,PostgrestBuilder:_i.default};const{PostgrestClient:Pa,PostgrestQueryBuilder:Xc,PostgrestFilterBuilder:Zc,PostgrestTransformBuilder:eu,PostgrestBuilder:tu}=Ea,Oa="2.10.2",Aa={"X-Client-Info":`realtime-js/${Oa}`},Ca="1.0.0",vi=1e4,Ia=1e3;var yt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(yt||(yt={}));var Te;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Te||(Te={}));var Fe;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Fe||(Fe={}));var bn;(function(s){s.websocket="websocket"})(bn||(bn={}));var ht;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(ht||(ht={}));class ja{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+r));a=a+r;const l=n.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class bi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Z||(Z={}));const mr=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=Ra(a,s,e,r),i),{})},Ra=(s,e,t,n)=>{const r=e.find(o=>o.name===s),i=r==null?void 0:r.type,a=t[s];return i&&!n.includes(i)?yi(i,a):yn(a)},yi=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Na(e,t)}switch(s){case Z.bool:return Da(e);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return La(e);case Z.json:case Z.jsonb:return Ua(e);case Z.timestamp:return Ba(e);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return yn(e);default:return yn(e)}},yn=s=>s,Da=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},La=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Ua=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Na=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>yi(e,o))}return s},Ba=s=>typeof s=="string"?s.replace(" ","T"):s,wi=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hn{constructor(e,t,n={},r=vi){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _r;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(_r||(_r={}));class Dt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dt.syncState(this.state,r,i,a),this.pendingDiffs.forEach(l=>{this.state=Dt.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Dt.syncDiff(this.state,r,i,a),o())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const p=i[u];if(p){const h=c.map($=>$.presence_ref),d=p.map($=>$.presence_ref),f=c.filter($=>d.indexOf($.presence_ref)<0),m=p.filter($=>h.indexOf($.presence_ref)<0);f.length>0&&(o[u]=f),m.length>0&&(l[u]=m)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const p=e[o].map(d=>d.presence_ref),h=c.filter(d=>p.indexOf(d.presence_ref)<0);e[o].unshift(...h)}n(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(p=>p.presence_ref);u=u.filter(p=>c.indexOf(p.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vr;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(vr||(vr={}));var br;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(br||(br={}));var yr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(yr||(yr={}));class In{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new hn(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new bi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Dt(this),this.broadcastEndpointURL=wi(this.socket.endPoint)+"/api/broadcast"}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},u={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var p;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(p=h==null?void 0:h.length)!==null&&p!==void 0?p:0,f=[];for(let m=0;m<d;m++){const $=h[m],{filter:{event:P,schema:S,table:C,filter:y}}=$,k=c&&c[m];if(k&&k.event===P&&k.schema===S&&k.table===C&&k.filter===y)f.push(Object.assign(Object.assign({},$),{id:k.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=l.body)===null||r===void 0?void 0:r.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Te.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new hn(this,Fe.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new hn(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Fe;if(n&&[o,l,u,c].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,t,n);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(d=>{var f,m,$;return((f=d.filter)===null||f===void 0?void 0:f.event)==="*"||(($=(m=d.filter)===null||m===void 0?void 0:m.event)===null||$===void 0?void 0:$.toLocaleLowerCase())===a}).map(d=>d.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(d=>{var f,m,$,P,S,C;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const y=d.id,k=(f=d.filter)===null||f===void 0?void 0:f.event;return y&&((m=t.ids)===null||m===void 0?void 0:m.includes(y))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===(($=t.data)===null||$===void 0?void 0:$.type.toLocaleLowerCase()))}else{const y=(S=(P=d==null?void 0:d.filter)===null||P===void 0?void 0:P.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return y==="*"||y===((C=t==null?void 0:t.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof h=="object"&&"ids"in h){const f=h.data,{schema:m,table:$,commit_timestamp:P,type:S,errors:C}=f;h=Object.assign(Object.assign({},{schema:m,table:$,commit_timestamp:P,eventType:S,new:{},old:{},errors:C}),this._getPayloadRecords(f))}d.callback(h,n)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&In.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fe.close,{},e)}_onError(e){this._on(Fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mr(e.columns,e.old_record)),t}}const Ma=()=>{},Ha=typeof WebSocket<"u";class Fa{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Aa,this.params={},this.timeout=vi,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ma,this.conn=null,this.sendBuffer=[],this.serializer=new ja,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Et(async()=>{const{default:l}=await Promise.resolve().then(()=>Ot);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${bn.websocket}`,this.httpEndpoint=wi(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bi(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ha){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Va(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Et(async()=>{const{default:e}=await import("./browser.BZS7xVMj.js").then(t=>t.b);return{default:e}},[],import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case yt.connecting:return ht.Connecting;case yt.open:return ht.Open;case yt.closing:return ht.Closing;default:return ht.Closed}}isConnected(){return this.connectionState()===ht.Open}channel(e,t={config:{}}){const n=new In(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Fe.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ca}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:a}=t;(a&&a===this.pendingHeartbeatRef||r===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ia,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Va{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=yt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class jn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ce(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class qa extends jn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class wn extends jn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xa=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const $i=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Et(async()=>{const{default:n}=await Promise.resolve().then(()=>Ot);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},za=()=>xa(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Et(()=>Promise.resolve().then(()=>Ot),void 0,import.meta.url)).Response:Response}),$n=s=>{if(Array.isArray(s))return s.map(t=>$n(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=$n(n)}),e};var dt=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const dn=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ja=(s,e,t)=>dt(void 0,void 0,void 0,function*(){const n=yield za();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new qa(dn(r),s.status||500))}).catch(r=>{e(new wn(dn(r),r))}):e(new wn(dn(s),s))}),Ga=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function Mt(s,e,t,n,r,i){return dt(this,void 0,void 0,function*(){return new Promise((a,o)=>{s(t,Ga(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Ja(l,o,n))})})}function Xt(s,e,t,n){return dt(this,void 0,void 0,function*(){return Mt(s,"GET",e,t,n)})}function nt(s,e,t,n,r){return dt(this,void 0,void 0,function*(){return Mt(s,"POST",e,n,r,t)})}function Ka(s,e,t,n,r){return dt(this,void 0,void 0,function*(){return Mt(s,"PUT",e,n,r,t)})}function Wa(s,e,t,n){return dt(this,void 0,void 0,function*(){return Mt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function ki(s,e,t,n,r){return dt(this,void 0,void 0,function*(){return Mt(s,"DELETE",e,n,r,t)})}var ye=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const Qa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ya{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=$i(r)}uploadOrUpdate(e,t,n,r){return ye(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},wr),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),i.append("",n),l&&i.append("metadata",this.encodeMetadata(l))):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),p=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield p.json();return p.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ye(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:wr.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const p=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),h=yield p.json();return p.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ce(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield nt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new jn("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}update(e,t,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ye(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}copy(e,t,n){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield nt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ye(this,void 0,void 0,function*(){try{const r=yield nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}download(e,t){return ye(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Xt(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ce(o))return{data:null,error:o};throw o}})}info(e){return ye(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Xt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$n(n),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}exists(e){return ye(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Wa(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ce(n)&&n instanceof wn){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}list(e,t,n){return ye(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Qa),t),{prefix:e||""});return{data:yield nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xa="2.7.0",Za={"X-Client-Info":`storage-js/${Xa}`};var _t=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class eo{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Za),t),this.fetch=$i(n)}listBuckets(){return _t(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}getBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield Xt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return _t(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return _t(this,void 0,void 0,function*(){try{return{data:yield Ka(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}emptyBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _t(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}}class to extends eo{constructor(e,t={},n){super(e,t,n)}from(e){return new Ya(this.url,this.headers,e,this.fetch)}}const no="2.45.4";let Rt="";typeof Deno<"u"?Rt="deno":typeof document<"u"?Rt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rt="react-native":Rt="node";const so={"X-Client-Info":`supabase-js-${Rt}/${no}`},ro={headers:so},io={schema:"public"},ao={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oo={};var lo=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const co=s=>{let e;return s?e=s:typeof fetch>"u"?e=li:e=fetch,(...t)=>e(...t)},uo=()=>typeof Headers>"u"?ci:Headers,ho=(s,e,t)=>{const n=co(t),r=uo();return(i,a)=>lo(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:s;let u=new r(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var fo=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};function po(s){return s.replace(/\/$/,"")}function go(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),i),accessToken:()=>fo(this,void 0,void 0,function*(){return""})};return s.accessToken?c.accessToken=s.accessToken:delete c.accessToken,c}const Si="2.65.0",mo="http://localhost:9999",_o="supabase.auth.token",vo={"X-Client-Info":`gotrue-js/${Si}`},$r=10,kn="X-Supabase-Api-Version",Ti={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function bo(s){return Math.round(Date.now()/1e3)+s}function yo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof document<"u",lt={tested:!1,writable:!1},Lt=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lt.tested)return lt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),lt.tested=!0,lt.writable=!0}catch{lt.tested=!0,lt.writable=!1}return lt.writable};function fn(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const Ei=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Et(async()=>{const{default:n}=await Promise.resolve().then(()=>Ot);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},wo=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Pi=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},qt=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},xt=async(s,e)=>{await s.removeItem(e)};function $o(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,a,o,l,u,c=0;for(s=s.replace("-","+").replace("_","/");c<s.length;)a=e.indexOf(s.charAt(c++)),o=e.indexOf(s.charAt(c++)),l=e.indexOf(s.charAt(c++)),u=e.indexOf(s.charAt(c++)),n=a<<2|o>>4,r=(o&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(n),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class on{constructor(){this.promise=new on.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}on.promiseConstructor=Promise;function kr(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse($o(n))}async function ko(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function So(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function To(s){return("0"+s.toString(16)).substr(-2)}function Eo(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,To).join("")}async function Po(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function Oo(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ao(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Po(s);return Oo(t)}async function vt(s,e,t=!1){const n=Eo();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await Pi(s,`${e}-code-verifier`,r);const i=await Ao(n);return[i,n===i?"plain":"s256"]}const Co=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Io(s){const e=s.headers.get(kn);if(!e||!e.match(Co))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Rn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function z(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class jo extends Rn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Ro(s){return z(s)&&s.name==="AuthApiError"}class Oi extends Rn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ft extends Rn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class et extends ft{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Do(s){return z(s)&&s.name==="AuthSessionMissingError"}class pn extends ft{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zt extends ft{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Jt extends ft{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sr extends ft{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sn extends ft{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function gn(s){return z(s)&&s.name==="AuthRetryableFetchError"}class Tr extends ft{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Lo=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const ct=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Uo=[502,503,504];async function Er(s){var e;if(!wo(s))throw new Sn(ct(s),0);if(Uo.includes(s.status))throw new Sn(ct(s),s.status);let t;try{t=await s.json()}catch(i){throw new Oi(ct(i),i)}let n;const r=Io(s);if(r&&r.getTime()>=Ti["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Tr(ct(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new et}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Tr(ct(t),s.status,t.weak_password.reasons);throw new jo(ct(t),s.status||500,n)}const No=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function W(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[kn]||(i[kn]=Ti["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Bo(s,e,t+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Bo(s,e,t,n,r,i){const a=No(e,n,r,i);let o;try{o=await s(t,Object.assign({},a))}catch(l){throw console.error(l),new Sn(ct(l),0)}if(o.ok||await Er(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await Er(l)}}function tt(s){var e;let t=null;Vo(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=bo(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function Pr(s){const e=tt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function st(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Mo(s){return{data:s,error:null}}function Ho(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,a=Lo(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Fo(s){return s}function Vo(s){return s.access_token&&s.refresh_token&&s.expires_in}var qo=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class xo{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ei(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:st})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=qo(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ho,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(z(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:st})}catch(t){if(z(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Fo});if(c.error)throw c.error;const p=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return d.length>0&&(d.forEach(f=>{const m=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),$=JSON.parse(f.split(";")[1].split("=")[1]);u[`${$}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:st})}catch(t){if(z(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:st})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:st})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(z(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}}}const zo={getItem:s=>Lt()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Lt()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Lt()&&globalThis.localStorage.removeItem(s)}};function Or(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Jo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bt={debug:!!(globalThis&&Lt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ai extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Go extends Ai{}async function Ko(s,e,t){bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),bt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw bt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Go(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(bt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}Jo();const Wo={url:mo,storageKey:_o,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vo,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},jt=30*1e3,Ar=3;async function Cr(s,e,t){return await t()}class Ut{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ut.nextInstanceID,Ut.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Wo),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new xo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ei(r.fetch),this.lock=r.lock||Cr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Me()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ko:this.lock=Cr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Lt()?this.storage=zo:(this.memoryStorage={},this.storage=Or(this.memoryStorage)):(this.memoryStorage={},this.storage=Or(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Si}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Me()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=await this._getSessionFromURL(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),(n==null?void 0:n.message)==="Identity is already linked"||(n==null?void 0:n.message)==="Identity is already linked to another user"?{error:n}:(await this._removeSession(),{error:n});const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return z(e)?{error:e}:{error:new Oi("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:tt}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:c,password:p,options:h}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await vt(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:p,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:f},xform:tt})}else if("phone"in e){const{phone:c,password:p,options:h}=e;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:tt})}else throw new zt("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Pr})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Pr})}else throw new zt("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new pn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await qt(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:a}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:tt});if(await xt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new pn}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,o=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:tt}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new pn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await vt(this.storage,this.storageKey));const{error:p}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new zt("You must provide either an email or phone number.")}catch(o){if(z(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:tt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await vt(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Mo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new et;const{error:r}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await W(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:o}=await W(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new zt("You must provide either an email or phone number and a type")}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await qt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:st}):await this._useSession(async t=>{var n,r,i;const{data:a,error:o}=t;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:st})})}catch(t){if(z(t))return Do(t)&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new et;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await vt(this.storage,this.storageKey));const{data:u,error:c}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:st});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return kr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new et;const t=Date.now()/1e3;let n=t,r=!0,i=null;const a=kr(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(z(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new et;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!Me())throw new Jt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Jt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Sr("Not a valid PKCE flow url.");const t=fn(window.location.href);if(e){if(!t.code)throw new Sr("No code detected.");const{data:S,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:S.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Jt(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=t;if(!i||!o||!a||!u)throw new Jt("No session defined in URL");const c=Math.round(Date.now()/1e3),p=parseInt(o);let h=c+p;l&&(h=parseInt(l));const d=h-c;d*1e3<=jt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${p}s`);const f=h-p;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,h,c);const{data:m,error:$}=await this._getUser(i);if($)throw $;const P={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:p,expires_at:h,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(t){if(z(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=fn(window.location.href);return!!(Me()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=fn(window.location.href),t=await qt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Ro(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=yo(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await vt(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(z(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var a,o,l,u,c;const{data:p,error:h}=i;if(h)throw h;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",d,{headers:this.headers,jwt:(c=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return Me()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(z(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(z(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await So(async r=>(r>0&&await ko(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tt})),(r,i)=>{const a=200*Math.pow(2,r);return i&&gn(i)&&Date.now()+a-n<jt})}catch(n){if(this._debug(t,"error",n),z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Me()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await qt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<r+$r;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${$r}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),gn(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new on;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(r,"error",i),z(i)){const a={session:null,error:i};return gn(i)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Pi(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await xt(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),jt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/jt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${jt}ms, refresh threshold is ${Ar} ticks`),r<=Ar&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ai)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await vt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(z(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="phone"&&delete l.totp,e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(z(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(z(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(z(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Ut.nextInstanceID=0;const Qo=Ut;class Yo extends Qo{constructor(e){super(e)}}var Xo=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(n.next(c))}catch(p){a(p)}}function l(c){try{u(n.throw(c))}catch(p){a(p)}}function u(c){c.done?i(c.value):r(c.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class Zo{constructor(e,t,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=po(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:io,realtime:oo,auth:Object.assign(Object.assign({},ao),{storageKey:l}),global:ro},c=go(n??{},u);this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(p,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=ho(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new Pa(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new na(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new to(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Xo(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:o,debug:l},u,c){var p;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yo({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:(p="Authorization"in this.headers)!==null&&p!==void 0?p:!1})}_initRealtimeClient(e){return new Fa(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const el=(s,e,t)=>new Zo(s,e,t),tl="https://oumamqnuqttlypzaohkg.supabase.co",nl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im91bWFtcW51cXR0bHlwemFvaGtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjcwNjc1ODAsImV4cCI6MjA0MjY0MzU4MH0.DLwhHeWVj5qxc5X6N8YSG2AckErA4qsrejZCBen-K9s",xe=el(tl,nl),Tn=at([]);async function sl(s){const{data:e,error:t}=await xe.from("participants").insert([s]).select();if(t)throw t;return await ln(),e[0]}async function rl(s){let e=ot(Tn);return e.length||(await ln(),e=ot(Tn)),e.find(t=>t.id===s)}async function ln(){const{data:s,error:e}=await xe.from("participants").select("*");if(e)throw e;return Tn.set(s),s}async function il(s,e){const{data:t,error:n}=await xe.from("participants").update(e).eq("id",s);if(n)throw n;return await ln(),t}async function al(s){const{data:e,error:t}=await xe.from("participants").delete().eq("id",s);if(t)throw t;return await ln(),e}function Ir(s,e,t){const n=s.slice();return n[23]=e[t],n}function jr(s){let e,t,n;return{c(){e=T("div"),t=T("strong"),n=J(s[1])},l(r){e=E(r,"DIV",{});var i=j(e);t=E(i,"STRONG",{});var a=j(t);n=G(a,s[1]),a.forEach(_),i.forEach(_)},m(r,i){U(r,e,i),b(e,t),b(t,n)},p(r,i){i&2&&de(n,r[1])},d(r){r&&_(e)}}}function Rr(s){let e,t,n="<em>Presets</em>",r,i,a=Ie(s[2]),o=[];for(let l=0;l<a.length;l+=1)o[l]=Dr(Ir(s,a,l));return{c(){e=T("div"),t=T("small"),t.innerHTML=n,r=D(),i=T("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=E(l,"DIV",{});var u=j(e);t=E(u,"SMALL",{"data-svelte-h":!0}),se(t)!=="svelte-yccwcd"&&(t.innerHTML=n),r=L(u),i=E(u,"DIV",{});var c=j(i);for(let p=0;p<o.length;p+=1)o[p].l(c);c.forEach(_),u.forEach(_),this.h()},h(){ee(e,"loading",s[3])},m(l,u){U(l,e,u),b(e,t),b(e,r),b(e,i);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(i,null)},p(l,u){if(u&1029){a=Ie(l[2]);let c;for(c=0;c<a.length;c+=1){const p=Ir(l,a,c);o[c]?o[c].p(p,u):(o[c]=Dr(p),o[c].c(),o[c].m(i,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=a.length}u&8&&ee(e,"loading",l[3])},d(l){l&&_(e),Tt(o,l)}}}function Dr(s){let e,t=s[23].description+"",n,r,i,a;function o(){return s[13](s[23])}return{c(){e=T("span"),n=J(t),r=D(),this.h()},l(l){e=E(l,"SPAN",{class:!0});var u=j(e);n=G(u,t),r=L(u),u.forEach(_),this.h()},h(){g(e,"class","badge me-2 cursor-pointer svelte-110pjr"),ee(e,"text-bg-secondary",s[23].description!==s[0].description),ee(e,"text-bg-warning",s[23].description===s[0].description)},m(l,u){U(l,e,u),b(e,n),b(e,r),i||(a=Ae(e,"click",o),i=!0)},p(l,u){s=l,u&4&&t!==(t=s[23].description+"")&&de(n,t),u&5&&ee(e,"text-bg-secondary",s[23].description!==s[0].description),u&5&&ee(e,"text-bg-warning",s[23].description===s[0].description)},d(l){l&&_(e),i=!1,a()}}}function Lr(s){let e,t='<span class="visually-hidden">Item not saved</span>';return{c(){e=T("span"),e.innerHTML=t,this.h()},l(n){e=E(n,"SPAN",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1g0a6ie"&&(e.innerHTML=t),this.h()},h(){g(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(n,r){U(n,e,r)},d(n){n&&_(e)}}}function ol(s){var Ne;let e,t,n,r,i,a="Name",o,l,u,c,p,h="Participant name. i.e. Brother John Smith",d,f,m,$="Description",P,S,C,y,k,O="Participant Calling or Title. i.e. Ward Member, Sunday School Teacher",A,N,v,w=s[6].message+"",Q,K,ne,ue,re,$e,ie,ke,Se="Save",Ue,X,_e,gt,te=s[1]&&jr(s),oe=((Ne=s[2])==null?void 0:Ne.length)&&Rr(s);re=new ai({props:{size:"xs"}});let ae=s[9]&&Lr();return{c(){e=T("div"),te&&te.c(),t=D(),oe&&oe.c(),n=D(),r=T("div"),i=T("div"),i.textContent=a,o=D(),l=T("input"),c=D(),p=T("small"),p.textContent=h,d=D(),f=T("div"),m=T("div"),m.textContent=$,P=D(),S=T("input"),y=D(),k=T("small"),k.textContent=O,A=D(),N=T("div"),v=T("small"),Q=J(w),ne=D(),ue=T("span"),M(re.$$.fragment),$e=D(),ie=T("button"),ke=T("span"),ke.textContent=Se,Ue=D(),ae&&ae.c(),this.h()},l(q){e=E(q,"DIV",{class:!0});var x=j(e);te&&te.l(x),t=L(x),oe&&oe.l(x),n=L(x),r=E(x,"DIV",{class:!0});var ve=j(r);i=E(ve,"DIV",{"data-svelte-h":!0}),se(i)!=="svelte-ylpshh"&&(i.textContent=a),o=L(ve),l=E(ve,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),c=L(ve),p=E(ve,"SMALL",{class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1n9bipc"&&(p.textContent=h),ve.forEach(_),d=L(x),f=E(x,"DIV",{class:!0});var fe=j(f);m=E(fe,"DIV",{"data-svelte-h":!0}),se(m)!=="svelte-1x8itd0"&&(m.textContent=$),P=L(fe),S=E(fe,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),y=L(fe),k=E(fe,"SMALL",{class:!0,"data-svelte-h":!0}),se(k)!=="svelte-ksdk4v"&&(k.textContent=O),fe.forEach(_),A=L(x),N=E(x,"DIV",{class:!0});var be=j(N);v=E(be,"SMALL",{class:!0});var mt=j(v);Q=G(mt,w),mt.forEach(_),ne=L(be),ue=E(be,"SPAN",{});var Ve=j(ue);H(re.$$.fragment,Ve),Ve.forEach(_),$e=L(be),ie=E(be,"BUTTON",{class:!0});var ze=j(ie);ke=E(ze,"SPAN",{"data-svelte-h":!0}),se(ke)!=="svelte-l126tb"&&(ke.textContent=Se),Ue=L(ze),ae&&ae.l(ze),ze.forEach(_),be.forEach(_),x.forEach(_),this.h()},h(){g(l,"name",u=s[1]+"-name"),g(l,"type","text"),g(l,"class","form-control"),g(l,"placeholder","Person name"),l.disabled=s[3],l.required=!0,ee(l,"is-invalid",s[8]),g(p,"class","fw-lighter fst-italic"),g(r,"class","d-flex flex-column gap-2"),g(S,"name",C=s[1]+"-description"),g(S,"type","text"),g(S,"class","form-control"),g(S,"placeholder","Person description"),S.disabled=s[3],S.required=!0,ee(S,"is-invalid",s[7]),g(k,"class","fw-lighter fst-italic"),g(f,"class","d-flex flex-column gap-2"),g(v,"class",K="fw-lighter fst-italic text-"+s[6].type+" svelte-110pjr"),ee(ue,"d-none",!s[3]),g(ie,"class","btn btn-primary position-relative"),g(N,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),g(e,"class","wrapper d-flex flex-column gap-4")},m(q,x){U(q,e,x),te&&te.m(e,null),b(e,t),oe&&oe.m(e,null),b(e,n),b(e,r),b(r,i),b(r,o),b(r,l),s[14](l),it(l,s[0].name),b(r,c),b(r,p),b(e,d),b(e,f),b(f,m),b(f,P),b(f,S),s[17](S),it(S,s[0].description),b(f,y),b(f,k),b(e,A),b(e,N),b(N,v),b(v,Q),b(N,ne),b(N,ue),F(re,ue,null),b(N,$e),b(N,ie),b(ie,ke),b(ie,Ue),ae&&ae.m(ie,null),X=!0,_e||(gt=[Ae(l,"focus",s[15]),Ae(l,"input",s[16]),Ae(S,"focus",s[18]),Ae(S,"input",s[19]),Ae(ie,"click",s[11])],_e=!0)},p(q,[x]){var ve;q[1]?te?te.p(q,x):(te=jr(q),te.c(),te.m(e,t)):te&&(te.d(1),te=null),(ve=q[2])!=null&&ve.length?oe?oe.p(q,x):(oe=Rr(q),oe.c(),oe.m(e,n)):oe&&(oe.d(1),oe=null),(!X||x&2&&u!==(u=q[1]+"-name"))&&g(l,"name",u),(!X||x&8)&&(l.disabled=q[3]),x&1&&l.value!==q[0].name&&it(l,q[0].name),(!X||x&256)&&ee(l,"is-invalid",q[8]),(!X||x&2&&C!==(C=q[1]+"-description"))&&g(S,"name",C),(!X||x&8)&&(S.disabled=q[3]),x&1&&S.value!==q[0].description&&it(S,q[0].description),(!X||x&128)&&ee(S,"is-invalid",q[7]),(!X||x&64)&&w!==(w=q[6].message+"")&&de(Q,w),(!X||x&64&&K!==(K="fw-lighter fst-italic text-"+q[6].type+" svelte-110pjr"))&&g(v,"class",K),(!X||x&8)&&ee(ue,"d-none",!q[3]),q[9]?ae||(ae=Lr(),ae.c(),ae.m(ie,null)):ae&&(ae.d(1),ae=null)},i(q){X||(I(re.$$.fragment,q),X=!0)},o(q){R(re.$$.fragment,q),X=!1},d(q){q&&_(e),te&&te.d(),oe&&oe.d(),s[14](null),s[17](null),V(re),ae&&ae.d(),_e=!1,ii(gt)}}}function ll(s,e,t){let n,r,i,a,{label:o=""}=e,{presets:l=[]}=e,{participant:u={name:"",description:""}}=e,c=!1,p=u.id,h,d,f={message:"",type:"info"},m={name:"",description:""};const $=w=>{t(0,u={...w,id:p})},P=(w,Q=0,K="info")=>{t(6,f.message=w,f),t(6,f.type=K,f),Q&&setTimeout(()=>{t(6,f.message="",f)},Q)},S=async()=>{if(!n){P("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!p){P("ID is not defined",0,"danger");return}if(!a){let w=[];r&&w.push("Name is invalid"),i&&w.push("Description is invalid"),P(w.join(". ")+".  Please address accordingly.",0,"danger")}if(a)try{P("Saving ..."),t(3,c=!0);const w={description:u.description,member_given_name:u.name};await il(p,w),console.log("Participant updated successfully"),setTimeout(()=>{t(3,c=!1),t(12,m={...u,id:p}),P("Saved",3e3,"success")},800)}catch(w){setTimeout(()=>{t(3,c=!1),console.error("Participant update failed",w),P("Save failed, please reload browser and try again.",7e3,"danger")},800)}};en(async()=>{await Qt(),t(12,m={...u,id:p})});const C=w=>$(w);function y(w){me[w?"unshift":"push"](()=>{h=w,t(4,h)})}const k=()=>h.select();function O(){u.name=this.value,t(0,u)}function A(w){me[w?"unshift":"push"](()=>{d=w,t(5,d)})}const N=()=>d.select();function v(){u.description=this.value,t(0,u)}return s.$$set=w=>{"label"in w&&t(1,o=w.label),"presets"in w&&t(2,l=w.presets),"participant"in w&&t(0,u=w.participant)},s.$$.update=()=>{s.$$.dirty&4097&&t(9,n=m.name!==u.name||m.description!==u.description),s.$$.dirty&1&&t(8,r=u.name===""),s.$$.dirty&1&&t(7,i=u.description===""),s.$$.dirty&1&&(a=!!(p&&u&&u.name.length&&u.description.length))},[u,o,l,c,h,d,f,i,r,n,$,S,m,C,y,k,O,A,N,v]}class pt extends De{constructor(e){super(),Le(this,e,ll,ol,Re,{label:1,presets:2,participant:0})}}const En=at([]);async function cl(s){let e=ot(En);return e.length||(await Ci(),e=ot(En)),e.find(t=>t.id===s)}async function Ci(){const{data:s,error:e}=await xe.from("hymns").select("*");if(e)throw e;return En.set(s),s}async function ul(s,e){const{data:t,error:n}=await xe.from("hymns").update(e).eq("id",s);if(n)throw n;return await Ci(),t}function Ur(s,e,t){const n=s.slice();return n[19]=e[t],n}function Nr(s,e,t){const n=s.slice();return n[19]=e[t],n}function Br(s){let e,t,n,r,i,a,o,l,u,c,p="Check if this hymn is not needed",h,d;return{c(){e=T("div"),t=T("div"),n=T("input"),i=D(),a=T("label"),o=J("None"),u=D(),c=T("small"),c.textContent=p,this.h()},l(f){e=E(f,"DIV",{});var m=j(e);t=E(m,"DIV",{class:!0});var $=j(t);n=E($,"INPUT",{class:!0,type:!0,name:!0}),i=L($),a=E($,"LABEL",{class:!0,for:!0});var P=j(a);o=G(P,"None"),P.forEach(_),$.forEach(_),u=L(m),c=E(m,"SMALL",{class:!0,"data-svelte-h":!0}),se(c)!=="svelte-wg6sd9"&&(c.textContent=p),m.forEach(_),this.h()},h(){g(n,"class","form-check-input"),g(n,"type","checkbox"),g(n,"name",r=s[1]+"-none-check"),g(a,"class","form-check-label"),g(a,"for",l=s[1]+"-none-check"),g(t,"class","form-check"),g(c,"class","fw-lighter fst-italic")},m(f,m){U(f,e,m),b(e,t),b(t,n),n.checked=s[0].blank,b(t,i),b(t,a),b(a,o),b(e,u),b(e,c),h||(d=Ae(n,"change",s[13]),h=!0)},p(f,m){m&2&&r!==(r=f[1]+"-none-check")&&g(n,"name",r),m&513&&(n.checked=f[0].blank),m&2&&l!==(l=f[1]+"-none-check")&&g(a,"for",l)},d(f){f&&_(e),h=!1,d()}}}function Mr(s){let e,t,n="Language",r,i,a,o,l,u,c,p="Hymn",h,d,f,m,$,P=Ie(s[9]),S=[];for(let k=0;k<P.length;k+=1)S[k]=Hr(Nr(s,P,k));let C=Ie(s[8]),y=[];for(let k=0;k<C.length;k+=1)y[k]=Fr(Ur(s,C,k));return{c(){e=T("div"),t=T("div"),t.textContent=n,r=D(),i=T("select"),a=T("option");for(let k=0;k<S.length;k+=1)S[k].c();l=D(),u=T("div"),c=T("div"),c.textContent=p,h=D(),d=T("select");for(let k=0;k<y.length;k+=1)y[k].c();this.h()},l(k){e=E(k,"DIV",{class:!0});var O=j(e);t=E(O,"DIV",{"data-svelte-h":!0}),se(t)!=="svelte-1931fzm"&&(t.textContent=n),r=L(O),i=E(O,"SELECT",{class:!0,"aria-label":!0,name:!0});var A=j(i);a=E(A,"OPTION",{}),j(a).forEach(_);for(let w=0;w<S.length;w+=1)S[w].l(A);A.forEach(_),O.forEach(_),l=L(k),u=E(k,"DIV",{class:!0});var N=j(u);c=E(N,"DIV",{"data-svelte-h":!0}),se(c)!=="svelte-1n25tkw"&&(c.textContent=p),h=L(N),d=E(N,"SELECT",{class:!0,"aria-label":!0,name:!0});var v=j(d);for(let w=0;w<y.length;w+=1)y[w].l(v);v.forEach(_),N.forEach(_),this.h()},h(){a.selected=!0,a.__value="",it(a,a.__value),g(i,"class","form-select"),g(i,"aria-label","Hymn Language"),g(i,"name",o=s[1]+"-language"),i.disabled=s[5],s[0].language===void 0&&pr(()=>s[14].call(i)),ee(i,"is-invalid",s[3]),g(e,"class","d-flex flex-column gap-2"),g(d,"class","form-select"),g(d,"aria-label","Hymn List"),g(d,"name",s[1]),d.disabled=f=s[5]||!s[0].language,s[0].page_number===void 0&&pr(()=>s[15].call(d)),ee(d,"is-invalid",s[4]),g(u,"class","d-flex flex-column gap-2")},m(k,O){U(k,e,O),b(e,t),b(e,r),b(e,i),b(i,a);for(let A=0;A<S.length;A+=1)S[A]&&S[A].m(i,null);Vt(i,s[0].language,!0),U(k,l,O),U(k,u,O),b(u,c),b(u,h),b(u,d);for(let A=0;A<y.length;A+=1)y[A]&&y[A].m(d,null);Vt(d,s[0].page_number,!0),m||($=[Ae(i,"change",s[14]),Ae(d,"change",s[15])],m=!0)},p(k,O){if(O&512){P=Ie(k[9]);let A;for(A=0;A<P.length;A+=1){const N=Nr(k,P,A);S[A]?S[A].p(N,O):(S[A]=Hr(N),S[A].c(),S[A].m(i,null))}for(;A<S.length;A+=1)S[A].d(1);S.length=P.length}if(O&2&&o!==(o=k[1]+"-language")&&g(i,"name",o),O&32&&(i.disabled=k[5]),O&513&&Vt(i,k[0].language),O&8&&ee(i,"is-invalid",k[3]),O&256){C=Ie(k[8]);let A;for(A=0;A<C.length;A+=1){const N=Ur(k,C,A);y[A]?y[A].p(N,O):(y[A]=Fr(N),y[A].c(),y[A].m(d,null))}for(;A<y.length;A+=1)y[A].d(1);y.length=C.length}O&2&&g(d,"name",k[1]),O&545&&f!==(f=k[5]||!k[0].language)&&(d.disabled=f),O&513&&Vt(d,k[0].page_number),O&16&&ee(d,"is-invalid",k[4])},d(k){k&&(_(e),_(l),_(u)),Tt(S,k),Tt(y,k),m=!1,ii($)}}}function Hr(s){let e,t=s[19].label+"",n;return{c(){e=T("option"),n=J(t),this.h()},l(r){e=E(r,"OPTION",{});var i=j(e);n=G(i,t),i.forEach(_),this.h()},h(){e.__value=s[19].value,it(e,e.__value)},m(r,i){U(r,e,i),b(e,n)},p:we,d(r){r&&_(e)}}}function Fr(s){let e,t=s[19].label+"",n,r;return{c(){e=T("option"),n=J(t),this.h()},l(i){e=E(i,"OPTION",{});var a=j(e);n=G(a,t),a.forEach(_),this.h()},h(){e.__value=r=s[19].value,it(e,e.__value)},m(i,a){U(i,e,a),b(e,n)},p(i,a){a&256&&t!==(t=i[19].label+"")&&de(n,t),a&256&&r!==(r=i[19].value)&&(e.__value=r,it(e,e.__value))},d(i){i&&_(e)}}}function Vr(s){let e,t='<span class="visually-hidden">Item not saved</span>';return{c(){e=T("span"),e.innerHTML=t,this.h()},l(n){e=E(n,"SPAN",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1g0a6ie"&&(e.innerHTML=t),this.h()},h(){g(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(n,r){U(n,e,r)},d(n){n&&_(e)}}}function hl(s){let e,t,n,r,i,a=s[6].message+"",o,l,u,c,p,h,d,f,m="Save",$,P,S,C,y=s[2]&&Br(s),k=!s[0].blank&&Mr(s);p=new ai({props:{size:"xs"}});let O=s[7]&&Vr();return{c(){e=T("div"),y&&y.c(),t=D(),k&&k.c(),n=D(),r=T("div"),i=T("small"),o=J(a),u=D(),c=T("span"),M(p.$$.fragment),h=D(),d=T("button"),f=T("span"),f.textContent=m,$=D(),O&&O.c(),this.h()},l(A){e=E(A,"DIV",{class:!0});var N=j(e);y&&y.l(N),t=L(N),k&&k.l(N),n=L(N),r=E(N,"DIV",{class:!0});var v=j(r);i=E(v,"SMALL",{class:!0});var w=j(i);o=G(w,a),w.forEach(_),u=L(v),c=E(v,"SPAN",{});var Q=j(c);H(p.$$.fragment,Q),Q.forEach(_),h=L(v),d=E(v,"BUTTON",{type:!0,class:!0});var K=j(d);f=E(K,"SPAN",{"data-svelte-h":!0}),se(f)!=="svelte-l126tb"&&(f.textContent=m),$=L(K),O&&O.l(K),K.forEach(_),v.forEach(_),N.forEach(_),this.h()},h(){g(i,"class",l="fw-lighter fst-italic text-"+s[6].type),ee(c,"d-none",!s[5]),g(d,"type","button"),g(d,"class","btn btn btn-primary position-relative"),g(r,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),g(e,"class","d-flex flex-column gap-4")},m(A,N){U(A,e,N),y&&y.m(e,null),b(e,t),k&&k.m(e,null),b(e,n),b(e,r),b(r,i),b(i,o),b(r,u),b(r,c),F(p,c,null),b(r,h),b(r,d),b(d,f),b(d,$),O&&O.m(d,null),P=!0,S||(C=Ae(d,"click",s[10]),S=!0)},p(A,[N]){A[2]?y?y.p(A,N):(y=Br(A),y.c(),y.m(e,t)):y&&(y.d(1),y=null),A[0].blank?k&&(k.d(1),k=null):k?k.p(A,N):(k=Mr(A),k.c(),k.m(e,n)),(!P||N&64)&&a!==(a=A[6].message+"")&&de(o,a),(!P||N&64&&l!==(l="fw-lighter fst-italic text-"+A[6].type))&&g(i,"class",l),(!P||N&32)&&ee(c,"d-none",!A[5]),A[7]?O||(O=Vr(),O.c(),O.m(d,null)):O&&(O.d(1),O=null)},i(A){P||(I(p.$$.fragment,A),P=!0)},o(A){R(p.$$.fragment,A),P=!1},d(A){A&&_(e),y&&y.d(),k&&k.d(),V(p),O&&O.d(),S=!1,C()}}}function dl(s,e,t){let n,r,i,a,{hymn:o={page_number:0,language:pe.English}}=e,{name:l=""}=e,{nullable:u=!1}=e,c=o.id,p=!1,h=!1,d={message:"",type:"info"},f={page_number:0,language:pe.English};const m=[{label:"English",value:pe.English},{label:"Tongan",value:pe.Tongan},{label:"Samoan",value:pe.Samoan}];let $=[];const P=(O,A=0,N="info")=>{t(6,d.message=O,d),t(6,d.type=N,d),A&&setTimeout(()=>{t(6,d.message="",d)},A)},S=async()=>{if(!n){P("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!c){P("ID is not defined",0,"danger");return}if(!h){let O=[];i&&O.push("Page number is invalid"),r&&O.push("Language is invalid"),P(O.join(". ")+".  Please address accordingly.",0,"danger");return}try{P("Saving ..."),t(5,p=!0);const O={page_number:o.blank?0:o.page_number,language:o.blank?pe.None:o.language,blank:o.blank};await ul(c,O),console.log("Hymn updated successfully"),setTimeout(()=>{t(5,p=!1),t(11,f={...o,id:c}),P("Saved",3e3,"success")},800)}catch(O){setTimeout(()=>{t(5,p=!1),console.error("Hymn update failed",O),P("Save failed, please reload browser and try again.",7e3,"danger")},800)}};en(async()=>{await Qt(),t(11,f={...o,id:c})});function C(){o.blank=this.checked,t(0,o),t(9,m)}function y(){o.language=gr(this),t(0,o),t(9,m)}function k(){o.page_number=gr(this),t(0,o),t(9,m)}return s.$$set=O=>{"hymn"in O&&t(0,o=O.hymn),"name"in O&&t(1,l=O.name),"nullable"in O&&t(2,u=O.nullable)},s.$$.update=()=>{s.$$.dirty&1&&o.blank&&(t(0,o.page_number=0,o),t(0,o.language=pe.None,o)),s.$$.dirty&2049&&t(7,n=f.page_number!==o.page_number||f.language!==o.language||f.blank!==o.blank),s.$$.dirty&1&&t(3,r=o.language===pe.None),s.$$.dirty&1&&t(4,i=o.page_number===0),s.$$.dirty&25&&(h=o.blank||!!(c&&!o.blank&&!r&&!i)),s.$$.dirty&1&&(o.language===pe.English?t(12,$=Ui):o.language===pe.Samoan?t(12,$=Ni):o.language===pe.Tongan&&t(12,$=Bi)),s.$$.dirty&4096&&t(8,a=$.map(O=>({label:`${O.page}. ${O.title}`,value:O.page})))},[o,l,u,r,i,p,d,n,a,m,S,f,$,C,y,k]}class cn extends De{constructor(e){super(),Le(this,e,dl,hl,Re,{hymn:0,name:1,nullable:2})}}const ge={bishopric:[{name:"Bishop Tevita Finau",description:"Bishop, Lehi 31st Tongan Ward"},{name:"Brother Kelii Unga",description:"Bishopric 1st Counselor"},{name:"Brother Vaka Tuifua",description:"Bishopric 2nd Counselor"}],eldersQuorum:[{name:"Brother Sione Brown",description:"Elders Quorum President"}],member:[{name:"TBD",description:"Ward Member"},{name:"TBD",description:"Ward Youth Member"},{name:"TBD",description:"Ward Primary Member"}],chorister:[{name:"Brother Filipe Mausia",description:"Ward Chorister"},{name:"TBD",description:"Ward Member"},{name:"TBD",description:"Ward Youth Member"}],organist:[{name:"Sister Sarah Fotu",description:"Ward Organist"},{name:"TBD",description:"Ward Member"},{name:"TBD",description:"Ward Youth Member"}],stake:[{name:"President Richard Paongo",description:"Stake President, Lehi Utah 3rd Stake"},{name:"President Fotu Moeai",description:"Stake Presidency 1st Counselor, Lehi Utah 3rd Stake"},{name:"President Bernard Fano",description:"Stake Presidency 2nd Counselor, Lehi Utah 3rd Stake"}],stakeHighCouncilor:[{name:"TBD",description:"Stake High Councilor"},{name:"TBD",description:"Stake High Councilor, Wife"},{name:"TBD",description:"Stake High Councilor, Family Member"}]},At={presiding:[...ge.bishopric,...ge.eldersQuorum,...ge.stake],conducting:[...ge.bishopric,...ge.eldersQuorum],chorister:[...ge.chorister],organist:[...ge.organist],prayer:[...ge.member]},qr={name:"TBD",description:"Ward Member"},fl=at([]);async function pl(s){const{data:e,error:t}=await xe.from("sacrament_participants").insert([s]).select();if(t)throw t;return await Dn(),e[0]}async function Dn(){const{data:s,error:e}=await xe.from("sacrament_participants").select("*");if(e)throw e;return fl.set(s),s}async function gl(s,e){const{data:t,error:n}=await xe.from("sacrament_participants").delete().match({sacrament_program_id:s,participant_id:e});if(n)throw n;return await Dn(),t}const ut=async s=>{if(!s)return;const e=await rl(s);if(e)return{id:e.id,name:e.member_given_name,description:e.description}},Zt=async(s,e)=>{const t=await Dn();if(!t)return[];const n=t.filter(i=>i.sacrament_program_id===s&&i.position===e).sort((i,a)=>a.sort_index-i.sort_index);return await(async i=>new Promise(a=>{const o=[];i.forEach(async l=>{const u=await ut(l.participant_id);u&&o.push(u)}),a(o)}))(n)},Gt=async s=>{if(!s)return;const e=await cl(s);if(e)return{id:e.id,language:e.language,page_number:e.page_number,blank:e.blank}};function xr(s,e,t){const n=s.slice();return n[11]=e[t],n[12]=e,n[13]=t,n}function ml(s){let e,t,n,r,i="No Participants",a,o=Ie(s[0]),l=[];for(let c=0;c<o.length;c+=1)l[c]=zr(xr(s,o,c));const u=c=>R(l[c],1,1,()=>{l[c]=null});return{c(){e=T("div"),t=T("div");for(let c=0;c<l.length;c+=1)l[c].c();n=D(),r=T("div"),r.textContent=i,this.h()},l(c){e=E(c,"DIV",{class:!0});var p=j(e);t=E(p,"DIV",{class:!0});var h=j(t);for(let d=0;d<l.length;d+=1)l[d].l(h);h.forEach(_),n=L(p),r=E(p,"DIV",{class:!0,"data-svelte-h":!0}),se(r)!=="svelte-1fxjuvd"&&(r.textContent=i),p.forEach(_),this.h()},h(){g(t,"class","flex-column gap-3"),ee(t,"d-none",s[0].length===0),ee(t,"d-flex",s[0].length>0),g(r,"class","bg-body-tertiary p-3"),ee(r,"d-none",s[0].length>0),ee(r,"d-block",s[0].length===0),g(e,"class","d-flex flex-column gap-2")},m(c,p){U(c,e,p),b(e,t);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);b(e,n),b(e,r),a=!0},p(c,p){if(p&17){o=Ie(c[0]);let h;for(h=0;h<o.length;h+=1){const d=xr(c,o,h);l[h]?(l[h].p(d,p),I(l[h],1)):(l[h]=zr(d),l[h].c(),I(l[h],1),l[h].m(t,null))}for(Ge(),h=o.length;h<l.length;h+=1)u(h);Ke()}(!a||p&1)&&ee(t,"d-none",c[0].length===0),(!a||p&1)&&ee(t,"d-flex",c[0].length>0),(!a||p&1)&&ee(r,"d-none",c[0].length>0),(!a||p&1)&&ee(r,"d-block",c[0].length===0)},i(c){if(!a){for(let p=0;p<o.length;p+=1)I(l[p]);a=!0}},o(c){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)R(l[p]);a=!1},d(c){c&&_(e),Tt(l,c)}}}function _l(s){let e,t="loading ...";return{c(){e=T("div"),e.textContent=t},l(n){e=E(n,"DIV",{"data-svelte-h":!0}),se(e)!=="svelte-wbl9i4"&&(e.textContent=t)},m(n,r){U(n,e,r)},p:we,i:we,o:we,d(n){n&&_(e)}}}function zr(s){let e,t,n,r='<i class="bi bi-dash-circle"></i>',i,a,o,l,u,c,p;function h(){return s[8](s[13])}function d(m){s[9](m,s[11],s[12],s[13])}let f={label:"Participant",presets:ge.member};return s[11]!==void 0&&(f.participant=s[11]),a=new pt({props:f}),me.push(()=>Pe(a,"participant",d)),{c(){e=T("div"),t=T("div"),n=T("div"),n.innerHTML=r,i=D(),M(a.$$.fragment),l=D(),this.h()},l(m){e=E(m,"DIV",{class:!0});var $=j(e);t=E($,"DIV",{class:!0});var P=j(t);n=E(P,"DIV",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1pludxh"&&(n.innerHTML=r),P.forEach(_),i=L($),H(a.$$.fragment,$),l=L($),$.forEach(_),this.h()},h(){g(n,"class","cursor-pointer text-danger-emphasis svelte-110pjr"),g(t,"class","d-flex align-items-start"),g(e,"class","d-flex flex-row gap-2")},m(m,$){U(m,e,$),b(e,t),b(t,n),b(e,i),F(a,e,null),b(e,l),u=!0,c||(p=Ae(n,"click",h),c=!0)},p(m,$){s=m;const P={};!o&&$&1&&(o=!0,P.participant=s[11],Ee(()=>o=!1)),a.$set(P)},i(m){u||(I(a.$$.fragment,m),u=!0)},o(m){R(a.$$.fragment,m),u=!1},d(m){m&&_(e),V(a),c=!1,p()}}}function vl(s){let e,t,n,r,i,a,o,l='<i class="bi bi-plus-circle"></i>',u,c,p,h,d,f;const m=[_l,ml],$=[];function P(S,C){return S[2]?0:1}return c=P(s),p=$[c]=m[c](s),{c(){e=T("div"),t=T("div"),n=T("div"),r=J(s[1]),i=D(),a=T("div"),o=T("div"),o.innerHTML=l,u=D(),p.c(),this.h()},l(S){e=E(S,"DIV",{class:!0});var C=j(e);t=E(C,"DIV",{class:!0});var y=j(t);n=E(y,"DIV",{});var k=j(n);r=G(k,s[1]),k.forEach(_),i=L(y),a=E(y,"DIV",{});var O=j(a);o=E(O,"DIV",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-1wr1uov"&&(o.innerHTML=l),O.forEach(_),y.forEach(_),u=L(C),p.l(C),C.forEach(_),this.h()},h(){g(o,"class","cursor-pointer text-success-emphasis svelte-110pjr"),g(t,"class","d-flex justify-content-between"),g(e,"class","d-flex flex-column gap-2")},m(S,C){U(S,e,C),b(e,t),b(t,n),b(n,r),b(t,i),b(t,a),b(a,o),b(e,u),$[c].m(e,null),h=!0,d||(f=Ae(o,"click",s[3]),d=!0)},p(S,[C]){(!h||C&2)&&de(r,S[1]);let y=c;c=P(S),c===y?$[c].p(S,C):(Ge(),R($[y],1,1,()=>{$[y]=null}),Ke(),p=$[c],p?p.p(S,C):(p=$[c]=m[c](S),p.c()),I(p,1),p.m(e,null))},i(S){h||(I(p),h=!0)},o(S){R(p),h=!1},d(S){S&&_(e),$[c].d(),d=!1,f()}}}function bl(s,e,t){let{sacramentProgramId:n=0}=e,{participants:r=[]}=e,{position:i="after-rest-hymn"}=e,{label:a=""}=e,{max:o=10}=e,l=!1;const u=async()=>{if(r.length>=o)return;t(2,l=!0);const f={description:qr.description,member_given_name:qr.name},m=await sl(f);if(!(m!=null&&m.id))return;const $={sacrament_program_id:n,participant_id:m.id,position:i,sort_index:r.length};await pl($),t(0,r=await Zt(n,i)),await Qt(),t(2,l=!1)},c=async f=>{t(2,l=!0);const m=r[f];m!=null&&m.id&&(await gl(n,m.id),await al(m.id),t(0,r=await Zt(n,i)),await Qt(),t(2,l=!1))},p=f=>{console.log("### index",f),c(f)},h=f=>p(f);function d(f,m,$,P){$[P]=f,t(0,r)}return s.$$set=f=>{"sacramentProgramId"in f&&t(5,n=f.sacramentProgramId),"participants"in f&&t(0,r=f.participants),"position"in f&&t(6,i=f.position),"label"in f&&t(1,a=f.label),"max"in f&&t(7,o=f.max)},[r,a,l,u,p,n,i,o,h,d]}class Ii extends De{constructor(e){super(),Le(this,e,bl,vl,Re,{sacramentProgramId:5,participants:0,position:6,label:1,max:7})}}const Pn=at([]);async function yl(){const{data:s,error:e}=await xe.from("sacrament_programs").select("*");if(e)throw e;return Pn.set(s),s}async function wl(s){let e=ot(Pn);return e.length||(await yl(),e=ot(Pn)),e.find(t=>t.id===s)}let rt=null;const $l={date:"2024-02-22",start_time:"12:00",testimony_sunday:!1,presiding_participant:ge.bishopric[0],conducting_participant:ge.bishopric[0],chorister_participant:ge.chorister[0],organist_participant:ge.organist[0],invocation_participant:ge.member[0],opening_hymn:{language:pe.English,page_number:2},sacrament_hymn:{language:pe.English,page_number:121},participants_before_rest_hymn:[],rest_hymn:{language:pe.English,page_number:9},participants_after_rest_hymn:[],closing_hymn:{language:pe.Tongan,page_number:27},benediction_participant:ge.member[0]},kl={date:"",start_time:"12:00:00",testimony_sunday:!1},Sl=()=>{const s=at(!1),e=at($l),t=at(kl);return rt={stores:{ready:s,form:e,sacrament:t},actions:{init:async()=>{s.set(!1);const r=1,i=await wl(r);if(i){t.set(i);const a=await ut(i.presiding_participant_id),o=await ut(i.conducting_participant_id),l=await ut(i.chorister_participant_id),u=await ut(i.organist_participant_id),c=await ut(i.invocation_participant_id),p=await ut(i.benediction_participant_id),h=await Zt(r,"before-rest-hymn"),d=await Zt(r,"after-rest-hymn"),f=await Gt(i.opening_hymn_id),m=await Gt(i.sacrament_hymn_id),$=await Gt(i.rest_hymn_id),P=await Gt(i.closing_hymn_id),S={id:i.id,date:i.date,start_time:i.start_time,testimony_sunday:i.testimony_sunday,presiding_participant:a,conducting_participant:o,chorister_participant:l,organist_participant:u,invocation_participant:c,benediction_participant:p,participants_before_rest_hymn:h,participants_after_rest_hymn:d,opening_hymn:f,sacrament_hymn:m,rest_hymn:$,closing_hymn:P};e.set(S)}setTimeout(()=>s.set(!0),500)}}},rt},Tl=()=>(rt==null?void 0:rt.stores)&&Object.keys(rt.stores).length>0?rt:Sl(),El=()=>{rt=null};function Pl(s){let e,t;const n=s[2].default,r=wt(n,s,s[1],null);return{c(){e=T("div"),r&&r.c(),this.h()},l(i){e=E(i,"DIV",{class:!0,id:!0});var a=j(e);r&&r.l(a),a.forEach(_),this.h()},h(){g(e,"class","accordion"),g(e,"id",s[0])},m(i,a){U(i,e,a),r&&r.m(e,null),t=!0},p(i,[a]){r&&r.p&&(!t||a&2)&&$t(r,n,i,i[1],t?St(n,i[1],a,null):kt(i[1]),null),(!t||a&1)&&g(e,"id",i[0])},i(i){t||(I(r,i),t=!0)},o(i){R(r,i),t=!1},d(i){i&&_(e),r&&r.d(i)}}}function Ol(s,e,t){let{$$slots:n={},$$scope:r}=e,{id:i="random"}=e;return s.$$set=a=>{"id"in a&&t(0,i=a.id),"$$scope"in a&&t(1,r=a.$$scope)},[i,r,n]}class Al extends De{constructor(e){super(),Le(this,e,Ol,Pl,Re,{id:0})}}const Cl=s=>({}),Jr=s=>({}),Il=s=>({}),Gr=s=>({});function jl(s){let e,t,n,r,i,a,o,l;const u=s[2].heading,c=wt(u,s,s[1],Gr),p=s[2].body,h=wt(p,s,s[1],Jr);return{c(){e=T("div"),t=T("h2"),n=T("button"),c&&c.c(),i=D(),a=T("div"),o=T("div"),h&&h.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var f=j(e);t=E(f,"H2",{class:!0});var m=j(t);n=E(m,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-expanded":!0,"aria-controls":!0});var $=j(n);c&&c.l($),$.forEach(_),m.forEach(_),i=L(f),a=E(f,"DIV",{id:!0,class:!0});var P=j(a);o=E(P,"DIV",{class:!0});var S=j(o);h&&h.l(S),S.forEach(_),P.forEach(_),f.forEach(_),this.h()},h(){g(n,"class","accordion-button collapsed"),g(n,"type","button"),g(n,"data-bs-toggle","collapse"),g(n,"data-bs-target",r="#"+s[0]),g(n,"aria-expanded","false"),g(n,"aria-controls",s[0]),g(t,"class","accordion-header"),g(o,"class","accordion-body"),g(a,"id",s[0]),g(a,"class","accordion-collapse collapse"),g(e,"class","accordion-item")},m(d,f){U(d,e,f),b(e,t),b(t,n),c&&c.m(n,null),b(e,i),b(e,a),b(a,o),h&&h.m(o,null),l=!0},p(d,[f]){c&&c.p&&(!l||f&2)&&$t(c,u,d,d[1],l?St(u,d[1],f,Il):kt(d[1]),Gr),(!l||f&1&&r!==(r="#"+d[0]))&&g(n,"data-bs-target",r),(!l||f&1)&&g(n,"aria-controls",d[0]),h&&h.p&&(!l||f&2)&&$t(h,p,d,d[1],l?St(p,d[1],f,Cl):kt(d[1]),Jr),(!l||f&1)&&g(a,"id",d[0])},i(d){l||(I(c,d),I(h,d),l=!0)},o(d){R(c,d),R(h,d),l=!1},d(d){d&&_(e),c&&c.d(d),h&&h.d(d)}}}function Rl(s,e,t){let{$$slots:n={},$$scope:r}=e,{id:i="random"}=e;return s.$$set=a=>{"id"in a&&t(0,i=a.id),"$$scope"in a&&t(1,r=a.$$scope)},[i,r,n]}class Oe extends De{constructor(e){super(),Le(this,e,Rl,jl,Re,{id:0})}}function Kr(s){let e,t,n;return t=new Al({props:{id:"sacrament-form",$$slots:{default:[rc]},$$scope:{ctx:s}}}),{c(){e=T("div"),M(t.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0});var i=j(e);H(t.$$.fragment,i),i.forEach(_),this.h()},h(){g(e,"class","d-flex flex-column gap-4")},m(r,i){U(r,e,i),F(t,e,null),n=!0},p(r,i){const a={};i&131074&&(a.$$scope={dirty:i,ctx:r}),t.$set(a)},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){R(t.$$.fragment,r),n=!1},d(r){r&&_(e),V(t)}}}function Dl(s){let e;return{c(){e=J("Presiding")},l(t){e=G(t,"Presiding")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Ll(s){let e,t,n;function r(a){s[4](a)}let i={label:"Presiding",presets:At.presiding};return s[1].presiding_participant!==void 0&&(i.participant=s[1].presiding_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].presiding_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Ul(s){let e;return{c(){e=J("Conducting")},l(t){e=G(t,"Conducting")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Nl(s){let e,t,n;function r(a){s[5](a)}let i={label:"Conducting",presets:At.conducting};return s[1].conducting_participant!==void 0&&(i.participant=s[1].conducting_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].conducting_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Bl(s){let e;return{c(){e=J("Chorister")},l(t){e=G(t,"Chorister")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Ml(s){let e,t,n;function r(a){s[6](a)}let i={label:"Chorister",presets:At.chorister};return s[1].chorister_participant!==void 0&&(i.participant=s[1].chorister_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].chorister_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Hl(s){let e;return{c(){e=J("Organist")},l(t){e=G(t,"Organist")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Fl(s){let e,t,n;function r(a){s[7](a)}let i={label:"Organist",presets:At.organist};return s[1].organist_participant!==void 0&&(i.participant=s[1].organist_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].organist_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Vl(s){let e;return{c(){e=J("Opening Hymn")},l(t){e=G(t,"Opening Hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function ql(s){let e,t,n;function r(a){s[8](a)}let i={name:"sacrament-form-opening-hymn"};return s[1].opening_hymn!==void 0&&(i.hymn=s[1].opening_hymn),e=new cn({props:i}),me.push(()=>Pe(e,"hymn",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.hymn=a[1].opening_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function xl(s){let e;return{c(){e=J("Invocation")},l(t){e=G(t,"Invocation")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function zl(s){let e,t,n;function r(a){s[9](a)}let i={label:"Invocation",presets:At.prayer};return s[1].invocation_participant!==void 0&&(i.participant=s[1].invocation_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].invocation_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Jl(s){let e;return{c(){e=J("Sacrament Hymn")},l(t){e=G(t,"Sacrament Hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Gl(s){let e,t,n;function r(a){s[10](a)}let i={name:"sacrament-form-sacrament-hymn"};return s[1].sacrament_hymn!==void 0&&(i.hymn=s[1].sacrament_hymn),e=new cn({props:i}),me.push(()=>Pe(e,"hymn",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.hymn=a[1].sacrament_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Kl(s){let e;return{c(){e=J("Participants before rest hymn")},l(t){e=G(t,"Participants before rest hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Wl(s){let e,t,n;function r(a){s[11](a)}let i={label:"Participants before rest hymn",position:"before-rest-hymn",sacramentProgramId:1};return s[1].participants_before_rest_hymn!==void 0&&(i.participants=s[1].participants_before_rest_hymn),e=new Ii({props:i}),me.push(()=>Pe(e,"participants",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participants=a[1].participants_before_rest_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Ql(s){let e;return{c(){e=J("Rest Hymn")},l(t){e=G(t,"Rest Hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Yl(s){let e,t,n;function r(a){s[12](a)}let i={name:"sacrament-form-rest-hymn",nullable:!0};return s[1].rest_hymn!==void 0&&(i.hymn=s[1].rest_hymn),e=new cn({props:i}),me.push(()=>Pe(e,"hymn",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.hymn=a[1].rest_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function Xl(s){let e;return{c(){e=J("Participants after rest hymn")},l(t){e=G(t,"Participants after rest hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function Zl(s){let e,t,n;function r(a){s[13](a)}let i={label:"Participants after rest hymn",position:"after-rest-hymn",sacramentProgramId:1};return s[1].participants_after_rest_hymn!==void 0&&(i.participants=s[1].participants_after_rest_hymn),e=new Ii({props:i}),me.push(()=>Pe(e,"participants",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participants=a[1].participants_after_rest_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function ec(s){let e;return{c(){e=J("Closing Hymn")},l(t){e=G(t,"Closing Hymn")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function tc(s){let e,t,n;function r(a){s[14](a)}let i={name:"sacrament-form-closing-hymn"};return s[1].closing_hymn!==void 0&&(i.hymn=s[1].closing_hymn),e=new cn({props:i}),me.push(()=>Pe(e,"hymn",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.hymn=a[1].closing_hymn,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function nc(s){let e;return{c(){e=J("Benediction")},l(t){e=G(t,"Benediction")},m(t,n){U(t,e,n)},d(t){t&&_(e)}}}function sc(s){let e,t,n;function r(a){s[15](a)}let i={label:"Benediction",presets:At.prayer};return s[1].benediction_participant!==void 0&&(i.participant=s[1].benediction_participant),e=new pt({props:i}),me.push(()=>Pe(e,"participant",r)),{c(){M(e.$$.fragment)},l(a){H(e.$$.fragment,a)},m(a,o){F(e,a,o),n=!0},p(a,o){const l={};!t&&o&2&&(t=!0,l.participant=a[1].benediction_participant,Ee(()=>t=!1)),e.$set(l)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){V(e,a)}}}function rc(s){let e,t,n,r,i,a,o,l,u,c,p,h,d,f,m,$,P,S,C,y,k,O,A,N;return e=new Oe({props:{id:"presiding",$$slots:{body:[Ll],heading:[Dl]},$$scope:{ctx:s}}}),n=new Oe({props:{id:"conducting",$$slots:{body:[Nl],heading:[Ul]},$$scope:{ctx:s}}}),i=new Oe({props:{id:"chorister",$$slots:{body:[Ml],heading:[Bl]},$$scope:{ctx:s}}}),o=new Oe({props:{id:"organist",$$slots:{body:[Fl],heading:[Hl]},$$scope:{ctx:s}}}),u=new Oe({props:{id:"opening-hymn",$$slots:{body:[ql],heading:[Vl]},$$scope:{ctx:s}}}),p=new Oe({props:{id:"invocation",$$slots:{body:[zl],heading:[xl]},$$scope:{ctx:s}}}),d=new Oe({props:{id:"sacrament-hymn",$$slots:{body:[Gl],heading:[Jl]},$$scope:{ctx:s}}}),m=new Oe({props:{id:"participants-before-rest-hymn",$$slots:{body:[Wl],heading:[Kl]},$$scope:{ctx:s}}}),P=new Oe({props:{id:"rest-hymn",$$slots:{body:[Yl],heading:[Ql]},$$scope:{ctx:s}}}),C=new Oe({props:{id:"participants-after-rest-hymn",$$slots:{body:[Zl],heading:[Xl]},$$scope:{ctx:s}}}),k=new Oe({props:{id:"closing-hymn",$$slots:{body:[tc],heading:[ec]},$$scope:{ctx:s}}}),A=new Oe({props:{id:"benediction",$$slots:{body:[sc],heading:[nc]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment),t=D(),M(n.$$.fragment),r=D(),M(i.$$.fragment),a=D(),M(o.$$.fragment),l=D(),M(u.$$.fragment),c=D(),M(p.$$.fragment),h=D(),M(d.$$.fragment),f=D(),M(m.$$.fragment),$=D(),M(P.$$.fragment),S=D(),M(C.$$.fragment),y=D(),M(k.$$.fragment),O=D(),M(A.$$.fragment)},l(v){H(e.$$.fragment,v),t=L(v),H(n.$$.fragment,v),r=L(v),H(i.$$.fragment,v),a=L(v),H(o.$$.fragment,v),l=L(v),H(u.$$.fragment,v),c=L(v),H(p.$$.fragment,v),h=L(v),H(d.$$.fragment,v),f=L(v),H(m.$$.fragment,v),$=L(v),H(P.$$.fragment,v),S=L(v),H(C.$$.fragment,v),y=L(v),H(k.$$.fragment,v),O=L(v),H(A.$$.fragment,v)},m(v,w){F(e,v,w),U(v,t,w),F(n,v,w),U(v,r,w),F(i,v,w),U(v,a,w),F(o,v,w),U(v,l,w),F(u,v,w),U(v,c,w),F(p,v,w),U(v,h,w),F(d,v,w),U(v,f,w),F(m,v,w),U(v,$,w),F(P,v,w),U(v,S,w),F(C,v,w),U(v,y,w),F(k,v,w),U(v,O,w),F(A,v,w),N=!0},p(v,w){const Q={};w&131074&&(Q.$$scope={dirty:w,ctx:v}),e.$set(Q);const K={};w&131074&&(K.$$scope={dirty:w,ctx:v}),n.$set(K);const ne={};w&131074&&(ne.$$scope={dirty:w,ctx:v}),i.$set(ne);const ue={};w&131074&&(ue.$$scope={dirty:w,ctx:v}),o.$set(ue);const re={};w&131074&&(re.$$scope={dirty:w,ctx:v}),u.$set(re);const $e={};w&131074&&($e.$$scope={dirty:w,ctx:v}),p.$set($e);const ie={};w&131074&&(ie.$$scope={dirty:w,ctx:v}),d.$set(ie);const ke={};w&131074&&(ke.$$scope={dirty:w,ctx:v}),m.$set(ke);const Se={};w&131074&&(Se.$$scope={dirty:w,ctx:v}),P.$set(Se);const Ue={};w&131074&&(Ue.$$scope={dirty:w,ctx:v}),C.$set(Ue);const X={};w&131074&&(X.$$scope={dirty:w,ctx:v}),k.$set(X);const _e={};w&131074&&(_e.$$scope={dirty:w,ctx:v}),A.$set(_e)},i(v){N||(I(e.$$.fragment,v),I(n.$$.fragment,v),I(i.$$.fragment,v),I(o.$$.fragment,v),I(u.$$.fragment,v),I(p.$$.fragment,v),I(d.$$.fragment,v),I(m.$$.fragment,v),I(P.$$.fragment,v),I(C.$$.fragment,v),I(k.$$.fragment,v),I(A.$$.fragment,v),N=!0)},o(v){R(e.$$.fragment,v),R(n.$$.fragment,v),R(i.$$.fragment,v),R(o.$$.fragment,v),R(u.$$.fragment,v),R(p.$$.fragment,v),R(d.$$.fragment,v),R(m.$$.fragment,v),R(P.$$.fragment,v),R(C.$$.fragment,v),R(k.$$.fragment,v),R(A.$$.fragment,v),N=!1},d(v){v&&(_(t),_(r),_(a),_(l),_(c),_(h),_(f),_($),_(S),_(y),_(O)),V(e,v),V(n,v),V(i,v),V(o,v),V(u,v),V(p,v),V(d,v),V(m,v),V(P,v),V(C,v),V(k,v),V(A,v)}}}function ic(s){let e,t,n=s[0]&&Kr(s);return{c(){n&&n.c(),e=Yt()},l(r){n&&n.l(r),e=Yt()},m(r,i){n&&n.m(r,i),U(r,e,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&I(n,1)):(n=Kr(r),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(Ge(),R(n,1,1,()=>{n=null}),Ke())},i(r){t||(I(n),t=!0)},o(r){R(n),t=!1},d(r){r&&_(e),n&&n.d(r)}}}function ac(s,e,t){let n,r;const{stores:{ready:i,form:a},actions:{init:o}}=Tl();_n(s,i,y=>t(0,n=y)),_n(s,a,y=>t(1,r=y)),en(async()=>{await o()}),Ri(El);function l(y){s.$$.not_equal(r.presiding_participant,y)&&(r.presiding_participant=y,a.set(r))}function u(y){s.$$.not_equal(r.conducting_participant,y)&&(r.conducting_participant=y,a.set(r))}function c(y){s.$$.not_equal(r.chorister_participant,y)&&(r.chorister_participant=y,a.set(r))}function p(y){s.$$.not_equal(r.organist_participant,y)&&(r.organist_participant=y,a.set(r))}function h(y){s.$$.not_equal(r.opening_hymn,y)&&(r.opening_hymn=y,a.set(r))}function d(y){s.$$.not_equal(r.invocation_participant,y)&&(r.invocation_participant=y,a.set(r))}function f(y){s.$$.not_equal(r.sacrament_hymn,y)&&(r.sacrament_hymn=y,a.set(r))}function m(y){s.$$.not_equal(r.participants_before_rest_hymn,y)&&(r.participants_before_rest_hymn=y,a.set(r))}function $(y){s.$$.not_equal(r.rest_hymn,y)&&(r.rest_hymn=y,a.set(r))}function P(y){s.$$.not_equal(r.participants_after_rest_hymn,y)&&(r.participants_after_rest_hymn=y,a.set(r))}function S(y){s.$$.not_equal(r.closing_hymn,y)&&(r.closing_hymn=y,a.set(r))}function C(y){s.$$.not_equal(r.benediction_participant,y)&&(r.benediction_participant=y,a.set(r))}return[n,r,i,a,l,u,c,p,h,d,f,m,$,P,S,C]}class oc extends De{constructor(e){super(),Le(this,e,ac,ic,Re,{})}}var he=[];for(var mn=0;mn<256;++mn)he.push((mn+256).toString(16).slice(1));function lc(s,e=0){return(he[s[e+0]]+he[s[e+1]]+he[s[e+2]]+he[s[e+3]]+"-"+he[s[e+4]]+he[s[e+5]]+"-"+he[s[e+6]]+he[s[e+7]]+"-"+he[s[e+8]]+he[s[e+9]]+"-"+he[s[e+10]]+he[s[e+11]]+he[s[e+12]]+he[s[e+13]]+he[s[e+14]]+he[s[e+15]]).toLowerCase()}var Kt,cc=new Uint8Array(16);function uc(){if(!Kt&&(Kt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Kt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kt(cc)}var hc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Wr={randomUUID:hc};function dc(s,e,t){if(Wr.randomUUID&&!e&&!s)return Wr.randomUUID();s=s||{};var n=s.random||(s.rng||uc)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,lc(n)}function fc(s){let e,t,n,r,i,a,o,l,u,c,p;const h=s[8].default,d=wt(h,s,s[7],null);return{c(){e=T("div"),t=T("div"),n=T("h4"),r=J(s[1]),i=D(),a=T("button"),l=D(),u=T("div"),d&&d.c(),this.h()},l(f){e=E(f,"DIV",{class:!0,tabindex:!0,id:!0,"aria-labelledby":!0});var m=j(e);t=E(m,"DIV",{class:!0});var $=j(t);n=E($,"H4",{class:!0,id:!0});var P=j(n);r=G(P,s[1]),P.forEach(_),i=L($),a=E($,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-bs-target":!0,"aria-label":!0}),j(a).forEach(_),$.forEach(_),l=L(m),u=E(m,"DIV",{class:!0});var S=j(u);d&&d.l(S),S.forEach(_),m.forEach(_),this.h()},h(){g(n,"class","offcanvas-title"),g(n,"id",s[4]),g(a,"type","button"),g(a,"class","btn-close"),g(a,"data-bs-dismiss","offcanvas"),g(a,"data-bs-target",o="#"+s[0]),g(a,"aria-label","Close"),g(t,"class","offcanvas-header"),g(u,"class","offcanvas-body"),g(e,"class",c=s[3]+" "+s[2]),g(e,"tabindex","-1"),g(e,"id",s[0]),g(e,"aria-labelledby",s[4])},m(f,m){U(f,e,m),b(e,t),b(t,n),b(n,r),b(t,i),b(t,a),b(e,l),b(e,u),d&&d.m(u,null),p=!0},p(f,[m]){(!p||m&2)&&de(r,f[1]),(!p||m&1&&o!==(o="#"+f[0]))&&g(a,"data-bs-target",o),d&&d.p&&(!p||m&128)&&$t(d,h,f,f[7],p?St(h,f[7],m,null):kt(f[7]),null),(!p||m&12&&c!==(c=f[3]+" "+f[2]))&&g(e,"class",c),(!p||m&1)&&g(e,"id",f[0])},i(f){p||(I(d,f),p=!0)},o(f){R(d,f),p=!1},d(f){f&&_(e),d&&d.d(f)}}}function pc(s,e,t){let n,r,{$$slots:i={},$$scope:a}=e,{id:o}=e,{title:l}=e,{breakpoint:u=""}=e,{placement:c="end"}=e;const p=dc();return s.$$set=h=>{"id"in h&&t(0,o=h.id),"title"in h&&t(1,l=h.title),"breakpoint"in h&&t(5,u=h.breakpoint),"placement"in h&&t(6,c=h.placement),"$$scope"in h&&t(7,a=h.$$scope)},s.$$.update=()=>{s.$$.dirty&32&&t(3,n=`offcanvas${u===""?"":"-"+u}`),s.$$.dirty&64&&t(2,r=`offcanvas-${c}`)},[o,l,r,n,p,u,c,a,i]}class gc extends De{constructor(e){super(),Le(this,e,pc,fc,Re,{id:0,title:1,breakpoint:5,placement:6})}}const mc=s=>({}),Qr=s=>({});function _c(s){let e;const t=s[2].default,n=wt(t,s,s[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,i){n&&n.m(r,i),e=!0},p(r,i){n&&n.p&&(!e||i&8)&&$t(n,t,r,r[3],e?St(t,r[3],i,null):kt(r[3]),null)},i(r){e||(I(n,r),e=!0)},o(r){R(n,r),e=!1},d(r){n&&n.d(r)}}}function vc(s){let e,t,n,r,i;const a=s[2].label,o=wt(a,s,s[3],Qr);return r=new gc({props:{title:s[1],id:s[0],$$slots:{default:[_c]},$$scope:{ctx:s}}}),{c(){e=T("button"),o&&o.c(),n=D(),M(r.$$.fragment),this.h()},l(l){e=E(l,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var u=j(e);o&&o.l(u),u.forEach(_),n=L(l),H(r.$$.fragment,l),this.h()},h(){g(e,"class","btn btn-secondary"),g(e,"type","button"),g(e,"data-bs-toggle","offcanvas"),g(e,"data-bs-target",t="#"+s[0]),g(e,"aria-controls",s[0])},m(l,u){U(l,e,u),o&&o.m(e,null),U(l,n,u),F(r,l,u),i=!0},p(l,[u]){o&&o.p&&(!i||u&8)&&$t(o,a,l,l[3],i?St(a,l[3],u,mc):kt(l[3]),Qr),(!i||u&1&&t!==(t="#"+l[0]))&&g(e,"data-bs-target",t),(!i||u&1)&&g(e,"aria-controls",l[0]);const c={};u&2&&(c.title=l[1]),u&1&&(c.id=l[0]),u&8&&(c.$$scope={dirty:u,ctx:l}),r.$set(c)},i(l){i||(I(o,l),I(r.$$.fragment,l),i=!0)},o(l){R(o,l),R(r.$$.fragment,l),i=!1},d(l){l&&(_(e),_(n)),o&&o.d(l),V(r,l)}}}function bc(s,e,t){let{$$slots:n={},$$scope:r}=e,{id:i=""}=e,{drawerTitle:a=""}=e;return s.$$set=o=>{"id"in o&&t(0,i=o.id),"drawerTitle"in o&&t(1,a=o.drawerTitle),"$$scope"in o&&t(3,r=o.$$scope)},[i,a,n,r]}class yc extends De{constructor(e){super(),Le(this,e,bc,vc,Re,{id:0,drawerTitle:1})}}var ji=(s=>(s.EditSacramentProgram="edit-sacrament-program",s))(ji||{});const wc=[{name:"edit-sacrament-program",roles:[Vi.Root],on:!0}],{stores:{currentUser:$c}}=oi();let He=null;const kc=()=>{const s=at(wc);return He={stores:{featureFlags:s},actions:{featureIsEnabled:t=>{const r=ot(s).find(l=>l.name===t);if(!r)return!1;const a=ot($c).role;return!!r.roles.find(l=>l===a)&&r.on}}},He},Sc=()=>(He==null?void 0:He.stores)&&Object.keys(He.stores).length>0&&(He==null?void 0:He.actions)&&Object.keys(He.actions).length>0?He:kc();function Yr(s,e,t){const n=s.slice();return n[17]=e[t],n}function Xr(s,e,t){const n=s.slice();return n[17]=e[t],n}function Zr(s){let e,t,n;return t=new yc({props:{drawerTitle:"Sacrament Program",id:"sacrament-form",$$slots:{label:[Ec],default:[Tc]},$$scope:{ctx:s}}}),{c(){e=T("div"),M(t.$$.fragment)},l(r){e=E(r,"DIV",{});var i=j(e);H(t.$$.fragment,i),i.forEach(_)},m(r,i){U(r,e,i),F(t,e,null),n=!0},i(r){n||(I(t.$$.fragment,r),n=!0)},o(r){R(t.$$.fragment,r),n=!1},d(r){r&&_(e),V(t)}}}function Tc(s){let e,t;return e=new oc({}),{c(){M(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,r){F(e,n,r),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Ec(s){let e;return{c(){e=T("i"),this.h()},l(t){e=E(t,"I",{slot:!0,class:!0}),j(e).forEach(_),this.h()},h(){g(e,"slot","label"),g(e,"class","bi bi-pencil")},m(t,n){U(t,e,n)},p:we,d(t){t&&_(e)}}}function Pc(s){let e,t,n,r,i=Ie(s[8]),a=[];for(let h=0;h<i.length;h+=1)a[h]=ei(Xr(s,i,h));const o=h=>R(a[h],1,1,()=>{a[h]=null});let l=s[1]&&ti(s),u=Ie(s[9]),c=[];for(let h=0;h<u.length;h+=1)c[h]=ni(Yr(s,u,h));const p=h=>R(c[h],1,1,()=>{c[h]=null});return{c(){for(let h=0;h<a.length;h+=1)a[h].c();e=D(),l&&l.c(),t=D();for(let h=0;h<c.length;h+=1)c[h].c();n=Yt()},l(h){for(let d=0;d<a.length;d+=1)a[d].l(h);e=L(h),l&&l.l(h),t=L(h);for(let d=0;d<c.length;d+=1)c[d].l(h);n=Yt()},m(h,d){for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(h,d);U(h,e,d),l&&l.m(h,d),U(h,t,d);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(h,d);U(h,n,d),r=!0},p(h,d){if(d&1280){i=Ie(h[8]);let f;for(f=0;f<i.length;f+=1){const m=Xr(h,i,f);a[f]?(a[f].p(m,d),I(a[f],1)):(a[f]=ei(m),a[f].c(),I(a[f],1),a[f].m(e.parentNode,e))}for(Ge(),f=i.length;f<a.length;f+=1)o(f);Ke()}if(h[1]?l?(l.p(h,d),d&2&&I(l,1)):(l=ti(h),l.c(),I(l,1),l.m(t.parentNode,t)):l&&(Ge(),R(l,1,1,()=>{l=null}),Ke()),d&1536){u=Ie(h[9]);let f;for(f=0;f<u.length;f+=1){const m=Yr(h,u,f);c[f]?(c[f].p(m,d),I(c[f],1)):(c[f]=ni(m),c[f].c(),I(c[f],1),c[f].m(n.parentNode,n))}for(Ge(),f=u.length;f<c.length;f+=1)p(f);Ke()}},i(h){if(!r){for(let d=0;d<i.length;d+=1)I(a[d]);I(l);for(let d=0;d<u.length;d+=1)I(c[d]);r=!0}},o(h){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)R(a[d]);R(l),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)R(c[d]);r=!1},d(h){h&&(_(e),_(t),_(n)),Tt(a,h),l&&l.d(h),Tt(c,h)}}}function Oc(s){let e,t="<h5>Fast Sunday: Bearing of Testimonies</h5>";return{c(){e=T("div"),e.innerHTML=t,this.h()},l(n){e=E(n,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-d9l13f"&&(e.innerHTML=t),this.h()},h(){g(e,"class","text-center")},m(n,r){U(n,e,r)},p:we,i:we,o:we,d(n){n&&_(e)}}}function ei(s){var n,r,i,a;let e,t;return e=new qe({props:{assignment:s[10](s[17].role),name:((r=(n=s[17])==null?void 0:n.person)==null?void 0:r.name)??"",details:((a=(i=s[17])==null?void 0:i.person)==null?void 0:a.details)??""}}),{c(){M(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,l){F(e,o,l),t=!0},p:we,i(o){t||(I(e.$$.fragment,o),t=!0)},o(o){R(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function ti(s){let e,t;return e=new Wt({props:{assignment:"Rest Hymn",title:s[1].title,page:s[1].page,language:s[1].language,link:s[1].link}}),{c(){M(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,r){F(e,n,r),t=!0},p(n,r){const i={};r&2&&(i.title=n[1].title),r&2&&(i.page=n[1].page),r&2&&(i.language=n[1].language),r&2&&(i.link=n[1].link),e.$set(i)},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function ni(s){var n,r,i,a;let e,t;return e=new qe({props:{assignment:s[10](s[17].role),name:((r=(n=s[17])==null?void 0:n.person)==null?void 0:r.name)??"",details:((a=(i=s[17])==null?void 0:i.person)==null?void 0:a.details)??""}}),{c(){M(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,l){F(e,o,l),t=!0},p:we,i(o){t||(I(e.$$.fragment,o),t=!0)},o(o){R(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function Ac(s){var Bn,Mn,Hn,Fn,Vn,qn,xn,zn,Jn,Gn,Kn,Wn,Qn,Yn,Xn,Zn,es,ts,ns,ss,rs,is,as,os,ls,cs,us,hs,ds,fs,ps,gs,ms,_s,vs,bs,ys,ws,$s,ks,Ss,Ts,Es,Ps,Os,As,Cs,Is,js,Rs,Ds,Ls,Us,Ns,Bs,Ms,Hs,Fs,Vs,qs,xs,zs,Js,Gs,Ks,Ws,Qs,Ys,Xs,Zs,er,tr,nr,sr,rr,ir,ar,or,lr,cr,ur,hr,dr;let e,t,n,r,i,a,o,l,u,c,p,h,d,f=((Bn=s[5])==null?void 0:Bn.reference)+"",m,$,P,S,C,y,k,O,A,N,v,w,Q,K,ne,ue,re,$e,ie,ke,Se,Ue,X,_e,gt,te,oe="<h5>Administration of Sacrament</h5>",ae,Ne,q,x,ve,fe,be,mt,Ve,ze,We,Ln='<blockquote class="blockquote"><p>But be ye doers of the word, and not hearers only, deceiving your own selves.</p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title">James 1:22</cite></figcaption>',Qe,le=s[0]&&Zr(s);y=new qe({props:{assignment:"Presiding",name:((Fn=(Hn=(Mn=s[6])==null?void 0:Mn.sacrament)==null?void 0:Hn.presiding)==null?void 0:Fn.name)??"",details:((xn=(qn=(Vn=s[6])==null?void 0:Vn.sacrament)==null?void 0:qn.presiding)==null?void 0:xn.details)??""}}),O=new qe({props:{assignment:"Conducting",name:((Gn=(Jn=(zn=s[6])==null?void 0:zn.sacrament)==null?void 0:Jn.conducting)==null?void 0:Gn.name)??"",details:((Qn=(Wn=(Kn=s[6])==null?void 0:Kn.sacrament)==null?void 0:Wn.conducting)==null?void 0:Qn.details)??""}}),N=new qe({props:{assignment:"Chorister",name:((Zn=(Xn=(Yn=s[6])==null?void 0:Yn.sacrament)==null?void 0:Xn.chorister)==null?void 0:Zn.name)??"",details:((ns=(ts=(es=s[6])==null?void 0:es.sacrament)==null?void 0:ts.chorister)==null?void 0:ns.details)??""}}),w=new qe({props:{assignment:"Organist",name:((is=(rs=(ss=s[6])==null?void 0:ss.sacrament)==null?void 0:rs.organist)==null?void 0:is.name)??"",details:((ls=(os=(as=s[6])==null?void 0:as.sacrament)==null?void 0:os.organist)==null?void 0:ls.details)??""}}),ne=new Wt({props:{assignment:"Opening Hymn",title:(hs=(us=(cs=s[6])==null?void 0:cs.sacrament)==null?void 0:us.openingHymn)==null?void 0:hs.title,page:(ps=(fs=(ds=s[6])==null?void 0:ds.sacrament)==null?void 0:fs.openingHymn)==null?void 0:ps.page,language:(_s=(ms=(gs=s[6])==null?void 0:gs.sacrament)==null?void 0:ms.openingHymn)==null?void 0:_s.language,link:(ys=(bs=(vs=s[6])==null?void 0:vs.sacrament)==null?void 0:bs.openingHymn)==null?void 0:ys.link}}),re=new qe({props:{assignment:"Invocation",name:((ks=($s=(ws=s[6])==null?void 0:ws.sacrament)==null?void 0:$s.invocation)==null?void 0:ks.name)??"",details:((Es=(Ts=(Ss=s[6])==null?void 0:Ss.sacrament)==null?void 0:Ts.invocation)==null?void 0:Es.details)??""}}),ie=new qe({props:{assignment:"Ward Business",name:((As=(Os=(Ps=s[6])==null?void 0:Ps.sacrament)==null?void 0:Os.conducting)==null?void 0:As.name)??"",details:((js=(Is=(Cs=s[6])==null?void 0:Cs.sacrament)==null?void 0:Is.conducting)==null?void 0:js.details)??""}}),Se=new qe({props:{assignment:"Stake Business",name:((Ds=(Rs=s[6])==null?void 0:Rs.stakeBusinessAssignment)==null?void 0:Ds.name)??"",details:((Us=(Ls=s[6])==null?void 0:Ls.stakeBusinessAssignment)==null?void 0:Us.details)??""}}),_e=new Wt({props:{assignment:"Sacrament Hymn",title:(Ms=(Bs=(Ns=s[6])==null?void 0:Ns.sacrament)==null?void 0:Bs.sacramentHymn)==null?void 0:Ms.title,page:(Vs=(Fs=(Hs=s[6])==null?void 0:Hs.sacrament)==null?void 0:Fs.sacramentHymn)==null?void 0:Vs.page,language:(zs=(xs=(qs=s[6])==null?void 0:qs.sacrament)==null?void 0:xs.sacramentHymn)==null?void 0:zs.language,link:(Ks=(Gs=(Js=s[6])==null?void 0:Js.sacrament)==null?void 0:Gs.sacramentHymn)==null?void 0:Ks.link}});const Un=[Oc,Pc],Ye=[];function Nn(B,Y){return B[2]?0:1}return q=Nn(s),x=Ye[q]=Un[q](s),be=new Wt({props:{assignment:"Closing Hymn",title:(Ys=(Qs=(Ws=s[6])==null?void 0:Ws.sacrament)==null?void 0:Qs.closingHymn)==null?void 0:Ys.title,page:(er=(Zs=(Xs=s[6])==null?void 0:Xs.sacrament)==null?void 0:Zs.closingHymn)==null?void 0:er.page,language:(sr=(nr=(tr=s[6])==null?void 0:tr.sacrament)==null?void 0:nr.closingHymn)==null?void 0:sr.language,link:(ar=(ir=(rr=s[6])==null?void 0:rr.sacrament)==null?void 0:ir.closingHymn)==null?void 0:ar.link}}),Ve=new qe({props:{assignment:"Benediction",name:((cr=(lr=(or=s[6])==null?void 0:or.sacrament)==null?void 0:lr.benediction)==null?void 0:cr.name)??"",details:((dr=(hr=(ur=s[6])==null?void 0:ur.sacrament)==null?void 0:hr.benediction)==null?void 0:dr.details)??""}}),{c(){e=T("div"),t=T("p"),n=J("Lehi 31st Ward | Lehi Utah 3rd Stake (Tongan)"),r=T("br"),i=D(),a=T("small"),o=J(s[7]),l=J(`,
			`),u=J(s[4]),c=J(" to "),p=J(s[3]),h=J(`,
			`),d=T("a"),m=J(f),P=D(),le&&le.c(),S=D(),C=T("div"),M(y.$$.fragment),k=D(),M(O.$$.fragment),A=D(),M(N.$$.fragment),v=D(),M(w.$$.fragment),Q=D(),K=T("div"),M(ne.$$.fragment),ue=D(),M(re.$$.fragment),$e=D(),M(ie.$$.fragment),ke=D(),M(Se.$$.fragment),Ue=D(),X=T("div"),M(_e.$$.fragment),gt=D(),te=T("div"),te.innerHTML=oe,ae=D(),Ne=T("div"),x.c(),ve=D(),fe=T("div"),M(be.$$.fragment),mt=D(),M(Ve.$$.fragment),ze=D(),We=T("figure"),We.innerHTML=Ln,this.h()},l(B){e=E(B,"DIV",{class:!0});var Y=j(e);t=E(Y,"P",{});var Je=j(t);n=G(Je,"Lehi 31st Ward | Lehi Utah 3rd Stake (Tongan)"),r=E(Je,"BR",{}),i=L(Je),a=E(Je,"SMALL",{});var Be=j(a);o=G(Be,s[7]),l=G(Be,`,
			`),u=G(Be,s[4]),c=G(Be," to "),p=G(Be,s[3]),h=G(Be,`,
			`),d=E(Be,"A",{href:!0,target:!0});var Ct=j(d);m=G(Ct,f),Ct.forEach(_),Be.forEach(_),Je.forEach(_),P=L(Y),le&&le.l(Y),Y.forEach(_),S=L(B),C=E(B,"DIV",{class:!0});var Xe=j(C);H(y.$$.fragment,Xe),k=L(Xe),H(O.$$.fragment,Xe),A=L(Xe),H(N.$$.fragment,Xe),v=L(Xe),H(w.$$.fragment,Xe),Xe.forEach(_),Q=L(B),K=E(B,"DIV",{class:!0});var Ze=j(K);H(ne.$$.fragment,Ze),ue=L(Ze),H(re.$$.fragment,Ze),$e=L(Ze),H(ie.$$.fragment,Ze),ke=L(Ze),H(Se.$$.fragment,Ze),Ze.forEach(_),Ue=L(B),X=E(B,"DIV",{class:!0});var Ht=j(X);H(_e.$$.fragment,Ht),gt=L(Ht),te=E(Ht,"DIV",{class:!0,"data-svelte-h":!0}),se(te)!=="svelte-1obbu0h"&&(te.innerHTML=oe),Ht.forEach(_),ae=L(B),Ne=E(B,"DIV",{class:!0});var fr=j(Ne);x.l(fr),fr.forEach(_),ve=L(B),fe=E(B,"DIV",{class:!0});var Ft=j(fe);H(be.$$.fragment,Ft),mt=L(Ft),H(Ve.$$.fragment,Ft),Ft.forEach(_),ze=L(B),We=E(B,"FIGURE",{class:!0,"data-svelte-h":!0}),se(We)!=="svelte-1rgged"&&(We.innerHTML=Ln),this.h()},h(){var B;g(d,"href",$=(B=s[5])==null?void 0:B.link),g(d,"target","_blank"),g(e,"class","d-flex justify-content-between"),g(C,"class","d-flex flex-column gap-1 border-top pt-3"),g(K,"class","d-flex flex-column gap-1 border-top pt-3"),g(te,"class","text-center"),g(X,"class","d-flex flex-column gap-1 border-top pt-3"),g(Ne,"class","d-flex flex-column gap-1 border-top pt-3"),g(fe,"class","d-flex flex-column gap-1 border-top pt-3"),g(We,"class","text-center")},m(B,Y){U(B,e,Y),b(e,t),b(t,n),b(t,r),b(t,i),b(t,a),b(a,o),b(a,l),b(a,u),b(a,c),b(a,p),b(a,h),b(a,d),b(d,m),b(e,P),le&&le.m(e,null),U(B,S,Y),U(B,C,Y),F(y,C,null),b(C,k),F(O,C,null),b(C,A),F(N,C,null),b(C,v),F(w,C,null),U(B,Q,Y),U(B,K,Y),F(ne,K,null),b(K,ue),F(re,K,null),b(K,$e),F(ie,K,null),b(K,ke),F(Se,K,null),U(B,Ue,Y),U(B,X,Y),F(_e,X,null),b(X,gt),b(X,te),U(B,ae,Y),U(B,Ne,Y),Ye[q].m(Ne,null),U(B,ve,Y),U(B,fe,Y),F(be,fe,null),b(fe,mt),F(Ve,fe,null),U(B,ze,Y),U(B,We,Y),Qe=!0},p(B,[Y]){var Be,Ct;(!Qe||Y&16)&&de(u,B[4]),(!Qe||Y&8)&&de(p,B[3]),(!Qe||Y&32)&&f!==(f=((Be=B[5])==null?void 0:Be.reference)+"")&&de(m,f),(!Qe||Y&32&&$!==($=(Ct=B[5])==null?void 0:Ct.link))&&g(d,"href",$),B[0]?le?Y&1&&I(le,1):(le=Zr(B),le.c(),I(le,1),le.m(e,null)):le&&(Ge(),R(le,1,1,()=>{le=null}),Ke());let Je=q;q=Nn(B),q===Je?Ye[q].p(B,Y):(Ge(),R(Ye[Je],1,1,()=>{Ye[Je]=null}),Ke(),x=Ye[q],x?x.p(B,Y):(x=Ye[q]=Un[q](B),x.c()),I(x,1),x.m(Ne,null))},i(B){Qe||(I(le),I(y.$$.fragment,B),I(O.$$.fragment,B),I(N.$$.fragment,B),I(w.$$.fragment,B),I(ne.$$.fragment,B),I(re.$$.fragment,B),I(ie.$$.fragment,B),I(Se.$$.fragment,B),I(_e.$$.fragment,B),I(x),I(be.$$.fragment,B),I(Ve.$$.fragment,B),Qe=!0)},o(B){R(le),R(y.$$.fragment,B),R(O.$$.fragment,B),R(N.$$.fragment,B),R(w.$$.fragment,B),R(ne.$$.fragment,B),R(re.$$.fragment,B),R(ie.$$.fragment,B),R(Se.$$.fragment,B),R(_e.$$.fragment,B),R(x),R(be.$$.fragment,B),R(Ve.$$.fragment,B),Qe=!1},d(B){B&&(_(e),_(S),_(C),_(Q),_(K),_(Ue),_(X),_(ae),_(Ne),_(ve),_(fe),_(ze),_(We)),le&&le.d(),V(y),V(O),V(N),V(w),V(ne),V(re),V(ie),V(Se),V(_e),Ye[q].d(),V(be),V(Ve)}}}function Cc(s,e,t){var y,k,O,A,N,v;let n,r,i,a,o;const{actions:{featureIsEnabled:l}}=Sc();let u=!1;const c=Hi,p=new Date,h=Di(p),d=Mi(p),m=Li(h?p:d,"cccc dd MMM"),$=(y=c==null?void 0:c.sacrament)==null?void 0:y.speakers,P=$==null?void 0:$.filter(w=>w.beforeRestHymn),S=$==null?void 0:$.filter(w=>!w.beforeRestHymn),C=w=>{let Q="Speaker";switch(w){case"narrator":Q="Narrator";break;case"musical":Q="Musical Number";break;case"testimony":Q="Testimony";break;case"speaker":default:Q="Speaker";break}return Q};return en(()=>{t(0,u=l(ji.EditSacramentProgram))}),t(5,n=(k=c==null?void 0:c.sacrament)==null?void 0:k.address),t(4,r=(O=c==null?void 0:c.sacrament)==null?void 0:O.startTime),t(3,i=(A=c==null?void 0:c.sacrament)==null?void 0:A.endTime),t(2,a=(N=c==null?void 0:c.sacrament)==null?void 0:N.testimonySunday),t(1,o=(v=c==null?void 0:c.sacrament)==null?void 0:v.restSong),[u,o,a,i,r,n,c,m,P,S,C]}class Ic extends De{constructor(e){super(),Le(this,e,Cc,Ac,Re,{})}}function si(s){let e,t="Cheat Sheet";return{c(){e=T("button"),e.textContent=t,this.h()},l(n){e=E(n,"BUTTON",{class:!0,id:!0,"data-bs-toggle":!0,"data-bs-target":!0,type:!0,role:!0,"aria-controls":!0,"aria-selected":!0,"data-svelte-h":!0}),se(e)!=="svelte-3jwxin"&&(e.textContent=t),this.h()},h(){g(e,"class","nav-link"),g(e,"id","nav-cheat-sheet-tab"),g(e,"data-bs-toggle","tab"),g(e,"data-bs-target","#nav-cheat-sheet"),g(e,"type","button"),g(e,"role","tab"),g(e,"aria-controls","nav-cheat-sheet"),g(e,"aria-selected","false")},m(n,r){U(n,e,r)},d(n){n&&_(e)}}}function ri(s){let e,t,n,r;return n=new Fi({}),{c(){e=T("div"),t=T("div"),M(n.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var a=j(e);t=E(a,"DIV",{class:!0});var o=j(t);H(n.$$.fragment,o),o.forEach(_),a.forEach(_),this.h()},h(){g(t,"class","d-flex gap-4 flex-column"),g(e,"class","tab-pane fade"),g(e,"id","nav-cheat-sheet"),g(e,"role","tabpanel"),g(e,"aria-labelledby","nav-cheat-sheet-tab"),g(e,"tabindex","0")},m(i,a){U(i,e,a),b(e,t),F(n,t,null),r=!0},i(i){r||(I(n.$$.fragment,i),r=!0)},o(i){R(n.$$.fragment,i),r=!1},d(i){i&&_(e),V(n)}}}function jc(s){let e,t,n,r="Program",i,a,o,l="Announcements",u,c,p="BOM Challenge",h,d,f,m,$,P,S,C,y,k,O,A,N=s[0]&&si();m=new Ic({});let v=s[0]&&ri();return C=new zi({}),O=new xi({}),{c(){e=T("nav"),t=T("div"),n=T("button"),n.textContent=r,i=D(),N&&N.c(),a=D(),o=T("button"),o.textContent=l,u=D(),c=T("button"),c.textContent=p,h=D(),d=T("div"),f=T("div"),M(m.$$.fragment),$=D(),v&&v.c(),P=D(),S=T("div"),M(C.$$.fragment),y=D(),k=T("div"),M(O.$$.fragment),this.h()},l(w){e=E(w,"NAV",{class:!0});var Q=j(e);t=E(Q,"DIV",{class:!0,id:!0,role:!0});var K=j(t);n=E(K,"BUTTON",{class:!0,id:!0,"data-bs-toggle":!0,"data-bs-target":!0,type:!0,role:!0,"aria-controls":!0,"aria-selected":!0,"data-svelte-h":!0}),se(n)!=="svelte-fw7dan"&&(n.textContent=r),i=L(K),N&&N.l(K),a=L(K),o=E(K,"BUTTON",{class:!0,id:!0,"data-bs-toggle":!0,"data-bs-target":!0,type:!0,role:!0,"aria-controls":!0,"aria-selected":!0,"data-svelte-h":!0}),se(o)!=="svelte-1gop0t"&&(o.textContent=l),u=L(K),c=E(K,"BUTTON",{class:!0,id:!0,"data-bs-toggle":!0,"data-bs-target":!0,type:!0,role:!0,"aria-controls":!0,"aria-selected":!0,"data-svelte-h":!0}),se(c)!=="svelte-215srg"&&(c.textContent=p),K.forEach(_),Q.forEach(_),h=L(w),d=E(w,"DIV",{class:!0,id:!0});var ne=j(d);f=E(ne,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var ue=j(f);H(m.$$.fragment,ue),ue.forEach(_),$=L(ne),v&&v.l(ne),P=L(ne),S=E(ne,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var re=j(S);H(C.$$.fragment,re),re.forEach(_),y=L(ne),k=E(ne,"DIV",{class:!0,id:!0,role:!0,"aria-labelledby":!0,tabindex:!0});var $e=j(k);H(O.$$.fragment,$e),$e.forEach(_),ne.forEach(_),this.h()},h(){g(n,"class","nav-link active"),g(n,"id","nav-sacrament-program-tab"),g(n,"data-bs-toggle","tab"),g(n,"data-bs-target","#nav-sacrament-program"),g(n,"type","button"),g(n,"role","tab"),g(n,"aria-controls","nav-sacrament-program"),g(n,"aria-selected","true"),g(o,"class","nav-link"),g(o,"id","nav-announcements-tab"),g(o,"data-bs-toggle","tab"),g(o,"data-bs-target","#nav-announcements"),g(o,"type","button"),g(o,"role","tab"),g(o,"aria-controls","nav-announcements"),g(o,"aria-selected","false"),g(c,"class","nav-link"),g(c,"id","nav-bom-challenge-tab"),g(c,"data-bs-toggle","tab"),g(c,"data-bs-target","#nav-bom-challenge"),g(c,"type","button"),g(c,"role","tab"),g(c,"aria-controls","nav-bom-challenge"),g(c,"aria-selected","false"),g(t,"class","nav nav-tabs"),g(t,"id","nav-tab"),g(t,"role","tablist"),g(e,"class","d-print-none"),g(f,"class","tab-pane fade show active"),g(f,"id","nav-sacrament-program"),g(f,"role","tabpanel"),g(f,"aria-labelledby","nav-sacrament-program-tab"),g(f,"tabindex","0"),g(S,"class","tab-pane fade"),g(S,"id","nav-announcements"),g(S,"role","tabpanel"),g(S,"aria-labelledby","nav-announcements-tab"),g(S,"tabindex","0"),g(k,"class","tab-pane fade"),g(k,"id","nav-bom-challenge"),g(k,"role","tabpanel"),g(k,"aria-labelledby","nav-bom-challenge-tab"),g(k,"tabindex","0"),g(d,"class","tab-content"),g(d,"id","nav-tabContent")},m(w,Q){U(w,e,Q),b(e,t),b(t,n),b(t,i),N&&N.m(t,null),b(t,a),b(t,o),b(t,u),b(t,c),U(w,h,Q),U(w,d,Q),b(d,f),F(m,f,null),b(d,$),v&&v.m(d,null),b(d,P),b(d,S),F(C,S,null),b(d,y),b(d,k),F(O,k,null),A=!0},p(w,Q){w[0]?N||(N=si(),N.c(),N.m(t,a)):N&&(N.d(1),N=null),w[0]?v?Q&1&&I(v,1):(v=ri(),v.c(),I(v,1),v.m(d,P)):v&&(Ge(),R(v,1,1,()=>{v=null}),Ke())},i(w){A||(I(m.$$.fragment,w),I(v),I(C.$$.fragment,w),I(O.$$.fragment,w),A=!0)},o(w){R(m.$$.fragment,w),R(v),R(C.$$.fragment,w),R(O.$$.fragment,w),A=!1},d(w){w&&(_(e),_(h),_(d)),N&&N.d(),V(m),v&&v.d(),V(C),V(O)}}}function Rc(s){let e,t;return e=new qi({props:{pageTitle:"Sacrament",$$slots:{default:[jc]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,r){F(e,n,r),t=!0},p(n,[r]){const i={};r&5&&(i.$$scope={dirty:r,ctx:n}),e.$set(i)},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Dc(s,e,t){let n;const{stores:{currentUserIsAdmin:r}}=oi();return _n(s,r,i=>t(0,n=i)),[n,r]}class nu extends De{constructor(e){super(),Le(this,e,Dc,Rc,Re,{})}}export{nu as P,Jc as _,Gc as g};
