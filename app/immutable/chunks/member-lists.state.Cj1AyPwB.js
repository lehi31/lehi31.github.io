import{w as b,d as i}from"./index.Dbn8irzZ.js";import{U as o,g as v}from"./app.state.D7XuHsx1.js";import{l as A}from"./scheduler.BKEM4_Ql.js";import{s as f}from"./supabase-config.CfWUfwF8.js";var C=(t=>(t.EditSacramentProgram="edit-sacrament-program",t.EditDBCalendarEvent="edit-calendar-events",t.EditMemberListItem="edit-member-list-item",t.ViewDBMemberListItem="view-db-member-list-item",t.UseCallings="use-callings",t))(C||{});const T=[{name:"edit-sacrament-program",roles:[o.Root,o.Admin],on:!0},{name:"edit-calendar-events",roles:[o.Root,o.Admin],on:!0},{name:"view-db-member-list-item",roles:[o.Root,o.Admin],on:!0},{name:"edit-member-list-item",roles:[o.Root,o.Admin],on:!0},{name:"use-callings",roles:[o.Root],on:!0}],{stores:{currentUser:M}}=v();let c=null;const E=()=>{const t=b(T);return c={stores:{featureFlags:t},actions:{featureIsEnabled:s=>{const l=A(t).find(d=>d.name===s);if(!l)return!1;const k=A(M).role;return!!l.roles.find(d=>d===k)&&l.on}}},c},$=()=>c?.stores&&Object.keys(c.stores).length>0&&c?.actions&&Object.keys(c.actions).length>0?c:E(),m={AdvancementsForAaronicPriesthood:{label:"Aaronic Priesthood Advancements",key:"advancements-for-aaronic-priesthood"},AdvancementsForYoungWomen:{label:"Young Women Advancement Acknowledgement",key:"advancements-for-young-women"},BabyBlessing:{label:"Baby Blessing",key:"baby-blessing"},Baptisms:{label:"Baptisms",key:"baptisms"},CallingsToBeAcknowledgeInSacrament:{label:"Callings to be Acknowledged in Sacrament",key:"callings-to-acknowledge-in-sacrament"},CallingsToBeAcknowledgeInClass:{label:"Callings to be Acknowledged in Class",key:"callings-to-acknowledge-in-class"},CallingsToBeReleasedInSacrament:{label:"Callings to Release in Sacrament",key:"callings-to-be-released-in-sacrament"},CallingsToBeReleasedInClass:{label:"Callings to Release in Class",key:"callings-to-be-released-in-class"},CallingsToBeSustainedInSacrament:{label:"Callings to Sustain in Sacrament",key:"callings-to-be-sustained-in-sacrament"},CallingsToBeSustainedInClass:{label:"Callings to Sustain in Class",key:"callings-to-be-sustained-in-class"},MovedIn:{label:"Move In Members",key:"moved-in-members"}},x={name:"",description:"",list_name:"",sort_order:0},w=b([]);async function _(){const{data:t,error:a}=await f.from("member_list_items").select("*");if(a)throw a;const s=t||[];return w.set(s),s}async function P(t){const{data:a,error:s}=await f.from("member_list_items").insert([t]).select();if(s)throw s;return await _(),a[0]}async function W(t,a){const{error:s}=await f.from("member_list_items").update(a).eq("id",t).select();if(s)throw s;await _();const l=A(w).find(u=>u.id===t);return l||void 0}async function Y(t){const{error:a}=await f.from("member_list_items").delete().eq("id",t);if(a)throw a;await _()}let g=null;const R=()=>{const t=b(!1),a=b([]),s=b([]),y=i([s],([r])=>r.filter(e=>e.list_name===m.CallingsToBeReleasedInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),l=i([s],([r])=>r.filter(e=>e.list_name===m.CallingsToBeSustainedInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),u=i([s],([r])=>r.filter(e=>e.list_name===m.CallingsToBeAcknowledgeInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),k=i([s],([r])=>r.filter(e=>e.list_name===m.AdvancementsForAaronicPriesthood.key).sort((e,n)=>e.sort_order-n.sort_order)),I=i([s],([r])=>r.filter(e=>e.list_name===m.AdvancementsForYoungWomen.key).sort((e,n)=>e.sort_order-n.sort_order)),d=i([s],([r])=>r.filter(e=>e.list_name===m.MovedIn.key).sort((e,n)=>e.sort_order-n.sort_order)),B=i([s],([r])=>r.filter(e=>e.list_name===m.Baptisms.key).sort((e,n)=>e.sort_order-n.sort_order)),S=i([s],([r])=>r.filter(e=>e.list_name===m.BabyBlessing.key).sort((e,n)=>e.sort_order-n.sort_order)),p=r=>r.length?r:[];return g={stores:{ready:t,data:a,dbData:s,membersToRelease:y,membersToSustain:l,membersToAcknowledgeInSacrament:u,membersToAdvanceInAaronicPriesthood:k,membersToAdvanceInYoungWomen:I,membersMoveIn:d,membersToBeBaptised:B,membersForBabyBlessing:S},actions:{reload:async()=>{t.set(!1);const r=await _();s.set(p(r)),t.set(!0)}}},g},j=()=>g?.stores&&Object.keys(g.stores).length>0?g:R();export{x as B,C as F,m as M,j as a,P as c,Y as d,$ as g,W as u};
