import{t as B,j as At,k as Pt,K as Fn,bb as Ln,L as Ft,Y as Rn,ac as Hn,b1 as Wn,a_ as $n,N as Bn,G as rt,p as an,ai as G,w as Q,aj as rn,c as v,r as _,a as sn,g as a,E as C,as as jn,f as Xe,u as T,D as h,s as F,am as zn,R as it,F as mt}from"./CPOcesE7.js";import{b as Lt,d as qn,f as M,a as w,c as on}from"./YsHTGu5k.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{w as Re,g as Rt,r as ln,d as Fe,a as Zn}from"./DHXte27T.js";import{p as Me,i as L,e as Te,s as de,b as Xn,a as Kn}from"./opPvMm1W.js";import{e as cn,i as Gn}from"./DAwrR-3T.js";import{s as ht}from"./BfcJxcMB.js";import{t as R,y as un,z as dn,B as Vn,q as Ht,C as Wt,D as st,b as Z,g as fn,p as He,o as Ze,f as Ce,E as $t,A as bt,c as Ie,F as Qn,h as gt}from"./DoIU2WPX.js";import{b as pn}from"./DLuN8Kcu.js";import{i as _n}from"./C2Q_9cr2.js";import{S as Ke}from"./B6CdIXb1.js";import{v as Jn,D as ea}from"./B1WKn20u.js";import{b as ta}from"./QDlYjqxz.js";import{R as na}from"./AvGRSxXz.js";import{s as aa,i as ra}from"./tGKFaw8O.js";function zr(e,t,n=!1,r=!1,s=!1){var o=e,l="";B(()=>{var i=Fn;if(l===(l=t()??"")){At&&Pt();return}if(i.nodes!==null&&(Ln(i.nodes.start,i.nodes.end),i.nodes=null),l!==""){if(At){Ft.data;for(var d=Pt(),b=d;d!==null&&(d.nodeType!==Rn||d.data!=="");)b=d,d=Hn(d);if(d===null)throw Wn(),$n;Lt(Ft,b),o=Bn(d);return}var x=l+"";n?x=`<svg>${x}</svg>`:r&&(x=`<math>${x}</math>`);var k=qn(x);if((n||r)&&(k=rt(k)),Lt(rt(k),k.lastChild),n||r)for(;rt(k);)o.before(rt(k));else o.before(k)}})}function sa(e,t){const n=R(e);return isNaN(t)?un(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function tt(e,t){const n=t*7;return sa(e,n)}function lt(e,t){const n=R(e),r=R(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function oa(e){return un(e,Date.now())}function ia(e,t){const n=R(e),r=R(t),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function la(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function ca(e,t){return+R(e)-+R(t)}function ua(e){const t=R(e);return t.setHours(23,59,59,999),t}function da(e){const t=R(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function fa(e){const t=R(e);return+ua(t)==+da(t)}function pa(e,t){const n=R(e),r=R(t),s=lt(n,r),o=Math.abs(ia(n,r));let l;if(o<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let i=lt(n,r)===-s;fa(R(e))&&o===1&&lt(e,r)===1&&(i=!1),l=s*(o-Number(i))}return l===0?0:l}function _a(e,t,n){const r=ca(e,t)/1e3;return la(n?.roundingMethod)(r)}function Le(e,t){const n=dn(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=R(e),o=s.getDay(),l=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}function va(e,t,n){const r=dn(),s=n?.locale??r.locale??Vn,o=2520,l=lt(e,t);if(isNaN(l))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l});let d,b;l>0?(d=R(t),b=R(e)):(d=R(e),b=R(t));const x=_a(b,d),k=(Ht(b)-Ht(d))/1e3,I=Math.round((x-k)/60);let q;if(I<2)return n?.includeSeconds?x<5?s.formatDistance("lessThanXSeconds",5,i):x<10?s.formatDistance("lessThanXSeconds",10,i):x<20?s.formatDistance("lessThanXSeconds",20,i):x<40?s.formatDistance("halfAMinute",0,i):x<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):I===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",I,i);if(I<45)return s.formatDistance("xMinutes",I,i);if(I<90)return s.formatDistance("aboutXHours",1,i);if(I<Wt){const j=Math.round(I/60);return s.formatDistance("aboutXHours",j,i)}else{if(I<o)return s.formatDistance("xDays",1,i);if(I<st){const j=Math.round(I/Wt);return s.formatDistance("xDays",j,i)}else if(I<st*2)return q=Math.round(I/st),s.formatDistance("aboutXMonths",q,i)}if(q=pa(b,d),q<12){const j=Math.round(I/st);return s.formatDistance("xMonths",j,i)}else{const j=q%12,ee=Math.trunc(q/12);return j<3?s.formatDistance("aboutXYears",ee,i):j<9?s.formatDistance("overXYears",ee,i):s.formatDistance("almostXYears",ee+1,i)}}function ma(e,t){return va(e,oa(e),t)}function ot(e,t){const n=+R(e),[r,s]=[+R(t.start),+R(t.end)].sort((o,l)=>o-l);return n>=r&&n<=s}function ha(e,t){const n=Da(t);return"formatToParts"in n?ga(n,e):ya(n,e)}const ba={year:0,month:1,day:2,hour:3,minute:4,second:5};function ga(e,t){try{const n=e.formatToParts(t),r=[];for(let s=0;s<n.length;s++){const o=ba[n[s].type];o!==void 0&&(r[o]=parseInt(n[s].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function ya(e,t){const n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const yt={},Bt=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),wa=Bt==="06/25/2014, 00:00:00"||Bt==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Da(e){return yt[e]||(yt[e]=wa?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),yt[e]}function Ct(e,t,n,r,s,o,l){const i=new Date(0);return i.setUTCFullYear(e,t,n),i.setUTCHours(r,s,o,l),i}const jt=36e5,xa=6e4,wt={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function It(e,t,n){if(!e)return 0;let r=wt.timezoneZ.exec(e);if(r)return 0;let s,o;if(r=wt.timezoneHH.exec(e),r)return s=parseInt(r[1],10),zt(s)?-(s*jt):NaN;if(r=wt.timezoneHHMM.exec(e),r){s=parseInt(r[2],10);const l=parseInt(r[3],10);return zt(s,l)?(o=Math.abs(s)*jt+l*xa,r[1]==="+"?-o:o):NaN}if(Ta(e)){t=new Date(t||Date.now());const l=n?t:Sa(t),i=Mt(l,e);return-(n?i:Ma(t,i,e))}return NaN}function Sa(e){return Ct(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Mt(e,t){const n=ha(e,t),r=Ct(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let s=e.getTime();const o=s%1e3;return s-=o>=0?o:1e3+o,r-s}function Ma(e,t,n){let s=e.getTime()-t;const o=Mt(new Date(s),n);if(t===o)return t;s-=o-t;const l=Mt(new Date(s),n);return o===l?o:Math.max(o,l)}function zt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const qt={};function Ta(e){if(qt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),qt[e]=!0,!0}catch{return!1}}function Zt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const vn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Dt=36e5,Xt=6e4,ka=2,J={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:vn};function Tt(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const n=t.additionalDigits==null?ka:Number(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const r=Na(e),{year:s,restDateString:o}=Ca(r.date,n),l=Ia(o,s);if(l===null||isNaN(l.getTime()))return new Date(NaN);if(l){const i=l.getTime();let d=0,b;if(r.time&&(d=Oa(r.time),d===null||isNaN(d)))return new Date(NaN);if(r.timeZone||t.timeZone){if(b=It(r.timeZone||t.timeZone,new Date(i+d)),isNaN(b))return new Date(NaN)}else b=Zt(new Date(i+d)),b=Zt(new Date(i+d+b));return new Date(i+d+b)}else return new Date(NaN)}function Na(e){const t={};let n=J.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=J.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){const s=J.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function Ca(e,t){if(e){const n=J.YYY[t],r=J.YYYYY[t];let s=J.YYYY.exec(e)||r.exec(e);if(s){const o=s[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(s=J.YY.exec(e)||n.exec(e),s){const o=s[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function Ia(e,t){if(t===null)return null;let n,r,s;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let o=J.MM.exec(e);if(o)return n=new Date(0),r=parseInt(o[1],10)-1,Gt(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(o=J.DDD.exec(e),o){n=new Date(0);const l=parseInt(o[1],10);return Ua(t,l)?(n.setUTCFullYear(t,0,l),n):new Date(NaN)}if(o=J.MMDD.exec(e),o){n=new Date(0),r=parseInt(o[1],10)-1;const l=parseInt(o[2],10);return Gt(t,r,l)?(n.setUTCFullYear(t,r,l),n):new Date(NaN)}if(o=J.Www.exec(e),o)return s=parseInt(o[1],10)-1,Vt(s)?Kt(t,s):new Date(NaN);if(o=J.WwwD.exec(e),o){s=parseInt(o[1],10)-1;const l=parseInt(o[2],10)-1;return Vt(s,l)?Kt(t,s,l):new Date(NaN)}return null}function Oa(e){let t,n,r=J.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),xt(t)?t%24*Dt:NaN;if(r=J.HHMM.exec(e),r)return t=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),xt(t,n)?t%24*Dt+n*Xt:NaN;if(r=J.HHMMSS.exec(e),r){t=parseInt(r[1],10),n=parseInt(r[2],10);const s=parseFloat(r[3].replace(",","."));return xt(t,n,s)?t%24*Dt+n*Xt+s*1e3:NaN}return null}function Kt(e,t,n){t=t||0,n=n||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,o=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}const Ya=[31,28,31,30,31,30,31,31,30,31,30,31],Ea=[31,29,31,30,31,30,31,31,30,31,30,31];function mn(e){return e%400===0||e%4===0&&e%100!==0}function Gt(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;const r=mn(e);if(r&&n>Ea[t]||!r&&n>Ya[t])return!1}return!0}function Ua(e,t){if(t<1)return!1;const n=mn(e);return!(n&&t>366||!n&&t>365)}function Vt(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function xt(e,t,n){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function Qt(e,t,n){e=Tt(e,n);const r=It(t,e,!0),s=new Date(e.getTime()-r),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}function Aa(e,t,n){if(typeof e=="string"&&!e.match(vn))return Tt(e,{...n,timeZone:t});e=Tt(e,n);const r=Ct(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),s=It(t,new Date(r));return new Date(r+s)}const kt=Re([]);let ve=null;async function Oe(){return ve||(ve=(async()=>{const{data:e,error:t}=await Z.from("calendar_events").select("*").order("start_time",{ascending:!0});if(t)throw ve=null,t;const n=e||[];return kt.set(n),setTimeout(()=>{ve=null},100),n})(),ve)}async function hn(e){let t=Rt(kt);return t.length||(await Oe(),t=Rt(kt)),t.find(n=>n.id===e)}async function Pa(e){const{data:t,error:n}=await Z.from("calendar_events").insert([e]).select();if(n)throw n;return ve=null,await Oe(),t?t[0]:void 0}async function Fa(e){const{data:t,error:n}=await Z.from("calendar_events").insert(e).select();if(n)throw n;return ve=null,await Oe(),t??[]}async function ct(e,t){const{data:n,error:r}=await Z.from("calendar_events").update(t).eq("id",e).select();if(r)throw r;return ve=null,await Oe(),n?n[0]:void 0}async function La(e){const t=await hn(e),{error:n}=await Z.from("calendar_events").delete().eq("id",e);if(n)throw n;t?.attachments&&t.attachments.length>0&&await Ot(t.attachments),ve=null,await Oe()}const Ra={bishop:{approval:"bishop_approval",timestamp:"bishop_approval_at",userId:"bishop_approval_by_user_id"},first_counselor:{approval:"first_counselor_approval",timestamp:"first_counselor_approval_at",userId:"first_counselor_approval_by_user_id"},second_counselor:{approval:"second_counselor_approval",timestamp:"second_counselor_approval_at",userId:"second_counselor_approval_by_user_id"}};async function bn(e,t,n,r){const s=Ra[t],o=n?new Date().toISOString():null;return ct(e,{[s.approval]:n,[s.timestamp]:o,[s.userId]:n?r??null:null})}async function gn(e){return ct(e,{is_published:!0})}async function yn(e){return ct(e,{is_published:!1})}async function Ha(e=new Date){const t=e.toISOString(),{data:n,error:r}=await Z.from("calendar_events").select("*").lt("start_time",t).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const s=[],o=[];for(const i of n){if(i.recurrence_rule&&(!i.recurrence_end_date||i.recurrence_end_date&&new Date(i.recurrence_end_date)>=e)){o.push(i);continue}s.push(i)}let l=0;if(s.length>0){const i=s.map(d=>d.id).filter(d=>d!==void 0);if(i.length>0){const{data:d,error:b}=await Z.from("calendar_events").delete().in("id",i).select("id");if(b)throw b;l=d?.length??0;for(const x of s)x.attachments&&x.attachments.length>0&&await Ot(x.attachments)}}return ve=null,await Oe(),{deleted:l,skipped:o.length}}async function Wa(e,t){const n=e.name.split(".").pop()||"bin",r=t||"temp",o=`${crypto.randomUUID()}.${n}`,l=`${r}/${o}`,{error:i}=await Z.storage.from("event-attachments").upload(l,e,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:d}}=Z.storage.from("event-attachments").getPublicUrl(l);return{id:crypto.randomUUID(),name:e.name,url:d,type:e.type,size:e.size,uploadedAt:new Date().toISOString()}}async function $a(e){const{error:t}=await Z.storage.from("event-attachments").remove([e]);if(t)throw t}function wn(e){const t=e.match(/event-attachments\/(.+)$/);return t?t[1]:""}async function Ot(e){if(!e||e.length===0)return;const t=e.map(n=>wn(n.url)).filter(n=>n);if(t.length>0){const{error:n}=await Z.storage.from("event-attachments").remove(t);if(n)throw n}}const qr=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Pa,createCalendarEvents:Fa,deleteCalendarEvent:La,deleteEventAttachment:$a,deleteEventAttachments:Ot,deletePastCalendarEvents:Ha,extractStoragePath:wn,getAllCalendarEvents:Oe,getCalendarEvent:hn,publishCalendarEvent:gn,unpublishCalendarEvent:yn,updateBishopricApproval:bn,updateCalendarEvent:ct,uploadEventAttachment:Wa},Symbol.toStringTag,{value:"Module"})),Ba={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21}},Nt=Object.values(Ba).sort((e,t)=>e.sort_index-t.sort_index),Zr=e=>e?Nt.find(t=>t.key===e):void 0,Jt={bishop:"Bishop",first_counselor:"1st Counselor",second_counselor:"2nd Counselor"},Yt=e=>{let t=0;return e.bishop_approval==="YES"&&t++,e.first_counselor_approval==="YES"&&t++,e.second_counselor_approval==="YES"&&t++,t},ja=e=>Yt(e)>0,za=e=>e.is_published?"published":Yt(e)>0?"approved":e.bishop_approval==="NO"||e.first_counselor_approval==="NO"||e.second_counselor_approval==="NO"?"needs_review":"pending";let nt=null;const qa=e=>e.replace(/<[^>]*>/g,"").toLowerCase(),en=(e,t)=>{if(!t.trim())return!0;const n=t.toLowerCase(),r=(e.title||"").toLowerCase(),s=qa(e.description||""),o=(e.location||"").toLowerCase();return r.includes(n)||s.includes(n)||o.includes(n)},Xr=(e,t)=>{if(!t.trim()||!e)return tn(e||"");const n=tn(e),r=new RegExp(`(${Dn(t)})`,"gi");return n.replace(r,"<mark>$1</mark>")},Kr=(e,t)=>{if(!t.trim()||!e)return e||"";const n=new RegExp(`(${Dn(t)})`,"gi");return e.replace(/(<[^>]*>)|([^<]+)/g,(r,s,o)=>s||(o?o.replace(n,"<mark>$1</mark>"):r))},tn=e=>{const t=typeof document<"u"?document.createElement("div"):null;return t?(t.textContent=e,t.innerHTML):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Dn=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Za=fn()??null,Xa=ln(!1),St=Za?.stores.authenticated??Xa,Ka=()=>{const e=Re(!1),t=Re([]),n=Re([]),r=Re(""),s=Re(""),o=Re(!1),l=(g,y)=>!(!g.is_published||!y&&g.is_public===!1),i=Fe([n,St],([g,y])=>{const f=new Date,N=Le(tt(f,3),{weekStartsOn:1}),u=g.filter(S=>S?.meta_data?.category?.length).filter(S=>l(S,y)).filter(S=>{if(S.event_type==="calendar_event"){const te=S.start_time?He(S.start_time):null;return te?ot(te,{start:f,end:N}):!1}return!0}).map(S=>Nt.find(te=>te.key===S.meta_data?.category)).filter(S=>S!==void 0);return Array.from(new Set(u))}),d=Fe([r],([g])=>Nt.find(y=>y.key===g)),b=Fe([n,r,s,St],([g,y,f,N])=>g.filter(u=>u.event_type==="calendar_event").filter(u=>{const S=u?.meta_data;return y&&S?S?.category===y:!0}).filter(u=>en(u,f)).filter(u=>l(u,N)).filter(u=>{const S=u.start_time?He(u.start_time):null,te=aa();return S?ra(S,te)||S.getTime()>=te.getTime():!1})),x=Fe([n,r,s,St],([g,y,f,N])=>g.filter(u=>u.event_type==="announcement").filter(u=>{const S=u?.meta_data;return y&&S?S?.category===y:!0}).filter(u=>en(u,f)).filter(u=>l(u,N))),k=Fe([b],([g])=>g.filter(y=>{const f=y.start_time?He(y.start_time):null;return f?ot(f,{start:Ze(new Date,{weekStartsOn:1}),end:Le(new Date,{weekStartsOn:1})}):!1})),I=()=>{const g=Ze(new Date,{weekStartsOn:1}),y=Le(new Date,{weekStartsOn:1});return`${Ce(g,"MMM d").toUpperCase()} – ${Ce(y,"MMM d").toUpperCase()}`},q=Fe([b],([g])=>{const y=tt(Ze(new Date,{weekStartsOn:1}),1),f=Le(y,{weekStartsOn:1});return g.filter(N=>{const u=N.start_time?He(N.start_time):null;return u?ot(u,{start:y,end:f}):!1})}),j=()=>{const g=tt(Ze(new Date,{weekStartsOn:1}),1),y=Le(g,{weekStartsOn:1});return`${Ce(g,"MMM d").toUpperCase()} – ${Ce(y,"MMM d").toUpperCase()}`},ee=Fe([b],([g])=>{const y=tt(Ze(new Date,{weekStartsOn:1}),2),f=Le(y,{weekStartsOn:1});return g.filter(N=>{const u=N.start_time?He(N.start_time):null;return u?ot(u,{start:y,end:f}):!1})}),We=()=>{const g=tt(Ze(new Date,{weekStartsOn:1}),2),y=Le(g,{weekStartsOn:1});return`${Ce(g,"MMM d").toUpperCase()} – ${Ce(y,"MMM d").toUpperCase()}`},$e=g=>{const y=[],f=new Date,N=new Date;N.setFullYear(f.getFullYear()+1);for(const u of g)if(u.recurrence_rule&&u.start_time&&u.end_time)try{const S=na.fromString(u.recurrence_rule),te=u.recurrence_end_date?S.all():S.between(f,N,!0),fe=new Date(u.start_time),ne=new Date(u.end_time).getTime()-fe.getTime(),A=Qt(fe,bt),De=A.getHours(),Ye=A.getMinutes(),be=A.getSeconds(),O=A.getMilliseconds(),ae=u.recurrence_exceptions||[],Be=u.recurrence_overrides||{};te.forEach((oe,W)=>{const ge=Qt(oe,bt),ye=new Date(ge);ye.setHours(De,Ye,be,O);const xe=Aa(ye,bt),Ee=xe,Ue=new Date(xe.getTime()+ne),pe=Ce(oe,"yyyy-MM-dd"),P=Be[pe];if(ae.includes(pe)&&!P)return;const re={...u,id:void 0,start_time:Ee.toISOString(),end_time:Ue.toISOString(),meta_data:{category:u.meta_data?.category||"",...u.meta_data,recurring_instance:!0,recurring_parent_id:u.id,recurring_instance_index:W}};P&&(P.title!==void 0&&(re.title=P.title),P.description!==void 0&&(re.description=P.description),P.location!==void 0&&(re.location=P.location),P.start_time!==void 0&&(re.start_time=P.start_time),P.end_time!==void 0&&(re.end_time=P.end_time),P.is_all_day!==void 0&&(re.is_all_day=P.is_all_day),P.meta_data!==void 0&&(re.meta_data={...re.meta_data,...P.meta_data})),y.push(re)})}catch(S){console.error("Failed to expand recurring event:",u.id,S),y.push(u)}else y.push(u);return y},p=g=>g.length?$e(g).map(f=>({...f,start_time:f?.start_time?$t(f.start_time):void 0,end_time:f.end_time?$t(f.end_time):void 0})):[];return nt={stores:{ready:e,data:t,dbData:n,announcements:x,calendarEvents:b,calendarEventsThisWeek:k,calendarEventsNextWeek:q,calendarEventsNextNextWeek:ee,currentCategories:i,categoryFilter:r,searchQuery:s,currentCategoryFilter:d,weeksExpanded:o},actions:{reload:async()=>{e.set(!1);const g=await Oe();n.set(p(g)),e.set(!0)},calendarEventsThisWeekLabel:I,calendarEventsNextWeekLabel:j,calendarEventsNextNextWeekLabel:We}},nt},Gr=()=>nt?.stores&&Object.keys(nt.stores).length>0?nt:Ka();var Ga=M('<div class="d-flex justify-content-center py-3"><!></div>'),Va=M('<div class="text-muted text-center py-3 small">No messages yet</div>'),Qa=M('<div class="message-meta small text-muted mb-1 svelte-16a2g1f"><span class="fw-semibold"> </span> <span class="ms-1">&middot;</span> <span class="ms-1"> </span></div>'),Ja=M('<div class="message-meta small text-muted mb-1 svelte-16a2g1f"> </div>'),er=M('<i class="bi bi-trash"></i>'),tr=M('<button type="button" class="btn btn-link btn-sm text-danger p-0 mt-1 delete-btn svelte-16a2g1f" title="Delete message"><!></button>'),nr=M('<div><div><!> <div class="message-text svelte-16a2g1f"> </div> <!></div></div>'),ar=M('<i class="bi bi-send"></i>'),rr=M('<div class="messages-container svelte-16a2g1f"><!></div> <div class="input-area d-flex gap-2 pt-2 svelte-16a2g1f"><textarea class="form-control form-control-sm svelte-16a2g1f" rows="1" placeholder="Type a message..."></textarea> <button type="button" class="btn btn-primary btn-sm align-self-end" title="Send message"><!></button></div>',1),sr=M('<div class="chat-thread d-flex flex-column"><!></div>');function nn(e,t){an(t,!1);let n=Me(t,"comments",24,()=>[]),r=Me(t,"currentUserId",8),s=Me(t,"onSend",8),o=Me(t,"onDelete",8),l=Me(t,"loading",8,!1),i=Me(t,"disabled",8,!1),d=C(""),b=C(!1),x=C(null),k=C();function I(){a(k)&&requestAnimationFrame(()=>{jn(k,a(k).scrollTop=a(k).scrollHeight)})}function q(f){try{return ma(He(f),{addSuffix:!0})}catch{return""}}function j(f){return f.user_id===r()}async function ee(){const f=a(d).trim();if(!(!f||a(b)||i())){h(b,!0);try{await s()(f),h(d,""),I()}catch(N){console.error("Failed to send message:",N)}finally{h(b,!1)}}}async function We(f){if(!(a(x)||i())){h(x,f);try{await o()(f)}catch(N){console.error("Failed to delete message:",N)}finally{h(x,null)}}}function $e(f){f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),ee())}G(()=>Q(n()),()=>{n().length&&I()}),rn(),_n();var p=sr(),me=v(p);{var g=f=>{var N=Ga(),u=v(N);Ke(u,{size:"sm"}),_(N),w(f,N)},y=f=>{var N=rr(),u=Xe(N),S=v(u);{var te=O=>{var ae=Va();w(O,ae)},fe=O=>{var ae=on(),Be=Xe(ae);cn(Be,1,n,oe=>oe.id,(oe,W)=>{const ge=it(()=>(a(W),T(()=>j(a(W)))));var ye=nr();let xe;var Ee=v(ye);let Ue;var pe=v(Ee);{var P=se=>{var V=Qa(),_e=v(V),Pe=v(_e,!0);_(_e);var ze=F(_e,4),we=v(ze,!0);_(ze),_(V),B(ke=>{de(Pe,(a(W),T(()=>a(W).user_display_name))),de(we,ke)},[()=>(a(W),T(()=>q(a(W).created_at)))]),w(se,V)},re=se=>{var V=Ja(),_e=v(V,!0);_(V),B(Pe=>de(_e,Pe),[()=>(a(W),T(()=>q(a(W).created_at)))]),w(se,V)};L(pe,se=>{a(ge)?se(re,!1):se(P)})}var Ae=F(pe,2),ut=v(Ae,!0);_(Ae);var je=F(Ae,2);{var at=se=>{var V=tr(),_e=v(V);{var Pe=we=>{Ke(we,{size:"xs"})},ze=we=>{var ke=er();w(we,ke)};L(_e,we=>{a(x),a(W),T(()=>a(x)===a(W).id)?we(Pe):we(ze,!1)})}_(V),B(()=>V.disabled=(a(x),a(W),T(()=>a(x)===a(W).id))),Te("click",V,()=>We(a(W).id)),w(se,V)};L(je,se=>{a(ge)&&se(at)})}_(Ee),_(ye),B(()=>{xe=Ie(ye,1,"d-flex mb-2",null,xe,{"justify-content-end":a(ge),"justify-content-start":!a(ge)}),Ue=Ie(Ee,1,"message-bubble svelte-16a2g1f",null,Ue,{own:a(ge),other:!a(ge)}),de(ut,(a(W),T(()=>a(W).message)))}),w(oe,ye)}),w(O,ae)};L(S,O=>{Q(n()),T(()=>n().length===0)?O(te):O(fe,!1)})}_(u),pn(u,O=>h(k,O),()=>a(k));var he=F(u,2),ne=v(he);zn(ne);var A=F(ne,2),De=v(A);{var Ye=O=>{Ke(O,{size:"xs"})},be=O=>{var ae=ar();w(O,ae)};L(De,O=>{a(b)?O(Ye):O(be,!1)})}_(A),_(he),B(O=>{ne.disabled=i()||a(b),A.disabled=O},[()=>(Q(i()),a(b),a(d),T(()=>i()||a(b)||!a(d).trim()))]),ta(ne,()=>a(d),O=>h(d,O)),Te("keydown",ne,$e),Te("click",A,ee),w(f,N)};L(me,f=>{l()?f(g):f(y,!1)})}_(p),w(e,p),sn()}async function or(e){const{data:t,error:n}=await Z.from("event_bishopric_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(n)throw n;return t??[]}async function ir(e,t,n,r){const{data:s,error:o}=await Z.from("event_bishopric_comments").insert([{event_id:e,user_id:t,user_display_name:n,message:r}]).select().single();if(o)throw o;return s}async function lr(e){const{error:t}=await Z.from("event_bishopric_comments").delete().eq("id",e);if(t)throw t}var cr=M("<span> </span>"),ur=M('<div class="alert alert-info mb-0" role="alert">Save this event or announcement before requesting bishopric approvals.</div>'),dr=M('<span class="badge bg-secondary-subtle text-secondary-emphasis ms-auto"> </span>'),fr=M('<div class="card-body pt-0"><!></div>'),pr=M('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-2 p-3 w-100 chat-toggle svelte-rko3uy"><i></i> <i class="bi bi-chat-dots"></i> <span class="fw-semibold">Bishopric Discussion</span> <!></button> <!></div>'),_r=M('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),vr=M('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-rko3uy" data-bs-toggle="offcanvas"><i class="bi bi-chat-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Bishopric Discussion</span> <small class="text-muted">Private notes between bishopric members</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),mr=M('<small class="text-muted"> </small>'),hr=M("<span><!></span>"),br=M('<div class="decision-buttons d-grid gap-2 gap-md-3 svelte-rko3uy"><button type="button"><i class="bi bi-check-circle-fill"></i> <div><div class="action-label svelte-rko3uy">Approve</div> <small class="text-muted">Vote to approve</small></div></button> <button type="button"><i class="bi bi-pencil-square"></i> <div><div class="action-label svelte-rko3uy">Request Changes</div> <small class="text-muted">Ask submitter to revise</small></div></button> <button type="button"><i class="bi bi-hourglass-split"></i> <div><div class="action-label svelte-rko3uy">Mark Pending</div> <small class="text-muted">No decision yet</small></div></button> <!></div>'),gr=M("<span> </span>"),yr=M('<div class="list-group-item"><div class="d-flex flex-column gap-2"><div><div class="fw-semibold"> </div> <!></div> <div><!></div></div></div>'),wr=M('<i class="bi bi-globe-americas"></i>'),Dr=M('<button type="button" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center gap-2"><!> Unpublish</button>'),xr=M('<i class="bi bi-globe"></i>'),Sr=M('<small class="text-muted text-center">At least one approval required to publish</small>'),Mr=M('<button type="button" class="btn btn-success w-100 d-flex align-items-center justify-content-center gap-2"><!> Publish to Ward</button> <!>',1),Tr=M('<div class="card-footer text-danger small"> </div>'),kr=M('<!> <div class="card"><div class="list-group list-group-flush"></div> <div class="publish-section d-flex flex-column gap-2 p-3 svelte-rko3uy"><div class="d-flex justify-content-between align-items-center"><span class="text-muted small fw-semibold"> </span></div> <!></div> <!></div>',1),Nr=M('<div class="d-flex flex-column gap-3"><div class="d-flex flex-wrap align-items-center justify-content-between gap-2"><h3 class="h5 mb-0">Bishopric Approval</h3> <!></div> <!></div>');function Vr(e,t){an(t,!1);const n=()=>Xn(S,"$currentUserStore",r),[r,s]=Kn(),o=C(),l=C(),i=C(),d=C(),b=C(),x=C(),k=C(),I=C(),q=C(),j=C(),ee=C(),We=C(),$e=C();let p=Me(t,"eventItem",12),me=Me(t,"disabled",8,!1),g=Me(t,"reloadEvents",8,null);const y={bishop:"bishopric-bishop",first_counselor:"bishopric-first-counselor",second_counselor:"bishopric-second-counselor"},f={pending:{text:"Pending Approval",class:"bg-warning-subtle text-warning-emphasis"},approved:{text:"Approved",class:"bg-success-subtle text-success-emphasis"},needs_review:{text:"Needs Review",class:"bg-info-subtle text-info-emphasis"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis"}},N=fn()??null,u=ln(Qn),S=N?.stores.currentUser??u,te=["bishop","first_counselor","second_counselor"];let fe=C(""),he=C(null),ne=C(!1),A=C([]),De=C(!1),Ye=!1,be=C(!1);const O=`bishopric-chat-${Jn()}`;let ae=C(null),Be=C(!1),oe=C(null);function W(c){const D=y[c];return a(o)?.roles?.includes(D)??!1}function ge(c){if(!c)return null;try{return Ce(He(c),"MMM d, yyyy 'at' h:mm a")}catch(D){return console.error("Failed to format timestamp",D),null}}async function ye(){typeof g()=="function"&&await g()()}async function xe(c,D){if(p()?.id){h(fe,""),h(he,c);try{const Y=await bn(p().id,c,D,a(o)?.id);Y&&p({...p(),bishop_approval:Y.bishop_approval,first_counselor_approval:Y.first_counselor_approval,second_counselor_approval:Y.second_counselor_approval,bishop_approval_at:Y.bishop_approval_at,first_counselor_approval_at:Y.first_counselor_approval_at,second_counselor_approval_at:Y.second_counselor_approval_at,bishop_approval_by_user_id:Y.bishop_approval_by_user_id,first_counselor_approval_by_user_id:Y.first_counselor_approval_by_user_id,second_counselor_approval_by_user_id:Y.second_counselor_approval_by_user_id,is_published:Y.is_published}),await ye()}catch(Y){console.error("Failed to update approval",Y),h(fe,"Unable to update approval. Please try again.")}finally{h(he,null)}}}async function Ee(c){await xe(c,null)}async function Ue(){if(p()?.id){h(fe,""),h(ne,!0);try{const c=a(x)?await yn(p().id):await gn(p().id);c&&p({...p(),is_published:c.is_published}),await ye()}catch(c){console.error("Failed to update publish status",c),h(fe,"Unable to update publish status. Please try again.")}finally{h(ne,!1)}}}let pe=null;function P(){h(A,[]),Ye=!1,h(be,!1),h(De,!1)}Zn(()=>{Ae()});function re(c){const D=c??p()?.id??null;if(pe||!D)return;const Y=typeof window<"u"?localStorage.getItem("authToken"):null;Y&&Z.realtime.setAuth(Y),pe=Z.channel(`bishopric-comments-${D}`).on("postgres_changes",{event:"*",schema:"public",table:"event_bishopric_comments",filter:`event_id=eq.${D}`},()=>{je(D)}).subscribe()}function Ae(){pe&&(Z.removeChannel(pe),pe=null)}function ut(){h(be,!a(be))}async function je(c){const D=c??p()?.id??null;if(D){Ye||h(De,!0);try{const Y=await or(D);D===(p()?.id??null)&&(h(A,Y),Ye=!0)}catch(Y){console.error("Failed to load bishopric comments:",Y)}finally{D===(p()?.id??null)&&h(De,!1)}}}async function at(c){if(!p()?.id||!a(o)?.id)return;const D=a(o).displayName||a(o).username||"Unknown";await ir(p().id,a(o).id,D,c),await je()}async function se(c){await lr(c),await je()}function V(c){return c==="YES"?{text:"Approved",class:"bg-success-subtle text-success-emphasis"}:c==="NO"?{text:"Requested Changes",class:"bg-info-subtle text-info-emphasis"}:{text:"No Input Yet",class:"bg-secondary-subtle text-secondary-emphasis"}}const _e="btn btn-sm action-btn w-100 text-start d-flex align-items-center gap-2";function Pe(c){return`${_e} ${c==="YES"?"btn-success text-white":"btn-outline-success"}`}function ze(c){return`${_e} ${c==="NO"?"btn-info text-dark":"btn-outline-info"}`}function we(c){const D=c==null;return`${_e} ${D?"btn-secondary text-white":"btn-outline-secondary"}`}G(()=>n(),()=>{h(o,n())}),G(()=>Q(p()),()=>{h(l,za(p()))}),G(()=>a(l),()=>{h(i,f[a(l)])}),G(()=>Q(p()),()=>{h(d,Yt(p()))}),G(()=>Q(p()),()=>{h(b,ja(p()))}),G(()=>Q(p()),()=>{h(x,p()?.is_published??!1)}),G(()=>Q(p()),()=>{h(k,{bishop:p()?.bishop_approval,first_counselor:p()?.first_counselor_approval,second_counselor:p()?.second_counselor_approval})}),G(()=>Q(p()),()=>{h(I,{bishop:p()?.bishop_approval_at,first_counselor:p()?.first_counselor_approval_at,second_counselor:p()?.second_counselor_approval_at})}),G(()=>a(o),()=>{h(q,a(o)?.roles?.includes("bishopric-bishop")??!1)}),G(()=>a(o),()=>{h(j,a(o)?.roles?.includes("bishopric-first-counselor")??!1)}),G(()=>a(o),()=>{h(ee,a(o)?.roles?.includes("bishopric-second-counselor")??!1)}),G(()=>(a(q),a(j),a(ee)),()=>{h(We,a(q)||a(j)||a(ee))}),G(()=>(a(q),a(j),a(ee)),()=>{h($e,a(q)?te:te.filter(c=>c==="bishop"||c==="first_counselor"&&a(j)||c==="second_counselor"&&a(ee)))}),G(()=>a(ae),()=>{h(Be,!!a(ae)?.closest(".offcanvas"))}),G(()=>(Q(p()),a(oe)),()=>{const c=p()?.id??null;c&&c!==a(oe)?(h(oe,c),P(),Ae(),je(c),re(c)):!c&&a(oe)!==null&&(h(oe,null),P(),Ae())}),rn(),_n();var ke=Nr(),dt=v(ke),xn=F(v(dt),2);{var Sn=c=>{var D=cr(),Y=v(D,!0);_(D),B(()=>{Ie(D,1,(a(i),T(()=>`badge ${a(i).class}`)),"svelte-rko3uy"),de(Y,(a(i),T(()=>a(i).text)))}),w(c,D)};L(xn,c=>{Q(p()),T(()=>p()?.id)&&c(Sn)})}_(dt);var Mn=F(dt,2);{var Tn=c=>{var D=ur();w(c,D)},kn=c=>{var D=kr(),Y=Xe(D);{var Nn=X=>{var m=on(),K=Xe(m);{var Ne=$=>{var ie=pr(),le=v(ie),H=v(le);let ce;var Ge=F(H,6);{var Ve=E=>{var U=dr(),ue=v(U,!0);_(U),B(()=>de(ue,(a(A),T(()=>a(A).length)))),w(E,U)};L(Ge,E=>{a(A),T(()=>a(A).length>0)&&E(Ve)})}_(le);var Qe=F(le,2);{var z=E=>{var U=fr(),ue=v(U);{let qe=it(()=>(a(o),T(()=>a(o)?.id??-1)));nn(ue,{get comments(){return a(A)},get currentUserId(){return a(qe)},onSend:at,onDelete:se,get loading(){return a(De)},get disabled(){return me()}})}_(U),w(E,U)};L(Qe,E=>{a(be)&&E(z)})}_(ie),B(()=>ce=Ie(H,1,"bi",null,ce,{"bi-chevron-right":!a(be),"bi-chevron-down":a(be)})),Te("click",le,ut),w($,ie)},Se=$=>{var ie=vr(),le=Xe(ie),H=v(le),ce=F(v(H),4),Ge=v(ce);{var Ve=z=>{var E=_r(),U=v(E,!0);_(E),B(()=>de(U,(a(A),T(()=>a(A).length)))),w(z,E)};L(Ge,z=>{a(A),T(()=>a(A).length>0)&&z(Ve)})}mt(2),_(ce),_(H),_(le);var Qe=F(le,2);ea(Qe,{get id(){return O},title:"Bishopric Discussion",breakpoint:"md",children:(z,E)=>{{let U=it(()=>(a(o),T(()=>a(o)?.id??-1)));nn(z,{get comments(){return a(A)},get currentUserId(){return a(U)},onSend:at,onDelete:se,get loading(){return a(De)},get disabled(){return me()}})}},$$slots:{default:!0}}),B(()=>{ht(H,"data-bs-target",`#${O}`),ht(H,"aria-controls",O)}),w($,ie)};L(K,$=>{a(Be)?$(Ne):$(Se,!1)})}w(X,m)};L(Y,X=>{a(We)&&X(Nn)})}var Et=F(Y,2),ft=v(Et);cn(ft,5,()=>a($e),Gn,(X,m)=>{var K=yr(),Ne=v(K),Se=v(Ne),$=v(Se),ie=v($,!0);_($);var le=F($,2);{var H=z=>{var E=mr(),U=v(E,!0);_(E),B(ue=>de(U,ue),[()=>(a(I),a(m),T(()=>ge(a(I)[a(m)])))]),w(z,E)};L(le,z=>{a(I),a(m),T(()=>a(I)[a(m)])&&z(H)})}_(Se);var ce=F(Se,2),Ge=v(ce);{var Ve=z=>{var E=br(),U=v(E),ue=F(U,2),qe=F(ue,2),An=F(qe,2);{var Pn=Je=>{var et=hr(),vt=v(et);Ke(vt,{size:"xs"}),_(et),w(Je,et)};L(An,Je=>{a(he)===a(m)&&Je(Pn)})}_(E),B((Je,et,vt)=>{Ie(U,1,Je,"svelte-rko3uy"),U.disabled=me()||a(he)===a(m),Ie(ue,1,et,"svelte-rko3uy"),ue.disabled=me()||a(he)===a(m),Ie(qe,1,vt,"svelte-rko3uy"),qe.disabled=me()||a(he)===a(m)},[()=>gt((a(k),a(m),T(()=>Pe(a(k)[a(m)])))),()=>gt((a(k),a(m),T(()=>ze(a(k)[a(m)])))),()=>gt((a(k),a(m),T(()=>we(a(k)[a(m)]))))]),Te("click",U,()=>xe(a(m),"YES")),Te("click",ue,()=>xe(a(m),"NO")),Te("click",qe,()=>Ee(a(m))),w(z,E)},Qe=z=>{const E=it(()=>(a(k),a(m),T(()=>V(a(k)[a(m)]))));var U=gr(),ue=v(U,!0);_(U),B(()=>{Ie(U,1,(Q(a(E)),T(()=>`badge ${a(E).class}`)),"svelte-rko3uy"),de(ue,(Q(a(E)),T(()=>a(E).text)))}),w(z,U)};L(Ge,z=>{a(m),T(()=>W(a(m)))?z(Ve):z(Qe,!1)})}_(ce),_(Ne),_(K),B(()=>de(ie,(Q(Jt),a(m),T(()=>Jt[a(m)])))),w(X,K)}),_(ft);var pt=F(ft,2),_t=v(pt),Ut=v(_t),Cn=v(Ut);_(Ut),_(_t);var In=F(_t,2);{var On=X=>{var m=Dr(),K=v(m);{var Ne=$=>{Ke($,{size:"xs"})},Se=$=>{var ie=wr();w($,ie)};L(K,$=>{a(ne)?$(Ne):$(Se,!1)})}mt(),_(m),B(()=>m.disabled=me()||a(ne)),Te("click",m,Ue),w(X,m)},Yn=X=>{var m=Mr(),K=Xe(m),Ne=v(K);{var Se=H=>{Ke(H,{size:"xs"})},$=H=>{var ce=xr();w(H,ce)};L(Ne,H=>{a(ne)?H(Se):H($,!1)})}mt(),_(K);var ie=F(K,2);{var le=H=>{var ce=Sr();w(H,ce)};L(ie,H=>{a(b)||H(le)})}B(()=>{K.disabled=me()||a(ne)||!a(b),ht(K,"title",a(b)?"":"At least one approval required to publish")}),Te("click",K,Ue),w(X,m)};L(In,X=>{a(x)?X(On):X(Yn,!1)})}_(pt);var En=F(pt,2);{var Un=X=>{var m=Tr(),K=v(m,!0);_(m),B(()=>de(K,a(fe))),w(X,m)};L(En,X=>{a(fe)&&X(Un)})}_(Et),B(()=>de(Cn,`Approvals: ${a(d)??""} of 3`)),w(c,D)};L(Mn,c=>{Q(p()),T(()=>!p()?.id)?c(Tn):c(kn,!1)})}_(ke),pn(ke,c=>h(ae,c),()=>a(ae)),w(e,ke),sn(),s()}export{Vr as B,Ba as C,Nt as D,za as a,Zr as b,Fa as c,Ha as d,tt as e,Aa as f,Gr as g,zr as h,Le as i,Yt as j,sa as k,ma as l,Xr as m,Kr as n,wn as o,$a as p,La as q,hn as r,ct as s,Qt as t,Wa as u,Pa as v,qr as w};
