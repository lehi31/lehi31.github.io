import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{t as ye,j as Kr,k as Vr,K as oa,bb as la,L as Xr,Y as ca,ac as ua,b1 as da,a_ as fa,N as va,G as er,p as et,aj as Le,D as q,E as me,w as X,ak as Nt,c as N,s as Q,u as V,r as U,g as d,a as tt,f as Be,F as Je,i as kr,am as ma,R as zt,as as yr,z as ha}from"./DVz9v3yu.js";import{p as ue,i as he,e as xe,s as _e,b as bn,a as wn,c as pa,m as ya,u as ga}from"./DxLPEELx.js";import{b as Jr,d as _a,f as ie,a as ee,c as Er,t as ar}from"./BMBpHE4F.js";import{e as Zt,i as xn}from"./BoUt-3Zs.js";import{d as Dn,s as ke,b as Tr,r as $e}from"./Zte9W7v2.js";import{t as Ge,x as qe,y as Fr,E as ba,F as wa,G as xa,H as Da,k as xt,D as kn,I as ka,C as Ea,l as En,z as Ta,J as en,K as Aa,L as tn,M as Ia,s as mt,p as kt,f as Me,N as rn,Q as Ne,c as Ze,h as Ma,R as Ca}from"./nNGA7-yB.js";import{s as ir}from"./CdEA5IGF.js";import{i as it}from"./B41JjjA1.js";import{R as Te}from"./o20ij3IV.js";import{S as Tn}from"./Ct0CT-jp.js";import{b as ft,a as Or,c as gr}from"./DSlOdaIK.js";import{b as qt}from"./BfcxZoyz.js";import{b as At}from"./DGrLfHTH.js";import{w as Dt,g as nn,d as Ot,c as Ra,o as Fa}from"./CxzQr61Z.js";import{t as wt}from"./r7-tBYgy.js";import{c as Oa}from"./C5uofNW2.js";import{c as Sa,a as ot,f as an,h as Pa,e as Ua,V as Na}from"./Ccm4kzzT.js";import{_ as Ar}from"./CmsKOCeN.js";import{s as Ya,i as La}from"./rN9Z-W37.js";function Bt(i,e,n=!1,r=!1,t=!1){var a=i,c="";ye(()=>{var u=oa;if(c===(c=e()??"")){Kr&&Vr();return}if(u.nodes!==null&&(la(u.nodes.start,u.nodes.end),u.nodes=null),c!==""){if(Kr){Xr.data;for(var p=Vr(),_=p;p!==null&&(p.nodeType!==ca||p.data!=="");)_=p,p=ua(p);if(p===null)throw da(),fa;Jr(Xr,_),a=va(p);return}var s=c+"";n?s=`<svg>${s}</svg>`:r&&(s=`<math>${s}</math>`);var o=_a(s);if((n||r)&&(o=er(o)),Jr(er(o),o.lastChild),n||r)for(;er(o);)a.before(er(o));else a.before(o)}})}function Ut(i,e){const n=Ge(i);return isNaN(e)?qe(i,NaN):(e&&n.setDate(n.getDate()+e),n)}function jt(i,e){const n=e*7;return Ut(i,n)}function St(i,e){const n=Fr(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,t=Ge(i),a=t.getDay(),c=(a<r?-7:0)+6-(a-r);return t.setDate(t.getDate()+c),t.setHours(23,59,59,999),t}function Ha(){return Object.assign({},Fr())}function za(i){let n=Ge(i).getDay();return n===0&&(n=7),n}function Wa(i,e){const n=e instanceof Date?qe(e,0):new e(0);return n.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),n.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),n}const qa=10;class An{subPriority=0;validate(e,n){return!0}}class Ba extends An{constructor(e,n,r,t,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=t,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class $a extends An{priority=qa;subPriority=-1;set(e,n){return n.timestampIsSet?e:qe(e,Wa(e,Date))}}class Ee{run(e,n,r,t){const a=this.parse(e,n,r,t);return a?{setter:new Ba(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class Qa extends Ee{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Pe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ut={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ue(i,e){return i&&{value:e(i.value),rest:i.rest}}function Ce(i,e){const n=e.match(i);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function dt(i,e){const n=e.match(i);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,t=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,c=n[5]?parseInt(n[5],10):0;return{value:r*(t*ba+a*wa+c*xa),rest:e.slice(n[0].length)}}function In(i){return Ce(Pe.anyDigitsSigned,i)}function Oe(i,e){switch(i){case 1:return Ce(Pe.singleDigit,e);case 2:return Ce(Pe.twoDigits,e);case 3:return Ce(Pe.threeDigits,e);case 4:return Ce(Pe.fourDigits,e);default:return Ce(new RegExp("^\\d{1,"+i+"}"),e)}}function sr(i,e){switch(i){case 1:return Ce(Pe.singleDigitSigned,e);case 2:return Ce(Pe.twoDigitsSigned,e);case 3:return Ce(Pe.threeDigitsSigned,e);case 4:return Ce(Pe.fourDigitsSigned,e);default:return Ce(new RegExp("^-?\\d{1,"+i+"}"),e)}}function Sr(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Mn(i,e){const n=e>0,r=n?e:1-e;let t;if(r<=50)t=i||100;else{const a=r+50,c=Math.trunc(a/100)*100,u=i>=a%100;t=i+c-(u?100:0)}return n?t:1-t}function Cn(i){return i%400===0||i%4===0&&i%100!==0}class ja extends Ee{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ue(Oe(4,e),t);case"yo":return Ue(r.ordinalNumber(e,{unit:"year"}),t);default:return Ue(Oe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const t=e.getFullYear();if(r.isTwoDigitYear){const c=Mn(r.year,t);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Ga extends Ee{priority=130;parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ue(Oe(4,e),t);case"Yo":return Ue(r.ordinalNumber(e,{unit:"year"}),t);default:return Ue(Oe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,t){const a=Da(e,t);if(r.isTwoDigitYear){const u=Mn(r.year,a);return e.setFullYear(u,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}const c=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(c,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Za extends Ee{priority=130;parse(e,n){return sr(n==="R"?4:n.length,e)}set(e,n,r){const t=qe(e,0);return t.setFullYear(r,0,4),t.setHours(0,0,0,0),kn(t)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Ka extends Ee{priority=130;parse(e,n){return sr(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Va extends Ee{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Oe(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Xa extends Ee{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Oe(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Ja extends Ee{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"M":return Ue(Ce(Pe.month,e),t);case"MM":return Ue(Oe(2,e),t);case"Mo":return Ue(r.ordinalNumber(e,{unit:"month"}),t);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ei extends Ee{priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"L":return Ue(Ce(Pe.month,e),t);case"LL":return Ue(Oe(2,e),t);case"Lo":return Ue(r.ordinalNumber(e,{unit:"month"}),t);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function ti(i,e,n){const r=Ge(i),t=ka(r,n)-e;return r.setDate(r.getDate()-t*7),r}class ri extends Ee{priority=100;parse(e,n,r){switch(n){case"w":return Ce(Pe.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Oe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,t){return xt(ti(e,r,t),t)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ni(i,e){const n=Ge(i),r=Ea(n)-e;return n.setDate(n.getDate()-r*7),n}class ai extends Ee{priority=100;parse(e,n,r){switch(n){case"I":return Ce(Pe.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Oe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return kn(ni(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ii=[31,28,31,30,31,30,31,31,30,31,30,31],si=[31,29,31,30,31,30,31,31,30,31,30,31];class oi extends Ee{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Ce(Pe.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Oe(n.length,e)}}validate(e,n){const r=e.getFullYear(),t=Cn(r),a=e.getMonth();return t?n>=1&&n<=si[a]:n>=1&&n<=ii[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class li extends Ee{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Ce(Pe.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Oe(n.length,e)}}validate(e,n){const r=e.getFullYear();return Cn(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Pr(i,e,n){const r=Fr(),t=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ge(i),c=a.getDay(),p=(e%7+7)%7,_=7-t,s=e<0||e>6?e-(c+_)%7:(p+_)%7-(c+_)%7;return Ut(a,s)}class ci extends Ee{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Pr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ui extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return Ue(Oe(n.length,e),a);case"eo":return Ue(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Pr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class di extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return Ue(Oe(n.length,e),a);case"co":return Ue(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Pr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function fi(i,e){const n=Ge(i),r=za(n),t=e-r;return Ut(n,t)}class vi extends Ee{priority=90;parse(e,n,r){const t=a=>a===0?7:a;switch(n){case"i":case"ii":return Oe(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ue(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiii":return Ue(r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiiii":return Ue(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiii":default:return Ue(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=fi(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class mi extends Ee{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Sr(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class hi extends Ee{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Sr(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class pi extends Ee{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Sr(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class yi extends Ee{priority=70;parse(e,n,r){switch(n){case"h":return Ce(Pe.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Oe(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const t=e.getHours()>=12;return t&&r<12?e.setHours(r+12,0,0,0):!t&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class gi extends Ee{priority=70;parse(e,n,r){switch(n){case"H":return Ce(Pe.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Oe(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class _i extends Ee{priority=70;parse(e,n,r){switch(n){case"K":return Ce(Pe.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Oe(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class bi extends Ee{priority=70;parse(e,n,r){switch(n){case"k":return Ce(Pe.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Oe(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const t=r<=24?r%24:r;return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class wi extends Ee{priority=60;parse(e,n,r){switch(n){case"m":return Ce(Pe.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Oe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class xi extends Ee{priority=50;parse(e,n,r){switch(n){case"s":return Ce(Pe.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Oe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Di extends Ee{priority=30;parse(e,n){const r=t=>Math.trunc(t*Math.pow(10,-n.length+3));return Ue(Oe(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class ki extends Ee{priority=10;parse(e,n){switch(n){case"X":return dt(ut.basicOptionalMinutes,e);case"XX":return dt(ut.basic,e);case"XXXX":return dt(ut.basicOptionalSeconds,e);case"XXXXX":return dt(ut.extendedOptionalSeconds,e);case"XXX":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:qe(e,e.getTime()-En(e)-r)}incompatibleTokens=["t","T","x"]}class Ei extends Ee{priority=10;parse(e,n){switch(n){case"x":return dt(ut.basicOptionalMinutes,e);case"xx":return dt(ut.basic,e);case"xxxx":return dt(ut.basicOptionalSeconds,e);case"xxxxx":return dt(ut.extendedOptionalSeconds,e);case"xxx":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:qe(e,e.getTime()-En(e)-r)}incompatibleTokens=["t","T","X"]}class Ti extends Ee{priority=40;parse(e){return In(e)}set(e,n,r){return[qe(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Ai extends Ee{priority=20;parse(e){return In(e)}set(e,n,r){return[qe(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Ii={G:new Qa,y:new ja,Y:new Ga,R:new Za,u:new Ka,Q:new Va,q:new Xa,M:new Ja,L:new ei,w:new ri,I:new ai,d:new oi,D:new li,E:new ci,e:new ui,c:new di,i:new vi,a:new mi,b:new hi,B:new pi,h:new yi,H:new gi,K:new _i,k:new bi,m:new wi,s:new xi,S:new Di,X:new ki,x:new Ei,t:new Ti,T:new Ai},Mi=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ci=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ri=/^'([^]*?)'?$/,Fi=/''/g,Oi=/\S/,Si=/[a-zA-Z]/;function or(i,e,n,r){const t=Ha(),a=r?.locale??t.locale??Ta,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0;if(e==="")return i===""?Ge(n):qe(n,NaN);const p={firstWeekContainsDate:c,weekStartsOn:u,locale:a},_=[new $a],s=e.match(Ci).map(E=>{const F=E[0];if(F in en){const w=en[F];return w(E,a.formatLong)}return E}).join("").match(Mi),o=[];for(let E of s){!r?.useAdditionalWeekYearTokens&&Aa(E)&&tn(E,e,i),!r?.useAdditionalDayOfYearTokens&&Ia(E)&&tn(E,e,i);const F=E[0],w=Ii[F];if(w){const{incompatibleTokens:Y}=w;if(Array.isArray(Y)){const I=o.find(P=>Y.includes(P.token)||P.token===F);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${E}\` at the same time`)}else if(w.incompatibleTokens==="*"&&o.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);o.push({token:F,fullToken:E});const O=w.run(i,E,a.match,p);if(!O)return qe(n,NaN);_.push(O.setter),i=O.rest}else{if(F.match(Si))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");if(E==="''"?E="'":F==="'"&&(E=Pi(E)),i.indexOf(E)===0)i=i.slice(E.length);else return qe(n,NaN)}}if(i.length>0&&Oi.test(i))return qe(n,NaN);const l=_.map(E=>E.priority).sort((E,F)=>F-E).filter((E,F,w)=>w.indexOf(E)===F).map(E=>_.filter(F=>F.priority===E).sort((F,w)=>w.subPriority-F.subPriority)).map(E=>E[0]);let v=Ge(n);if(isNaN(v.getTime()))return qe(n,NaN);const g={};for(const E of l){if(!E.validate(v,p))return qe(n,NaN);const F=E.set(v,g,p);Array.isArray(F)?(v=F[0],Object.assign(g,F[1])):v=F}return qe(n,v)}function Pi(i){return i.match(Ri)[1].replace(Fi,"'")}function tr(i,e){const n=+Ge(i),[r,t]=[+Ge(e.start),+Ge(e.end)].sort((a,c)=>a-c);return n>=r&&n<=t}function Ui(i,e){const n=Ge(i);return n.setHours(e),n}function Ni(i,e){const n=Ge(i);return n.setMinutes(e),n}function Yi(i,e){const n=qi(e);return"formatToParts"in n?Hi(n,i):zi(n,i)}const Li={year:0,month:1,day:2,hour:3,minute:4,second:5};function Hi(i,e){try{const n=i.formatToParts(e),r=[];for(let t=0;t<n.length;t++){const a=Li[n[t].type];a!==void 0&&(r[a]=parseInt(n[t].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function zi(i,e){const n=i.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const _r={},sn=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Wi=sn==="06/25/2014, 00:00:00"||sn==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function qi(i){return _r[i]||(_r[i]=Wi?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),_r[i]}function Ur(i,e,n,r,t,a,c){const u=new Date(0);return u.setUTCFullYear(i,e,n),u.setUTCHours(r,t,a,c),u}const on=36e5,Bi=6e4,br={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Nr(i,e,n){if(!i)return 0;let r=br.timezoneZ.exec(i);if(r)return 0;let t,a;if(r=br.timezoneHH.exec(i),r)return t=parseInt(r[1],10),ln(t)?-(t*on):NaN;if(r=br.timezoneHHMM.exec(i),r){t=parseInt(r[2],10);const c=parseInt(r[3],10);return ln(t,c)?(a=Math.abs(t)*on+c*Bi,r[1]==="+"?-a:a):NaN}if(ji(i)){e=new Date(e||Date.now());const c=n?e:$i(e),u=Ir(c,i);return-(n?u:Qi(e,u,i))}return NaN}function $i(i){return Ur(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}function Ir(i,e){const n=Yi(i,e),r=Ur(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let t=i.getTime();const a=t%1e3;return t-=a>=0?a:1e3+a,r-t}function Qi(i,e,n){let t=i.getTime()-e;const a=Ir(new Date(t),n);if(e===a)return e;t-=a-e;const c=Ir(new Date(t),n);return a===c?a:Math.max(a,c)}function ln(i,e){return-23<=i&&i<=23&&(e==null||0<=e&&e<=59)}const cn={};function ji(i){if(cn[i])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:i}),cn[i]=!0,!0}catch{return!1}}function un(i){const e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),+i-+e}const Rn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,wr=36e5,dn=6e4,Gi=2,Qe={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Rn};function Mr(i,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(i===null)return new Date(NaN);const n=e.additionalDigits==null?Gi:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]")return new Date(i.getTime());if(typeof i=="number"||Object.prototype.toString.call(i)==="[object Number]")return new Date(i);if(Object.prototype.toString.call(i)!=="[object String]")return new Date(NaN);const r=Zi(i),{year:t,restDateString:a}=Ki(r.date,n),c=Vi(a,t);if(c===null||isNaN(c.getTime()))return new Date(NaN);if(c){const u=c.getTime();let p=0,_;if(r.time&&(p=Xi(r.time),p===null||isNaN(p)))return new Date(NaN);if(r.timeZone||e.timeZone){if(_=Nr(r.timeZone||e.timeZone,new Date(u+p)),isNaN(_))return new Date(NaN)}else _=un(new Date(u+p)),_=un(new Date(u+p+_));return new Date(u+p+_)}else return new Date(NaN)}function Zi(i){const e={};let n=Qe.dateTimePattern.exec(i),r;if(n?(e.date=n[1],r=n[3]):(n=Qe.datePattern.exec(i),n?(e.date=n[1],r=n[2]):(e.date=null,r=i)),r){const t=Qe.timeZone.exec(r);t?(e.time=r.replace(t[1],""),e.timeZone=t[1].trim()):e.time=r}return e}function Ki(i,e){if(i){const n=Qe.YYY[e],r=Qe.YYYYY[e];let t=Qe.YYYY.exec(i)||r.exec(i);if(t){const a=t[1];return{year:parseInt(a,10),restDateString:i.slice(a.length)}}if(t=Qe.YY.exec(i)||n.exec(i),t){const a=t[1];return{year:parseInt(a,10)*100,restDateString:i.slice(a.length)}}}return{year:null}}function Vi(i,e){if(e===null)return null;let n,r,t;if(!i||!i.length)return n=new Date(0),n.setUTCFullYear(e),n;let a=Qe.MM.exec(i);if(a)return n=new Date(0),r=parseInt(a[1],10)-1,vn(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(a=Qe.DDD.exec(i),a){n=new Date(0);const c=parseInt(a[1],10);return ts(e,c)?(n.setUTCFullYear(e,0,c),n):new Date(NaN)}if(a=Qe.MMDD.exec(i),a){n=new Date(0),r=parseInt(a[1],10)-1;const c=parseInt(a[2],10);return vn(e,r,c)?(n.setUTCFullYear(e,r,c),n):new Date(NaN)}if(a=Qe.Www.exec(i),a)return t=parseInt(a[1],10)-1,mn(t)?fn(e,t):new Date(NaN);if(a=Qe.WwwD.exec(i),a){t=parseInt(a[1],10)-1;const c=parseInt(a[2],10)-1;return mn(t,c)?fn(e,t,c):new Date(NaN)}return null}function Xi(i){let e,n,r=Qe.HH.exec(i);if(r)return e=parseFloat(r[1].replace(",",".")),xr(e)?e%24*wr:NaN;if(r=Qe.HHMM.exec(i),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),xr(e,n)?e%24*wr+n*dn:NaN;if(r=Qe.HHMMSS.exec(i),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const t=parseFloat(r[3].replace(",","."));return xr(e,n,t)?e%24*wr+n*dn+t*1e3:NaN}return null}function fn(i,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(i,0,4);const t=r.getUTCDay()||7,a=e*7+n+1-t;return r.setUTCDate(r.getUTCDate()+a),r}const Ji=[31,28,31,30,31,30,31,31,30,31,30,31],es=[31,29,31,30,31,30,31,31,30,31,30,31];function Fn(i){return i%400===0||i%4===0&&i%100!==0}function vn(i,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=Fn(i);if(r&&n>es[e]||!r&&n>Ji[e])return!1}return!0}function ts(i,e){if(e<1)return!1;const n=Fn(i);return!(n&&e>366||!n&&e>365)}function mn(i,e){return!(i<0||i>52||e!=null&&(e<0||e>6))}function xr(i,e,n){return!(i<0||i>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function vt(i,e,n){i=Mr(i,n);const r=Nr(e,i,!0),t=new Date(i.getTime()-r),a=new Date(0);return a.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),a.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),a}function It(i,e,n){if(typeof i=="string"&&!i.match(Rn))return Mr(i,{...n,timeZone:e});i=Mr(i,n);const r=Ur(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),t=Nr(e,new Date(r));return new Date(r+t)}const Cr=Dt([]);let lt=null;async function Yt(){return lt||(lt=(async()=>{const{data:i,error:e}=await mt.from("calendar_events").select("*").order("start_time",{ascending:!0});if(e)throw lt=null,e;const n=i||[];return Cr.set(n),setTimeout(()=>{lt=null},100),n})(),lt)}async function Lt(i){let e=nn(Cr);return e.length||(await Yt(),e=nn(Cr)),e.find(n=>n.id===i)}async function Yr(i){const{data:e,error:n}=await mt.from("calendar_events").insert([i]).select();if(n)throw n;return lt=null,await Yt(),e?e[0]:void 0}async function Mt(i,e){const{data:n,error:r}=await mt.from("calendar_events").update(e).eq("id",i).select();if(r)throw r;return lt=null,await Yt(),n?n[0]:void 0}async function Lr(i){const e=await Lt(i),{error:n}=await mt.from("calendar_events").delete().eq("id",i);if(n)throw n;e?.attachments&&e.attachments.length>0&&await zr(e.attachments),lt=null,await Yt()}async function rs(i=new Date){const e=i.toISOString(),{data:n,error:r}=await mt.from("calendar_events").select("*").lt("start_time",e).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const t=[],a=[];for(const u of n){if(u.recurrence_rule&&(!u.recurrence_end_date||u.recurrence_end_date&&new Date(u.recurrence_end_date)>=i)){a.push(u);continue}t.push(u)}let c=0;if(t.length>0){const u=t.map(p=>p.id).filter(p=>p!==void 0);if(u.length>0){const{data:p,error:_}=await mt.from("calendar_events").delete().in("id",u).select("id");if(_)throw _;c=p?.length??0;for(const s of t)s.attachments&&s.attachments.length>0&&await zr(s.attachments)}}return lt=null,await Yt(),{deleted:c,skipped:a.length}}async function On(i,e){const n=i.name.split(".").pop()||"bin",r=e||"temp",a=`${crypto.randomUUID()}.${n}`,c=`${r}/${a}`,{error:u}=await mt.storage.from("event-attachments").upload(c,i,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:{publicUrl:p}}=mt.storage.from("event-attachments").getPublicUrl(c);return{id:crypto.randomUUID(),name:i.name,url:p,type:i.type,size:i.size,uploadedAt:new Date().toISOString()}}async function Sn(i){const{error:e}=await mt.storage.from("event-attachments").remove([i]);if(e)throw e}function Hr(i){const e=i.match(/event-attachments\/(.+)$/);return e?e[1]:""}async function zr(i){if(!i||i.length===0)return;const e=i.map(n=>Hr(n.url)).filter(n=>n);if(e.length>0){const{error:n}=await mt.storage.from("event-attachments").remove(e);if(n)throw n}}const kl=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Yr,deleteCalendarEvent:Lr,deleteEventAttachment:Sn,deleteEventAttachments:zr,deletePastCalendarEvents:rs,extractStoragePath:Hr,getAllCalendarEvents:Yt,getCalendarEvent:Lt,updateCalendarEvent:Mt,uploadEventAttachment:On},Symbol.toStringTag,{value:"Module"})),ns={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21}},lr=Object.values(ns).sort((i,e)=>i.sort_index-e.sort_index),Et=i=>i?lr.find(e=>e.key===i):void 0;let Gt=null;const as=i=>i.replace(/<[^>]*>/g,"").toLowerCase(),hn=(i,e)=>{if(!e.trim())return!0;const n=e.toLowerCase(),r=(i.title||"").toLowerCase(),t=as(i.description||""),a=(i.location||"").toLowerCase();return r.includes(n)||t.includes(n)||a.includes(n)},Tt=(i,e)=>{if(!e.trim()||!i)return pn(i||"");const n=pn(i),r=new RegExp(`(${Pn(e)})`,"gi");return n.replace(r,"<mark>$1</mark>")},cr=(i,e)=>{if(!e.trim()||!i)return i||"";const n=new RegExp(`(${Pn(e)})`,"gi");return i.replace(/(<[^>]*>)|([^<]+)/g,(r,t,a)=>t||(a?a.replace(n,"<mark>$1</mark>"):r))},pn=i=>{const e=typeof document<"u"?document.createElement("div"):null;return e?(e.textContent=i,e.innerHTML):i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Pn=i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),is=()=>{const i=Dt(!1),e=Dt([]),n=Dt([]),r=Dt(""),t=Dt(""),a=Dt(!1),c=Ot([n],([O])=>{const I=new Date,P=St(jt(I,3),{weekStartsOn:1}),b=O.filter(T=>T?.meta_data?.category?.length).filter(T=>{if(T.event_type==="calendar_event"){const m=T.start_time?kt(T.start_time):null;return m?tr(m,{start:I,end:P}):!1}return!0}).map(T=>lr.find(m=>m.key===T.meta_data?.category)).filter(T=>T!==void 0);return Array.from(new Set(b))}),u=Ot([r],([O])=>lr.find(I=>I.key===O)),p=Ot([n,r,t],([O,I,P])=>O.filter(b=>b.event_type==="calendar_event").filter(b=>{const T=b?.meta_data;return I&&T?T?.category===I:!0}).filter(b=>hn(b,P)).filter(b=>{const T=b.start_time?kt(b.start_time):null,m=Ya();return T?La(T,m)||T.getTime()>=m.getTime():!1})),_=Ot([n,r,t],([O,I,P])=>O.filter(b=>b.event_type==="announcement").filter(b=>{const T=b?.meta_data;return I&&T?T?.category===I:!0}).filter(b=>hn(b,P))),s=Ot([p],([O])=>O.filter(I=>{const P=I.start_time?kt(I.start_time):null;return P?tr(P,{start:xt(new Date,{weekStartsOn:1}),end:St(new Date,{weekStartsOn:1})}):!1})),o=()=>{const O=xt(new Date,{weekStartsOn:1}),I=St(new Date,{weekStartsOn:1});return`${Me(O,"MMM d").toUpperCase()} – ${Me(I,"MMM d").toUpperCase()}`},l=Ot([p],([O])=>{const I=jt(xt(new Date,{weekStartsOn:1}),1),P=St(I,{weekStartsOn:1});return O.filter(b=>{const T=b.start_time?kt(b.start_time):null;return T?tr(T,{start:I,end:P}):!1})}),v=()=>{const O=jt(xt(new Date,{weekStartsOn:1}),1),I=St(O,{weekStartsOn:1});return`${Me(O,"MMM d").toUpperCase()} – ${Me(I,"MMM d").toUpperCase()}`},g=Ot([p],([O])=>{const I=jt(xt(new Date,{weekStartsOn:1}),2),P=St(I,{weekStartsOn:1});return O.filter(b=>{const T=b.start_time?kt(b.start_time):null;return T?tr(T,{start:I,end:P}):!1})}),E=()=>{const O=jt(xt(new Date,{weekStartsOn:1}),2),I=St(O,{weekStartsOn:1});return`${Me(O,"MMM d").toUpperCase()} – ${Me(I,"MMM d").toUpperCase()}`},F=O=>{const I=[],P=new Date,b=new Date;b.setFullYear(P.getFullYear()+1);for(const T of O)if(T.recurrence_rule&&T.start_time&&T.end_time)try{const m=Te.fromString(T.recurrence_rule),y=T.recurrence_end_date?m.all():m.between(P,b,!0),k=new Date(T.start_time),x=new Date(T.end_time).getTime()-k.getTime(),R=vt(k,Ne),D=R.getHours(),A=R.getMinutes(),h=R.getSeconds(),f=R.getMilliseconds(),S=T.recurrence_exceptions||[],C=T.recurrence_overrides||{};y.forEach((L,Z)=>{const H=vt(L,Ne),j=new Date(H);j.setHours(D,A,h,f);const W=It(j,Ne),z=W,oe=new Date(W.getTime()+x),$=Me(L,"yyyy-MM-dd"),G=C[$];if(S.includes($)&&!G)return;const B={...T,id:void 0,start_time:z.toISOString(),end_time:oe.toISOString(),meta_data:{category:T.meta_data?.category||"",...T.meta_data,recurring_instance:!0,recurring_parent_id:T.id,recurring_instance_index:Z}};G&&(G.title!==void 0&&(B.title=G.title),G.description!==void 0&&(B.description=G.description),G.location!==void 0&&(B.location=G.location),G.start_time!==void 0&&(B.start_time=G.start_time),G.end_time!==void 0&&(B.end_time=G.end_time),G.is_all_day!==void 0&&(B.is_all_day=G.is_all_day),G.meta_data!==void 0&&(B.meta_data={...B.meta_data,...G.meta_data})),I.push(B)})}catch(m){console.error("Failed to expand recurring event:",T.id,m),I.push(T)}else I.push(T);return I},w=O=>O.length?F(O).map(P=>({...P,start_time:P?.start_time?rn(P.start_time):void 0,end_time:P.end_time?rn(P.end_time):void 0})):[];return Gt={stores:{ready:i,data:e,dbData:n,announcements:_,calendarEvents:p,calendarEventsThisWeek:s,calendarEventsNextWeek:l,calendarEventsNextNextWeek:g,currentCategories:c,categoryFilter:r,searchQuery:t,currentCategoryFilter:u,weeksExpanded:a},actions:{reload:async()=>{i.set(!1);const O=await Yt();n.set(w(O)),i.set(!0)},calendarEventsThisWeekLabel:o,calendarEventsNextWeekLabel:v,calendarEventsNextNextWeekLabel:E}},Gt},Un=()=>Gt?.stores&&Object.keys(Gt.stores).length>0?Gt:is();var ss=ie('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),os=ie('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),ls=ie('<span class="d-block small svelte-1rksp2z"> </span>'),cs=ie('<span class="text-muted">•</span>'),us=ie("<span> </span> <!>",1),ds=ie('<span class="text-muted">•</span>'),fs=ie('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),vs=ie('<span class="text-muted">•</span>'),ms=ie('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),hs=ie('<span class="text-muted">•</span>'),ps=ie('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),ys=ie('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),gs=ie('<div class="small svelte-1rksp2z"><!></div>'),_s=ie('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),bs=ie('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),ws=ie('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),xs=ie('<div class="details-container svelte-1rksp2z"><!> <!></div>'),Ds=ie('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),ks=ie('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="d-flex align-items-center gap-2"><div class="fw-bold svelte-1rksp2z"><!></div></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function El(i,e){et(e,!1);const n=me(),r=me();let t=ue(e,"item",8),a=ue(e,"showDetails",12,!1),c=ue(e,"showDate",8,!0),u=ue(e,"searchQuery",8,"");const p=$=>{if(!$)return"";const G=kt($),B=vt(G,Ne);return Me(B,"h:mm aa")},_=$=>{if(!$)return"";const G=kt($),B=vt(G,Ne);return Me(B,"EEE")},s=$=>{if(!$)return"";const G=kt($),B=vt(G,Ne);return Me(B,"MMM, dd")},o=()=>{d(r)&&a(!a())},l=$=>{d(r)&&($.key==="Enter"||$.key===" ")&&o()},v=$=>$<1024?$+" B":$<1024*1024?($/1024).toFixed(1)+" KB":($/(1024*1024)).toFixed(1)+" MB",g=$=>$.startsWith("image/"),E=$=>{window.open($,"_blank")},F=$=>{try{const B=Te.fromString($).origOptions,te=B.interval||1,le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=["","1st","2nd","3rd","4th","5th"];if(B.freq===Te.DAILY)return te===1?"Repeats daily":`Repeats every ${te} days`;if(B.freq===Te.WEEKLY){if(B.byweekday){const J=(Array.isArray(B.byweekday)?B.byweekday:[B.byweekday]).map(se=>{const fe=typeof se=="number"?se:se.weekday,ne=fe===6?0:fe+1;return le[ne]});return te===1?J.length===1?`Repeats every ${J[0]}`:`Repeats on ${J.join(", ")}`:`Repeats every ${te} weeks on ${J.join(", ")}`}return te===1?"Repeats weekly":`Repeats every ${te} weeks`}if(B.freq===Te.MONTHLY){if(B.byweekday){const J=(Array.isArray(B.byweekday)?B.byweekday:[B.byweekday])[0];if(J&&typeof J=="object"&&"n"in J&&"weekday"in J){const se=J.weekday,fe=se===6?0:se+1,ne=J.n,de=ce[ne]||`${ne}th`;return te===1?`Repeats on the ${de} ${le[fe]} of the month`:`Repeats on the ${de} ${le[fe]} every ${te} months`}}if(B.bymonthday){const re=Array.isArray(B.bymonthday)?B.bymonthday[0]:B.bymonthday,J=re===1?"st":re===2?"nd":re===3?"rd":"th";return te===1?`Repeats on the ${re}${J} of the month`:`Repeats on the ${re}${J} every ${te} months`}return te===1?"Repeats monthly":`Repeats every ${te} months`}if(B.freq===Te.YEARLY){if(B.bymonth&&B.bymonthday){const re=["","January","February","March","April","May","June","July","August","September","October","November","December"],J=Array.isArray(B.bymonth)?B.bymonth[0]:B.bymonth,se=Array.isArray(B.bymonthday)?B.bymonthday[0]:B.bymonthday,fe=se===1?"st":se===2?"nd":se===3?"rd":"th";return te===1?`Repeats every ${re[J]} ${se}${fe}`:`Repeats every ${te} years on ${re[J]} ${se}${fe}`}return te===1?"Repeats yearly":`Repeats every ${te} years`}return"Repeats"}catch{return"Repeats"}};let w=me("");Le(()=>X(c()),()=>{q(w,c()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Le(()=>X(t()),()=>{q(n,t().attachments?.find($=>g($.type)))}),Le(()=>X(t()),()=>{q(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Nt(),it();var Y=ks(),O=N(Y);{var I=$=>{var G=ss(),B=N(G),te=N(B,!0);U(B);var le=Q(B,2),ce=N(le),re=N(ce,!0);U(ce),U(le),U(G),ye((J,se)=>{_e(te,J),_e(re,se)},[()=>(X(t()),V(()=>_(t().start_time))),()=>(X(t()),V(()=>s(t().start_time)))]),ee($,G)};he(O,$=>{c()&&$(I)})}var P=Q(O,2),b=N(P),T=N(b),m=N(T),y=N(m);Bt(y,()=>(X(Tt),X(t()),X(u()),V(()=>Tt(t().title||"",u())))),U(m),U(T);var k=Q(T,2);{var M=$=>{var G=os();ee($,G)},x=$=>{var G=ls(),B=N(G);U(G),ye((te,le)=>_e(B,`${te??""} to ${le??""}`),[()=>(X(t()),V(()=>p(t().start_time))),()=>(X(t()),V(()=>p(t().end_time)))]),ee($,G)};he(k,$=>{X(t()),V(()=>t().is_all_day)?$(M):$(x,!1)})}var R=Q(k,2),D=N(R);{var A=$=>{var G=us(),B=Be(G),te=N(B,!0);U(B);var le=Q(B,2);{var ce=re=>{var J=cs();ee(re,J)};he(le,re=>{X(t()),V(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&re(ce)})}ye((re,J)=>{Ze(B,1,`badge rounded-pill bg-color-${re??""}`,"svelte-1rksp2z"),_e(te,J)},[()=>(X(Et),X(t()),V(()=>Et(t()?.meta_data?.category)?.color_number)),()=>(X(Et),X(t()),V(()=>Et(t()?.meta_data?.category)?.label))]),ee($,G)};he(D,$=>{X(t()),V(()=>t()?.meta_data?.category)&&$(A)})}var h=Q(D,2);{var f=$=>{var G=fs(),B=Be(G),te=Q(N(B));U(B);var le=Q(B,2);{var ce=re=>{var J=ds();ee(re,J)};he(le,re=>{X(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&re(ce)})}ye(re=>_e(te,` ${re??""}`),[()=>(X(t()),V(()=>F(t().recurrence_rule)))]),ee($,G)},S=$=>{var G=Er(),B=Be(G);{var te=le=>{var ce=ms(),re=Q(Be(ce),2);{var J=se=>{var fe=vs();ee(se,fe)};he(re,se=>{X(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&se(J)})}ee(le,ce)};he(B,le=>{X(t()),V(()=>t()?.meta_data?.recurring_instance)&&le(te)},!0)}ee($,G)};he(h,$=>{X(t()),V(()=>t().recurrence_rule)?$(f):$(S,!1)})}var C=Q(h,2);{var L=$=>{var G=ps(),B=Be(G),te=N(B);Bt(te,()=>(X(Tt),X(t()),X(u()),V(()=>Tt(t().location,u())))),U(B);var le=Q(B,2);{var ce=re=>{var J=hs();ee(re,J)};he(le,re=>{X(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&re(ce)})}ee($,G)};he(C,$=>{X(t()),V(()=>t().location)&&$(L)})}var Z=Q(C,2);{var H=$=>{var G=ys(),B=N(G);{var te=ce=>{var re=ar("Hide");ee(ce,re)},le=ce=>{var re=ar("Show");ee(ce,re)};he(B,ce=>{a()?ce(te):ce(le,!1)})}Je(),U(G),ee($,G)};he(Z,$=>{X(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&$(H)})}U(R);var j=Q(R,2);{var W=$=>{var G=xs(),B=N(G);{var te=re=>{var J=gs(),se=N(J);Bt(se,()=>(X(cr),X(t()),X(u()),V(()=>cr(t().description,u())))),U(J),ee(re,J)};he(B,re=>{X(t()),V(()=>t().description)&&re(te)})}var le=Q(B,2);{var ce=re=>{var J=ws(),se=Q(N(J),2);Zt(se,5,()=>(X(t()),V(()=>t().attachments)),fe=>fe.id,(fe,ne)=>{var de=Er(),ve=Be(de);{var Ie=pe=>{var we=_s(),be=N(we),Re=N(be);U(be);var He=Q(be,2),rt=N(He),Fe=N(rt,!0);U(rt),U(He),U(we),ye(()=>{ke(be,"title",`Open ${d(ne),V(()=>d(ne).name)??""}`),ke(Re,"src",(d(ne),V(()=>d(ne).url))),ke(Re,"alt",(d(ne),V(()=>d(ne).name))),_e(Fe,(d(ne),V(()=>d(ne).name)))}),xe("click",be,ir(()=>E(d(ne).url))),ee(pe,we)},ge=pe=>{var we=bs(),be=Q(N(we),2),Re=N(be,!0);U(be);var He=Q(be,2),rt=N(He);U(He),U(we),ye(Fe=>{ke(we,"title",`Open ${d(ne),V(()=>d(ne).name)??""}`),_e(Re,(d(ne),V(()=>d(ne).name))),_e(rt,`(${Fe??""})`)},[()=>(d(ne),V(()=>v(d(ne).size)))]),xe("click",we,ir(()=>E(d(ne).url))),ee(pe,we)};he(ve,pe=>{d(ne),V(()=>g(d(ne).type))?pe(Ie):pe(ge,!1)})}ee(fe,de)}),U(se),U(J),ee(re,J)};he(le,re=>{X(t()),V(()=>t().attachments&&t().attachments.length>0)&&re(ce)})}U(G),ee($,G)};he(j,$=>{a()&&$(W)})}U(b);var z=Q(b,2);{var oe=$=>{var G=Ds(),B=N(G);U(G),ye(()=>{ke(B,"src",(d(n),V(()=>d(n).url))),ke(B,"alt",(d(n),V(()=>d(n).name)))}),ee($,G)};he(z,$=>{d(n)&&$(oe)})}U(P),U(Y),ye(()=>{Ze(Y,1,Ma(d(w)),"svelte-1rksp2z"),Dn(Y,d(r)?"cursor: pointer;":"")}),xe("keydown",Y,l),xe("click",Y,o),ee(i,Y),tt()}var Es=ie('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function Tl(i,e){et(e,!1);const n=()=>bn(a,"$weeksExpanded",r),[r,t]=wn(),{stores:{weeksExpanded:a}}=Un();function c(){pa(a,!n())}it();var u=Es(),p=N(u),_=Q(p);U(u),ye(()=>{Ze(p,1,`bi ${n()?"bi-chevron-up":"bi-chevron-down"}`),_e(_,` ${n()?"Collapse All":"Expand All"}`)}),xe("click",u,c),ee(i,u),tt(),t()}var Ts=ie('<div class="invalid-feedback d-block"> </div>'),As=ie("<option> </option>"),Is=ie('<div class="invalid-feedback d-block"> </div>'),Ms=ie('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function Cs(i,e){et(e,!1);const n=me(),r=me();let t=ue(e,"title",12,""),a=ue(e,"eventType",12,"calendar_event"),c=ue(e,"category",12,""),u=ue(e,"isPublic",12,!0),p=ue(e,"description",12,""),_=ue(e,"disabled",8,!1),s=ue(e,"name",8,"event"),o=ue(e,"validationErrors",24,()=>({})),l=me(),v=me();function g(){d(l)?.focus()}function E(){d(v)?.focus()}Le(()=>X(o()),()=>{q(n,!!o().title)}),Le(()=>X(o()),()=>{q(r,!!o().description)}),Nt();var F={focusTitle:g,focusDescription:E};it();var w=Ms(),Y=N(w),O=Q(N(Y),2);$e(O);let I;At(O,H=>q(l,H),()=>d(l));var P=Q(O,2);{var b=H=>{var j=Ts(),W=N(j,!0);U(j),ye(()=>_e(W,(X(o()),V(()=>o().title)))),ee(H,j)};he(P,H=>{X(o()),V(()=>o().title)&&H(b)})}Je(2),U(Y);var T=Q(Y,2),m=Q(N(T),2);ye(()=>{a(),kr(()=>{_()})});var y=N(m);y.value=y.__value="calendar_event";var k=Q(y);k.value=k.__value="announcement",U(m),U(T);var M=Q(T,2),x=Q(N(M),2);ye(()=>{c(),kr(()=>{_()})}),Zt(x,5,()=>lr,xn,(H,j)=>{var W=As(),z=N(W,!0);U(W);var oe={};ye(()=>{_e(z,(d(j),V(()=>d(j).label))),oe!==(oe=(d(j),V(()=>d(j).key)))&&(W.value=(W.__value=(d(j),V(()=>d(j).key)))??"")}),ee(H,W)}),U(x),U(M);var R=Q(M,2),D=Q(N(R),2),A=N(D);$e(A);var h=Q(A,2);U(D),Je(2),U(R);var f=Q(R,2),S=Q(N(f),2);ma(S);let C;At(S,H=>q(v,H),()=>d(v));var L=Q(S,2);{var Z=H=>{var j=Is(),W=N(j,!0);U(j),ye(()=>_e(W,(X(o()),V(()=>o().description)))),ee(H,j)};he(L,H=>{X(o()),V(()=>o().description)&&H(Z)})}return Je(2),U(f),U(w),ye(()=>{ke(O,"name",`${s()??""}-title`),I=Ze(O,1,"form-control",null,I,{"is-invalid":d(n)}),O.disabled=_(),m.disabled=_(),x.disabled=_(),ke(A,"id",`${s()??""}-is-public`),A.disabled=_(),ke(h,"for",`${s()??""}-is-public`),ke(S,"name",`${s()??""}-description`),C=Ze(S,1,"form-control",null,C,{"is-invalid":d(r)}),S.disabled=_()}),xe("focus",O,()=>d(l).select()),ft(O,t),Tr(m,a),Tr(x,c),Or(A,u),xe("focus",S,()=>d(v).select()),ft(S,p),ee(i,w),qt(e,"focusTitle",g),qt(e,"focusDescription",E),tt(F)}var Rs=ie('<div class="invalid-feedback d-block"> </div>'),Fs=ie('<div class="invalid-feedback d-block"> </div>'),Os=ie('<div class="invalid-feedback d-block"> </div>'),Ss=ie('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Ps=ie('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Us(i,e){et(e,!1);const n=me(),r=me(),t=me();let a=ue(e,"dateInput",12,""),c=ue(e,"startTimeInput",12,""),u=ue(e,"endTimeInput",12,""),p=ue(e,"isAllDay",12,!1),_=ue(e,"disabled",8,!1),s=ue(e,"name",8,"event"),o=ue(e,"validationErrors",24,()=>({})),l=me(),v=me(),g=me();function E(){d(l)?.focus()}function F(){d(v)?.focus()}function w(){d(g)?.focus()}Le(()=>X(o()),()=>{q(n,!!o().dateInput)}),Le(()=>X(o()),()=>{q(r,!!o().startTimeInput)}),Le(()=>X(o()),()=>{q(t,!!o().endTimeInput)}),Nt();var Y={focusDate:E,focusStartTime:F,focusEndTime:w};it();var O=Ps(),I=N(O),P=Q(N(I),2);$e(P);let b;At(P,A=>q(l,A),()=>d(l));var T=Q(P,2);{var m=A=>{var h=Rs(),f=N(h,!0);U(h),ye(()=>_e(f,(X(o()),V(()=>o().dateInput)))),ee(A,h)};he(T,A=>{X(o()),V(()=>o().dateInput)&&A(m)})}U(I);var y=Q(I,2),k=N(y),M=N(k);$e(M);var x=Q(M,2);U(k),U(y);var R=Q(y,2);{var D=A=>{var h=Ss(),f=N(h),S=Q(N(f),2);$e(S),ke(S,"step",900);let C;At(S,$=>q(v,$),()=>d(v));var L=Q(S,2);{var Z=$=>{var G=Fs(),B=N(G,!0);U(G),ye(()=>_e(B,(X(o()),V(()=>o().startTimeInput)))),ee($,G)};he(L,$=>{X(o()),V(()=>o().startTimeInput)&&$(Z)})}U(f);var H=Q(f,2),j=Q(N(H),2);$e(j),ke(j,"step",900);let W;At(j,$=>q(g,$),()=>d(g));var z=Q(j,2);{var oe=$=>{var G=Os(),B=N(G,!0);U(G),ye(()=>_e(B,(X(o()),V(()=>o().endTimeInput)))),ee($,G)};he(z,$=>{X(o()),V(()=>o().endTimeInput)&&$(oe)})}U(H),U(h),ye(()=>{ke(S,"name",`${s()??""}-start-time`),C=Ze(S,1,"form-control",null,C,{"is-invalid":d(r)}),S.disabled=_(),ke(j,"name",`${s()??""}-end-time`),W=Ze(j,1,"form-control",null,W,{"is-invalid":d(t)}),j.disabled=_()}),xe("focus",S,()=>d(v).select()),ft(S,c),xe("focus",j,()=>d(g).select()),ft(j,u),ee(A,h)};he(R,A=>{p()||A(D)})}return U(O),ye(()=>{ke(P,"name",`${s()??""}-date`),b=Ze(P,1,"form-control",null,b,{"is-invalid":d(n)}),P.disabled=_(),ke(M,"id",`${s()??""}-all-day-check`),M.disabled=_(),ke(x,"for",`${s()??""}-all-day-check`)}),xe("focus",P,()=>d(l).select()),ft(P,a),Or(M,p),ee(i,O),qt(e,"focusDate",E),qt(e,"focusStartTime",F),qt(e,"focusEndTime",w),tt(Y)}var Ns=ie('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Ys=ie('<div class="invalid-feedback d-block"> </div>'),Ls=ie('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Hs=ie('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),zs=ie('<div class="invalid-feedback d-block"> </div>'),Ws=ie('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),qs=ie('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function Bs(i,e){et(e,!1);const n=[],r=[];let t=ue(e,"isRecurring",12,!1),a=ue(e,"recurrenceFrequency",12,"weekly"),c=ue(e,"recurrenceInterval",12,1),u=ue(e,"recurringDays",28,()=>[]),p=ue(e,"recurrenceEndDate",12,""),_=ue(e,"monthlyType",12,"date"),s=ue(e,"dateInput",8,""),o=ue(e,"disabled",8,!1),l=ue(e,"name",8,"event"),v=ue(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function E(T){if(!T)return"Same weekday of the month";try{const m=new Date(T),y=Me(m,"EEEE"),k=Math.ceil(m.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][k]} ${y} of the month`}catch{return"Same weekday of the month"}}function F(T){if(!T)return 1;try{return T.split("-").map(Number)[2]}catch{return 1}}it();var w=qs(),Y=N(w),O=N(Y);$e(O);var I=Q(O,2);U(Y);var P=Q(Y,2);{var b=T=>{var m=Ws(),y=N(m),k=Q(N(y),2),M=Q(N(k),2),x=N(M);$e(x),U(M);var R=Q(M,2),D=N(R);ye(()=>{a(),kr(()=>{o(),c()})});var A=N(D),h=N(A,!0);U(A),A.value=A.__value="daily";var f=Q(A),S=N(f,!0);U(f),f.value=f.__value="weekly";var C=Q(f),L=N(C,!0);U(C),C.value=C.__value="monthly";var Z=Q(C),H=N(Z,!0);U(Z),Z.value=Z.__value="yearly",U(D),U(R),U(k),U(y);var j=Q(y,2);{var W=re=>{var J=Ls(),se=Q(N(J),2);Zt(se,5,()=>g,xn,(de,ve)=>{var Ie=Ns(),ge=N(Ie);$e(ge);var pe,we=Q(ge,2),be=N(we,!0);U(we),U(Ie),ye(()=>{ke(ge,"id",`${l()??""}-day-${d(ve),V(()=>d(ve).value)??""}`),ge.disabled=o(),pe!==(pe=(d(ve),V(()=>d(ve).value)))&&(ge.value=(ge.__value=(d(ve),V(()=>d(ve).value)))??""),ke(we,"for",`${l()??""}-day-${d(ve),V(()=>d(ve).value)??""}`),_e(be,(d(ve),V(()=>d(ve).label)))}),gr(n,[],ge,()=>(d(ve),V(()=>d(ve).value),u()),u),ee(de,Ie)}),U(se);var fe=Q(se,2);{var ne=de=>{var ve=Ys(),Ie=N(ve,!0);U(ve),ye(()=>_e(Ie,(X(v()),V(()=>v().recurringDays)))),ee(de,ve)};he(fe,de=>{X(v()),V(()=>v().recurringDays)&&de(ne)})}Je(2),U(J),ee(re,J)};he(j,re=>{a()==="weekly"&&re(W)})}var z=Q(j,2);{var oe=re=>{var J=Hs(),se=Q(N(J),2),fe=N(se),ne=N(fe);$e(ne),ne.value=ne.__value="date";var de=Q(ne,2),ve=N(de);U(de),U(fe);var Ie=Q(fe,2),ge=N(Ie);$e(ge),ge.value=ge.__value="weekday";var pe=Q(ge,2),we=N(pe);U(pe),U(Ie),U(se),U(J),ye((be,Re)=>{ke(ne,"id",`${l()??""}-monthly-date`),ne.disabled=o(),ke(de,"for",`${l()??""}-monthly-date`),_e(ve,`On day ${be??""} of the month`),ke(ge,"id",`${l()??""}-monthly-weekday`),ge.disabled=o(),ke(pe,"for",`${l()??""}-monthly-weekday`),_e(we,`On the ${Re??""}`)},[()=>(X(s()),V(()=>F(s()))),()=>(X(s()),V(()=>E(s())))]),gr(r,[],ne,_,_),gr(r,[],ge,_,_),ee(re,J)};he(z,re=>{a()==="monthly"&&re(oe)})}var $=Q(z,2),G=N($),B=Q(G,2);$e(B);let te;var le=Q(B,2);{var ce=re=>{var J=zs(),se=N(J,!0);U(J),ye(()=>_e(se,(X(v()),V(()=>v().recurrenceEndDate)))),ee(re,J)};he(le,re=>{X(v()),V(()=>v().recurrenceEndDate)&&re(ce)})}Je(2),U($),U(m),ye(()=>{x.disabled=o(),D.disabled=o(),_e(h,c()===1?"day":"days"),_e(S,c()===1?"week":"weeks"),_e(L,c()===1?"month":"months"),_e(H,c()===1?"year":"years"),ke(G,"for",`${l()??""}-recurrence-end-date`),te=Ze(B,1,"form-control",null,te,{"is-invalid":!!v().recurrenceEndDate}),ke(B,"id",`${l()??""}-recurrence-end-date`),B.disabled=o()}),ft(x,c),Tr(D,a),ft(B,p),ee(T,m)};he(P,T=>{t()&&T(b)})}U(w),ye(()=>{ke(O,"id",`${l()??""}-is-recurring`),O.disabled=o(),ke(I,"for",`${l()??""}-is-recurring`)}),Or(O,t),ee(i,w),tt()}var $s=ie('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function Qs(i,e){et(e,!1);let n=ue(e,"value",12,""),r=ue(e,"disabled",8,!1),t=ue(e,"name",8,"location"),a=me();function c(){d(a)?.focus()}var u={focus:c},p=$s(),_=Q(N(p),2);return $e(_),At(_,s=>q(a,s),()=>d(a)),Je(2),U(p),ye(()=>{ke(_,"name",t()),_.disabled=r()}),xe("focus",_,()=>d(a).select()),ft(_,n),ee(i,p),qt(e,"focus",c),tt(u)}var js=ie('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Gs=ie('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Zs=ie('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),Ks=ie('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Vs=ie('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),Xs=ie('<div class="d-flex flex-column gap-2 mb-2"></div>'),Js=ie('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function eo(i,e){et(e,!1);let n=ue(e,"attachments",24,()=>[]),r=ue(e,"disabled",8,!1),t=ue(e,"uploadingFile",8,!1);const a=Ra();let c=me(),u=me(null),p=me("");const _=T=>{if(T===0)return"0 Bytes";const m=1024,y=["Bytes","KB","MB"],k=Math.floor(Math.log(T)/Math.log(m));return Math.round(T/Math.pow(m,k)*100)/100+" "+y[k]},s=T=>{const m=T.target;m.files&&m.files[0]&&(a("upload",m.files[0]),m.value="")},o=T=>{q(u,T.id),q(p,T.name)},l=T=>{d(p).trim()&&d(p)!==T.name&&a("edit",{attachment:T,newName:d(p).trim()}),q(u,null),q(p,"")},v=()=>{q(u,null),q(p,"")},g=T=>{a("remove",T)};it();var E=Js(),F=Q(N(E),2);{var w=T=>{var m=Xs();Zt(m,5,n,y=>y.id,(y,k)=>{var M=Vs(),x=N(M),R=N(x);{var D=C=>{var L=js(),Z=Be(L);$e(Z);var H=Q(Z,2),j=N(H,!0);U(H),ye(W=>{Z.disabled=r(),_e(j,W)},[()=>(d(k),V(()=>_(d(k).size)))]),ft(Z,()=>d(p),W=>q(p,W)),xe("keydown",Z,W=>{W.key==="Enter"&&l(d(k)),W.key==="Escape"&&v()}),ee(C,L)},A=C=>{var L=Gs(),Z=Be(L),H=N(Z,!0);U(Z);var j=Q(Z,2),W=N(j,!0);U(j),ye(z=>{_e(H,(d(k),V(()=>d(k).name))),_e(W,z)},[()=>(d(k),V(()=>_(d(k).size)))]),ee(C,L)};he(R,C=>{d(u),d(k),V(()=>d(u)===d(k).id)?C(D):C(A,!1)})}U(x);var h=Q(x,2);{var f=C=>{var L=Zs(),Z=Be(L),H=Q(Z,2);ye(()=>{Z.disabled=r(),H.disabled=r()}),xe("click",Z,()=>l(d(k))),xe("click",H,v),ee(C,L)},S=C=>{var L=Ks(),Z=Be(L),H=Q(Z,2);ye(()=>{Z.disabled=r(),H.disabled=r()}),xe("click",Z,()=>o(d(k))),xe("click",H,()=>g(d(k))),ee(C,L)};he(h,C=>{d(u),d(k),V(()=>d(u)===d(k).id)?C(f):C(S,!1)})}U(M),ee(y,M)}),U(m),ee(T,m)};he(F,T=>{X(n()),V(()=>n().length>0)&&T(w)})}var Y=Q(F,2),O=N(Y),I=N(O);At(I,T=>q(c,T),()=>d(c));var P=Q(I,2);{var b=T=>{Tn(T,{size:"sm"})};he(P,T=>{t()&&T(b)})}U(O),Je(2),U(Y),U(E),ye(()=>I.disabled=r()||t()),xe("change",I,s),ee(i,E),tt()}var to=ie('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function ro(i,e){et(e,!1);const n=me();let r=ue(e,"eventTitle",8),t=ue(e,"occurrenceDate",8),a=ue(e,"callback",8);function c(M){a()(M)}function u(){a()(null)}Le(()=>(X(t()),Me),()=>{q(n,(()=>{try{const[M,x,R]=t().split("-").map(Number),D=new Date(M,x-1,R);return Me(D,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Nt(),it();var p=to(),_=N(p),s=N(_),o=N(s),l=Q(N(o),2);U(o);var v=Q(o,2),g=N(v),E=N(g),F=N(E);U(E),Je(),U(g);var w=Q(g,4),Y=N(w),O=Q(N(Y),2),I=N(O,!0);U(O),U(Y);var P=Q(Y,2),b=Q(N(P),2),T=N(b);U(b),U(P);var m=Q(P,2);U(w),U(v);var y=Q(v,2),k=N(y);U(y),U(s),U(_),U(p),ye(()=>{_e(F,`"${r()??""}"`),_e(I,d(n)),_e(T,`From ${d(n)??""} onwards`)}),xe("click",l,u),xe("click",Y,()=>c("single")),xe("click",P,()=>c("future")),xe("click",m,()=>c("all")),xe("click",k,u),ee(i,p),tt()}var no=ie('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function ao(i,e){et(e,!1);const n=me();let r=ue(e,"eventTitle",8),t=ue(e,"occurrenceDate",8),a=ue(e,"callback",8);function c(M){a()(M)}function u(){a()(null)}Le(()=>(X(t()),Me),()=>{q(n,(()=>{try{const[M,x,R]=t().split("-").map(Number),D=new Date(M,x-1,R);return Me(D,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Nt(),it();var p=no(),_=N(p),s=N(_),o=N(s),l=Q(N(o),2);U(o);var v=Q(o,2),g=N(v),E=N(g),F=N(E);U(E),Je(),U(g);var w=Q(g,4),Y=N(w),O=Q(N(Y),2),I=N(O,!0);U(O),U(Y);var P=Q(Y,2),b=Q(N(P),2),T=N(b);U(b),U(P);var m=Q(P,2);U(w),U(v);var y=Q(v,2),k=N(y);U(y),U(s),U(_),U(p),ye(()=>{_e(F,`"${r()??""}"`),_e(I,d(n)),_e(T,`From ${d(n)??""} onwards`)}),xe("click",l,u),xe("click",Y,()=>c("single")),xe("click",P,()=>c("future")),xe("click",m,()=>c("all")),xe("click",k,u),ee(i,p),tt()}var io=ie('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function so(i,e){et(e,!1);let n=ue(e,"title",8,"Clone Event"),r=ue(e,"message",8,"Select a date for the cloned event:"),t=ue(e,"confirmButtonLabel",8,"Clone"),a=ue(e,"confirmButtonCSS",8,"btn-primary"),c=ue(e,"rejectButtonLabel",8,"Cancel"),u=ue(e,"rejectButtonCSS",8,"btn-secondary"),p=ue(e,"defaultDate",8,void 0),_=ue(e,"callback",8,()=>{}),s=me(),o=me(p()||Me(new Date,"yyyy-MM-dd")),l=!1,v;Fa(()=>{const h=window.bootstrap.Modal;new h(d(s)).show(),d(s).addEventListener("hidden.bs.modal",()=>{l?_()(!0,v):_()(!1)})});function g(){l=!0,v=d(o),window.bootstrap.Modal.getInstance(d(s)).hide()}function E(){l=!1,window.bootstrap.Modal.getInstance(d(s)).hide()}it();var F=io(),w=N(F),Y=N(w),O=N(Y),I=N(O),P=N(I,!0);U(I),Je(2),U(O);var b=Q(O,2),T=N(b),m=N(T,!0);U(T);var y=Q(T,2),k=Q(N(y),2);$e(k),U(y),U(b);var M=Q(b,2),x=N(M),R=N(x,!0);U(x);var D=Q(x,2),A=N(D,!0);U(D),U(M),U(Y),U(w),U(F),At(F,h=>q(s,h),()=>d(s)),ye(()=>{_e(P,n()),_e(m,r()),Ze(x,1,`btn ${u()??""}`),_e(R,c()),Ze(D,1,`btn ${a()??""}`),_e(A,t())}),ft(k,()=>d(o),h=>q(o,h)),xe("click",x,E),xe("click",D,g),ee(i,F),tt()}let rr;function oo(i){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const n={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};i.title&&(n.title=i.title),i.message&&(n.message=i.message),i.confirmButtonLabel&&(n.confirmButtonLabel=i.confirmButtonLabel),i.confirmButtonCSS&&(n.confirmButtonCSS=i.confirmButtonCSS),i.rejectButtonLabel&&(n.rejectButtonLabel=i.rejectButtonLabel),i.rejectButtonCSS&&(n.rejectButtonCSS=i.rejectButtonCSS),i.defaultDate&&(n.defaultDate=i.defaultDate),n.callback=(r,t)=>{console.log("Clone confirm result:",r,t),rr&&(ga(rr),rr=void 0),e.remove(),i.callback&&typeof i.callback=="function"&&i.callback(r,t)},rr=ya(so,{target:e,props:n})}const lo=Sa().shape({title:ot().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ot().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ot().required("Category is required"),description:ot().nullable().max(1e4,"Description is too long"),location:ot().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ot().when("event_type",{is:"calendar_event",then:i=>i.required("Date is required"),otherwise:i=>i.nullable()}),startTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("Start time is required"),otherwise:i=>i.nullable()}),endTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("End time is required"),otherwise:i=>i.nullable()}),isRecurring:an(),recurrenceFrequency:ot().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Pa().of(Ua().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(i,e)=>i&&e==="weekly",then:i=>i.min(1,"Select at least one day for weekly recurring events").required(),otherwise:i=>i.nullable()}),hasEndDate:an(),recurrenceEndDate:ot().when(["isRecurring","hasEndDate"],{is:(i,e)=>i&&e,then:i=>i.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const n=new Date(e),r=new Date;return r.setHours(0,0,0,0),n>=r}),otherwise:i=>i.nullable()})});function co(){const i=Dt({});async function e(t){try{return await lo.validate(t,{abortEarly:!1}),i.set({}),!0}catch(a){if(a instanceof Na){const c={};return a.inner.forEach(u=>{u.path&&(c[u.path]=u.message)}),i.set(c),!1}return!1}}function n(){i.set({})}function r(){return Object.values(i).filter(a=>a.length>0)}return{validationErrors:i,validate:e,clearErrors:n,getErrorMessages:r}}function Wr(i){const{frequency:e,interval:n,recurringDays:r,recurrenceEndDate:t,hasEndDate:a,monthlyType:c,startTime:u}=i,p={0:Te.SU,1:Te.MO,2:Te.TU,3:Te.WE,4:Te.TH,5:Te.FR,6:Te.SA},_={daily:Te.DAILY,weekly:Te.WEEKLY,monthly:Te.MONTHLY,yearly:Te.YEARLY},s=new Date(u),o=vt(s,Ne),l=new Date(o);l.setHours(12,0,0,0);const v=It(l,Ne),g={freq:_[e],interval:n,dtstart:v};if(a&&t){const F=new Date(`${t}T23:59:59.999`),w=It(F,Ne);g.until=w}if(e==="weekly"&&r.length>0)g.byweekday=r.map(F=>p[F]);else if(e==="monthly")if(c==="date")g.bymonthday=[l.getDate()];else{const F=Math.ceil(l.getDate()/7),w=l.getDay(),Y=[Te.SU,Te.MO,Te.TU,Te.WE,Te.TH,Te.FR,Te.SA];g.byweekday=[Y[w].nth(F)]}else e==="yearly"&&(g.bymonth=[l.getMonth()+1],g.bymonthday=[l.getDate()]);return{recurrence_rule:new Te(g).toString(),recurrence_end_date:a&&t?g.until.toISOString():void 0}}function Nn(i,e){try{const r=Te.fromString(i).origOptions,t={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Te.DAILY]:"daily",[Te.WEEKLY]:"weekly",[Te.MONTHLY]:"monthly",[Te.YEARLY]:"yearly"},c=(r.freq!==void 0?a[r.freq]:null)||"weekly",u=r.interval||1;let p=[],_="date";r.byweekday&&c==="weekly"&&(p=(Array.isArray(r.byweekday)?r.byweekday:[r.byweekday]).map(l=>{const v=typeof l=="number"?l:l.weekday;return t[v]})),c==="monthly"&&(r.bymonthday&&Array.isArray(r.bymonthday)&&r.bymonthday.length>0?_="date":r.byweekday&&(_="weekday"));let s="",o=!1;if(e){o=!0;const l=vt(new Date(e),Ne);s=Me(l,"yyyy-MM-dd")}else if(r.until){o=!0;const l=vt(r.until,Ne);s=Me(l,"yyyy-MM-dd")}return{frequency:c,interval:u,recurringDays:p,recurrenceEndDate:s,hasEndDate:o,monthlyType:_}}catch(n){return console.error("Failed to parse recurrence rule:",n),null}}function Yn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Ln(){return{generateRecurrenceRule:Wr,parseRecurrenceRule:Nn,clearRecurrence:Yn}}const Rr=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Yn,generateRecurrenceRule:Wr,parseRecurrenceRule:Nn,useRecurrenceLogic:Ln},Symbol.toStringTag,{value:"Module"}));function uo(i,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in i)){var t=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(i,r,t.get?t:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(i)}function Hn(i,e){return new Promise(function(n,r){let t;return fo(i).then(function(a){try{return t=a,n(new Blob([e.slice(0,2),t,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}},r)})}const fo=i=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:t}})=>{const a=new DataView(t);let c=0;if(a.getUint16(c)!==65496)return n("not a valid JPEG");for(c+=2;;){const u=a.getUint16(c);if(u===65498)break;const p=a.getUint16(c+2);if(u===65505&&a.getUint32(c+4)===1165519206){const _=c+10;let s;switch(a.getUint16(_)){case 18761:s=!0;break;case 19789:s=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(_+2,s)!==42)return n("TIFF header contains invalid version");const o=a.getUint32(_+4,s),l=_+o+2+12*a.getUint16(_+o,s);for(let v=_+o+2;v<l;v+=12)if(a.getUint16(v,s)==274){if(a.getUint16(v+2,s)!==3)return n("Orientation data type is invalid");if(a.getUint32(v+4,s)!==1)return n("Orientation data count is invalid");a.setUint16(v+8,1,s);break}return e(t.slice(c,c+2+p))}c+=2+p}return e(new Blob)}),r.readAsArrayBuffer(i)});var ur={},vo={get exports(){return ur},set exports(i){ur=i}};(function(i){var e,n,r={};vo.exports=r,r.parse=function(t,a){for(var c=r.bin.readUshort,u=r.bin.readUint,p=0,_={},s=new Uint8Array(t),o=s.length-4;u(s,o)!=101010256;)o--;p=o,p+=4;var l=c(s,p+=4);c(s,p+=2);var v=u(s,p+=2),g=u(s,p+=4);p+=4,p=g;for(var E=0;E<l;E++){u(s,p),p+=4,p+=4,p+=4,u(s,p+=4),v=u(s,p+=4);var F=u(s,p+=4),w=c(s,p+=4),Y=c(s,p+2),O=c(s,p+4);p+=6;var I=u(s,p+=8);p+=4,p+=w+Y+O,r._readLocal(s,I,_,v,F,a)}return _},r._readLocal=function(t,a,c,u,p,_){var s=r.bin.readUshort,o=r.bin.readUint;o(t,a),s(t,a+=4),s(t,a+=2);var l=s(t,a+=2);o(t,a+=2),o(t,a+=4),a+=4;var v=s(t,a+=8),g=s(t,a+=2);a+=2;var E=r.bin.readUTF8(t,a,v);if(a+=v,a+=g,_)c[E]={size:p,csize:u};else{var F=new Uint8Array(t.buffer,a);if(l==0)c[E]=new Uint8Array(F.buffer.slice(a,a+u));else{if(l!=8)throw"unknown compression method: "+l;var w=new Uint8Array(p);r.inflateRaw(F,w),c[E]=w}}},r.inflateRaw=function(t,a){return r.F.inflate(t,a)},r.inflate=function(t,a){return t[0],t[1],r.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),a)},r.deflate=function(t,a){a==null&&(a={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*t.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(t,u,c,a.level);var p=r.adler(t,0,t.length);return u[c+0]=p>>>24&255,u[c+1]=p>>>16&255,u[c+2]=p>>>8&255,u[c+3]=p>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(t,a){a==null&&(a={level:6});var c=new Uint8Array(50+Math.floor(1.1*t.length)),u=r.F.deflateRaw(t,c,u,a.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(t,a){a==null&&(a=!1);var c=0,u=r.bin.writeUint,p=r.bin.writeUshort,_={};for(var s in t){var o=!r._noNeed(s)&&!a,l=t[s],v=r.crc.crc(l,0,l.length);_[s]={cpr:o,usize:l.length,crc:v,file:o?r.deflateRaw(l):l}}for(var s in _)c+=_[s].file.length+30+46+2*r.bin.sizeUTF8(s);c+=22;var g=new Uint8Array(c),E=0,F=[];for(var s in _){var w=_[s];F.push(E),E=r._writeHeader(g,E,s,w,0)}var Y=0,O=E;for(var s in _)w=_[s],F.push(E),E=r._writeHeader(g,E,s,w,1,F[Y++]);var I=E-O;return u(g,E,101010256),E+=4,p(g,E+=4,Y),p(g,E+=2,Y),u(g,E+=2,I),u(g,E+=4,O),E+=4,E+=2,g.buffer},r._noNeed=function(t){var a=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(t,a,c,u,p,_){var s=r.bin.writeUint,o=r.bin.writeUshort,l=u.file;return s(t,a,p==0?67324752:33639248),a+=4,p==1&&(a+=2),o(t,a,20),o(t,a+=2,0),o(t,a+=2,u.cpr?8:0),s(t,a+=2,0),s(t,a+=4,u.crc),s(t,a+=4,l.length),s(t,a+=4,u.usize),o(t,a+=4,r.bin.sizeUTF8(c)),o(t,a+=2,0),a+=2,p==1&&(a+=2,a+=2,s(t,a+=6,_),a+=4),a+=r.bin.writeUTF8(t,a,c),p==0&&(t.set(l,a),a+=l.length),a},r.crc={table:function(){for(var t=new Uint32Array(256),a=0;a<256;a++){for(var c=a,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;t[a]=c}return t}(),update:function(t,a,c,u){for(var p=0;p<u;p++)t=r.crc.table[255&(t^a[c+p])]^t>>>8;return t},crc:function(t,a,c){return 4294967295^r.crc.update(4294967295,t,a,c)}},r.adler=function(t,a,c){for(var u=1,p=0,_=a,s=a+c;_<s;){for(var o=Math.min(_+5552,s);_<o;)p+=u+=t[_++];u%=65521,p%=65521}return p<<16|u},r.bin={readUshort:function(t,a){return t[a]|t[a+1]<<8},writeUshort:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255},readUint:function(t,a){return 16777216*t[a+3]+(t[a+2]<<16|t[a+1]<<8|t[a])},writeUint:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255,t[a+2]=c>>16&255,t[a+3]=c>>24&255},readASCII:function(t,a,c){for(var u="",p=0;p<c;p++)u+=String.fromCharCode(t[a+p]);return u},writeASCII:function(t,a,c){for(var u=0;u<c.length;u++)t[a+u]=c.charCodeAt(u)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,a,c){for(var u,p="",_=0;_<c;_++)p+="%"+r.bin.pad(t[a+_].toString(16));try{u=decodeURIComponent(p)}catch{return r.bin.readASCII(t,a,c)}return u},writeUTF8:function(t,a,c){for(var u=c.length,p=0,_=0;_<u;_++){var s=c.charCodeAt(_);if(!(4294967168&s))t[a+p]=s,p++;else if(!(4294965248&s))t[a+p]=192|s>>6,t[a+p+1]=128|s>>0&63,p+=2;else if(!(4294901760&s))t[a+p]=224|s>>12,t[a+p+1]=128|s>>6&63,t[a+p+2]=128|s>>0&63,p+=3;else{if(4292870144&s)throw"e";t[a+p]=240|s>>18,t[a+p+1]=128|s>>12&63,t[a+p+2]=128|s>>6&63,t[a+p+3]=128|s>>0&63,p+=4}}return p},sizeUTF8:function(t){for(var a=t.length,c=0,u=0;u<a;u++){var p=t.charCodeAt(u);if(!(4294967168&p))c++;else if(!(4294965248&p))c+=2;else if(!(4294901760&p))c+=3;else{if(4292870144&p)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(t,a,c,u){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],_=r.F.U,s=r.F._goodIndex;r.F._hash;var o=r.F._putsE,l=0,v=c<<3,g=0,E=t.length;if(u==0){for(;l<E;)o(a,v,l+(M=Math.min(65535,E-l))==E?1:0),v=r.F._copyExact(t,l,M,a,v+8),l+=M;return v>>>3}var F=_.lits,w=_.strt,Y=_.prev,O=0,I=0,P=0,b=0,T=0,m=0;for(E>2&&(w[m=r.F._hash(t,0)]=0),l=0;l<E;l++){if(T=m,l+1<E-2){m=r.F._hash(t,l+1);var y=l+1&32767;Y[y]=w[m],w[m]=y}if(g<=l){(O>14e3||I>26697)&&E-l>100&&(g<l&&(F[O]=l-g,O+=2,g=l),v=r.F._writeBlock(l==E-1||g==E?1:0,F,O,b,t,P,l-P,a,v),O=I=b=0,P=l);var k=0;l<E-2&&(k=r.F._bestMatch(t,l,Y,T,Math.min(p[2],E-l),p[3]));var M=k>>>16,x=65535&k;if(k!=0){x=65535&k;var R=s(M=k>>>16,_.of0);_.lhst[257+R]++;var D=s(x,_.df0);_.dhst[D]++,b+=_.exb[R]+_.dxb[D],F[O]=M<<23|l-g,F[O+1]=x<<16|R<<8|D,O+=2,g=l+M}else _.lhst[t[l]]++;I++}}for(P==l&&t.length!=0||(g<l&&(F[O]=l-g,O+=2,g=l),v=r.F._writeBlock(1,F,O,b,t,P,l-P,a,v),O=0,I=0,O=I=b=0,P=l);7&v;)v++;return v>>>3},r.F._bestMatch=function(t,a,c,u,p,_){var s=32767&a,o=c[s],l=s-o+32768&32767;if(o==s||u!=r.F._hash(t,a-l))return 0;for(var v=0,g=0,E=Math.min(32767,a);l<=E&&--_!=0&&o!=s;){if(v==0||t[a+v]==t[a+v-l]){var F=r.F._howLong(t,a,l);if(F>v){if(g=l,(v=F)>=p)break;l+2<F&&(F=l+2);for(var w=0,Y=0;Y<F-2;Y++){var O=a-l+Y+32768&32767,I=O-c[O]+32768&32767;I>w&&(w=I,o=O)}}}l+=(s=o)-(o=c[s])+32768&32767}return v<<16|g},r.F._howLong=function(t,a,c){if(t[a]!=t[a-c]||t[a+1]!=t[a+1-c]||t[a+2]!=t[a+2-c])return 0;var u=a,p=Math.min(t.length,a+258);for(a+=3;a<p&&t[a]==t[a-c];)a++;return a-u},r.F._hash=function(t,a){return(t[a]<<8|t[a+1])+(t[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(t,a,c,u,p,_,s,o,l){var v,g,E,F,w,Y,O,I,P,b=r.F.U,T=r.F._putsF,m=r.F._putsE;b.lhst[256]++,g=(v=r.F.getTrees())[0],E=v[1],F=v[2],w=v[3],Y=v[4],O=v[5],I=v[6],P=v[7];var y=32+(l+3&7?8-(l+3&7):0)+(s<<3),k=u+r.F.contSize(b.fltree,b.lhst)+r.F.contSize(b.fdtree,b.dhst),M=u+r.F.contSize(b.ltree,b.lhst)+r.F.contSize(b.dtree,b.dhst);M+=14+3*O+r.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var x=0;x<286;x++)b.lhst[x]=0;for(x=0;x<30;x++)b.dhst[x]=0;for(x=0;x<19;x++)b.ihst[x]=0;var R=y<k&&y<M?0:k<M?1:2;if(T(o,l,t),T(o,l+1,R),l+=3,R==0){for(;7&l;)l++;l=r.F._copyExact(p,_,s,o,l)}else{var D,A;if(R==1&&(D=b.fltree,A=b.fdtree),R==2){r.F.makeCodes(b.ltree,g),r.F.revCodes(b.ltree,g),r.F.makeCodes(b.dtree,E),r.F.revCodes(b.dtree,E),r.F.makeCodes(b.itree,F),r.F.revCodes(b.itree,F),D=b.ltree,A=b.dtree,m(o,l,w-257),m(o,l+=5,Y-1),m(o,l+=5,O-4),l+=4;for(var h=0;h<O;h++)m(o,l+3*h,b.itree[1+(b.ordr[h]<<1)]);l+=3*O,l=r.F._codeTiny(I,b.itree,o,l),l=r.F._codeTiny(P,b.itree,o,l)}for(var f=_,S=0;S<c;S+=2){for(var C=a[S],L=C>>>23,Z=f+(8388607&C);f<Z;)l=r.F._writeLit(p[f++],D,o,l);if(L!=0){var H=a[S+1],j=H>>16,W=H>>8&255,z=255&H;m(o,l=r.F._writeLit(257+W,D,o,l),L-b.of0[W]),l+=b.exb[W],T(o,l=r.F._writeLit(z,A,o,l),j-b.df0[z]),l+=b.dxb[z],f+=L}}l=r.F._writeLit(256,D,o,l)}return l},r.F._copyExact=function(t,a,c,u,p){var _=p>>>3;return u[_]=c,u[_+1]=c>>>8,u[_+2]=255-u[_],u[_+3]=255-u[_+1],_+=4,u.set(new Uint8Array(t.buffer,a,c),_),p+(c+4<<3)},r.F.getTrees=function(){for(var t=r.F.U,a=r.F._hufTree(t.lhst,t.ltree,15),c=r.F._hufTree(t.dhst,t.dtree,15),u=[],p=r.F._lenCodes(t.ltree,u),_=[],s=r.F._lenCodes(t.dtree,_),o=0;o<u.length;o+=2)t.ihst[u[o]]++;for(o=0;o<_.length;o+=2)t.ihst[_[o]]++;for(var l=r.F._hufTree(t.ihst,t.itree,7),v=19;v>4&&t.itree[1+(t.ordr[v-1]<<1)]==0;)v--;return[a,c,l,p,s,v,u,_]},r.F.getSecond=function(t){for(var a=[],c=0;c<t.length;c+=2)a.push(t[c+1]);return a},r.F.nonZero=function(t){for(var a="",c=0;c<t.length;c+=2)t[c+1]!=0&&(a+=(c>>1)+",");return a},r.F.contSize=function(t,a){for(var c=0,u=0;u<a.length;u++)c+=a[u]*t[1+(u<<1)];return c},r.F._codeTiny=function(t,a,c,u){for(var p=0;p<t.length;p+=2){var _=t[p],s=t[p+1];u=r.F._writeLit(_,a,c,u);var o=_==16?2:_==17?3:7;_>15&&(r.F._putsE(c,u,s,o),u+=o)}return u},r.F._lenCodes=function(t,a){for(var c=t.length;c!=2&&t[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var p=t[u+1],_=u+3<c?t[u+3]:-1,s=u+5<c?t[u+5]:-1,o=u==0?-1:t[u-1];if(p==0&&_==p&&s==p){for(var l=u+5;l+2<c&&t[l+2]==p;)l+=2;(v=Math.min(l+1-u>>>1,138))<11?a.push(17,v-3):a.push(18,v-11),u+=2*v-2}else if(p==o&&_==p&&s==p){for(l=u+5;l+2<c&&t[l+2]==p;)l+=2;var v=Math.min(l+1-u>>>1,6);a.push(16,v-3),u+=2*v-2}else a.push(p,0)}return c>>>1},r.F._hufTree=function(t,a,c){var u=[],p=t.length,_=a.length,s=0;for(s=0;s<_;s+=2)a[s]=0,a[s+1]=0;for(s=0;s<p;s++)t[s]!=0&&u.push({lit:s,f:t[s]});var o=u.length,l=u.slice(0);if(o==0)return 0;if(o==1){var v=u[0].lit;return l=v==0?1:0,a[1+(v<<1)]=1,a[1+(l<<1)]=1,1}u.sort(function(I,P){return I.f-P.f});var g=u[0],E=u[1],F=0,w=1,Y=2;for(u[0]={lit:-1,f:g.f+E.f,l:g,r:E,d:0};w!=o-1;)g=F!=w&&(Y==o||u[F].f<u[Y].f)?u[F++]:u[Y++],E=F!=w&&(Y==o||u[F].f<u[Y].f)?u[F++]:u[Y++],u[w++]={lit:-1,f:g.f+E.f,l:g,r:E};var O=r.F.setDepth(u[w-1],0);for(O>c&&(r.F.restrictDepth(l,c,O),O=c),s=0;s<o;s++)a[1+(l[s].lit<<1)]=l[s].d;return O},r.F.setDepth=function(t,a){return t.lit!=-1?(t.d=a,a):Math.max(r.F.setDepth(t.l,a+1),r.F.setDepth(t.r,a+1))},r.F.restrictDepth=function(t,a,c){var u=0,p=1<<c-a,_=0;for(t.sort(function(o,l){return l.d==o.d?o.f-l.f:l.d-o.d}),u=0;u<t.length&&t[u].d>a;u++){var s=t[u].d;t[u].d=a,_+=p-(1<<c-s)}for(_>>>=c-a;_>0;)(s=t[u].d)<a?(t[u].d++,_-=1<<a-s-1):u++;for(;u>=0;u--)t[u].d==a&&_<0&&(t[u].d--,_++);_!=0&&console.log("debt left")},r.F._goodIndex=function(t,a){var c=0;return a[16|c]<=t&&(c|=16),a[8|c]<=t&&(c|=8),a[4|c]<=t&&(c|=4),a[2|c]<=t&&(c|=2),a[1|c]<=t&&(c|=1),c},r.F._writeLit=function(t,a,c,u){return r.F._putsF(c,u,a[t<<1]),u+a[1+(t<<1)]},r.F.inflate=function(t,a){var c=Uint8Array;if(t[0]==3&&t[1]==0)return a||new c(0);var u=r.F,p=u._bitsF,_=u._bitsE,s=u._decodeTiny,o=u.makeCodes,l=u.codes2map,v=u._get17,g=u.U,E=a==null;E&&(a=new c(t.length>>>2<<3));for(var F,w,Y=0,O=0,I=0,P=0,b=0,T=0,m=0,y=0,k=0;Y==0;)if(Y=p(t,k,1),O=p(t,k+1,2),k+=3,O!=0){if(E&&(a=r.F._check(a,y+(1<<17))),O==1&&(F=g.flmap,w=g.fdmap,T=511,m=31),O==2){I=_(t,k,5)+257,P=_(t,k+5,5)+1,b=_(t,k+10,4)+4,k+=14;for(var M=0;M<38;M+=2)g.itree[M]=0,g.itree[M+1]=0;var x=1;for(M=0;M<b;M++){var R=_(t,k+3*M,3);g.itree[1+(g.ordr[M]<<1)]=R,R>x&&(x=R)}k+=3*b,o(g.itree,x),l(g.itree,x,g.imap),F=g.lmap,w=g.dmap,k=s(g.imap,(1<<x)-1,I+P,t,k,g.ttree);var D=u._copyOut(g.ttree,0,I,g.ltree);T=(1<<D)-1;var A=u._copyOut(g.ttree,I,P,g.dtree);m=(1<<A)-1,o(g.ltree,D),l(g.ltree,D,F),o(g.dtree,A),l(g.dtree,A,w)}for(;;){var h=F[v(t,k)&T];k+=15&h;var f=h>>>4;if(!(f>>>8))a[y++]=f;else{if(f==256)break;var S=y+f-254;if(f>264){var C=g.ldef[f-257];S=y+(C>>>3)+_(t,k,7&C),k+=7&C}var L=w[v(t,k)&m];k+=15&L;var Z=L>>>4,H=g.ddef[Z],j=(H>>>4)+p(t,k,15&H);for(k+=15&H,E&&(a=r.F._check(a,y+(1<<17)));y<S;)a[y]=a[y++-j],a[y]=a[y++-j],a[y]=a[y++-j],a[y]=a[y++-j];y=S}}}else{7&k&&(k+=8-(7&k));var W=4+(k>>>3),z=t[W-4]|t[W-3]<<8;E&&(a=r.F._check(a,y+z)),a.set(new c(t.buffer,t.byteOffset+W,z),y),k=W+z<<3,y+=z}return a.length==y?a:a.slice(0,y)},r.F._check=function(t,a){var c=t.length;if(a<=c)return t;var u=new Uint8Array(Math.max(c<<1,a));return u.set(t,0),u},r.F._decodeTiny=function(t,a,c,u,p,_){for(var s=r.F._bitsE,o=r.F._get17,l=0;l<c;){var v=t[o(u,p)&a];p+=15&v;var g=v>>>4;if(g<=15)_[l]=g,l++;else{var E=0,F=0;g==16?(F=3+s(u,p,2),p+=2,E=_[l-1]):g==17?(F=3+s(u,p,3),p+=3):g==18&&(F=11+s(u,p,7),p+=7);for(var w=l+F;l<w;)_[l]=E,l++}}return p},r.F._copyOut=function(t,a,c,u){for(var p=0,_=0,s=u.length>>>1;_<c;){var o=t[_+a];u[_<<1]=0,u[1+(_<<1)]=o,o>p&&(p=o),_++}for(;_<s;)u[_<<1]=0,u[1+(_<<1)]=0,_++;return p},r.F.makeCodes=function(t,a){for(var c,u,p,_,s=r.F.U,o=t.length,l=s.bl_count,v=0;v<=a;v++)l[v]=0;for(v=1;v<o;v+=2)l[t[v]]++;var g=s.next_code;for(c=0,l[0]=0,u=1;u<=a;u++)c=c+l[u-1]<<1,g[u]=c;for(p=0;p<o;p+=2)(_=t[p+1])!=0&&(t[p]=g[_],g[_]++)},r.F.codes2map=function(t,a,c){for(var u=t.length,p=r.F.U.rev15,_=0;_<u;_+=2)if(t[_+1]!=0)for(var s=_>>1,o=t[_+1],l=s<<4|o,v=a-o,g=t[_]<<v,E=g+(1<<v);g!=E;)c[p[g]>>>15-a]=l,g++},r.F.revCodes=function(t,a){for(var c=r.F.U.rev15,u=15-a,p=0;p<t.length;p+=2){var _=t[p]<<a-t[p+1];t[p]=c[_]>>>u}},r.F._putsE=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8},r.F._putsF=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8,t[u+2]|=c>>>16},r.F._bitsE=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8)>>>(7&a)&(1<<c)-1},r.F._bitsF=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)&(1<<c)-1},r.F._get17=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16|t[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=r.F.U,a=0;a<32768;a++){var c=a;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,t.rev15[a]=(c>>>16|c<<16)>>>17}function u(p,_,s){for(;_--!=0;)p.push(0,s)}for(a=0;a<32;a++)t.ldef[a]=t.of0[a]<<3|t.exb[a],t.ddef[a]=t.df0[a]<<4|t.dxb[a];u(t.fltree,144,8),u(t.fltree,112,9),u(t.fltree,24,7),u(t.fltree,8,8),r.F.makeCodes(t.fltree,9),r.F.codes2map(t.fltree,9,t.flmap),r.F.revCodes(t.fltree,9),u(t.fdtree,32,5),r.F.makeCodes(t.fdtree,5),r.F.codes2map(t.fdtree,5,t.fdmap),r.F.revCodes(t.fdtree,5),u(t.itree,19,0),u(t.ltree,286,0),u(t.dtree,30,0),u(t.ttree,320,0)}()})();var mo=uo({__proto__:null,default:ur},[ur]);const at=function(){var i={nextZero(s,o){for(;s[o]!=0;)o++;return o},readUshort:(s,o)=>s[o]<<8|s[o+1],writeUshort(s,o,l){s[o]=l>>8&255,s[o+1]=255&l},readUint:(s,o)=>16777216*s[o]+(s[o+1]<<16|s[o+2]<<8|s[o+3]),writeUint(s,o,l){s[o]=l>>24&255,s[o+1]=l>>16&255,s[o+2]=l>>8&255,s[o+3]=255&l},readASCII(s,o,l){let v="";for(let g=0;g<l;g++)v+=String.fromCharCode(s[o+g]);return v},writeASCII(s,o,l){for(let v=0;v<l.length;v++)s[o+v]=l.charCodeAt(v)},readBytes(s,o,l){const v=[];for(let g=0;g<l;g++)v.push(s[o+g]);return v},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,o,l){let v,g="";for(let E=0;E<l;E++)g+=`%${i.pad(s[o+E].toString(16))}`;try{v=decodeURIComponent(g)}catch{return i.readASCII(s,o,l)}return v}};function e(s,o,l,v){const g=o*l,E=a(v),F=Math.ceil(o*E/8),w=new Uint8Array(4*g),Y=new Uint32Array(w.buffer),{ctype:O}=v,{depth:I}=v,P=i.readUshort;if(O==6){const C=g<<2;if(I==8)for(var b=0;b<C;b+=4)w[b]=s[b],w[b+1]=s[b+1],w[b+2]=s[b+2],w[b+3]=s[b+3];if(I==16)for(b=0;b<C;b++)w[b]=s[b<<1]}else if(O==2){const C=v.tabs.tRNS;if(C==null){if(I==8)for(b=0;b<g;b++){var T=3*b;Y[b]=255<<24|s[T+2]<<16|s[T+1]<<8|s[T]}if(I==16)for(b=0;b<g;b++)T=6*b,Y[b]=255<<24|s[T+4]<<16|s[T+2]<<8|s[T]}else{var m=C[0];const L=C[1],Z=C[2];if(I==8)for(b=0;b<g;b++){var y=b<<2;T=3*b,Y[b]=255<<24|s[T+2]<<16|s[T+1]<<8|s[T],s[T]==m&&s[T+1]==L&&s[T+2]==Z&&(w[y+3]=0)}if(I==16)for(b=0;b<g;b++)y=b<<2,T=6*b,Y[b]=255<<24|s[T+4]<<16|s[T+2]<<8|s[T],P(s,T)==m&&P(s,T+2)==L&&P(s,T+4)==Z&&(w[y+3]=0)}}else if(O==3){const C=v.tabs.PLTE,L=v.tabs.tRNS,Z=L?L.length:0;if(I==1)for(var k=0;k<l;k++){var M=k*F,x=k*o;for(b=0;b<o;b++){y=x+b<<2;var R=3*(D=s[M+(b>>3)]>>7-((7&b)<<0)&1);w[y]=C[R],w[y+1]=C[R+1],w[y+2]=C[R+2],w[y+3]=D<Z?L[D]:255}}if(I==2)for(k=0;k<l;k++)for(M=k*F,x=k*o,b=0;b<o;b++)y=x+b<<2,R=3*(D=s[M+(b>>2)]>>6-((3&b)<<1)&3),w[y]=C[R],w[y+1]=C[R+1],w[y+2]=C[R+2],w[y+3]=D<Z?L[D]:255;if(I==4)for(k=0;k<l;k++)for(M=k*F,x=k*o,b=0;b<o;b++)y=x+b<<2,R=3*(D=s[M+(b>>1)]>>4-((1&b)<<2)&15),w[y]=C[R],w[y+1]=C[R+1],w[y+2]=C[R+2],w[y+3]=D<Z?L[D]:255;if(I==8)for(b=0;b<g;b++){var D;y=b<<2,R=3*(D=s[b]),w[y]=C[R],w[y+1]=C[R+1],w[y+2]=C[R+2],w[y+3]=D<Z?L[D]:255}}else if(O==4){if(I==8)for(b=0;b<g;b++){y=b<<2;var A=s[h=b<<1];w[y]=A,w[y+1]=A,w[y+2]=A,w[y+3]=s[h+1]}if(I==16)for(b=0;b<g;b++){var h;y=b<<2,A=s[h=b<<2],w[y]=A,w[y+1]=A,w[y+2]=A,w[y+3]=s[h+2]}}else if(O==0)for(m=v.tabs.tRNS?v.tabs.tRNS:-1,k=0;k<l;k++){const C=k*F,L=k*o;if(I==1)for(var f=0;f<o;f++){var S=(A=255*(s[C+(f>>>3)]>>>7-(7&f)&1))==255*m?0:255;Y[L+f]=S<<24|A<<16|A<<8|A}else if(I==2)for(f=0;f<o;f++)S=(A=85*(s[C+(f>>>2)]>>>6-((3&f)<<1)&3))==85*m?0:255,Y[L+f]=S<<24|A<<16|A<<8|A;else if(I==4)for(f=0;f<o;f++)S=(A=17*(s[C+(f>>>1)]>>>4-((1&f)<<2)&15))==17*m?0:255,Y[L+f]=S<<24|A<<16|A<<8|A;else if(I==8)for(f=0;f<o;f++)S=(A=s[C+f])==m?0:255,Y[L+f]=S<<24|A<<16|A<<8|A;else if(I==16)for(f=0;f<o;f++)A=s[C+(f<<1)],S=P(s,C+(f<<1))==m?0:255,Y[L+f]=S<<24|A<<16|A<<8|A}return w}function n(s,o,l,v){const g=a(s),E=Math.ceil(l*g/8),F=new Uint8Array((E+1+s.interlace)*v);return o=s.tabs.CgBI?t(o,F):r(o,F),s.interlace==0?o=c(o,s,0,l,v):s.interlace==1&&(o=function(Y,O){const I=O.width,P=O.height,b=a(O),T=b>>3,m=Math.ceil(I*b/8),y=new Uint8Array(P*m);let k=0;const M=[0,0,4,0,2,0,1],x=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const f=R[A],S=D[A];let C=0,L=0,Z=M[A];for(;Z<P;)Z+=f,L++;let H=x[A];for(;H<I;)H+=S,C++;const j=Math.ceil(C*b/8);c(Y,O,k,C,L);let W=0,z=M[A];for(;z<P;){let oe=x[A],$=k+W*j<<3;for(;oe<I;){var h;if(b==1&&(h=(h=Y[$>>3])>>7-(7&$)&1,y[z*m+(oe>>3)]|=h<<7-((7&oe)<<0)),b==2&&(h=(h=Y[$>>3])>>6-(7&$)&3,y[z*m+(oe>>2)]|=h<<6-((3&oe)<<1)),b==4&&(h=(h=Y[$>>3])>>4-(7&$)&15,y[z*m+(oe>>1)]|=h<<4-((1&oe)<<2)),b>=8){const G=z*m+oe*T;for(let B=0;B<T;B++)y[G+B]=Y[($>>3)+B]}$+=b,oe+=S}W++,z+=f}C*L!=0&&(k+=L*(1+j)),A+=1}return y}(o,s)),o}function r(s,o){return t(new Uint8Array(s.buffer,2,s.length-6),o)}var t=function(){const s={H:{}};return s.H.N=function(o,l){const v=Uint8Array;let g,E,F=0,w=0,Y=0,O=0,I=0,P=0,b=0,T=0,m=0;if(o[0]==3&&o[1]==0)return l||new v(0);const y=s.H,k=y.b,M=y.e,x=y.R,R=y.n,D=y.A,A=y.Z,h=y.m,f=l==null;for(f&&(l=new v(o.length>>>2<<5));F==0;)if(F=k(o,m,1),w=k(o,m+1,2),m+=3,w!=0){if(f&&(l=s.H.W(l,T+(1<<17))),w==1&&(g=h.J,E=h.h,P=511,b=31),w==2){Y=M(o,m,5)+257,O=M(o,m+5,5)+1,I=M(o,m+10,4)+4,m+=14;let C=1;for(var S=0;S<38;S+=2)h.Q[S]=0,h.Q[S+1]=0;for(S=0;S<I;S++){const H=M(o,m+3*S,3);h.Q[1+(h.X[S]<<1)]=H,H>C&&(C=H)}m+=3*I,R(h.Q,C),D(h.Q,C,h.u),g=h.w,E=h.d,m=x(h.u,(1<<C)-1,Y+O,o,m,h.v);const L=y.V(h.v,0,Y,h.C);P=(1<<L)-1;const Z=y.V(h.v,Y,O,h.D);b=(1<<Z)-1,R(h.C,L),D(h.C,L,g),R(h.D,Z),D(h.D,Z,E)}for(;;){const C=g[A(o,m)&P];m+=15&C;const L=C>>>4;if(!(L>>>8))l[T++]=L;else{if(L==256)break;{let Z=T+L-254;if(L>264){const oe=h.q[L-257];Z=T+(oe>>>3)+M(o,m,7&oe),m+=7&oe}const H=E[A(o,m)&b];m+=15&H;const j=H>>>4,W=h.c[j],z=(W>>>4)+k(o,m,15&W);for(m+=15&W;T<Z;)l[T]=l[T++-z],l[T]=l[T++-z],l[T]=l[T++-z],l[T]=l[T++-z];T=Z}}}}else{7&m&&(m+=8-(7&m));const C=4+(m>>>3),L=o[C-4]|o[C-3]<<8;f&&(l=s.H.W(l,T+L)),l.set(new v(o.buffer,o.byteOffset+C,L),T),m=C+L<<3,T+=L}return l.length==T?l:l.slice(0,T)},s.H.W=function(o,l){const v=o.length;if(l<=v)return o;const g=new Uint8Array(v<<1);return g.set(o,0),g},s.H.R=function(o,l,v,g,E,F){const w=s.H.e,Y=s.H.Z;let O=0;for(;O<v;){const I=o[Y(g,E)&l];E+=15&I;const P=I>>>4;if(P<=15)F[O]=P,O++;else{let b=0,T=0;P==16?(T=3+w(g,E,2),E+=2,b=F[O-1]):P==17?(T=3+w(g,E,3),E+=3):P==18&&(T=11+w(g,E,7),E+=7);const m=O+T;for(;O<m;)F[O]=b,O++}}return E},s.H.V=function(o,l,v,g){let E=0,F=0;const w=g.length>>>1;for(;F<v;){const Y=o[F+l];g[F<<1]=0,g[1+(F<<1)]=Y,Y>E&&(E=Y),F++}for(;F<w;)g[F<<1]=0,g[1+(F<<1)]=0,F++;return E},s.H.n=function(o,l){const v=s.H.m,g=o.length;let E,F,w,Y;const O=v.j;for(var I=0;I<=l;I++)O[I]=0;for(I=1;I<g;I+=2)O[o[I]]++;const P=v.K;for(E=0,O[0]=0,F=1;F<=l;F++)E=E+O[F-1]<<1,P[F]=E;for(w=0;w<g;w+=2)Y=o[w+1],Y!=0&&(o[w]=P[Y],P[Y]++)},s.H.A=function(o,l,v){const g=o.length,E=s.H.m.r;for(let F=0;F<g;F+=2)if(o[F+1]!=0){const w=F>>1,Y=o[F+1],O=w<<4|Y,I=l-Y;let P=o[F]<<I;const b=P+(1<<I);for(;P!=b;)v[E[P]>>>15-l]=O,P++}},s.H.l=function(o,l){const v=s.H.m.r,g=15-l;for(let E=0;E<o.length;E+=2){const F=o[E]<<l-o[E+1];o[E]=v[F]>>>g}},s.H.M=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8},s.H.I=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8,o[g+2]|=v>>>16},s.H.e=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8)>>>(7&l)&(1<<v)-1},s.H.b=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)&(1<<v)-1},s.H.Z=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)},s.H.i=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16|o[3+(l>>>3)]<<24)>>>(7&l)},s.H.m=function(){const o=Uint16Array,l=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new l(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new l(286),Y:new l(30),a:new l(19),t:new l(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=s.H.m;for(var l=0;l<32768;l++){let g=l;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,o.r[l]=(g>>>16|g<<16)>>>17}function v(g,E,F){for(;E--!=0;)g.push(0,F)}for(l=0;l<32;l++)o.q[l]=o.S[l]<<3|o.T[l],o.c[l]=o.p[l]<<4|o.z[l];v(o._,144,8),v(o._,112,9),v(o._,24,7),v(o._,8,8),s.H.n(o._,9),s.H.A(o._,9,o.J),s.H.l(o._,9),v(o.$,32,5),s.H.n(o.$,5),s.H.A(o.$,5,o.h),s.H.l(o.$,5),v(o.Q,19,0),v(o.C,286,0),v(o.D,30,0),v(o.v,320,0)}(),s.H.N}();function a(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function c(s,o,l,v,g){let E=a(o);const F=Math.ceil(v*E/8);let w,Y;E=Math.ceil(E/8);let O=s[l],I=0;if(O>1&&(s[l]=[0,0,1][O-2]),O==3)for(I=E;I<F;I++)s[I+1]=s[I+1]+(s[I+1-E]>>>1)&255;for(let P=0;P<g;P++)if(w=l+P*F,Y=w+P+1,O=s[Y-1],I=0,O==0)for(;I<F;I++)s[w+I]=s[Y+I];else if(O==1){for(;I<E;I++)s[w+I]=s[Y+I];for(;I<F;I++)s[w+I]=s[Y+I]+s[w+I-E]}else if(O==2)for(;I<F;I++)s[w+I]=s[Y+I]+s[w+I-F];else if(O==3){for(;I<E;I++)s[w+I]=s[Y+I]+(s[w+I-F]>>>1);for(;I<F;I++)s[w+I]=s[Y+I]+(s[w+I-F]+s[w+I-E]>>>1)}else{for(;I<E;I++)s[w+I]=s[Y+I]+u(0,s[w+I-F],0);for(;I<F;I++)s[w+I]=s[Y+I]+u(s[w+I-E],s[w+I-F],s[w+I-E-F])}return s}function u(s,o,l){const v=s+o-l,g=v-s,E=v-o,F=v-l;return g*g<=E*E&&g*g<=F*F?s:E*E<=F*F?o:l}function p(s,o,l){l.width=i.readUint(s,o),o+=4,l.height=i.readUint(s,o),o+=4,l.depth=s[o],o++,l.ctype=s[o],o++,l.compress=s[o],o++,l.filter=s[o],o++,l.interlace=s[o],o++}function _(s,o,l,v,g,E,F,w,Y){const O=Math.min(o,g),I=Math.min(l,E);let P=0,b=0;for(let A=0;A<I;A++)for(let h=0;h<O;h++)if(F>=0&&w>=0?(P=A*o+h<<2,b=(w+A)*g+F+h<<2):(P=(-w+A)*o-F+h<<2,b=A*g+h<<2),Y==0)v[b]=s[P],v[b+1]=s[P+1],v[b+2]=s[P+2],v[b+3]=s[P+3];else if(Y==1){var T=s[P+3]*.00392156862745098,m=s[P]*T,y=s[P+1]*T,k=s[P+2]*T,M=v[b+3]*(1/255),x=v[b]*M,R=v[b+1]*M,D=v[b+2]*M;const f=1-T,S=T+M*f,C=S==0?0:1/S;v[b+3]=255*S,v[b+0]=(m+x*f)*C,v[b+1]=(y+R*f)*C,v[b+2]=(k+D*f)*C}else if(Y==2)T=s[P+3],m=s[P],y=s[P+1],k=s[P+2],M=v[b+3],x=v[b],R=v[b+1],D=v[b+2],T==M&&m==x&&y==R&&k==D?(v[b]=0,v[b+1]=0,v[b+2]=0,v[b+3]=0):(v[b]=m,v[b+1]=y,v[b+2]=k,v[b+3]=T);else if(Y==3){if(T=s[P+3],m=s[P],y=s[P+1],k=s[P+2],M=v[b+3],x=v[b],R=v[b+1],D=v[b+2],T==M&&m==x&&y==R&&k==D)continue;if(T<220&&M>20)return!1}return!0}return{decode:function(o){const l=new Uint8Array(o);let v=8;const g=i,E=g.readUshort,F=g.readUint,w={tabs:{},frames:[]},Y=new Uint8Array(l.length);let O,I=0,P=0;const b=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(l[T]!=b[T])throw"The input is not a PNG file!";for(;v<l.length;){const A=g.readUint(l,v);v+=4;const h=g.readASCII(l,v,4);if(v+=4,h=="IHDR")p(l,v,w);else if(h=="iCCP"){for(var m=v;l[m]!=0;)m++;g.readASCII(l,v,m-v),l[m+1];const f=l.slice(m+2,v+A);let S=null;try{S=r(f)}catch{S=t(f)}w.tabs[h]=S}else if(h=="CgBI")w.tabs[h]=l.slice(v,v+4);else if(h=="IDAT"){for(T=0;T<A;T++)Y[I+T]=l[v+T];I+=A}else if(h=="acTL")w.tabs[h]={num_frames:F(l,v),num_plays:F(l,v+4)},O=new Uint8Array(l.length);else if(h=="fcTL"){P!=0&&((D=w.frames[w.frames.length-1]).data=n(w,O.slice(0,P),D.rect.width,D.rect.height),P=0);const f={x:F(l,v+12),y:F(l,v+16),width:F(l,v+4),height:F(l,v+8)};let S=E(l,v+22);S=E(l,v+20)/(S==0?100:S);const C={rect:f,delay:Math.round(1e3*S),dispose:l[v+24],blend:l[v+25]};w.frames.push(C)}else if(h=="fdAT"){for(T=0;T<A-4;T++)O[P+T]=l[v+T+4];P+=A-4}else if(h=="pHYs")w.tabs[h]=[g.readUint(l,v),g.readUint(l,v+4),l[v+8]];else if(h=="cHRM")for(w.tabs[h]=[],T=0;T<8;T++)w.tabs[h].push(g.readUint(l,v+4*T));else if(h=="tEXt"||h=="zTXt"){w.tabs[h]==null&&(w.tabs[h]={});var y=g.nextZero(l,v),k=g.readASCII(l,v,y-v),M=v+A-y-1;if(h=="tEXt")R=g.readASCII(l,y+1,M);else{var x=r(l.slice(y+2,y+2+M));R=g.readUTF8(x,0,x.length)}w.tabs[h][k]=R}else if(h=="iTXt"){w.tabs[h]==null&&(w.tabs[h]={}),y=0,m=v,y=g.nextZero(l,m),k=g.readASCII(l,m,y-m);const f=l[m=y+1];var R;l[m+1],m+=2,y=g.nextZero(l,m),g.readASCII(l,m,y-m),m=y+1,y=g.nextZero(l,m),g.readUTF8(l,m,y-m),M=A-((m=y+1)-v),f==0?R=g.readUTF8(l,m,M):(x=r(l.slice(m,m+M)),R=g.readUTF8(x,0,x.length)),w.tabs[h][k]=R}else if(h=="PLTE")w.tabs[h]=g.readBytes(l,v,A);else if(h=="hIST"){const f=w.tabs.PLTE.length/3;for(w.tabs[h]=[],T=0;T<f;T++)w.tabs[h].push(E(l,v+2*T))}else if(h=="tRNS")w.ctype==3?w.tabs[h]=g.readBytes(l,v,A):w.ctype==0?w.tabs[h]=E(l,v):w.ctype==2&&(w.tabs[h]=[E(l,v),E(l,v+2),E(l,v+4)]);else if(h=="gAMA")w.tabs[h]=g.readUint(l,v)/1e5;else if(h=="sRGB")w.tabs[h]=l[v];else if(h=="bKGD")w.ctype==0||w.ctype==4?w.tabs[h]=[E(l,v)]:w.ctype==2||w.ctype==6?w.tabs[h]=[E(l,v),E(l,v+2),E(l,v+4)]:w.ctype==3&&(w.tabs[h]=l[v]);else if(h=="IEND")break;v+=A,g.readUint(l,v),v+=4}var D;return P!=0&&((D=w.frames[w.frames.length-1]).data=n(w,O.slice(0,P),D.rect.width,D.rect.height)),w.data=n(w,Y,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(o){const l=o.width,v=o.height;if(o.tabs.acTL==null)return[e(o.data,l,v,o).buffer];const g=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const E=l*v*4,F=new Uint8Array(E),w=new Uint8Array(E),Y=new Uint8Array(E);for(let I=0;I<o.frames.length;I++){const P=o.frames[I],b=P.rect.x,T=P.rect.y,m=P.rect.width,y=P.rect.height,k=e(P.data,m,y,o);if(I!=0)for(var O=0;O<E;O++)Y[O]=F[O];if(P.blend==0?_(k,m,y,F,l,v,b,T,0):P.blend==1&&_(k,m,y,F,l,v,b,T,1),g.push(F.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)_(w,m,y,F,l,v,b,T,0);else if(P.dispose==2)for(O=0;O<E;O++)F[O]=Y[O]}}return g},_paeth:u,_copyTile:_,_bin:i}}();(function(){const{_copyTile:i}=at,{_bin:e}=at,n=at._paeth;var r={table:function(){const m=new Uint32Array(256);for(let y=0;y<256;y++){let k=y;for(let M=0;M<8;M++)1&k?k=3988292384^k>>>1:k>>>=1;m[y]=k}return m}(),update(m,y,k,M){for(let x=0;x<M;x++)m=r.table[255&(m^y[k+x])]^m>>>8;return m},crc:(m,y,k)=>4294967295^r.update(4294967295,m,y,k)};function t(m,y,k,M){y[k]+=m[0]*M>>4,y[k+1]+=m[1]*M>>4,y[k+2]+=m[2]*M>>4,y[k+3]+=m[3]*M>>4}function a(m){return Math.max(0,Math.min(255,m))}function c(m,y){const k=m[0]-y[0],M=m[1]-y[1],x=m[2]-y[2],R=m[3]-y[3];return k*k+M*M+x*x+R*R}function u(m,y,k,M,x,R,D){D==null&&(D=1);const A=M.length,h=[];for(var f=0;f<A;f++){const z=M[f];h.push([z>>>0&255,z>>>8&255,z>>>16&255,z>>>24&255])}for(f=0;f<A;f++){let z=4294967295;for(var S=0,C=0;C<A;C++){var L=c(h[f],h[C]);C!=f&&L<z&&(z=L,S=C)}}const Z=new Uint32Array(x.buffer),H=new Int16Array(y*k*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<j.length;f++)j[f]=255*((j[f]+.5)/16-.5);for(let z=0;z<k;z++)for(let oe=0;oe<y;oe++){var W;f=4*(z*y+oe),D!=2?W=[a(m[f]+H[f]),a(m[f+1]+H[f+1]),a(m[f+2]+H[f+2]),a(m[f+3]+H[f+3])]:(L=j[4*(3&z)+(3&oe)],W=[a(m[f]+L),a(m[f+1]+L),a(m[f+2]+L),a(m[f+3]+L)]),S=0;let $=16777215;for(C=0;C<A;C++){const te=c(W,h[C]);te<$&&($=te,S=C)}const G=h[S],B=[W[0]-G[0],W[1]-G[1],W[2]-G[2],W[3]-G[3]];D==1&&(oe!=y-1&&t(B,H,f+4,7),z!=k-1&&(oe!=0&&t(B,H,f+4*y-4,3),t(B,H,f+4*y,5),oe!=y-1&&t(B,H,f+4*y+4,1))),R[f>>2]=S,Z[f>>2]=M[S]}}function p(m,y,k,M,x){x==null&&(x={});const{crc:R}=r,D=e.writeUint,A=e.writeUshort,h=e.writeASCII;let f=8;const S=m.frames.length>1;let C,L=!1,Z=33+(S?20:0);if(x.sRGB!=null&&(Z+=13),x.pHYs!=null&&(Z+=21),x.iCCP!=null&&(C=pako.deflate(x.iCCP),Z+=21+C.length+4),m.ctype==3){for(var H=m.plte.length,j=0;j<H;j++)m.plte[j]>>>24!=255&&(L=!0);Z+=8+3*H+4+(L?8+1*H+4:0)}for(var W=0;W<m.frames.length;W++)S&&(Z+=38),Z+=(G=m.frames[W]).cimg.length+12,W!=0&&(Z+=4);Z+=12;const z=new Uint8Array(Z),oe=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)z[j]=oe[j];if(D(z,f,13),f+=4,h(z,f,"IHDR"),f+=4,D(z,f,y),f+=4,D(z,f,k),f+=4,z[f]=m.depth,f++,z[f]=m.ctype,f++,z[f]=0,f++,z[f]=0,f++,z[f]=0,f++,D(z,f,R(z,f-17,17)),f+=4,x.sRGB!=null&&(D(z,f,1),f+=4,h(z,f,"sRGB"),f+=4,z[f]=x.sRGB,f++,D(z,f,R(z,f-5,5)),f+=4),x.iCCP!=null){const B=13+C.length;D(z,f,B),f+=4,h(z,f,"iCCP"),f+=4,h(z,f,"ICC profile"),f+=11,f+=2,z.set(C,f),f+=C.length,D(z,f,R(z,f-(B+4),B+4)),f+=4}if(x.pHYs!=null&&(D(z,f,9),f+=4,h(z,f,"pHYs"),f+=4,D(z,f,x.pHYs[0]),f+=4,D(z,f,x.pHYs[1]),f+=4,z[f]=x.pHYs[2],f++,D(z,f,R(z,f-13,13)),f+=4),S&&(D(z,f,8),f+=4,h(z,f,"acTL"),f+=4,D(z,f,m.frames.length),f+=4,D(z,f,x.loop!=null?x.loop:0),f+=4,D(z,f,R(z,f-12,12)),f+=4),m.ctype==3){for(D(z,f,3*(H=m.plte.length)),f+=4,h(z,f,"PLTE"),f+=4,j=0;j<H;j++){const B=3*j,te=m.plte[j],le=255&te,ce=te>>>8&255,re=te>>>16&255;z[f+B+0]=le,z[f+B+1]=ce,z[f+B+2]=re}if(f+=3*H,D(z,f,R(z,f-3*H-4,3*H+4)),f+=4,L){for(D(z,f,H),f+=4,h(z,f,"tRNS"),f+=4,j=0;j<H;j++)z[f+j]=m.plte[j]>>>24&255;f+=H,D(z,f,R(z,f-H-4,H+4)),f+=4}}let $=0;for(W=0;W<m.frames.length;W++){var G=m.frames[W];S&&(D(z,f,26),f+=4,h(z,f,"fcTL"),f+=4,D(z,f,$++),f+=4,D(z,f,G.rect.width),f+=4,D(z,f,G.rect.height),f+=4,D(z,f,G.rect.x),f+=4,D(z,f,G.rect.y),f+=4,A(z,f,M[W]),f+=2,A(z,f,1e3),f+=2,z[f]=G.dispose,f++,z[f]=G.blend,f++,D(z,f,R(z,f-30,30)),f+=4);const B=G.cimg;D(z,f,(H=B.length)+(W==0?0:4)),f+=4;const te=f;h(z,f,W==0?"IDAT":"fdAT"),f+=4,W!=0&&(D(z,f,$++),f+=4),z.set(B,f),f+=H,D(z,f,R(z,te,f-te)),f+=4}return D(z,f,0),f+=4,h(z,f,"IEND"),f+=4,D(z,f,R(z,f-4,4)),f+=4,z.buffer}function _(m,y,k){for(let M=0;M<m.frames.length;M++){const x=m.frames[M];x.rect.width;const R=x.rect.height,D=new Uint8Array(R*x.bpl+R);x.cimg=v(x.img,R,x.bpp,x.bpl,D,y,k)}}function s(m,y,k,M,x){const R=x[0],D=x[1],A=x[2],h=x[3],f=x[4],S=x[5];let C=6,L=8,Z=255;for(var H=0;H<m.length;H++){const fe=new Uint8Array(m[H]);for(var j=fe.length,W=0;W<j;W+=4)Z&=fe[W+3]}const z=Z!=255,oe=function(ne,de,ve,Ie,ge,pe){const we=[];for(var be=0;be<ne.length;be++){const Ye=new Uint8Array(ne[be]),Ke=new Uint32Array(Ye.buffer);var Re;let We=0,Ve=0,Xe=de,pt=ve,Ct=Ie?1:0;if(be!=0){const $t=pe||Ie||be==1||we[be-2].dispose!=0?1:2;let Qt=0,Kt=1e9;for(let Rt=0;Rt<$t;Rt++){var He=new Uint8Array(ne[be-1-Rt]);const Vt=new Uint32Array(ne[be-1-Rt]);let st=de,nt=ve,yt=-1,gt=-1;for(let _t=0;_t<ve;_t++)for(let bt=0;bt<de;bt++)Ke[Fe=_t*de+bt]!=Vt[Fe]&&(bt<st&&(st=bt),bt>yt&&(yt=bt),_t<nt&&(nt=_t),_t>gt&&(gt=_t));yt==-1&&(st=nt=yt=gt=0),ge&&((1&st)==1&&st--,(1&nt)==1&&nt--);const Ht=(yt-st+1)*(gt-nt+1);Ht<Kt&&(Kt=Ht,Qt=Rt,We=st,Ve=nt,Xe=yt-st+1,pt=gt-nt+1)}He=new Uint8Array(ne[be-1-Qt]),Qt==1&&(we[be-1].dispose=2),Re=new Uint8Array(Xe*pt*4),i(He,de,ve,Re,Xe,pt,-We,-Ve,0),Ct=i(Ye,de,ve,Re,Xe,pt,-We,-Ve,3)?1:0,Ct==1?l(Ye,de,ve,Re,{x:We,y:Ve,width:Xe,height:pt}):i(Ye,de,ve,Re,Xe,pt,-We,-Ve,0)}else Re=Ye.slice(0);we.push({rect:{x:We,y:Ve,width:Xe,height:pt},img:Re,blend:Ct,dispose:0})}if(Ie)for(be=0;be<we.length;be++){if((ht=we[be]).blend==1)continue;const Ye=ht.rect,Ke=we[be-1].rect,We=Math.min(Ye.x,Ke.x),Ve=Math.min(Ye.y,Ke.y),Xe={x:We,y:Ve,width:Math.max(Ye.x+Ye.width,Ke.x+Ke.width)-We,height:Math.max(Ye.y+Ye.height,Ke.y+Ke.height)-Ve};we[be-1].dispose=1,be-1!=0&&o(ne,de,ve,we,be-1,Xe,ge),o(ne,de,ve,we,be,Xe,ge)}let rt=0;if(ne.length!=1)for(var Fe=0;Fe<we.length;Fe++){var ht;rt+=(ht=we[Fe]).rect.width*ht.rect.height}return we}(m,y,k,R,D,A),$={},G=[],B=[];if(M!=0){const fe=[];for(W=0;W<oe.length;W++)fe.push(oe[W].img.buffer);const ne=function(ge){let pe=0;for(var we=0;we<ge.length;we++)pe+=ge[we].byteLength;const be=new Uint8Array(pe);let Re=0;for(we=0;we<ge.length;we++){const He=new Uint8Array(ge[we]),rt=He.length;for(let Fe=0;Fe<rt;Fe+=4){let ht=He[Fe],Ye=He[Fe+1],Ke=He[Fe+2];const We=He[Fe+3];We==0&&(ht=Ye=Ke=0),be[Re+Fe]=ht,be[Re+Fe+1]=Ye,be[Re+Fe+2]=Ke,be[Re+Fe+3]=We}Re+=rt}return be.buffer}(fe),de=E(ne,M);for(W=0;W<de.plte.length;W++)G.push(de.plte[W].est.rgba);let ve=0;for(W=0;W<oe.length;W++){const Ie=(le=oe[W]).img.length;var te=new Uint8Array(de.inds.buffer,ve>>2,Ie>>2);B.push(te);const ge=new Uint8Array(de.abuf,ve,Ie);S&&u(le.img,le.rect.width,le.rect.height,G,ge,te),le.img.set(ge),ve+=Ie}}else for(H=0;H<oe.length;H++){var le=oe[H];const fe=new Uint32Array(le.img.buffer);var ce=le.rect.width;for(j=fe.length,te=new Uint8Array(j),B.push(te),W=0;W<j;W++){const ne=fe[W];if(W!=0&&ne==fe[W-1])te[W]=te[W-1];else if(W>ce&&ne==fe[W-ce])te[W]=te[W-ce];else{let de=$[ne];if(de==null&&($[ne]=de=G.length,G.push(ne),G.length>=300))break;te[W]=de}}}const re=G.length;for(re<=256&&f==0&&(L=re<=2?1:re<=4?2:re<=16?4:8,L=Math.max(L,h)),H=0;H<oe.length;H++){(le=oe[H]).rect.x,le.rect.y,ce=le.rect.width;const fe=le.rect.height;let ne=le.img;new Uint32Array(ne.buffer);let de=4*ce,ve=4;if(re<=256&&f==0){de=Math.ceil(L*ce/8);var J=new Uint8Array(de*fe);const Ie=B[H];for(let ge=0;ge<fe;ge++){W=ge*de;const pe=ge*ce;if(L==8)for(var se=0;se<ce;se++)J[W+se]=Ie[pe+se];else if(L==4)for(se=0;se<ce;se++)J[W+(se>>1)]|=Ie[pe+se]<<4-4*(1&se);else if(L==2)for(se=0;se<ce;se++)J[W+(se>>2)]|=Ie[pe+se]<<6-2*(3&se);else if(L==1)for(se=0;se<ce;se++)J[W+(se>>3)]|=Ie[pe+se]<<7-1*(7&se)}ne=J,C=3,ve=1}else if(z==0&&oe.length==1){J=new Uint8Array(ce*fe*3);const Ie=ce*fe;for(W=0;W<Ie;W++){const ge=3*W,pe=4*W;J[ge]=ne[pe],J[ge+1]=ne[pe+1],J[ge+2]=ne[pe+2]}ne=J,C=2,ve=3,de=3*ce}le.img=ne,le.bpl=de,le.bpp=ve}return{ctype:C,depth:L,plte:G,frames:oe}}function o(m,y,k,M,x,R,D){const A=Uint8Array,h=Uint32Array,f=new A(m[x-1]),S=new h(m[x-1]),C=x+1<m.length?new A(m[x+1]):null,L=new A(m[x]),Z=new h(L.buffer);let H=y,j=k,W=-1,z=-1;for(let $=0;$<R.height;$++)for(let G=0;G<R.width;G++){const B=R.x+G,te=R.y+$,le=te*y+B,ce=Z[le];ce==0||M[x-1].dispose==0&&S[le]==ce&&(C==null||C[4*le+3]!=0)||(B<H&&(H=B),B>W&&(W=B),te<j&&(j=te),te>z&&(z=te))}W==-1&&(H=j=W=z=0),D&&((1&H)==1&&H--,(1&j)==1&&j--),R={x:H,y:j,width:W-H+1,height:z-j+1};const oe=M[x];oe.rect=R,oe.blend=1,oe.img=new Uint8Array(R.width*R.height*4),M[x-1].dispose==0?(i(f,y,k,oe.img,R.width,R.height,-R.x,-R.y,0),l(L,y,k,oe.img,R)):i(L,y,k,oe.img,R.width,R.height,-R.x,-R.y,0)}function l(m,y,k,M,x){i(m,y,k,M,x.width,x.height,-x.x,-x.y,2)}function v(m,y,k,M,x,R,D){const A=[];let h,f=[0,1,2,3,4];R!=-1?f=[R]:(y*M>5e5||k==1)&&(f=[0]),D&&(h={level:0});const S=mo;for(var C=0;C<f.length;C++){for(let H=0;H<y;H++)g(x,m,H,M,k,f[C]);A.push(S.deflate(x,h))}let L,Z=1e9;for(C=0;C<A.length;C++)A[C].length<Z&&(L=C,Z=A[C].length);return A[L]}function g(m,y,k,M,x,R){const D=k*M;let A=D+k;if(m[A]=R,A++,R==0)if(M<500)for(var h=0;h<M;h++)m[A+h]=y[D+h];else m.set(new Uint8Array(y.buffer,D,M),A);else if(R==1){for(h=0;h<x;h++)m[A+h]=y[D+h];for(h=x;h<M;h++)m[A+h]=y[D+h]-y[D+h-x]+256&255}else if(k==0){for(h=0;h<x;h++)m[A+h]=y[D+h];if(R==2)for(h=x;h<M;h++)m[A+h]=y[D+h];if(R==3)for(h=x;h<M;h++)m[A+h]=y[D+h]-(y[D+h-x]>>1)+256&255;if(R==4)for(h=x;h<M;h++)m[A+h]=y[D+h]-n(y[D+h-x],0,0)+256&255}else{if(R==2)for(h=0;h<M;h++)m[A+h]=y[D+h]+256-y[D+h-M]&255;if(R==3){for(h=0;h<x;h++)m[A+h]=y[D+h]+256-(y[D+h-M]>>1)&255;for(h=x;h<M;h++)m[A+h]=y[D+h]+256-(y[D+h-M]+y[D+h-x]>>1)&255}if(R==4){for(h=0;h<x;h++)m[A+h]=y[D+h]+256-n(0,y[D+h-M],0)&255;for(h=x;h<M;h++)m[A+h]=y[D+h]+256-n(y[D+h-x],y[D+h-M],y[D+h-x-M])&255}}}function E(m,y){const k=new Uint8Array(m),M=k.slice(0),x=new Uint32Array(M.buffer),R=F(M,y),D=R[0],A=R[1],h=k.length,f=new Uint8Array(h>>2);let S;if(k.length<2e7)for(var C=0;C<h;C+=4)S=w(D,L=k[C]*(1/255),Z=k[C+1]*(1/255),H=k[C+2]*(1/255),j=k[C+3]*(1/255)),f[C>>2]=S.ind,x[C>>2]=S.est.rgba;else for(C=0;C<h;C+=4){var L=k[C]*.00392156862745098,Z=k[C+1]*(1/255),H=k[C+2]*(1/255),j=k[C+3]*(1/255);for(S=D;S.left;)S=Y(S.est,L,Z,H,j)<=0?S.left:S.right;f[C>>2]=S.ind,x[C>>2]=S.est.rgba}return{abuf:M.buffer,inds:f,plte:A}}function F(m,y,k){k==null&&(k=1e-4);const M=new Uint32Array(m.buffer),x={i0:0,i1:m.length,bst:null,est:null,tdst:0,left:null,right:null};x.bst=P(m,x.i0,x.i1),x.est=b(x.bst);const R=[x];for(;R.length<y;){let A=0,h=0;for(var D=0;D<R.length;D++)R[D].est.L>A&&(A=R[D].est.L,h=D);if(A<k)break;const f=R[h],S=O(m,M,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=S||f.i1<=S){f.est.L=0;continue}const C={i0:f.i0,i1:S,bst:null,est:null,tdst:0,left:null,right:null};C.bst=P(m,C.i0,C.i1),C.est=b(C.bst);const L={i0:S,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(L.bst={R:[],m:[],N:f.bst.N-C.bst.N},D=0;D<16;D++)L.bst.R[D]=f.bst.R[D]-C.bst.R[D];for(D=0;D<4;D++)L.bst.m[D]=f.bst.m[D]-C.bst.m[D];L.est=b(L.bst),f.left=C,f.right=L,R[h]=C,R.push(L)}for(R.sort((A,h)=>h.bst.N-A.bst.N),D=0;D<R.length;D++)R[D].ind=D;return[x,R]}function w(m,y,k,M,x){if(m.left==null)return m.tdst=function(C,L,Z,H,j){const W=L-C[0],z=Z-C[1],oe=H-C[2],$=j-C[3];return W*W+z*z+oe*oe+$*$}(m.est.q,y,k,M,x),m;const R=Y(m.est,y,k,M,x);let D=m.left,A=m.right;R>0&&(D=m.right,A=m.left);const h=w(D,y,k,M,x);if(h.tdst<=R*R)return h;const f=w(A,y,k,M,x);return f.tdst<h.tdst?f:h}function Y(m,y,k,M,x){const{e:R}=m;return R[0]*y+R[1]*k+R[2]*M+R[3]*x-m.eMq}function O(m,y,k,M,x,R){for(M-=4;k<M;){for(;I(m,k,x)<=R;)k+=4;for(;I(m,M,x)>R;)M-=4;if(k>=M)break;const D=y[k>>2];y[k>>2]=y[M>>2],y[M>>2]=D,k+=4,M-=4}for(;I(m,k,x)>R;)k-=4;return k+4}function I(m,y,k){return m[y]*k[0]+m[y+1]*k[1]+m[y+2]*k[2]+m[y+3]*k[3]}function P(m,y,k){const M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=[0,0,0,0],R=k-y>>2;for(let D=y;D<k;D+=4){const A=m[D]*.00392156862745098,h=m[D+1]*(1/255),f=m[D+2]*(1/255),S=m[D+3]*(1/255);x[0]+=A,x[1]+=h,x[2]+=f,x[3]+=S,M[0]+=A*A,M[1]+=A*h,M[2]+=A*f,M[3]+=A*S,M[5]+=h*h,M[6]+=h*f,M[7]+=h*S,M[10]+=f*f,M[11]+=f*S,M[15]+=S*S}return M[4]=M[1],M[8]=M[2],M[9]=M[6],M[12]=M[3],M[13]=M[7],M[14]=M[11],{R:M,m:x,N:R}}function b(m){const{R:y}=m,{m:k}=m,{N:M}=m,x=k[0],R=k[1],D=k[2],A=k[3],h=M==0?0:1/M,f=[y[0]-x*x*h,y[1]-x*R*h,y[2]-x*D*h,y[3]-x*A*h,y[4]-R*x*h,y[5]-R*R*h,y[6]-R*D*h,y[7]-R*A*h,y[8]-D*x*h,y[9]-D*R*h,y[10]-D*D*h,y[11]-D*A*h,y[12]-A*x*h,y[13]-A*R*h,y[14]-A*D*h,y[15]-A*A*h],S=f,C=T;let L=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,H=0;if(M!=0)for(let W=0;W<16&&(L=C.multVec(S,L),H=Math.sqrt(C.dot(L,L)),L=C.sml(1/H,L),!(W!=0&&Math.abs(H-Z)<1e-9));W++)Z=H;const j=[x*h,R*h,D*h,A*h];return{Cov:f,q:j,e:L,L:Z,eMq255:C.dot(C.sml(255,j),L),eMq:C.dot(L,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var T={multVec:(m,y)=>[m[0]*y[0]+m[1]*y[1]+m[2]*y[2]+m[3]*y[3],m[4]*y[0]+m[5]*y[1]+m[6]*y[2]+m[7]*y[3],m[8]*y[0]+m[9]*y[1]+m[10]*y[2]+m[11]*y[3],m[12]*y[0]+m[13]*y[1]+m[14]*y[2]+m[15]*y[3]],dot:(m,y)=>m[0]*y[0]+m[1]*y[1]+m[2]*y[2]+m[3]*y[3],sml:(m,y)=>[m*y[0],m*y[1],m*y[2],m*y[3]]};at.encode=function(y,k,M,x,R,D,A){x==null&&(x=0),A==null&&(A=!1);const h=s(y,k,M,x,[!1,!1,!1,0,A,!1]);return _(h,-1),p(h,k,M,R,D)},at.encodeLL=function(y,k,M,x,R,D,A,h){const f={ctype:0+(x==1?0:2)+(R==0?0:4),depth:D,frames:[]},S=(x+R)*D,C=S*k;for(let L=0;L<y.length;L++)f.frames.push({rect:{x:0,y:0,width:k,height:M},img:new Uint8Array(y[L]),blend:0,dispose:1,bpp:Math.ceil(S/8),bpl:Math.ceil(C/8)});return _(f,0,!0),p(f,k,M,A,h)},at.encode.compress=s,at.encode.dither=u,at.quantize=E,at.quantize.getKDtree=F,at.quantize.getNearest=w})();const zn={toArrayBuffer(i,e){const n=i.width,r=i.height,t=n<<2,a=i.getContext("2d").getImageData(0,0,n,r),c=new Uint32Array(a.data.buffer),u=(32*n+31)/32<<2,p=u*r,_=122+p,s=new ArrayBuffer(_),o=new DataView(s),l=1<<20;let v,g,E,F,w=l,Y=0,O=0,I=0;function P(m){o.setUint16(O,m,!0),O+=2}function b(m){o.setUint32(O,m,!0),O+=4}function T(m){O+=m}P(19778),b(_),T(4),b(122),b(108),b(n),b(-r>>>0),P(1),P(32),b(3),b(p),b(2835),b(2835),T(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function m(){for(;Y<r&&w>0;){for(F=122+Y*u,v=0;v<t;)w--,g=c[I++],E=g>>>24,o.setUint32(F+v,g<<8|E),v+=4;Y++}I<c.length?(w=l,setTimeout(m,zn._dly)):e(s)}()},toBlob(i,e){this.toArrayBuffer(i,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var je={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},ho={[je.CHROME]:16384,[je.FIREFOX]:11180,[je.DESKTOP_SAFARI]:16384,[je.IE]:8192,[je.IOS]:4096,[je.ETC]:8192};const qr=typeof window<"u",Wn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dr=qr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),po=(qr||Wn)&&(dr&&dr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),qn=(qr||Wn)&&(dr&&dr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Br(i,e,n=Date.now()){return new Promise(r=>{const t=i.split(","),a=t[0].match(/:(.*?);/)[1],c=globalThis.atob(t[1]);let u=c.length;const p=new Uint8Array(u);for(;u--;)p[u]=c.charCodeAt(u);const _=new Blob([p],{type:a});_.name=e,_.lastModified=n,r(_)})}function Bn(i){return new Promise((e,n)=>{const r=new qn;r.onload=()=>e(r.result),r.onerror=t=>n(t),r.readAsDataURL(i)})}function $n(i){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t=>n(t),r.src=i})}function Pt(){if(Pt.cachedResult!==void 0)return Pt.cachedResult;let i=je.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?i=je.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?i=je.IOS:/Safari/i.test(e)?i=je.DESKTOP_SAFARI:/Firefox/i.test(e)?i=je.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(i=je.IE),Pt.cachedResult=i,Pt.cachedResult}function Qn(i,e){const n=Pt(),r=ho[n];let t=i,a=e,c=t*a;const u=t>a?a/t:t/a;for(;c>r*r;){const p=(r+t)/2,_=(r+a)/2;p<_?(a=_,t=_*u):(a=p*u,t=p),c=t*a}return{width:t,height:a}}function mr(i,e){let n,r;try{if(n=new OffscreenCanvas(i,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=i,n.height=e,[n,r]}function jn(i,e){const{width:n,height:r}=Qn(i.width,i.height),[t,a]=mr(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,t.width,t.height)),a.drawImage(i,0,0,t.width,t.height),t}function nr(){return nr.cachedResult!==void 0||(nr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),nr.cachedResult}function fr(i,e={}){return new Promise(function(n,r){let t,a;var c=function(){try{return a=jn(t,e.fileType||i.type),n([t,a])}catch(p){return r(p)}},u=function(p){try{var _=function(s){try{throw s}catch(o){return r(o)}};try{let s;return Bn(i).then(function(o){try{return s=o,$n(s).then(function(l){try{return t=l,function(){try{return c()}catch(v){return r(v)}}()}catch(v){return _(v)}},_)}catch(l){return _(l)}},_)}catch(s){_(s)}}catch(s){return r(s)}};try{if(nr()||[je.DESKTOP_SAFARI,je.MOBILE_SAFARI].includes(Pt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(i).then(function(p){try{return t=p,c()}catch{return u()}},u)}catch{u()}})}function vr(i,e,n,r,t=1){return new Promise(function(a,c){let u;if(e==="image/png"){let _,s,o;return _=i.getContext("2d"),{data:s}=_.getImageData(0,0,i.width,i.height),o=at.encode([s.buffer],i.width,i.height,4096*t),u=new Blob([o],{type:e}),u.name=n,u.lastModified=r,p.call(this)}{let _=function(){return p.call(this)};if(e==="image/bmp")return new Promise(s=>zn.toBlob(i,s)).then(function(s){try{return u=s,u.name=n,u.lastModified=r,_.call(this)}catch(o){return c(o)}}.bind(this),c);{let s=function(){return _.call(this)};if(typeof OffscreenCanvas=="function"&&i instanceof OffscreenCanvas)return i.convertToBlob({type:e,quality:t}).then(function(o){try{return u=o,u.name=n,u.lastModified=r,s.call(this)}catch(l){return c(l)}}.bind(this),c);{let o;return o=i.toDataURL(e,t),Br(o,n,r).then(function(l){try{return u=l,s.call(this)}catch(v){return c(v)}}.bind(this),c)}}}function p(){return a(u)}})}function ct(i){i.width=0,i.height=0}function Wt(){return new Promise(function(i,e){let n,r,t,a;return Wt.cachedResult!==void 0?i(Wt.cachedResult):Br("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return n=c,fr(n).then(function(u){try{return r=u[1],vr(r,n.type,n.name,n.lastModified).then(function(p){try{return t=p,ct(r),fr(t).then(function(_){try{return a=_[0],Wt.cachedResult=a.width===1&&a.height===2,i(Wt.cachedResult)}catch(s){return e(s)}},e)}catch(_){return e(_)}},e)}catch(p){return e(p)}},e)}catch(u){return e(u)}},e)})}function Gn(i){return new Promise((e,n)=>{const r=new qn;r.onload=t=>{const a=new DataView(t.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const c=a.byteLength;let u=2;for(;u<c;){if(a.getUint16(u+2,!1)<=8)return e(-1);const p=a.getUint16(u,!1);if(u+=2,p==65505){if(a.getUint32(u+=2,!1)!=1165519206)return e(-1);const _=a.getUint16(u+=6,!1)==18761;u+=a.getUint32(u+4,_);const s=a.getUint16(u,_);u+=2;for(let o=0;o<s;o++)if(a.getUint16(u+12*o,_)==274)return e(a.getUint16(u+12*o+8,_))}else{if((65280&p)!=65280)break;u+=a.getUint16(u,!1)}}return e(-1)},r.onerror=t=>n(t),r.readAsArrayBuffer(i)})}function Zn(i,e){const{width:n}=i,{height:r}=i,{maxWidthOrHeight:t}=e;let a,c=i;return isFinite(t)&&(n>t||r>t)&&([c,a]=mr(n,r),n>r?(c.width=t,c.height=r/n*t):(c.width=n/r*t,c.height=t),a.drawImage(i,0,0,c.width,c.height),ct(i)),c}function Kn(i,e){const{width:n}=i,{height:r}=i,[t,a]=mr(n,r);switch(e>4&&e<9?(t.width=r,t.height=n):(t.width=n,t.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(i,0,0,n,r),ct(i),t}function yn(i,e,n=0){return new Promise(function(r,t){let a,c,u,p,_,s,o,l,v,g,E,F,w,Y,O,I,P,b,T,m;function y(M=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=M,e.onProgress(Math.min(a,100))}function k(M){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(M,a),100),e.onProgress(a)}return a=n,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,y(),fr(i,e).then(function(M){try{return[,p]=M,y(),_=Zn(p,e),y(),new Promise(function(x,R){var D;if(!(D=e.exifOrientation))return Gn(i).then(function(h){try{return D=h,A.call(this)}catch(f){return R(f)}}.bind(this),R);function A(){return x(D)}return A.call(this)}).then(function(x){try{return s=x,y(),Wt().then(function(R){try{return o=R?_:Kn(_,s),y(),l=e.initialQuality||1,v=e.fileType||i.type,vr(o,v,i.name,i.lastModified,l).then(function(D){try{{let h=function(){if(c--&&(O>u||O>w)){let S,C;return S=m?.95*T.width:T.width,C=m?.95*T.height:T.height,[P,b]=mr(S,C),b.drawImage(T,0,0,S,C),l*=v==="image/png"?.85:.95,vr(P,v,i.name,i.lastModified,l).then(function(L){try{return I=L,ct(T),T=P,O=I.size,k(Math.min(99,Math.floor((Y-O)/(Y-u)*100))),h}catch(Z){return t(Z)}},t)}return[1]},f=function(){return ct(T),ct(P),ct(_),ct(o),ct(p),k(100),r(I)};if(g=D,y(),E=g.size>u,F=g.size>i.size,!E&&!F)return k(100),r(g);var A;return w=i.size,Y=g.size,O=Y,T=o,m=!e.alwaysKeepResolution&&E,(A=function(S){for(;S;){if(S.then)return void S.then(A,t);try{if(S.pop){if(S.length)return S.pop()?f.call(this):S;S=h}else S=S.call(this)}catch(C){return t(C)}}}.bind(this))(h)}}catch(h){return t(h)}}.bind(this),t)}catch(D){return t(D)}}.bind(this),t)}catch(R){return t(R)}}.bind(this),t)}catch(x){return t(x)}}.bind(this),t)})}const yo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Dr;function go(i,e){return new Promise((n,r)=>{Dr||(Dr=function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))}(yo));const t=new Worker(Dr);t.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)t.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void t.terminate();n(c.data.file),t.terminate()}else e.onProgress(c.data.progress)}),t.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),t.terminate()}),t.postMessage({file:i,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function ze(i,e){return new Promise(function(n,r){let t,a,c,u,p,_;if(t={...e},c=0,{onProgress:u}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=v=>{c=v,typeof u=="function"&&u(c)},!(i instanceof Blob||i instanceof po))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(i.type))return r(new Error("The file given is not an image"));if(_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||_)return yn(i,t).then(function(v){try{return a=v,l.call(this)}catch(g){return r(g)}}.bind(this),r);var s=function(){try{return l.call(this)}catch(v){return r(v)}}.bind(this),o=function(v){try{return yn(i,t).then(function(g){try{return a=g,s()}catch(E){return r(E)}},r)}catch(g){return r(g)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",go(i,t).then(function(v){try{return a=v,s()}catch{return o()}},o)}catch{o()}function l(){try{a.name=i.name,a.lastModified=i.lastModified}catch{}try{t.preserveExif&&i.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===i.type)&&(a=Hn(i,a))}catch{}return n(a)}})}ze.getDataUrlFromFile=Bn,ze.getFilefromDataUrl=Br,ze.loadImage=$n,ze.drawImageInCanvas=jn,ze.drawFileInCanvas=fr,ze.canvasToFile=vr,ze.getExifOrientation=Gn,ze.handleMaxWidthOrHeight=Zn,ze.followExifOrientation=Kn,ze.cleanupCanvasMemory=ct,ze.isAutoOrientationInBrowser=Wt,ze.approximateBelowMaximumCanvasSizeOfBrowser=Qn,ze.copyExifWithoutOrientation=Hn,ze.getBrowserName=Pt,ze.version="2.0.2";const _o={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function bo(i,e,n={},r){const t={..._o,...n};try{let a=i;if(i.type.startsWith("image/")&&i.size>t.compressionThresholdMB*1024*1024){r?.("Compressing image...");try{const p=await ze(i,{maxSizeMB:t.maxSizeMB,maxWidthOrHeight:t.maxWidthOrHeight,initialQuality:t.initialQuality,useWebWorker:t.useWebWorker});a=p;const _=(i.size/(1024*1024)).toFixed(2),s=(p.size/(1024*1024)).toFixed(2),o=((1-p.size/i.size)*100).toFixed(0);console.log(`Image compressed: ${_}MB → ${s}MB (${o}% smaller)`)}catch(p){console.warn("Image compression failed, uploading original:",p)}}return r?.("Uploading file..."),{success:!0,attachment:await On(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function wo(i){try{const e=Hr(i.url);return await Sn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function xo(i,e,n){return i.map(r=>r.id===e?{...r,name:n}:r)}function Do(i,e=5){const n=i.type.startsWith("image/"),r=e*1024*1024;if(!n&&i.size>r){const t=(i.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${t}MB)`}}return{valid:!0}}function ko(i){return{uploadAttachment:(e,n,r)=>bo(e,n,i,r),removeAttachment:wo,updateAttachmentName:xo,validateFile:Do}}function gn(i,e){const[n,r]=e.split(":").map(Number);let t=Ui(i,n);return t=Ni(t,r),t}function _n(i){return Array.from(new Set(i)).sort((e,n)=>e-n)}function Eo(i,e){if(e.includes(i))return 0;const n=e.find(r=>r>i);return n!==void 0?n-i:7-i+e[0]}function To(i,e,n){const r=new Date(i),t=vt(r,Ne),a=t.getDay(),c=Eo(a,n);if(c===0)return{start_time:i,end_time:e};const u=Ut(t,c),p=It(u,Ne);let _=e;if(e){const s=vt(new Date(e),Ne),o=Ut(s,c);_=It(o,Ne).toISOString()}return{start_time:p.toISOString(),end_time:_}}function Vn({eventItem:i,dateInput:e,startTimeInput:n,endTimeInput:r,attachments:t,isRecurring:a,recurrenceFrequency:c,recurrenceInterval:u,recurringDays:p,recurrenceEndDate:_,hasEndDate:s,monthlyType:o}){const l=i.category?{category:i.category}:void 0,v={title:i.title,description:i.description,location:i.location,is_public:i.is_public??!0,event_type:i.event_type,meta_data:l,attachments:t.length>0?t:null};if(i.event_type!=="calendar_event")return{...v,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const g=e?or(e,"yyyy-MM-dd",new Date):new Date;let E,F;if(i.is_all_day){const Y=It(g,Ne);E=Y.toISOString(),F=Y.toISOString()}else{const Y=new Date(g.getTime()),O=new Date(g.getTime()),I=n?gn(Y,n):g,P=r?gn(O,r):g;E=It(I,Ne).toISOString(),F=It(P,Ne).toISOString()}const w={...v,start_time:E,end_time:F,is_all_day:i.is_all_day};if(a&&w.start_time){if(c==="weekly"&&p.length>0){const O=_n(p),I=To(w.start_time,w.end_time,O);w.start_time=I.start_time,w.end_time=I.end_time}if(c==="daily"||c==="yearly"||c==="weekly"&&p.length>0||c==="monthly"){const{recurrence_rule:O,recurrence_end_date:I}=Wr({frequency:c,interval:u,recurringDays:c==="weekly"?_n(p):[],recurrenceEndDate:_,hasEndDate:s,monthlyType:o,startTime:w.start_time});w.recurrence_rule=O,w.recurrence_end_date=I}else w.recurrence_rule=void 0,w.recurrence_end_date=void 0}else w.recurrence_rule=void 0,w.recurrence_end_date=void 0;return w}async function Ao({id:i,...e}){const n=Vn(e);return i?{action:"update",event:await Mt(i,n)}:{action:"create",event:await Yr(n)}}async function Io(i){await Lr(i)}function Mo({event:i,newDate:e}){const n=i.start_time?new Date(i.start_time):new Date,r=i.end_time?new Date(i.end_time):new Date,[t,a,c]=e.split("-").map(Number),u=new Date(n);u.setFullYear(t,a-1,c);const p=new Date(r);return p.setFullYear(t,a-1,c),{...i,id:void 0,title:`CLONED - ${i.title}`,start_time:u.toISOString(),end_time:p.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function Co(i,e,n){const r=await Lt(i);if(!r)throw new Error("Event not found");const t=r.recurrence_exceptions||[];t.includes(e)||t.push(e);const a=r.recurrence_overrides||{};a[e]={title:n.title,description:n.description,location:n.location,start_time:n.start_time,end_time:n.end_time,is_all_day:n.is_all_day,meta_data:n.meta_data},await Mt(i,{recurrence_exceptions:t,recurrence_overrides:a})}async function Ro(i,e,n){const r=await Lt(i);if(!r||!r.recurrence_rule||!r.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:t,generateRecurrenceRule:a}=await Ar(async()=>{const{parseRecurrenceRule:O,generateRecurrenceRule:I}=await Promise.resolve().then(()=>Rr);return{parseRecurrenceRule:O,generateRecurrenceRule:I}},void 0,import.meta.url),c=t(r.recurrence_rule,r.recurrence_end_date);if(!c)throw new Error("Failed to parse recurrence rule");const u=Me(new Date(r.start_time),"yyyy-MM-dd"),p=or(e,"yyyy-MM-dd",new Date),_=or(u,"yyyy-MM-dd",new Date);if(p<=_)return await Mt(i,n),i;const s=Ut(p,-1),o=Me(s,"yyyy-MM-dd"),{recurrence_rule:l,recurrence_end_date:v}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:o,hasEndDate:!0,monthlyType:c.monthlyType,startTime:r.start_time});await Mt(i,{recurrence_rule:l,recurrence_end_date:v});const g=c.hasEndDate?c.recurrenceEndDate:"",{recurrence_rule:E,recurrence_end_date:F}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:g,hasEndDate:c.hasEndDate,monthlyType:c.monthlyType,startTime:n.start_time||r.start_time}),w={...n,recurrence_rule:E,recurrence_end_date:F};return(await Yr(w))?.id||0}async function Fo(i,e){const n=await Lt(i);if(!n)throw new Error("Event not found");const r={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:n.start_time,end_time:n.end_time,recurrence_rule:n.recurrence_rule,recurrence_end_date:n.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Mt(i,r)}async function Oo(i,e){const n=await Lt(i);if(!n)throw new Error("Event not found");const r=n.recurrence_exceptions||[];r.includes(e)||r.push(e);const t=n.recurrence_overrides||{};t[e]&&delete t[e],await Mt(i,{recurrence_exceptions:r,recurrence_overrides:t})}async function So(i,e){const n=await Lt(i);if(!n||!n.recurrence_rule||!n.start_time)throw new Error("Event not found or is not recurring");const r=or(e,"yyyy-MM-dd",new Date),t=Ut(r,-1),a=Me(t,"yyyy-MM-dd"),{parseRecurrenceRule:c}=await Ar(async()=>{const{parseRecurrenceRule:o}=await Promise.resolve().then(()=>Rr);return{parseRecurrenceRule:o}},void 0,import.meta.url),u=c(n.recurrence_rule,n.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:p}=await Ar(async()=>{const{generateRecurrenceRule:o}=await Promise.resolve().then(()=>Rr);return{generateRecurrenceRule:o}},void 0,import.meta.url),{recurrence_rule:_,recurrence_end_date:s}=p({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:n.start_time});await Mt(i,{recurrence_rule:_,recurrence_end_date:s})}async function Po(i){await Lr(i)}function Uo(){return{saveEvent:Ao,deleteEventById:Io,cloneEventForDate:Mo,buildEventPayload:Vn,saveSingleInstance:Co,saveFutureInstances:Ro,saveAllInstances:Fo,deleteSingleInstance:Oo,deleteFutureInstances:So,deleteAllInstances:Po}}var No=ie('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Yo=ie('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Lo=ie("<!> <!>",1),Ho=ie('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),zo=ie("<span>Save</span>"),Wo=ie("<span>Create</span>"),qo=ie('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Bo=ie('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div></div> <!> <!>',1);function Al(i,e){et(e,!1);const n=()=>bn(l,"$validationErrors",r),[r,t]=wn(),a=me(),c=me(),u=me();let p=ue(e,"name",8,""),_=ue(e,"drawerId",8,""),s=ue(e,"eventItem",12,Ca);const{actions:{reload:o}}=Un(),{validationErrors:l,validate:v,getErrorMessages:g,clearErrors:E}=co(),{parseRecurrenceRule:F}=Ln(),{uploadAttachment:w,removeAttachment:Y,updateAttachmentName:O,validateFile:I}=ko(),{saveEvent:P,deleteEventById:b,cloneEventForDate:T,buildEventPayload:m,saveSingleInstance:y,saveFutureInstances:k,saveAllInstances:M,deleteSingleInstance:x,deleteFutureInstances:R,deleteAllInstances:D}=Uo();let A=me(!1),h=me(!1),f=me(!1),S=me("weekly"),C=me(1),L=me([]),Z=me(""),H=me(!0),j=me("date"),W=me([]),z=me(!1),oe=me(!1),$=me(void 0),G=me(void 0),B=me(!1),te=me(null),le=me(!1),ce=me(null),re=me(0),J=me({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),se=me({message:"",type:"info"}),fe=me(""),ne=me(""),de=me(""),ve=me({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"});const Ie=(ae,K)=>ae.length===K.length&&ae.every((De,Ae)=>De===K[Ae]),ge=()=>{const ae=`[data-bs-target="#${_()}"]`,K=document.querySelector(ae);K&&K.click()},pe=(ae,K=0,De="info")=>{yr(se,d(se).message=ae),yr(se,d(se).type=De),K&&setTimeout(()=>{yr(se,d(se).message="")},K)},we=async ae=>{const K=ae.detail;if(!K)return;const De=I(K);if(!De.valid){pe(De.error??"Invalid file selected",7e3,"danger");return}q(h,!0);try{const Ae=await w(K,d(a)??"temp",Ft=>pe(Ft));if(!Ae.success||!Ae.attachment)throw new Error(Ae.error??"Upload failed");q(W,[...d(W),Ae.attachment]),q(z,!0),pe("File uploaded!",3e3,"success")}catch(Ae){console.error("File upload failed:",Ae),pe("Failed to upload file. Please try again.",7e3,"danger")}finally{q(h,!1)}},be=ae=>{const{attachment:K,newName:De}=ae.detail;q(W,O(d(W),K.id,De)),q(z,!0),pe("Attachment name updated!",3e3,"success")},Re=async ae=>{const K=ae.detail;if(K){q(h,!0);try{if(!await Y(K))throw new Error("Failed to remove attachment");q(W,d(W).filter(Ae=>Ae.id!==K.id)),q(z,!0),pe("Attachment removed!",3e3,"success")}catch(De){console.error("Failed to remove attachment:",De),pe("Failed to remove attachment. Please try again.",7e3,"danger")}finally{q(h,!1)}}},He=async()=>{if(!d(a)){pe("ID is not defined",0,"danger");return}try{await b(d(a)),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{q(A,!1),q(J,{...s(),id:d(a)}),pe("Event Deleted",3e3,"success"),ge()},800)}catch(ae){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{q(A,!1),console.error("Delete failed:",ae),pe("Failed to delete event. Please try again.",7e3,"danger")},800)}},rt=()=>!!s().recurrence_rule,Fe=async()=>{const ae=d(a)||s().meta_data?.recurring_parent_id;if(ae&&d(oe)&&d(G)&&d($)){if(q(ce,null),q(le,!0),await new Promise(K=>{const De=setInterval(()=>{d(le)||(clearInterval(De),K())},50)}),!d(ce))return;q(A,!0);try{d(ce)==="single"?await x(ae,d($)):d(ce)==="future"?await R(ae,d($)):d(ce)==="all"&&await D(ae),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{q(A,!1),q(J,{...s(),id:d(a)}),pe("Event Deleted",3e3,"success"),ge()},800)}catch(K){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{q(A,!1),console.error("Delete failed:",K),pe("Failed to delete event. Please try again.",7e3,"danger")},800)}}else q(A,!0),Oa({title:"Delete Confirmation",message:rt()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:K=>{K?He():q(A,!1)}})},ht=ae=>{if(d(a))try{const K=T({event:s(),newDate:ae});wt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),pe("Event cloned. Review and click Create to save.",5e3,"success"),s(K),q(fe,K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),q(ne,K.start_time?Me(new Date(K.start_time),"HH:mm"):""),q(de,K.end_time?Me(new Date(K.end_time),"HH:mm"):""),q(W,[]),q(f,!1),q(L,[]),q(Z,""),q(H,!0),q(z,!0),q(re,void 0),q(J,{...K}),q(ve,{dateInput:d(fe),startTimeInput:d(ne),endTimeInput:d(de),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(K){console.error("Clone failed:",K),pe("Failed to clone event. Please try again.",7e3,"danger")}},Ye=()=>{oo({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:d(fe),callback:(ae,K)=>{ae&&K&&ht(K)}})},Ke=async()=>{if(d(a)&&!d(u)){pe("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await v({title:s().title,event_type:s().event_type,category:s().category??"",description:s().description,location:s().location,is_all_day:s().is_all_day,dateInput:d(fe),startTimeInput:d(ne),endTimeInput:d(de),isRecurring:d(f),recurrenceFrequency:d(S),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(Z):void 0,hasEndDate:d(H)})){const De=g();De.length&&pe(De.join(". ")+".  Please address accordingly.",0,"danger");return}const K=d(a)||s().meta_data?.recurring_parent_id;if(K&&d(oe)&&d(G)&&d($)){if(q(te,null),q(B,!0),await new Promise(Ae=>{const Ft=setInterval(()=>{d(B)||(clearInterval(Ft),Ae())},100)}),!d(te)||d(A))return;pe("Saving ..."),q(A,!0);const De=m({eventItem:s(),dateInput:d(fe),startTimeInput:d(ne),endTimeInput:d(de),attachments:d(W),isRecurring:d(c)&&d(f),recurrenceFrequency:d(S),recurrenceInterval:d(C),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(Z):"",hasEndDate:d(H),monthlyType:d(j)});try{let Ae;d(te)==="single"?await y(K,d($),De):d(te)==="future"?Ae=await k(K,d($),De):d(te)==="all"&&await M(K,De),await o(),await ha(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),q(A,!1),Ae&&s({...s(),id:Ae}),s(s().attachments=d(W),!0),q(J,{...s(),id:Ae||K}),q(z,!1),pe("Saved",3e3,"success"),ge()}catch(Ae){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{q(A,!1),console.error("Save failed:",Ae),pe("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(d(A))return;pe("Saving ..."),q(A,!0);try{const De=await P({id:d(a),eventItem:s(),dateInput:d(fe),startTimeInput:d(ne),endTimeInput:d(de),attachments:d(W),isRecurring:d(c)&&d(f),recurrenceFrequency:d(S),recurrenceInterval:d(C),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(Z):"",hasEndDate:d(H),monthlyType:d(j)});De.event&&s({...s(),...De.event}),s(s().attachments=d(W),!0),await o(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),setTimeout(()=>{q(A,!1),q(J,{...s(),id:d(a)}),q(z,!1),pe("Saved",3e3,"success"),ge()},800)}catch(De){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{q(A,!1),console.error("Save failed:",De),pe("Failed to save event. Please try again.",7e3,"danger")},800)}}};Le(()=>X(s()),()=>{q(a,s().id)}),Le(()=>X(s()),()=>{q(c,s().event_type==="calendar_event")}),Le(()=>(d(c),d(f),d(L),d(Z)),()=>{!d(c)&&(d(f)||d(L).length>0||d(Z))&&(q(f,!1),q(S,"weekly"),q(C,1),q(L,[]),q(Z,""),q(H,!0),q(j,"date"))}),Le(()=>(X(s()),d(re),d(J),d(z),d(fe),d(ne),d(de),d(f),d(S),d(C),d(L),d(Z),d(H),d(j)),()=>{if(s()?.id!==d(re)||s()?.start_time!==d(J).start_time||s()?.meta_data?.recurring_instance_index!==d(J).meta_data?.recurring_instance_index){q(A,!0);const ae=d(z),K=s();setTimeout(()=>{const De=K.event_type==="calendar_event";if(q(fe,De&&K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),q(ne,De&&K.start_time?Me(new Date(K.start_time),"HH:mm"):""),q(de,De&&K.end_time?Me(new Date(K.end_time),"HH:mm"):""),ae||q(W,K.attachments?[...K.attachments]:[]),K.meta_data?.recurring_instance&&K.start_time?(q(G,K.recurrence_rule),q(oe,!0),q($,Me(new Date(K.start_time),"yyyy-MM-dd"))):(q(G,void 0),q(oe,!1),q($,void 0)),K.recurrence_rule){const Ae=F(K.recurrence_rule,K.recurrence_end_date);Ae?(q(f,!0),q(S,Ae.frequency),q(C,Ae.interval),q(L,Ae.recurringDays),q(Z,Ae.recurrenceEndDate),q(H,Ae.hasEndDate),q(j,Ae.monthlyType)):(q(f,!1),q(S,"weekly"),q(C,1),q(L,[]),q(Z,""),q(H,!0),q(j,"date"))}else q(f,!1),q(S,"weekly"),q(C,1),q(L,[]),q(Z,""),q(H,!0),q(j,"date");q(re,K.id),q(J,{...K}),q(A,!1),q(z,!1),E(),q(ve,{dateInput:d(fe),startTimeInput:d(ne),endTimeInput:d(de),isRecurring:d(f),recurrenceFrequency:d(S),recurrenceInterval:d(C),recurringDays:[...d(L)],recurrenceEndDate:d(Z),hasEndDate:d(H),monthlyType:d(j)})},200)}}),Le(()=>(d(J),X(s()),d(W),d(fe),d(ve),d(ne),d(de),d(f),d(S),d(C),d(L),d(Z),d(H),d(j)),()=>{q(u,d(J).title!==s().title||d(J).start_time!==s().start_time||d(J).end_time!==s().end_time||d(J).description!==s().description||d(J).location!==s().location||d(J).is_public!==s().is_public||d(J).category!==s().category||d(J).is_all_day!==s().is_all_day||JSON.stringify(d(W))!==JSON.stringify(s().attachments||[])||d(J).recurrence_rule!==s().recurrence_rule||d(J).recurrence_end_date!==s().recurrence_end_date||d(fe)!==d(ve).dateInput||d(ne)!==d(ve).startTimeInput||d(de)!==d(ve).endTimeInput||d(f)!==d(ve).isRecurring||d(S)!==d(ve).recurrenceFrequency||d(C)!==d(ve).recurrenceInterval||!Ie(d(L),d(ve).recurringDays)||d(Z)!==d(ve).recurrenceEndDate||d(H)!==d(ve).hasEndDate||d(j)!==d(ve).monthlyType)}),Nt(),it();var We=Bo(),Ve=Be(We),Xe=N(Ve);{var pt=ae=>{var K=No();ee(ae,K)};he(Xe,ae=>{X(s()),d(a),V(()=>s().recurrence_rule&&d(a))&&ae(pt)})}var Ct=Q(Xe,2),$t=N(Ct),Qt=Q(N($t),2);{var Kt=ae=>{var K=Yo();ye(()=>K.disabled=d(A)||d(h)),xe("click",K,Ye),ee(ae,K)};he(Qt,ae=>{d(a)&&ae(Kt)})}U($t);var Rt=Q($t,2);{let ae=zt(()=>d(A)||d(h));Cs(Rt,{get disabled(){return d(ae)},get name(){return p()},get validationErrors(){return n()},get title(){return s().title},set title(K){s(s().title=K,!0)},get eventType(){return s().event_type},set eventType(K){s(s().event_type=K,!0)},get category(){return s().category},set category(K){s(s().category=K,!0)},get isPublic(){return s().is_public},set isPublic(K){s(s().is_public=K,!0)},get description(){return s().description},set description(K){s(s().description=K,!0)},$$legacy:!0})}U(Ct);var Vt=Q(Ct,2);{var st=ae=>{var K=Lo(),De=Be(K);{let Ft=zt(()=>d(A)||d(h));Us(De,{get disabled(){return d(Ft)},get name(){return p()},get validationErrors(){return n()},get dateInput(){return d(fe)},set dateInput(Se){q(fe,Se)},get startTimeInput(){return d(ne)},set startTimeInput(Se){q(ne,Se)},get endTimeInput(){return d(de)},set endTimeInput(Se){q(de,Se)},get isAllDay(){return s().is_all_day},set isAllDay(Se){s(s().is_all_day=Se,!0)},$$legacy:!0})}var Ae=Q(De,2);{let Ft=zt(()=>d(A)||d(h));Bs(Ae,{get disabled(){return d(Ft)},get name(){return p()},get validationErrors(){return n()},get isRecurring(){return d(f)},set isRecurring(Se){q(f,Se)},get recurrenceFrequency(){return d(S)},set recurrenceFrequency(Se){q(S,Se)},get recurrenceInterval(){return d(C)},set recurrenceInterval(Se){q(C,Se)},get recurringDays(){return d(L)},set recurringDays(Se){q(L,Se)},get recurrenceEndDate(){return d(Z)},set recurrenceEndDate(Se){q(Z,Se)},get monthlyType(){return d(j)},set monthlyType(Se){q(j,Se)},get dateInput(){return d(fe)},set dateInput(Se){q(fe,Se)},$$legacy:!0})}ee(ae,K)};he(Vt,ae=>{d(c)&&ae(st)})}var nt=Q(Vt,2);{let ae=zt(()=>d(A)||d(h));eo(nt,{get attachments(){return d(W)},get uploadingFile(){return d(h)},get disabled(){return d(ae)},$$events:{upload:we,edit:be,remove:Re}})}var yt=Q(nt,2);{let ae=zt(()=>d(A)||d(h)),K=zt(()=>`${p()}-location`);Qs(yt,{get disabled(){return d(ae)},get name(){return d(K)},get value(){return s().location},set value(De){s(s().location=De,!0)},$$legacy:!0})}var gt=Q(yt,2),Ht=N(gt),_t=N(Ht);{var bt=ae=>{var K=Ho();ye(()=>K.disabled=d(A)||d(h)),xe("click",K,Fe),ee(ae,K)};he(_t,ae=>{(d(a)||d(oe))&&ae(bt)})}U(Ht);var $r=Q(Ht,2),hr=N($r),Xt=Q(hr,2),Qr=N(Xt);{var Xn=ae=>{var K=zo();ee(ae,K)},Jn=ae=>{var K=Wo();ee(ae,K)};he(Qr,ae=>{d(a)||d(oe)?ae(Xn):ae(Jn,!1)})}var ea=Q(Qr,2);{var ta=ae=>{var K=qo();ee(ae,K)};he(ea,ae=>{d(u)&&ae(ta)})}U(Xt),U($r),U(gt);var jr=Q(gt,2),Jt=N(jr),ra=N(Jt,!0);U(Jt);var pr=Q(Jt,2);let Gr;var na=N(pr);Tn(na,{size:"xs"}),U(pr),U(jr),U(Ve);var Zr=Q(Ve,2);{var aa=ae=>{ro(ae,{get eventTitle(){return X(s()),V(()=>s().title)},get occurrenceDate(){return d($)},callback:K=>{q(te,K),q(B,!1)}})};he(Zr,ae=>{d(B)&&d($)&&ae(aa)})}var ia=Q(Zr,2);{var sa=ae=>{ao(ae,{get eventTitle(){return X(s()),V(()=>s().title)},get occurrenceDate(){return d($)},callback:K=>{q(ce,K),q(le,!1)}})};he(ia,ae=>{d(le)&&d($)&&ae(sa)})}ye(()=>{hr.disabled=d(A)||d(h),Xt.disabled=d(A)||d(h),Ze(Jt,1,`fw-lighter fst-italic text-${d(se),V(()=>d(se).type)??""}`),_e(ra,(d(se),V(()=>d(se).message))),Gr=Ze(pr,1,"",null,Gr,{"d-none":!d(A)})}),xe("click",hr,ge),xe("click",Xt,Ke),ee(i,We),tt(),t()}var $o=ie('<span class="text-muted">•</span>'),Qo=ie("<span> </span> <!>",1),jo=ie('<span class="text-muted">•</span>'),Go=ie('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Zo=ie('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Ko=ie('<div class="small svelte-1bpzga2"><!></div>'),Vo=ie('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),Xo=ie('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Jo=ie('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),el=ie('<div class="details-container svelte-1bpzga2"><!> <!></div>'),tl=ie('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),rl=ie('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Il(i,e){et(e,!1);const n=me(),r=me();let t=ue(e,"item",8),a=ue(e,"showDetails",12,!1),c=ue(e,"searchQuery",8,"");const u=x=>x<1024?x+" B":x<1024*1024?(x/1024).toFixed(1)+" KB":(x/(1024*1024)).toFixed(1)+" MB",p=x=>x.startsWith("image/"),_=x=>{window.open(x,"_blank")},s=()=>{d(r)&&a(!a())},o=x=>{d(r)&&(x.key==="Enter"||x.key===" ")&&s()};Le(()=>X(t()),()=>{q(n,t().attachments&&t().attachments.length>0?t().attachments.find(x=>p(x.type)):void 0)}),Le(()=>X(t()),()=>{q(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Nt(),it();var l=rl(),v=N(l),g=N(v),E=N(g),F=N(E);Bt(F,()=>(X(Tt),X(t()),X(c()),V(()=>Tt(t().title||"",c())))),U(E);var w=Q(E,2),Y=N(w);{var O=x=>{var R=Qo(),D=Be(R),A=N(D,!0);U(D);var h=Q(D,2);{var f=S=>{var C=$o();ee(S,C)};he(h,S=>{X(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&S(f)})}ye((S,C)=>{Ze(D,1,`badge rounded-pill bg-color-${S??""}`,"svelte-1bpzga2"),_e(A,C)},[()=>(X(Et),X(t()),V(()=>Et(t()?.meta_data?.category)?.color_number)),()=>(X(Et),X(t()),V(()=>Et(t()?.meta_data?.category)?.label))]),ee(x,R)};he(Y,x=>{X(t()),V(()=>t()?.meta_data?.category)&&x(O)})}var I=Q(Y,2);{var P=x=>{var R=Go(),D=Be(R),A=N(D);Bt(A,()=>(X(Tt),X(t()),X(c()),V(()=>Tt(t().location,c())))),U(D);var h=Q(D,2);{var f=S=>{var C=jo();ee(S,C)};he(h,S=>{X(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&S(f)})}ee(x,R)};he(I,x=>{X(t()),V(()=>t().location)&&x(P)})}var b=Q(I,2);{var T=x=>{var R=Zo(),D=N(R);{var A=f=>{var S=ar("Hide");ee(f,S)},h=f=>{var S=ar("Show");ee(f,S)};he(D,f=>{a()?f(A):f(h,!1)})}Je(),U(R),ee(x,R)};he(b,x=>{X(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&x(T)})}U(w);var m=Q(w,2);{var y=x=>{var R=el(),D=N(R);{var A=S=>{var C=Ko(),L=N(C);Bt(L,()=>(X(cr),X(t()),X(c()),V(()=>cr(t().description,c())))),U(C),ee(S,C)};he(D,S=>{X(t()),V(()=>t().description)&&S(A)})}var h=Q(D,2);{var f=S=>{var C=Jo(),L=Q(N(C),2);Zt(L,5,()=>(X(t()),V(()=>t().attachments)),Z=>Z.id,(Z,H)=>{var j=Er(),W=Be(j);{var z=$=>{var G=Vo(),B=N(G),te=N(B);U(B);var le=Q(B,2),ce=N(le),re=N(ce,!0);U(ce),U(le),U(G),ye(()=>{ke(B,"title",`Open ${d(H),V(()=>d(H).name)??""}`),ke(te,"src",(d(H),V(()=>d(H).url))),ke(te,"alt",(d(H),V(()=>d(H).name))),_e(re,(d(H),V(()=>d(H).name)))}),xe("click",B,ir(()=>_(d(H).url))),ee($,G)},oe=$=>{var G=Xo(),B=Q(N(G),2),te=N(B,!0);U(B);var le=Q(B,2),ce=N(le);U(le),U(G),ye(re=>{ke(G,"title",`Open ${d(H),V(()=>d(H).name)??""}`),_e(te,(d(H),V(()=>d(H).name))),_e(ce,`(${re??""})`)},[()=>(d(H),V(()=>u(d(H).size)))]),xe("click",G,ir(()=>_(d(H).url))),ee($,G)};he(W,$=>{d(H),V(()=>p(d(H).type))?$(z):$(oe,!1)})}ee(Z,j)}),U(L),U(C),ee(S,C)};he(h,S=>{X(t()),V(()=>t().attachments&&t().attachments.length>0)&&S(f)})}U(R),ee(x,R)};he(m,x=>{a()&&x(y)})}U(g);var k=Q(g,2);{var M=x=>{var R=tl(),D=N(R);U(R),ye(()=>{ke(D,"src",(d(n),V(()=>d(n).url))),ke(D,"alt",(d(n),V(()=>d(n).name)))}),ee(x,R)};he(k,x=>{d(n)&&x(M)})}U(v),U(l),ye(()=>Dn(l,d(r)?"cursor: pointer;":"")),xe("keydown",l,o),xe("click",l,s),ee(i,l),tt()}export{Al as A,El as E,Tl as a,Il as b,jt as c,rs as d,St as e,Ut as f,Un as g,kl as h,or as p};
