import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{t as ge,j as jr,k as Gr,K as na,bb as aa,L as Zr,Y as ia,ac as sa,b1 as oa,a_ as la,N as ca,G as Xt,p as Je,aj as Le,D as z,E as he,w as ee,ak as Pt,c as Y,s as j,r as N,u as V,g as f,a as et,f as ze,F as nt,i as rr,al as ua,R as Ht,ao as pr,z as da}from"./JKZwkikK.js";import{p as me,i as fe,s as _e,e as we,b as er,a as yn,c as Kr}from"./BxjzTaz1.js";import{b as Vr,d as fa,f as re,a as J,c as Dr,t as nr}from"./JDsN5plM.js";import{e as qt,i as Mr}from"./B2BlSr7K.js";import{d as gn,s as ke,b as ar,r as je}from"./DZqzNUuk.js";import{t as Ze,x as Be,y as Cr,E as va,F as ma,G as ha,H as pa,k as xt,D as _n,I as ya,C as ga,l as bn,z as _a,J as Xr,K as ba,L as Jr,M as wa,b as mt,p as Dt,f as Me,N as en,Q as Ne,c as Qe,h as xa,R as Da}from"./BS70QMoQ.js";import{s as ir}from"./CdEA5IGF.js";import{i as at}from"./b8c_lO2i.js";import{R as Te}from"./B8QNc_nP.js";import{S as wn}from"./BaS-8-wX.js";import{b as ft,a as xn,c as yr}from"./BL6gm64P.js";import{b as Wt}from"./C_E5hxn_.js";import{b as Et}from"./Bk8fdyPk.js";import{w as Ot,g as tn,d as Rt,c as ka,o as Ea}from"./DjNGvcU6.js";import{t as wt}from"./r7-tBYgy.js";import{s as Ta,i as Aa}from"./D1-MhuvK.js";import{c as Ia}from"./D9kB0W6C.js";import{c as Ma,a as ot,e as rn,f as Ca,h as Ra,V as Fa}from"./BvzMQ0uj.js";import{_ as kr}from"./CmsKOCeN.js";function Dn(i,e,n=!1,r=!1,t=!1){var a=i,c="";ge(()=>{var u=na;if(c===(c=e()??"")){jr&&Gr();return}if(u.nodes!==null&&(aa(u.nodes.start,u.nodes.end),u.nodes=null),c!==""){if(jr){Zr.data;for(var y=Gr(),b=y;y!==null&&(y.nodeType!==ia||y.data!=="");)b=y,y=sa(y);if(y===null)throw oa(),la;Vr(Zr,b),a=ca(y);return}var s=c+"";n?s=`<svg>${s}</svg>`:r&&(s=`<math>${s}</math>`);var o=fa(s);if((n||r)&&(o=Xt(o)),Vr(Xt(o),o.lastChild),n||r)for(;Xt(o);)a.before(Xt(o));else a.before(o)}})}function Ut(i,e){const n=Ze(i);return isNaN(e)?Be(i,NaN):(e&&n.setDate(n.getDate()+e),n)}function Qt(i,e){const n=e*7;return Ut(i,n)}function Ft(i,e){const n=Cr(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,t=Ze(i),a=t.getDay(),c=(a<r?-7:0)+6-(a-r);return t.setDate(t.getDate()+c),t.setHours(23,59,59,999),t}function Oa(){return Object.assign({},Cr())}function Sa(i){let n=Ze(i).getDay();return n===0&&(n=7),n}function Ua(i,e){const n=e instanceof Date?Be(e,0):new e(0);return n.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),n.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),n}const Pa=10;class kn{subPriority=0;validate(e,n){return!0}}class Na extends kn{constructor(e,n,r,t,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=t,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Ya extends kn{priority=Pa;subPriority=-1;set(e,n){return n.timestampIsSet?e:Be(e,Ua(e,Date))}}class Ee{run(e,n,r,t){const a=this.parse(e,n,r,t);return a?{setter:new Na(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class La extends Ee{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Se={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ut={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ue(i,e){return i&&{value:e(i.value),rest:i.rest}}function Re(i,e){const n=e.match(i);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function dt(i,e){const n=e.match(i);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,t=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,c=n[5]?parseInt(n[5],10):0;return{value:r*(t*va+a*ma+c*ha),rest:e.slice(n[0].length)}}function En(i){return Re(Se.anyDigitsSigned,i)}function Fe(i,e){switch(i){case 1:return Re(Se.singleDigit,e);case 2:return Re(Se.twoDigits,e);case 3:return Re(Se.threeDigits,e);case 4:return Re(Se.fourDigits,e);default:return Re(new RegExp("^\\d{1,"+i+"}"),e)}}function sr(i,e){switch(i){case 1:return Re(Se.singleDigitSigned,e);case 2:return Re(Se.twoDigitsSigned,e);case 3:return Re(Se.threeDigitsSigned,e);case 4:return Re(Se.fourDigitsSigned,e);default:return Re(new RegExp("^-?\\d{1,"+i+"}"),e)}}function Rr(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Tn(i,e){const n=e>0,r=n?e:1-e;let t;if(r<=50)t=i||100;else{const a=r+50,c=Math.trunc(a/100)*100,u=i>=a%100;t=i+c-(u?100:0)}return n?t:1-t}function An(i){return i%400===0||i%4===0&&i%100!==0}class Ha extends Ee{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ue(Fe(4,e),t);case"yo":return Ue(r.ordinalNumber(e,{unit:"year"}),t);default:return Ue(Fe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const t=e.getFullYear();if(r.isTwoDigitYear){const c=Tn(r.year,t);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class za extends Ee{priority=130;parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ue(Fe(4,e),t);case"Yo":return Ue(r.ordinalNumber(e,{unit:"year"}),t);default:return Ue(Fe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,t){const a=pa(e,t);if(r.isTwoDigitYear){const u=Tn(r.year,a);return e.setFullYear(u,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}const c=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(c,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Wa extends Ee{priority=130;parse(e,n){return sr(n==="R"?4:n.length,e)}set(e,n,r){const t=Be(e,0);return t.setFullYear(r,0,4),t.setHours(0,0,0,0),_n(t)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class qa extends Ee{priority=130;parse(e,n){return sr(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Ba extends Ee{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Fe(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class $a extends Ee{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Fe(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Qa extends Ee{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"M":return Ue(Re(Se.month,e),t);case"MM":return Ue(Fe(2,e),t);case"Mo":return Ue(r.ordinalNumber(e,{unit:"month"}),t);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ja extends Ee{priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"L":return Ue(Re(Se.month,e),t);case"LL":return Ue(Fe(2,e),t);case"Lo":return Ue(r.ordinalNumber(e,{unit:"month"}),t);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Ga(i,e,n){const r=Ze(i),t=ya(r,n)-e;return r.setDate(r.getDate()-t*7),r}class Za extends Ee{priority=100;parse(e,n,r){switch(n){case"w":return Re(Se.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,t){return xt(Ga(e,r,t),t)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Ka(i,e){const n=Ze(i),r=ga(n)-e;return n.setDate(n.getDate()-r*7),n}class Va extends Ee{priority=100;parse(e,n,r){switch(n){case"I":return Re(Se.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return _n(Ka(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const Xa=[31,28,31,30,31,30,31,31,30,31,30,31],Ja=[31,29,31,30,31,30,31,31,30,31,30,31];class ei extends Ee{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Re(Se.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Fe(n.length,e)}}validate(e,n){const r=e.getFullYear(),t=An(r),a=e.getMonth();return t?n>=1&&n<=Ja[a]:n>=1&&n<=Xa[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class ti extends Ee{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Re(Se.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Fe(n.length,e)}}validate(e,n){const r=e.getFullYear();return An(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Fr(i,e,n){const r=Cr(),t=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ze(i),c=a.getDay(),y=(e%7+7)%7,b=7-t,s=e<0||e>6?e-(c+b)%7:(y+b)%7-(c+b)%7;return Ut(a,s)}class ri extends Ee{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Fr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ni extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return Ue(Fe(n.length,e),a);case"eo":return Ue(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Fr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class ai extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return Ue(Fe(n.length,e),a);case"co":return Ue(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Fr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function ii(i,e){const n=Ze(i),r=Sa(n),t=e-r;return Ut(n,t)}class si extends Ee{priority=90;parse(e,n,r){const t=a=>a===0?7:a;switch(n){case"i":case"ii":return Fe(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ue(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiii":return Ue(r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiiii":return Ue(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiii":default:return Ue(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=ii(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class oi extends Ee{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Rr(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class li extends Ee{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Rr(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class ci extends Ee{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Rr(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class ui extends Ee{priority=70;parse(e,n,r){switch(n){case"h":return Re(Se.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const t=e.getHours()>=12;return t&&r<12?e.setHours(r+12,0,0,0):!t&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class di extends Ee{priority=70;parse(e,n,r){switch(n){case"H":return Re(Se.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class fi extends Ee{priority=70;parse(e,n,r){switch(n){case"K":return Re(Se.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class vi extends Ee{priority=70;parse(e,n,r){switch(n){case"k":return Re(Se.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const t=r<=24?r%24:r;return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class mi extends Ee{priority=60;parse(e,n,r){switch(n){case"m":return Re(Se.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class hi extends Ee{priority=50;parse(e,n,r){switch(n){case"s":return Re(Se.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class pi extends Ee{priority=30;parse(e,n){const r=t=>Math.trunc(t*Math.pow(10,-n.length+3));return Ue(Fe(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class yi extends Ee{priority=10;parse(e,n){switch(n){case"X":return dt(ut.basicOptionalMinutes,e);case"XX":return dt(ut.basic,e);case"XXXX":return dt(ut.basicOptionalSeconds,e);case"XXXXX":return dt(ut.extendedOptionalSeconds,e);case"XXX":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Be(e,e.getTime()-bn(e)-r)}incompatibleTokens=["t","T","x"]}class gi extends Ee{priority=10;parse(e,n){switch(n){case"x":return dt(ut.basicOptionalMinutes,e);case"xx":return dt(ut.basic,e);case"xxxx":return dt(ut.basicOptionalSeconds,e);case"xxxxx":return dt(ut.extendedOptionalSeconds,e);case"xxx":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Be(e,e.getTime()-bn(e)-r)}incompatibleTokens=["t","T","X"]}class _i extends Ee{priority=40;parse(e){return En(e)}set(e,n,r){return[Be(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class bi extends Ee{priority=20;parse(e){return En(e)}set(e,n,r){return[Be(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const wi={G:new La,y:new Ha,Y:new za,R:new Wa,u:new qa,Q:new Ba,q:new $a,M:new Qa,L:new ja,w:new Za,I:new Va,d:new ei,D:new ti,E:new ri,e:new ni,c:new ai,i:new si,a:new oi,b:new li,B:new ci,h:new ui,H:new di,K:new fi,k:new vi,m:new mi,s:new hi,S:new pi,X:new yi,x:new gi,t:new _i,T:new bi},xi=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Di=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ki=/^'([^]*?)'?$/,Ei=/''/g,Ti=/\S/,Ai=/[a-zA-Z]/;function or(i,e,n,r){const t=Oa(),a=r?.locale??t.locale??_a,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0;if(e==="")return i===""?Ze(n):Be(n,NaN);const y={firstWeekContainsDate:c,weekStartsOn:u,locale:a},b=[new Ya],s=e.match(Di).map(E=>{const C=E[0];if(C in Xr){const x=Xr[C];return x(E,a.formatLong)}return E}).join("").match(xi),o=[];for(let E of s){!r?.useAdditionalWeekYearTokens&&ba(E)&&Jr(E,e,i),!r?.useAdditionalDayOfYearTokens&&wa(E)&&Jr(E,e,i);const C=E[0],x=wi[C];if(x){const{incompatibleTokens:S}=x;if(Array.isArray(S)){const M=o.find(P=>S.includes(P.token)||P.token===C);if(M)throw new RangeError(`The format string mustn't contain \`${M.fullToken}\` and \`${E}\` at the same time`)}else if(x.incompatibleTokens==="*"&&o.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);o.push({token:C,fullToken:E});const F=x.run(i,E,a.match,y);if(!F)return Be(n,NaN);b.push(F.setter),i=F.rest}else{if(C.match(Ai))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if(E==="''"?E="'":C==="'"&&(E=Ii(E)),i.indexOf(E)===0)i=i.slice(E.length);else return Be(n,NaN)}}if(i.length>0&&Ti.test(i))return Be(n,NaN);const l=b.map(E=>E.priority).sort((E,C)=>C-E).filter((E,C,x)=>x.indexOf(E)===C).map(E=>b.filter(C=>C.priority===E).sort((C,x)=>x.subPriority-C.subPriority)).map(E=>E[0]);let v=Ze(n);if(isNaN(v.getTime()))return Be(n,NaN);const g={};for(const E of l){if(!E.validate(v,y))return Be(n,NaN);const C=E.set(v,g,y);Array.isArray(C)?(v=C[0],Object.assign(g,C[1])):v=C}return Be(n,v)}function Ii(i){return i.match(ki)[1].replace(Ei,"'")}function Jt(i,e){const n=+Ze(i),[r,t]=[+Ze(e.start),+Ze(e.end)].sort((a,c)=>a-c);return n>=r&&n<=t}function Mi(i,e){const n=Ze(i);return n.setHours(e),n}function Ci(i,e){const n=Ze(i);return n.setMinutes(e),n}function Ri(i,e){const n=Pi(e);return"formatToParts"in n?Oi(n,i):Si(n,i)}const Fi={year:0,month:1,day:2,hour:3,minute:4,second:5};function Oi(i,e){try{const n=i.formatToParts(e),r=[];for(let t=0;t<n.length;t++){const a=Fi[n[t].type];a!==void 0&&(r[a]=parseInt(n[t].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Si(i,e){const n=i.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const gr={},nn=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Ui=nn==="06/25/2014, 00:00:00"||nn==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Pi(i){return gr[i]||(gr[i]=Ui?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),gr[i]}function Or(i,e,n,r,t,a,c){const u=new Date(0);return u.setUTCFullYear(i,e,n),u.setUTCHours(r,t,a,c),u}const an=36e5,Ni=6e4,_r={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Sr(i,e,n){if(!i)return 0;let r=_r.timezoneZ.exec(i);if(r)return 0;let t,a;if(r=_r.timezoneHH.exec(i),r)return t=parseInt(r[1],10),sn(t)?-(t*an):NaN;if(r=_r.timezoneHHMM.exec(i),r){t=parseInt(r[2],10);const c=parseInt(r[3],10);return sn(t,c)?(a=Math.abs(t)*an+c*Ni,r[1]==="+"?-a:a):NaN}if(Hi(i)){e=new Date(e||Date.now());const c=n?e:Yi(e),u=Er(c,i);return-(n?u:Li(e,u,i))}return NaN}function Yi(i){return Or(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}function Er(i,e){const n=Ri(i,e),r=Or(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let t=i.getTime();const a=t%1e3;return t-=a>=0?a:1e3+a,r-t}function Li(i,e,n){let t=i.getTime()-e;const a=Er(new Date(t),n);if(e===a)return e;t-=a-e;const c=Er(new Date(t),n);return a===c?a:Math.max(a,c)}function sn(i,e){return-23<=i&&i<=23&&(e==null||0<=e&&e<=59)}const on={};function Hi(i){if(on[i])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:i}),on[i]=!0,!0}catch{return!1}}function ln(i){const e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),+i-+e}const In=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,br=36e5,cn=6e4,zi=2,$e={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:In};function Tr(i,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(i===null)return new Date(NaN);const n=e.additionalDigits==null?zi:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]")return new Date(i.getTime());if(typeof i=="number"||Object.prototype.toString.call(i)==="[object Number]")return new Date(i);if(Object.prototype.toString.call(i)!=="[object String]")return new Date(NaN);const r=Wi(i),{year:t,restDateString:a}=qi(r.date,n),c=Bi(a,t);if(c===null||isNaN(c.getTime()))return new Date(NaN);if(c){const u=c.getTime();let y=0,b;if(r.time&&(y=$i(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||e.timeZone){if(b=Sr(r.timeZone||e.timeZone,new Date(u+y)),isNaN(b))return new Date(NaN)}else b=ln(new Date(u+y)),b=ln(new Date(u+y+b));return new Date(u+y+b)}else return new Date(NaN)}function Wi(i){const e={};let n=$e.dateTimePattern.exec(i),r;if(n?(e.date=n[1],r=n[3]):(n=$e.datePattern.exec(i),n?(e.date=n[1],r=n[2]):(e.date=null,r=i)),r){const t=$e.timeZone.exec(r);t?(e.time=r.replace(t[1],""),e.timeZone=t[1].trim()):e.time=r}return e}function qi(i,e){if(i){const n=$e.YYY[e],r=$e.YYYYY[e];let t=$e.YYYY.exec(i)||r.exec(i);if(t){const a=t[1];return{year:parseInt(a,10),restDateString:i.slice(a.length)}}if(t=$e.YY.exec(i)||n.exec(i),t){const a=t[1];return{year:parseInt(a,10)*100,restDateString:i.slice(a.length)}}}return{year:null}}function Bi(i,e){if(e===null)return null;let n,r,t;if(!i||!i.length)return n=new Date(0),n.setUTCFullYear(e),n;let a=$e.MM.exec(i);if(a)return n=new Date(0),r=parseInt(a[1],10)-1,dn(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(a=$e.DDD.exec(i),a){n=new Date(0);const c=parseInt(a[1],10);return Gi(e,c)?(n.setUTCFullYear(e,0,c),n):new Date(NaN)}if(a=$e.MMDD.exec(i),a){n=new Date(0),r=parseInt(a[1],10)-1;const c=parseInt(a[2],10);return dn(e,r,c)?(n.setUTCFullYear(e,r,c),n):new Date(NaN)}if(a=$e.Www.exec(i),a)return t=parseInt(a[1],10)-1,fn(t)?un(e,t):new Date(NaN);if(a=$e.WwwD.exec(i),a){t=parseInt(a[1],10)-1;const c=parseInt(a[2],10)-1;return fn(t,c)?un(e,t,c):new Date(NaN)}return null}function $i(i){let e,n,r=$e.HH.exec(i);if(r)return e=parseFloat(r[1].replace(",",".")),wr(e)?e%24*br:NaN;if(r=$e.HHMM.exec(i),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),wr(e,n)?e%24*br+n*cn:NaN;if(r=$e.HHMMSS.exec(i),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const t=parseFloat(r[3].replace(",","."));return wr(e,n,t)?e%24*br+n*cn+t*1e3:NaN}return null}function un(i,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(i,0,4);const t=r.getUTCDay()||7,a=e*7+n+1-t;return r.setUTCDate(r.getUTCDate()+a),r}const Qi=[31,28,31,30,31,30,31,31,30,31,30,31],ji=[31,29,31,30,31,30,31,31,30,31,30,31];function Mn(i){return i%400===0||i%4===0&&i%100!==0}function dn(i,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=Mn(i);if(r&&n>ji[e]||!r&&n>Qi[e])return!1}return!0}function Gi(i,e){if(e<1)return!1;const n=Mn(i);return!(n&&e>366||!n&&e>365)}function fn(i,e){return!(i<0||i>52||e!=null&&(e<0||e>6))}function wr(i,e,n){return!(i<0||i>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function vt(i,e,n){i=Tr(i,n);const r=Sr(e,i,!0),t=new Date(i.getTime()-r),a=new Date(0);return a.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),a.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),a}function Tt(i,e,n){if(typeof i=="string"&&!i.match(In))return Tr(i,{...n,timeZone:e});i=Tr(i,n);const r=Or(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),t=Sr(e,new Date(r));return new Date(r+t)}const Ar=Ot([]);let lt=null;async function Nt(){return lt||(lt=(async()=>{const{data:i,error:e}=await mt.from("calendar_events").select("*").order("start_time",{ascending:!0});if(e)throw lt=null,e;const n=i||[];return Ar.set(n),setTimeout(()=>{lt=null},100),n})(),lt)}async function Yt(i){let e=tn(Ar);return e.length||(await Nt(),e=tn(Ar)),e.find(n=>n.id===i)}async function Ur(i){const{data:e,error:n}=await mt.from("calendar_events").insert([i]).select();if(n)throw n;return lt=null,await Nt(),e?e[0]:void 0}async function At(i,e){const{data:n,error:r}=await mt.from("calendar_events").update(e).eq("id",i).select();if(r)throw r;return lt=null,await Nt(),n?n[0]:void 0}async function Pr(i){const e=await Yt(i),{error:n}=await mt.from("calendar_events").delete().eq("id",i);if(n)throw n;e?.attachments&&e.attachments.length>0&&await Yr(e.attachments),lt=null,await Nt()}async function Zi(i=new Date){const e=i.toISOString(),{data:n,error:r}=await mt.from("calendar_events").select("*").lt("start_time",e).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const t=[],a=[];for(const u of n){if(u.recurrence_rule&&(!u.recurrence_end_date||u.recurrence_end_date&&new Date(u.recurrence_end_date)>=i)){a.push(u);continue}t.push(u)}let c=0;if(t.length>0){const u=t.map(y=>y.id).filter(y=>y!==void 0);if(u.length>0){const{data:y,error:b}=await mt.from("calendar_events").delete().in("id",u).select("id");if(b)throw b;c=y?.length??0;for(const s of t)s.attachments&&s.attachments.length>0&&await Yr(s.attachments)}}return lt=null,await Nt(),{deleted:c,skipped:a.length}}async function Cn(i,e){const n=i.name.split(".").pop()||"bin",r=e||"temp",a=`${crypto.randomUUID()}.${n}`,c=`${r}/${a}`,{error:u}=await mt.storage.from("event-attachments").upload(c,i,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:{publicUrl:y}}=mt.storage.from("event-attachments").getPublicUrl(c);return{id:crypto.randomUUID(),name:i.name,url:y,type:i.type,size:i.size,uploadedAt:new Date().toISOString()}}async function Rn(i){const{error:e}=await mt.storage.from("event-attachments").remove([i]);if(e)throw e}function Nr(i){const e=i.match(/event-attachments\/(.+)$/);return e?e[1]:""}async function Yr(i){if(!i||i.length===0)return;const e=i.map(n=>Nr(n.url)).filter(n=>n);if(e.length>0){const{error:n}=await mt.storage.from("event-attachments").remove(e);if(n)throw n}}const _l=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Ur,deleteCalendarEvent:Pr,deleteEventAttachment:Rn,deleteEventAttachments:Yr,deletePastCalendarEvents:Zi,extractStoragePath:Nr,getAllCalendarEvents:Nt,getCalendarEvent:Yt,updateCalendarEvent:At,uploadEventAttachment:Cn},Symbol.toStringTag,{value:"Module"})),Ki={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21}},lr=Object.values(Ki).sort((i,e)=>i.sort_index-e.sort_index),kt=i=>i?lr.find(e=>e.key===i):void 0;let jt=null;const Vi=()=>{const i=Ot(!1),e=Ot([]),n=Ot([]),r=Ot(""),t=Ot(!1),a=Rt([n],([S])=>{const F=new Date,M=Ft(Qt(F,3),{weekStartsOn:1}),P=S.filter(_=>_?.meta_data?.category?.length).filter(_=>{if(_.event_type==="calendar_event"){const O=_.start_time?Dt(_.start_time):null;return O?Jt(O,{start:F,end:M}):!1}return!0}).map(_=>lr.find(O=>O.key===_.meta_data?.category)).filter(_=>_!==void 0);return Array.from(new Set(P))}),c=Rt([r],([S])=>lr.find(F=>F.key===S)),u=Rt([n,r],([S,F])=>S.filter(M=>M.event_type==="calendar_event").filter(M=>{const P=M?.meta_data;return F&&P?P?.category===F:!0}).filter(M=>{const P=M.start_time?Dt(M.start_time):null,_=Ta();return P?Aa(P,_)||P.getTime()>=_.getTime():!1})),y=Rt([n,r],([S,F])=>S.filter(M=>M.event_type==="announcement").filter(M=>{const P=M?.meta_data;return F&&P?P?.category===F:!0})),b=Rt([u],([S])=>S.filter(F=>{const M=F.start_time?Dt(F.start_time):null;return M?Jt(M,{start:xt(new Date,{weekStartsOn:1}),end:Ft(new Date,{weekStartsOn:1})}):!1})),s=()=>{const S=xt(new Date,{weekStartsOn:1}),F=Ft(new Date,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(F,"MMM d").toUpperCase()}`},o=Rt([u],([S])=>{const F=Qt(xt(new Date,{weekStartsOn:1}),1),M=Ft(F,{weekStartsOn:1});return S.filter(P=>{const _=P.start_time?Dt(P.start_time):null;return _?Jt(_,{start:F,end:M}):!1})}),l=()=>{const S=Qt(xt(new Date,{weekStartsOn:1}),1),F=Ft(S,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(F,"MMM d").toUpperCase()}`},v=Rt([u],([S])=>{const F=Qt(xt(new Date,{weekStartsOn:1}),2),M=Ft(F,{weekStartsOn:1});return S.filter(P=>{const _=P.start_time?Dt(P.start_time):null;return _?Jt(_,{start:F,end:M}):!1})}),g=()=>{const S=Qt(xt(new Date,{weekStartsOn:1}),2),F=Ft(S,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(F,"MMM d").toUpperCase()}`},E=S=>{const F=[],M=new Date,P=new Date;P.setFullYear(M.getFullYear()+1);for(const _ of S)if(_.recurrence_rule&&_.start_time&&_.end_time)try{const O=Te.fromString(_.recurrence_rule),h=_.recurrence_end_date?O.all():O.between(M,P,!0),p=new Date(_.start_time),w=new Date(_.end_time).getTime()-p.getTime(),D=vt(p,Ne),I=D.getHours(),T=D.getMinutes(),A=D.getSeconds(),m=D.getMilliseconds(),d=_.recurrence_exceptions||[],U=_.recurrence_overrides||{};h.forEach((R,L)=>{const $=vt(R,Ne),G=new Date($);G.setHours(I,T,A,m);const Z=Tt(G,Ne),q=Z,H=new Date(Z.getTime()+w),W=Me(R,"yyyy-MM-dd"),Q=U[W];if(d.includes(W)&&!Q)return;const B={..._,id:void 0,start_time:q.toISOString(),end_time:H.toISOString(),meta_data:{category:_.meta_data?.category||"",..._.meta_data,recurring_instance:!0,recurring_parent_id:_.id,recurring_instance_index:L}};Q&&(Q.title!==void 0&&(B.title=Q.title),Q.description!==void 0&&(B.description=Q.description),Q.location!==void 0&&(B.location=Q.location),Q.start_time!==void 0&&(B.start_time=Q.start_time),Q.end_time!==void 0&&(B.end_time=Q.end_time),Q.is_all_day!==void 0&&(B.is_all_day=Q.is_all_day),Q.meta_data!==void 0&&(B.meta_data={...B.meta_data,...Q.meta_data})),F.push(B)})}catch(O){console.error("Failed to expand recurring event:",_.id,O),F.push(_)}else F.push(_);return F},C=S=>S.length?E(S).map(M=>({...M,start_time:M?.start_time?en(M.start_time):void 0,end_time:M.end_time?en(M.end_time):void 0})):[];return jt={stores:{ready:i,data:e,dbData:n,announcements:y,calendarEvents:u,calendarEventsThisWeek:b,calendarEventsNextWeek:o,calendarEventsNextNextWeek:v,currentCategories:a,categoryFilter:r,currentCategoryFilter:c,weeksExpanded:t},actions:{reload:async()=>{i.set(!1);const S=await Nt();n.set(C(S)),i.set(!0)},calendarEventsThisWeekLabel:s,calendarEventsNextWeekLabel:l,calendarEventsNextNextWeekLabel:g}},jt},Fn=()=>jt?.stores&&Object.keys(jt.stores).length>0?jt:Vi();var Xi=re('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),Ji=re('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),es=re('<span class="d-block small svelte-1rksp2z"> </span>'),ts=re('<span class="text-muted">•</span>'),rs=re("<span> </span> <!>",1),ns=re('<span class="text-muted">•</span>'),as=re('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),is=re('<span class="text-muted">•</span>'),ss=re('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),os=re('<span class="text-muted">•</span>'),ls=re('<em class="small fw-lighter svelte-1rksp2z"> </em> <!>',1),cs=re('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),us=re('<div class="small svelte-1rksp2z"><!></div>'),ds=re('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),fs=re('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),vs=re('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),ms=re('<div class="details-container svelte-1rksp2z"><!> <!></div>'),hs=re('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),ps=re('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="d-flex align-items-center gap-2"><div class="fw-bold svelte-1rksp2z"> </div></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function bl(i,e){Je(e,!1);const n=he(),r=he();let t=me(e,"item",8),a=me(e,"showDetails",12,!1),c=me(e,"showDate",8,!0);const u=W=>{if(!W)return"";const Q=Dt(W),B=vt(Q,Ne);return Me(B,"h:mm aa")},y=W=>{if(!W)return"";const Q=Dt(W),B=vt(Q,Ne);return Me(B,"EEE")},b=W=>{if(!W)return"";const Q=Dt(W),B=vt(Q,Ne);return Me(B,"MMM, dd")},s=()=>{f(r)&&a(!a())},o=W=>{f(r)&&(W.key==="Enter"||W.key===" ")&&s()},l=W=>W<1024?W+" B":W<1024*1024?(W/1024).toFixed(1)+" KB":(W/(1024*1024)).toFixed(1)+" MB",v=W=>W.startsWith("image/"),g=W=>{window.open(W,"_blank")},E=W=>{try{const B=Te.fromString(W).origOptions,X=B.interval||1,ie=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=["","1st","2nd","3rd","4th","5th"];if(B.freq===Te.DAILY)return X===1?"Repeats daily":`Repeats every ${X} days`;if(B.freq===Te.WEEKLY){if(B.byweekday){const se=(Array.isArray(B.byweekday)?B.byweekday:[B.byweekday]).map(ae=>{const le=typeof ae=="number"?ae:ae.weekday,oe=le===6?0:le+1;return ie[oe]});return X===1?se.length===1?`Repeats every ${se[0]}`:`Repeats on ${se.join(", ")}`:`Repeats every ${X} weeks on ${se.join(", ")}`}return X===1?"Repeats weekly":`Repeats every ${X} weeks`}if(B.freq===Te.MONTHLY){if(B.byweekday){const se=(Array.isArray(B.byweekday)?B.byweekday:[B.byweekday])[0];if(se&&typeof se=="object"&&"n"in se&&"weekday"in se){const ae=se.weekday,le=ae===6?0:ae+1,oe=se.n,ue=ce[oe]||`${oe}th`;return X===1?`Repeats on the ${ue} ${ie[le]} of the month`:`Repeats on the ${ue} ${ie[le]} every ${X} months`}}if(B.bymonthday){const te=Array.isArray(B.bymonthday)?B.bymonthday[0]:B.bymonthday,se=te===1?"st":te===2?"nd":te===3?"rd":"th";return X===1?`Repeats on the ${te}${se} of the month`:`Repeats on the ${te}${se} every ${X} months`}return X===1?"Repeats monthly":`Repeats every ${X} months`}if(B.freq===Te.YEARLY){if(B.bymonth&&B.bymonthday){const te=["","January","February","March","April","May","June","July","August","September","October","November","December"],se=Array.isArray(B.bymonth)?B.bymonth[0]:B.bymonth,ae=Array.isArray(B.bymonthday)?B.bymonthday[0]:B.bymonthday,le=ae===1?"st":ae===2?"nd":ae===3?"rd":"th";return X===1?`Repeats every ${te[se]} ${ae}${le}`:`Repeats every ${X} years on ${te[se]} ${ae}${le}`}return X===1?"Repeats yearly":`Repeats every ${X} years`}return"Repeats"}catch{return"Repeats"}};let C=he("");Le(()=>ee(c()),()=>{z(C,c()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Le(()=>ee(t()),()=>{z(n,t().attachments?.find(W=>v(W.type)))}),Le(()=>ee(t()),()=>{z(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Pt(),at();var x=ps(),S=Y(x);{var F=W=>{var Q=Xi(),B=Y(Q),X=Y(B,!0);N(B);var ie=j(B,2),ce=Y(ie),te=Y(ce,!0);N(ce),N(ie),N(Q),ge((se,ae)=>{_e(X,se),_e(te,ae)},[()=>(ee(t()),V(()=>y(t().start_time))),()=>(ee(t()),V(()=>b(t().start_time)))]),J(W,Q)};fe(S,W=>{c()&&W(F)})}var M=j(S,2),P=Y(M),_=Y(P),O=Y(_),h=Y(O,!0);N(O),N(_);var p=j(_,2);{var k=W=>{var Q=Ji();J(W,Q)},w=W=>{var Q=es(),B=Y(Q);N(Q),ge((X,ie)=>_e(B,`${X??""} to ${ie??""}`),[()=>(ee(t()),V(()=>u(t().start_time))),()=>(ee(t()),V(()=>u(t().end_time)))]),J(W,Q)};fe(p,W=>{ee(t()),V(()=>t().is_all_day)?W(k):W(w,!1)})}var D=j(p,2),I=Y(D);{var T=W=>{var Q=rs(),B=ze(Q),X=Y(B,!0);N(B);var ie=j(B,2);{var ce=te=>{var se=ts();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge((te,se)=>{Qe(B,1,`badge rounded-pill bg-color-${te??""}`,"svelte-1rksp2z"),_e(X,se)},[()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.color_number)),()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.label))]),J(W,Q)};fe(I,W=>{ee(t()),V(()=>t()?.meta_data?.category)&&W(T)})}var A=j(I,2);{var m=W=>{var Q=as(),B=ze(Q),X=j(Y(B));N(B);var ie=j(B,2);{var ce=te=>{var se=ns();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge(te=>_e(X,` ${te??""}`),[()=>(ee(t()),V(()=>E(t().recurrence_rule)))]),J(W,Q)},d=W=>{var Q=Dr(),B=ze(Q);{var X=ie=>{var ce=ss(),te=j(ze(ce),2);{var se=ae=>{var le=is();J(ae,le)};fe(te,ae=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&ae(se)})}J(ie,ce)};fe(B,ie=>{ee(t()),V(()=>t()?.meta_data?.recurring_instance)&&ie(X)},!0)}J(W,Q)};fe(A,W=>{ee(t()),V(()=>t().recurrence_rule)?W(m):W(d,!1)})}var U=j(A,2);{var R=W=>{var Q=ls(),B=ze(Q),X=Y(B,!0);N(B);var ie=j(B,2);{var ce=te=>{var se=os();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge(()=>_e(X,(ee(t()),V(()=>t().location)))),J(W,Q)};fe(U,W=>{ee(t()),V(()=>t().location)&&W(R)})}var L=j(U,2);{var $=W=>{var Q=cs(),B=Y(Q);{var X=ce=>{var te=nr("Hide");J(ce,te)},ie=ce=>{var te=nr("Show");J(ce,te)};fe(B,ce=>{a()?ce(X):ce(ie,!1)})}nt(),N(Q),J(W,Q)};fe(L,W=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&W($)})}N(D);var G=j(D,2);{var Z=W=>{var Q=ms(),B=Y(Q);{var X=te=>{var se=us(),ae=Y(se);Dn(ae,()=>(ee(t()),V(()=>t().description))),N(se),J(te,se)};fe(B,te=>{ee(t()),V(()=>t().description)&&te(X)})}var ie=j(B,2);{var ce=te=>{var se=vs(),ae=j(Y(se),2);qt(ae,5,()=>(ee(t()),V(()=>t().attachments)),le=>le.id,(le,oe)=>{var ue=Dr(),pe=ze(ue);{var ve=ye=>{var de=ds(),be=Y(de),xe=Y(be);N(be);var Ce=j(be,2),We=Y(Ce),it=Y(We,!0);N(We),N(Ce),N(de),ge(()=>{ke(be,"title",`Open ${f(oe),V(()=>f(oe).name)??""}`),ke(xe,"src",(f(oe),V(()=>f(oe).url))),ke(xe,"alt",(f(oe),V(()=>f(oe).name))),_e(it,(f(oe),V(()=>f(oe).name)))}),we("click",be,ir(()=>g(f(oe).url))),J(ye,de)},Ie=ye=>{var de=fs(),be=j(Y(de),2),xe=Y(be,!0);N(be);var Ce=j(be,2),We=Y(Ce);N(Ce),N(de),ge(it=>{ke(de,"title",`Open ${f(oe),V(()=>f(oe).name)??""}`),_e(xe,(f(oe),V(()=>f(oe).name))),_e(We,`(${it??""})`)},[()=>(f(oe),V(()=>l(f(oe).size)))]),we("click",de,ir(()=>g(f(oe).url))),J(ye,de)};fe(pe,ye=>{f(oe),V(()=>v(f(oe).type))?ye(ve):ye(Ie,!1)})}J(le,ue)}),N(ae),N(se),J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().attachments&&t().attachments.length>0)&&te(ce)})}N(Q),J(W,Q)};fe(G,W=>{a()&&W(Z)})}N(P);var q=j(P,2);{var H=W=>{var Q=hs(),B=Y(Q);N(Q),ge(()=>{ke(B,"src",(f(n),V(()=>f(n).url))),ke(B,"alt",(f(n),V(()=>f(n).name)))}),J(W,Q)};fe(q,W=>{f(n)&&W(H)})}N(M),N(x),ge(()=>{Qe(x,1,xa(f(C)),"svelte-1rksp2z"),gn(x,f(r)?"cursor: pointer;":""),_e(h,(ee(t()),V(()=>t().title)))}),we("keydown",x,o),we("click",x,s),J(i,x),et()}var ys=re("<option> </option>"),gs=re('<select class="form-select form-select-sm" aria-label="Small select example"><option>All</option><!></select>'),_s=re('<div class="small d-block text-muted">Filter:</div> <div><!></div>',1),bs=re('<div class="announcement-and-event-filters d-inline"><div><!> <button class="btn btn-sm btn-outline-secondary"><i></i></button></div></div>');function wl(i,e){Je(e,!1);const n=()=>er(b,"$weeksExpanded",a),r=()=>er(u,"$currentCategories",a),t=()=>er(y,"$categoryFilter",a),[a,c]=yn(),{stores:{currentCategories:u,categoryFilter:y,weeksExpanded:b}}=Fn();let s=!0;function o(){Kr(b,!n())}at();var l=bs(),v=Y(l);Qe(v,1,"d-flex gap-2",null,{},{"align-items-center":s,"justify-content-end":s,"justify-content-between":!s});var g=Y(v);{var E=S=>{var F=_s(),M=j(ze(F),2),P=Y(M);{var _=O=>{var h=gs();ge(()=>{t(),rr(()=>{r()})});var p=Y(h);p.value=p.__value="";var k=j(p);qt(k,1,r,Mr,(w,D)=>{var I=ys(),T=Y(I,!0);N(I);var A={};ge(()=>{_e(T,f(D).label),A!==(A=f(D).key)&&(I.value=(I.__value=f(D).key)??"")}),J(w,I)}),N(h),ar(h,t,w=>Kr(y,w)),J(O,h)};fe(P,O=>{O(_)})}N(M),J(S,F)};fe(g,S=>{r().length&&S(E)})}var C=j(g,2),x=Y(C);N(C),N(v),N(l),ge(()=>{ke(C,"title",n()?"Collapse all weeks":"Expand all weeks"),Qe(x,1,`bi ${n()?"bi-chevron-up":"bi-chevron-down"}`)}),we("click",C,o),J(i,l),et(),c()}var ws=re('<div class="invalid-feedback d-block"> </div>'),xs=re("<option> </option>"),Ds=re('<div class="invalid-feedback d-block"> </div>'),ks=re('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function Es(i,e){Je(e,!1);const n=he(),r=he();let t=me(e,"title",12,""),a=me(e,"eventType",12,"calendar_event"),c=me(e,"category",12,""),u=me(e,"description",12,""),y=me(e,"disabled",8,!1),b=me(e,"name",8,"event"),s=me(e,"validationErrors",24,()=>({})),o=he(),l=he();function v(){f(o)?.focus()}function g(){f(l)?.focus()}Le(()=>ee(s()),()=>{z(n,!!s().title)}),Le(()=>ee(s()),()=>{z(r,!!s().description)}),Pt();var E={focusTitle:v,focusDescription:g};at();var C=ks(),x=Y(C),S=j(Y(x),2);je(S);let F;Et(S,d=>z(o,d),()=>f(o));var M=j(S,2);{var P=d=>{var U=ws(),R=Y(U,!0);N(U),ge(()=>_e(R,(ee(s()),V(()=>s().title)))),J(d,U)};fe(M,d=>{ee(s()),V(()=>s().title)&&d(P)})}nt(2),N(x);var _=j(x,2),O=j(Y(_),2);ge(()=>{a(),rr(()=>{y()})});var h=Y(O);h.value=h.__value="calendar_event";var p=j(h);p.value=p.__value="announcement",N(O),N(_);var k=j(_,2),w=j(Y(k),2);ge(()=>{c(),rr(()=>{y()})}),qt(w,5,()=>lr,Mr,(d,U)=>{var R=xs(),L=Y(R,!0);N(R);var $={};ge(()=>{_e(L,(f(U),V(()=>f(U).label))),$!==($=(f(U),V(()=>f(U).key)))&&(R.value=(R.__value=(f(U),V(()=>f(U).key)))??"")}),J(d,R)}),N(w),N(k);var D=j(k,2),I=j(Y(D),2);ua(I);let T;Et(I,d=>z(l,d),()=>f(l));var A=j(I,2);{var m=d=>{var U=Ds(),R=Y(U,!0);N(U),ge(()=>_e(R,(ee(s()),V(()=>s().description)))),J(d,U)};fe(A,d=>{ee(s()),V(()=>s().description)&&d(m)})}return nt(2),N(D),N(C),ge(()=>{ke(S,"name",`${b()??""}-title`),F=Qe(S,1,"form-control",null,F,{"is-invalid":f(n)}),S.disabled=y(),O.disabled=y(),w.disabled=y(),ke(I,"name",`${b()??""}-description`),T=Qe(I,1,"form-control",null,T,{"is-invalid":f(r)}),I.disabled=y()}),we("focus",S,()=>f(o).select()),ft(S,t),ar(O,a),ar(w,c),we("focus",I,()=>f(l).select()),ft(I,u),J(i,C),Wt(e,"focusTitle",v),Wt(e,"focusDescription",g),et(E)}var Ts=re('<div class="invalid-feedback d-block"> </div>'),As=re('<div class="invalid-feedback d-block"> </div>'),Is=re('<div class="invalid-feedback d-block"> </div>'),Ms=re('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Cs=re('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Rs(i,e){Je(e,!1);const n=he(),r=he(),t=he();let a=me(e,"dateInput",12,""),c=me(e,"startTimeInput",12,""),u=me(e,"endTimeInput",12,""),y=me(e,"isAllDay",12,!1),b=me(e,"disabled",8,!1),s=me(e,"name",8,"event"),o=me(e,"validationErrors",24,()=>({})),l=he(),v=he(),g=he();function E(){f(l)?.focus()}function C(){f(v)?.focus()}function x(){f(g)?.focus()}Le(()=>ee(o()),()=>{z(n,!!o().dateInput)}),Le(()=>ee(o()),()=>{z(r,!!o().startTimeInput)}),Le(()=>ee(o()),()=>{z(t,!!o().endTimeInput)}),Pt();var S={focusDate:E,focusStartTime:C,focusEndTime:x};at();var F=Cs(),M=Y(F),P=j(Y(M),2);je(P);let _;Et(P,A=>z(l,A),()=>f(l));var O=j(P,2);{var h=A=>{var m=Ts(),d=Y(m,!0);N(m),ge(()=>_e(d,(ee(o()),V(()=>o().dateInput)))),J(A,m)};fe(O,A=>{ee(o()),V(()=>o().dateInput)&&A(h)})}N(M);var p=j(M,2),k=Y(p),w=Y(k);je(w);var D=j(w,2);N(k),N(p);var I=j(p,2);{var T=A=>{var m=Ms(),d=Y(m),U=j(Y(d),2);je(U),ke(U,"step",900);let R;Et(U,Q=>z(v,Q),()=>f(v));var L=j(U,2);{var $=Q=>{var B=As(),X=Y(B,!0);N(B),ge(()=>_e(X,(ee(o()),V(()=>o().startTimeInput)))),J(Q,B)};fe(L,Q=>{ee(o()),V(()=>o().startTimeInput)&&Q($)})}N(d);var G=j(d,2),Z=j(Y(G),2);je(Z),ke(Z,"step",900);let q;Et(Z,Q=>z(g,Q),()=>f(g));var H=j(Z,2);{var W=Q=>{var B=Is(),X=Y(B,!0);N(B),ge(()=>_e(X,(ee(o()),V(()=>o().endTimeInput)))),J(Q,B)};fe(H,Q=>{ee(o()),V(()=>o().endTimeInput)&&Q(W)})}N(G),N(m),ge(()=>{ke(U,"name",`${s()??""}-start-time`),R=Qe(U,1,"form-control",null,R,{"is-invalid":f(r)}),U.disabled=b(),ke(Z,"name",`${s()??""}-end-time`),q=Qe(Z,1,"form-control",null,q,{"is-invalid":f(t)}),Z.disabled=b()}),we("focus",U,()=>f(v).select()),ft(U,c),we("focus",Z,()=>f(g).select()),ft(Z,u),J(A,m)};fe(I,A=>{y()||A(T)})}return N(F),ge(()=>{ke(P,"name",`${s()??""}-date`),_=Qe(P,1,"form-control",null,_,{"is-invalid":f(n)}),P.disabled=b(),ke(w,"id",`${s()??""}-all-day-check`),w.disabled=b(),ke(D,"for",`${s()??""}-all-day-check`)}),we("focus",P,()=>f(l).select()),ft(P,a),xn(w,y),J(i,F),Wt(e,"focusDate",E),Wt(e,"focusStartTime",C),Wt(e,"focusEndTime",x),et(S)}var Fs=re('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Os=re('<div class="invalid-feedback d-block"> </div>'),Ss=re('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Us=re('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),Ps=re('<div class="invalid-feedback d-block"> </div>'),Ns=re('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),Ys=re('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function Ls(i,e){Je(e,!1);const n=[],r=[];let t=me(e,"isRecurring",12,!1),a=me(e,"recurrenceFrequency",12,"weekly"),c=me(e,"recurrenceInterval",12,1),u=me(e,"recurringDays",28,()=>[]),y=me(e,"recurrenceEndDate",12,""),b=me(e,"monthlyType",12,"date"),s=me(e,"dateInput",8,""),o=me(e,"disabled",8,!1),l=me(e,"name",8,"event"),v=me(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function E(O){if(!O)return"Same weekday of the month";try{const h=new Date(O),p=Me(h,"EEEE"),k=Math.ceil(h.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][k]} ${p} of the month`}catch{return"Same weekday of the month"}}function C(O){if(!O)return 1;try{return O.split("-").map(Number)[2]}catch{return 1}}at();var x=Ys(),S=Y(x),F=Y(S);je(F);var M=j(F,2);N(S);var P=j(S,2);{var _=O=>{var h=Ns(),p=Y(h),k=j(Y(p),2),w=j(Y(k),2),D=Y(w);je(D),N(w);var I=j(w,2),T=Y(I);ge(()=>{a(),rr(()=>{o(),c()})});var A=Y(T),m=Y(A,!0);N(A),A.value=A.__value="daily";var d=j(A),U=Y(d,!0);N(d),d.value=d.__value="weekly";var R=j(d),L=Y(R,!0);N(R),R.value=R.__value="monthly";var $=j(R),G=Y($,!0);N($),$.value=$.__value="yearly",N(T),N(I),N(k),N(p);var Z=j(p,2);{var q=se=>{var ae=Ss(),le=j(Y(ae),2);qt(le,5,()=>g,Mr,(pe,ve)=>{var Ie=Fs(),ye=Y(Ie);je(ye);var de,be=j(ye,2),xe=Y(be,!0);N(be),N(Ie),ge(()=>{ke(ye,"id",`${l()??""}-day-${f(ve),V(()=>f(ve).value)??""}`),ye.disabled=o(),de!==(de=(f(ve),V(()=>f(ve).value)))&&(ye.value=(ye.__value=(f(ve),V(()=>f(ve).value)))??""),ke(be,"for",`${l()??""}-day-${f(ve),V(()=>f(ve).value)??""}`),_e(xe,(f(ve),V(()=>f(ve).label)))}),yr(n,[],ye,()=>(f(ve),V(()=>f(ve).value),u()),u),J(pe,Ie)}),N(le);var oe=j(le,2);{var ue=pe=>{var ve=Os(),Ie=Y(ve,!0);N(ve),ge(()=>_e(Ie,(ee(v()),V(()=>v().recurringDays)))),J(pe,ve)};fe(oe,pe=>{ee(v()),V(()=>v().recurringDays)&&pe(ue)})}nt(2),N(ae),J(se,ae)};fe(Z,se=>{a()==="weekly"&&se(q)})}var H=j(Z,2);{var W=se=>{var ae=Us(),le=j(Y(ae),2),oe=Y(le),ue=Y(oe);je(ue),ue.value=ue.__value="date";var pe=j(ue,2),ve=Y(pe);N(pe),N(oe);var Ie=j(oe,2),ye=Y(Ie);je(ye),ye.value=ye.__value="weekday";var de=j(ye,2),be=Y(de);N(de),N(Ie),N(le),N(ae),ge((xe,Ce)=>{ke(ue,"id",`${l()??""}-monthly-date`),ue.disabled=o(),ke(pe,"for",`${l()??""}-monthly-date`),_e(ve,`On day ${xe??""} of the month`),ke(ye,"id",`${l()??""}-monthly-weekday`),ye.disabled=o(),ke(de,"for",`${l()??""}-monthly-weekday`),_e(be,`On the ${Ce??""}`)},[()=>(ee(s()),V(()=>C(s()))),()=>(ee(s()),V(()=>E(s())))]),yr(r,[],ue,b,b),yr(r,[],ye,b,b),J(se,ae)};fe(H,se=>{a()==="monthly"&&se(W)})}var Q=j(H,2),B=Y(Q),X=j(B,2);je(X);let ie;var ce=j(X,2);{var te=se=>{var ae=Ps(),le=Y(ae,!0);N(ae),ge(()=>_e(le,(ee(v()),V(()=>v().recurrenceEndDate)))),J(se,ae)};fe(ce,se=>{ee(v()),V(()=>v().recurrenceEndDate)&&se(te)})}nt(2),N(Q),N(h),ge(()=>{D.disabled=o(),T.disabled=o(),_e(m,c()===1?"day":"days"),_e(U,c()===1?"week":"weeks"),_e(L,c()===1?"month":"months"),_e(G,c()===1?"year":"years"),ke(B,"for",`${l()??""}-recurrence-end-date`),ie=Qe(X,1,"form-control",null,ie,{"is-invalid":!!v().recurrenceEndDate}),ke(X,"id",`${l()??""}-recurrence-end-date`),X.disabled=o()}),ft(D,c),ar(T,a),ft(X,y),J(O,h)};fe(P,O=>{t()&&O(_)})}N(x),ge(()=>{ke(F,"id",`${l()??""}-is-recurring`),F.disabled=o(),ke(M,"for",`${l()??""}-is-recurring`)}),xn(F,t),J(i,x),et()}var Hs=re('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function zs(i,e){Je(e,!1);let n=me(e,"value",12,""),r=me(e,"disabled",8,!1),t=me(e,"name",8,"location"),a=he();function c(){f(a)?.focus()}var u={focus:c},y=Hs(),b=j(Y(y),2);return je(b),Et(b,s=>z(a,s),()=>f(a)),nt(2),N(y),ge(()=>{ke(b,"name",t()),b.disabled=r()}),we("focus",b,()=>f(a).select()),ft(b,n),J(i,y),Wt(e,"focus",c),et(u)}var Ws=re('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),qs=re('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Bs=re('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),$s=re('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Qs=re('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),js=re('<div class="d-flex flex-column gap-2 mb-2"></div>'),Gs=re('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function Zs(i,e){Je(e,!1);let n=me(e,"attachments",24,()=>[]),r=me(e,"disabled",8,!1),t=me(e,"uploadingFile",8,!1);const a=ka();let c=he(),u=he(null),y=he("");const b=O=>{if(O===0)return"0 Bytes";const h=1024,p=["Bytes","KB","MB"],k=Math.floor(Math.log(O)/Math.log(h));return Math.round(O/Math.pow(h,k)*100)/100+" "+p[k]},s=O=>{const h=O.target;h.files&&h.files[0]&&(a("upload",h.files[0]),h.value="")},o=O=>{z(u,O.id),z(y,O.name)},l=O=>{f(y).trim()&&f(y)!==O.name&&a("edit",{attachment:O,newName:f(y).trim()}),z(u,null),z(y,"")},v=()=>{z(u,null),z(y,"")},g=O=>{a("remove",O)};at();var E=Gs(),C=j(Y(E),2);{var x=O=>{var h=js();qt(h,5,n,p=>p.id,(p,k)=>{var w=Qs(),D=Y(w),I=Y(D);{var T=R=>{var L=Ws(),$=ze(L);je($);var G=j($,2),Z=Y(G,!0);N(G),ge(q=>{$.disabled=r(),_e(Z,q)},[()=>(f(k),V(()=>b(f(k).size)))]),ft($,()=>f(y),q=>z(y,q)),we("keydown",$,q=>{q.key==="Enter"&&l(f(k)),q.key==="Escape"&&v()}),J(R,L)},A=R=>{var L=qs(),$=ze(L),G=Y($,!0);N($);var Z=j($,2),q=Y(Z,!0);N(Z),ge(H=>{_e(G,(f(k),V(()=>f(k).name))),_e(q,H)},[()=>(f(k),V(()=>b(f(k).size)))]),J(R,L)};fe(I,R=>{f(u),f(k),V(()=>f(u)===f(k).id)?R(T):R(A,!1)})}N(D);var m=j(D,2);{var d=R=>{var L=Bs(),$=ze(L),G=j($,2);ge(()=>{$.disabled=r(),G.disabled=r()}),we("click",$,()=>l(f(k))),we("click",G,v),J(R,L)},U=R=>{var L=$s(),$=ze(L),G=j($,2);ge(()=>{$.disabled=r(),G.disabled=r()}),we("click",$,()=>o(f(k))),we("click",G,()=>g(f(k))),J(R,L)};fe(m,R=>{f(u),f(k),V(()=>f(u)===f(k).id)?R(d):R(U,!1)})}N(w),J(p,w)}),N(h),J(O,h)};fe(C,O=>{ee(n()),V(()=>n().length>0)&&O(x)})}var S=j(C,2),F=Y(S),M=Y(F);Et(M,O=>z(c,O),()=>f(c));var P=j(M,2);{var _=O=>{wn(O,{size:"sm"})};fe(P,O=>{t()&&O(_)})}N(F),nt(2),N(S),N(E),ge(()=>M.disabled=r()||t()),we("change",M,s),J(i,E),et()}var Ks=re('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Vs(i,e){Je(e,!1);const n=he();let r=me(e,"eventTitle",8),t=me(e,"occurrenceDate",8),a=me(e,"callback",8);function c(w){a()(w)}function u(){a()(null)}Le(()=>(ee(t()),Me),()=>{z(n,(()=>{try{const[w,D,I]=t().split("-").map(Number),T=new Date(w,D-1,I);return Me(T,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Pt(),at();var y=Ks(),b=Y(y),s=Y(b),o=Y(s),l=j(Y(o),2);N(o);var v=j(o,2),g=Y(v),E=Y(g),C=Y(E);N(E),nt(),N(g);var x=j(g,4),S=Y(x),F=j(Y(S),2),M=Y(F,!0);N(F),N(S);var P=j(S,2),_=j(Y(P),2),O=Y(_);N(_),N(P);var h=j(P,2);N(x),N(v);var p=j(v,2),k=Y(p);N(p),N(s),N(b),N(y),ge(()=>{_e(C,`"${r()??""}"`),_e(M,f(n)),_e(O,`From ${f(n)??""} onwards`)}),we("click",l,u),we("click",S,()=>c("single")),we("click",P,()=>c("future")),we("click",h,()=>c("all")),we("click",k,u),J(i,y),et()}var Xs=re('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Js(i,e){Je(e,!1);const n=he();let r=me(e,"eventTitle",8),t=me(e,"occurrenceDate",8),a=me(e,"callback",8);function c(w){a()(w)}function u(){a()(null)}Le(()=>(ee(t()),Me),()=>{z(n,(()=>{try{const[w,D,I]=t().split("-").map(Number),T=new Date(w,D-1,I);return Me(T,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Pt(),at();var y=Xs(),b=Y(y),s=Y(b),o=Y(s),l=j(Y(o),2);N(o);var v=j(o,2),g=Y(v),E=Y(g),C=Y(E);N(E),nt(),N(g);var x=j(g,4),S=Y(x),F=j(Y(S),2),M=Y(F,!0);N(F),N(S);var P=j(S,2),_=j(Y(P),2),O=Y(_);N(_),N(P);var h=j(P,2);N(x),N(v);var p=j(v,2),k=Y(p);N(p),N(s),N(b),N(y),ge(()=>{_e(C,`"${r()??""}"`),_e(M,f(n)),_e(O,`From ${f(n)??""} onwards`)}),we("click",l,u),we("click",S,()=>c("single")),we("click",P,()=>c("future")),we("click",h,()=>c("all")),we("click",k,u),J(i,y),et()}var eo=re('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function to(i,e){Je(e,!1);let n=me(e,"title",8,"Clone Event"),r=me(e,"message",8,"Select a date for the cloned event:"),t=me(e,"confirmButtonLabel",8,"Clone"),a=me(e,"confirmButtonCSS",8,"btn-primary"),c=me(e,"rejectButtonLabel",8,"Cancel"),u=me(e,"rejectButtonCSS",8,"btn-secondary"),y=me(e,"defaultDate",8,void 0),b=me(e,"callback",8,()=>{}),s=he(),o=he(y()||Me(new Date,"yyyy-MM-dd")),l=!1,v;Ea(()=>{const m=window.bootstrap.Modal;new m(f(s)).show(),f(s).addEventListener("hidden.bs.modal",()=>{l?b()(!0,v):b()(!1)})});function g(){l=!0,v=f(o),window.bootstrap.Modal.getInstance(f(s)).hide()}function E(){l=!1,window.bootstrap.Modal.getInstance(f(s)).hide()}at();var C=eo(),x=Y(C),S=Y(x),F=Y(S),M=Y(F),P=Y(M,!0);N(M),nt(2),N(F);var _=j(F,2),O=Y(_),h=Y(O,!0);N(O);var p=j(O,2),k=j(Y(p),2);je(k),N(p),N(_);var w=j(_,2),D=Y(w),I=Y(D,!0);N(D);var T=j(D,2),A=Y(T,!0);N(T),N(w),N(S),N(x),N(C),Et(C,m=>z(s,m),()=>f(s)),ge(()=>{_e(P,n()),_e(h,r()),Qe(D,1,`btn ${u()??""}`),_e(I,c()),Qe(T,1,`btn ${a()??""}`),_e(A,t())}),ft(k,()=>f(o),m=>z(o,m)),we("click",D,E),we("click",T,g),J(i,C),et()}let vn;function ro(i){const e=document.createElement("div");document.body.appendChild(e);const n={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};i.title&&(n.title=i.title),i.message&&(n.message=i.message),i.confirmButtonLabel&&(n.confirmButtonLabel=i.confirmButtonLabel),i.confirmButtonCSS&&(n.confirmButtonCSS=i.confirmButtonCSS),i.rejectButtonLabel&&(n.rejectButtonLabel=i.rejectButtonLabel),i.rejectButtonCSS&&(n.rejectButtonCSS=i.rejectButtonCSS),i.defaultDate&&(n.defaultDate=i.defaultDate),n.callback=(r,t)=>{console.log("Clone confirm result:",r,t),vn.$destroy(),document.body.removeChild(e),i.callback&&typeof i.callback=="function"&&i.callback(r,t)},vn=new to({target:e,props:n})}const no=Ma().shape({title:ot().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ot().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ot().required("Category is required"),description:ot().nullable().max(1e4,"Description is too long"),location:ot().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ot().when("event_type",{is:"calendar_event",then:i=>i.required("Date is required"),otherwise:i=>i.nullable()}),startTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("Start time is required"),otherwise:i=>i.nullable()}),endTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("End time is required"),otherwise:i=>i.nullable()}),isRecurring:rn(),recurrenceFrequency:ot().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Ca().of(Ra().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(i,e)=>i&&e==="weekly",then:i=>i.min(1,"Select at least one day for weekly recurring events").required(),otherwise:i=>i.nullable()}),hasEndDate:rn(),recurrenceEndDate:ot().when(["isRecurring","hasEndDate"],{is:(i,e)=>i&&e,then:i=>i.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const n=new Date(e),r=new Date;return r.setHours(0,0,0,0),n>=r}),otherwise:i=>i.nullable()})});function ao(){const i=Ot({});async function e(t){try{return await no.validate(t,{abortEarly:!1}),i.set({}),!0}catch(a){if(a instanceof Fa){const c={};return a.inner.forEach(u=>{u.path&&(c[u.path]=u.message)}),i.set(c),!1}return!1}}function n(){i.set({})}function r(){return Object.values(i).filter(a=>a.length>0)}return{validationErrors:i,validate:e,clearErrors:n,getErrorMessages:r}}function Lr(i){const{frequency:e,interval:n,recurringDays:r,recurrenceEndDate:t,hasEndDate:a,monthlyType:c,startTime:u}=i,y={0:Te.SU,1:Te.MO,2:Te.TU,3:Te.WE,4:Te.TH,5:Te.FR,6:Te.SA},b={daily:Te.DAILY,weekly:Te.WEEKLY,monthly:Te.MONTHLY,yearly:Te.YEARLY},s=new Date(u),o=vt(s,Ne),l=new Date(o);l.setHours(12,0,0,0);const v=Tt(l,Ne),g={freq:b[e],interval:n,dtstart:v};if(a&&t){const C=new Date(`${t}T23:59:59.999`),x=Tt(C,Ne);g.until=x}if(e==="weekly"&&r.length>0)g.byweekday=r.map(C=>y[C]);else if(e==="monthly")if(c==="date")g.bymonthday=[l.getDate()];else{const C=Math.ceil(l.getDate()/7),x=l.getDay(),S=[Te.SU,Te.MO,Te.TU,Te.WE,Te.TH,Te.FR,Te.SA];g.byweekday=[S[x].nth(C)]}else e==="yearly"&&(g.bymonth=[l.getMonth()+1],g.bymonthday=[l.getDate()]);return{recurrence_rule:new Te(g).toString(),recurrence_end_date:a&&t?g.until.toISOString():void 0}}function On(i,e){try{const r=Te.fromString(i).origOptions,t={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Te.DAILY]:"daily",[Te.WEEKLY]:"weekly",[Te.MONTHLY]:"monthly",[Te.YEARLY]:"yearly"},c=(r.freq!==void 0?a[r.freq]:null)||"weekly",u=r.interval||1;let y=[],b="date";r.byweekday&&c==="weekly"&&(y=(Array.isArray(r.byweekday)?r.byweekday:[r.byweekday]).map(l=>{const v=typeof l=="number"?l:l.weekday;return t[v]})),c==="monthly"&&(r.bymonthday&&Array.isArray(r.bymonthday)&&r.bymonthday.length>0?b="date":r.byweekday&&(b="weekday"));let s="",o=!1;if(e){o=!0;const l=vt(new Date(e),Ne);s=Me(l,"yyyy-MM-dd")}else if(r.until){o=!0;const l=vt(r.until,Ne);s=Me(l,"yyyy-MM-dd")}return{frequency:c,interval:u,recurringDays:y,recurrenceEndDate:s,hasEndDate:o,monthlyType:b}}catch(n){return console.error("Failed to parse recurrence rule:",n),null}}function Sn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Un(){return{generateRecurrenceRule:Lr,parseRecurrenceRule:On,clearRecurrence:Sn}}const Ir=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Sn,generateRecurrenceRule:Lr,parseRecurrenceRule:On,useRecurrenceLogic:Un},Symbol.toStringTag,{value:"Module"}));function io(i,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in i)){var t=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(i,r,t.get?t:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(i)}function Pn(i,e){return new Promise(function(n,r){let t;return so(i).then(function(a){try{return t=a,n(new Blob([e.slice(0,2),t,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}},r)})}const so=i=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:t}})=>{const a=new DataView(t);let c=0;if(a.getUint16(c)!==65496)return n("not a valid JPEG");for(c+=2;;){const u=a.getUint16(c);if(u===65498)break;const y=a.getUint16(c+2);if(u===65505&&a.getUint32(c+4)===1165519206){const b=c+10;let s;switch(a.getUint16(b)){case 18761:s=!0;break;case 19789:s=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(b+2,s)!==42)return n("TIFF header contains invalid version");const o=a.getUint32(b+4,s),l=b+o+2+12*a.getUint16(b+o,s);for(let v=b+o+2;v<l;v+=12)if(a.getUint16(v,s)==274){if(a.getUint16(v+2,s)!==3)return n("Orientation data type is invalid");if(a.getUint32(v+4,s)!==1)return n("Orientation data count is invalid");a.setUint16(v+8,1,s);break}return e(t.slice(c,c+2+y))}c+=2+y}return e(new Blob)}),r.readAsArrayBuffer(i)});var cr={},oo={get exports(){return cr},set exports(i){cr=i}};(function(i){var e,n,r={};oo.exports=r,r.parse=function(t,a){for(var c=r.bin.readUshort,u=r.bin.readUint,y=0,b={},s=new Uint8Array(t),o=s.length-4;u(s,o)!=101010256;)o--;y=o,y+=4;var l=c(s,y+=4);c(s,y+=2);var v=u(s,y+=2),g=u(s,y+=4);y+=4,y=g;for(var E=0;E<l;E++){u(s,y),y+=4,y+=4,y+=4,u(s,y+=4),v=u(s,y+=4);var C=u(s,y+=4),x=c(s,y+=4),S=c(s,y+2),F=c(s,y+4);y+=6;var M=u(s,y+=8);y+=4,y+=x+S+F,r._readLocal(s,M,b,v,C,a)}return b},r._readLocal=function(t,a,c,u,y,b){var s=r.bin.readUshort,o=r.bin.readUint;o(t,a),s(t,a+=4),s(t,a+=2);var l=s(t,a+=2);o(t,a+=2),o(t,a+=4),a+=4;var v=s(t,a+=8),g=s(t,a+=2);a+=2;var E=r.bin.readUTF8(t,a,v);if(a+=v,a+=g,b)c[E]={size:y,csize:u};else{var C=new Uint8Array(t.buffer,a);if(l==0)c[E]=new Uint8Array(C.buffer.slice(a,a+u));else{if(l!=8)throw"unknown compression method: "+l;var x=new Uint8Array(y);r.inflateRaw(C,x),c[E]=x}}},r.inflateRaw=function(t,a){return r.F.inflate(t,a)},r.inflate=function(t,a){return t[0],t[1],r.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),a)},r.deflate=function(t,a){a==null&&(a={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*t.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(t,u,c,a.level);var y=r.adler(t,0,t.length);return u[c+0]=y>>>24&255,u[c+1]=y>>>16&255,u[c+2]=y>>>8&255,u[c+3]=y>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(t,a){a==null&&(a={level:6});var c=new Uint8Array(50+Math.floor(1.1*t.length)),u=r.F.deflateRaw(t,c,u,a.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(t,a){a==null&&(a=!1);var c=0,u=r.bin.writeUint,y=r.bin.writeUshort,b={};for(var s in t){var o=!r._noNeed(s)&&!a,l=t[s],v=r.crc.crc(l,0,l.length);b[s]={cpr:o,usize:l.length,crc:v,file:o?r.deflateRaw(l):l}}for(var s in b)c+=b[s].file.length+30+46+2*r.bin.sizeUTF8(s);c+=22;var g=new Uint8Array(c),E=0,C=[];for(var s in b){var x=b[s];C.push(E),E=r._writeHeader(g,E,s,x,0)}var S=0,F=E;for(var s in b)x=b[s],C.push(E),E=r._writeHeader(g,E,s,x,1,C[S++]);var M=E-F;return u(g,E,101010256),E+=4,y(g,E+=4,S),y(g,E+=2,S),u(g,E+=2,M),u(g,E+=4,F),E+=4,E+=2,g.buffer},r._noNeed=function(t){var a=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(t,a,c,u,y,b){var s=r.bin.writeUint,o=r.bin.writeUshort,l=u.file;return s(t,a,y==0?67324752:33639248),a+=4,y==1&&(a+=2),o(t,a,20),o(t,a+=2,0),o(t,a+=2,u.cpr?8:0),s(t,a+=2,0),s(t,a+=4,u.crc),s(t,a+=4,l.length),s(t,a+=4,u.usize),o(t,a+=4,r.bin.sizeUTF8(c)),o(t,a+=2,0),a+=2,y==1&&(a+=2,a+=2,s(t,a+=6,b),a+=4),a+=r.bin.writeUTF8(t,a,c),y==0&&(t.set(l,a),a+=l.length),a},r.crc={table:function(){for(var t=new Uint32Array(256),a=0;a<256;a++){for(var c=a,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;t[a]=c}return t}(),update:function(t,a,c,u){for(var y=0;y<u;y++)t=r.crc.table[255&(t^a[c+y])]^t>>>8;return t},crc:function(t,a,c){return 4294967295^r.crc.update(4294967295,t,a,c)}},r.adler=function(t,a,c){for(var u=1,y=0,b=a,s=a+c;b<s;){for(var o=Math.min(b+5552,s);b<o;)y+=u+=t[b++];u%=65521,y%=65521}return y<<16|u},r.bin={readUshort:function(t,a){return t[a]|t[a+1]<<8},writeUshort:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255},readUint:function(t,a){return 16777216*t[a+3]+(t[a+2]<<16|t[a+1]<<8|t[a])},writeUint:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255,t[a+2]=c>>16&255,t[a+3]=c>>24&255},readASCII:function(t,a,c){for(var u="",y=0;y<c;y++)u+=String.fromCharCode(t[a+y]);return u},writeASCII:function(t,a,c){for(var u=0;u<c.length;u++)t[a+u]=c.charCodeAt(u)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,a,c){for(var u,y="",b=0;b<c;b++)y+="%"+r.bin.pad(t[a+b].toString(16));try{u=decodeURIComponent(y)}catch{return r.bin.readASCII(t,a,c)}return u},writeUTF8:function(t,a,c){for(var u=c.length,y=0,b=0;b<u;b++){var s=c.charCodeAt(b);if(!(4294967168&s))t[a+y]=s,y++;else if(!(4294965248&s))t[a+y]=192|s>>6,t[a+y+1]=128|s>>0&63,y+=2;else if(!(4294901760&s))t[a+y]=224|s>>12,t[a+y+1]=128|s>>6&63,t[a+y+2]=128|s>>0&63,y+=3;else{if(4292870144&s)throw"e";t[a+y]=240|s>>18,t[a+y+1]=128|s>>12&63,t[a+y+2]=128|s>>6&63,t[a+y+3]=128|s>>0&63,y+=4}}return y},sizeUTF8:function(t){for(var a=t.length,c=0,u=0;u<a;u++){var y=t.charCodeAt(u);if(!(4294967168&y))c++;else if(!(4294965248&y))c+=2;else if(!(4294901760&y))c+=3;else{if(4292870144&y)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(t,a,c,u){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],b=r.F.U,s=r.F._goodIndex;r.F._hash;var o=r.F._putsE,l=0,v=c<<3,g=0,E=t.length;if(u==0){for(;l<E;)o(a,v,l+(w=Math.min(65535,E-l))==E?1:0),v=r.F._copyExact(t,l,w,a,v+8),l+=w;return v>>>3}var C=b.lits,x=b.strt,S=b.prev,F=0,M=0,P=0,_=0,O=0,h=0;for(E>2&&(x[h=r.F._hash(t,0)]=0),l=0;l<E;l++){if(O=h,l+1<E-2){h=r.F._hash(t,l+1);var p=l+1&32767;S[p]=x[h],x[h]=p}if(g<=l){(F>14e3||M>26697)&&E-l>100&&(g<l&&(C[F]=l-g,F+=2,g=l),v=r.F._writeBlock(l==E-1||g==E?1:0,C,F,_,t,P,l-P,a,v),F=M=_=0,P=l);var k=0;l<E-2&&(k=r.F._bestMatch(t,l,S,O,Math.min(y[2],E-l),y[3]));var w=k>>>16,D=65535&k;if(k!=0){D=65535&k;var I=s(w=k>>>16,b.of0);b.lhst[257+I]++;var T=s(D,b.df0);b.dhst[T]++,_+=b.exb[I]+b.dxb[T],C[F]=w<<23|l-g,C[F+1]=D<<16|I<<8|T,F+=2,g=l+w}else b.lhst[t[l]]++;M++}}for(P==l&&t.length!=0||(g<l&&(C[F]=l-g,F+=2,g=l),v=r.F._writeBlock(1,C,F,_,t,P,l-P,a,v),F=0,M=0,F=M=_=0,P=l);7&v;)v++;return v>>>3},r.F._bestMatch=function(t,a,c,u,y,b){var s=32767&a,o=c[s],l=s-o+32768&32767;if(o==s||u!=r.F._hash(t,a-l))return 0;for(var v=0,g=0,E=Math.min(32767,a);l<=E&&--b!=0&&o!=s;){if(v==0||t[a+v]==t[a+v-l]){var C=r.F._howLong(t,a,l);if(C>v){if(g=l,(v=C)>=y)break;l+2<C&&(C=l+2);for(var x=0,S=0;S<C-2;S++){var F=a-l+S+32768&32767,M=F-c[F]+32768&32767;M>x&&(x=M,o=F)}}}l+=(s=o)-(o=c[s])+32768&32767}return v<<16|g},r.F._howLong=function(t,a,c){if(t[a]!=t[a-c]||t[a+1]!=t[a+1-c]||t[a+2]!=t[a+2-c])return 0;var u=a,y=Math.min(t.length,a+258);for(a+=3;a<y&&t[a]==t[a-c];)a++;return a-u},r.F._hash=function(t,a){return(t[a]<<8|t[a+1])+(t[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(t,a,c,u,y,b,s,o,l){var v,g,E,C,x,S,F,M,P,_=r.F.U,O=r.F._putsF,h=r.F._putsE;_.lhst[256]++,g=(v=r.F.getTrees())[0],E=v[1],C=v[2],x=v[3],S=v[4],F=v[5],M=v[6],P=v[7];var p=32+(l+3&7?8-(l+3&7):0)+(s<<3),k=u+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),w=u+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);w+=14+3*F+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var D=0;D<286;D++)_.lhst[D]=0;for(D=0;D<30;D++)_.dhst[D]=0;for(D=0;D<19;D++)_.ihst[D]=0;var I=p<k&&p<w?0:k<w?1:2;if(O(o,l,t),O(o,l+1,I),l+=3,I==0){for(;7&l;)l++;l=r.F._copyExact(y,b,s,o,l)}else{var T,A;if(I==1&&(T=_.fltree,A=_.fdtree),I==2){r.F.makeCodes(_.ltree,g),r.F.revCodes(_.ltree,g),r.F.makeCodes(_.dtree,E),r.F.revCodes(_.dtree,E),r.F.makeCodes(_.itree,C),r.F.revCodes(_.itree,C),T=_.ltree,A=_.dtree,h(o,l,x-257),h(o,l+=5,S-1),h(o,l+=5,F-4),l+=4;for(var m=0;m<F;m++)h(o,l+3*m,_.itree[1+(_.ordr[m]<<1)]);l+=3*F,l=r.F._codeTiny(M,_.itree,o,l),l=r.F._codeTiny(P,_.itree,o,l)}for(var d=b,U=0;U<c;U+=2){for(var R=a[U],L=R>>>23,$=d+(8388607&R);d<$;)l=r.F._writeLit(y[d++],T,o,l);if(L!=0){var G=a[U+1],Z=G>>16,q=G>>8&255,H=255&G;h(o,l=r.F._writeLit(257+q,T,o,l),L-_.of0[q]),l+=_.exb[q],O(o,l=r.F._writeLit(H,A,o,l),Z-_.df0[H]),l+=_.dxb[H],d+=L}}l=r.F._writeLit(256,T,o,l)}return l},r.F._copyExact=function(t,a,c,u,y){var b=y>>>3;return u[b]=c,u[b+1]=c>>>8,u[b+2]=255-u[b],u[b+3]=255-u[b+1],b+=4,u.set(new Uint8Array(t.buffer,a,c),b),y+(c+4<<3)},r.F.getTrees=function(){for(var t=r.F.U,a=r.F._hufTree(t.lhst,t.ltree,15),c=r.F._hufTree(t.dhst,t.dtree,15),u=[],y=r.F._lenCodes(t.ltree,u),b=[],s=r.F._lenCodes(t.dtree,b),o=0;o<u.length;o+=2)t.ihst[u[o]]++;for(o=0;o<b.length;o+=2)t.ihst[b[o]]++;for(var l=r.F._hufTree(t.ihst,t.itree,7),v=19;v>4&&t.itree[1+(t.ordr[v-1]<<1)]==0;)v--;return[a,c,l,y,s,v,u,b]},r.F.getSecond=function(t){for(var a=[],c=0;c<t.length;c+=2)a.push(t[c+1]);return a},r.F.nonZero=function(t){for(var a="",c=0;c<t.length;c+=2)t[c+1]!=0&&(a+=(c>>1)+",");return a},r.F.contSize=function(t,a){for(var c=0,u=0;u<a.length;u++)c+=a[u]*t[1+(u<<1)];return c},r.F._codeTiny=function(t,a,c,u){for(var y=0;y<t.length;y+=2){var b=t[y],s=t[y+1];u=r.F._writeLit(b,a,c,u);var o=b==16?2:b==17?3:7;b>15&&(r.F._putsE(c,u,s,o),u+=o)}return u},r.F._lenCodes=function(t,a){for(var c=t.length;c!=2&&t[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var y=t[u+1],b=u+3<c?t[u+3]:-1,s=u+5<c?t[u+5]:-1,o=u==0?-1:t[u-1];if(y==0&&b==y&&s==y){for(var l=u+5;l+2<c&&t[l+2]==y;)l+=2;(v=Math.min(l+1-u>>>1,138))<11?a.push(17,v-3):a.push(18,v-11),u+=2*v-2}else if(y==o&&b==y&&s==y){for(l=u+5;l+2<c&&t[l+2]==y;)l+=2;var v=Math.min(l+1-u>>>1,6);a.push(16,v-3),u+=2*v-2}else a.push(y,0)}return c>>>1},r.F._hufTree=function(t,a,c){var u=[],y=t.length,b=a.length,s=0;for(s=0;s<b;s+=2)a[s]=0,a[s+1]=0;for(s=0;s<y;s++)t[s]!=0&&u.push({lit:s,f:t[s]});var o=u.length,l=u.slice(0);if(o==0)return 0;if(o==1){var v=u[0].lit;return l=v==0?1:0,a[1+(v<<1)]=1,a[1+(l<<1)]=1,1}u.sort(function(M,P){return M.f-P.f});var g=u[0],E=u[1],C=0,x=1,S=2;for(u[0]={lit:-1,f:g.f+E.f,l:g,r:E,d:0};x!=o-1;)g=C!=x&&(S==o||u[C].f<u[S].f)?u[C++]:u[S++],E=C!=x&&(S==o||u[C].f<u[S].f)?u[C++]:u[S++],u[x++]={lit:-1,f:g.f+E.f,l:g,r:E};var F=r.F.setDepth(u[x-1],0);for(F>c&&(r.F.restrictDepth(l,c,F),F=c),s=0;s<o;s++)a[1+(l[s].lit<<1)]=l[s].d;return F},r.F.setDepth=function(t,a){return t.lit!=-1?(t.d=a,a):Math.max(r.F.setDepth(t.l,a+1),r.F.setDepth(t.r,a+1))},r.F.restrictDepth=function(t,a,c){var u=0,y=1<<c-a,b=0;for(t.sort(function(o,l){return l.d==o.d?o.f-l.f:l.d-o.d}),u=0;u<t.length&&t[u].d>a;u++){var s=t[u].d;t[u].d=a,b+=y-(1<<c-s)}for(b>>>=c-a;b>0;)(s=t[u].d)<a?(t[u].d++,b-=1<<a-s-1):u++;for(;u>=0;u--)t[u].d==a&&b<0&&(t[u].d--,b++);b!=0&&console.log("debt left")},r.F._goodIndex=function(t,a){var c=0;return a[16|c]<=t&&(c|=16),a[8|c]<=t&&(c|=8),a[4|c]<=t&&(c|=4),a[2|c]<=t&&(c|=2),a[1|c]<=t&&(c|=1),c},r.F._writeLit=function(t,a,c,u){return r.F._putsF(c,u,a[t<<1]),u+a[1+(t<<1)]},r.F.inflate=function(t,a){var c=Uint8Array;if(t[0]==3&&t[1]==0)return a||new c(0);var u=r.F,y=u._bitsF,b=u._bitsE,s=u._decodeTiny,o=u.makeCodes,l=u.codes2map,v=u._get17,g=u.U,E=a==null;E&&(a=new c(t.length>>>2<<3));for(var C,x,S=0,F=0,M=0,P=0,_=0,O=0,h=0,p=0,k=0;S==0;)if(S=y(t,k,1),F=y(t,k+1,2),k+=3,F!=0){if(E&&(a=r.F._check(a,p+(1<<17))),F==1&&(C=g.flmap,x=g.fdmap,O=511,h=31),F==2){M=b(t,k,5)+257,P=b(t,k+5,5)+1,_=b(t,k+10,4)+4,k+=14;for(var w=0;w<38;w+=2)g.itree[w]=0,g.itree[w+1]=0;var D=1;for(w=0;w<_;w++){var I=b(t,k+3*w,3);g.itree[1+(g.ordr[w]<<1)]=I,I>D&&(D=I)}k+=3*_,o(g.itree,D),l(g.itree,D,g.imap),C=g.lmap,x=g.dmap,k=s(g.imap,(1<<D)-1,M+P,t,k,g.ttree);var T=u._copyOut(g.ttree,0,M,g.ltree);O=(1<<T)-1;var A=u._copyOut(g.ttree,M,P,g.dtree);h=(1<<A)-1,o(g.ltree,T),l(g.ltree,T,C),o(g.dtree,A),l(g.dtree,A,x)}for(;;){var m=C[v(t,k)&O];k+=15&m;var d=m>>>4;if(!(d>>>8))a[p++]=d;else{if(d==256)break;var U=p+d-254;if(d>264){var R=g.ldef[d-257];U=p+(R>>>3)+b(t,k,7&R),k+=7&R}var L=x[v(t,k)&h];k+=15&L;var $=L>>>4,G=g.ddef[$],Z=(G>>>4)+y(t,k,15&G);for(k+=15&G,E&&(a=r.F._check(a,p+(1<<17)));p<U;)a[p]=a[p++-Z],a[p]=a[p++-Z],a[p]=a[p++-Z],a[p]=a[p++-Z];p=U}}}else{7&k&&(k+=8-(7&k));var q=4+(k>>>3),H=t[q-4]|t[q-3]<<8;E&&(a=r.F._check(a,p+H)),a.set(new c(t.buffer,t.byteOffset+q,H),p),k=q+H<<3,p+=H}return a.length==p?a:a.slice(0,p)},r.F._check=function(t,a){var c=t.length;if(a<=c)return t;var u=new Uint8Array(Math.max(c<<1,a));return u.set(t,0),u},r.F._decodeTiny=function(t,a,c,u,y,b){for(var s=r.F._bitsE,o=r.F._get17,l=0;l<c;){var v=t[o(u,y)&a];y+=15&v;var g=v>>>4;if(g<=15)b[l]=g,l++;else{var E=0,C=0;g==16?(C=3+s(u,y,2),y+=2,E=b[l-1]):g==17?(C=3+s(u,y,3),y+=3):g==18&&(C=11+s(u,y,7),y+=7);for(var x=l+C;l<x;)b[l]=E,l++}}return y},r.F._copyOut=function(t,a,c,u){for(var y=0,b=0,s=u.length>>>1;b<c;){var o=t[b+a];u[b<<1]=0,u[1+(b<<1)]=o,o>y&&(y=o),b++}for(;b<s;)u[b<<1]=0,u[1+(b<<1)]=0,b++;return y},r.F.makeCodes=function(t,a){for(var c,u,y,b,s=r.F.U,o=t.length,l=s.bl_count,v=0;v<=a;v++)l[v]=0;for(v=1;v<o;v+=2)l[t[v]]++;var g=s.next_code;for(c=0,l[0]=0,u=1;u<=a;u++)c=c+l[u-1]<<1,g[u]=c;for(y=0;y<o;y+=2)(b=t[y+1])!=0&&(t[y]=g[b],g[b]++)},r.F.codes2map=function(t,a,c){for(var u=t.length,y=r.F.U.rev15,b=0;b<u;b+=2)if(t[b+1]!=0)for(var s=b>>1,o=t[b+1],l=s<<4|o,v=a-o,g=t[b]<<v,E=g+(1<<v);g!=E;)c[y[g]>>>15-a]=l,g++},r.F.revCodes=function(t,a){for(var c=r.F.U.rev15,u=15-a,y=0;y<t.length;y+=2){var b=t[y]<<a-t[y+1];t[y]=c[b]>>>u}},r.F._putsE=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8},r.F._putsF=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8,t[u+2]|=c>>>16},r.F._bitsE=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8)>>>(7&a)&(1<<c)-1},r.F._bitsF=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)&(1<<c)-1},r.F._get17=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16|t[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=r.F.U,a=0;a<32768;a++){var c=a;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,t.rev15[a]=(c>>>16|c<<16)>>>17}function u(y,b,s){for(;b--!=0;)y.push(0,s)}for(a=0;a<32;a++)t.ldef[a]=t.of0[a]<<3|t.exb[a],t.ddef[a]=t.df0[a]<<4|t.dxb[a];u(t.fltree,144,8),u(t.fltree,112,9),u(t.fltree,24,7),u(t.fltree,8,8),r.F.makeCodes(t.fltree,9),r.F.codes2map(t.fltree,9,t.flmap),r.F.revCodes(t.fltree,9),u(t.fdtree,32,5),r.F.makeCodes(t.fdtree,5),r.F.codes2map(t.fdtree,5,t.fdmap),r.F.revCodes(t.fdtree,5),u(t.itree,19,0),u(t.ltree,286,0),u(t.dtree,30,0),u(t.ttree,320,0)}()})();var lo=io({__proto__:null,default:cr},[cr]);const rt=function(){var i={nextZero(s,o){for(;s[o]!=0;)o++;return o},readUshort:(s,o)=>s[o]<<8|s[o+1],writeUshort(s,o,l){s[o]=l>>8&255,s[o+1]=255&l},readUint:(s,o)=>16777216*s[o]+(s[o+1]<<16|s[o+2]<<8|s[o+3]),writeUint(s,o,l){s[o]=l>>24&255,s[o+1]=l>>16&255,s[o+2]=l>>8&255,s[o+3]=255&l},readASCII(s,o,l){let v="";for(let g=0;g<l;g++)v+=String.fromCharCode(s[o+g]);return v},writeASCII(s,o,l){for(let v=0;v<l.length;v++)s[o+v]=l.charCodeAt(v)},readBytes(s,o,l){const v=[];for(let g=0;g<l;g++)v.push(s[o+g]);return v},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,o,l){let v,g="";for(let E=0;E<l;E++)g+=`%${i.pad(s[o+E].toString(16))}`;try{v=decodeURIComponent(g)}catch{return i.readASCII(s,o,l)}return v}};function e(s,o,l,v){const g=o*l,E=a(v),C=Math.ceil(o*E/8),x=new Uint8Array(4*g),S=new Uint32Array(x.buffer),{ctype:F}=v,{depth:M}=v,P=i.readUshort;if(F==6){const R=g<<2;if(M==8)for(var _=0;_<R;_+=4)x[_]=s[_],x[_+1]=s[_+1],x[_+2]=s[_+2],x[_+3]=s[_+3];if(M==16)for(_=0;_<R;_++)x[_]=s[_<<1]}else if(F==2){const R=v.tabs.tRNS;if(R==null){if(M==8)for(_=0;_<g;_++){var O=3*_;S[_]=255<<24|s[O+2]<<16|s[O+1]<<8|s[O]}if(M==16)for(_=0;_<g;_++)O=6*_,S[_]=255<<24|s[O+4]<<16|s[O+2]<<8|s[O]}else{var h=R[0];const L=R[1],$=R[2];if(M==8)for(_=0;_<g;_++){var p=_<<2;O=3*_,S[_]=255<<24|s[O+2]<<16|s[O+1]<<8|s[O],s[O]==h&&s[O+1]==L&&s[O+2]==$&&(x[p+3]=0)}if(M==16)for(_=0;_<g;_++)p=_<<2,O=6*_,S[_]=255<<24|s[O+4]<<16|s[O+2]<<8|s[O],P(s,O)==h&&P(s,O+2)==L&&P(s,O+4)==$&&(x[p+3]=0)}}else if(F==3){const R=v.tabs.PLTE,L=v.tabs.tRNS,$=L?L.length:0;if(M==1)for(var k=0;k<l;k++){var w=k*C,D=k*o;for(_=0;_<o;_++){p=D+_<<2;var I=3*(T=s[w+(_>>3)]>>7-((7&_)<<0)&1);x[p]=R[I],x[p+1]=R[I+1],x[p+2]=R[I+2],x[p+3]=T<$?L[T]:255}}if(M==2)for(k=0;k<l;k++)for(w=k*C,D=k*o,_=0;_<o;_++)p=D+_<<2,I=3*(T=s[w+(_>>2)]>>6-((3&_)<<1)&3),x[p]=R[I],x[p+1]=R[I+1],x[p+2]=R[I+2],x[p+3]=T<$?L[T]:255;if(M==4)for(k=0;k<l;k++)for(w=k*C,D=k*o,_=0;_<o;_++)p=D+_<<2,I=3*(T=s[w+(_>>1)]>>4-((1&_)<<2)&15),x[p]=R[I],x[p+1]=R[I+1],x[p+2]=R[I+2],x[p+3]=T<$?L[T]:255;if(M==8)for(_=0;_<g;_++){var T;p=_<<2,I=3*(T=s[_]),x[p]=R[I],x[p+1]=R[I+1],x[p+2]=R[I+2],x[p+3]=T<$?L[T]:255}}else if(F==4){if(M==8)for(_=0;_<g;_++){p=_<<2;var A=s[m=_<<1];x[p]=A,x[p+1]=A,x[p+2]=A,x[p+3]=s[m+1]}if(M==16)for(_=0;_<g;_++){var m;p=_<<2,A=s[m=_<<2],x[p]=A,x[p+1]=A,x[p+2]=A,x[p+3]=s[m+2]}}else if(F==0)for(h=v.tabs.tRNS?v.tabs.tRNS:-1,k=0;k<l;k++){const R=k*C,L=k*o;if(M==1)for(var d=0;d<o;d++){var U=(A=255*(s[R+(d>>>3)]>>>7-(7&d)&1))==255*h?0:255;S[L+d]=U<<24|A<<16|A<<8|A}else if(M==2)for(d=0;d<o;d++)U=(A=85*(s[R+(d>>>2)]>>>6-((3&d)<<1)&3))==85*h?0:255,S[L+d]=U<<24|A<<16|A<<8|A;else if(M==4)for(d=0;d<o;d++)U=(A=17*(s[R+(d>>>1)]>>>4-((1&d)<<2)&15))==17*h?0:255,S[L+d]=U<<24|A<<16|A<<8|A;else if(M==8)for(d=0;d<o;d++)U=(A=s[R+d])==h?0:255,S[L+d]=U<<24|A<<16|A<<8|A;else if(M==16)for(d=0;d<o;d++)A=s[R+(d<<1)],U=P(s,R+(d<<1))==h?0:255,S[L+d]=U<<24|A<<16|A<<8|A}return x}function n(s,o,l,v){const g=a(s),E=Math.ceil(l*g/8),C=new Uint8Array((E+1+s.interlace)*v);return o=s.tabs.CgBI?t(o,C):r(o,C),s.interlace==0?o=c(o,s,0,l,v):s.interlace==1&&(o=function(S,F){const M=F.width,P=F.height,_=a(F),O=_>>3,h=Math.ceil(M*_/8),p=new Uint8Array(P*h);let k=0;const w=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],T=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const d=I[A],U=T[A];let R=0,L=0,$=w[A];for(;$<P;)$+=d,L++;let G=D[A];for(;G<M;)G+=U,R++;const Z=Math.ceil(R*_/8);c(S,F,k,R,L);let q=0,H=w[A];for(;H<P;){let W=D[A],Q=k+q*Z<<3;for(;W<M;){var m;if(_==1&&(m=(m=S[Q>>3])>>7-(7&Q)&1,p[H*h+(W>>3)]|=m<<7-((7&W)<<0)),_==2&&(m=(m=S[Q>>3])>>6-(7&Q)&3,p[H*h+(W>>2)]|=m<<6-((3&W)<<1)),_==4&&(m=(m=S[Q>>3])>>4-(7&Q)&15,p[H*h+(W>>1)]|=m<<4-((1&W)<<2)),_>=8){const B=H*h+W*O;for(let X=0;X<O;X++)p[B+X]=S[(Q>>3)+X]}Q+=_,W+=U}q++,H+=d}R*L!=0&&(k+=L*(1+Z)),A+=1}return p}(o,s)),o}function r(s,o){return t(new Uint8Array(s.buffer,2,s.length-6),o)}var t=function(){const s={H:{}};return s.H.N=function(o,l){const v=Uint8Array;let g,E,C=0,x=0,S=0,F=0,M=0,P=0,_=0,O=0,h=0;if(o[0]==3&&o[1]==0)return l||new v(0);const p=s.H,k=p.b,w=p.e,D=p.R,I=p.n,T=p.A,A=p.Z,m=p.m,d=l==null;for(d&&(l=new v(o.length>>>2<<5));C==0;)if(C=k(o,h,1),x=k(o,h+1,2),h+=3,x!=0){if(d&&(l=s.H.W(l,O+(1<<17))),x==1&&(g=m.J,E=m.h,P=511,_=31),x==2){S=w(o,h,5)+257,F=w(o,h+5,5)+1,M=w(o,h+10,4)+4,h+=14;let R=1;for(var U=0;U<38;U+=2)m.Q[U]=0,m.Q[U+1]=0;for(U=0;U<M;U++){const G=w(o,h+3*U,3);m.Q[1+(m.X[U]<<1)]=G,G>R&&(R=G)}h+=3*M,I(m.Q,R),T(m.Q,R,m.u),g=m.w,E=m.d,h=D(m.u,(1<<R)-1,S+F,o,h,m.v);const L=p.V(m.v,0,S,m.C);P=(1<<L)-1;const $=p.V(m.v,S,F,m.D);_=(1<<$)-1,I(m.C,L),T(m.C,L,g),I(m.D,$),T(m.D,$,E)}for(;;){const R=g[A(o,h)&P];h+=15&R;const L=R>>>4;if(!(L>>>8))l[O++]=L;else{if(L==256)break;{let $=O+L-254;if(L>264){const W=m.q[L-257];$=O+(W>>>3)+w(o,h,7&W),h+=7&W}const G=E[A(o,h)&_];h+=15&G;const Z=G>>>4,q=m.c[Z],H=(q>>>4)+k(o,h,15&q);for(h+=15&q;O<$;)l[O]=l[O++-H],l[O]=l[O++-H],l[O]=l[O++-H],l[O]=l[O++-H];O=$}}}}else{7&h&&(h+=8-(7&h));const R=4+(h>>>3),L=o[R-4]|o[R-3]<<8;d&&(l=s.H.W(l,O+L)),l.set(new v(o.buffer,o.byteOffset+R,L),O),h=R+L<<3,O+=L}return l.length==O?l:l.slice(0,O)},s.H.W=function(o,l){const v=o.length;if(l<=v)return o;const g=new Uint8Array(v<<1);return g.set(o,0),g},s.H.R=function(o,l,v,g,E,C){const x=s.H.e,S=s.H.Z;let F=0;for(;F<v;){const M=o[S(g,E)&l];E+=15&M;const P=M>>>4;if(P<=15)C[F]=P,F++;else{let _=0,O=0;P==16?(O=3+x(g,E,2),E+=2,_=C[F-1]):P==17?(O=3+x(g,E,3),E+=3):P==18&&(O=11+x(g,E,7),E+=7);const h=F+O;for(;F<h;)C[F]=_,F++}}return E},s.H.V=function(o,l,v,g){let E=0,C=0;const x=g.length>>>1;for(;C<v;){const S=o[C+l];g[C<<1]=0,g[1+(C<<1)]=S,S>E&&(E=S),C++}for(;C<x;)g[C<<1]=0,g[1+(C<<1)]=0,C++;return E},s.H.n=function(o,l){const v=s.H.m,g=o.length;let E,C,x,S;const F=v.j;for(var M=0;M<=l;M++)F[M]=0;for(M=1;M<g;M+=2)F[o[M]]++;const P=v.K;for(E=0,F[0]=0,C=1;C<=l;C++)E=E+F[C-1]<<1,P[C]=E;for(x=0;x<g;x+=2)S=o[x+1],S!=0&&(o[x]=P[S],P[S]++)},s.H.A=function(o,l,v){const g=o.length,E=s.H.m.r;for(let C=0;C<g;C+=2)if(o[C+1]!=0){const x=C>>1,S=o[C+1],F=x<<4|S,M=l-S;let P=o[C]<<M;const _=P+(1<<M);for(;P!=_;)v[E[P]>>>15-l]=F,P++}},s.H.l=function(o,l){const v=s.H.m.r,g=15-l;for(let E=0;E<o.length;E+=2){const C=o[E]<<l-o[E+1];o[E]=v[C]>>>g}},s.H.M=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8},s.H.I=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8,o[g+2]|=v>>>16},s.H.e=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8)>>>(7&l)&(1<<v)-1},s.H.b=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)&(1<<v)-1},s.H.Z=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)},s.H.i=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16|o[3+(l>>>3)]<<24)>>>(7&l)},s.H.m=function(){const o=Uint16Array,l=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new l(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new l(286),Y:new l(30),a:new l(19),t:new l(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=s.H.m;for(var l=0;l<32768;l++){let g=l;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,o.r[l]=(g>>>16|g<<16)>>>17}function v(g,E,C){for(;E--!=0;)g.push(0,C)}for(l=0;l<32;l++)o.q[l]=o.S[l]<<3|o.T[l],o.c[l]=o.p[l]<<4|o.z[l];v(o._,144,8),v(o._,112,9),v(o._,24,7),v(o._,8,8),s.H.n(o._,9),s.H.A(o._,9,o.J),s.H.l(o._,9),v(o.$,32,5),s.H.n(o.$,5),s.H.A(o.$,5,o.h),s.H.l(o.$,5),v(o.Q,19,0),v(o.C,286,0),v(o.D,30,0),v(o.v,320,0)}(),s.H.N}();function a(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function c(s,o,l,v,g){let E=a(o);const C=Math.ceil(v*E/8);let x,S;E=Math.ceil(E/8);let F=s[l],M=0;if(F>1&&(s[l]=[0,0,1][F-2]),F==3)for(M=E;M<C;M++)s[M+1]=s[M+1]+(s[M+1-E]>>>1)&255;for(let P=0;P<g;P++)if(x=l+P*C,S=x+P+1,F=s[S-1],M=0,F==0)for(;M<C;M++)s[x+M]=s[S+M];else if(F==1){for(;M<E;M++)s[x+M]=s[S+M];for(;M<C;M++)s[x+M]=s[S+M]+s[x+M-E]}else if(F==2)for(;M<C;M++)s[x+M]=s[S+M]+s[x+M-C];else if(F==3){for(;M<E;M++)s[x+M]=s[S+M]+(s[x+M-C]>>>1);for(;M<C;M++)s[x+M]=s[S+M]+(s[x+M-C]+s[x+M-E]>>>1)}else{for(;M<E;M++)s[x+M]=s[S+M]+u(0,s[x+M-C],0);for(;M<C;M++)s[x+M]=s[S+M]+u(s[x+M-E],s[x+M-C],s[x+M-E-C])}return s}function u(s,o,l){const v=s+o-l,g=v-s,E=v-o,C=v-l;return g*g<=E*E&&g*g<=C*C?s:E*E<=C*C?o:l}function y(s,o,l){l.width=i.readUint(s,o),o+=4,l.height=i.readUint(s,o),o+=4,l.depth=s[o],o++,l.ctype=s[o],o++,l.compress=s[o],o++,l.filter=s[o],o++,l.interlace=s[o],o++}function b(s,o,l,v,g,E,C,x,S){const F=Math.min(o,g),M=Math.min(l,E);let P=0,_=0;for(let A=0;A<M;A++)for(let m=0;m<F;m++)if(C>=0&&x>=0?(P=A*o+m<<2,_=(x+A)*g+C+m<<2):(P=(-x+A)*o-C+m<<2,_=A*g+m<<2),S==0)v[_]=s[P],v[_+1]=s[P+1],v[_+2]=s[P+2],v[_+3]=s[P+3];else if(S==1){var O=s[P+3]*.00392156862745098,h=s[P]*O,p=s[P+1]*O,k=s[P+2]*O,w=v[_+3]*(1/255),D=v[_]*w,I=v[_+1]*w,T=v[_+2]*w;const d=1-O,U=O+w*d,R=U==0?0:1/U;v[_+3]=255*U,v[_+0]=(h+D*d)*R,v[_+1]=(p+I*d)*R,v[_+2]=(k+T*d)*R}else if(S==2)O=s[P+3],h=s[P],p=s[P+1],k=s[P+2],w=v[_+3],D=v[_],I=v[_+1],T=v[_+2],O==w&&h==D&&p==I&&k==T?(v[_]=0,v[_+1]=0,v[_+2]=0,v[_+3]=0):(v[_]=h,v[_+1]=p,v[_+2]=k,v[_+3]=O);else if(S==3){if(O=s[P+3],h=s[P],p=s[P+1],k=s[P+2],w=v[_+3],D=v[_],I=v[_+1],T=v[_+2],O==w&&h==D&&p==I&&k==T)continue;if(O<220&&w>20)return!1}return!0}return{decode:function(o){const l=new Uint8Array(o);let v=8;const g=i,E=g.readUshort,C=g.readUint,x={tabs:{},frames:[]},S=new Uint8Array(l.length);let F,M=0,P=0;const _=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(l[O]!=_[O])throw"The input is not a PNG file!";for(;v<l.length;){const A=g.readUint(l,v);v+=4;const m=g.readASCII(l,v,4);if(v+=4,m=="IHDR")y(l,v,x);else if(m=="iCCP"){for(var h=v;l[h]!=0;)h++;g.readASCII(l,v,h-v),l[h+1];const d=l.slice(h+2,v+A);let U=null;try{U=r(d)}catch{U=t(d)}x.tabs[m]=U}else if(m=="CgBI")x.tabs[m]=l.slice(v,v+4);else if(m=="IDAT"){for(O=0;O<A;O++)S[M+O]=l[v+O];M+=A}else if(m=="acTL")x.tabs[m]={num_frames:C(l,v),num_plays:C(l,v+4)},F=new Uint8Array(l.length);else if(m=="fcTL"){P!=0&&((T=x.frames[x.frames.length-1]).data=n(x,F.slice(0,P),T.rect.width,T.rect.height),P=0);const d={x:C(l,v+12),y:C(l,v+16),width:C(l,v+4),height:C(l,v+8)};let U=E(l,v+22);U=E(l,v+20)/(U==0?100:U);const R={rect:d,delay:Math.round(1e3*U),dispose:l[v+24],blend:l[v+25]};x.frames.push(R)}else if(m=="fdAT"){for(O=0;O<A-4;O++)F[P+O]=l[v+O+4];P+=A-4}else if(m=="pHYs")x.tabs[m]=[g.readUint(l,v),g.readUint(l,v+4),l[v+8]];else if(m=="cHRM")for(x.tabs[m]=[],O=0;O<8;O++)x.tabs[m].push(g.readUint(l,v+4*O));else if(m=="tEXt"||m=="zTXt"){x.tabs[m]==null&&(x.tabs[m]={});var p=g.nextZero(l,v),k=g.readASCII(l,v,p-v),w=v+A-p-1;if(m=="tEXt")I=g.readASCII(l,p+1,w);else{var D=r(l.slice(p+2,p+2+w));I=g.readUTF8(D,0,D.length)}x.tabs[m][k]=I}else if(m=="iTXt"){x.tabs[m]==null&&(x.tabs[m]={}),p=0,h=v,p=g.nextZero(l,h),k=g.readASCII(l,h,p-h);const d=l[h=p+1];var I;l[h+1],h+=2,p=g.nextZero(l,h),g.readASCII(l,h,p-h),h=p+1,p=g.nextZero(l,h),g.readUTF8(l,h,p-h),w=A-((h=p+1)-v),d==0?I=g.readUTF8(l,h,w):(D=r(l.slice(h,h+w)),I=g.readUTF8(D,0,D.length)),x.tabs[m][k]=I}else if(m=="PLTE")x.tabs[m]=g.readBytes(l,v,A);else if(m=="hIST"){const d=x.tabs.PLTE.length/3;for(x.tabs[m]=[],O=0;O<d;O++)x.tabs[m].push(E(l,v+2*O))}else if(m=="tRNS")x.ctype==3?x.tabs[m]=g.readBytes(l,v,A):x.ctype==0?x.tabs[m]=E(l,v):x.ctype==2&&(x.tabs[m]=[E(l,v),E(l,v+2),E(l,v+4)]);else if(m=="gAMA")x.tabs[m]=g.readUint(l,v)/1e5;else if(m=="sRGB")x.tabs[m]=l[v];else if(m=="bKGD")x.ctype==0||x.ctype==4?x.tabs[m]=[E(l,v)]:x.ctype==2||x.ctype==6?x.tabs[m]=[E(l,v),E(l,v+2),E(l,v+4)]:x.ctype==3&&(x.tabs[m]=l[v]);else if(m=="IEND")break;v+=A,g.readUint(l,v),v+=4}var T;return P!=0&&((T=x.frames[x.frames.length-1]).data=n(x,F.slice(0,P),T.rect.width,T.rect.height)),x.data=n(x,S,x.width,x.height),delete x.compress,delete x.interlace,delete x.filter,x},toRGBA8:function(o){const l=o.width,v=o.height;if(o.tabs.acTL==null)return[e(o.data,l,v,o).buffer];const g=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const E=l*v*4,C=new Uint8Array(E),x=new Uint8Array(E),S=new Uint8Array(E);for(let M=0;M<o.frames.length;M++){const P=o.frames[M],_=P.rect.x,O=P.rect.y,h=P.rect.width,p=P.rect.height,k=e(P.data,h,p,o);if(M!=0)for(var F=0;F<E;F++)S[F]=C[F];if(P.blend==0?b(k,h,p,C,l,v,_,O,0):P.blend==1&&b(k,h,p,C,l,v,_,O,1),g.push(C.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)b(x,h,p,C,l,v,_,O,0);else if(P.dispose==2)for(F=0;F<E;F++)C[F]=S[F]}}return g},_paeth:u,_copyTile:b,_bin:i}}();(function(){const{_copyTile:i}=rt,{_bin:e}=rt,n=rt._paeth;var r={table:function(){const h=new Uint32Array(256);for(let p=0;p<256;p++){let k=p;for(let w=0;w<8;w++)1&k?k=3988292384^k>>>1:k>>>=1;h[p]=k}return h}(),update(h,p,k,w){for(let D=0;D<w;D++)h=r.table[255&(h^p[k+D])]^h>>>8;return h},crc:(h,p,k)=>4294967295^r.update(4294967295,h,p,k)};function t(h,p,k,w){p[k]+=h[0]*w>>4,p[k+1]+=h[1]*w>>4,p[k+2]+=h[2]*w>>4,p[k+3]+=h[3]*w>>4}function a(h){return Math.max(0,Math.min(255,h))}function c(h,p){const k=h[0]-p[0],w=h[1]-p[1],D=h[2]-p[2],I=h[3]-p[3];return k*k+w*w+D*D+I*I}function u(h,p,k,w,D,I,T){T==null&&(T=1);const A=w.length,m=[];for(var d=0;d<A;d++){const H=w[d];m.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(d=0;d<A;d++){let H=4294967295;for(var U=0,R=0;R<A;R++){var L=c(m[d],m[R]);R!=d&&L<H&&(H=L,U=R)}}const $=new Uint32Array(D.buffer),G=new Int16Array(p*k*4),Z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(d=0;d<Z.length;d++)Z[d]=255*((Z[d]+.5)/16-.5);for(let H=0;H<k;H++)for(let W=0;W<p;W++){var q;d=4*(H*p+W),T!=2?q=[a(h[d]+G[d]),a(h[d+1]+G[d+1]),a(h[d+2]+G[d+2]),a(h[d+3]+G[d+3])]:(L=Z[4*(3&H)+(3&W)],q=[a(h[d]+L),a(h[d+1]+L),a(h[d+2]+L),a(h[d+3]+L)]),U=0;let Q=16777215;for(R=0;R<A;R++){const ie=c(q,m[R]);ie<Q&&(Q=ie,U=R)}const B=m[U],X=[q[0]-B[0],q[1]-B[1],q[2]-B[2],q[3]-B[3]];T==1&&(W!=p-1&&t(X,G,d+4,7),H!=k-1&&(W!=0&&t(X,G,d+4*p-4,3),t(X,G,d+4*p,5),W!=p-1&&t(X,G,d+4*p+4,1))),I[d>>2]=U,$[d>>2]=w[U]}}function y(h,p,k,w,D){D==null&&(D={});const{crc:I}=r,T=e.writeUint,A=e.writeUshort,m=e.writeASCII;let d=8;const U=h.frames.length>1;let R,L=!1,$=33+(U?20:0);if(D.sRGB!=null&&($+=13),D.pHYs!=null&&($+=21),D.iCCP!=null&&(R=pako.deflate(D.iCCP),$+=21+R.length+4),h.ctype==3){for(var G=h.plte.length,Z=0;Z<G;Z++)h.plte[Z]>>>24!=255&&(L=!0);$+=8+3*G+4+(L?8+1*G+4:0)}for(var q=0;q<h.frames.length;q++)U&&($+=38),$+=(B=h.frames[q]).cimg.length+12,q!=0&&($+=4);$+=12;const H=new Uint8Array($),W=[137,80,78,71,13,10,26,10];for(Z=0;Z<8;Z++)H[Z]=W[Z];if(T(H,d,13),d+=4,m(H,d,"IHDR"),d+=4,T(H,d,p),d+=4,T(H,d,k),d+=4,H[d]=h.depth,d++,H[d]=h.ctype,d++,H[d]=0,d++,H[d]=0,d++,H[d]=0,d++,T(H,d,I(H,d-17,17)),d+=4,D.sRGB!=null&&(T(H,d,1),d+=4,m(H,d,"sRGB"),d+=4,H[d]=D.sRGB,d++,T(H,d,I(H,d-5,5)),d+=4),D.iCCP!=null){const X=13+R.length;T(H,d,X),d+=4,m(H,d,"iCCP"),d+=4,m(H,d,"ICC profile"),d+=11,d+=2,H.set(R,d),d+=R.length,T(H,d,I(H,d-(X+4),X+4)),d+=4}if(D.pHYs!=null&&(T(H,d,9),d+=4,m(H,d,"pHYs"),d+=4,T(H,d,D.pHYs[0]),d+=4,T(H,d,D.pHYs[1]),d+=4,H[d]=D.pHYs[2],d++,T(H,d,I(H,d-13,13)),d+=4),U&&(T(H,d,8),d+=4,m(H,d,"acTL"),d+=4,T(H,d,h.frames.length),d+=4,T(H,d,D.loop!=null?D.loop:0),d+=4,T(H,d,I(H,d-12,12)),d+=4),h.ctype==3){for(T(H,d,3*(G=h.plte.length)),d+=4,m(H,d,"PLTE"),d+=4,Z=0;Z<G;Z++){const X=3*Z,ie=h.plte[Z],ce=255&ie,te=ie>>>8&255,se=ie>>>16&255;H[d+X+0]=ce,H[d+X+1]=te,H[d+X+2]=se}if(d+=3*G,T(H,d,I(H,d-3*G-4,3*G+4)),d+=4,L){for(T(H,d,G),d+=4,m(H,d,"tRNS"),d+=4,Z=0;Z<G;Z++)H[d+Z]=h.plte[Z]>>>24&255;d+=G,T(H,d,I(H,d-G-4,G+4)),d+=4}}let Q=0;for(q=0;q<h.frames.length;q++){var B=h.frames[q];U&&(T(H,d,26),d+=4,m(H,d,"fcTL"),d+=4,T(H,d,Q++),d+=4,T(H,d,B.rect.width),d+=4,T(H,d,B.rect.height),d+=4,T(H,d,B.rect.x),d+=4,T(H,d,B.rect.y),d+=4,A(H,d,w[q]),d+=2,A(H,d,1e3),d+=2,H[d]=B.dispose,d++,H[d]=B.blend,d++,T(H,d,I(H,d-30,30)),d+=4);const X=B.cimg;T(H,d,(G=X.length)+(q==0?0:4)),d+=4;const ie=d;m(H,d,q==0?"IDAT":"fdAT"),d+=4,q!=0&&(T(H,d,Q++),d+=4),H.set(X,d),d+=G,T(H,d,I(H,ie,d-ie)),d+=4}return T(H,d,0),d+=4,m(H,d,"IEND"),d+=4,T(H,d,I(H,d-4,4)),d+=4,H.buffer}function b(h,p,k){for(let w=0;w<h.frames.length;w++){const D=h.frames[w];D.rect.width;const I=D.rect.height,T=new Uint8Array(I*D.bpl+I);D.cimg=v(D.img,I,D.bpp,D.bpl,T,p,k)}}function s(h,p,k,w,D){const I=D[0],T=D[1],A=D[2],m=D[3],d=D[4],U=D[5];let R=6,L=8,$=255;for(var G=0;G<h.length;G++){const oe=new Uint8Array(h[G]);for(var Z=oe.length,q=0;q<Z;q+=4)$&=oe[q+3]}const H=$!=255,W=function(ue,pe,ve,Ie,ye,de){const be=[];for(var xe=0;xe<ue.length;xe++){const Ye=new Uint8Array(ue[xe]),Ke=new Uint32Array(Ye.buffer);var Ce;let qe=0,Ve=0,Xe=pe,pt=ve,It=Ie?1:0;if(xe!=0){const Bt=de||Ie||xe==1||be[xe-2].dispose!=0?1:2;let $t=0,Gt=1e9;for(let Mt=0;Mt<Bt;Mt++){var We=new Uint8Array(ue[xe-1-Mt]);const Zt=new Uint32Array(ue[xe-1-Mt]);let st=pe,tt=ve,yt=-1,gt=-1;for(let _t=0;_t<ve;_t++)for(let bt=0;bt<pe;bt++)Ke[Pe=_t*pe+bt]!=Zt[Pe]&&(bt<st&&(st=bt),bt>yt&&(yt=bt),_t<tt&&(tt=_t),_t>gt&&(gt=_t));yt==-1&&(st=tt=yt=gt=0),ye&&((1&st)==1&&st--,(1&tt)==1&&tt--);const Lt=(yt-st+1)*(gt-tt+1);Lt<Gt&&(Gt=Lt,$t=Mt,qe=st,Ve=tt,Xe=yt-st+1,pt=gt-tt+1)}We=new Uint8Array(ue[xe-1-$t]),$t==1&&(be[xe-1].dispose=2),Ce=new Uint8Array(Xe*pt*4),i(We,pe,ve,Ce,Xe,pt,-qe,-Ve,0),It=i(Ye,pe,ve,Ce,Xe,pt,-qe,-Ve,3)?1:0,It==1?l(Ye,pe,ve,Ce,{x:qe,y:Ve,width:Xe,height:pt}):i(Ye,pe,ve,Ce,Xe,pt,-qe,-Ve,0)}else Ce=Ye.slice(0);be.push({rect:{x:qe,y:Ve,width:Xe,height:pt},img:Ce,blend:It,dispose:0})}if(Ie)for(xe=0;xe<be.length;xe++){if((ht=be[xe]).blend==1)continue;const Ye=ht.rect,Ke=be[xe-1].rect,qe=Math.min(Ye.x,Ke.x),Ve=Math.min(Ye.y,Ke.y),Xe={x:qe,y:Ve,width:Math.max(Ye.x+Ye.width,Ke.x+Ke.width)-qe,height:Math.max(Ye.y+Ye.height,Ke.y+Ke.height)-Ve};be[xe-1].dispose=1,xe-1!=0&&o(ue,pe,ve,be,xe-1,Xe,ye),o(ue,pe,ve,be,xe,Xe,ye)}let it=0;if(ue.length!=1)for(var Pe=0;Pe<be.length;Pe++){var ht;it+=(ht=be[Pe]).rect.width*ht.rect.height}return be}(h,p,k,I,T,A),Q={},B=[],X=[];if(w!=0){const oe=[];for(q=0;q<W.length;q++)oe.push(W[q].img.buffer);const ue=function(ye){let de=0;for(var be=0;be<ye.length;be++)de+=ye[be].byteLength;const xe=new Uint8Array(de);let Ce=0;for(be=0;be<ye.length;be++){const We=new Uint8Array(ye[be]),it=We.length;for(let Pe=0;Pe<it;Pe+=4){let ht=We[Pe],Ye=We[Pe+1],Ke=We[Pe+2];const qe=We[Pe+3];qe==0&&(ht=Ye=Ke=0),xe[Ce+Pe]=ht,xe[Ce+Pe+1]=Ye,xe[Ce+Pe+2]=Ke,xe[Ce+Pe+3]=qe}Ce+=it}return xe.buffer}(oe),pe=E(ue,w);for(q=0;q<pe.plte.length;q++)B.push(pe.plte[q].est.rgba);let ve=0;for(q=0;q<W.length;q++){const Ie=(ce=W[q]).img.length;var ie=new Uint8Array(pe.inds.buffer,ve>>2,Ie>>2);X.push(ie);const ye=new Uint8Array(pe.abuf,ve,Ie);U&&u(ce.img,ce.rect.width,ce.rect.height,B,ye,ie),ce.img.set(ye),ve+=Ie}}else for(G=0;G<W.length;G++){var ce=W[G];const oe=new Uint32Array(ce.img.buffer);var te=ce.rect.width;for(Z=oe.length,ie=new Uint8Array(Z),X.push(ie),q=0;q<Z;q++){const ue=oe[q];if(q!=0&&ue==oe[q-1])ie[q]=ie[q-1];else if(q>te&&ue==oe[q-te])ie[q]=ie[q-te];else{let pe=Q[ue];if(pe==null&&(Q[ue]=pe=B.length,B.push(ue),B.length>=300))break;ie[q]=pe}}}const se=B.length;for(se<=256&&d==0&&(L=se<=2?1:se<=4?2:se<=16?4:8,L=Math.max(L,m)),G=0;G<W.length;G++){(ce=W[G]).rect.x,ce.rect.y,te=ce.rect.width;const oe=ce.rect.height;let ue=ce.img;new Uint32Array(ue.buffer);let pe=4*te,ve=4;if(se<=256&&d==0){pe=Math.ceil(L*te/8);var ae=new Uint8Array(pe*oe);const Ie=X[G];for(let ye=0;ye<oe;ye++){q=ye*pe;const de=ye*te;if(L==8)for(var le=0;le<te;le++)ae[q+le]=Ie[de+le];else if(L==4)for(le=0;le<te;le++)ae[q+(le>>1)]|=Ie[de+le]<<4-4*(1&le);else if(L==2)for(le=0;le<te;le++)ae[q+(le>>2)]|=Ie[de+le]<<6-2*(3&le);else if(L==1)for(le=0;le<te;le++)ae[q+(le>>3)]|=Ie[de+le]<<7-1*(7&le)}ue=ae,R=3,ve=1}else if(H==0&&W.length==1){ae=new Uint8Array(te*oe*3);const Ie=te*oe;for(q=0;q<Ie;q++){const ye=3*q,de=4*q;ae[ye]=ue[de],ae[ye+1]=ue[de+1],ae[ye+2]=ue[de+2]}ue=ae,R=2,ve=3,pe=3*te}ce.img=ue,ce.bpl=pe,ce.bpp=ve}return{ctype:R,depth:L,plte:B,frames:W}}function o(h,p,k,w,D,I,T){const A=Uint8Array,m=Uint32Array,d=new A(h[D-1]),U=new m(h[D-1]),R=D+1<h.length?new A(h[D+1]):null,L=new A(h[D]),$=new m(L.buffer);let G=p,Z=k,q=-1,H=-1;for(let Q=0;Q<I.height;Q++)for(let B=0;B<I.width;B++){const X=I.x+B,ie=I.y+Q,ce=ie*p+X,te=$[ce];te==0||w[D-1].dispose==0&&U[ce]==te&&(R==null||R[4*ce+3]!=0)||(X<G&&(G=X),X>q&&(q=X),ie<Z&&(Z=ie),ie>H&&(H=ie))}q==-1&&(G=Z=q=H=0),T&&((1&G)==1&&G--,(1&Z)==1&&Z--),I={x:G,y:Z,width:q-G+1,height:H-Z+1};const W=w[D];W.rect=I,W.blend=1,W.img=new Uint8Array(I.width*I.height*4),w[D-1].dispose==0?(i(d,p,k,W.img,I.width,I.height,-I.x,-I.y,0),l(L,p,k,W.img,I)):i(L,p,k,W.img,I.width,I.height,-I.x,-I.y,0)}function l(h,p,k,w,D){i(h,p,k,w,D.width,D.height,-D.x,-D.y,2)}function v(h,p,k,w,D,I,T){const A=[];let m,d=[0,1,2,3,4];I!=-1?d=[I]:(p*w>5e5||k==1)&&(d=[0]),T&&(m={level:0});const U=lo;for(var R=0;R<d.length;R++){for(let G=0;G<p;G++)g(D,h,G,w,k,d[R]);A.push(U.deflate(D,m))}let L,$=1e9;for(R=0;R<A.length;R++)A[R].length<$&&(L=R,$=A[R].length);return A[L]}function g(h,p,k,w,D,I){const T=k*w;let A=T+k;if(h[A]=I,A++,I==0)if(w<500)for(var m=0;m<w;m++)h[A+m]=p[T+m];else h.set(new Uint8Array(p.buffer,T,w),A);else if(I==1){for(m=0;m<D;m++)h[A+m]=p[T+m];for(m=D;m<w;m++)h[A+m]=p[T+m]-p[T+m-D]+256&255}else if(k==0){for(m=0;m<D;m++)h[A+m]=p[T+m];if(I==2)for(m=D;m<w;m++)h[A+m]=p[T+m];if(I==3)for(m=D;m<w;m++)h[A+m]=p[T+m]-(p[T+m-D]>>1)+256&255;if(I==4)for(m=D;m<w;m++)h[A+m]=p[T+m]-n(p[T+m-D],0,0)+256&255}else{if(I==2)for(m=0;m<w;m++)h[A+m]=p[T+m]+256-p[T+m-w]&255;if(I==3){for(m=0;m<D;m++)h[A+m]=p[T+m]+256-(p[T+m-w]>>1)&255;for(m=D;m<w;m++)h[A+m]=p[T+m]+256-(p[T+m-w]+p[T+m-D]>>1)&255}if(I==4){for(m=0;m<D;m++)h[A+m]=p[T+m]+256-n(0,p[T+m-w],0)&255;for(m=D;m<w;m++)h[A+m]=p[T+m]+256-n(p[T+m-D],p[T+m-w],p[T+m-D-w])&255}}}function E(h,p){const k=new Uint8Array(h),w=k.slice(0),D=new Uint32Array(w.buffer),I=C(w,p),T=I[0],A=I[1],m=k.length,d=new Uint8Array(m>>2);let U;if(k.length<2e7)for(var R=0;R<m;R+=4)U=x(T,L=k[R]*(1/255),$=k[R+1]*(1/255),G=k[R+2]*(1/255),Z=k[R+3]*(1/255)),d[R>>2]=U.ind,D[R>>2]=U.est.rgba;else for(R=0;R<m;R+=4){var L=k[R]*.00392156862745098,$=k[R+1]*(1/255),G=k[R+2]*(1/255),Z=k[R+3]*(1/255);for(U=T;U.left;)U=S(U.est,L,$,G,Z)<=0?U.left:U.right;d[R>>2]=U.ind,D[R>>2]=U.est.rgba}return{abuf:w.buffer,inds:d,plte:A}}function C(h,p,k){k==null&&(k=1e-4);const w=new Uint32Array(h.buffer),D={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};D.bst=P(h,D.i0,D.i1),D.est=_(D.bst);const I=[D];for(;I.length<p;){let A=0,m=0;for(var T=0;T<I.length;T++)I[T].est.L>A&&(A=I[T].est.L,m=T);if(A<k)break;const d=I[m],U=F(h,w,d.i0,d.i1,d.est.e,d.est.eMq255);if(d.i0>=U||d.i1<=U){d.est.L=0;continue}const R={i0:d.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};R.bst=P(h,R.i0,R.i1),R.est=_(R.bst);const L={i0:U,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};for(L.bst={R:[],m:[],N:d.bst.N-R.bst.N},T=0;T<16;T++)L.bst.R[T]=d.bst.R[T]-R.bst.R[T];for(T=0;T<4;T++)L.bst.m[T]=d.bst.m[T]-R.bst.m[T];L.est=_(L.bst),d.left=R,d.right=L,I[m]=R,I.push(L)}for(I.sort((A,m)=>m.bst.N-A.bst.N),T=0;T<I.length;T++)I[T].ind=T;return[D,I]}function x(h,p,k,w,D){if(h.left==null)return h.tdst=function(R,L,$,G,Z){const q=L-R[0],H=$-R[1],W=G-R[2],Q=Z-R[3];return q*q+H*H+W*W+Q*Q}(h.est.q,p,k,w,D),h;const I=S(h.est,p,k,w,D);let T=h.left,A=h.right;I>0&&(T=h.right,A=h.left);const m=x(T,p,k,w,D);if(m.tdst<=I*I)return m;const d=x(A,p,k,w,D);return d.tdst<m.tdst?d:m}function S(h,p,k,w,D){const{e:I}=h;return I[0]*p+I[1]*k+I[2]*w+I[3]*D-h.eMq}function F(h,p,k,w,D,I){for(w-=4;k<w;){for(;M(h,k,D)<=I;)k+=4;for(;M(h,w,D)>I;)w-=4;if(k>=w)break;const T=p[k>>2];p[k>>2]=p[w>>2],p[w>>2]=T,k+=4,w-=4}for(;M(h,k,D)>I;)k-=4;return k+4}function M(h,p,k){return h[p]*k[0]+h[p+1]*k[1]+h[p+2]*k[2]+h[p+3]*k[3]}function P(h,p,k){const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=[0,0,0,0],I=k-p>>2;for(let T=p;T<k;T+=4){const A=h[T]*.00392156862745098,m=h[T+1]*(1/255),d=h[T+2]*(1/255),U=h[T+3]*(1/255);D[0]+=A,D[1]+=m,D[2]+=d,D[3]+=U,w[0]+=A*A,w[1]+=A*m,w[2]+=A*d,w[3]+=A*U,w[5]+=m*m,w[6]+=m*d,w[7]+=m*U,w[10]+=d*d,w[11]+=d*U,w[15]+=U*U}return w[4]=w[1],w[8]=w[2],w[9]=w[6],w[12]=w[3],w[13]=w[7],w[14]=w[11],{R:w,m:D,N:I}}function _(h){const{R:p}=h,{m:k}=h,{N:w}=h,D=k[0],I=k[1],T=k[2],A=k[3],m=w==0?0:1/w,d=[p[0]-D*D*m,p[1]-D*I*m,p[2]-D*T*m,p[3]-D*A*m,p[4]-I*D*m,p[5]-I*I*m,p[6]-I*T*m,p[7]-I*A*m,p[8]-T*D*m,p[9]-T*I*m,p[10]-T*T*m,p[11]-T*A*m,p[12]-A*D*m,p[13]-A*I*m,p[14]-A*T*m,p[15]-A*A*m],U=d,R=O;let L=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,G=0;if(w!=0)for(let q=0;q<16&&(L=R.multVec(U,L),G=Math.sqrt(R.dot(L,L)),L=R.sml(1/G,L),!(q!=0&&Math.abs(G-$)<1e-9));q++)$=G;const Z=[D*m,I*m,T*m,A*m];return{Cov:d,q:Z,e:L,L:$,eMq255:R.dot(R.sml(255,Z),L),eMq:R.dot(L,Z),rgba:(Math.round(255*Z[3])<<24|Math.round(255*Z[2])<<16|Math.round(255*Z[1])<<8|Math.round(255*Z[0])<<0)>>>0}}var O={multVec:(h,p)=>[h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],h[4]*p[0]+h[5]*p[1]+h[6]*p[2]+h[7]*p[3],h[8]*p[0]+h[9]*p[1]+h[10]*p[2]+h[11]*p[3],h[12]*p[0]+h[13]*p[1]+h[14]*p[2]+h[15]*p[3]],dot:(h,p)=>h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],sml:(h,p)=>[h*p[0],h*p[1],h*p[2],h*p[3]]};rt.encode=function(p,k,w,D,I,T,A){D==null&&(D=0),A==null&&(A=!1);const m=s(p,k,w,D,[!1,!1,!1,0,A,!1]);return b(m,-1),y(m,k,w,I,T)},rt.encodeLL=function(p,k,w,D,I,T,A,m){const d={ctype:0+(D==1?0:2)+(I==0?0:4),depth:T,frames:[]},U=(D+I)*T,R=U*k;for(let L=0;L<p.length;L++)d.frames.push({rect:{x:0,y:0,width:k,height:w},img:new Uint8Array(p[L]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(R/8)});return b(d,0,!0),y(d,k,w,A,m)},rt.encode.compress=s,rt.encode.dither=u,rt.quantize=E,rt.quantize.getKDtree=C,rt.quantize.getNearest=x})();const Nn={toArrayBuffer(i,e){const n=i.width,r=i.height,t=n<<2,a=i.getContext("2d").getImageData(0,0,n,r),c=new Uint32Array(a.data.buffer),u=(32*n+31)/32<<2,y=u*r,b=122+y,s=new ArrayBuffer(b),o=new DataView(s),l=1<<20;let v,g,E,C,x=l,S=0,F=0,M=0;function P(h){o.setUint16(F,h,!0),F+=2}function _(h){o.setUint32(F,h,!0),F+=4}function O(h){F+=h}P(19778),_(b),O(4),_(122),_(108),_(n),_(-r>>>0),P(1),P(32),_(3),_(y),_(2835),_(2835),O(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function h(){for(;S<r&&x>0;){for(C=122+S*u,v=0;v<t;)x--,g=c[M++],E=g>>>24,o.setUint32(C+v,g<<8|E),v+=4;S++}M<c.length?(x=l,setTimeout(h,Nn._dly)):e(s)}()},toBlob(i,e){this.toArrayBuffer(i,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Ge={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},co={[Ge.CHROME]:16384,[Ge.FIREFOX]:11180,[Ge.DESKTOP_SAFARI]:16384,[Ge.IE]:8192,[Ge.IOS]:4096,[Ge.ETC]:8192};const Hr=typeof window<"u",Yn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ur=Hr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),uo=(Hr||Yn)&&(ur&&ur.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Ln=(Hr||Yn)&&(ur&&ur.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function zr(i,e,n=Date.now()){return new Promise(r=>{const t=i.split(","),a=t[0].match(/:(.*?);/)[1],c=globalThis.atob(t[1]);let u=c.length;const y=new Uint8Array(u);for(;u--;)y[u]=c.charCodeAt(u);const b=new Blob([y],{type:a});b.name=e,b.lastModified=n,r(b)})}function Hn(i){return new Promise((e,n)=>{const r=new Ln;r.onload=()=>e(r.result),r.onerror=t=>n(t),r.readAsDataURL(i)})}function zn(i){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t=>n(t),r.src=i})}function St(){if(St.cachedResult!==void 0)return St.cachedResult;let i=Ge.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?i=Ge.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?i=Ge.IOS:/Safari/i.test(e)?i=Ge.DESKTOP_SAFARI:/Firefox/i.test(e)?i=Ge.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(i=Ge.IE),St.cachedResult=i,St.cachedResult}function Wn(i,e){const n=St(),r=co[n];let t=i,a=e,c=t*a;const u=t>a?a/t:t/a;for(;c>r*r;){const y=(r+t)/2,b=(r+a)/2;y<b?(a=b,t=b*u):(a=y*u,t=y),c=t*a}return{width:t,height:a}}function vr(i,e){let n,r;try{if(n=new OffscreenCanvas(i,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=i,n.height=e,[n,r]}function qn(i,e){const{width:n,height:r}=Wn(i.width,i.height),[t,a]=vr(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,t.width,t.height)),a.drawImage(i,0,0,t.width,t.height),t}function tr(){return tr.cachedResult!==void 0||(tr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),tr.cachedResult}function dr(i,e={}){return new Promise(function(n,r){let t,a;var c=function(){try{return a=qn(t,e.fileType||i.type),n([t,a])}catch(y){return r(y)}},u=function(y){try{var b=function(s){try{throw s}catch(o){return r(o)}};try{let s;return Hn(i).then(function(o){try{return s=o,zn(s).then(function(l){try{return t=l,function(){try{return c()}catch(v){return r(v)}}()}catch(v){return b(v)}},b)}catch(l){return b(l)}},b)}catch(s){b(s)}}catch(s){return r(s)}};try{if(tr()||[Ge.DESKTOP_SAFARI,Ge.MOBILE_SAFARI].includes(St()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(i).then(function(y){try{return t=y,c()}catch{return u()}},u)}catch{u()}})}function fr(i,e,n,r,t=1){return new Promise(function(a,c){let u;if(e==="image/png"){let b,s,o;return b=i.getContext("2d"),{data:s}=b.getImageData(0,0,i.width,i.height),o=rt.encode([s.buffer],i.width,i.height,4096*t),u=new Blob([o],{type:e}),u.name=n,u.lastModified=r,y.call(this)}{let b=function(){return y.call(this)};if(e==="image/bmp")return new Promise(s=>Nn.toBlob(i,s)).then(function(s){try{return u=s,u.name=n,u.lastModified=r,b.call(this)}catch(o){return c(o)}}.bind(this),c);{let s=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&i instanceof OffscreenCanvas)return i.convertToBlob({type:e,quality:t}).then(function(o){try{return u=o,u.name=n,u.lastModified=r,s.call(this)}catch(l){return c(l)}}.bind(this),c);{let o;return o=i.toDataURL(e,t),zr(o,n,r).then(function(l){try{return u=l,s.call(this)}catch(v){return c(v)}}.bind(this),c)}}}function y(){return a(u)}})}function ct(i){i.width=0,i.height=0}function zt(){return new Promise(function(i,e){let n,r,t,a;return zt.cachedResult!==void 0?i(zt.cachedResult):zr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return n=c,dr(n).then(function(u){try{return r=u[1],fr(r,n.type,n.name,n.lastModified).then(function(y){try{return t=y,ct(r),dr(t).then(function(b){try{return a=b[0],zt.cachedResult=a.width===1&&a.height===2,i(zt.cachedResult)}catch(s){return e(s)}},e)}catch(b){return e(b)}},e)}catch(y){return e(y)}},e)}catch(u){return e(u)}},e)})}function Bn(i){return new Promise((e,n)=>{const r=new Ln;r.onload=t=>{const a=new DataView(t.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const c=a.byteLength;let u=2;for(;u<c;){if(a.getUint16(u+2,!1)<=8)return e(-1);const y=a.getUint16(u,!1);if(u+=2,y==65505){if(a.getUint32(u+=2,!1)!=1165519206)return e(-1);const b=a.getUint16(u+=6,!1)==18761;u+=a.getUint32(u+4,b);const s=a.getUint16(u,b);u+=2;for(let o=0;o<s;o++)if(a.getUint16(u+12*o,b)==274)return e(a.getUint16(u+12*o+8,b))}else{if((65280&y)!=65280)break;u+=a.getUint16(u,!1)}}return e(-1)},r.onerror=t=>n(t),r.readAsArrayBuffer(i)})}function $n(i,e){const{width:n}=i,{height:r}=i,{maxWidthOrHeight:t}=e;let a,c=i;return isFinite(t)&&(n>t||r>t)&&([c,a]=vr(n,r),n>r?(c.width=t,c.height=r/n*t):(c.width=n/r*t,c.height=t),a.drawImage(i,0,0,c.width,c.height),ct(i)),c}function Qn(i,e){const{width:n}=i,{height:r}=i,[t,a]=vr(n,r);switch(e>4&&e<9?(t.width=r,t.height=n):(t.width=n,t.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(i,0,0,n,r),ct(i),t}function mn(i,e,n=0){return new Promise(function(r,t){let a,c,u,y,b,s,o,l,v,g,E,C,x,S,F,M,P,_,O,h;function p(w=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=w,e.onProgress(Math.min(a,100))}function k(w){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(w,a),100),e.onProgress(a)}return a=n,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,p(),dr(i,e).then(function(w){try{return[,y]=w,p(),b=$n(y,e),p(),new Promise(function(D,I){var T;if(!(T=e.exifOrientation))return Bn(i).then(function(m){try{return T=m,A.call(this)}catch(d){return I(d)}}.bind(this),I);function A(){return D(T)}return A.call(this)}).then(function(D){try{return s=D,p(),zt().then(function(I){try{return o=I?b:Qn(b,s),p(),l=e.initialQuality||1,v=e.fileType||i.type,fr(o,v,i.name,i.lastModified,l).then(function(T){try{{let m=function(){if(c--&&(F>u||F>x)){let U,R;return U=h?.95*O.width:O.width,R=h?.95*O.height:O.height,[P,_]=vr(U,R),_.drawImage(O,0,0,U,R),l*=v==="image/png"?.85:.95,fr(P,v,i.name,i.lastModified,l).then(function(L){try{return M=L,ct(O),O=P,F=M.size,k(Math.min(99,Math.floor((S-F)/(S-u)*100))),m}catch($){return t($)}},t)}return[1]},d=function(){return ct(O),ct(P),ct(b),ct(o),ct(y),k(100),r(M)};if(g=T,p(),E=g.size>u,C=g.size>i.size,!E&&!C)return k(100),r(g);var A;return x=i.size,S=g.size,F=S,O=o,h=!e.alwaysKeepResolution&&E,(A=function(U){for(;U;){if(U.then)return void U.then(A,t);try{if(U.pop){if(U.length)return U.pop()?d.call(this):U;U=m}else U=U.call(this)}catch(R){return t(R)}}}.bind(this))(m)}}catch(m){return t(m)}}.bind(this),t)}catch(T){return t(T)}}.bind(this),t)}catch(I){return t(I)}}.bind(this),t)}catch(D){return t(D)}}.bind(this),t)})}const fo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let xr;function vo(i,e){return new Promise((n,r)=>{xr||(xr=function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))}(fo));const t=new Worker(xr);t.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)t.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void t.terminate();n(c.data.file),t.terminate()}else e.onProgress(c.data.progress)}),t.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),t.terminate()}),t.postMessage({file:i,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function He(i,e){return new Promise(function(n,r){let t,a,c,u,y,b;if(t={...e},c=0,{onProgress:u}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=v=>{c=v,typeof u=="function"&&u(c)},!(i instanceof Blob||i instanceof uo))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(i.type))return r(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||b)return mn(i,t).then(function(v){try{return a=v,l.call(this)}catch(g){return r(g)}}.bind(this),r);var s=function(){try{return l.call(this)}catch(v){return r(v)}}.bind(this),o=function(v){try{return mn(i,t).then(function(g){try{return a=g,s()}catch(E){return r(E)}},r)}catch(g){return r(g)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",vo(i,t).then(function(v){try{return a=v,s()}catch{return o()}},o)}catch{o()}function l(){try{a.name=i.name,a.lastModified=i.lastModified}catch{}try{t.preserveExif&&i.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===i.type)&&(a=Pn(i,a))}catch{}return n(a)}})}He.getDataUrlFromFile=Hn,He.getFilefromDataUrl=zr,He.loadImage=zn,He.drawImageInCanvas=qn,He.drawFileInCanvas=dr,He.canvasToFile=fr,He.getExifOrientation=Bn,He.handleMaxWidthOrHeight=$n,He.followExifOrientation=Qn,He.cleanupCanvasMemory=ct,He.isAutoOrientationInBrowser=zt,He.approximateBelowMaximumCanvasSizeOfBrowser=Wn,He.copyExifWithoutOrientation=Pn,He.getBrowserName=St,He.version="2.0.2";const mo={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function ho(i,e,n={},r){const t={...mo,...n};try{let a=i;if(i.type.startsWith("image/")&&i.size>t.compressionThresholdMB*1024*1024){r?.("Compressing image...");try{const y=await He(i,{maxSizeMB:t.maxSizeMB,maxWidthOrHeight:t.maxWidthOrHeight,initialQuality:t.initialQuality,useWebWorker:t.useWebWorker});a=y;const b=(i.size/(1024*1024)).toFixed(2),s=(y.size/(1024*1024)).toFixed(2),o=((1-y.size/i.size)*100).toFixed(0);console.log(`Image compressed: ${b}MB → ${s}MB (${o}% smaller)`)}catch(y){console.warn("Image compression failed, uploading original:",y)}}return r?.("Uploading file..."),{success:!0,attachment:await Cn(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function po(i){try{const e=Nr(i.url);return await Rn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function yo(i,e,n){return i.map(r=>r.id===e?{...r,name:n}:r)}function go(i,e=5){const n=i.type.startsWith("image/"),r=e*1024*1024;if(!n&&i.size>r){const t=(i.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${t}MB)`}}return{valid:!0}}function _o(i){return{uploadAttachment:(e,n,r)=>ho(e,n,i,r),removeAttachment:po,updateAttachmentName:yo,validateFile:go}}function hn(i,e){const[n,r]=e.split(":").map(Number);let t=Mi(i,n);return t=Ci(t,r),t}function pn(i){return Array.from(new Set(i)).sort((e,n)=>e-n)}function bo(i,e){if(e.includes(i))return 0;const n=e.find(r=>r>i);return n!==void 0?n-i:7-i+e[0]}function wo(i,e,n){const r=new Date(i),t=vt(r,Ne),a=t.getDay(),c=bo(a,n);if(c===0)return{start_time:i,end_time:e};const u=Ut(t,c),y=Tt(u,Ne);let b=e;if(e){const s=vt(new Date(e),Ne),o=Ut(s,c);b=Tt(o,Ne).toISOString()}return{start_time:y.toISOString(),end_time:b}}function jn({eventItem:i,dateInput:e,startTimeInput:n,endTimeInput:r,attachments:t,isRecurring:a,recurrenceFrequency:c,recurrenceInterval:u,recurringDays:y,recurrenceEndDate:b,hasEndDate:s,monthlyType:o}){const l=i.category?{category:i.category}:void 0,v={title:i.title,description:i.description,location:i.location,event_type:i.event_type,meta_data:l,attachments:t.length>0?t:null};if(i.event_type!=="calendar_event")return{...v,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const g=e?or(e,"yyyy-MM-dd",new Date):new Date;let E,C;if(i.is_all_day){const S=Tt(g,Ne);E=S.toISOString(),C=S.toISOString()}else{const S=new Date(g.getTime()),F=new Date(g.getTime()),M=n?hn(S,n):g,P=r?hn(F,r):g;E=Tt(M,Ne).toISOString(),C=Tt(P,Ne).toISOString()}const x={...v,start_time:E,end_time:C,is_all_day:i.is_all_day};if(a&&x.start_time){if(c==="weekly"&&y.length>0){const F=pn(y),M=wo(x.start_time,x.end_time,F);x.start_time=M.start_time,x.end_time=M.end_time}if(c==="daily"||c==="yearly"||c==="weekly"&&y.length>0||c==="monthly"){const{recurrence_rule:F,recurrence_end_date:M}=Lr({frequency:c,interval:u,recurringDays:c==="weekly"?pn(y):[],recurrenceEndDate:b,hasEndDate:s,monthlyType:o,startTime:x.start_time});x.recurrence_rule=F,x.recurrence_end_date=M}else x.recurrence_rule=void 0,x.recurrence_end_date=void 0}else x.recurrence_rule=void 0,x.recurrence_end_date=void 0;return x}async function xo({id:i,...e}){const n=jn(e);return i?{action:"update",event:await At(i,n)}:{action:"create",event:await Ur(n)}}async function Do(i){await Pr(i)}function ko({event:i,newDate:e}){const n=i.start_time?new Date(i.start_time):new Date,r=i.end_time?new Date(i.end_time):new Date,[t,a,c]=e.split("-").map(Number),u=new Date(n);u.setFullYear(t,a-1,c);const y=new Date(r);return y.setFullYear(t,a-1,c),{...i,id:void 0,title:`CLONED - ${i.title}`,start_time:u.toISOString(),end_time:y.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function Eo(i,e,n){const r=await Yt(i);if(!r)throw new Error("Event not found");const t=r.recurrence_exceptions||[];t.includes(e)||t.push(e);const a=r.recurrence_overrides||{};a[e]={title:n.title,description:n.description,location:n.location,start_time:n.start_time,end_time:n.end_time,is_all_day:n.is_all_day,meta_data:n.meta_data},await At(i,{recurrence_exceptions:t,recurrence_overrides:a})}async function To(i,e,n){const r=await Yt(i);if(!r||!r.recurrence_rule||!r.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:t,generateRecurrenceRule:a}=await kr(async()=>{const{parseRecurrenceRule:F,generateRecurrenceRule:M}=await Promise.resolve().then(()=>Ir);return{parseRecurrenceRule:F,generateRecurrenceRule:M}},void 0,import.meta.url),c=t(r.recurrence_rule,r.recurrence_end_date);if(!c)throw new Error("Failed to parse recurrence rule");const u=Me(new Date(r.start_time),"yyyy-MM-dd"),y=or(e,"yyyy-MM-dd",new Date),b=or(u,"yyyy-MM-dd",new Date);if(y<=b)return await At(i,n),i;const s=Ut(y,-1),o=Me(s,"yyyy-MM-dd"),{recurrence_rule:l,recurrence_end_date:v}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:o,hasEndDate:!0,monthlyType:c.monthlyType,startTime:r.start_time});await At(i,{recurrence_rule:l,recurrence_end_date:v});const g=c.hasEndDate?c.recurrenceEndDate:"",{recurrence_rule:E,recurrence_end_date:C}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:g,hasEndDate:c.hasEndDate,monthlyType:c.monthlyType,startTime:n.start_time||r.start_time}),x={...n,recurrence_rule:E,recurrence_end_date:C};return(await Ur(x))?.id||0}async function Ao(i,e){const n=await Yt(i);if(!n)throw new Error("Event not found");const r={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:n.start_time,end_time:n.end_time,recurrence_rule:n.recurrence_rule,recurrence_end_date:n.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await At(i,r)}async function Io(i,e){const n=await Yt(i);if(!n)throw new Error("Event not found");const r=n.recurrence_exceptions||[];r.includes(e)||r.push(e);const t=n.recurrence_overrides||{};t[e]&&delete t[e],await At(i,{recurrence_exceptions:r,recurrence_overrides:t})}async function Mo(i,e){const n=await Yt(i);if(!n||!n.recurrence_rule||!n.start_time)throw new Error("Event not found or is not recurring");const r=or(e,"yyyy-MM-dd",new Date),t=Ut(r,-1),a=Me(t,"yyyy-MM-dd"),{parseRecurrenceRule:c}=await kr(async()=>{const{parseRecurrenceRule:o}=await Promise.resolve().then(()=>Ir);return{parseRecurrenceRule:o}},void 0,import.meta.url),u=c(n.recurrence_rule,n.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:y}=await kr(async()=>{const{generateRecurrenceRule:o}=await Promise.resolve().then(()=>Ir);return{generateRecurrenceRule:o}},void 0,import.meta.url),{recurrence_rule:b,recurrence_end_date:s}=y({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:n.start_time});await At(i,{recurrence_rule:b,recurrence_end_date:s})}async function Co(i){await Pr(i)}function Ro(){return{saveEvent:xo,deleteEventById:Do,cloneEventForDate:ko,buildEventPayload:jn,saveSingleInstance:Eo,saveFutureInstances:To,saveAllInstances:Ao,deleteSingleInstance:Io,deleteFutureInstances:Mo,deleteAllInstances:Co}}var Fo=re('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Oo=re('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),So=re("<!> <!>",1),Uo=re('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Po=re("<span>Save</span>"),No=re("<span>Create</span>"),Yo=re('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Lo=re('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div></div> <!> <!>',1);function xl(i,e){Je(e,!1);const n=()=>er(l,"$validationErrors",r),[r,t]=yn(),a=he(),c=he(),u=he();let y=me(e,"name",8,""),b=me(e,"drawerId",8,""),s=me(e,"eventItem",12,Da);const{actions:{reload:o}}=Fn(),{validationErrors:l,validate:v,getErrorMessages:g,clearErrors:E}=ao(),{parseRecurrenceRule:C}=Un(),{uploadAttachment:x,removeAttachment:S,updateAttachmentName:F,validateFile:M}=_o(),{saveEvent:P,deleteEventById:_,cloneEventForDate:O,buildEventPayload:h,saveSingleInstance:p,saveFutureInstances:k,saveAllInstances:w,deleteSingleInstance:D,deleteFutureInstances:I,deleteAllInstances:T}=Ro();let A=he(!1),m=he(!1),d=he(!1),U=he("weekly"),R=he(1),L=he([]),$=he(""),G=he(!0),Z=he("date"),q=he([]),H=he(!1),W=he(!1),Q=he(void 0),B=he(void 0),X=he(!1),ie=he(null),ce=he(!1),te=he(null),se=he(0),ae=he({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),le=he({message:"",type:"info"}),oe=he(""),ue=he(""),pe=he(""),ve=he({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"});const Ie=(ne,K)=>ne.length===K.length&&ne.every((De,Ae)=>De===K[Ae]),ye=()=>{const ne=`[data-bs-target="#${b()}"]`,K=document.querySelector(ne);K&&K.click()},de=(ne,K=0,De="info")=>{pr(le,f(le).message=ne),pr(le,f(le).type=De),K&&setTimeout(()=>{pr(le,f(le).message="")},K)},be=async ne=>{const K=ne.detail;if(!K)return;const De=M(K);if(!De.valid){de(De.error??"Invalid file selected",7e3,"danger");return}z(m,!0);try{const Ae=await x(K,f(a)??"temp",Ct=>de(Ct));if(!Ae.success||!Ae.attachment)throw new Error(Ae.error??"Upload failed");z(q,[...f(q),Ae.attachment]),z(H,!0),de("File uploaded!",3e3,"success")}catch(Ae){console.error("File upload failed:",Ae),de("Failed to upload file. Please try again.",7e3,"danger")}finally{z(m,!1)}},xe=ne=>{const{attachment:K,newName:De}=ne.detail;z(q,F(f(q),K.id,De)),z(H,!0),de("Attachment name updated!",3e3,"success")},Ce=async ne=>{const K=ne.detail;if(K){z(m,!0);try{if(!await S(K))throw new Error("Failed to remove attachment");z(q,f(q).filter(Ae=>Ae.id!==K.id)),z(H,!0),de("Attachment removed!",3e3,"success")}catch(De){console.error("Failed to remove attachment:",De),de("Failed to remove attachment. Please try again.",7e3,"danger")}finally{z(m,!1)}}},We=async()=>{if(!f(a)){de("ID is not defined",0,"danger");return}try{await _(f(a)),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{z(A,!1),z(ae,{...s(),id:f(a)}),de("Event Deleted",3e3,"success"),ye()},800)}catch(ne){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{z(A,!1),console.error("Delete failed:",ne),de("Failed to delete event. Please try again.",7e3,"danger")},800)}},it=()=>!!s().recurrence_rule,Pe=async()=>{const ne=f(a)||s().meta_data?.recurring_parent_id;if(ne&&f(W)&&f(B)&&f(Q)){if(z(te,null),z(ce,!0),await new Promise(K=>{const De=setInterval(()=>{f(ce)||(clearInterval(De),K())},50)}),!f(te))return;z(A,!0);try{f(te)==="single"?await D(ne,f(Q)):f(te)==="future"?await I(ne,f(Q)):f(te)==="all"&&await T(ne),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{z(A,!1),z(ae,{...s(),id:f(a)}),de("Event Deleted",3e3,"success"),ye()},800)}catch(K){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{z(A,!1),console.error("Delete failed:",K),de("Failed to delete event. Please try again.",7e3,"danger")},800)}}else z(A,!0),Ia({title:"Delete Confirmation",message:it()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:K=>{K?We():z(A,!1)}})},ht=ne=>{if(f(a))try{const K=O({event:s(),newDate:ne});wt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),de("Event cloned. Review and click Create to save.",5e3,"success"),s(K),z(oe,K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),z(ue,K.start_time?Me(new Date(K.start_time),"HH:mm"):""),z(pe,K.end_time?Me(new Date(K.end_time),"HH:mm"):""),z(q,[]),z(d,!1),z(L,[]),z($,""),z(G,!0),z(H,!0),z(se,void 0),z(ae,{...K}),z(ve,{dateInput:f(oe),startTimeInput:f(ue),endTimeInput:f(pe),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(K){console.error("Clone failed:",K),de("Failed to clone event. Please try again.",7e3,"danger")}},Ye=()=>{ro({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:f(oe),callback:(ne,K)=>{ne&&K&&ht(K)}})},Ke=async()=>{if(f(a)&&!f(u)){de("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await v({title:s().title,event_type:s().event_type,category:s().category??"",description:s().description,location:s().location,is_all_day:s().is_all_day,dateInput:f(oe),startTimeInput:f(ue),endTimeInput:f(pe),isRecurring:f(d),recurrenceFrequency:f(U),recurringDays:f(d)?f(L):[],recurrenceEndDate:f(d)?f($):void 0,hasEndDate:f(G)})){const De=g();De.length&&de(De.join(". ")+".  Please address accordingly.",0,"danger");return}const K=f(a)||s().meta_data?.recurring_parent_id;if(K&&f(W)&&f(B)&&f(Q)){if(z(ie,null),z(X,!0),await new Promise(Ae=>{const Ct=setInterval(()=>{f(X)||(clearInterval(Ct),Ae())},100)}),!f(ie)||f(A))return;de("Saving ..."),z(A,!0);const De=h({eventItem:s(),dateInput:f(oe),startTimeInput:f(ue),endTimeInput:f(pe),attachments:f(q),isRecurring:f(c)&&f(d),recurrenceFrequency:f(U),recurrenceInterval:f(R),recurringDays:f(d)?f(L):[],recurrenceEndDate:f(d)?f($):"",hasEndDate:f(G),monthlyType:f(Z)});try{let Ae;f(ie)==="single"?await p(K,f(Q),De):f(ie)==="future"?Ae=await k(K,f(Q),De):f(ie)==="all"&&await w(K,De),await o(),await da(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),z(A,!1),Ae&&s({...s(),id:Ae}),s(s().attachments=f(q),!0),z(ae,{...s(),id:Ae||K}),z(H,!1),de("Saved",3e3,"success"),ye()}catch(Ae){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{z(A,!1),console.error("Save failed:",Ae),de("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(f(A))return;de("Saving ..."),z(A,!0);try{const De=await P({id:f(a),eventItem:s(),dateInput:f(oe),startTimeInput:f(ue),endTimeInput:f(pe),attachments:f(q),isRecurring:f(c)&&f(d),recurrenceFrequency:f(U),recurrenceInterval:f(R),recurringDays:f(d)?f(L):[],recurrenceEndDate:f(d)?f($):"",hasEndDate:f(G),monthlyType:f(Z)});De.event&&s({...s(),...De.event}),s(s().attachments=f(q),!0),await o(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),setTimeout(()=>{z(A,!1),z(ae,{...s(),id:f(a)}),z(H,!1),de("Saved",3e3,"success"),ye()},800)}catch(De){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{z(A,!1),console.error("Save failed:",De),de("Failed to save event. Please try again.",7e3,"danger")},800)}}};Le(()=>ee(s()),()=>{z(a,s().id)}),Le(()=>ee(s()),()=>{z(c,s().event_type==="calendar_event")}),Le(()=>(f(c),f(d),f(L),f($)),()=>{!f(c)&&(f(d)||f(L).length>0||f($))&&(z(d,!1),z(U,"weekly"),z(R,1),z(L,[]),z($,""),z(G,!0),z(Z,"date"))}),Le(()=>(ee(s()),f(se),f(ae),f(H),f(oe),f(ue),f(pe),f(d),f(U),f(R),f(L),f($),f(G),f(Z)),()=>{if(s()?.id!==f(se)||s()?.start_time!==f(ae).start_time||s()?.meta_data?.recurring_instance_index!==f(ae).meta_data?.recurring_instance_index){z(A,!0);const ne=f(H),K=s();setTimeout(()=>{const De=K.event_type==="calendar_event";if(z(oe,De&&K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),z(ue,De&&K.start_time?Me(new Date(K.start_time),"HH:mm"):""),z(pe,De&&K.end_time?Me(new Date(K.end_time),"HH:mm"):""),ne||z(q,K.attachments?[...K.attachments]:[]),K.meta_data?.recurring_instance&&K.start_time?(z(B,K.recurrence_rule),z(W,!0),z(Q,Me(new Date(K.start_time),"yyyy-MM-dd"))):(z(B,void 0),z(W,!1),z(Q,void 0)),K.recurrence_rule){const Ae=C(K.recurrence_rule,K.recurrence_end_date);Ae?(z(d,!0),z(U,Ae.frequency),z(R,Ae.interval),z(L,Ae.recurringDays),z($,Ae.recurrenceEndDate),z(G,Ae.hasEndDate),z(Z,Ae.monthlyType)):(z(d,!1),z(U,"weekly"),z(R,1),z(L,[]),z($,""),z(G,!0),z(Z,"date"))}else z(d,!1),z(U,"weekly"),z(R,1),z(L,[]),z($,""),z(G,!0),z(Z,"date");z(se,K.id),z(ae,{...K}),z(A,!1),z(H,!1),E(),z(ve,{dateInput:f(oe),startTimeInput:f(ue),endTimeInput:f(pe),isRecurring:f(d),recurrenceFrequency:f(U),recurrenceInterval:f(R),recurringDays:[...f(L)],recurrenceEndDate:f($),hasEndDate:f(G),monthlyType:f(Z)})},200)}}),Le(()=>(f(ae),ee(s()),f(q),f(oe),f(ve),f(ue),f(pe),f(d),f(U),f(R),f(L),f($),f(G),f(Z)),()=>{z(u,f(ae).title!==s().title||f(ae).start_time!==s().start_time||f(ae).end_time!==s().end_time||f(ae).description!==s().description||f(ae).location!==s().location||f(ae).category!==s().category||f(ae).is_all_day!==s().is_all_day||JSON.stringify(f(q))!==JSON.stringify(s().attachments||[])||f(ae).recurrence_rule!==s().recurrence_rule||f(ae).recurrence_end_date!==s().recurrence_end_date||f(oe)!==f(ve).dateInput||f(ue)!==f(ve).startTimeInput||f(pe)!==f(ve).endTimeInput||f(d)!==f(ve).isRecurring||f(U)!==f(ve).recurrenceFrequency||f(R)!==f(ve).recurrenceInterval||!Ie(f(L),f(ve).recurringDays)||f($)!==f(ve).recurrenceEndDate||f(G)!==f(ve).hasEndDate||f(Z)!==f(ve).monthlyType)}),Pt(),at();var qe=Lo(),Ve=ze(qe),Xe=Y(Ve);{var pt=ne=>{var K=Fo();J(ne,K)};fe(Xe,ne=>{ee(s()),f(a),V(()=>s().recurrence_rule&&f(a))&&ne(pt)})}var It=j(Xe,2),Bt=Y(It),$t=j(Y(Bt),2);{var Gt=ne=>{var K=Oo();ge(()=>K.disabled=f(A)||f(m)),we("click",K,Ye),J(ne,K)};fe($t,ne=>{f(a)&&ne(Gt)})}N(Bt);var Mt=j(Bt,2);{let ne=Ht(()=>f(A)||f(m));Es(Mt,{get disabled(){return f(ne)},get name(){return y()},get validationErrors(){return n()},get title(){return s().title},set title(K){s(s().title=K,!0)},get eventType(){return s().event_type},set eventType(K){s(s().event_type=K,!0)},get category(){return s().category},set category(K){s(s().category=K,!0)},get description(){return s().description},set description(K){s(s().description=K,!0)},$$legacy:!0})}N(It);var Zt=j(It,2);{var st=ne=>{var K=So(),De=ze(K);{let Ct=Ht(()=>f(A)||f(m));Rs(De,{get disabled(){return f(Ct)},get name(){return y()},get validationErrors(){return n()},get dateInput(){return f(oe)},set dateInput(Oe){z(oe,Oe)},get startTimeInput(){return f(ue)},set startTimeInput(Oe){z(ue,Oe)},get endTimeInput(){return f(pe)},set endTimeInput(Oe){z(pe,Oe)},get isAllDay(){return s().is_all_day},set isAllDay(Oe){s(s().is_all_day=Oe,!0)},$$legacy:!0})}var Ae=j(De,2);{let Ct=Ht(()=>f(A)||f(m));Ls(Ae,{get disabled(){return f(Ct)},get name(){return y()},get validationErrors(){return n()},get isRecurring(){return f(d)},set isRecurring(Oe){z(d,Oe)},get recurrenceFrequency(){return f(U)},set recurrenceFrequency(Oe){z(U,Oe)},get recurrenceInterval(){return f(R)},set recurrenceInterval(Oe){z(R,Oe)},get recurringDays(){return f(L)},set recurringDays(Oe){z(L,Oe)},get recurrenceEndDate(){return f($)},set recurrenceEndDate(Oe){z($,Oe)},get monthlyType(){return f(Z)},set monthlyType(Oe){z(Z,Oe)},get dateInput(){return f(oe)},set dateInput(Oe){z(oe,Oe)},$$legacy:!0})}J(ne,K)};fe(Zt,ne=>{f(c)&&ne(st)})}var tt=j(Zt,2);{let ne=Ht(()=>f(A)||f(m));Zs(tt,{get attachments(){return f(q)},get uploadingFile(){return f(m)},get disabled(){return f(ne)},$$events:{upload:be,edit:xe,remove:Ce}})}var yt=j(tt,2);{let ne=Ht(()=>f(A)||f(m)),K=Ht(()=>`${y()}-location`);zs(yt,{get disabled(){return f(ne)},get name(){return f(K)},get value(){return s().location},set value(De){s(s().location=De,!0)},$$legacy:!0})}var gt=j(yt,2),Lt=Y(gt),_t=Y(Lt);{var bt=ne=>{var K=Uo();ge(()=>K.disabled=f(A)||f(m)),we("click",K,Pe),J(ne,K)};fe(_t,ne=>{(f(a)||f(W))&&ne(bt)})}N(Lt);var Wr=j(Lt,2),mr=Y(Wr),Kt=j(mr,2),qr=Y(Kt);{var Gn=ne=>{var K=Po();J(ne,K)},Zn=ne=>{var K=No();J(ne,K)};fe(qr,ne=>{f(a)||f(W)?ne(Gn):ne(Zn,!1)})}var Kn=j(qr,2);{var Vn=ne=>{var K=Yo();J(ne,K)};fe(Kn,ne=>{f(u)&&ne(Vn)})}N(Kt),N(Wr),N(gt);var Br=j(gt,2),Vt=Y(Br),Xn=Y(Vt,!0);N(Vt);var hr=j(Vt,2);let $r;var Jn=Y(hr);wn(Jn,{size:"xs"}),N(hr),N(Br),N(Ve);var Qr=j(Ve,2);{var ea=ne=>{Vs(ne,{get eventTitle(){return ee(s()),V(()=>s().title)},get occurrenceDate(){return f(Q)},callback:K=>{z(ie,K),z(X,!1)}})};fe(Qr,ne=>{f(X)&&f(Q)&&ne(ea)})}var ta=j(Qr,2);{var ra=ne=>{Js(ne,{get eventTitle(){return ee(s()),V(()=>s().title)},get occurrenceDate(){return f(Q)},callback:K=>{z(te,K),z(ce,!1)}})};fe(ta,ne=>{f(ce)&&f(Q)&&ne(ra)})}ge(()=>{mr.disabled=f(A)||f(m),Kt.disabled=f(A)||f(m),Qe(Vt,1,`fw-lighter fst-italic text-${f(le),V(()=>f(le).type)??""}`),_e(Xn,(f(le),V(()=>f(le).message))),$r=Qe(hr,1,"",null,$r,{"d-none":!f(A)})}),we("click",mr,ye),we("click",Kt,Ke),J(i,qe),et(),t()}var Ho=re('<span class="text-muted">•</span>'),zo=re("<span> </span> <!>",1),Wo=re('<span class="text-muted">•</span>'),qo=re('<em class="small fw-lighter svelte-1bpzga2"> </em> <!>',1),Bo=re('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),$o=re('<div class="small svelte-1bpzga2"><!></div>'),Qo=re('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),jo=re('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Go=re('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Zo=re('<div class="details-container svelte-1bpzga2"><!> <!></div>'),Ko=re('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),Vo=re('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"> </div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Dl(i,e){Je(e,!1);const n=he(),r=he();let t=me(e,"item",8),a=me(e,"showDetails",12,!1);const c=w=>w<1024?w+" B":w<1024*1024?(w/1024).toFixed(1)+" KB":(w/(1024*1024)).toFixed(1)+" MB",u=w=>w.startsWith("image/"),y=w=>{window.open(w,"_blank")},b=()=>{f(r)&&a(!a())},s=w=>{f(r)&&(w.key==="Enter"||w.key===" ")&&b()};Le(()=>ee(t()),()=>{z(n,t().attachments&&t().attachments.length>0?t().attachments.find(w=>u(w.type)):void 0)}),Le(()=>ee(t()),()=>{z(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Pt(),at();var o=Vo(),l=Y(o),v=Y(l),g=Y(v),E=Y(g,!0);N(g);var C=j(g,2),x=Y(C);{var S=w=>{var D=zo(),I=ze(D),T=Y(I,!0);N(I);var A=j(I,2);{var m=d=>{var U=Ho();J(d,U)};fe(A,d=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&d(m)})}ge((d,U)=>{Qe(I,1,`badge rounded-pill bg-color-${d??""}`,"svelte-1bpzga2"),_e(T,U)},[()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.color_number)),()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.label))]),J(w,D)};fe(x,w=>{ee(t()),V(()=>t()?.meta_data?.category)&&w(S)})}var F=j(x,2);{var M=w=>{var D=qo(),I=ze(D),T=Y(I,!0);N(I);var A=j(I,2);{var m=d=>{var U=Wo();J(d,U)};fe(A,d=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&d(m)})}ge(()=>_e(T,(ee(t()),V(()=>t().location)))),J(w,D)};fe(F,w=>{ee(t()),V(()=>t().location)&&w(M)})}var P=j(F,2);{var _=w=>{var D=Bo(),I=Y(D);{var T=m=>{var d=nr("Hide");J(m,d)},A=m=>{var d=nr("Show");J(m,d)};fe(I,m=>{a()?m(T):m(A,!1)})}nt(),N(D),J(w,D)};fe(P,w=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&w(_)})}N(C);var O=j(C,2);{var h=w=>{var D=Zo(),I=Y(D);{var T=d=>{var U=$o(),R=Y(U);Dn(R,()=>(ee(t()),V(()=>t().description))),N(U),J(d,U)};fe(I,d=>{ee(t()),V(()=>t().description)&&d(T)})}var A=j(I,2);{var m=d=>{var U=Go(),R=j(Y(U),2);qt(R,5,()=>(ee(t()),V(()=>t().attachments)),L=>L.id,(L,$)=>{var G=Dr(),Z=ze(G);{var q=W=>{var Q=Qo(),B=Y(Q),X=Y(B);N(B);var ie=j(B,2),ce=Y(ie),te=Y(ce,!0);N(ce),N(ie),N(Q),ge(()=>{ke(B,"title",`Open ${f($),V(()=>f($).name)??""}`),ke(X,"src",(f($),V(()=>f($).url))),ke(X,"alt",(f($),V(()=>f($).name))),_e(te,(f($),V(()=>f($).name)))}),we("click",B,ir(()=>y(f($).url))),J(W,Q)},H=W=>{var Q=jo(),B=j(Y(Q),2),X=Y(B,!0);N(B);var ie=j(B,2),ce=Y(ie);N(ie),N(Q),ge(te=>{ke(Q,"title",`Open ${f($),V(()=>f($).name)??""}`),_e(X,(f($),V(()=>f($).name))),_e(ce,`(${te??""})`)},[()=>(f($),V(()=>c(f($).size)))]),we("click",Q,ir(()=>y(f($).url))),J(W,Q)};fe(Z,W=>{f($),V(()=>u(f($).type))?W(q):W(H,!1)})}J(L,G)}),N(R),N(U),J(d,U)};fe(A,d=>{ee(t()),V(()=>t().attachments&&t().attachments.length>0)&&d(m)})}N(D),J(w,D)};fe(O,w=>{a()&&w(h)})}N(v);var p=j(v,2);{var k=w=>{var D=Ko(),I=Y(D);N(D),ge(()=>{ke(I,"src",(f(n),V(()=>f(n).url))),ke(I,"alt",(f(n),V(()=>f(n).name)))}),J(w,D)};fe(p,w=>{f(n)&&w(k)})}N(l),N(o),ge(()=>{gn(o,f(r)?"cursor: pointer;":""),_e(E,(ee(t()),V(()=>t().title)))}),we("keydown",o,s),we("click",o,b),J(i,o),et()}export{xl as A,bl as E,wl as a,Dl as b,Qt as c,Zi as d,Ft as e,Ut as f,Fn as g,_l as h,or as p};
