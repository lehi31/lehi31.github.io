import{s as Ue,r as qe,n as ae,j as be,b as We,o as rt}from"./scheduler.C8jfK40o.js";import{S as Oe,i as Re,e as v,s as S,n as X,c as ge,b,d as T,p as z,g as V,f as p,q as J,h as Ee,j as c,y as Z,k as H,r as u,D as Q,m as ke,C as j,u as de,t as $,a as x,l as Ce,z as ue,w as ot,v as ft,x as ut,A as ht,H as vt,I as bt}from"./index.BU5kBEy5.js";import{g as ct,F as dt}from"./feature-flag.state.7IHCHjqg.js";import{t as _t,f as Se,p as Ve,e as je}from"./Header.C-19q81w.js";import{S as mt}from"./Spinner.j7BRAMS9.js";import{g as pt,t as Ae,u as gt,c as Et,d as kt,A as Ct}from"./announcements.data.D0jdnfp5.js";import{t as He,D as It,v as yt}from"./Drawer.CHD6p1Z0.js";import{c as Dt}from"./confirm.service.DrhzGlBb.js";import{A as Le,B as Ye}from"./app.state.CXhL7jus.js";import{p as Ze}from"./parse.D21_2vyS.js";function Tt(n,e){const t=_t(n);return t.setHours(e),t}function wt(n,e){const t=_t(n);return t.setMinutes(e),t}function Qe(n){let e,t,l="Date*",a,s,f,o,r;return{c(){e=v("div"),t=v("div"),t.textContent=l,a=S(),s=v("input"),this.h()},l(m){e=b(m,"DIV",{class:!0});var h=T(e);t=b(h,"DIV",{"data-svelte-h":!0}),z(t)!=="svelte-1992pd0"&&(t.textContent=l),a=V(h),s=b(h,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),h.forEach(p),this.h()},h(){c(s,"name",f=n[1]+"-start-time"),c(s,"type","date"),c(s,"class","form-control"),c(s,"placeholder","Event title"),s.disabled=n[7],s.required=!0,Z(s,"is-invalid",n[4]),c(e,"class","d-flex flex-column gap-2")},m(m,h){H(m,e,h),u(e,t),u(e,a),u(e,s),n[26](s),Q(s,n[16]),o||(r=[j(s,"focus",n[27]),j(s,"input",n[28])],o=!0)},p(m,h){h[0]&2&&f!==(f=m[1]+"-start-time")&&c(s,"name",f),h[0]&128&&(s.disabled=m[7]),h[0]&65536&&Q(s,m[16]),h[0]&16&&Z(s,"is-invalid",m[4])},d(m){m&&p(e),n[26](null),o=!1,qe(r)}}}function Xe(n){let e,t,l,a,s,f,o,r,m,h,E,_,d=!n[0].is_all_day&&Je(n);return{c(){e=v("div"),t=v("div"),l=v("input"),s=S(),f=v("label"),o=X("All Day Event"),m=S(),d&&d.c(),h=ue(),this.h()},l(i){e=b(i,"DIV",{});var D=T(e);t=b(D,"DIV",{class:!0});var g=T(t);l=b(g,"INPUT",{class:!0,type:!0,id:!0}),s=V(g),f=b(g,"LABEL",{class:!0,for:!0});var k=T(f);o=J(k,"All Day Event"),k.forEach(p),g.forEach(p),D.forEach(p),m=V(i),d&&d.l(i),h=ue(),this.h()},h(){c(l,"class","form-check-input"),c(l,"type","checkbox"),c(l,"id",a=n[1]+"-all-day-check"),c(f,"class","form-check-label"),c(f,"for",r=n[1]+"-all-day-check"),c(t,"class","form-check d-flex align-items-center gap-2")},m(i,D){H(i,e,D),u(e,t),u(t,l),l.checked=n[0].is_all_day,u(t,s),u(t,f),u(f,o),H(i,m,D),d&&d.m(i,D),H(i,h,D),E||(_=j(l,"change",n[29]),E=!0)},p(i,D){D[0]&2&&a!==(a=i[1]+"-all-day-check")&&c(l,"id",a),D[0]&1&&(l.checked=i[0].is_all_day),D[0]&2&&r!==(r=i[1]+"-all-day-check")&&c(f,"for",r),i[0].is_all_day?d&&(d.d(1),d=null):d?d.p(i,D):(d=Je(i),d.c(),d.m(h.parentNode,h))},d(i){i&&(p(e),p(m),p(h)),d&&d.d(i),E=!1,_()}}}function Je(n){let e,t,l="Start time*",a,s,f,o,r,m,h="End time*",E,_,d,i,D;return{c(){e=v("div"),t=v("div"),t.textContent=l,a=S(),s=v("input"),o=S(),r=v("div"),m=v("div"),m.textContent=h,E=S(),_=v("input"),this.h()},l(g){e=b(g,"DIV",{class:!0});var k=T(e);t=b(k,"DIV",{"data-svelte-h":!0}),z(t)!=="svelte-gzi1xn"&&(t.textContent=l),a=V(k),s=b(k,"INPUT",{name:!0,type:!0,step:!0,class:!0}),k.forEach(p),o=V(g),r=b(g,"DIV",{class:!0});var C=T(r);m=b(C,"DIV",{"data-svelte-h":!0}),z(m)!=="svelte-ig3ngi"&&(m.textContent=h),E=V(C),_=b(C,"INPUT",{name:!0,type:!0,step:!0,class:!0}),C.forEach(p),this.h()},h(){c(s,"name",f=n[1]+"-start-time"),c(s,"type","time"),c(s,"step",900),c(s,"class","form-control"),s.disabled=n[7],s.required=!0,Z(s,"is-invalid",n[4]),c(e,"class","d-flex flex-column gap-2"),c(_,"name",d=n[1]+"-end-time"),c(_,"type","time"),c(_,"step",900),c(_,"class","form-control"),_.disabled=n[7],_.required=!0,Z(_,"is-invalid",n[3]),c(r,"class","d-flex flex-column gap-2")},m(g,k){H(g,e,k),u(e,t),u(e,a),u(e,s),n[30](s),Q(s,n[17]),H(g,o,k),H(g,r,k),u(r,m),u(r,E),u(r,_),n[33](_),Q(_,n[15]),i||(D=[j(s,"focus",n[31]),j(s,"input",n[32]),j(_,"focus",n[34]),j(_,"input",n[35])],i=!0)},p(g,k){k[0]&2&&f!==(f=g[1]+"-start-time")&&c(s,"name",f),k[0]&128&&(s.disabled=g[7]),k[0]&131072&&Q(s,g[17]),k[0]&16&&Z(s,"is-invalid",g[4]),k[0]&2&&d!==(d=g[1]+"-end-time")&&c(_,"name",d),k[0]&128&&(_.disabled=g[7]),k[0]&32768&&Q(_,g[15]),k[0]&8&&Z(_,"is-invalid",g[3])},d(g){g&&(p(e),p(o),p(r)),n[30](null),n[33](null),i=!1,qe(D)}}}function Nt(n){let e,t="<span>Delete</span>",l,a;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1bw2173"&&(e.innerHTML=t),this.h()},h(){c(e,"class","btn btn-danger position-relative")},m(s,f){H(s,e,f),l||(a=j(e,"click",n[20]),l=!0)},p:ae,d(s){s&&p(e),l=!1,a()}}}function St(n){let e,t="Create";return{c(){e=v("span"),e.textContent=t},l(l){e=b(l,"SPAN",{"data-svelte-h":!0}),z(e)!=="svelte-1wf0js6"&&(e.textContent=t)},m(l,a){H(l,e,a)},d(l){l&&p(e)}}}function Vt(n){let e,t="Save";return{c(){e=v("span"),e.textContent=t},l(l){e=b(l,"SPAN",{"data-svelte-h":!0}),z(e)!=="svelte-l126tb"&&(e.textContent=t)},m(l,a){H(l,e,a)},d(l){l&&p(e)}}}function $e(n){let e,t='<span class="visually-hidden">Item not saved</span>';return{c(){e=v("span"),e.innerHTML=t,this.h()},l(l){e=b(l,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1g0a6ie"&&(e.innerHTML=t),this.h()},h(){c(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(l,a){H(l,e,a)},d(l){l&&p(e)}}}function At(n){let e,t,l,a="Title*",s,f,o,r,m,h="Event title. i.e. Ward Conference, Ward BBQ Night",E,_,d,i,D,g="Description",k,C,P,I,A,U="Describe the event to the best of your knowledge",L,M,R,q="Location",ie,O,ee,re,te,Me="Location can be physical or virtual",Ie,K,le,ce=n[14].message+"",_e,me,ye,ne,se,De,Te,Y,we,F,Ne,Be,y=n[2]&&Qe(n),N=n[2]&&Xe(n);se=new mt({props:{size:"xs"}});let W=n[19]&&Nt(n);function Fe(w,B){return w[19]?Vt:St}let oe=Fe(n)(n),G=n[18]&&$e();return{c(){e=v("div"),t=v("div"),l=v("div"),l.textContent=a,s=S(),f=v("input"),r=S(),m=v("small"),m.textContent=h,E=S(),y&&y.c(),_=S(),N&&N.c(),d=S(),i=v("div"),D=v("div"),D.textContent=g,k=S(),C=v("textarea"),I=S(),A=v("small"),A.textContent=U,L=S(),M=v("div"),R=v("div"),R.textContent=q,ie=S(),O=v("input"),re=S(),te=v("small"),te.textContent=Me,Ie=S(),K=v("div"),le=v("small"),_e=X(ce),ye=S(),ne=v("span"),ge(se.$$.fragment),De=S(),W&&W.c(),Te=S(),Y=v("button"),oe.c(),we=S(),G&&G.c(),this.h()},l(w){e=b(w,"DIV",{class:!0});var B=T(e);t=b(B,"DIV",{class:!0});var pe=T(t);l=b(pe,"DIV",{"data-svelte-h":!0}),z(l)!=="svelte-1w3dtko"&&(l.textContent=a),s=V(pe),f=b(pe,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),r=V(pe),m=b(pe,"SMALL",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-gvb7m1"&&(m.textContent=h),pe.forEach(p),E=V(B),y&&y.l(B),_=V(B),N&&N.l(B),d=V(B),i=b(B,"DIV",{class:!0});var he=T(i);D=b(he,"DIV",{"data-svelte-h":!0}),z(D)!=="svelte-1x8itd0"&&(D.textContent=g),k=V(he),C=b(he,"TEXTAREA",{name:!0,class:!0}),T(C).forEach(p),I=V(he),A=b(he,"SMALL",{class:!0,"data-svelte-h":!0}),z(A)!=="svelte-bky2ve"&&(A.textContent=U),he.forEach(p),L=V(B),M=b(B,"DIV",{class:!0});var ve=T(M);R=b(ve,"DIV",{"data-svelte-h":!0}),z(R)!=="svelte-szqbut"&&(R.textContent=q),ie=V(ve),O=b(ve,"INPUT",{name:!0,type:!0,class:!0}),re=V(ve),te=b(ve,"SMALL",{class:!0,"data-svelte-h":!0}),z(te)!=="svelte-1drtb8l"&&(te.textContent=Me),ve.forEach(p),Ie=V(B),K=b(B,"DIV",{class:!0});var fe=T(K);le=b(fe,"SMALL",{class:!0});var Ge=T(le);_e=J(Ge,ce),Ge.forEach(p),ye=V(fe),ne=b(fe,"SPAN",{});var Ke=T(ne);Ee(se.$$.fragment,Ke),Ke.forEach(p),De=V(fe),W&&W.l(fe),Te=V(fe),Y=b(fe,"BUTTON",{class:!0});var Pe=T(Y);oe.l(Pe),we=V(Pe),G&&G.l(Pe),Pe.forEach(p),fe.forEach(p),B.forEach(p),this.h()},h(){c(f,"name",o=n[1]+"-title"),c(f,"type","text"),c(f,"class","form-control"),c(f,"placeholder","Event title"),f.disabled=n[7],f.required=!0,Z(f,"is-invalid",n[6]),c(m,"class","fw-lighter fst-italic"),c(t,"class","d-flex flex-column gap-2"),c(C,"name",P=n[1]+"-description"),c(C,"class","form-control"),C.disabled=n[7],Z(C,"is-invalid",n[5]),c(A,"class","fw-lighter fst-italic"),c(i,"class","d-flex flex-column gap-2"),c(O,"name",ee=n[1]+"-location"),c(O,"type","text"),c(O,"class","form-control"),O.disabled=n[7],c(te,"class","fw-lighter fst-italic"),c(M,"class","d-flex flex-column gap-2"),c(le,"class",me="fw-lighter fst-italic text-"+n[14].type),Z(ne,"d-none",!n[7]),c(Y,"class","btn btn-primary position-relative"),c(K,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),c(e,"class","d-flex flex-column gap-4")},m(w,B){H(w,e,B),u(e,t),u(t,l),u(t,s),u(t,f),n[23](f),Q(f,n[0].title),u(t,r),u(t,m),u(e,E),y&&y.m(e,null),u(e,_),N&&N.m(e,null),u(e,d),u(e,i),u(i,D),u(i,k),u(i,C),n[36](C),Q(C,n[0].description),u(i,I),u(i,A),u(e,L),u(e,M),u(M,R),u(M,ie),u(M,O),n[39](O),Q(O,n[0].location),u(M,re),u(M,te),u(e,Ie),u(e,K),u(K,le),u(le,_e),u(K,ye),u(K,ne),ke(se,ne,null),u(K,De),W&&W.m(K,null),u(K,Te),u(K,Y),oe.m(Y,null),u(Y,we),G&&G.m(Y,null),F=!0,Ne||(Be=[j(f,"focus",n[24]),j(f,"input",n[25]),j(C,"focus",n[37]),j(C,"input",n[38]),j(O,"focus",n[40]),j(O,"input",n[41]),j(Y,"click",n[21])],Ne=!0)},p(w,B){(!F||B[0]&2&&o!==(o=w[1]+"-title"))&&c(f,"name",o),(!F||B[0]&128)&&(f.disabled=w[7]),B[0]&1&&f.value!==w[0].title&&Q(f,w[0].title),(!F||B[0]&64)&&Z(f,"is-invalid",w[6]),w[2]?y?y.p(w,B):(y=Qe(w),y.c(),y.m(e,_)):y&&(y.d(1),y=null),w[2]?N?N.p(w,B):(N=Xe(w),N.c(),N.m(e,d)):N&&(N.d(1),N=null),(!F||B[0]&2&&P!==(P=w[1]+"-description"))&&c(C,"name",P),(!F||B[0]&128)&&(C.disabled=w[7]),B[0]&1&&Q(C,w[0].description),(!F||B[0]&32)&&Z(C,"is-invalid",w[5]),(!F||B[0]&2&&ee!==(ee=w[1]+"-location"))&&c(O,"name",ee),(!F||B[0]&128)&&(O.disabled=w[7]),B[0]&1&&O.value!==w[0].location&&Q(O,w[0].location),(!F||B[0]&16384)&&ce!==(ce=w[14].message+"")&&de(_e,ce),(!F||B[0]&16384&&me!==(me="fw-lighter fst-italic text-"+w[14].type))&&c(le,"class",me),(!F||B[0]&128)&&Z(ne,"d-none",!w[7]),w[19]&&W.p(w,B),w[18]?G||(G=$e(),G.c(),G.m(Y,null)):G&&(G.d(1),G=null)},i(w){F||($(se.$$.fragment,w),F=!0)},o(w){x(se.$$.fragment,w),F=!1},d(w){w&&p(e),n[23](null),y&&y.d(),N&&N.d(),n[36](null),n[39](null),Ce(se),W&&W.d(),oe.d(),G&&G.d(),Ne=!1,qe(Be)}}}function Lt(n,e,t){let l,a,s,f,o,r,m,h,E,_,{name:d=""}=e,{eventItem:i=Ye}=e;const{actions:{reload:D}}=pt();let g=!1,k=i.id,C,P,I,A,U,L,M={message:"",type:"info"},R={title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"};const q=(y,N=0,W="info")=>{t(14,M.message=y,M),t(14,M.type=W,M),N&&setTimeout(()=>{t(14,M.message="",M)},N)},ie=async()=>{if(!k){q("ID is not defined",0,"danger");return}try{await kt(k),await D(),He("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{t(7,g=!1),t(22,R={...i,id:k}),q("Event Deleted",3e3,"success"),t(0,i=Ye)},800)}catch(y){He("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{t(7,g=!1),console.error("Save failed:",y),q("Failed to save event. Please try again.",7e3,"danger")},800)}},O=()=>{t(7,g=!0),Dt({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:y=>{y?ie():t(7,g=!1)}})},ee=async()=>{if(!a){q("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!_){let N=[];s&&N.push("Title is invalid"),f&&N.push("Description is invalid"),o&&N.push("Start time is invalid"),r&&N.push("End time is invalid"),q(N.join(". ")+".  Please address accordingly.",0,"danger");return}if(g)return;q("Saving ..."),t(7,g=!0);const y=(N,W)=>{const[Fe,ze]=W.split(":").map(Number);let oe=Tt(N,Fe);return oe=wt(oe,ze),oe};try{let N={title:i.title,description:i.description,location:i.location,event_type:i.event_type};l&&(N={...N,start_time:y(Ze(m,"yyyy-MM-dd",new Date),h).toISOString(),end_time:y(Ze(m,"yyyy-MM-dd",new Date),E).toISOString(),is_all_day:i.is_all_day}),k?await gt(k,N):await Et(N),await D(),He("set_calendar_event_success","interaction",`Set Calendar Event Successful ${i.title}`,1),setTimeout(()=>{t(7,g=!1),t(22,R={...i,id:k}),q("Saved",3e3,"success")},800)}catch(N){He("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${i.title}`,1),setTimeout(()=>{t(7,g=!1),console.error("Save failed:",N),q("Failed to save event. Please try again.",7e3,"danger")},800)}};function re(y){be[y?"unshift":"push"](()=>{C=y,t(8,C)})}const te=()=>C.select();function Me(){i.title=this.value,t(0,i)}function Ie(y){be[y?"unshift":"push"](()=>{I=y,t(10,I)})}const K=()=>I.select();function le(){m=this.value,t(16,m),t(2,l),t(0,i)}function ce(){i.is_all_day=this.checked,t(0,i)}function _e(y){be[y?"unshift":"push"](()=>{A=y,t(11,A)})}const me=()=>A.select();function ye(){h=this.value,t(17,h),t(2,l),t(0,i)}function ne(y){be[y?"unshift":"push"](()=>{U=y,t(12,U)})}const se=()=>U.select();function De(){E=this.value,t(15,E),t(2,l),t(0,i)}function Te(y){be[y?"unshift":"push"](()=>{P=y,t(9,P)})}const Y=()=>P.select();function we(){i.description=this.value,t(0,i)}function F(y){be[y?"unshift":"push"](()=>{L=y,t(13,L)})}const Ne=()=>L.select();function Be(){i.location=this.value,t(0,i)}return n.$$set=y=>{"name"in y&&t(1,d=y.name),"eventItem"in y&&t(0,i=y.eventItem)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(2,l=i.event_type==="calendar_event"),n.$$.dirty[0]&4194305&&t(18,a=R.title!==i.title||R.start_time!==i.start_time||R.end_time!==i.end_time||R.location!==i.location||R.is_all_day!==i.is_all_day),n.$$.dirty[0]&1&&t(6,s=i.title===""),n.$$.dirty[0]&1&&t(4,o=i.start_time===""),n.$$.dirty[0]&1&&t(3,r=i.end_time===""),n.$$.dirty[0]&5&&t(16,m=l&&i.start_time?Se(Ae(Ve(i.start_time),Le),"yyyy-MM-dd"):""),n.$$.dirty[0]&5&&t(17,h=l&&i.start_time?Se(Ae(Ve(i.start_time),Le),"HH:mm"):""),n.$$.dirty[0]&5&&t(15,E=l&&i.end_time?Se(Ae(Ve(i.end_time),Le),"HH:mm"):""),n.$$.dirty[0]&120&&(_=!s&&!f&&!o&&!r)},t(5,f=!1),[i,d,l,r,o,f,s,g,C,P,I,A,U,L,M,E,m,h,a,k,O,ee,R,re,te,Me,Ie,K,le,ce,_e,me,ye,ne,se,De,Te,Y,we,F,Ne,Be]}class Mt extends Oe{constructor(e){super(),Re(this,e,Lt,At,Ue,{name:1,eventItem:0},null,[-1,-1])}}function xe(n,e,t){const l=n.slice();return l[17]=e[t],l}function Bt(n){let e,t;return e=new Mt({props:{eventItem:n[3],name:"calendar-event-item-form"}}),{c(){ge(e.$$.fragment)},l(l){Ee(e.$$.fragment,l)},m(l,a){ke(e,l,a),t=!0},p(l,a){const s={};a&8&&(s.eventItem=l[3]),e.$set(s)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){Ce(e,l)}}}function Pt(n){let e,t;return e=new mt({}),{c(){ge(e.$$.fragment)},l(l){Ee(e.$$.fragment,l)},m(l,a){ke(e,l,a),t=!0},p:ae,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){Ce(e,l)}}}function Ht(n){let e;function t(s,f){return s[5]?.length?Ot:Ut}let l=t(n),a=l(n);return{c(){a.c(),e=ue()},l(s){a.l(s),e=ue()},m(s,f){a.m(s,f),H(s,e,f)},p(s,f){l===(l=t(s))&&a?a.p(s,f):(a.d(1),a=l(s),a&&(a.c(),a.m(e.parentNode,e)))},i:ae,o:ae,d(s){s&&p(e),a.d(s)}}}function Ut(n){let e,t="There are no events logged";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=b(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-10lllm0"&&(e.textContent=t),this.h()},h(){c(e,"class","card-body")},m(l,a){H(l,e,a)},p:ae,d(l){l&&p(e)}}}function Ot(n){let e,t,l,a,s,f,o,r,m,h=je(n[5]),E=[];for(let _=0;_<h.length;_+=1)E[_]=it(xe(n,h,_));return{c(){e=v("div"),t=v("button"),l=v("i"),a=X(`
					Add New Calendar Event`),f=S(),o=v("ul");for(let _=0;_<E.length;_+=1)E[_].c();this.h()},l(_){e=b(_,"DIV",{class:!0});var d=T(e);t=b(d,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var i=T(t);l=b(i,"I",{class:!0}),T(l).forEach(p),a=J(i,`
					Add New Calendar Event`),i.forEach(p),d.forEach(p),f=V(_),o=b(_,"UL",{class:!0});var D=T(o);for(let g=0;g<E.length;g+=1)E[g].l(D);D.forEach(p),this.h()},h(){c(l,"class","bi bi-plus"),c(t,"class","btn btn-sm btn-secondary"),c(t,"type","button"),c(t,"data-bs-toggle","offcanvas"),c(t,"data-bs-target",s="#"+n[0]),c(t,"aria-controls",n[0]),c(e,"class","card-body"),c(o,"class","list-group list-group-flush")},m(_,d){H(_,e,d),u(e,t),u(t,l),u(t,a),H(_,f,d),H(_,o,d);for(let i=0;i<E.length;i+=1)E[i]&&E[i].m(o,null);r||(m=j(t,"click",n[12]),r=!0)},p(_,d){if(d&1&&s!==(s="#"+_[0])&&c(t,"data-bs-target",s),d&1&&c(t,"aria-controls",_[0]),d&3875){h=je(_[5]);let i;for(i=0;i<h.length;i+=1){const D=xe(_,h,i);E[i]?E[i].p(D,d):(E[i]=it(D),E[i].c(),E[i].m(o,null))}for(;i<E.length;i+=1)E[i].d(1);E.length=h.length}},d(_){_&&(p(e),p(f),p(o)),ut(E,_),r=!1,m()}}}function et(n){let e,t=n[8](n[17].start_time)+"",l;return{c(){e=v("strong"),l=X(t)},l(a){e=b(a,"STRONG",{});var s=T(e);l=J(s,t),s.forEach(p)},m(a,s){H(a,e,s),u(e,l)},p(a,s){s&32&&t!==(t=a[8](a[17].start_time)+"")&&de(l,t)},d(a){a&&p(e)}}}function tt(n){let e,t=!n[17].is_all_day&&lt(n);return{c(){t&&t.c(),e=ue()},l(l){t&&t.l(l),e=ue()},m(l,a){t&&t.m(l,a),H(l,e,a)},p(l,a){l[17].is_all_day?t&&(t.d(1),t=null):t?t.p(l,a):(t=lt(l),t.c(),t.m(e.parentNode,e))},d(l){l&&p(e),t&&t.d(l)}}}function lt(n){let e,t=n[9](n[17].start_time)+"",l,a,s=n[9](n[17].end_time)+"",f;return{c(){e=v("span"),l=X(t),a=X(" to "),f=X(s),this.h()},l(o){e=b(o,"SPAN",{class:!0});var r=T(e);l=J(r,t),a=J(r," to "),f=J(r,s),r.forEach(p),this.h()},h(){c(e,"class","d-block")},m(o,r){H(o,e,r),u(e,l),u(e,a),u(e,f)},p(o,r){r&32&&t!==(t=o[9](o[17].start_time)+"")&&de(l,t),r&32&&s!==(s=o[9](o[17].end_time)+"")&&de(f,s)},d(o){o&&p(e)}}}function nt(n){let e,t=n[17].description+"",l;return{c(){e=v("span"),l=X(t),this.h()},l(a){e=b(a,"SPAN",{class:!0});var s=T(e);l=J(s,t),s.forEach(p),this.h()},h(){c(e,"class","d-block small")},m(a,s){H(a,e,s),u(e,l)},p(a,s){s&32&&t!==(t=a[17].description+"")&&de(l,t)},d(a){a&&p(e)}}}function st(n){let e,t=n[17].location+"",l;return{c(){e=v("em"),l=X(t),this.h()},l(a){e=b(a,"EM",{class:!0});var s=T(e);l=J(s,t),s.forEach(p),this.h()},h(){c(e,"class","d-block small fw-lighter")},m(a,s){H(a,e,s),u(e,l)},p(a,s){s&32&&t!==(t=a[17].location+"")&&de(l,t)},d(a){a&&p(e)}}}function at(n){let e,t,l,a,s;function f(){return n[13](n[17])}return{c(){e=v("button"),t=v("i"),this.h()},l(o){e=b(o,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var r=T(e);t=b(r,"I",{class:!0}),T(t).forEach(p),r.forEach(p),this.h()},h(){c(t,"class","bi bi-pencil"),c(e,"class","btn btn-sm btn-secondary"),c(e,"type","button"),c(e,"data-bs-toggle","offcanvas"),c(e,"data-bs-target",l="#"+n[0]),c(e,"aria-controls",n[0])},m(o,r){H(o,e,r),u(e,t),a||(s=j(e,"click",f),a=!0)},p(o,r){n=o,r&1&&l!==(l="#"+n[0])&&c(e,"data-bs-target",l),r&1&&c(e,"aria-controls",n[0])},d(o){o&&p(e),a=!1,s()}}}function it(n){let e,t,l,a,s=n[11](n[17]),f,o,r,m=n[17].title+"",h,E,_=n[11](n[17]),d,i,D,g,k,C=s&&et(n),P=_&&tt(n),I=n[17].description&&nt(n),A=n[17].location&&st(n),U=n[1]&&at(n);return{c(){e=v("li"),t=v("div"),l=v("div"),a=v("div"),C&&C.c(),f=S(),o=v("div"),r=v("strong"),h=X(m),E=S(),P&&P.c(),d=S(),I&&I.c(),i=S(),A&&A.c(),D=S(),g=v("div"),U&&U.c(),k=S(),this.h()},l(L){e=b(L,"LI",{class:!0});var M=T(e);t=b(M,"DIV",{class:!0});var R=T(t);l=b(R,"DIV",{class:!0});var q=T(l);a=b(q,"DIV",{style:!0});var ie=T(a);C&&C.l(ie),ie.forEach(p),f=V(q),o=b(q,"DIV",{});var O=T(o);r=b(O,"STRONG",{});var ee=T(r);h=J(ee,m),ee.forEach(p),E=V(O),P&&P.l(O),d=V(O),I&&I.l(O),i=V(O),A&&A.l(O),O.forEach(p),q.forEach(p),D=V(R),g=b(R,"DIV",{});var re=T(g);U&&U.l(re),re.forEach(p),R.forEach(p),k=V(M),M.forEach(p),this.h()},h(){ht(a,"width","85px"),c(l,"class","d-flex flex-sm-column flex-md-row flex-xl-row flex-lg-row gap-3"),c(t,"class","d-flex justify-content-between"),c(e,"class","list-group-item")},m(L,M){H(L,e,M),u(e,t),u(t,l),u(l,a),C&&C.m(a,null),u(l,f),u(l,o),u(o,r),u(r,h),u(o,E),P&&P.m(o,null),u(o,d),I&&I.m(o,null),u(o,i),A&&A.m(o,null),u(t,D),u(t,g),U&&U.m(g,null),u(e,k)},p(L,M){M&32&&(s=L[11](L[17])),s?C?C.p(L,M):(C=et(L),C.c(),C.m(a,null)):C&&(C.d(1),C=null),M&32&&m!==(m=L[17].title+"")&&de(h,m),M&32&&(_=L[11](L[17])),_?P?P.p(L,M):(P=tt(L),P.c(),P.m(o,d)):P&&(P.d(1),P=null),L[17].description?I?I.p(L,M):(I=nt(L),I.c(),I.m(o,i)):I&&(I.d(1),I=null),L[17].location?A?A.p(L,M):(A=st(L),A.c(),A.m(o,null)):A&&(A.d(1),A=null),L[1]?U?U.p(L,M):(U=at(L),U.c(),U.m(g,null)):U&&(U.d(1),U=null)},d(L){L&&p(e),C&&C.d(),P&&P.d(),I&&I.d(),A&&A.d(),U&&U.d()}}}function Rt(n){let e,t,l,a,s="Calendar Events",f,o,r,m;e=new It({props:{title:n[2],id:n[0],$$slots:{default:[Bt]},$$scope:{ctx:n}}});const h=[Ht,Pt],E=[];function _(d,i){return d[4]?0:1}return o=_(n),r=E[o]=h[o](n),{c(){ge(e.$$.fragment),t=S(),l=v("div"),a=v("div"),a.textContent=s,f=S(),r.c(),this.h()},l(d){Ee(e.$$.fragment,d),t=V(d),l=b(d,"DIV",{class:!0});var i=T(l);a=b(i,"DIV",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1on85xs"&&(a.textContent=s),f=V(i),r.l(i),i.forEach(p),this.h()},h(){c(a,"class","card-header"),c(l,"class","card")},m(d,i){ke(e,d,i),H(d,t,i),H(d,l,i),u(l,a),u(l,f),E[o].m(l,null),m=!0},p(d,[i]){const D={};i&4&&(D.title=d[2]),i&1&&(D.id=d[0]),i&1048584&&(D.$$scope={dirty:i,ctx:d}),e.$set(D);let g=o;o=_(d),o===g?E[o].p(d,i):(ot(),x(E[g],1,1,()=>{E[g]=null}),ft(),r=E[o],r?r.p(d,i):(r=E[o]=h[o](d),r.c()),$(r,1),r.m(l,null))},i(d){m||($(e.$$.fragment,d),$(r),m=!0)},o(d){x(e.$$.fragment,d),x(r),m=!1},d(d){d&&(p(t),p(l)),Ce(e,d),E[o].d()}}}let Ft="New Calendar Event",jt="Edit Calendar Event";function qt(n,e,t){let l,a;const{actions:{featureIsEnabled:s}}=ct(),{stores:{ready:f,dbData:o},actions:{reload:r}}=pt();We(n,f,I=>t(4,l=I)),We(n,o,I=>t(5,a=I));const m={title:"Event",description:"",location:"",event_type:"announcement"};let{formId:h=yt()}=e,E=!1,_="",d={...m};rt(async()=>{t(1,E=s(dt.EditDBCalendarEvent)),await r()});const i=I=>{if(!I)return"";const A=Ve(I),U=Ae(A,Le);return Se(U,"MMM, dd")},D=I=>{if(!I)return"";const A=Ve(I),U=Ae(A,Le);return Se(U,"h:mm aa")},g=(I=void 0)=>{I?(t(2,_=jt),t(3,d=I)):(t(2,_=Ft),t(3,d={...m}))},k=I=>I.event_type==="calendar_event",C=()=>g(),P=I=>g(I);return n.$$set=I=>{"formId"in I&&t(0,h=I.formId)},[h,E,_,d,l,a,f,o,i,D,g,k,C,P]}class zt extends Oe{constructor(e){super(),Re(this,e,qt,Rt,Ue,{formId:0})}}function Gt(n,e,t){const l=n.slice();return l[0]=e[t],l}function Kt(n){let e,t,l,a=n[0].when+"",s,f,o,r=n[0].title+"",m,h,E,_,d,i=n[0].details+"",D;return{c(){e=v("li"),t=v("strong"),l=v("small"),s=X(a),f=v("br"),o=S(),m=X(r),h=v("br"),E=S(),_=v("em"),d=new vt(!1),D=S(),this.h()},l(g){e=b(g,"LI",{class:!0});var k=T(e);t=b(k,"STRONG",{});var C=T(t);l=b(C,"SMALL",{});var P=T(l);s=J(P,a),P.forEach(p),C.forEach(p),f=b(k,"BR",{}),o=V(k),m=J(k,r),h=b(k,"BR",{}),E=V(k),_=b(k,"EM",{class:!0});var I=T(_);d=bt(I,!1),I.forEach(p),D=V(k),k.forEach(p),this.h()},h(){d.a=null,c(_,"class","small fw-lighter"),c(e,"class","list-group-item")},m(g,k){H(g,e,k),u(e,t),u(t,l),u(l,s),u(e,f),u(e,o),u(e,m),u(e,h),u(e,E),u(e,_),d.m(i,_),u(e,D)},p:ae,d(g){g&&p(e)}}}function Wt(n){let e,t,l="Announcements",a,s,f=je(Ct),o=[];for(let r=0;r<f.length;r+=1)o[r]=Kt(Gt(n,f,r));return{c(){e=v("div"),t=v("div"),t.textContent=l,a=S(),s=v("ul");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var m=T(e);t=b(m,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-rw6gj3"&&(t.textContent=l),a=V(m),s=b(m,"UL",{class:!0});var h=T(s);for(let E=0;E<o.length;E+=1)o[E].l(h);h.forEach(p),m.forEach(p),this.h()},h(){c(t,"class","card-header"),c(s,"class","list-group list-group-flush"),c(e,"class","card")},m(r,m){H(r,e,m),u(e,t),u(e,a),u(e,s);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(s,null)},p:ae,i:ae,o:ae,d(r){r&&p(e),ut(o,r)}}}class Yt extends Oe{constructor(e){super(),Re(this,e,null,Wt,Ue,{})}}function Zt(n){let e,t;return e=new Yt({}),{c(){ge(e.$$.fragment)},l(l){Ee(e.$$.fragment,l)},m(l,a){ke(e,l,a),t=!0},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){Ce(e,l)}}}function Qt(n){let e,t;return e=new zt({}),{c(){ge(e.$$.fragment)},l(l){Ee(e.$$.fragment,l)},m(l,a){ke(e,l,a),t=!0},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){x(e.$$.fragment,l),t=!1},d(l){Ce(e,l)}}}function Xt(n){let e,t,l,a;const s=[Qt,Zt],f=[];function o(r,m){return r[0]?0:1}return e=o(n),t=f[e]=s[e](n),{c(){t.c(),l=ue()},l(r){t.l(r),l=ue()},m(r,m){f[e].m(r,m),H(r,l,m),a=!0},p(r,[m]){let h=e;e=o(r),e!==h&&(ot(),x(f[h],1,1,()=>{f[h]=null}),ft(),t=f[e],t||(t=f[e]=s[e](r),t.c()),$(t,1),t.m(l.parentNode,l))},i(r){a||($(t),a=!0)},o(r){x(t),a=!1},d(r){r&&p(l),f[e].d(r)}}}function Jt(n,e,t){const{actions:{featureIsEnabled:l}}=ct();let a=!1;return rt(async()=>{t(0,a=l(dt.ViewDBCalendarEvents))}),[a]}class ol extends Oe{constructor(e){super(),Re(this,e,Jt,Xt,Ue,{})}}export{ol as C};
