import{w as m,d as o}from"./CEPTHtdq.js";import{f as d}from"./Bm2fYh3q.js";import{T as u}from"./D1pHg4Vz.js";const l={AdvancementsForAaronicPriesthood:{label:"Aaronic Priesthood Advancements",key:"advancements-for-aaronic-priesthood"},BabyBlessing:{label:"Baby Blessing",key:"baby-blessing"},Baptisms:{label:"Baptisms",key:"baptisms"},CallingsToBeReleasedInSacrament:{label:"Callings to Release in Sacrament",key:"callings-to-be-released-in-sacrament"},CallingsToBeReleasedInClass:{key:"callings-to-be-released-in-class"},CallingsToBeApproved:{label:"Callings that need Bishopric Approval",key:"callings-to-be-approved"},CallingsToExtend:{label:"Callings that need Bishopric Extension",key:"callings-to-extend"},CallingsToRelease:{label:"Callings that need Bishopric Formal Releasing via Interview or Phone",key:"callings-to-release"},CallingsToBeSustainedInSacrament:{label:"Callings to Sustain in Sacrament",key:"callings-to-be-sustained-in-sacrament"},CallingsToBeSustainedInClass:{label:"Callings to Sustain in Class",key:"callings-to-be-sustained-in-class"},CallingsToBeAcknowledgeInSacrament:{label:"Callings to be Acknowledged in Sacrament",key:"callings-to-acknowledge-in-sacrament"},CallingsToBeAcknowledgeInClass:{label:"Callings to be Acknowledged in Class",key:"callings-to-acknowledge-in-class"},MovedIn:{label:"Move In Members",key:"moved-in-members"}},v={name:"",description:"",list_name:"",sort_order:0},f=m([]);let _=!1;async function g(){if(_)return u(f);_=!0;const{data:a,error:r}=await d.from("member_list_items").select("*");if(r)throw r;const s=a||[];return f.set(s),setTimeout(()=>_=!1,800),s}async function M(a){const{data:r,error:s}=await d.from("member_list_items").insert([a]).select();if(s)throw s;return await g(),r[0]}async function E(a,r){const{error:s}=await d.from("member_list_items").update(r).eq("id",a).select();if(s)throw s;await g();const c=u(f).find(b=>b.id===a);return c||void 0}async function R(a){const{error:r}=await d.from("member_list_items").delete().eq("id",a);if(r)throw r;await g()}let i=null;const I=()=>{const a=m(!1),r=m([]),s=m([]),y=o([s],([t])=>t.filter(e=>e.list_name===l.CallingsToBeReleasedInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),c=o([s],([t])=>t.filter(e=>e.list_name===l.CallingsToBeSustainedInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),b=o([s],([t])=>t.filter(e=>e.list_name===l.CallingsToBeAcknowledgeInSacrament.key).sort((e,n)=>e.sort_order-n.sort_order)),B=o([s],([t])=>t.filter(e=>e.list_name===l.AdvancementsForAaronicPriesthood.key).sort((e,n)=>e.sort_order-n.sort_order)),k=o([s],([t])=>t.filter(e=>e.list_name===l.MovedIn.key).sort((e,n)=>e.sort_order-n.sort_order)),p=o([s],([t])=>t.filter(e=>e.list_name===l.Baptisms.key).sort((e,n)=>e.sort_order-n.sort_order)),C=o([s],([t])=>t.filter(e=>e.list_name===l.BabyBlessing.key).sort((e,n)=>e.sort_order-n.sort_order)),w=t=>t.length?t:[];return i={stores:{ready:a,data:r,dbData:s,membersToRelease:y,membersToSustain:c,membersToAcknowledgeInSacrament:b,membersToAdvanceInAaronicPriesthood:B,membersMoveIn:k,membersToBeBaptised:p,membersForBabyBlessing:C},actions:{reload:async()=>{a.set(!1);const t=await g();s.set(w(t)),a.set(!0)}}},i},L=()=>i?.stores&&Object.keys(i.stores).length>0?i:I();export{v as B,l as M,M as c,R as d,L as g,E as u};
