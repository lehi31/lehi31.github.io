import{s as Ze,k as Ut,r as Qe,n as _e,j as De,b as et,o as St}from"./scheduler.C8jfK40o.js";import{S as Xe,i as Je,e as m,s as M,n as j,c as Ae,b as h,d as N,p as K,g as P,f as d,q as z,h as Le,j as f,y as ne,D as x,k as O,r as o,E as it,m as Me,C as q,u as te,t as se,a as ae,l as Pe,z as ie,F as Rt,w as Vt,v as At,x as tt,A as Ft,H as Ht,I as qt}from"./index.BU5kBEy5.js";import{g as Lt,F as Mt}from"./feature-flag.state.WHDJOvB0.js";import{t as Pt,f as we,p as Ne,e as He}from"./Header.Cr3Z7g5k.js";import{S as Bt}from"./Spinner.j7BRAMS9.js";import{g as Ot,t as Se,u as jt,c as zt,d as Gt,A as Kt}from"./announcements.data.B1YGh_vx.js";import{t as Ye,D as Wt,v as Yt}from"./Drawer.CHD6p1Z0.js";import{c as Zt}from"./confirm.service.DrhzGlBb.js";import{A as Ve,B as rt}from"./app.state.BhiBZQZD.js";import{p as ot}from"./parse.Ddin-6Nj.js";function Qt(n,e){const t=Pt(n);return t.setHours(e),t}function Xt(n,e){const t=Pt(n);return t.setMinutes(e),t}function ft(n){let e,t,l="Date*",s,a,u,i,r;return{c(){e=m("div"),t=m("div"),t.textContent=l,s=M(),a=m("input"),this.h()},l(g){e=h(g,"DIV",{class:!0});var v=N(e);t=h(v,"DIV",{"data-svelte-h":!0}),K(t)!=="svelte-1992pd0"&&(t.textContent=l),s=P(v),a=h(v,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),v.forEach(d),this.h()},h(){f(a,"name",u=n[1]+"-start-time"),f(a,"type","date"),f(a,"class","form-control"),f(a,"placeholder","Event title"),a.disabled=n[6],a.required=!0,ne(a,"is-invalid",n[3]),f(e,"class","d-flex flex-column gap-2")},m(g,v){O(g,e,v),o(e,t),o(e,s),o(e,a),n[27](a),x(a,n[14]),i||(r=[q(a,"focus",n[28]),q(a,"input",n[29])],i=!0)},p(g,v){v[0]&2&&u!==(u=g[1]+"-start-time")&&f(a,"name",u),v[0]&64&&(a.disabled=g[6]),v[0]&16384&&x(a,g[14]),v[0]&8&&ne(a,"is-invalid",g[3])},d(g){g&&d(e),n[27](null),i=!1,Qe(r)}}}function ut(n){let e,t,l,s,a,u,i,r,g,v,T,c,p=!n[0].is_all_day&&ct(n);return{c(){e=m("div"),t=m("div"),l=m("input"),a=M(),u=m("label"),i=j("All Day Event"),g=M(),p&&p.c(),v=ie(),this.h()},l(C){e=h(C,"DIV",{});var D=N(e);t=h(D,"DIV",{class:!0});var b=N(t);l=h(b,"INPUT",{class:!0,type:!0,id:!0}),a=P(b),u=h(b,"LABEL",{class:!0,for:!0});var k=N(u);i=z(k,"All Day Event"),k.forEach(d),b.forEach(d),D.forEach(d),g=P(C),p&&p.l(C),v=ie(),this.h()},h(){f(l,"class","form-check-input"),f(l,"type","checkbox"),f(l,"id",s=n[1]+"-all-day-check"),f(u,"class","form-check-label"),f(u,"for",r=n[1]+"-all-day-check"),f(t,"class","form-check d-flex align-items-center gap-2")},m(C,D){O(C,e,D),o(e,t),o(t,l),l.checked=n[0].is_all_day,o(t,a),o(t,u),o(u,i),O(C,g,D),p&&p.m(C,D),O(C,v,D),T||(c=q(l,"change",n[30]),T=!0)},p(C,D){D[0]&2&&s!==(s=C[1]+"-all-day-check")&&f(l,"id",s),D[0]&1&&(l.checked=C[0].is_all_day),D[0]&2&&r!==(r=C[1]+"-all-day-check")&&f(u,"for",r),C[0].is_all_day?p&&(p.d(1),p=null):p?p.p(C,D):(p=ct(C),p.c(),p.m(v.parentNode,v))},d(C){C&&(d(e),d(g),d(v)),p&&p.d(C),T=!1,c()}}}function ct(n){let e,t,l="Start time*",s,a,u,i,r,g,v="End time*",T,c,p,C,D;return{c(){e=m("div"),t=m("div"),t.textContent=l,s=M(),a=m("input"),i=M(),r=m("div"),g=m("div"),g.textContent=v,T=M(),c=m("input"),this.h()},l(b){e=h(b,"DIV",{class:!0});var k=N(e);t=h(k,"DIV",{"data-svelte-h":!0}),K(t)!=="svelte-gzi1xn"&&(t.textContent=l),s=P(k),a=h(k,"INPUT",{name:!0,type:!0,step:!0,class:!0}),k.forEach(d),i=P(b),r=h(b,"DIV",{class:!0});var I=N(r);g=h(I,"DIV",{"data-svelte-h":!0}),K(g)!=="svelte-ig3ngi"&&(g.textContent=v),T=P(I),c=h(I,"INPUT",{name:!0,type:!0,step:!0,class:!0}),I.forEach(d),this.h()},h(){f(a,"name",u=n[1]+"-start-time"),f(a,"type","time"),f(a,"step",900),f(a,"class","form-control"),a.disabled=n[6],a.required=!0,ne(a,"is-invalid",n[3]),f(e,"class","d-flex flex-column gap-2"),f(c,"name",p=n[1]+"-end-time"),f(c,"type","time"),f(c,"step",900),f(c,"class","form-control"),c.disabled=n[6],c.required=!0,ne(c,"is-invalid",n[2]),f(r,"class","d-flex flex-column gap-2")},m(b,k){O(b,e,k),o(e,t),o(e,s),o(e,a),n[31](a),x(a,n[15]),O(b,i,k),O(b,r,k),o(r,g),o(r,T),o(r,c),n[34](c),x(c,n[16]),C||(D=[q(a,"focus",n[32]),q(a,"input",n[33]),q(c,"focus",n[35]),q(c,"input",n[36])],C=!0)},p(b,k){k[0]&2&&u!==(u=b[1]+"-start-time")&&f(a,"name",u),k[0]&64&&(a.disabled=b[6]),k[0]&32768&&x(a,b[15]),k[0]&8&&ne(a,"is-invalid",b[3]),k[0]&2&&p!==(p=b[1]+"-end-time")&&f(c,"name",p),k[0]&64&&(c.disabled=b[6]),k[0]&65536&&x(c,b[16]),k[0]&4&&ne(c,"is-invalid",b[2])},d(b){b&&(d(e),d(i),d(r)),n[31](null),n[34](null),C=!1,Qe(D)}}}function dt(n){let e,t="<span>Delete</span>",l,s;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(a){e=h(a,"BUTTON",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1bw2173"&&(e.innerHTML=t),this.h()},h(){f(e,"class","btn btn-danger position-relative")},m(a,u){O(a,e,u),l||(s=q(e,"click",n[20]),l=!0)},p:_e,d(a){a&&d(e),l=!1,s()}}}function Jt(n){let e,t="Create";return{c(){e=m("span"),e.textContent=t},l(l){e=h(l,"SPAN",{"data-svelte-h":!0}),K(e)!=="svelte-1wf0js6"&&(e.textContent=t)},m(l,s){O(l,e,s)},d(l){l&&d(e)}}}function $t(n){let e,t="Save";return{c(){e=m("span"),e.textContent=t},l(l){e=h(l,"SPAN",{"data-svelte-h":!0}),K(e)!=="svelte-l126tb"&&(e.textContent=t)},m(l,s){O(l,e,s)},d(l){l&&d(e)}}}function _t(n){let e,t='<span class="visually-hidden">Item not saved</span>';return{c(){e=m("span"),e.innerHTML=t,this.h()},l(l){e=h(l,"SPAN",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-1g0a6ie"&&(e.innerHTML=t),this.h()},h(){f(e,"class","position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle")},m(l,s){O(l,e,s)},d(l){l&&d(e)}}}function xt(n){let e,t,l,s="Title*",a,u,i,r,g,v="Event title. i.e. Ward Conference, Ward BBQ Night",T,c,p,C="Type*",D,b,k,I="Calendar Event",y,w="Announcement",E,S,_,A,V,F="Description",H,R,re,me,oe,qe="Describe the event to the best of your knowledge",Be,le,he,je="Location",Oe,W,ge,Ue,fe,ze="Location can be physical or virtual",Re,X,ue,be=n[13].message+"",Ee,ke,Fe,ce,L,J,pe,ee,Ce,G,$e,lt,Y=n[18]&&ft(n),Z=n[18]&&ut(n);L=new Bt({props:{size:"xs"}});let Q=n[17]&&dt(n);function nt(B,U){return B[17]?$t:Jt}let Ge=nt(n),de=Ge(n),$=n[19]&&_t();return{c(){e=m("div"),t=m("div"),l=m("div"),l.textContent=s,a=M(),u=m("input"),r=M(),g=m("small"),g.textContent=v,T=M(),c=m("div"),p=m("div"),p.textContent=C,D=M(),b=m("select"),k=m("option"),k.textContent=I,y=m("option"),y.textContent=w,E=M(),Y&&Y.c(),S=M(),Z&&Z.c(),_=M(),A=m("div"),V=m("div"),V.textContent=F,H=M(),R=m("textarea"),me=M(),oe=m("small"),oe.textContent=qe,Be=M(),le=m("div"),he=m("div"),he.textContent=je,Oe=M(),W=m("input"),Ue=M(),fe=m("small"),fe.textContent=ze,Re=M(),X=m("div"),ue=m("small"),Ee=j(be),Fe=M(),ce=m("span"),Ae(L.$$.fragment),J=M(),Q&&Q.c(),pe=M(),ee=m("button"),de.c(),Ce=M(),$&&$.c(),this.h()},l(B){e=h(B,"DIV",{class:!0});var U=N(e);t=h(U,"DIV",{class:!0});var Ie=N(t);l=h(Ie,"DIV",{"data-svelte-h":!0}),K(l)!=="svelte-1w3dtko"&&(l.textContent=s),a=P(Ie),u=h(Ie,"INPUT",{name:!0,type:!0,class:!0,placeholder:!0}),r=P(Ie),g=h(Ie,"SMALL",{class:!0,"data-svelte-h":!0}),K(g)!=="svelte-twd1iv"&&(g.textContent=v),Ie.forEach(d),T=P(U),c=h(U,"DIV",{class:!0});var Ke=N(c);p=h(Ke,"DIV",{"data-svelte-h":!0}),K(p)!=="svelte-5u2urk"&&(p.textContent=C),D=P(Ke),b=h(Ke,"SELECT",{class:!0,"aria-label":!0});var xe=N(b);k=h(xe,"OPTION",{"data-svelte-h":!0}),K(k)!=="svelte-5qncf7"&&(k.textContent=I),y=h(xe,"OPTION",{"data-svelte-h":!0}),K(y)!=="svelte-lrqs0u"&&(y.textContent=w),xe.forEach(d),Ke.forEach(d),E=P(U),Y&&Y.l(U),S=P(U),Z&&Z.l(U),_=P(U),A=h(U,"DIV",{class:!0});var ye=N(A);V=h(ye,"DIV",{"data-svelte-h":!0}),K(V)!=="svelte-1x8itd0"&&(V.textContent=F),H=P(ye),R=h(ye,"TEXTAREA",{name:!0,class:!0}),N(R).forEach(d),me=P(ye),oe=h(ye,"SMALL",{class:!0,"data-svelte-h":!0}),K(oe)!=="svelte-bky2ve"&&(oe.textContent=qe),ye.forEach(d),Be=P(U),le=h(U,"DIV",{class:!0});var Te=N(le);he=h(Te,"DIV",{"data-svelte-h":!0}),K(he)!=="svelte-szqbut"&&(he.textContent=je),Oe=P(Te),W=h(Te,"INPUT",{name:!0,type:!0,class:!0}),Ue=P(Te),fe=h(Te,"SMALL",{class:!0,"data-svelte-h":!0}),K(fe)!=="svelte-1drtb8l"&&(fe.textContent=ze),Te.forEach(d),Re=P(U),X=h(U,"DIV",{class:!0});var ve=N(X);ue=h(ve,"SMALL",{class:!0});var st=N(ue);Ee=z(st,be),st.forEach(d),Fe=P(ve),ce=h(ve,"SPAN",{});var at=N(ce);Le(L.$$.fragment,at),at.forEach(d),J=P(ve),Q&&Q.l(ve),pe=P(ve),ee=h(ve,"BUTTON",{class:!0});var We=N(ee);de.l(We),Ce=P(We),$&&$.l(We),We.forEach(d),ve.forEach(d),U.forEach(d),this.h()},h(){f(u,"name",i=n[1]+"-title"),f(u,"type","text"),f(u,"class","form-control"),f(u,"placeholder",""),u.disabled=n[6],u.required=!0,ne(u,"is-invalid",n[5]),f(g,"class","fw-lighter fst-italic"),f(t,"class","d-flex flex-column gap-2"),k.__value="calendar_event",x(k,k.__value),y.__value="announcement",x(y,y.__value),f(b,"class","form-select"),f(b,"aria-label","Select Type"),n[0].event_type===void 0&&Ut(()=>n[26].call(b)),f(c,"class","d-flex flex-column gap-2"),f(R,"name",re=n[1]+"-description"),f(R,"class","form-control"),R.disabled=n[6],ne(R,"is-invalid",n[4]),f(oe,"class","fw-lighter fst-italic"),f(A,"class","d-flex flex-column gap-2"),f(W,"name",ge=n[1]+"-location"),f(W,"type","text"),f(W,"class","form-control"),W.disabled=n[6],f(fe,"class","fw-lighter fst-italic"),f(le,"class","d-flex flex-column gap-2"),f(ue,"class",ke="fw-lighter fst-italic text-"+n[13].type),ne(ce,"d-none",!n[6]),f(ee,"class","btn btn-primary position-relative"),f(X,"class","d-flex justify-content-end align-items-center gap-2 flex-row"),f(e,"class","d-flex flex-column gap-4")},m(B,U){O(B,e,U),o(e,t),o(t,l),o(t,a),o(t,u),n[23](u),x(u,n[0].title),o(t,r),o(t,g),o(e,T),o(e,c),o(c,p),o(c,D),o(c,b),o(b,k),o(b,y),it(b,n[0].event_type,!0),o(e,E),Y&&Y.m(e,null),o(e,S),Z&&Z.m(e,null),o(e,_),o(e,A),o(A,V),o(A,H),o(A,R),n[37](R),x(R,n[0].description),o(A,me),o(A,oe),o(e,Be),o(e,le),o(le,he),o(le,Oe),o(le,W),n[40](W),x(W,n[0].location),o(le,Ue),o(le,fe),o(e,Re),o(e,X),o(X,ue),o(ue,Ee),o(X,Fe),o(X,ce),Me(L,ce,null),o(X,J),Q&&Q.m(X,null),o(X,pe),o(X,ee),de.m(ee,null),o(ee,Ce),$&&$.m(ee,null),G=!0,$e||(lt=[q(u,"focus",n[24]),q(u,"input",n[25]),q(b,"change",n[26]),q(R,"focus",n[38]),q(R,"input",n[39]),q(W,"focus",n[41]),q(W,"input",n[42]),q(ee,"click",n[21])],$e=!0)},p(B,U){(!G||U[0]&2&&i!==(i=B[1]+"-title"))&&f(u,"name",i),(!G||U[0]&64)&&(u.disabled=B[6]),U[0]&1&&u.value!==B[0].title&&x(u,B[0].title),(!G||U[0]&32)&&ne(u,"is-invalid",B[5]),U[0]&1&&it(b,B[0].event_type),B[18]?Y?Y.p(B,U):(Y=ft(B),Y.c(),Y.m(e,S)):Y&&(Y.d(1),Y=null),B[18]?Z?Z.p(B,U):(Z=ut(B),Z.c(),Z.m(e,_)):Z&&(Z.d(1),Z=null),(!G||U[0]&2&&re!==(re=B[1]+"-description"))&&f(R,"name",re),(!G||U[0]&64)&&(R.disabled=B[6]),U[0]&1&&x(R,B[0].description),(!G||U[0]&16)&&ne(R,"is-invalid",B[4]),(!G||U[0]&2&&ge!==(ge=B[1]+"-location"))&&f(W,"name",ge),(!G||U[0]&64)&&(W.disabled=B[6]),U[0]&1&&W.value!==B[0].location&&x(W,B[0].location),(!G||U[0]&8192)&&be!==(be=B[13].message+"")&&te(Ee,be),(!G||U[0]&8192&&ke!==(ke="fw-lighter fst-italic text-"+B[13].type))&&f(ue,"class",ke),(!G||U[0]&64)&&ne(ce,"d-none",!B[6]),B[17]?Q?Q.p(B,U):(Q=dt(B),Q.c(),Q.m(X,pe)):Q&&(Q.d(1),Q=null),Ge!==(Ge=nt(B))&&(de.d(1),de=Ge(B),de&&(de.c(),de.m(ee,Ce))),B[19]?$||($=_t(),$.c(),$.m(ee,null)):$&&($.d(1),$=null)},i(B){G||(se(L.$$.fragment,B),G=!0)},o(B){ae(L.$$.fragment,B),G=!1},d(B){B&&d(e),n[23](null),Y&&Y.d(),Z&&Z.d(),n[37](null),n[40](null),Pe(L),Q&&Q.d(),de.d(),$&&$.d(),$e=!1,Qe(lt)}}}function el(n,e,t){let l,s,a,u,i,r,g,v,{name:T=""}=e,{eventItem:c=rt}=e;const{actions:{reload:p}}=Ot();let C=!1,D,b,k,I,y,w,E={message:"",type:"info"},S={title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"},_=s&&c.start_time?we(Se(Ne(c.start_time),Ve),"yyyy-MM-dd"):"",A=s&&c.start_time?we(Se(Ne(c.start_time),Ve),"HH:mm"):"",V=s&&c.end_time?we(Se(Ne(c.end_time),Ve),"HH:mm"):"";const F=(L,J=0,pe="info")=>{t(13,E.message=L,E),t(13,E.type=pe,E),J&&setTimeout(()=>{t(13,E.message="",E)},J)},H=async()=>{if(!l){F("ID is not defined",0,"danger");return}try{await Gt(l),await p(),Ye("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{t(6,C=!1),t(22,S={...c,id:l}),F("Event Deleted",3e3,"success"),t(0,c=rt)},800)}catch(L){Ye("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{t(6,C=!1),console.error("Save failed:",L),F("Failed to save event. Please try again.",7e3,"danger")},800)}},R=()=>{t(6,C=!0),Zt({title:"Delete Confirmation",message:"Are you sure you want to do this?  You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:L=>{L?H():t(6,C=!1)}})},re=()=>{if(!v){let L=[];return u&&L.push("Title is invalid"),i&&L.push("Description is invalid"),r&&L.push("Start time is invalid"),g&&L.push("End time is invalid"),F(L.join(". ")+".  Please address accordingly.",0,"danger"),!1}return!0},me=async()=>{if(!a){F("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!re()||C)return;F("Saving ..."),t(6,C=!0);const L=(J,pe)=>{const[ee,Ce]=pe.split(":").map(Number);let G=Qt(J,ee);return G=Xt(G,Ce),G};try{let J={title:c.title,description:c.description,location:c.location,event_type:c.event_type};s&&(J={...J,start_time:L(ot(_,"yyyy-MM-dd",new Date),A).toISOString(),end_time:L(ot(_,"yyyy-MM-dd",new Date),V).toISOString(),is_all_day:c.is_all_day}),l?await jt(l,J):await zt(J),await p(),Ye("set_calendar_event_success","interaction",`Set Calendar Event Successful ${c.title}`,1),setTimeout(()=>{t(6,C=!1),t(22,S={...c,id:l}),F("Saved",3e3,"success")},800)}catch(J){Ye("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${c.title}`,1),setTimeout(()=>{t(6,C=!1),console.error("Save failed:",J),F("Failed to save event. Please try again.",7e3,"danger")},800)}};function oe(L){De[L?"unshift":"push"](()=>{D=L,t(7,D)})}const qe=()=>D.select();function Be(){c.title=this.value,t(0,c)}function le(){c.event_type=Rt(this),t(0,c)}function he(L){De[L?"unshift":"push"](()=>{k=L,t(9,k)})}const je=()=>k.select();function Oe(){_=this.value,t(14,_)}function W(){c.is_all_day=this.checked,t(0,c)}function ge(L){De[L?"unshift":"push"](()=>{I=L,t(10,I)})}const Ue=()=>I.select();function fe(){A=this.value,t(15,A)}function ze(L){De[L?"unshift":"push"](()=>{y=L,t(11,y)})}const Re=()=>y.select();function X(){V=this.value,t(16,V)}function ue(L){De[L?"unshift":"push"](()=>{b=L,t(8,b)})}const be=()=>b.select();function Ee(){c.description=this.value,t(0,c)}function ke(L){De[L?"unshift":"push"](()=>{w=L,t(12,w)})}const Fe=()=>w.select();function ce(){c.location=this.value,t(0,c)}return n.$$set=L=>{"name"in L&&t(1,T=L.name),"eventItem"in L&&t(0,c=L.eventItem)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(17,l=c.id),n.$$.dirty[0]&1&&t(18,s=c.event_type==="calendar_event"),n.$$.dirty[0]&4194305&&t(19,a=S.title!==c.title||S.start_time!==c.start_time||S.end_time!==c.end_time||S.location!==c.location||S.is_all_day!==c.is_all_day),n.$$.dirty[0]&1&&t(5,u=c.title===""),n.$$.dirty[0]&1&&t(3,r=c.start_time===""),n.$$.dirty[0]&1&&t(2,g=c.end_time===""),n.$$.dirty[0]&60&&(v=!u&&!i&&!r&&!g)},t(4,i=!1),[c,T,g,r,i,u,C,D,b,k,I,y,w,E,_,A,V,l,s,a,R,me,S,oe,qe,Be,le,he,je,Oe,W,ge,Ue,fe,ze,Re,X,ue,be,Ee,ke,Fe,ce]}class tl extends Xe{constructor(e){super(),Je(this,e,el,xt,Ze,{name:1,eventItem:0},null,[-1,-1])}}function mt(n,e,t){const l=n.slice();return l[22]=e[t],l}function ht(n,e,t){const l=n.slice();return l[22]=e[t],l}function ll(n){let e,t;return e=new tl({props:{eventItem:n[3],name:"calendar-event-item-form"}}),{c(){Ae(e.$$.fragment)},l(l){Le(e.$$.fragment,l)},m(l,s){Me(e,l,s),t=!0},p(l,s){const a={};s&8&&(a.eventItem=l[3]),e.$set(a)},i(l){t||(se(e.$$.fragment,l),t=!0)},o(l){ae(e.$$.fragment,l),t=!1},d(l){Pe(e,l)}}}function nl(n){let e,t;return e=new Bt({}),{c(){Ae(e.$$.fragment)},l(l){Le(e.$$.fragment,l)},m(l,s){Me(e,l,s),t=!0},p:_e,i(l){t||(se(e.$$.fragment,l),t=!0)},o(l){ae(e.$$.fragment,l),t=!1},d(l){Pe(e,l)}}}function sl(n){let e;function t(a,u){return a[5]?.length?il:al}let l=t(n),s=l(n);return{c(){s.c(),e=ie()},l(a){s.l(a),e=ie()},m(a,u){s.m(a,u),O(a,e,u)},p(a,u){l===(l=t(a))&&s?s.p(a,u):(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},i:_e,o:_e,d(a){a&&d(e),s.d(a)}}}function al(n){let e,t="There are no events logged";return{c(){e=m("div"),e.textContent=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),K(e)!=="svelte-10lllm0"&&(e.textContent=t),this.h()},h(){f(e,"class","card-body")},m(l,s){O(l,e,s)},p:_e,d(l){l&&d(e)}}}function il(n){let e,t,l,s,a,u,i,r,g,v,T,c,p,C,D,b,k=He(n[6]),I=[];for(let E=0;E<k.length;E+=1)I[E]=kt(ht(n,k,E));let y=He(n[5]),w=[];for(let E=0;E<y.length;E+=1)w[E]=Nt(mt(n,y,E));return{c(){e=m("div"),t=m("button"),l=m("i"),s=j(`
					Add Announcement`),u=M(),i=m("button"),r=m("i"),g=j(`
					Add New Calendar Event`),T=M(),c=m("ul");for(let E=0;E<I.length;E+=1)I[E].c();p=M(),C=m("ul");for(let E=0;E<w.length;E+=1)w[E].c();this.h()},l(E){e=h(E,"DIV",{class:!0});var S=N(e);t=h(S,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var _=N(t);l=h(_,"I",{class:!0}),N(l).forEach(d),s=z(_,`
					Add Announcement`),_.forEach(d),u=P(S),i=h(S,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var A=N(i);r=h(A,"I",{class:!0}),N(r).forEach(d),g=z(A,`
					Add New Calendar Event`),A.forEach(d),S.forEach(d),T=P(E),c=h(E,"UL",{class:!0});var V=N(c);for(let H=0;H<I.length;H+=1)I[H].l(V);V.forEach(d),p=P(E),C=h(E,"UL",{class:!0});var F=N(C);for(let H=0;H<w.length;H+=1)w[H].l(F);F.forEach(d),this.h()},h(){f(l,"class","bi bi-plus"),f(t,"class","btn btn-sm btn-secondary"),f(t,"type","button"),f(t,"data-bs-toggle","offcanvas"),f(t,"data-bs-target",a="#"+n[0]),f(t,"aria-controls",n[0]),f(r,"class","bi bi-plus"),f(i,"class","btn btn-sm btn-secondary"),f(i,"type","button"),f(i,"data-bs-toggle","offcanvas"),f(i,"data-bs-target",v="#"+n[0]),f(i,"aria-controls",n[0]),f(e,"class","card-body"),f(c,"class","list-group list-group-flush"),f(C,"class","list-group list-group-flush")},m(E,S){O(E,e,S),o(e,t),o(t,l),o(t,s),o(e,u),o(e,i),o(i,r),o(i,g),O(E,T,S),O(E,c,S);for(let _=0;_<I.length;_+=1)I[_]&&I[_].m(c,null);O(E,p,S),O(E,C,S);for(let _=0;_<w.length;_+=1)w[_]&&w[_].m(C,null);D||(b=[q(t,"click",n[16]),q(i,"click",n[17])],D=!0)},p(E,S){if(S&1&&a!==(a="#"+E[0])&&f(t,"data-bs-target",a),S&1&&f(t,"aria-controls",E[0]),S&1&&v!==(v="#"+E[0])&&f(i,"data-bs-target",v),S&1&&f(i,"aria-controls",E[0]),S&57411){k=He(E[6]);let _;for(_=0;_<k.length;_+=1){const A=ht(E,k,_);I[_]?I[_].p(A,S):(I[_]=kt(A),I[_].c(),I[_].m(c,null))}for(;_<I.length;_+=1)I[_].d(1);I.length=k.length}if(S&63523){y=He(E[5]);let _;for(_=0;_<y.length;_+=1){const A=mt(E,y,_);w[_]?w[_].p(A,S):(w[_]=Nt(A),w[_].c(),w[_].m(C,null))}for(;_<w.length;_+=1)w[_].d(1);w.length=y.length}},d(E){E&&(d(e),d(T),d(c),d(p),d(C)),tt(I,E),tt(w,E),D=!1,Qe(b)}}}function pt(n){let e,t=!n[22].is_all_day&&vt(n);return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),O(l,e,s)},p(l,s){l[22].is_all_day?t&&(t.d(1),t=null):t?t.p(l,s):(t=vt(l),t.c(),t.m(e.parentNode,e))},d(l){l&&d(e),t&&t.d(l)}}}function vt(n){let e,t=n[13](n[22].start_time)+"",l,s,a=n[13](n[22].end_time)+"",u;return{c(){e=m("span"),l=j(t),s=j(" to "),u=j(a),this.h()},l(i){e=h(i,"SPAN",{class:!0});var r=N(e);l=z(r,t),s=z(r," to "),u=z(r,a),r.forEach(d),this.h()},h(){f(e,"class","d-block")},m(i,r){O(i,e,r),o(e,l),o(e,s),o(e,u)},p(i,r){r&64&&t!==(t=i[13](i[22].start_time)+"")&&te(l,t),r&64&&a!==(a=i[13](i[22].end_time)+"")&&te(u,a)},d(i){i&&d(e)}}}function bt(n){let e,t=n[22].description+"",l;return{c(){e=m("span"),l=j(t),this.h()},l(s){e=h(s,"SPAN",{class:!0});var a=N(e);l=z(a,t),a.forEach(d),this.h()},h(){f(e,"class","d-block small")},m(s,a){O(s,e,a),o(e,l)},p(s,a){a&64&&t!==(t=s[22].description+"")&&te(l,t)},d(s){s&&d(e)}}}function gt(n){let e,t=n[22].location+"",l;return{c(){e=m("em"),l=j(t),this.h()},l(s){e=h(s,"EM",{class:!0});var a=N(e);l=z(a,t),a.forEach(d),this.h()},h(){f(e,"class","d-block small fw-lighter")},m(s,a){O(s,e,a),o(e,l)},p(s,a){a&64&&t!==(t=s[22].location+"")&&te(l,t)},d(s){s&&d(e)}}}function Et(n){let e,t,l,s,a;function u(){return n[18](n[22])}return{c(){e=m("button"),t=m("i"),this.h()},l(i){e=h(i,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var r=N(e);t=h(r,"I",{class:!0}),N(t).forEach(d),r.forEach(d),this.h()},h(){f(t,"class","bi bi-pencil"),f(e,"class","btn btn-sm btn-secondary"),f(e,"type","button"),f(e,"data-bs-toggle","offcanvas"),f(e,"data-bs-target",l="#"+n[0]),f(e,"aria-controls",n[0])},m(i,r){O(i,e,r),o(e,t),s||(a=q(e,"click",u),s=!0)},p(i,r){n=i,r&1&&l!==(l="#"+n[0])&&f(e,"data-bs-target",l),r&1&&f(e,"aria-controls",n[0])},d(i){i&&d(e),s=!1,a()}}}function kt(n){let e,t,l,s,a,u=n[22].title+"",i,r,g=n[15](n[22]),v,T,c,p,C,D=g&&pt(n),b=n[22].description&&bt(n),k=n[22].location&&gt(n),I=n[1]&&Et(n);return{c(){e=m("li"),t=m("div"),l=m("div"),s=m("div"),a=m("strong"),i=j(u),r=M(),D&&D.c(),v=M(),b&&b.c(),T=M(),k&&k.c(),c=M(),p=m("div"),I&&I.c(),C=M(),this.h()},l(y){e=h(y,"LI",{class:!0});var w=N(e);t=h(w,"DIV",{class:!0});var E=N(t);l=h(E,"DIV",{class:!0});var S=N(l);s=h(S,"DIV",{});var _=N(s);a=h(_,"STRONG",{});var A=N(a);i=z(A,u),A.forEach(d),r=P(_),D&&D.l(_),v=P(_),b&&b.l(_),T=P(_),k&&k.l(_),_.forEach(d),S.forEach(d),c=P(E),p=h(E,"DIV",{});var V=N(p);I&&I.l(V),V.forEach(d),E.forEach(d),C=P(w),w.forEach(d),this.h()},h(){f(l,"class","d-flex flex-sm-column flex-md-row flex-xl-row flex-lg-row gap-3"),f(t,"class","d-flex justify-content-between"),f(e,"class","list-group-item")},m(y,w){O(y,e,w),o(e,t),o(t,l),o(l,s),o(s,a),o(a,i),o(s,r),D&&D.m(s,null),o(s,v),b&&b.m(s,null),o(s,T),k&&k.m(s,null),o(t,c),o(t,p),I&&I.m(p,null),o(e,C)},p(y,w){w&64&&u!==(u=y[22].title+"")&&te(i,u),w&64&&(g=y[15](y[22])),g?D?D.p(y,w):(D=pt(y),D.c(),D.m(s,v)):D&&(D.d(1),D=null),y[22].description?b?b.p(y,w):(b=bt(y),b.c(),b.m(s,T)):b&&(b.d(1),b=null),y[22].location?k?k.p(y,w):(k=gt(y),k.c(),k.m(s,null)):k&&(k.d(1),k=null),y[1]?I?I.p(y,w):(I=Et(y),I.c(),I.m(p,null)):I&&(I.d(1),I=null)},d(y){y&&d(e),D&&D.d(),b&&b.d(),k&&k.d(),I&&I.d()}}}function Ct(n){let e,t=n[11](n[22].start_time)+"",l,s,a,u,i,r=n[12](n[22].start_time)+"",g;return{c(){e=m("strong"),l=j(t),s=M(),a=m("br"),u=M(),i=m("small"),g=j(r)},l(v){e=h(v,"STRONG",{});var T=N(e);l=z(T,t),s=P(T),T.forEach(d),a=h(v,"BR",{}),u=P(v),i=h(v,"SMALL",{});var c=N(i);g=z(c,r),c.forEach(d)},m(v,T){O(v,e,T),o(e,l),o(e,s),O(v,a,T),O(v,u,T),O(v,i,T),o(i,g)},p(v,T){T&32&&t!==(t=v[11](v[22].start_time)+"")&&te(l,t),T&32&&r!==(r=v[12](v[22].start_time)+"")&&te(g,r)},d(v){v&&(d(e),d(a),d(u),d(i))}}}function It(n){let e,t=!n[22].is_all_day&&yt(n);return{c(){t&&t.c(),e=ie()},l(l){t&&t.l(l),e=ie()},m(l,s){t&&t.m(l,s),O(l,e,s)},p(l,s){l[22].is_all_day?t&&(t.d(1),t=null):t?t.p(l,s):(t=yt(l),t.c(),t.m(e.parentNode,e))},d(l){l&&d(e),t&&t.d(l)}}}function yt(n){let e,t=n[13](n[22].start_time)+"",l,s,a=n[13](n[22].end_time)+"",u;return{c(){e=m("span"),l=j(t),s=j(" to "),u=j(a),this.h()},l(i){e=h(i,"SPAN",{class:!0});var r=N(e);l=z(r,t),s=z(r," to "),u=z(r,a),r.forEach(d),this.h()},h(){f(e,"class","d-block")},m(i,r){O(i,e,r),o(e,l),o(e,s),o(e,u)},p(i,r){r&32&&t!==(t=i[13](i[22].start_time)+"")&&te(l,t),r&32&&a!==(a=i[13](i[22].end_time)+"")&&te(u,a)},d(i){i&&d(e)}}}function Tt(n){let e,t=n[22].description+"",l;return{c(){e=m("span"),l=j(t),this.h()},l(s){e=h(s,"SPAN",{class:!0});var a=N(e);l=z(a,t),a.forEach(d),this.h()},h(){f(e,"class","d-block small")},m(s,a){O(s,e,a),o(e,l)},p(s,a){a&32&&t!==(t=s[22].description+"")&&te(l,t)},d(s){s&&d(e)}}}function Dt(n){let e,t=n[22].location+"",l;return{c(){e=m("em"),l=j(t),this.h()},l(s){e=h(s,"EM",{class:!0});var a=N(e);l=z(a,t),a.forEach(d),this.h()},h(){f(e,"class","d-block small fw-lighter")},m(s,a){O(s,e,a),o(e,l)},p(s,a){a&32&&t!==(t=s[22].location+"")&&te(l,t)},d(s){s&&d(e)}}}function wt(n){let e,t,l,s,a;function u(){return n[19](n[22])}return{c(){e=m("button"),t=m("i"),this.h()},l(i){e=h(i,"BUTTON",{class:!0,type:!0,"data-bs-toggle":!0,"data-bs-target":!0,"aria-controls":!0});var r=N(e);t=h(r,"I",{class:!0}),N(t).forEach(d),r.forEach(d),this.h()},h(){f(t,"class","bi bi-pencil"),f(e,"class","btn btn-sm btn-secondary"),f(e,"type","button"),f(e,"data-bs-toggle","offcanvas"),f(e,"data-bs-target",l="#"+n[0]),f(e,"aria-controls",n[0])},m(i,r){O(i,e,r),o(e,t),s||(a=q(e,"click",u),s=!0)},p(i,r){n=i,r&1&&l!==(l="#"+n[0])&&f(e,"data-bs-target",l),r&1&&f(e,"aria-controls",n[0])},d(i){i&&d(e),s=!1,a()}}}function Nt(n){let e,t,l,s,a=n[15](n[22]),u,i,r,g=n[22].title+"",v,T,c=n[15](n[22]),p,C,D,b,k,I=a&&Ct(n),y=c&&It(n),w=n[22].description&&Tt(n),E=n[22].location&&Dt(n),S=n[1]&&wt(n);return{c(){e=m("li"),t=m("div"),l=m("div"),s=m("div"),I&&I.c(),u=M(),i=m("div"),r=m("strong"),v=j(g),T=M(),y&&y.c(),p=M(),w&&w.c(),C=M(),E&&E.c(),D=M(),b=m("div"),S&&S.c(),k=M(),this.h()},l(_){e=h(_,"LI",{class:!0});var A=N(e);t=h(A,"DIV",{class:!0});var V=N(t);l=h(V,"DIV",{class:!0});var F=N(l);s=h(F,"DIV",{style:!0});var H=N(s);I&&I.l(H),H.forEach(d),u=P(F),i=h(F,"DIV",{});var R=N(i);r=h(R,"STRONG",{});var re=N(r);v=z(re,g),re.forEach(d),T=P(R),y&&y.l(R),p=P(R),w&&w.l(R),C=P(R),E&&E.l(R),R.forEach(d),F.forEach(d),D=P(V),b=h(V,"DIV",{});var me=N(b);S&&S.l(me),me.forEach(d),V.forEach(d),k=P(A),A.forEach(d),this.h()},h(){Ft(s,"width","85px"),f(l,"class","d-flex flex-sm-column flex-md-row flex-xl-row flex-lg-row gap-3"),f(t,"class","d-flex justify-content-between"),f(e,"class","list-group-item")},m(_,A){O(_,e,A),o(e,t),o(t,l),o(l,s),I&&I.m(s,null),o(l,u),o(l,i),o(i,r),o(r,v),o(i,T),y&&y.m(i,null),o(i,p),w&&w.m(i,null),o(i,C),E&&E.m(i,null),o(t,D),o(t,b),S&&S.m(b,null),o(e,k)},p(_,A){A&32&&(a=_[15](_[22])),a?I?I.p(_,A):(I=Ct(_),I.c(),I.m(s,null)):I&&(I.d(1),I=null),A&32&&g!==(g=_[22].title+"")&&te(v,g),A&32&&(c=_[15](_[22])),c?y?y.p(_,A):(y=It(_),y.c(),y.m(i,p)):y&&(y.d(1),y=null),_[22].description?w?w.p(_,A):(w=Tt(_),w.c(),w.m(i,C)):w&&(w.d(1),w=null),_[22].location?E?E.p(_,A):(E=Dt(_),E.c(),E.m(i,null)):E&&(E.d(1),E=null),_[1]?S?S.p(_,A):(S=wt(_),S.c(),S.m(b,null)):S&&(S.d(1),S=null)},d(_){_&&d(e),I&&I.d(),y&&y.d(),w&&w.d(),E&&E.d(),S&&S.d()}}}function rl(n){let e,t,l,s,a="Calendar Events",u,i,r,g;e=new Wt({props:{title:n[2],id:n[0],$$slots:{default:[ll]},$$scope:{ctx:n}}});const v=[sl,nl],T=[];function c(p,C){return p[4]?0:1}return i=c(n),r=T[i]=v[i](n),{c(){Ae(e.$$.fragment),t=M(),l=m("div"),s=m("div"),s.textContent=a,u=M(),r.c(),this.h()},l(p){Le(e.$$.fragment,p),t=P(p),l=h(p,"DIV",{class:!0});var C=N(l);s=h(C,"DIV",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-1on85xs"&&(s.textContent=a),u=P(C),r.l(C),C.forEach(d),this.h()},h(){f(s,"class","card-header"),f(l,"class","card")},m(p,C){Me(e,p,C),O(p,t,C),O(p,l,C),o(l,s),o(l,u),T[i].m(l,null),g=!0},p(p,[C]){const D={};C&4&&(D.title=p[2]),C&1&&(D.id=p[0]),C&134217736&&(D.$$scope={dirty:C,ctx:p}),e.$set(D);let b=i;i=c(p),i===b?T[i].p(p,C):(Vt(),ae(T[b],1,1,()=>{T[b]=null}),At(),r=T[i],r?r.p(p,C):(r=T[i]=v[i](p),r.c()),se(r,1),r.m(l,null))},i(p){g||(se(e.$$.fragment,p),se(r),g=!0)},o(p){ae(e.$$.fragment,p),ae(r),g=!1},d(p){p&&(d(t),d(l)),Pe(e,p),T[i].d()}}}let ol="New Calendar Event",fl="Edit Calendar Event";function ul(n,e,t){let l,s,a;const{actions:{featureIsEnabled:u}}=Lt(),{stores:{ready:i,calendarEvents:r,announcements:g},actions:{reload:v}}=Ot();et(n,i,V=>t(4,l=V)),et(n,r,V=>t(5,s=V)),et(n,g,V=>t(6,a=V));const T={title:"Event",description:"",location:"",event_type:"announcement"};let{formId:c=Yt()}=e,p=!1,C="",D={...T};St(async()=>{t(1,p=u(Mt.EditDBCalendarEvent)),await v()});const b=V=>{if(!V)return"";const F=Ne(V),H=Se(F,Ve);return we(H,"MMM, dd")},k=V=>{if(!V)return"";const F=Ne(V),H=Se(F,Ve);return we(H,"EEEE")},I=V=>{if(!V)return"";const F=Ne(V),H=Se(F,Ve);return we(H,"h:mm aa")},y=(V=void 0)=>{V?(t(2,C=fl),t(3,D=V)):(t(2,C=ol),t(3,D={...T}))},w=V=>V.event_type==="calendar_event",E=()=>y({...T,event_type:"announcement"}),S=()=>y({...T,event_type:"calendar_event"}),_=V=>y(V),A=V=>y(V);return n.$$set=V=>{"formId"in V&&t(0,c=V.formId)},[c,p,C,D,l,s,a,i,r,g,T,b,k,I,y,w,E,S,_,A]}class cl extends Xe{constructor(e){super(),Je(this,e,ul,rl,Ze,{formId:0})}}function dl(n,e,t){const l=n.slice();return l[0]=e[t],l}function _l(n){let e,t,l,s=n[0].when+"",a,u,i,r=n[0].title+"",g,v,T,c,p,C=n[0].details+"",D;return{c(){e=m("li"),t=m("strong"),l=m("small"),a=j(s),u=m("br"),i=M(),g=j(r),v=m("br"),T=M(),c=m("em"),p=new Ht(!1),D=M(),this.h()},l(b){e=h(b,"LI",{class:!0});var k=N(e);t=h(k,"STRONG",{});var I=N(t);l=h(I,"SMALL",{});var y=N(l);a=z(y,s),y.forEach(d),I.forEach(d),u=h(k,"BR",{}),i=P(k),g=z(k,r),v=h(k,"BR",{}),T=P(k),c=h(k,"EM",{class:!0});var w=N(c);p=qt(w,!1),w.forEach(d),D=P(k),k.forEach(d),this.h()},h(){p.a=null,f(c,"class","small fw-lighter"),f(e,"class","list-group-item")},m(b,k){O(b,e,k),o(e,t),o(t,l),o(l,a),o(e,u),o(e,i),o(e,g),o(e,v),o(e,T),o(e,c),p.m(C,c),o(e,D)},p:_e,d(b){b&&d(e)}}}function ml(n){let e,t,l="Announcements",s,a,u=He(Kt),i=[];for(let r=0;r<u.length;r+=1)i[r]=_l(dl(n,u,r));return{c(){e=m("div"),t=m("div"),t.textContent=l,s=M(),a=m("ul");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=h(r,"DIV",{class:!0});var g=N(e);t=h(g,"DIV",{class:!0,"data-svelte-h":!0}),K(t)!=="svelte-rw6gj3"&&(t.textContent=l),s=P(g),a=h(g,"UL",{class:!0});var v=N(a);for(let T=0;T<i.length;T+=1)i[T].l(v);v.forEach(d),g.forEach(d),this.h()},h(){f(t,"class","card-header"),f(a,"class","list-group list-group-flush"),f(e,"class","card")},m(r,g){O(r,e,g),o(e,t),o(e,s),o(e,a);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(a,null)},p:_e,i:_e,o:_e,d(r){r&&d(e),tt(i,r)}}}class hl extends Xe{constructor(e){super(),Je(this,e,null,ml,Ze,{})}}function pl(n){let e,t;return e=new hl({}),{c(){Ae(e.$$.fragment)},l(l){Le(e.$$.fragment,l)},m(l,s){Me(e,l,s),t=!0},i(l){t||(se(e.$$.fragment,l),t=!0)},o(l){ae(e.$$.fragment,l),t=!1},d(l){Pe(e,l)}}}function vl(n){let e,t;return e=new cl({}),{c(){Ae(e.$$.fragment)},l(l){Le(e.$$.fragment,l)},m(l,s){Me(e,l,s),t=!0},i(l){t||(se(e.$$.fragment,l),t=!0)},o(l){ae(e.$$.fragment,l),t=!1},d(l){Pe(e,l)}}}function bl(n){let e,t,l,s;const a=[vl,pl],u=[];function i(r,g){return r[0]?0:1}return e=i(n),t=u[e]=a[e](n),{c(){t.c(),l=ie()},l(r){t.l(r),l=ie()},m(r,g){u[e].m(r,g),O(r,l,g),s=!0},p(r,[g]){let v=e;e=i(r),e!==v&&(Vt(),ae(u[v],1,1,()=>{u[v]=null}),At(),t=u[e],t||(t=u[e]=a[e](r),t.c()),se(t,1),t.m(l.parentNode,l))},i(r){s||(se(t),s=!0)},o(r){ae(t),s=!1},d(r){r&&d(l),u[e].d(r)}}}function gl(n,e,t){const{actions:{featureIsEnabled:l}}=Lt();let s=!1;return St(async()=>{t(0,s=l(Mt.ViewDBCalendarEvents))}),[s]}class Vl extends Xe{constructor(e){super(),Je(this,e,gl,bl,Ze,{})}}export{Vl as C};
