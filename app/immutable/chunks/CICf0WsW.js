import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as st,ai as Re,D as H,E as de,w as V,g as l,aj as Ut,c as z,s as W,u as J,r as S,t as ge,a as ot,f as je,F as nt,i as vr,am as In,R as Ct,as as dr,z as Mn}from"./CPOcesE7.js";import{p as he,i as ce,e as De,s as be,b as mr,a as zr,k as Rn,m as Cn,u as Fn}from"./opPvMm1W.js";import{f as se,a as ee,c as Wt,t as Je}from"./YsHTGu5k.js";import{e as Qt,i as Hr}from"./DAwrR-3T.js";import{k as Ht,h as Lt,m as kt,b as At,t as Tt,n as Vt,g as Br,D as Pn,f as Pt,o as On,p as Un,u as Sn,q as qr,r as $t,s as Ot,v as Nr,B as Ln}from"./BDrIpSzK.js";import{e as Yr,s as Ie,b as hr,r as Xe}from"./DaR1hxxh.js";import{z as Wr,t as Et,y as et,I as zn,J as Hn,K as Bn,L as qn,o as pr,H as Qr,M as Nn,G as Yn,q as $r,B as Wn,N as Cr,Q as Qn,R as Fr,T as $n,c as rt,h as jn,f as He,p as Yt,A as Ze,g as jr,U as Gn,O as Qe}from"./Bn9b25fh.js";import{s as Xt}from"./CdEA5IGF.js";import{i as ct}from"./C2Q_9cr2.js";import{R as Pe}from"./XOESS4D6.js";import{S as Gr}from"./BsnDzLp8.js";import{b as gt,a as _r,c as ur}from"./QDlYjqxz.js";import{b as zt}from"./C34nsrD6.js";import{b as It}from"./DLuN8Kcu.js";import{c as Kn,o as Vn,w as Xn,g as yr}from"./DHXte27T.js";import{t as xt}from"./r7-tBYgy.js";import{c as Zn}from"./wYBrnCLn.js";import{c as Jn,a as mt,e as Pr,f as ea,d as ta,V as ra}from"./Bai7YTd4.js";import{_ as gr}from"./CmsKOCeN.js";function na(){return Object.assign({},Wr())}function aa(d){let i=Et(d).getDay();return i===0&&(i=7),i}function ia(d,e){const i=e instanceof Date?et(e,0):new e(0);return i.setFullYear(d.getFullYear(),d.getMonth(),d.getDate()),i.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),i}const sa=10;class Kr{subPriority=0;validate(e,i){return!0}}class oa extends Kr{constructor(e,i,r,n,a){super(),this.value=e,this.validateValue=i,this.setValue=r,this.priority=n,a&&(this.subPriority=a)}validate(e,i){return this.validateValue(e,this.value,i)}set(e,i,r){return this.setValue(e,i,this.value,r)}}class la extends Kr{priority=sa;subPriority=-1;set(e,i){return i.timestampIsSet?e:et(e,ia(e,Date))}}class Fe{run(e,i,r,n){const a=this.parse(e,i,r,n);return a?{setter:new oa(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,i,r){return!0}}class ca extends Fe{priority=140;parse(e,i,r){switch(i){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,i,r){return i.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Ne={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},pt={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ye(d,e){return d&&{value:e(d.value),rest:d.rest}}function Be(d,e){const i=e.match(d);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function yt(d,e){const i=e.match(d);if(!i)return null;if(i[0]==="Z")return{value:0,rest:e.slice(1)};const r=i[1]==="+"?1:-1,n=i[2]?parseInt(i[2],10):0,a=i[3]?parseInt(i[3],10):0,c=i[5]?parseInt(i[5],10):0;return{value:r*(n*zn+a*Hn+c*Bn),rest:e.slice(i[0].length)}}function Vr(d){return Be(Ne.anyDigitsSigned,d)}function qe(d,e){switch(d){case 1:return Be(Ne.singleDigit,e);case 2:return Be(Ne.twoDigits,e);case 3:return Be(Ne.threeDigits,e);case 4:return Be(Ne.fourDigits,e);default:return Be(new RegExp("^\\d{1,"+d+"}"),e)}}function Zt(d,e){switch(d){case 1:return Be(Ne.singleDigitSigned,e);case 2:return Be(Ne.twoDigitsSigned,e);case 3:return Be(Ne.threeDigitsSigned,e);case 4:return Be(Ne.fourDigitsSigned,e);default:return Be(new RegExp("^-?\\d{1,"+d+"}"),e)}}function wr(d){switch(d){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Xr(d,e){const i=e>0,r=i?e:1-e;let n;if(r<=50)n=d||100;else{const a=r+50,c=Math.trunc(a/100)*100,u=d>=a%100;n=d+c-(u?100:0)}return i?n:1-n}function Zr(d){return d%400===0||d%4===0&&d%100!==0}class da extends Fe{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,i,r){const n=a=>({year:a,isTwoDigitYear:i==="yy"});switch(i){case"y":return Ye(qe(4,e),n);case"yo":return Ye(r.ordinalNumber(e,{unit:"year"}),n);default:return Ye(qe(i.length,e),n)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r){const n=e.getFullYear();if(r.isTwoDigitYear){const c=Xr(r.year,n);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class ua extends Fe{priority=130;parse(e,i,r){const n=a=>({year:a,isTwoDigitYear:i==="YY"});switch(i){case"Y":return Ye(qe(4,e),n);case"Yo":return Ye(r.ordinalNumber(e,{unit:"year"}),n);default:return Ye(qe(i.length,e),n)}}validate(e,i){return i.isTwoDigitYear||i.year>0}set(e,i,r,n){const a=qn(e,n);if(r.isTwoDigitYear){const u=Xr(r.year,a);return e.setFullYear(u,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),pr(e,n)}const c=!("era"in i)||i.era===1?r.year:1-r.year;return e.setFullYear(c,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),pr(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class fa extends Fe{priority=130;parse(e,i){return Zt(i==="R"?4:i.length,e)}set(e,i,r){const n=et(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Qr(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class va extends Fe{priority=130;parse(e,i){return Zt(i==="u"?4:i.length,e)}set(e,i,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class ma extends Fe{priority=120;parse(e,i,r){switch(i){case"Q":case"QQ":return qe(i.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class ha extends Fe{priority=120;parse(e,i,r){switch(i){case"q":case"qq":return qe(i.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=1&&i<=4}set(e,i,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class pa extends Fe{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,i,r){const n=a=>a-1;switch(i){case"M":return Ye(Be(Ne.month,e),n);case"MM":return Ye(qe(2,e),n);case"Mo":return Ye(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ya extends Fe{priority=110;parse(e,i,r){const n=a=>a-1;switch(i){case"L":return Ye(Be(Ne.month,e),n);case"LL":return Ye(qe(2,e),n);case"Lo":return Ye(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function ga(d,e,i){const r=Et(d),n=Nn(r,i)-e;return r.setDate(r.getDate()-n*7),r}class ba extends Fe{priority=100;parse(e,i,r){switch(i){case"w":return Be(Ne.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return qe(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r,n){return pr(ga(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function _a(d,e){const i=Et(d),r=Yn(i)-e;return i.setDate(i.getDate()-r*7),i}class wa extends Fe{priority=100;parse(e,i,r){switch(i){case"I":return Be(Ne.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return qe(i.length,e)}}validate(e,i){return i>=1&&i<=53}set(e,i,r){return Qr(_a(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const xa=[31,28,31,30,31,30,31,31,30,31,30,31],Ea=[31,29,31,30,31,30,31,31,30,31,30,31];class Da extends Fe{priority=90;subPriority=1;parse(e,i,r){switch(i){case"d":return Be(Ne.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return qe(i.length,e)}}validate(e,i){const r=e.getFullYear(),n=Zr(r),a=e.getMonth();return n?i>=1&&i<=Ea[a]:i>=1&&i<=xa[a]}set(e,i,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class ka extends Fe{priority=90;subpriority=1;parse(e,i,r){switch(i){case"D":case"DD":return Be(Ne.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return qe(i.length,e)}}validate(e,i){const r=e.getFullYear();return Zr(r)?i>=1&&i<=366:i>=1&&i<=365}set(e,i,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function xr(d,e,i){const r=Wr(),n=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Et(d),c=a.getDay(),y=(e%7+7)%7,b=7-n,o=e<0||e>6?e-(c+b)%7:(y+b)%7-(c+b)%7;return Ht(a,o)}class Aa extends Fe{priority=90;parse(e,i,r){switch(i){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=xr(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class Ta extends Fe{priority=90;parse(e,i,r,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(i){case"e":case"ee":return Ye(qe(i.length,e),a);case"eo":return Ye(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=xr(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Ia extends Fe{priority=90;parse(e,i,r,n){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+n.weekStartsOn+6)%7+u};switch(i){case"c":case"cc":return Ye(qe(i.length,e),a);case"co":return Ye(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,i){return i>=0&&i<=6}set(e,i,r,n){return e=xr(e,r,n),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Ma(d,e){const i=Et(d),r=aa(i),n=e-r;return Ht(i,n)}class Ra extends Fe{priority=90;parse(e,i,r){const n=a=>a===0?7:a;switch(i){case"i":case"ii":return qe(i.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Ye(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return Ye(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return Ye(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiii":default:return Ye(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,i){return i>=1&&i<=7}set(e,i,r){return e=Ma(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class Ca extends Fe{priority=80;parse(e,i,r){switch(i){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(wr(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class Fa extends Fe{priority=80;parse(e,i,r){switch(i){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(wr(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class Pa extends Fe{priority=80;parse(e,i,r){switch(i){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,i,r){return e.setHours(wr(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class Oa extends Fe{priority=70;parse(e,i,r){switch(i){case"h":return Be(Ne.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return qe(i.length,e)}}validate(e,i){return i>=1&&i<=12}set(e,i,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):!n&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class Ua extends Fe{priority=70;parse(e,i,r){switch(i){case"H":return Be(Ne.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return qe(i.length,e)}}validate(e,i){return i>=0&&i<=23}set(e,i,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Sa extends Fe{priority=70;parse(e,i,r){switch(i){case"K":return Be(Ne.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return qe(i.length,e)}}validate(e,i){return i>=0&&i<=11}set(e,i,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class La extends Fe{priority=70;parse(e,i,r){switch(i){case"k":return Be(Ne.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return qe(i.length,e)}}validate(e,i){return i>=1&&i<=24}set(e,i,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class za extends Fe{priority=60;parse(e,i,r){switch(i){case"m":return Be(Ne.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return qe(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class Ha extends Fe{priority=50;parse(e,i,r){switch(i){case"s":return Be(Ne.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return qe(i.length,e)}}validate(e,i){return i>=0&&i<=59}set(e,i,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Ba extends Fe{priority=30;parse(e,i){const r=n=>Math.trunc(n*Math.pow(10,-i.length+3));return Ye(qe(i.length,e),r)}set(e,i,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class qa extends Fe{priority=10;parse(e,i){switch(i){case"X":return yt(pt.basicOptionalMinutes,e);case"XX":return yt(pt.basic,e);case"XXXX":return yt(pt.basicOptionalSeconds,e);case"XXXXX":return yt(pt.extendedOptionalSeconds,e);case"XXX":default:return yt(pt.extended,e)}}set(e,i,r){return i.timestampIsSet?e:et(e,e.getTime()-$r(e)-r)}incompatibleTokens=["t","T","x"]}class Na extends Fe{priority=10;parse(e,i){switch(i){case"x":return yt(pt.basicOptionalMinutes,e);case"xx":return yt(pt.basic,e);case"xxxx":return yt(pt.basicOptionalSeconds,e);case"xxxxx":return yt(pt.extendedOptionalSeconds,e);case"xxx":default:return yt(pt.extended,e)}}set(e,i,r){return i.timestampIsSet?e:et(e,e.getTime()-$r(e)-r)}incompatibleTokens=["t","T","X"]}class Ya extends Fe{priority=40;parse(e){return Vr(e)}set(e,i,r){return[et(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Wa extends Fe{priority=20;parse(e){return Vr(e)}set(e,i,r){return[et(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Qa={G:new ca,y:new da,Y:new ua,R:new fa,u:new va,Q:new ma,q:new ha,M:new pa,L:new ya,w:new ba,I:new wa,d:new Da,D:new ka,E:new Aa,e:new Ta,c:new Ia,i:new Ra,a:new Ca,b:new Fa,B:new Pa,h:new Oa,H:new Ua,K:new Sa,k:new La,m:new za,s:new Ha,S:new Ba,X:new qa,x:new Na,t:new Ya,T:new Wa},$a=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ja=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ga=/^'([^]*?)'?$/,Ka=/''/g,Va=/\S/,Xa=/[a-zA-Z]/;function Jt(d,e,i,r){const n=na(),a=r?.locale??n.locale??Wn,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0;if(e==="")return d===""?Et(i):et(i,NaN);const y={firstWeekContainsDate:c,weekStartsOn:u,locale:a},b=[new la],o=e.match(ja).map(x=>{const I=x[0];if(I in Cr){const E=Cr[I];return E(x,a.formatLong)}return x}).join("").match($a),t=[];for(let x of o){!r?.useAdditionalWeekYearTokens&&Qn(x)&&Fr(x,e,d),!r?.useAdditionalDayOfYearTokens&&$n(x)&&Fr(x,e,d);const I=x[0],E=Qa[I];if(E){const{incompatibleTokens:B}=E;if(Array.isArray(B)){const P=t.find(L=>B.includes(L.token)||L.token===I);if(P)throw new RangeError(`The format string mustn't contain \`${P.fullToken}\` and \`${x}\` at the same time`)}else if(E.incompatibleTokens==="*"&&t.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);t.push({token:I,fullToken:x});const U=E.run(d,x,a.match,y);if(!U)return et(i,NaN);b.push(U.setter),d=U.rest}else{if(I.match(Xa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+I+"`");if(x==="''"?x="'":I==="'"&&(x=Za(x)),d.indexOf(x)===0)d=d.slice(x.length);else return et(i,NaN)}}if(d.length>0&&Va.test(d))return et(i,NaN);const s=b.map(x=>x.priority).sort((x,I)=>I-x).filter((x,I,E)=>E.indexOf(x)===I).map(x=>b.filter(I=>I.priority===x).sort((I,E)=>E.subPriority-I.subPriority)).map(x=>x[0]);let f=Et(i);if(isNaN(f.getTime()))return et(i,NaN);const g={};for(const x of s){if(!x.validate(f,y))return et(i,NaN);const I=x.set(f,g,y);Array.isArray(I)?(f=I[0],Object.assign(g,I[1])):f=I}return et(i,f)}function Za(d){return d.match(Ga)[1].replace(Ka,"'")}function Ja(d,e){const i=Et(d);return i.setHours(e),i}function ei(d,e){const i=Et(d);return i.setMinutes(e),i}var ti=se('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),ri=se('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),ni=se('<span class="d-block small svelte-1rksp2z"> </span>'),ai=se('<span class="text-muted">•</span>'),ii=se("<span> </span> <!>",1),si=se('<span class="text-muted">•</span>'),oi=se('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),li=se('<span class="text-muted">•</span>'),ci=se('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),di=se('<span class="text-muted">•</span>'),ui=se('<em class="small fw-lighter svelte-1rksp2z"><!></em> <!>',1),fi=se('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),vi=se('<div class="small svelte-1rksp2z"><!></div>'),mi=se('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),hi=se('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),pi=se('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),yi=se('<div class="small text-muted posted-meta svelte-1rksp2z">Posted <!> <!></div>'),gi=se('<div class="small text-muted posted-meta svelte-1rksp2z">Last edited <!> <!></div>'),bi=se('<div class="details-container svelte-1rksp2z"><!> <!> <!> <!></div>'),_i=se('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),wi=se('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="fw-bold svelte-1rksp2z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function Ao(d,e){st(e,!1);const i=de(),r=de(),n=de(),a=de(),c=de(),u=de(),y=de(),b=de(),o=de();let t=he(e,"item",8),s=he(e,"showDetails",12,!1),f=he(e,"showDate",8,!0),g=he(e,"searchQuery",8,"");const x=j=>{if(!j)return"";const te=Yt(j),G=Tt(te,Ze);return He(G,"h:mm aa")},I=j=>{if(!j)return"";const te=Yt(j),G=Tt(te,Ze);return He(G,"EEE")},E=j=>{if(!j)return"";const te=Yt(j),G=Tt(te,Ze);return He(G,"MMM, dd")},B=()=>{l(r)&&s(!s())},U=j=>{l(r)&&(j.key==="Enter"||j.key===" ")&&B()},P=j=>j<1024?j+" B":j<1024*1024?(j/1024).toFixed(1)+" KB":(j/(1024*1024)).toFixed(1)+" MB",L=j=>j.startsWith("image/"),_=j=>{window.open(j,"_blank")},M=j=>{if(!j)return"";try{return He(Yt(j),"MMM d, yyyy 'at' h:mm a")}catch{return""}},m=j=>{try{const G=Pe.fromString(j).origOptions,ie=G.interval||1,ne=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Z=["","1st","2nd","3rd","4th","5th"];if(G.freq===Pe.DAILY)return ie===1?"Repeats daily":`Repeats every ${ie} days`;if(G.freq===Pe.WEEKLY){if(G.byweekday){const ae=(Array.isArray(G.byweekday)?G.byweekday:[G.byweekday]).map(pe=>{const ye=typeof pe=="number"?pe:pe.weekday,fe=ye===6?0:ye+1;return ne[fe]});return ie===1?ae.length===1?`Repeats every ${ae[0]}`:`Repeats on ${ae.join(", ")}`:`Repeats every ${ie} weeks on ${ae.join(", ")}`}return ie===1?"Repeats weekly":`Repeats every ${ie} weeks`}if(G.freq===Pe.MONTHLY){if(G.byweekday){const ae=(Array.isArray(G.byweekday)?G.byweekday:[G.byweekday])[0];if(ae&&typeof ae=="object"&&"n"in ae&&"weekday"in ae){const pe=ae.weekday,ye=pe===6?0:pe+1,fe=ae.n,we=Z[fe]||`${fe}th`;return ie===1?`Repeats on the ${we} ${ne[ye]} of the month`:`Repeats on the ${we} ${ne[ye]} every ${ie} months`}}if(G.bymonthday){const X=Array.isArray(G.bymonthday)?G.bymonthday[0]:G.bymonthday,ae=X===1?"st":X===2?"nd":X===3?"rd":"th";return ie===1?`Repeats on the ${X}${ae} of the month`:`Repeats on the ${X}${ae} every ${ie} months`}return ie===1?"Repeats monthly":`Repeats every ${ie} months`}if(G.freq===Pe.YEARLY){if(G.bymonth&&G.bymonthday){const X=["","January","February","March","April","May","June","July","August","September","October","November","December"],ae=Array.isArray(G.bymonth)?G.bymonth[0]:G.bymonth,pe=Array.isArray(G.bymonthday)?G.bymonthday[0]:G.bymonthday,ye=pe===1?"st":pe===2?"nd":pe===3?"rd":"th";return ie===1?`Repeats every ${X[ae]} ${pe}${ye}`:`Repeats every ${ie} years on ${X[ae]} ${pe}${ye}`}return ie===1?"Repeats yearly":`Repeats every ${ie} years`}return"Repeats"}catch{return"Repeats"}};let h=de("");Re(()=>V(f()),()=>{H(h,f()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Re(()=>V(t()),()=>{H(i,t().attachments?.find(j=>L(j.type)))}),Re(()=>V(t()),()=>{H(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Re(()=>V(t()),()=>{H(n,t().meta_data?.submitted_at??t().created_at)}),Re(()=>l(n),()=>{H(a,M(l(n)))}),Re(()=>V(t()),()=>{H(c,t().meta_data?.submitted_by_name)}),Re(()=>(l(a),l(c)),()=>{H(u,!!(l(a)||l(c)))}),Re(()=>V(t()),()=>{H(y,M(t().meta_data?.edited_at))}),Re(()=>V(t()),()=>{H(b,t().meta_data?.edited_by_name)}),Re(()=>(l(y),l(b)),()=>{H(o,!!(l(y)||l(b)))}),Ut(),ct();var w=wi(),k=z(w);{var T=j=>{var te=ti(),G=z(te),ie=z(G,!0);S(G);var ne=W(G,2),Z=z(ne),X=z(Z,!0);S(Z),S(ne),S(te),ge((ae,pe)=>{be(ie,ae),be(X,pe)},[()=>(V(t()),J(()=>I(t().start_time))),()=>(V(t()),J(()=>E(t().start_time)))]),ee(j,te)};ce(k,j=>{f()&&j(T)})}var C=W(k,2),D=z(C),F=z(D),p=z(F);Lt(p,()=>(V(kt),V(t()),V(g()),J(()=>kt(t().title||"",g())))),S(F);var v=W(F,2);{var Y=j=>{var te=ri();ee(j,te)},A=j=>{var te=ni(),G=z(te);S(te),ge((ie,ne)=>be(G,`${ie??""} to ${ne??""}`),[()=>(V(t()),J(()=>x(t().start_time))),()=>(V(t()),J(()=>x(t().end_time)))]),ee(j,te)};ce(v,j=>{V(t()),J(()=>t().is_all_day)?j(Y):j(A,!1)})}var R=W(v,2),Q=z(R);{var q=j=>{var te=ii(),G=je(te),ie=z(G,!0);S(G);var ne=W(G,2);{var Z=X=>{var ae=ai();ee(X,ae)};ce(ne,X=>{V(t()),J(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&X(Z)})}ge((X,ae)=>{rt(G,1,`badge rounded-pill bg-color-${X??""}`,"svelte-1rksp2z"),be(ie,ae)},[()=>(V(At),V(t()),J(()=>At(t()?.meta_data?.category)?.color_number)),()=>(V(At),V(t()),J(()=>At(t()?.meta_data?.category)?.label))]),ee(j,te)};ce(Q,j=>{V(t()),J(()=>t()?.meta_data?.category)&&j(q)})}var $=W(Q,2);{var N=j=>{var te=oi(),G=je(te),ie=W(z(G));S(G);var ne=W(G,2);{var Z=X=>{var ae=si();ee(X,ae)};ce(ne,X=>{V(t()),J(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&X(Z)})}ge(X=>be(ie,` ${X??""}`),[()=>(V(t()),J(()=>m(t().recurrence_rule)))]),ee(j,te)},O=j=>{var te=Wt(),G=je(te);{var ie=ne=>{var Z=ci(),X=W(je(Z),2);{var ae=pe=>{var ye=li();ee(pe,ye)};ce(X,pe=>{V(t()),J(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&pe(ae)})}ee(ne,Z)};ce(G,ne=>{V(t()),J(()=>t()?.meta_data?.recurring_instance)&&ne(ie)},!0)}ee(j,te)};ce($,j=>{V(t()),J(()=>t().recurrence_rule)?j(N):j(O,!1)})}var re=W($,2);{var oe=j=>{var te=ui(),G=je(te),ie=z(G);Lt(ie,()=>(V(kt),V(t()),V(g()),J(()=>kt(t().location,g())))),S(G);var ne=W(G,2);{var Z=X=>{var ae=di();ee(X,ae)};ce(ne,X=>{V(t()),J(()=>t().description||t().attachments&&t().attachments.length>0)&&X(Z)})}ee(j,te)};ce(re,j=>{V(t()),J(()=>t().location)&&j(oe)})}var ue=W(re,2);{var ve=j=>{var te=fi(),G=z(te);{var ie=Z=>{var X=Je("Hide");ee(Z,X)},ne=Z=>{var X=Je("Show");ee(Z,X)};ce(G,Z=>{s()?Z(ie):Z(ne,!1)})}nt(),S(te),ee(j,te)};ce(ue,j=>{V(t()),J(()=>t().description||t().attachments&&t().attachments.length>0)&&j(ve)})}S(R);var me=W(R,2);{var _e=j=>{var te=bi(),G=z(te);{var ie=fe=>{var we=vi(),Se=z(we);Lt(Se,()=>(V(Vt),V(t()),V(g()),J(()=>Vt(t().description,g())))),S(we),ee(fe,we)};ce(G,fe=>{V(t()),J(()=>t().description)&&fe(ie)})}var ne=W(G,2);{var Z=fe=>{var we=pi(),Se=W(z(we),2);Qt(Se,5,()=>(V(t()),J(()=>t().attachments)),Ae=>Ae.id,(Ae,xe)=>{var Ge=Wt(),Te=je(Ge);{var Oe=We=>{var Le=mi(),Ue=z(Le),Ke=z(Ue);S(Ue);var dt=W(Ue,2),at=z(dt),bt=z(at,!0);S(at),S(dt),S(Le),ge(()=>{Ie(Ue,"title",`Open ${l(xe),J(()=>l(xe).name)??""}`),Ie(Ke,"src",(l(xe),J(()=>l(xe).url))),Ie(Ke,"alt",(l(xe),J(()=>l(xe).name))),be(bt,(l(xe),J(()=>l(xe).name)))}),De("click",Ue,Xt(()=>_(l(xe).url))),ee(We,Le)},$e=We=>{var Le=hi(),Ue=W(z(Le),2),Ke=z(Ue,!0);S(Ue);var dt=W(Ue,2),at=z(dt);S(dt),S(Le),ge(bt=>{Ie(Le,"title",`Open ${l(xe),J(()=>l(xe).name)??""}`),be(Ke,(l(xe),J(()=>l(xe).name))),be(at,`(${bt??""})`)},[()=>(l(xe),J(()=>P(l(xe).size)))]),De("click",Le,Xt(()=>_(l(xe).url))),ee(We,Le)};ce(Te,We=>{l(xe),J(()=>L(l(xe).type))?We(Oe):We($e,!1)})}ee(Ae,Ge)}),S(Se),S(we),ee(fe,we)};ce(ne,fe=>{V(t()),J(()=>t().attachments&&t().attachments.length>0)&&fe(Z)})}var X=W(ne,2);{var ae=fe=>{var we=yi(),Se=W(z(we));{var Ae=Te=>{var Oe=Je();ge(()=>be(Oe,l(a))),ee(Te,Oe)};ce(Se,Te=>{l(a)&&Te(Ae)})}var xe=W(Se,2);{var Ge=Te=>{var Oe=Wt(),$e=je(Oe);{var We=Ue=>{var Ke=Je();ge(()=>be(Ke,`by ${l(c)??""}`)),ee(Ue,Ke)},Le=Ue=>{var Ke=Je();ge(()=>be(Ke,`by ${l(c)??""}`)),ee(Ue,Ke)};ce($e,Ue=>{l(a)?Ue(We):Ue(Le,!1)})}ee(Te,Oe)};ce(xe,Te=>{l(c)&&Te(Ge)})}S(we),ee(fe,we)};ce(X,fe=>{l(u)&&fe(ae)})}var pe=W(X,2);{var ye=fe=>{var we=gi(),Se=W(z(we));{var Ae=Te=>{var Oe=Je();ge(()=>be(Oe,l(y))),ee(Te,Oe)};ce(Se,Te=>{l(y)&&Te(Ae)})}var xe=W(Se,2);{var Ge=Te=>{var Oe=Je();ge(()=>be(Oe,`by ${l(b)??""}`)),ee(Te,Oe)};ce(xe,Te=>{l(b)&&Te(Ge)})}S(we),ee(fe,we)};ce(pe,fe=>{l(o)&&fe(ye)})}S(te),ee(j,te)};ce(me,j=>{s()&&j(_e)})}S(D);var Me=W(D,2);{var ke=j=>{var te=_i(),G=z(te);S(te),ge(()=>{Ie(G,"src",(l(i),J(()=>l(i).url))),Ie(G,"alt",(l(i),J(()=>l(i).name)))}),ee(j,te)};ce(Me,j=>{l(i)&&j(ke)})}S(C),S(w),ge(()=>{rt(w,1,jn(l(h)),"svelte-1rksp2z"),Yr(w,l(r)?"cursor: pointer;":"")}),De("keydown",w,U),De("click",w,B),ee(d,w),ot()}var xi=se('<button class="btn btn-sm btn-outline-secondary flex-shrink-0"><i></i> </button>');function To(d,e){st(e,!1);const i=()=>mr(a,"$weeksExpanded",r),[r,n]=zr(),{stores:{weeksExpanded:a}}=Br();function c(){Rn(a,!i())}ct();var u=xi(),y=z(u),b=W(y);S(u),ge(()=>{rt(y,1,`bi ${i()?"bi-chevron-up":"bi-chevron-down"}`),be(b,` ${i()?"Collapse All":"Expand All"}`)}),De("click",u,c),ee(d,u),ot(),n()}var Ei=se('<div class="invalid-feedback d-block"> </div>'),Di=se("<option> </option>"),ki=se('<div class="invalid-feedback d-block"> </div>'),Ai=se(`<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Displayed publicly on the calendar and announcements page. e.g. Ward Conference, Ward BBQ
			Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select> <small class="fw-lighter fst-italic">Displayed as a public badge on the event listing.</small></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Shown publicly when viewers expand the event details. Supports basic HTML formatting.</small></div></div>`);function Ti(d,e){st(e,!1);const i=de(),r=de();let n=he(e,"title",12,""),a=he(e,"eventType",12,"calendar_event"),c=he(e,"category",12,""),u=he(e,"isPublic",12,!0),y=he(e,"description",12,""),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),t=he(e,"validationErrors",24,()=>({})),s=de(),f=de();function g(){l(s)?.focus()}function x(){l(f)?.focus()}Re(()=>V(t()),()=>{H(i,!!t().title)}),Re(()=>V(t()),()=>{H(r,!!t().description)}),Ut();var I={focusTitle:g,focusDescription:x};ct();var E=Ai(),B=z(E),U=W(z(B),2);Xe(U);let P;It(U,q=>H(s,q),()=>l(s));var L=W(U,2);{var _=q=>{var $=Ei(),N=z($,!0);S($),ge(()=>be(N,(V(t()),J(()=>t().title)))),ee(q,$)};ce(L,q=>{V(t()),J(()=>t().title)&&q(_)})}nt(2),S(B);var M=W(B,2),m=W(z(M),2);ge(()=>{a(),vr(()=>{b()})});var h=z(m);h.value=h.__value="calendar_event";var w=W(h);w.value=w.__value="announcement",S(m),S(M);var k=W(M,2),T=W(z(k),2);ge(()=>{c(),vr(()=>{b()})}),Qt(T,5,()=>Pn,Hr,(q,$)=>{var N=Di(),O=z(N,!0);S(N);var re={};ge(()=>{be(O,(l($),J(()=>l($).label))),re!==(re=(l($),J(()=>l($).key)))&&(N.value=(N.__value=(l($),J(()=>l($).key)))??"")}),ee(q,N)}),S(T),nt(2),S(k);var C=W(k,2),D=W(z(C),2),F=z(D);Xe(F);var p=W(F,2);S(D),nt(2),S(C);var v=W(C,2),Y=W(z(v),2);In(Y);let A;It(Y,q=>H(f,q),()=>l(f));var R=W(Y,2);{var Q=q=>{var $=ki(),N=z($,!0);S($),ge(()=>be(N,(V(t()),J(()=>t().description)))),ee(q,$)};ce(R,q=>{V(t()),J(()=>t().description)&&q(Q)})}return nt(2),S(v),S(E),ge(()=>{Ie(U,"name",`${o()??""}-title`),P=rt(U,1,"form-control",null,P,{"is-invalid":l(i)}),U.disabled=b(),m.disabled=b(),T.disabled=b(),Ie(F,"id",`${o()??""}-is-public`),F.disabled=b(),Ie(p,"for",`${o()??""}-is-public`),Ie(Y,"name",`${o()??""}-description`),A=rt(Y,1,"form-control",null,A,{"is-invalid":l(r)}),Y.disabled=b()}),De("focus",U,()=>l(s).select()),gt(U,n),hr(m,a),hr(T,c),_r(F,u),De("focus",Y,()=>l(f).select()),gt(Y,y),ee(d,E),zt(e,"focusTitle",g),zt(e,"focusDescription",x),ot(I)}var Ii=se('<div class="invalid-feedback d-block"> </div>'),Mi=se('<div class="invalid-feedback d-block"> </div>'),Ri=se('<div class="invalid-feedback d-block"> </div>'),Ci=se('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Fi=se('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Pi(d,e){st(e,!1);const i=de(),r=de(),n=de();let a=he(e,"dateInput",12,""),c=he(e,"startTimeInput",12,""),u=he(e,"endTimeInput",12,""),y=he(e,"isAllDay",12,!1),b=he(e,"disabled",8,!1),o=he(e,"name",8,"event"),t=he(e,"validationErrors",24,()=>({})),s=de(),f=de(),g=de();function x(){l(s)?.focus()}function I(){l(f)?.focus()}function E(){l(g)?.focus()}Re(()=>V(t()),()=>{H(i,!!t().dateInput)}),Re(()=>V(t()),()=>{H(r,!!t().startTimeInput)}),Re(()=>V(t()),()=>{H(n,!!t().endTimeInput)}),Ut();var B={focusDate:x,focusStartTime:I,focusEndTime:E};ct();var U=Fi(),P=z(U),L=W(z(P),2);Xe(L);let _;It(L,F=>H(s,F),()=>l(s));var M=W(L,2);{var m=F=>{var p=Ii(),v=z(p,!0);S(p),ge(()=>be(v,(V(t()),J(()=>t().dateInput)))),ee(F,p)};ce(M,F=>{V(t()),J(()=>t().dateInput)&&F(m)})}S(P);var h=W(P,2),w=z(h),k=z(w);Xe(k);var T=W(k,2);S(w),S(h);var C=W(h,2);{var D=F=>{var p=Ci(),v=z(p),Y=W(z(v),2);Xe(Y),Ie(Y,"step",900);let A;It(Y,oe=>H(f,oe),()=>l(f));var R=W(Y,2);{var Q=oe=>{var ue=Mi(),ve=z(ue,!0);S(ue),ge(()=>be(ve,(V(t()),J(()=>t().startTimeInput)))),ee(oe,ue)};ce(R,oe=>{V(t()),J(()=>t().startTimeInput)&&oe(Q)})}S(v);var q=W(v,2),$=W(z(q),2);Xe($),Ie($,"step",900);let N;It($,oe=>H(g,oe),()=>l(g));var O=W($,2);{var re=oe=>{var ue=Ri(),ve=z(ue,!0);S(ue),ge(()=>be(ve,(V(t()),J(()=>t().endTimeInput)))),ee(oe,ue)};ce(O,oe=>{V(t()),J(()=>t().endTimeInput)&&oe(re)})}S(q),S(p),ge(()=>{Ie(Y,"name",`${o()??""}-start-time`),A=rt(Y,1,"form-control",null,A,{"is-invalid":l(r)}),Y.disabled=b(),Ie($,"name",`${o()??""}-end-time`),N=rt($,1,"form-control",null,N,{"is-invalid":l(n)}),$.disabled=b()}),De("focus",Y,()=>l(f).select()),gt(Y,c),De("focus",$,()=>l(g).select()),gt($,u),ee(F,p)};ce(C,F=>{y()||F(D)})}return S(U),ge(()=>{Ie(L,"name",`${o()??""}-date`),_=rt(L,1,"form-control",null,_,{"is-invalid":l(i)}),L.disabled=b(),Ie(k,"id",`${o()??""}-all-day-check`),k.disabled=b(),Ie(T,"for",`${o()??""}-all-day-check`)}),De("focus",L,()=>l(s).select()),gt(L,a),_r(k,y),ee(d,U),zt(e,"focusDate",x),zt(e,"focusStartTime",I),zt(e,"focusEndTime",E),ot(B)}var Oi=se('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Ui=se('<div class="invalid-feedback d-block"> </div>'),Si=se('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Li=se('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),zi=se('<div class="invalid-feedback d-block"> </div>'),Hi=se('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),Bi=se('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function qi(d,e){st(e,!1);const i=[],r=[];let n=he(e,"isRecurring",12,!1),a=he(e,"recurrenceFrequency",12,"weekly"),c=he(e,"recurrenceInterval",12,1),u=he(e,"recurringDays",28,()=>[]),y=he(e,"recurrenceEndDate",12,""),b=he(e,"monthlyType",12,"date"),o=he(e,"dateInput",8,""),t=he(e,"disabled",8,!1),s=he(e,"name",8,"event"),f=he(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function x(M){if(!M)return"Same weekday of the month";try{const m=new Date(M),h=He(m,"EEEE"),w=Math.ceil(m.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][w]} ${h} of the month`}catch{return"Same weekday of the month"}}function I(M){if(!M)return 1;try{return M.split("-").map(Number)[2]}catch{return 1}}ct();var E=Bi(),B=z(E),U=z(B);Xe(U);var P=W(U,2);S(B);var L=W(B,2);{var _=M=>{var m=Hi(),h=z(m),w=W(z(h),2),k=W(z(w),2),T=z(k);Xe(T),S(k);var C=W(k,2),D=z(C);ge(()=>{a(),vr(()=>{t(),c()})});var F=z(D),p=z(F,!0);S(F),F.value=F.__value="daily";var v=W(F),Y=z(v,!0);S(v),v.value=v.__value="weekly";var A=W(v),R=z(A,!0);S(A),A.value=A.__value="monthly";var Q=W(A),q=z(Q,!0);S(Q),Q.value=Q.__value="yearly",S(D),S(C),S(w),S(h);var $=W(h,2);{var N=ke=>{var j=Si(),te=W(z(j),2);Qt(te,5,()=>g,Hr,(ne,Z)=>{var X=Oi(),ae=z(X);Xe(ae);var pe,ye=W(ae,2),fe=z(ye,!0);S(ye),S(X),ge(()=>{Ie(ae,"id",`${s()??""}-day-${l(Z),J(()=>l(Z).value)??""}`),ae.disabled=t(),pe!==(pe=(l(Z),J(()=>l(Z).value)))&&(ae.value=(ae.__value=(l(Z),J(()=>l(Z).value)))??""),Ie(ye,"for",`${s()??""}-day-${l(Z),J(()=>l(Z).value)??""}`),be(fe,(l(Z),J(()=>l(Z).label)))}),ur(i,[],ae,()=>(l(Z),J(()=>l(Z).value),u()),u),ee(ne,X)}),S(te);var G=W(te,2);{var ie=ne=>{var Z=Ui(),X=z(Z,!0);S(Z),ge(()=>be(X,(V(f()),J(()=>f().recurringDays)))),ee(ne,Z)};ce(G,ne=>{V(f()),J(()=>f().recurringDays)&&ne(ie)})}nt(2),S(j),ee(ke,j)};ce($,ke=>{a()==="weekly"&&ke(N)})}var O=W($,2);{var re=ke=>{var j=Li(),te=W(z(j),2),G=z(te),ie=z(G);Xe(ie),ie.value=ie.__value="date";var ne=W(ie,2),Z=z(ne);S(ne),S(G);var X=W(G,2),ae=z(X);Xe(ae),ae.value=ae.__value="weekday";var pe=W(ae,2),ye=z(pe);S(pe),S(X),S(te),S(j),ge((fe,we)=>{Ie(ie,"id",`${s()??""}-monthly-date`),ie.disabled=t(),Ie(ne,"for",`${s()??""}-monthly-date`),be(Z,`On day ${fe??""} of the month`),Ie(ae,"id",`${s()??""}-monthly-weekday`),ae.disabled=t(),Ie(pe,"for",`${s()??""}-monthly-weekday`),be(ye,`On the ${we??""}`)},[()=>(V(o()),J(()=>I(o()))),()=>(V(o()),J(()=>x(o())))]),ur(r,[],ie,b,b),ur(r,[],ae,b,b),ee(ke,j)};ce(O,ke=>{a()==="monthly"&&ke(re)})}var oe=W(O,2),ue=z(oe),ve=W(ue,2);Xe(ve);let me;var _e=W(ve,2);{var Me=ke=>{var j=zi(),te=z(j,!0);S(j),ge(()=>be(te,(V(f()),J(()=>f().recurrenceEndDate)))),ee(ke,j)};ce(_e,ke=>{V(f()),J(()=>f().recurrenceEndDate)&&ke(Me)})}nt(2),S(oe),S(m),ge(()=>{T.disabled=t(),D.disabled=t(),be(p,c()===1?"day":"days"),be(Y,c()===1?"week":"weeks"),be(R,c()===1?"month":"months"),be(q,c()===1?"year":"years"),Ie(ue,"for",`${s()??""}-recurrence-end-date`),me=rt(ve,1,"form-control",null,me,{"is-invalid":!!f().recurrenceEndDate}),Ie(ve,"id",`${s()??""}-recurrence-end-date`),ve.disabled=t()}),gt(T,c),hr(D,a),gt(ve,y),ee(M,m)};ce(L,M=>{n()&&M(_)})}S(E),ge(()=>{Ie(U,"id",`${s()??""}-is-recurring`),U.disabled=t(),Ie(P,"for",`${s()??""}-is-recurring`)}),_r(U,n),ee(d,E),ot()}var Ni=se('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Displayed publicly on the event listing. e.g. Cultural Hall, Stake Center</small></div>');function Yi(d,e){st(e,!1);let i=he(e,"value",12,""),r=he(e,"disabled",8,!1),n=he(e,"name",8,"location"),a=de();function c(){l(a)?.focus()}var u={focus:c},y=Ni(),b=W(z(y),2);return Xe(b),It(b,o=>H(a,o),()=>l(a)),nt(2),S(y),ge(()=>{Ie(b,"name",n()),b.disabled=r()}),De("focus",b,()=>l(a).select()),gt(b,i),ee(d,y),zt(e,"focus",c),ot(u)}var Wi=se('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Qi=se('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),$i=se('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),ji=se('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Gi=se('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),Ki=se('<div class="d-flex flex-column gap-2 mb-2"></div>'),Vi=se('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Publicly visible in the event details. Max 5MB per file. Supports: images, PDFs</small></div></div>');function Xi(d,e){st(e,!1);let i=he(e,"attachments",24,()=>[]),r=he(e,"disabled",8,!1),n=he(e,"uploadingFile",8,!1);const a=Kn();let c=de(),u=de(null),y=de("");const b=M=>{if(M===0)return"0 Bytes";const m=1024,h=["Bytes","KB","MB"],w=Math.floor(Math.log(M)/Math.log(m));return Math.round(M/Math.pow(m,w)*100)/100+" "+h[w]},o=M=>{const m=M.target;m.files&&m.files[0]&&(a("upload",m.files[0]),m.value="")},t=M=>{H(u,M.id),H(y,M.name)},s=M=>{l(y).trim()&&l(y)!==M.name&&a("edit",{attachment:M,newName:l(y).trim()}),H(u,null),H(y,"")},f=()=>{H(u,null),H(y,"")},g=M=>{a("remove",M)};ct();var x=Vi(),I=W(z(x),2);{var E=M=>{var m=Ki();Qt(m,5,i,h=>h.id,(h,w)=>{var k=Gi(),T=z(k),C=z(T);{var D=A=>{var R=Wi(),Q=je(R);Xe(Q);var q=W(Q,2),$=z(q,!0);S(q),ge(N=>{Q.disabled=r(),be($,N)},[()=>(l(w),J(()=>b(l(w).size)))]),gt(Q,()=>l(y),N=>H(y,N)),De("keydown",Q,N=>{N.key==="Enter"&&s(l(w)),N.key==="Escape"&&f()}),ee(A,R)},F=A=>{var R=Qi(),Q=je(R),q=z(Q,!0);S(Q);var $=W(Q,2),N=z($,!0);S($),ge(O=>{be(q,(l(w),J(()=>l(w).name))),be(N,O)},[()=>(l(w),J(()=>b(l(w).size)))]),ee(A,R)};ce(C,A=>{l(u),l(w),J(()=>l(u)===l(w).id)?A(D):A(F,!1)})}S(T);var p=W(T,2);{var v=A=>{var R=$i(),Q=je(R),q=W(Q,2);ge(()=>{Q.disabled=r(),q.disabled=r()}),De("click",Q,()=>s(l(w))),De("click",q,f),ee(A,R)},Y=A=>{var R=ji(),Q=je(R),q=W(Q,2);ge(()=>{Q.disabled=r(),q.disabled=r()}),De("click",Q,()=>t(l(w))),De("click",q,()=>g(l(w))),ee(A,R)};ce(p,A=>{l(u),l(w),J(()=>l(u)===l(w).id)?A(v):A(Y,!1)})}S(k),ee(h,k)}),S(m),ee(M,m)};ce(I,M=>{V(i()),J(()=>i().length>0)&&M(E)})}var B=W(I,2),U=z(B),P=z(U);It(P,M=>H(c,M),()=>l(c));var L=W(P,2);{var _=M=>{Gr(M,{size:"sm"})};ce(L,M=>{n()&&M(_)})}S(U),nt(2),S(B),S(x),ge(()=>P.disabled=r()||n()),De("change",P,o),ee(d,x),ot()}var Zi=se('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Ji(d,e){st(e,!1);const i=de();let r=he(e,"eventTitle",8),n=he(e,"occurrenceDate",8),a=he(e,"callback",8);function c(k){a()(k)}function u(){a()(null)}Re(()=>(V(n()),He),()=>{H(i,(()=>{try{const[k,T,C]=n().split("-").map(Number),D=new Date(k,T-1,C);return He(D,"EEEE, MMMM d, yyyy")}catch{return n()}})())}),Ut(),ct();var y=Zi(),b=z(y),o=z(b),t=z(o),s=W(z(t),2);S(t);var f=W(t,2),g=z(f),x=z(g),I=z(x);S(x),nt(),S(g);var E=W(g,4),B=z(E),U=W(z(B),2),P=z(U,!0);S(U),S(B);var L=W(B,2),_=W(z(L),2),M=z(_);S(_),S(L);var m=W(L,2);S(E),S(f);var h=W(f,2),w=z(h);S(h),S(o),S(b),S(y),ge(()=>{be(I,`"${r()??""}"`),be(P,l(i)),be(M,`From ${l(i)??""} onwards`)}),De("click",s,u),De("click",B,()=>c("single")),De("click",L,()=>c("future")),De("click",m,()=>c("all")),De("click",w,u),ee(d,y),ot()}var es=se('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function ts(d,e){st(e,!1);const i=de();let r=he(e,"eventTitle",8),n=he(e,"occurrenceDate",8),a=he(e,"callback",8);function c(k){a()(k)}function u(){a()(null)}Re(()=>(V(n()),He),()=>{H(i,(()=>{try{const[k,T,C]=n().split("-").map(Number),D=new Date(k,T-1,C);return He(D,"EEEE, MMMM d, yyyy")}catch{return n()}})())}),Ut(),ct();var y=es(),b=z(y),o=z(b),t=z(o),s=W(z(t),2);S(t);var f=W(t,2),g=z(f),x=z(g),I=z(x);S(x),nt(),S(g);var E=W(g,4),B=z(E),U=W(z(B),2),P=z(U,!0);S(U),S(B);var L=W(B,2),_=W(z(L),2),M=z(_);S(_),S(L);var m=W(L,2);S(E),S(f);var h=W(f,2),w=z(h);S(h),S(o),S(b),S(y),ge(()=>{be(I,`"${r()??""}"`),be(P,l(i)),be(M,`From ${l(i)??""} onwards`)}),De("click",s,u),De("click",B,()=>c("single")),De("click",L,()=>c("future")),De("click",m,()=>c("all")),De("click",w,u),ee(d,y),ot()}var rs=se('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function ns(d,e){st(e,!1);let i=he(e,"title",8,"Clone Event"),r=he(e,"message",8,"Select a date for the cloned event:"),n=he(e,"confirmButtonLabel",8,"Clone"),a=he(e,"confirmButtonCSS",8,"btn-primary"),c=he(e,"rejectButtonLabel",8,"Cancel"),u=he(e,"rejectButtonCSS",8,"btn-secondary"),y=he(e,"defaultDate",8,void 0),b=he(e,"callback",8,()=>{}),o=de(),t=de(y()||He(new Date,"yyyy-MM-dd")),s=!1,f;Vn(()=>{const p=window.bootstrap.Modal;new p(l(o)).show(),l(o).addEventListener("hidden.bs.modal",()=>{s?b()(!0,f):b()(!1)})});function g(){s=!0,f=l(t),window.bootstrap.Modal.getInstance(l(o)).hide()}function x(){s=!1,window.bootstrap.Modal.getInstance(l(o)).hide()}ct();var I=rs(),E=z(I),B=z(E),U=z(B),P=z(U),L=z(P,!0);S(P),nt(2),S(U);var _=W(U,2),M=z(_),m=z(M,!0);S(M);var h=W(M,2),w=W(z(h),2);Xe(w),S(h),S(_);var k=W(_,2),T=z(k),C=z(T,!0);S(T);var D=W(T,2),F=z(D,!0);S(D),S(k),S(B),S(E),S(I),It(I,p=>H(o,p),()=>l(o)),ge(()=>{be(L,i()),be(m,r()),rt(T,1,`btn ${u()??""}`),be(C,c()),rt(D,1,`btn ${a()??""}`),be(F,n())}),gt(w,()=>l(t),p=>H(t,p)),De("click",T,x),De("click",D,g),ee(d,I),ot()}let Gt;function as(d){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const i={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};d.title&&(i.title=d.title),d.message&&(i.message=d.message),d.confirmButtonLabel&&(i.confirmButtonLabel=d.confirmButtonLabel),d.confirmButtonCSS&&(i.confirmButtonCSS=d.confirmButtonCSS),d.rejectButtonLabel&&(i.rejectButtonLabel=d.rejectButtonLabel),d.rejectButtonCSS&&(i.rejectButtonCSS=d.rejectButtonCSS),d.defaultDate&&(i.defaultDate=d.defaultDate),i.callback=(r,n)=>{console.log("Clone confirm result:",r,n),Gt&&(Fn(Gt),Gt=void 0),e.remove(),d.callback&&typeof d.callback=="function"&&d.callback(r,n)},Gt=Cn(ns,{target:e,props:i})}const is=Jn().shape({title:mt().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:mt().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:mt().required("Category is required"),description:mt().nullable().max(1e4,"Description is too long"),location:mt().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:mt().when("event_type",{is:"calendar_event",then:d=>d.required("Date is required"),otherwise:d=>d.nullable()}),startTimeInput:mt().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("Start time is required"),otherwise:d=>d.nullable()}),endTimeInput:mt().when(["event_type","is_all_day"],{is:(d,e)=>d==="calendar_event"&&!e,then:d=>d.required("End time is required"),otherwise:d=>d.nullable()}),isRecurring:Pr(),recurrenceFrequency:mt().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:ea().of(ta().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(d,e)=>d&&e==="weekly",then:d=>d.min(1,"Select at least one day for weekly recurring events").required(),otherwise:d=>d.nullable()}),hasEndDate:Pr(),recurrenceEndDate:mt().when(["isRecurring","hasEndDate"],{is:(d,e)=>d&&e,then:d=>d.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const i=new Date(e),r=new Date;return r.setHours(0,0,0,0),i>=r}),otherwise:d=>d.nullable()})});function ss(){const d=Xn({});async function e(n){try{return await is.validate(n,{abortEarly:!1}),d.set({}),!0}catch(a){if(a instanceof ra){const c={};return a.inner.forEach(u=>{u.path&&(c[u.path]=u.message)}),d.set(c),!1}return!1}}function i(){d.set({})}function r(){return Object.values(yr(d)).filter(a=>a.length>0)}return{validationErrors:d,validate:e,clearErrors:i,getErrorMessages:r}}function Er(d){const{frequency:e,interval:i,recurringDays:r,recurrenceEndDate:n,hasEndDate:a,monthlyType:c,startTime:u}=d,y={0:Pe.SU,1:Pe.MO,2:Pe.TU,3:Pe.WE,4:Pe.TH,5:Pe.FR,6:Pe.SA},b={daily:Pe.DAILY,weekly:Pe.WEEKLY,monthly:Pe.MONTHLY,yearly:Pe.YEARLY},o=new Date(u),t=Tt(o,Ze),s=new Date(t);s.setHours(12,0,0,0);const f=Pt(s,Ze),g={freq:b[e],interval:i,dtstart:f};if(a&&n){const I=new Date(`${n}T23:59:59.999`),E=Pt(I,Ze);g.until=E}if(e==="weekly"&&r.length>0)g.byweekday=r.map(I=>y[I]);else if(e==="monthly")if(c==="date")g.bymonthday=[s.getDate()];else{const I=Math.ceil(s.getDate()/7),E=s.getDay(),B=[Pe.SU,Pe.MO,Pe.TU,Pe.WE,Pe.TH,Pe.FR,Pe.SA];g.byweekday=[B[E].nth(I)]}else e==="yearly"&&(g.bymonth=[s.getMonth()+1],g.bymonthday=[s.getDate()]);return{recurrence_rule:new Pe(g).toString(),recurrence_end_date:a&&n?g.until.toISOString():void 0}}function Jr(d,e){try{const r=Pe.fromString(d).origOptions,n={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Pe.DAILY]:"daily",[Pe.WEEKLY]:"weekly",[Pe.MONTHLY]:"monthly",[Pe.YEARLY]:"yearly"},c=(r.freq!==void 0?a[r.freq]:null)||"weekly",u=r.interval||1;let y=[],b="date";r.byweekday&&c==="weekly"&&(y=(Array.isArray(r.byweekday)?r.byweekday:[r.byweekday]).map(s=>{const f=typeof s=="number"?s:s.weekday;return n[f]})),c==="monthly"&&(r.bymonthday&&Array.isArray(r.bymonthday)&&r.bymonthday.length>0?b="date":r.byweekday&&(b="weekday"));let o="",t=!1;if(e){t=!0;const s=Tt(new Date(e),Ze);o=He(s,"yyyy-MM-dd")}else if(r.until){t=!0;const s=Tt(r.until,Ze);o=He(s,"yyyy-MM-dd")}return{frequency:c,interval:u,recurringDays:y,recurrenceEndDate:o,hasEndDate:t,monthlyType:b}}catch(i){return console.error("Failed to parse recurrence rule:",i),null}}function en(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function tn(){return{generateRecurrenceRule:Er,parseRecurrenceRule:Jr,clearRecurrence:en}}const br=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:en,generateRecurrenceRule:Er,parseRecurrenceRule:Jr,useRecurrenceLogic:tn},Symbol.toStringTag,{value:"Module"}));function os(d,e){return e.forEach(function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach(function(r){if(r!=="default"&&!(r in d)){var n=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(d,r,n.get?n:{enumerable:!0,get:function(){return i[r]}})}})}),Object.freeze(d)}function rn(d,e){return new Promise(function(i,r){let n;return ls(d).then(function(a){try{return n=a,i(new Blob([e.slice(0,2),n,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}},r)})}const ls=d=>new Promise((e,i)=>{const r=new FileReader;r.addEventListener("load",({target:{result:n}})=>{const a=new DataView(n);let c=0;if(a.getUint16(c)!==65496)return i("not a valid JPEG");for(c+=2;;){const u=a.getUint16(c);if(u===65498)break;const y=a.getUint16(c+2);if(u===65505&&a.getUint32(c+4)===1165519206){const b=c+10;let o;switch(a.getUint16(b)){case 18761:o=!0;break;case 19789:o=!1;break;default:return i("TIFF header contains invalid endian")}if(a.getUint16(b+2,o)!==42)return i("TIFF header contains invalid version");const t=a.getUint32(b+4,o),s=b+t+2+12*a.getUint16(b+t,o);for(let f=b+t+2;f<s;f+=12)if(a.getUint16(f,o)==274){if(a.getUint16(f+2,o)!==3)return i("Orientation data type is invalid");if(a.getUint32(f+4,o)!==1)return i("Orientation data count is invalid");a.setUint16(f+8,1,o);break}return e(n.slice(c,c+2+y))}c+=2+y}return e(new Blob)}),r.readAsArrayBuffer(d)});var er={},cs={get exports(){return er},set exports(d){er=d}};(function(d){var e,i,r={};cs.exports=r,r.parse=function(n,a){for(var c=r.bin.readUshort,u=r.bin.readUint,y=0,b={},o=new Uint8Array(n),t=o.length-4;u(o,t)!=101010256;)t--;y=t,y+=4;var s=c(o,y+=4);c(o,y+=2);var f=u(o,y+=2),g=u(o,y+=4);y+=4,y=g;for(var x=0;x<s;x++){u(o,y),y+=4,y+=4,y+=4,u(o,y+=4),f=u(o,y+=4);var I=u(o,y+=4),E=c(o,y+=4),B=c(o,y+2),U=c(o,y+4);y+=6;var P=u(o,y+=8);y+=4,y+=E+B+U,r._readLocal(o,P,b,f,I,a)}return b},r._readLocal=function(n,a,c,u,y,b){var o=r.bin.readUshort,t=r.bin.readUint;t(n,a),o(n,a+=4),o(n,a+=2);var s=o(n,a+=2);t(n,a+=2),t(n,a+=4),a+=4;var f=o(n,a+=8),g=o(n,a+=2);a+=2;var x=r.bin.readUTF8(n,a,f);if(a+=f,a+=g,b)c[x]={size:y,csize:u};else{var I=new Uint8Array(n.buffer,a);if(s==0)c[x]=new Uint8Array(I.buffer.slice(a,a+u));else{if(s!=8)throw"unknown compression method: "+s;var E=new Uint8Array(y);r.inflateRaw(I,E),c[x]=E}}},r.inflateRaw=function(n,a){return r.F.inflate(n,a)},r.inflate=function(n,a){return n[0],n[1],r.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),a)},r.deflate=function(n,a){a==null&&(a={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*n.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(n,u,c,a.level);var y=r.adler(n,0,n.length);return u[c+0]=y>>>24&255,u[c+1]=y>>>16&255,u[c+2]=y>>>8&255,u[c+3]=y>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(n,a){a==null&&(a={level:6});var c=new Uint8Array(50+Math.floor(1.1*n.length)),u=r.F.deflateRaw(n,c,u,a.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(n,a){a==null&&(a=!1);var c=0,u=r.bin.writeUint,y=r.bin.writeUshort,b={};for(var o in n){var t=!r._noNeed(o)&&!a,s=n[o],f=r.crc.crc(s,0,s.length);b[o]={cpr:t,usize:s.length,crc:f,file:t?r.deflateRaw(s):s}}for(var o in b)c+=b[o].file.length+30+46+2*r.bin.sizeUTF8(o);c+=22;var g=new Uint8Array(c),x=0,I=[];for(var o in b){var E=b[o];I.push(x),x=r._writeHeader(g,x,o,E,0)}var B=0,U=x;for(var o in b)E=b[o],I.push(x),x=r._writeHeader(g,x,o,E,1,I[B++]);var P=x-U;return u(g,x,101010256),x+=4,y(g,x+=4,B),y(g,x+=2,B),u(g,x+=2,P),u(g,x+=4,U),x+=4,x+=2,g.buffer},r._noNeed=function(n){var a=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(n,a,c,u,y,b){var o=r.bin.writeUint,t=r.bin.writeUshort,s=u.file;return o(n,a,y==0?67324752:33639248),a+=4,y==1&&(a+=2),t(n,a,20),t(n,a+=2,0),t(n,a+=2,u.cpr?8:0),o(n,a+=2,0),o(n,a+=4,u.crc),o(n,a+=4,s.length),o(n,a+=4,u.usize),t(n,a+=4,r.bin.sizeUTF8(c)),t(n,a+=2,0),a+=2,y==1&&(a+=2,a+=2,o(n,a+=6,b),a+=4),a+=r.bin.writeUTF8(n,a,c),y==0&&(n.set(s,a),a+=s.length),a},r.crc={table:function(){for(var n=new Uint32Array(256),a=0;a<256;a++){for(var c=a,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;n[a]=c}return n}(),update:function(n,a,c,u){for(var y=0;y<u;y++)n=r.crc.table[255&(n^a[c+y])]^n>>>8;return n},crc:function(n,a,c){return 4294967295^r.crc.update(4294967295,n,a,c)}},r.adler=function(n,a,c){for(var u=1,y=0,b=a,o=a+c;b<o;){for(var t=Math.min(b+5552,o);b<t;)y+=u+=n[b++];u%=65521,y%=65521}return y<<16|u},r.bin={readUshort:function(n,a){return n[a]|n[a+1]<<8},writeUshort:function(n,a,c){n[a]=255&c,n[a+1]=c>>8&255},readUint:function(n,a){return 16777216*n[a+3]+(n[a+2]<<16|n[a+1]<<8|n[a])},writeUint:function(n,a,c){n[a]=255&c,n[a+1]=c>>8&255,n[a+2]=c>>16&255,n[a+3]=c>>24&255},readASCII:function(n,a,c){for(var u="",y=0;y<c;y++)u+=String.fromCharCode(n[a+y]);return u},writeASCII:function(n,a,c){for(var u=0;u<c.length;u++)n[a+u]=c.charCodeAt(u)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,a,c){for(var u,y="",b=0;b<c;b++)y+="%"+r.bin.pad(n[a+b].toString(16));try{u=decodeURIComponent(y)}catch{return r.bin.readASCII(n,a,c)}return u},writeUTF8:function(n,a,c){for(var u=c.length,y=0,b=0;b<u;b++){var o=c.charCodeAt(b);if(!(4294967168&o))n[a+y]=o,y++;else if(!(4294965248&o))n[a+y]=192|o>>6,n[a+y+1]=128|o>>0&63,y+=2;else if(!(4294901760&o))n[a+y]=224|o>>12,n[a+y+1]=128|o>>6&63,n[a+y+2]=128|o>>0&63,y+=3;else{if(4292870144&o)throw"e";n[a+y]=240|o>>18,n[a+y+1]=128|o>>12&63,n[a+y+2]=128|o>>6&63,n[a+y+3]=128|o>>0&63,y+=4}}return y},sizeUTF8:function(n){for(var a=n.length,c=0,u=0;u<a;u++){var y=n.charCodeAt(u);if(!(4294967168&y))c++;else if(!(4294965248&y))c+=2;else if(!(4294901760&y))c+=3;else{if(4292870144&y)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(n,a,c,u){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],b=r.F.U,o=r.F._goodIndex;r.F._hash;var t=r.F._putsE,s=0,f=c<<3,g=0,x=n.length;if(u==0){for(;s<x;)t(a,f,s+(k=Math.min(65535,x-s))==x?1:0),f=r.F._copyExact(n,s,k,a,f+8),s+=k;return f>>>3}var I=b.lits,E=b.strt,B=b.prev,U=0,P=0,L=0,_=0,M=0,m=0;for(x>2&&(E[m=r.F._hash(n,0)]=0),s=0;s<x;s++){if(M=m,s+1<x-2){m=r.F._hash(n,s+1);var h=s+1&32767;B[h]=E[m],E[m]=h}if(g<=s){(U>14e3||P>26697)&&x-s>100&&(g<s&&(I[U]=s-g,U+=2,g=s),f=r.F._writeBlock(s==x-1||g==x?1:0,I,U,_,n,L,s-L,a,f),U=P=_=0,L=s);var w=0;s<x-2&&(w=r.F._bestMatch(n,s,B,M,Math.min(y[2],x-s),y[3]));var k=w>>>16,T=65535&w;if(w!=0){T=65535&w;var C=o(k=w>>>16,b.of0);b.lhst[257+C]++;var D=o(T,b.df0);b.dhst[D]++,_+=b.exb[C]+b.dxb[D],I[U]=k<<23|s-g,I[U+1]=T<<16|C<<8|D,U+=2,g=s+k}else b.lhst[n[s]]++;P++}}for(L==s&&n.length!=0||(g<s&&(I[U]=s-g,U+=2,g=s),f=r.F._writeBlock(1,I,U,_,n,L,s-L,a,f),U=0,P=0,U=P=_=0,L=s);7&f;)f++;return f>>>3},r.F._bestMatch=function(n,a,c,u,y,b){var o=32767&a,t=c[o],s=o-t+32768&32767;if(t==o||u!=r.F._hash(n,a-s))return 0;for(var f=0,g=0,x=Math.min(32767,a);s<=x&&--b!=0&&t!=o;){if(f==0||n[a+f]==n[a+f-s]){var I=r.F._howLong(n,a,s);if(I>f){if(g=s,(f=I)>=y)break;s+2<I&&(I=s+2);for(var E=0,B=0;B<I-2;B++){var U=a-s+B+32768&32767,P=U-c[U]+32768&32767;P>E&&(E=P,t=U)}}}s+=(o=t)-(t=c[o])+32768&32767}return f<<16|g},r.F._howLong=function(n,a,c){if(n[a]!=n[a-c]||n[a+1]!=n[a+1-c]||n[a+2]!=n[a+2-c])return 0;var u=a,y=Math.min(n.length,a+258);for(a+=3;a<y&&n[a]==n[a-c];)a++;return a-u},r.F._hash=function(n,a){return(n[a]<<8|n[a+1])+(n[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(n,a,c,u,y,b,o,t,s){var f,g,x,I,E,B,U,P,L,_=r.F.U,M=r.F._putsF,m=r.F._putsE;_.lhst[256]++,g=(f=r.F.getTrees())[0],x=f[1],I=f[2],E=f[3],B=f[4],U=f[5],P=f[6],L=f[7];var h=32+(s+3&7?8-(s+3&7):0)+(o<<3),w=u+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),k=u+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);k+=14+3*U+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var T=0;T<286;T++)_.lhst[T]=0;for(T=0;T<30;T++)_.dhst[T]=0;for(T=0;T<19;T++)_.ihst[T]=0;var C=h<w&&h<k?0:w<k?1:2;if(M(t,s,n),M(t,s+1,C),s+=3,C==0){for(;7&s;)s++;s=r.F._copyExact(y,b,o,t,s)}else{var D,F;if(C==1&&(D=_.fltree,F=_.fdtree),C==2){r.F.makeCodes(_.ltree,g),r.F.revCodes(_.ltree,g),r.F.makeCodes(_.dtree,x),r.F.revCodes(_.dtree,x),r.F.makeCodes(_.itree,I),r.F.revCodes(_.itree,I),D=_.ltree,F=_.dtree,m(t,s,E-257),m(t,s+=5,B-1),m(t,s+=5,U-4),s+=4;for(var p=0;p<U;p++)m(t,s+3*p,_.itree[1+(_.ordr[p]<<1)]);s+=3*U,s=r.F._codeTiny(P,_.itree,t,s),s=r.F._codeTiny(L,_.itree,t,s)}for(var v=b,Y=0;Y<c;Y+=2){for(var A=a[Y],R=A>>>23,Q=v+(8388607&A);v<Q;)s=r.F._writeLit(y[v++],D,t,s);if(R!=0){var q=a[Y+1],$=q>>16,N=q>>8&255,O=255&q;m(t,s=r.F._writeLit(257+N,D,t,s),R-_.of0[N]),s+=_.exb[N],M(t,s=r.F._writeLit(O,F,t,s),$-_.df0[O]),s+=_.dxb[O],v+=R}}s=r.F._writeLit(256,D,t,s)}return s},r.F._copyExact=function(n,a,c,u,y){var b=y>>>3;return u[b]=c,u[b+1]=c>>>8,u[b+2]=255-u[b],u[b+3]=255-u[b+1],b+=4,u.set(new Uint8Array(n.buffer,a,c),b),y+(c+4<<3)},r.F.getTrees=function(){for(var n=r.F.U,a=r.F._hufTree(n.lhst,n.ltree,15),c=r.F._hufTree(n.dhst,n.dtree,15),u=[],y=r.F._lenCodes(n.ltree,u),b=[],o=r.F._lenCodes(n.dtree,b),t=0;t<u.length;t+=2)n.ihst[u[t]]++;for(t=0;t<b.length;t+=2)n.ihst[b[t]]++;for(var s=r.F._hufTree(n.ihst,n.itree,7),f=19;f>4&&n.itree[1+(n.ordr[f-1]<<1)]==0;)f--;return[a,c,s,y,o,f,u,b]},r.F.getSecond=function(n){for(var a=[],c=0;c<n.length;c+=2)a.push(n[c+1]);return a},r.F.nonZero=function(n){for(var a="",c=0;c<n.length;c+=2)n[c+1]!=0&&(a+=(c>>1)+",");return a},r.F.contSize=function(n,a){for(var c=0,u=0;u<a.length;u++)c+=a[u]*n[1+(u<<1)];return c},r.F._codeTiny=function(n,a,c,u){for(var y=0;y<n.length;y+=2){var b=n[y],o=n[y+1];u=r.F._writeLit(b,a,c,u);var t=b==16?2:b==17?3:7;b>15&&(r.F._putsE(c,u,o,t),u+=t)}return u},r.F._lenCodes=function(n,a){for(var c=n.length;c!=2&&n[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var y=n[u+1],b=u+3<c?n[u+3]:-1,o=u+5<c?n[u+5]:-1,t=u==0?-1:n[u-1];if(y==0&&b==y&&o==y){for(var s=u+5;s+2<c&&n[s+2]==y;)s+=2;(f=Math.min(s+1-u>>>1,138))<11?a.push(17,f-3):a.push(18,f-11),u+=2*f-2}else if(y==t&&b==y&&o==y){for(s=u+5;s+2<c&&n[s+2]==y;)s+=2;var f=Math.min(s+1-u>>>1,6);a.push(16,f-3),u+=2*f-2}else a.push(y,0)}return c>>>1},r.F._hufTree=function(n,a,c){var u=[],y=n.length,b=a.length,o=0;for(o=0;o<b;o+=2)a[o]=0,a[o+1]=0;for(o=0;o<y;o++)n[o]!=0&&u.push({lit:o,f:n[o]});var t=u.length,s=u.slice(0);if(t==0)return 0;if(t==1){var f=u[0].lit;return s=f==0?1:0,a[1+(f<<1)]=1,a[1+(s<<1)]=1,1}u.sort(function(P,L){return P.f-L.f});var g=u[0],x=u[1],I=0,E=1,B=2;for(u[0]={lit:-1,f:g.f+x.f,l:g,r:x,d:0};E!=t-1;)g=I!=E&&(B==t||u[I].f<u[B].f)?u[I++]:u[B++],x=I!=E&&(B==t||u[I].f<u[B].f)?u[I++]:u[B++],u[E++]={lit:-1,f:g.f+x.f,l:g,r:x};var U=r.F.setDepth(u[E-1],0);for(U>c&&(r.F.restrictDepth(s,c,U),U=c),o=0;o<t;o++)a[1+(s[o].lit<<1)]=s[o].d;return U},r.F.setDepth=function(n,a){return n.lit!=-1?(n.d=a,a):Math.max(r.F.setDepth(n.l,a+1),r.F.setDepth(n.r,a+1))},r.F.restrictDepth=function(n,a,c){var u=0,y=1<<c-a,b=0;for(n.sort(function(t,s){return s.d==t.d?t.f-s.f:s.d-t.d}),u=0;u<n.length&&n[u].d>a;u++){var o=n[u].d;n[u].d=a,b+=y-(1<<c-o)}for(b>>>=c-a;b>0;)(o=n[u].d)<a?(n[u].d++,b-=1<<a-o-1):u++;for(;u>=0;u--)n[u].d==a&&b<0&&(n[u].d--,b++);b!=0&&console.log("debt left")},r.F._goodIndex=function(n,a){var c=0;return a[16|c]<=n&&(c|=16),a[8|c]<=n&&(c|=8),a[4|c]<=n&&(c|=4),a[2|c]<=n&&(c|=2),a[1|c]<=n&&(c|=1),c},r.F._writeLit=function(n,a,c,u){return r.F._putsF(c,u,a[n<<1]),u+a[1+(n<<1)]},r.F.inflate=function(n,a){var c=Uint8Array;if(n[0]==3&&n[1]==0)return a||new c(0);var u=r.F,y=u._bitsF,b=u._bitsE,o=u._decodeTiny,t=u.makeCodes,s=u.codes2map,f=u._get17,g=u.U,x=a==null;x&&(a=new c(n.length>>>2<<3));for(var I,E,B=0,U=0,P=0,L=0,_=0,M=0,m=0,h=0,w=0;B==0;)if(B=y(n,w,1),U=y(n,w+1,2),w+=3,U!=0){if(x&&(a=r.F._check(a,h+(1<<17))),U==1&&(I=g.flmap,E=g.fdmap,M=511,m=31),U==2){P=b(n,w,5)+257,L=b(n,w+5,5)+1,_=b(n,w+10,4)+4,w+=14;for(var k=0;k<38;k+=2)g.itree[k]=0,g.itree[k+1]=0;var T=1;for(k=0;k<_;k++){var C=b(n,w+3*k,3);g.itree[1+(g.ordr[k]<<1)]=C,C>T&&(T=C)}w+=3*_,t(g.itree,T),s(g.itree,T,g.imap),I=g.lmap,E=g.dmap,w=o(g.imap,(1<<T)-1,P+L,n,w,g.ttree);var D=u._copyOut(g.ttree,0,P,g.ltree);M=(1<<D)-1;var F=u._copyOut(g.ttree,P,L,g.dtree);m=(1<<F)-1,t(g.ltree,D),s(g.ltree,D,I),t(g.dtree,F),s(g.dtree,F,E)}for(;;){var p=I[f(n,w)&M];w+=15&p;var v=p>>>4;if(!(v>>>8))a[h++]=v;else{if(v==256)break;var Y=h+v-254;if(v>264){var A=g.ldef[v-257];Y=h+(A>>>3)+b(n,w,7&A),w+=7&A}var R=E[f(n,w)&m];w+=15&R;var Q=R>>>4,q=g.ddef[Q],$=(q>>>4)+y(n,w,15&q);for(w+=15&q,x&&(a=r.F._check(a,h+(1<<17)));h<Y;)a[h]=a[h++-$],a[h]=a[h++-$],a[h]=a[h++-$],a[h]=a[h++-$];h=Y}}}else{7&w&&(w+=8-(7&w));var N=4+(w>>>3),O=n[N-4]|n[N-3]<<8;x&&(a=r.F._check(a,h+O)),a.set(new c(n.buffer,n.byteOffset+N,O),h),w=N+O<<3,h+=O}return a.length==h?a:a.slice(0,h)},r.F._check=function(n,a){var c=n.length;if(a<=c)return n;var u=new Uint8Array(Math.max(c<<1,a));return u.set(n,0),u},r.F._decodeTiny=function(n,a,c,u,y,b){for(var o=r.F._bitsE,t=r.F._get17,s=0;s<c;){var f=n[t(u,y)&a];y+=15&f;var g=f>>>4;if(g<=15)b[s]=g,s++;else{var x=0,I=0;g==16?(I=3+o(u,y,2),y+=2,x=b[s-1]):g==17?(I=3+o(u,y,3),y+=3):g==18&&(I=11+o(u,y,7),y+=7);for(var E=s+I;s<E;)b[s]=x,s++}}return y},r.F._copyOut=function(n,a,c,u){for(var y=0,b=0,o=u.length>>>1;b<c;){var t=n[b+a];u[b<<1]=0,u[1+(b<<1)]=t,t>y&&(y=t),b++}for(;b<o;)u[b<<1]=0,u[1+(b<<1)]=0,b++;return y},r.F.makeCodes=function(n,a){for(var c,u,y,b,o=r.F.U,t=n.length,s=o.bl_count,f=0;f<=a;f++)s[f]=0;for(f=1;f<t;f+=2)s[n[f]]++;var g=o.next_code;for(c=0,s[0]=0,u=1;u<=a;u++)c=c+s[u-1]<<1,g[u]=c;for(y=0;y<t;y+=2)(b=n[y+1])!=0&&(n[y]=g[b],g[b]++)},r.F.codes2map=function(n,a,c){for(var u=n.length,y=r.F.U.rev15,b=0;b<u;b+=2)if(n[b+1]!=0)for(var o=b>>1,t=n[b+1],s=o<<4|t,f=a-t,g=n[b]<<f,x=g+(1<<f);g!=x;)c[y[g]>>>15-a]=s,g++},r.F.revCodes=function(n,a){for(var c=r.F.U.rev15,u=15-a,y=0;y<n.length;y+=2){var b=n[y]<<a-n[y+1];n[y]=c[b]>>>u}},r.F._putsE=function(n,a,c){c<<=7&a;var u=a>>>3;n[u]|=c,n[u+1]|=c>>>8},r.F._putsF=function(n,a,c){c<<=7&a;var u=a>>>3;n[u]|=c,n[u+1]|=c>>>8,n[u+2]|=c>>>16},r.F._bitsE=function(n,a,c){return(n[a>>>3]|n[1+(a>>>3)]<<8)>>>(7&a)&(1<<c)-1},r.F._bitsF=function(n,a,c){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16)>>>(7&a)&(1<<c)-1},r.F._get17=function(n,a){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(n,a){return(n[a>>>3]|n[1+(a>>>3)]<<8|n[2+(a>>>3)]<<16|n[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var n=r.F.U,a=0;a<32768;a++){var c=a;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,n.rev15[a]=(c>>>16|c<<16)>>>17}function u(y,b,o){for(;b--!=0;)y.push(0,o)}for(a=0;a<32;a++)n.ldef[a]=n.of0[a]<<3|n.exb[a],n.ddef[a]=n.df0[a]<<4|n.dxb[a];u(n.fltree,144,8),u(n.fltree,112,9),u(n.fltree,24,7),u(n.fltree,8,8),r.F.makeCodes(n.fltree,9),r.F.codes2map(n.fltree,9,n.flmap),r.F.revCodes(n.fltree,9),u(n.fdtree,32,5),r.F.makeCodes(n.fdtree,5),r.F.codes2map(n.fdtree,5,n.fdmap),r.F.revCodes(n.fdtree,5),u(n.itree,19,0),u(n.ltree,286,0),u(n.dtree,30,0),u(n.ttree,320,0)}()})();var ds=os({__proto__:null,default:er},[er]);const lt=function(){var d={nextZero(o,t){for(;o[t]!=0;)t++;return t},readUshort:(o,t)=>o[t]<<8|o[t+1],writeUshort(o,t,s){o[t]=s>>8&255,o[t+1]=255&s},readUint:(o,t)=>16777216*o[t]+(o[t+1]<<16|o[t+2]<<8|o[t+3]),writeUint(o,t,s){o[t]=s>>24&255,o[t+1]=s>>16&255,o[t+2]=s>>8&255,o[t+3]=255&s},readASCII(o,t,s){let f="";for(let g=0;g<s;g++)f+=String.fromCharCode(o[t+g]);return f},writeASCII(o,t,s){for(let f=0;f<s.length;f++)o[t+f]=s.charCodeAt(f)},readBytes(o,t,s){const f=[];for(let g=0;g<s;g++)f.push(o[t+g]);return f},pad:o=>o.length<2?`0${o}`:o,readUTF8(o,t,s){let f,g="";for(let x=0;x<s;x++)g+=`%${d.pad(o[t+x].toString(16))}`;try{f=decodeURIComponent(g)}catch{return d.readASCII(o,t,s)}return f}};function e(o,t,s,f){const g=t*s,x=a(f),I=Math.ceil(t*x/8),E=new Uint8Array(4*g),B=new Uint32Array(E.buffer),{ctype:U}=f,{depth:P}=f,L=d.readUshort;if(U==6){const A=g<<2;if(P==8)for(var _=0;_<A;_+=4)E[_]=o[_],E[_+1]=o[_+1],E[_+2]=o[_+2],E[_+3]=o[_+3];if(P==16)for(_=0;_<A;_++)E[_]=o[_<<1]}else if(U==2){const A=f.tabs.tRNS;if(A==null){if(P==8)for(_=0;_<g;_++){var M=3*_;B[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M]}if(P==16)for(_=0;_<g;_++)M=6*_,B[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M]}else{var m=A[0];const R=A[1],Q=A[2];if(P==8)for(_=0;_<g;_++){var h=_<<2;M=3*_,B[_]=255<<24|o[M+2]<<16|o[M+1]<<8|o[M],o[M]==m&&o[M+1]==R&&o[M+2]==Q&&(E[h+3]=0)}if(P==16)for(_=0;_<g;_++)h=_<<2,M=6*_,B[_]=255<<24|o[M+4]<<16|o[M+2]<<8|o[M],L(o,M)==m&&L(o,M+2)==R&&L(o,M+4)==Q&&(E[h+3]=0)}}else if(U==3){const A=f.tabs.PLTE,R=f.tabs.tRNS,Q=R?R.length:0;if(P==1)for(var w=0;w<s;w++){var k=w*I,T=w*t;for(_=0;_<t;_++){h=T+_<<2;var C=3*(D=o[k+(_>>3)]>>7-((7&_)<<0)&1);E[h]=A[C],E[h+1]=A[C+1],E[h+2]=A[C+2],E[h+3]=D<Q?R[D]:255}}if(P==2)for(w=0;w<s;w++)for(k=w*I,T=w*t,_=0;_<t;_++)h=T+_<<2,C=3*(D=o[k+(_>>2)]>>6-((3&_)<<1)&3),E[h]=A[C],E[h+1]=A[C+1],E[h+2]=A[C+2],E[h+3]=D<Q?R[D]:255;if(P==4)for(w=0;w<s;w++)for(k=w*I,T=w*t,_=0;_<t;_++)h=T+_<<2,C=3*(D=o[k+(_>>1)]>>4-((1&_)<<2)&15),E[h]=A[C],E[h+1]=A[C+1],E[h+2]=A[C+2],E[h+3]=D<Q?R[D]:255;if(P==8)for(_=0;_<g;_++){var D;h=_<<2,C=3*(D=o[_]),E[h]=A[C],E[h+1]=A[C+1],E[h+2]=A[C+2],E[h+3]=D<Q?R[D]:255}}else if(U==4){if(P==8)for(_=0;_<g;_++){h=_<<2;var F=o[p=_<<1];E[h]=F,E[h+1]=F,E[h+2]=F,E[h+3]=o[p+1]}if(P==16)for(_=0;_<g;_++){var p;h=_<<2,F=o[p=_<<2],E[h]=F,E[h+1]=F,E[h+2]=F,E[h+3]=o[p+2]}}else if(U==0)for(m=f.tabs.tRNS?f.tabs.tRNS:-1,w=0;w<s;w++){const A=w*I,R=w*t;if(P==1)for(var v=0;v<t;v++){var Y=(F=255*(o[A+(v>>>3)]>>>7-(7&v)&1))==255*m?0:255;B[R+v]=Y<<24|F<<16|F<<8|F}else if(P==2)for(v=0;v<t;v++)Y=(F=85*(o[A+(v>>>2)]>>>6-((3&v)<<1)&3))==85*m?0:255,B[R+v]=Y<<24|F<<16|F<<8|F;else if(P==4)for(v=0;v<t;v++)Y=(F=17*(o[A+(v>>>1)]>>>4-((1&v)<<2)&15))==17*m?0:255,B[R+v]=Y<<24|F<<16|F<<8|F;else if(P==8)for(v=0;v<t;v++)Y=(F=o[A+v])==m?0:255,B[R+v]=Y<<24|F<<16|F<<8|F;else if(P==16)for(v=0;v<t;v++)F=o[A+(v<<1)],Y=L(o,A+(v<<1))==m?0:255,B[R+v]=Y<<24|F<<16|F<<8|F}return E}function i(o,t,s,f){const g=a(o),x=Math.ceil(s*g/8),I=new Uint8Array((x+1+o.interlace)*f);return t=o.tabs.CgBI?n(t,I):r(t,I),o.interlace==0?t=c(t,o,0,s,f):o.interlace==1&&(t=function(B,U){const P=U.width,L=U.height,_=a(U),M=_>>3,m=Math.ceil(P*_/8),h=new Uint8Array(L*m);let w=0;const k=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const v=C[F],Y=D[F];let A=0,R=0,Q=k[F];for(;Q<L;)Q+=v,R++;let q=T[F];for(;q<P;)q+=Y,A++;const $=Math.ceil(A*_/8);c(B,U,w,A,R);let N=0,O=k[F];for(;O<L;){let re=T[F],oe=w+N*$<<3;for(;re<P;){var p;if(_==1&&(p=(p=B[oe>>3])>>7-(7&oe)&1,h[O*m+(re>>3)]|=p<<7-((7&re)<<0)),_==2&&(p=(p=B[oe>>3])>>6-(7&oe)&3,h[O*m+(re>>2)]|=p<<6-((3&re)<<1)),_==4&&(p=(p=B[oe>>3])>>4-(7&oe)&15,h[O*m+(re>>1)]|=p<<4-((1&re)<<2)),_>=8){const ue=O*m+re*M;for(let ve=0;ve<M;ve++)h[ue+ve]=B[(oe>>3)+ve]}oe+=_,re+=Y}N++,O+=v}A*R!=0&&(w+=R*(1+$)),F+=1}return h}(t,o)),t}function r(o,t){return n(new Uint8Array(o.buffer,2,o.length-6),t)}var n=function(){const o={H:{}};return o.H.N=function(t,s){const f=Uint8Array;let g,x,I=0,E=0,B=0,U=0,P=0,L=0,_=0,M=0,m=0;if(t[0]==3&&t[1]==0)return s||new f(0);const h=o.H,w=h.b,k=h.e,T=h.R,C=h.n,D=h.A,F=h.Z,p=h.m,v=s==null;for(v&&(s=new f(t.length>>>2<<5));I==0;)if(I=w(t,m,1),E=w(t,m+1,2),m+=3,E!=0){if(v&&(s=o.H.W(s,M+(1<<17))),E==1&&(g=p.J,x=p.h,L=511,_=31),E==2){B=k(t,m,5)+257,U=k(t,m+5,5)+1,P=k(t,m+10,4)+4,m+=14;let A=1;for(var Y=0;Y<38;Y+=2)p.Q[Y]=0,p.Q[Y+1]=0;for(Y=0;Y<P;Y++){const q=k(t,m+3*Y,3);p.Q[1+(p.X[Y]<<1)]=q,q>A&&(A=q)}m+=3*P,C(p.Q,A),D(p.Q,A,p.u),g=p.w,x=p.d,m=T(p.u,(1<<A)-1,B+U,t,m,p.v);const R=h.V(p.v,0,B,p.C);L=(1<<R)-1;const Q=h.V(p.v,B,U,p.D);_=(1<<Q)-1,C(p.C,R),D(p.C,R,g),C(p.D,Q),D(p.D,Q,x)}for(;;){const A=g[F(t,m)&L];m+=15&A;const R=A>>>4;if(!(R>>>8))s[M++]=R;else{if(R==256)break;{let Q=M+R-254;if(R>264){const re=p.q[R-257];Q=M+(re>>>3)+k(t,m,7&re),m+=7&re}const q=x[F(t,m)&_];m+=15&q;const $=q>>>4,N=p.c[$],O=(N>>>4)+w(t,m,15&N);for(m+=15&N;M<Q;)s[M]=s[M++-O],s[M]=s[M++-O],s[M]=s[M++-O],s[M]=s[M++-O];M=Q}}}}else{7&m&&(m+=8-(7&m));const A=4+(m>>>3),R=t[A-4]|t[A-3]<<8;v&&(s=o.H.W(s,M+R)),s.set(new f(t.buffer,t.byteOffset+A,R),M),m=A+R<<3,M+=R}return s.length==M?s:s.slice(0,M)},o.H.W=function(t,s){const f=t.length;if(s<=f)return t;const g=new Uint8Array(f<<1);return g.set(t,0),g},o.H.R=function(t,s,f,g,x,I){const E=o.H.e,B=o.H.Z;let U=0;for(;U<f;){const P=t[B(g,x)&s];x+=15&P;const L=P>>>4;if(L<=15)I[U]=L,U++;else{let _=0,M=0;L==16?(M=3+E(g,x,2),x+=2,_=I[U-1]):L==17?(M=3+E(g,x,3),x+=3):L==18&&(M=11+E(g,x,7),x+=7);const m=U+M;for(;U<m;)I[U]=_,U++}}return x},o.H.V=function(t,s,f,g){let x=0,I=0;const E=g.length>>>1;for(;I<f;){const B=t[I+s];g[I<<1]=0,g[1+(I<<1)]=B,B>x&&(x=B),I++}for(;I<E;)g[I<<1]=0,g[1+(I<<1)]=0,I++;return x},o.H.n=function(t,s){const f=o.H.m,g=t.length;let x,I,E,B;const U=f.j;for(var P=0;P<=s;P++)U[P]=0;for(P=1;P<g;P+=2)U[t[P]]++;const L=f.K;for(x=0,U[0]=0,I=1;I<=s;I++)x=x+U[I-1]<<1,L[I]=x;for(E=0;E<g;E+=2)B=t[E+1],B!=0&&(t[E]=L[B],L[B]++)},o.H.A=function(t,s,f){const g=t.length,x=o.H.m.r;for(let I=0;I<g;I+=2)if(t[I+1]!=0){const E=I>>1,B=t[I+1],U=E<<4|B,P=s-B;let L=t[I]<<P;const _=L+(1<<P);for(;L!=_;)f[x[L]>>>15-s]=U,L++}},o.H.l=function(t,s){const f=o.H.m.r,g=15-s;for(let x=0;x<t.length;x+=2){const I=t[x]<<s-t[x+1];t[x]=f[I]>>>g}},o.H.M=function(t,s,f){f<<=7&s;const g=s>>>3;t[g]|=f,t[g+1]|=f>>>8},o.H.I=function(t,s,f){f<<=7&s;const g=s>>>3;t[g]|=f,t[g+1]|=f>>>8,t[g+2]|=f>>>16},o.H.e=function(t,s,f){return(t[s>>>3]|t[1+(s>>>3)]<<8)>>>(7&s)&(1<<f)-1},o.H.b=function(t,s,f){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16)>>>(7&s)&(1<<f)-1},o.H.Z=function(t,s){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16)>>>(7&s)},o.H.i=function(t,s){return(t[s>>>3]|t[1+(s>>>3)]<<8|t[2+(s>>>3)]<<16|t[3+(s>>>3)]<<24)>>>(7&s)},o.H.m=function(){const t=Uint16Array,s=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new s(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new s(286),Y:new s(30),a:new s(19),t:new s(15e3),k:new t(65536),g:new t(32768)}}(),function(){const t=o.H.m;for(var s=0;s<32768;s++){let g=s;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,t.r[s]=(g>>>16|g<<16)>>>17}function f(g,x,I){for(;x--!=0;)g.push(0,I)}for(s=0;s<32;s++)t.q[s]=t.S[s]<<3|t.T[s],t.c[s]=t.p[s]<<4|t.z[s];f(t._,144,8),f(t._,112,9),f(t._,24,7),f(t._,8,8),o.H.n(t._,9),o.H.A(t._,9,t.J),o.H.l(t._,9),f(t.$,32,5),o.H.n(t.$,5),o.H.A(t.$,5,t.h),o.H.l(t.$,5),f(t.Q,19,0),f(t.C,286,0),f(t.D,30,0),f(t.v,320,0)}(),o.H.N}();function a(o){return[1,null,3,1,2,null,4][o.ctype]*o.depth}function c(o,t,s,f,g){let x=a(t);const I=Math.ceil(f*x/8);let E,B;x=Math.ceil(x/8);let U=o[s],P=0;if(U>1&&(o[s]=[0,0,1][U-2]),U==3)for(P=x;P<I;P++)o[P+1]=o[P+1]+(o[P+1-x]>>>1)&255;for(let L=0;L<g;L++)if(E=s+L*I,B=E+L+1,U=o[B-1],P=0,U==0)for(;P<I;P++)o[E+P]=o[B+P];else if(U==1){for(;P<x;P++)o[E+P]=o[B+P];for(;P<I;P++)o[E+P]=o[B+P]+o[E+P-x]}else if(U==2)for(;P<I;P++)o[E+P]=o[B+P]+o[E+P-I];else if(U==3){for(;P<x;P++)o[E+P]=o[B+P]+(o[E+P-I]>>>1);for(;P<I;P++)o[E+P]=o[B+P]+(o[E+P-I]+o[E+P-x]>>>1)}else{for(;P<x;P++)o[E+P]=o[B+P]+u(0,o[E+P-I],0);for(;P<I;P++)o[E+P]=o[B+P]+u(o[E+P-x],o[E+P-I],o[E+P-x-I])}return o}function u(o,t,s){const f=o+t-s,g=f-o,x=f-t,I=f-s;return g*g<=x*x&&g*g<=I*I?o:x*x<=I*I?t:s}function y(o,t,s){s.width=d.readUint(o,t),t+=4,s.height=d.readUint(o,t),t+=4,s.depth=o[t],t++,s.ctype=o[t],t++,s.compress=o[t],t++,s.filter=o[t],t++,s.interlace=o[t],t++}function b(o,t,s,f,g,x,I,E,B){const U=Math.min(t,g),P=Math.min(s,x);let L=0,_=0;for(let F=0;F<P;F++)for(let p=0;p<U;p++)if(I>=0&&E>=0?(L=F*t+p<<2,_=(E+F)*g+I+p<<2):(L=(-E+F)*t-I+p<<2,_=F*g+p<<2),B==0)f[_]=o[L],f[_+1]=o[L+1],f[_+2]=o[L+2],f[_+3]=o[L+3];else if(B==1){var M=o[L+3]*.00392156862745098,m=o[L]*M,h=o[L+1]*M,w=o[L+2]*M,k=f[_+3]*(1/255),T=f[_]*k,C=f[_+1]*k,D=f[_+2]*k;const v=1-M,Y=M+k*v,A=Y==0?0:1/Y;f[_+3]=255*Y,f[_+0]=(m+T*v)*A,f[_+1]=(h+C*v)*A,f[_+2]=(w+D*v)*A}else if(B==2)M=o[L+3],m=o[L],h=o[L+1],w=o[L+2],k=f[_+3],T=f[_],C=f[_+1],D=f[_+2],M==k&&m==T&&h==C&&w==D?(f[_]=0,f[_+1]=0,f[_+2]=0,f[_+3]=0):(f[_]=m,f[_+1]=h,f[_+2]=w,f[_+3]=M);else if(B==3){if(M=o[L+3],m=o[L],h=o[L+1],w=o[L+2],k=f[_+3],T=f[_],C=f[_+1],D=f[_+2],M==k&&m==T&&h==C&&w==D)continue;if(M<220&&k>20)return!1}return!0}return{decode:function(t){const s=new Uint8Array(t);let f=8;const g=d,x=g.readUshort,I=g.readUint,E={tabs:{},frames:[]},B=new Uint8Array(s.length);let U,P=0,L=0;const _=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(s[M]!=_[M])throw"The input is not a PNG file!";for(;f<s.length;){const F=g.readUint(s,f);f+=4;const p=g.readASCII(s,f,4);if(f+=4,p=="IHDR")y(s,f,E);else if(p=="iCCP"){for(var m=f;s[m]!=0;)m++;g.readASCII(s,f,m-f),s[m+1];const v=s.slice(m+2,f+F);let Y=null;try{Y=r(v)}catch{Y=n(v)}E.tabs[p]=Y}else if(p=="CgBI")E.tabs[p]=s.slice(f,f+4);else if(p=="IDAT"){for(M=0;M<F;M++)B[P+M]=s[f+M];P+=F}else if(p=="acTL")E.tabs[p]={num_frames:I(s,f),num_plays:I(s,f+4)},U=new Uint8Array(s.length);else if(p=="fcTL"){L!=0&&((D=E.frames[E.frames.length-1]).data=i(E,U.slice(0,L),D.rect.width,D.rect.height),L=0);const v={x:I(s,f+12),y:I(s,f+16),width:I(s,f+4),height:I(s,f+8)};let Y=x(s,f+22);Y=x(s,f+20)/(Y==0?100:Y);const A={rect:v,delay:Math.round(1e3*Y),dispose:s[f+24],blend:s[f+25]};E.frames.push(A)}else if(p=="fdAT"){for(M=0;M<F-4;M++)U[L+M]=s[f+M+4];L+=F-4}else if(p=="pHYs")E.tabs[p]=[g.readUint(s,f),g.readUint(s,f+4),s[f+8]];else if(p=="cHRM")for(E.tabs[p]=[],M=0;M<8;M++)E.tabs[p].push(g.readUint(s,f+4*M));else if(p=="tEXt"||p=="zTXt"){E.tabs[p]==null&&(E.tabs[p]={});var h=g.nextZero(s,f),w=g.readASCII(s,f,h-f),k=f+F-h-1;if(p=="tEXt")C=g.readASCII(s,h+1,k);else{var T=r(s.slice(h+2,h+2+k));C=g.readUTF8(T,0,T.length)}E.tabs[p][w]=C}else if(p=="iTXt"){E.tabs[p]==null&&(E.tabs[p]={}),h=0,m=f,h=g.nextZero(s,m),w=g.readASCII(s,m,h-m);const v=s[m=h+1];var C;s[m+1],m+=2,h=g.nextZero(s,m),g.readASCII(s,m,h-m),m=h+1,h=g.nextZero(s,m),g.readUTF8(s,m,h-m),k=F-((m=h+1)-f),v==0?C=g.readUTF8(s,m,k):(T=r(s.slice(m,m+k)),C=g.readUTF8(T,0,T.length)),E.tabs[p][w]=C}else if(p=="PLTE")E.tabs[p]=g.readBytes(s,f,F);else if(p=="hIST"){const v=E.tabs.PLTE.length/3;for(E.tabs[p]=[],M=0;M<v;M++)E.tabs[p].push(x(s,f+2*M))}else if(p=="tRNS")E.ctype==3?E.tabs[p]=g.readBytes(s,f,F):E.ctype==0?E.tabs[p]=x(s,f):E.ctype==2&&(E.tabs[p]=[x(s,f),x(s,f+2),x(s,f+4)]);else if(p=="gAMA")E.tabs[p]=g.readUint(s,f)/1e5;else if(p=="sRGB")E.tabs[p]=s[f];else if(p=="bKGD")E.ctype==0||E.ctype==4?E.tabs[p]=[x(s,f)]:E.ctype==2||E.ctype==6?E.tabs[p]=[x(s,f),x(s,f+2),x(s,f+4)]:E.ctype==3&&(E.tabs[p]=s[f]);else if(p=="IEND")break;f+=F,g.readUint(s,f),f+=4}var D;return L!=0&&((D=E.frames[E.frames.length-1]).data=i(E,U.slice(0,L),D.rect.width,D.rect.height)),E.data=i(E,B,E.width,E.height),delete E.compress,delete E.interlace,delete E.filter,E},toRGBA8:function(t){const s=t.width,f=t.height;if(t.tabs.acTL==null)return[e(t.data,s,f,t).buffer];const g=[];t.frames[0].data==null&&(t.frames[0].data=t.data);const x=s*f*4,I=new Uint8Array(x),E=new Uint8Array(x),B=new Uint8Array(x);for(let P=0;P<t.frames.length;P++){const L=t.frames[P],_=L.rect.x,M=L.rect.y,m=L.rect.width,h=L.rect.height,w=e(L.data,m,h,t);if(P!=0)for(var U=0;U<x;U++)B[U]=I[U];if(L.blend==0?b(w,m,h,I,s,f,_,M,0):L.blend==1&&b(w,m,h,I,s,f,_,M,1),g.push(I.buffer.slice(0)),L.dispose!=0){if(L.dispose==1)b(E,m,h,I,s,f,_,M,0);else if(L.dispose==2)for(U=0;U<x;U++)I[U]=B[U]}}return g},_paeth:u,_copyTile:b,_bin:d}}();(function(){const{_copyTile:d}=lt,{_bin:e}=lt,i=lt._paeth;var r={table:function(){const m=new Uint32Array(256);for(let h=0;h<256;h++){let w=h;for(let k=0;k<8;k++)1&w?w=3988292384^w>>>1:w>>>=1;m[h]=w}return m}(),update(m,h,w,k){for(let T=0;T<k;T++)m=r.table[255&(m^h[w+T])]^m>>>8;return m},crc:(m,h,w)=>4294967295^r.update(4294967295,m,h,w)};function n(m,h,w,k){h[w]+=m[0]*k>>4,h[w+1]+=m[1]*k>>4,h[w+2]+=m[2]*k>>4,h[w+3]+=m[3]*k>>4}function a(m){return Math.max(0,Math.min(255,m))}function c(m,h){const w=m[0]-h[0],k=m[1]-h[1],T=m[2]-h[2],C=m[3]-h[3];return w*w+k*k+T*T+C*C}function u(m,h,w,k,T,C,D){D==null&&(D=1);const F=k.length,p=[];for(var v=0;v<F;v++){const O=k[v];p.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(v=0;v<F;v++){let O=4294967295;for(var Y=0,A=0;A<F;A++){var R=c(p[v],p[A]);A!=v&&R<O&&(O=R,Y=A)}}const Q=new Uint32Array(T.buffer),q=new Int16Array(h*w*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(v=0;v<$.length;v++)$[v]=255*(($[v]+.5)/16-.5);for(let O=0;O<w;O++)for(let re=0;re<h;re++){var N;v=4*(O*h+re),D!=2?N=[a(m[v]+q[v]),a(m[v+1]+q[v+1]),a(m[v+2]+q[v+2]),a(m[v+3]+q[v+3])]:(R=$[4*(3&O)+(3&re)],N=[a(m[v]+R),a(m[v+1]+R),a(m[v+2]+R),a(m[v+3]+R)]),Y=0;let oe=16777215;for(A=0;A<F;A++){const me=c(N,p[A]);me<oe&&(oe=me,Y=A)}const ue=p[Y],ve=[N[0]-ue[0],N[1]-ue[1],N[2]-ue[2],N[3]-ue[3]];D==1&&(re!=h-1&&n(ve,q,v+4,7),O!=w-1&&(re!=0&&n(ve,q,v+4*h-4,3),n(ve,q,v+4*h,5),re!=h-1&&n(ve,q,v+4*h+4,1))),C[v>>2]=Y,Q[v>>2]=k[Y]}}function y(m,h,w,k,T){T==null&&(T={});const{crc:C}=r,D=e.writeUint,F=e.writeUshort,p=e.writeASCII;let v=8;const Y=m.frames.length>1;let A,R=!1,Q=33+(Y?20:0);if(T.sRGB!=null&&(Q+=13),T.pHYs!=null&&(Q+=21),T.iCCP!=null&&(A=pako.deflate(T.iCCP),Q+=21+A.length+4),m.ctype==3){for(var q=m.plte.length,$=0;$<q;$++)m.plte[$]>>>24!=255&&(R=!0);Q+=8+3*q+4+(R?8+1*q+4:0)}for(var N=0;N<m.frames.length;N++)Y&&(Q+=38),Q+=(ue=m.frames[N]).cimg.length+12,N!=0&&(Q+=4);Q+=12;const O=new Uint8Array(Q),re=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)O[$]=re[$];if(D(O,v,13),v+=4,p(O,v,"IHDR"),v+=4,D(O,v,h),v+=4,D(O,v,w),v+=4,O[v]=m.depth,v++,O[v]=m.ctype,v++,O[v]=0,v++,O[v]=0,v++,O[v]=0,v++,D(O,v,C(O,v-17,17)),v+=4,T.sRGB!=null&&(D(O,v,1),v+=4,p(O,v,"sRGB"),v+=4,O[v]=T.sRGB,v++,D(O,v,C(O,v-5,5)),v+=4),T.iCCP!=null){const ve=13+A.length;D(O,v,ve),v+=4,p(O,v,"iCCP"),v+=4,p(O,v,"ICC profile"),v+=11,v+=2,O.set(A,v),v+=A.length,D(O,v,C(O,v-(ve+4),ve+4)),v+=4}if(T.pHYs!=null&&(D(O,v,9),v+=4,p(O,v,"pHYs"),v+=4,D(O,v,T.pHYs[0]),v+=4,D(O,v,T.pHYs[1]),v+=4,O[v]=T.pHYs[2],v++,D(O,v,C(O,v-13,13)),v+=4),Y&&(D(O,v,8),v+=4,p(O,v,"acTL"),v+=4,D(O,v,m.frames.length),v+=4,D(O,v,T.loop!=null?T.loop:0),v+=4,D(O,v,C(O,v-12,12)),v+=4),m.ctype==3){for(D(O,v,3*(q=m.plte.length)),v+=4,p(O,v,"PLTE"),v+=4,$=0;$<q;$++){const ve=3*$,me=m.plte[$],_e=255&me,Me=me>>>8&255,ke=me>>>16&255;O[v+ve+0]=_e,O[v+ve+1]=Me,O[v+ve+2]=ke}if(v+=3*q,D(O,v,C(O,v-3*q-4,3*q+4)),v+=4,R){for(D(O,v,q),v+=4,p(O,v,"tRNS"),v+=4,$=0;$<q;$++)O[v+$]=m.plte[$]>>>24&255;v+=q,D(O,v,C(O,v-q-4,q+4)),v+=4}}let oe=0;for(N=0;N<m.frames.length;N++){var ue=m.frames[N];Y&&(D(O,v,26),v+=4,p(O,v,"fcTL"),v+=4,D(O,v,oe++),v+=4,D(O,v,ue.rect.width),v+=4,D(O,v,ue.rect.height),v+=4,D(O,v,ue.rect.x),v+=4,D(O,v,ue.rect.y),v+=4,F(O,v,k[N]),v+=2,F(O,v,1e3),v+=2,O[v]=ue.dispose,v++,O[v]=ue.blend,v++,D(O,v,C(O,v-30,30)),v+=4);const ve=ue.cimg;D(O,v,(q=ve.length)+(N==0?0:4)),v+=4;const me=v;p(O,v,N==0?"IDAT":"fdAT"),v+=4,N!=0&&(D(O,v,oe++),v+=4),O.set(ve,v),v+=q,D(O,v,C(O,me,v-me)),v+=4}return D(O,v,0),v+=4,p(O,v,"IEND"),v+=4,D(O,v,C(O,v-4,4)),v+=4,O.buffer}function b(m,h,w){for(let k=0;k<m.frames.length;k++){const T=m.frames[k];T.rect.width;const C=T.rect.height,D=new Uint8Array(C*T.bpl+C);T.cimg=f(T.img,C,T.bpp,T.bpl,D,h,w)}}function o(m,h,w,k,T){const C=T[0],D=T[1],F=T[2],p=T[3],v=T[4],Y=T[5];let A=6,R=8,Q=255;for(var q=0;q<m.length;q++){const G=new Uint8Array(m[q]);for(var $=G.length,N=0;N<$;N+=4)Q&=G[N+3]}const O=Q!=255,re=function(ie,ne,Z,X,ae,pe){const ye=[];for(var fe=0;fe<ie.length;fe++){const Te=new Uint8Array(ie[fe]),Oe=new Uint32Array(Te.buffer);var we;let $e=0,We=0,Le=ne,Ue=Z,Ke=X?1:0;if(fe!=0){const dt=pe||X||fe==1||ye[fe-2].dispose!=0?1:2;let at=0,bt=1e9;for(let Mt=0;Mt<dt;Mt++){var Se=new Uint8Array(ie[fe-1-Mt]);const Bt=new Uint32Array(ie[fe-1-Mt]);let it=ne,ut=Z,Dt=-1,Rt=-1;for(let _t=0;_t<Z;_t++)for(let ft=0;ft<ne;ft++)Oe[xe=_t*ne+ft]!=Bt[xe]&&(ft<it&&(it=ft),ft>Dt&&(Dt=ft),_t<ut&&(ut=_t),_t>Rt&&(Rt=_t));Dt==-1&&(it=ut=Dt=Rt=0),ae&&((1&it)==1&&it--,(1&ut)==1&&ut--);const qt=(Dt-it+1)*(Rt-ut+1);qt<bt&&(bt=qt,at=Mt,$e=it,We=ut,Le=Dt-it+1,Ue=Rt-ut+1)}Se=new Uint8Array(ie[fe-1-at]),at==1&&(ye[fe-1].dispose=2),we=new Uint8Array(Le*Ue*4),d(Se,ne,Z,we,Le,Ue,-$e,-We,0),Ke=d(Te,ne,Z,we,Le,Ue,-$e,-We,3)?1:0,Ke==1?s(Te,ne,Z,we,{x:$e,y:We,width:Le,height:Ue}):d(Te,ne,Z,we,Le,Ue,-$e,-We,0)}else we=Te.slice(0);ye.push({rect:{x:$e,y:We,width:Le,height:Ue},img:we,blend:Ke,dispose:0})}if(X)for(fe=0;fe<ye.length;fe++){if((Ge=ye[fe]).blend==1)continue;const Te=Ge.rect,Oe=ye[fe-1].rect,$e=Math.min(Te.x,Oe.x),We=Math.min(Te.y,Oe.y),Le={x:$e,y:We,width:Math.max(Te.x+Te.width,Oe.x+Oe.width)-$e,height:Math.max(Te.y+Te.height,Oe.y+Oe.height)-We};ye[fe-1].dispose=1,fe-1!=0&&t(ie,ne,Z,ye,fe-1,Le,ae),t(ie,ne,Z,ye,fe,Le,ae)}let Ae=0;if(ie.length!=1)for(var xe=0;xe<ye.length;xe++){var Ge;Ae+=(Ge=ye[xe]).rect.width*Ge.rect.height}return ye}(m,h,w,C,D,F),oe={},ue=[],ve=[];if(k!=0){const G=[];for(N=0;N<re.length;N++)G.push(re[N].img.buffer);const ie=function(ae){let pe=0;for(var ye=0;ye<ae.length;ye++)pe+=ae[ye].byteLength;const fe=new Uint8Array(pe);let we=0;for(ye=0;ye<ae.length;ye++){const Se=new Uint8Array(ae[ye]),Ae=Se.length;for(let xe=0;xe<Ae;xe+=4){let Ge=Se[xe],Te=Se[xe+1],Oe=Se[xe+2];const $e=Se[xe+3];$e==0&&(Ge=Te=Oe=0),fe[we+xe]=Ge,fe[we+xe+1]=Te,fe[we+xe+2]=Oe,fe[we+xe+3]=$e}we+=Ae}return fe.buffer}(G),ne=x(ie,k);for(N=0;N<ne.plte.length;N++)ue.push(ne.plte[N].est.rgba);let Z=0;for(N=0;N<re.length;N++){const X=(_e=re[N]).img.length;var me=new Uint8Array(ne.inds.buffer,Z>>2,X>>2);ve.push(me);const ae=new Uint8Array(ne.abuf,Z,X);Y&&u(_e.img,_e.rect.width,_e.rect.height,ue,ae,me),_e.img.set(ae),Z+=X}}else for(q=0;q<re.length;q++){var _e=re[q];const G=new Uint32Array(_e.img.buffer);var Me=_e.rect.width;for($=G.length,me=new Uint8Array($),ve.push(me),N=0;N<$;N++){const ie=G[N];if(N!=0&&ie==G[N-1])me[N]=me[N-1];else if(N>Me&&ie==G[N-Me])me[N]=me[N-Me];else{let ne=oe[ie];if(ne==null&&(oe[ie]=ne=ue.length,ue.push(ie),ue.length>=300))break;me[N]=ne}}}const ke=ue.length;for(ke<=256&&v==0&&(R=ke<=2?1:ke<=4?2:ke<=16?4:8,R=Math.max(R,p)),q=0;q<re.length;q++){(_e=re[q]).rect.x,_e.rect.y,Me=_e.rect.width;const G=_e.rect.height;let ie=_e.img;new Uint32Array(ie.buffer);let ne=4*Me,Z=4;if(ke<=256&&v==0){ne=Math.ceil(R*Me/8);var j=new Uint8Array(ne*G);const X=ve[q];for(let ae=0;ae<G;ae++){N=ae*ne;const pe=ae*Me;if(R==8)for(var te=0;te<Me;te++)j[N+te]=X[pe+te];else if(R==4)for(te=0;te<Me;te++)j[N+(te>>1)]|=X[pe+te]<<4-4*(1&te);else if(R==2)for(te=0;te<Me;te++)j[N+(te>>2)]|=X[pe+te]<<6-2*(3&te);else if(R==1)for(te=0;te<Me;te++)j[N+(te>>3)]|=X[pe+te]<<7-1*(7&te)}ie=j,A=3,Z=1}else if(O==0&&re.length==1){j=new Uint8Array(Me*G*3);const X=Me*G;for(N=0;N<X;N++){const ae=3*N,pe=4*N;j[ae]=ie[pe],j[ae+1]=ie[pe+1],j[ae+2]=ie[pe+2]}ie=j,A=2,Z=3,ne=3*Me}_e.img=ie,_e.bpl=ne,_e.bpp=Z}return{ctype:A,depth:R,plte:ue,frames:re}}function t(m,h,w,k,T,C,D){const F=Uint8Array,p=Uint32Array,v=new F(m[T-1]),Y=new p(m[T-1]),A=T+1<m.length?new F(m[T+1]):null,R=new F(m[T]),Q=new p(R.buffer);let q=h,$=w,N=-1,O=-1;for(let oe=0;oe<C.height;oe++)for(let ue=0;ue<C.width;ue++){const ve=C.x+ue,me=C.y+oe,_e=me*h+ve,Me=Q[_e];Me==0||k[T-1].dispose==0&&Y[_e]==Me&&(A==null||A[4*_e+3]!=0)||(ve<q&&(q=ve),ve>N&&(N=ve),me<$&&($=me),me>O&&(O=me))}N==-1&&(q=$=N=O=0),D&&((1&q)==1&&q--,(1&$)==1&&$--),C={x:q,y:$,width:N-q+1,height:O-$+1};const re=k[T];re.rect=C,re.blend=1,re.img=new Uint8Array(C.width*C.height*4),k[T-1].dispose==0?(d(v,h,w,re.img,C.width,C.height,-C.x,-C.y,0),s(R,h,w,re.img,C)):d(R,h,w,re.img,C.width,C.height,-C.x,-C.y,0)}function s(m,h,w,k,T){d(m,h,w,k,T.width,T.height,-T.x,-T.y,2)}function f(m,h,w,k,T,C,D){const F=[];let p,v=[0,1,2,3,4];C!=-1?v=[C]:(h*k>5e5||w==1)&&(v=[0]),D&&(p={level:0});const Y=ds;for(var A=0;A<v.length;A++){for(let q=0;q<h;q++)g(T,m,q,k,w,v[A]);F.push(Y.deflate(T,p))}let R,Q=1e9;for(A=0;A<F.length;A++)F[A].length<Q&&(R=A,Q=F[A].length);return F[R]}function g(m,h,w,k,T,C){const D=w*k;let F=D+w;if(m[F]=C,F++,C==0)if(k<500)for(var p=0;p<k;p++)m[F+p]=h[D+p];else m.set(new Uint8Array(h.buffer,D,k),F);else if(C==1){for(p=0;p<T;p++)m[F+p]=h[D+p];for(p=T;p<k;p++)m[F+p]=h[D+p]-h[D+p-T]+256&255}else if(w==0){for(p=0;p<T;p++)m[F+p]=h[D+p];if(C==2)for(p=T;p<k;p++)m[F+p]=h[D+p];if(C==3)for(p=T;p<k;p++)m[F+p]=h[D+p]-(h[D+p-T]>>1)+256&255;if(C==4)for(p=T;p<k;p++)m[F+p]=h[D+p]-i(h[D+p-T],0,0)+256&255}else{if(C==2)for(p=0;p<k;p++)m[F+p]=h[D+p]+256-h[D+p-k]&255;if(C==3){for(p=0;p<T;p++)m[F+p]=h[D+p]+256-(h[D+p-k]>>1)&255;for(p=T;p<k;p++)m[F+p]=h[D+p]+256-(h[D+p-k]+h[D+p-T]>>1)&255}if(C==4){for(p=0;p<T;p++)m[F+p]=h[D+p]+256-i(0,h[D+p-k],0)&255;for(p=T;p<k;p++)m[F+p]=h[D+p]+256-i(h[D+p-T],h[D+p-k],h[D+p-T-k])&255}}}function x(m,h){const w=new Uint8Array(m),k=w.slice(0),T=new Uint32Array(k.buffer),C=I(k,h),D=C[0],F=C[1],p=w.length,v=new Uint8Array(p>>2);let Y;if(w.length<2e7)for(var A=0;A<p;A+=4)Y=E(D,R=w[A]*(1/255),Q=w[A+1]*(1/255),q=w[A+2]*(1/255),$=w[A+3]*(1/255)),v[A>>2]=Y.ind,T[A>>2]=Y.est.rgba;else for(A=0;A<p;A+=4){var R=w[A]*.00392156862745098,Q=w[A+1]*(1/255),q=w[A+2]*(1/255),$=w[A+3]*(1/255);for(Y=D;Y.left;)Y=B(Y.est,R,Q,q,$)<=0?Y.left:Y.right;v[A>>2]=Y.ind,T[A>>2]=Y.est.rgba}return{abuf:k.buffer,inds:v,plte:F}}function I(m,h,w){w==null&&(w=1e-4);const k=new Uint32Array(m.buffer),T={i0:0,i1:m.length,bst:null,est:null,tdst:0,left:null,right:null};T.bst=L(m,T.i0,T.i1),T.est=_(T.bst);const C=[T];for(;C.length<h;){let F=0,p=0;for(var D=0;D<C.length;D++)C[D].est.L>F&&(F=C[D].est.L,p=D);if(F<w)break;const v=C[p],Y=U(m,k,v.i0,v.i1,v.est.e,v.est.eMq255);if(v.i0>=Y||v.i1<=Y){v.est.L=0;continue}const A={i0:v.i0,i1:Y,bst:null,est:null,tdst:0,left:null,right:null};A.bst=L(m,A.i0,A.i1),A.est=_(A.bst);const R={i0:Y,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};for(R.bst={R:[],m:[],N:v.bst.N-A.bst.N},D=0;D<16;D++)R.bst.R[D]=v.bst.R[D]-A.bst.R[D];for(D=0;D<4;D++)R.bst.m[D]=v.bst.m[D]-A.bst.m[D];R.est=_(R.bst),v.left=A,v.right=R,C[p]=A,C.push(R)}for(C.sort((F,p)=>p.bst.N-F.bst.N),D=0;D<C.length;D++)C[D].ind=D;return[T,C]}function E(m,h,w,k,T){if(m.left==null)return m.tdst=function(A,R,Q,q,$){const N=R-A[0],O=Q-A[1],re=q-A[2],oe=$-A[3];return N*N+O*O+re*re+oe*oe}(m.est.q,h,w,k,T),m;const C=B(m.est,h,w,k,T);let D=m.left,F=m.right;C>0&&(D=m.right,F=m.left);const p=E(D,h,w,k,T);if(p.tdst<=C*C)return p;const v=E(F,h,w,k,T);return v.tdst<p.tdst?v:p}function B(m,h,w,k,T){const{e:C}=m;return C[0]*h+C[1]*w+C[2]*k+C[3]*T-m.eMq}function U(m,h,w,k,T,C){for(k-=4;w<k;){for(;P(m,w,T)<=C;)w+=4;for(;P(m,k,T)>C;)k-=4;if(w>=k)break;const D=h[w>>2];h[w>>2]=h[k>>2],h[k>>2]=D,w+=4,k-=4}for(;P(m,w,T)>C;)w-=4;return w+4}function P(m,h,w){return m[h]*w[0]+m[h+1]*w[1]+m[h+2]*w[2]+m[h+3]*w[3]}function L(m,h,w){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],C=w-h>>2;for(let D=h;D<w;D+=4){const F=m[D]*.00392156862745098,p=m[D+1]*(1/255),v=m[D+2]*(1/255),Y=m[D+3]*(1/255);T[0]+=F,T[1]+=p,T[2]+=v,T[3]+=Y,k[0]+=F*F,k[1]+=F*p,k[2]+=F*v,k[3]+=F*Y,k[5]+=p*p,k[6]+=p*v,k[7]+=p*Y,k[10]+=v*v,k[11]+=v*Y,k[15]+=Y*Y}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:T,N:C}}function _(m){const{R:h}=m,{m:w}=m,{N:k}=m,T=w[0],C=w[1],D=w[2],F=w[3],p=k==0?0:1/k,v=[h[0]-T*T*p,h[1]-T*C*p,h[2]-T*D*p,h[3]-T*F*p,h[4]-C*T*p,h[5]-C*C*p,h[6]-C*D*p,h[7]-C*F*p,h[8]-D*T*p,h[9]-D*C*p,h[10]-D*D*p,h[11]-D*F*p,h[12]-F*T*p,h[13]-F*C*p,h[14]-F*D*p,h[15]-F*F*p],Y=v,A=M;let R=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,q=0;if(k!=0)for(let N=0;N<16&&(R=A.multVec(Y,R),q=Math.sqrt(A.dot(R,R)),R=A.sml(1/q,R),!(N!=0&&Math.abs(q-Q)<1e-9));N++)Q=q;const $=[T*p,C*p,D*p,F*p];return{Cov:v,q:$,e:R,L:Q,eMq255:A.dot(A.sml(255,$),R),eMq:A.dot(R,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var M={multVec:(m,h)=>[m[0]*h[0]+m[1]*h[1]+m[2]*h[2]+m[3]*h[3],m[4]*h[0]+m[5]*h[1]+m[6]*h[2]+m[7]*h[3],m[8]*h[0]+m[9]*h[1]+m[10]*h[2]+m[11]*h[3],m[12]*h[0]+m[13]*h[1]+m[14]*h[2]+m[15]*h[3]],dot:(m,h)=>m[0]*h[0]+m[1]*h[1]+m[2]*h[2]+m[3]*h[3],sml:(m,h)=>[m*h[0],m*h[1],m*h[2],m*h[3]]};lt.encode=function(h,w,k,T,C,D,F){T==null&&(T=0),F==null&&(F=!1);const p=o(h,w,k,T,[!1,!1,!1,0,F,!1]);return b(p,-1),y(p,w,k,C,D)},lt.encodeLL=function(h,w,k,T,C,D,F,p){const v={ctype:0+(T==1?0:2)+(C==0?0:4),depth:D,frames:[]},Y=(T+C)*D,A=Y*w;for(let R=0;R<h.length;R++)v.frames.push({rect:{x:0,y:0,width:w,height:k},img:new Uint8Array(h[R]),blend:0,dispose:1,bpp:Math.ceil(Y/8),bpl:Math.ceil(A/8)});return b(v,0,!0),y(v,w,k,F,p)},lt.encode.compress=o,lt.encode.dither=u,lt.quantize=x,lt.quantize.getKDtree=I,lt.quantize.getNearest=E})();const nn={toArrayBuffer(d,e){const i=d.width,r=d.height,n=i<<2,a=d.getContext("2d").getImageData(0,0,i,r),c=new Uint32Array(a.data.buffer),u=(32*i+31)/32<<2,y=u*r,b=122+y,o=new ArrayBuffer(b),t=new DataView(o),s=1<<20;let f,g,x,I,E=s,B=0,U=0,P=0;function L(m){t.setUint16(U,m,!0),U+=2}function _(m){t.setUint32(U,m,!0),U+=4}function M(m){U+=m}L(19778),_(b),M(4),_(122),_(108),_(i),_(-r>>>0),L(1),L(32),_(3),_(y),_(2835),_(2835),M(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function m(){for(;B<r&&E>0;){for(I=122+B*u,f=0;f<n;)E--,g=c[P++],x=g>>>24,t.setUint32(I+f,g<<8|x),f+=4;B++}P<c.length?(E=s,setTimeout(m,nn._dly)):e(o)}()},toBlob(d,e){this.toArrayBuffer(d,i=>{e(new Blob([i],{type:"image/bmp"}))})},_dly:9};var tt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},us={[tt.CHROME]:16384,[tt.FIREFOX]:11180,[tt.DESKTOP_SAFARI]:16384,[tt.IE]:8192,[tt.IOS]:4096,[tt.ETC]:8192};const Dr=typeof window<"u",an=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,tr=Dr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),fs=(Dr||an)&&(tr&&tr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),sn=(Dr||an)&&(tr&&tr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function kr(d,e,i=Date.now()){return new Promise(r=>{const n=d.split(","),a=n[0].match(/:(.*?);/)[1],c=globalThis.atob(n[1]);let u=c.length;const y=new Uint8Array(u);for(;u--;)y[u]=c.charCodeAt(u);const b=new Blob([y],{type:a});b.name=e,b.lastModified=i,r(b)})}function on(d){return new Promise((e,i)=>{const r=new sn;r.onload=()=>e(r.result),r.onerror=n=>i(n),r.readAsDataURL(d)})}function ln(d){return new Promise((e,i)=>{const r=new Image;r.onload=()=>e(r),r.onerror=n=>i(n),r.src=d})}function Ft(){if(Ft.cachedResult!==void 0)return Ft.cachedResult;let d=tt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?d=tt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?d=tt.IOS:/Safari/i.test(e)?d=tt.DESKTOP_SAFARI:/Firefox/i.test(e)?d=tt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(d=tt.IE),Ft.cachedResult=d,Ft.cachedResult}function cn(d,e){const i=Ft(),r=us[i];let n=d,a=e,c=n*a;const u=n>a?a/n:n/a;for(;c>r*r;){const y=(r+n)/2,b=(r+a)/2;y<b?(a=b,n=b*u):(a=y*u,n=y),c=n*a}return{width:n,height:a}}function ar(d,e){let i,r;try{if(i=new OffscreenCanvas(d,e),r=i.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),r=i.getContext("2d")}return i.width=d,i.height=e,[i,r]}function dn(d,e){const{width:i,height:r}=cn(d.width,d.height),[n,a]=ar(i,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,n.width,n.height)),a.drawImage(d,0,0,n.width,n.height),n}function Kt(){return Kt.cachedResult!==void 0||(Kt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Kt.cachedResult}function rr(d,e={}){return new Promise(function(i,r){let n,a;var c=function(){try{return a=dn(n,e.fileType||d.type),i([n,a])}catch(y){return r(y)}},u=function(y){try{var b=function(o){try{throw o}catch(t){return r(t)}};try{let o;return on(d).then(function(t){try{return o=t,ln(o).then(function(s){try{return n=s,function(){try{return c()}catch(f){return r(f)}}()}catch(f){return b(f)}},b)}catch(s){return b(s)}},b)}catch(o){b(o)}}catch(o){return r(o)}};try{if(Kt()||[tt.DESKTOP_SAFARI,tt.MOBILE_SAFARI].includes(Ft()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(d).then(function(y){try{return n=y,c()}catch{return u()}},u)}catch{u()}})}function nr(d,e,i,r,n=1){return new Promise(function(a,c){let u;if(e==="image/png"){let b,o,t;return b=d.getContext("2d"),{data:o}=b.getImageData(0,0,d.width,d.height),t=lt.encode([o.buffer],d.width,d.height,4096*n),u=new Blob([t],{type:e}),u.name=i,u.lastModified=r,y.call(this)}{let b=function(){return y.call(this)};if(e==="image/bmp")return new Promise(o=>nn.toBlob(d,o)).then(function(o){try{return u=o,u.name=i,u.lastModified=r,b.call(this)}catch(t){return c(t)}}.bind(this),c);{let o=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&d instanceof OffscreenCanvas)return d.convertToBlob({type:e,quality:n}).then(function(t){try{return u=t,u.name=i,u.lastModified=r,o.call(this)}catch(s){return c(s)}}.bind(this),c);{let t;return t=d.toDataURL(e,n),kr(t,i,r).then(function(s){try{return u=s,o.call(this)}catch(f){return c(f)}}.bind(this),c)}}}function y(){return a(u)}})}function ht(d){d.width=0,d.height=0}function St(){return new Promise(function(d,e){let i,r,n,a;return St.cachedResult!==void 0?d(St.cachedResult):kr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return i=c,rr(i).then(function(u){try{return r=u[1],nr(r,i.type,i.name,i.lastModified).then(function(y){try{return n=y,ht(r),rr(n).then(function(b){try{return a=b[0],St.cachedResult=a.width===1&&a.height===2,d(St.cachedResult)}catch(o){return e(o)}},e)}catch(b){return e(b)}},e)}catch(y){return e(y)}},e)}catch(u){return e(u)}},e)})}function un(d){return new Promise((e,i)=>{const r=new sn;r.onload=n=>{const a=new DataView(n.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const c=a.byteLength;let u=2;for(;u<c;){if(a.getUint16(u+2,!1)<=8)return e(-1);const y=a.getUint16(u,!1);if(u+=2,y==65505){if(a.getUint32(u+=2,!1)!=1165519206)return e(-1);const b=a.getUint16(u+=6,!1)==18761;u+=a.getUint32(u+4,b);const o=a.getUint16(u,b);u+=2;for(let t=0;t<o;t++)if(a.getUint16(u+12*t,b)==274)return e(a.getUint16(u+12*t+8,b))}else{if((65280&y)!=65280)break;u+=a.getUint16(u,!1)}}return e(-1)},r.onerror=n=>i(n),r.readAsArrayBuffer(d)})}function fn(d,e){const{width:i}=d,{height:r}=d,{maxWidthOrHeight:n}=e;let a,c=d;return isFinite(n)&&(i>n||r>n)&&([c,a]=ar(i,r),i>r?(c.width=n,c.height=r/i*n):(c.width=i/r*n,c.height=n),a.drawImage(d,0,0,c.width,c.height),ht(d)),c}function vn(d,e){const{width:i}=d,{height:r}=d,[n,a]=ar(i,r);switch(e>4&&e<9?(n.width=r,n.height=i):(n.width=i,n.height=r),e){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(d,0,0,i,r),ht(d),n}function Or(d,e,i=0){return new Promise(function(r,n){let a,c,u,y,b,o,t,s,f,g,x,I,E,B,U,P,L,_,M,m;function h(k=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=k,e.onProgress(Math.min(a,100))}function w(k){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(k,a),100),e.onProgress(a)}return a=i,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,h(),rr(d,e).then(function(k){try{return[,y]=k,h(),b=fn(y,e),h(),new Promise(function(T,C){var D;if(!(D=e.exifOrientation))return un(d).then(function(p){try{return D=p,F.call(this)}catch(v){return C(v)}}.bind(this),C);function F(){return T(D)}return F.call(this)}).then(function(T){try{return o=T,h(),St().then(function(C){try{return t=C?b:vn(b,o),h(),s=e.initialQuality||1,f=e.fileType||d.type,nr(t,f,d.name,d.lastModified,s).then(function(D){try{{let p=function(){if(c--&&(U>u||U>E)){let Y,A;return Y=m?.95*M.width:M.width,A=m?.95*M.height:M.height,[L,_]=ar(Y,A),_.drawImage(M,0,0,Y,A),s*=f==="image/png"?.85:.95,nr(L,f,d.name,d.lastModified,s).then(function(R){try{return P=R,ht(M),M=L,U=P.size,w(Math.min(99,Math.floor((B-U)/(B-u)*100))),p}catch(Q){return n(Q)}},n)}return[1]},v=function(){return ht(M),ht(L),ht(b),ht(t),ht(y),w(100),r(P)};if(g=D,h(),x=g.size>u,I=g.size>d.size,!x&&!I)return w(100),r(g);var F;return E=d.size,B=g.size,U=B,M=t,m=!e.alwaysKeepResolution&&x,(F=function(Y){for(;Y;){if(Y.then)return void Y.then(F,n);try{if(Y.pop){if(Y.length)return Y.pop()?v.call(this):Y;Y=p}else Y=Y.call(this)}catch(A){return n(A)}}}.bind(this))(p)}}catch(p){return n(p)}}.bind(this),n)}catch(D){return n(D)}}.bind(this),n)}catch(C){return n(C)}}.bind(this),n)}catch(T){return n(T)}}.bind(this),n)})}const vs=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let fr;function ms(d,e){return new Promise((i,r)=>{fr||(fr=function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))}(vs));const n=new Worker(fr);n.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)n.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void n.terminate();i(c.data.file),n.terminate()}else e.onProgress(c.data.progress)}),n.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),n.terminate()}),n.postMessage({file:d,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Ve(d,e){return new Promise(function(i,r){let n,a,c,u,y,b;if(n={...e},c=0,{onProgress:u}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=f=>{c=f,typeof u=="function"&&u(c)},!(d instanceof Blob||d instanceof fs))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(d.type))return r(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||b)return Or(d,n).then(function(f){try{return a=f,s.call(this)}catch(g){return r(g)}}.bind(this),r);var o=function(){try{return s.call(this)}catch(f){return r(f)}}.bind(this),t=function(f){try{return Or(d,n).then(function(g){try{return a=g,o()}catch(x){return r(x)}},r)}catch(g){return r(g)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ms(d,n).then(function(f){try{return a=f,o()}catch{return t()}},t)}catch{t()}function s(){try{a.name=d.name,a.lastModified=d.lastModified}catch{}try{n.preserveExif&&d.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===d.type)&&(a=rn(d,a))}catch{}return i(a)}})}Ve.getDataUrlFromFile=on,Ve.getFilefromDataUrl=kr,Ve.loadImage=ln,Ve.drawImageInCanvas=dn,Ve.drawFileInCanvas=rr,Ve.canvasToFile=nr,Ve.getExifOrientation=un,Ve.handleMaxWidthOrHeight=fn,Ve.followExifOrientation=vn,Ve.cleanupCanvasMemory=ht,Ve.isAutoOrientationInBrowser=St,Ve.approximateBelowMaximumCanvasSizeOfBrowser=cn,Ve.copyExifWithoutOrientation=rn,Ve.getBrowserName=Ft,Ve.version="2.0.2";const hs={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function ps(d,e,i={},r){const n={...hs,...i};try{let a=d;if(d.type.startsWith("image/")&&d.size>n.compressionThresholdMB*1024*1024){r?.("Compressing image...");try{const y=await Ve(d,{maxSizeMB:n.maxSizeMB,maxWidthOrHeight:n.maxWidthOrHeight,initialQuality:n.initialQuality,useWebWorker:n.useWebWorker});a=y;const b=(d.size/(1024*1024)).toFixed(2),o=(y.size/(1024*1024)).toFixed(2),t=((1-y.size/d.size)*100).toFixed(0);console.log(`Image compressed: ${b}MB → ${o}MB (${t}% smaller)`)}catch(y){console.warn("Image compression failed, uploading original:",y)}}return r?.("Uploading file..."),{success:!0,attachment:await Sn(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function ys(d){try{const e=On(d.url);return await Un(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function gs(d,e,i){return d.map(r=>r.id===e?{...r,name:i}:r)}function bs(d,e=5){const i=d.type.startsWith("image/"),r=e*1024*1024;if(!i&&d.size>r){const n=(d.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${n}MB)`}}return{valid:!0}}function _s(d){return{uploadAttachment:(e,i,r)=>ps(e,i,d,r),removeAttachment:ys,updateAttachmentName:gs,validateFile:bs}}function Ur(d,e){const[i,r]=e.split(":").map(Number);let n=Ja(d,i);return n=ei(n,r),n}function Sr(d){return Array.from(new Set(d)).sort((e,i)=>e-i)}function ws(d,e){if(e.includes(d))return 0;const i=e.find(r=>r>d);return i!==void 0?i-d:7-d+e[0]}function xs(d,e,i){const r=new Date(d),n=Tt(r,Ze),a=n.getDay(),c=ws(a,i);if(c===0)return{start_time:d,end_time:e};const u=Ht(n,c),y=Pt(u,Ze);let b=e;if(e){const o=Tt(new Date(e),Ze),t=Ht(o,c);b=Pt(t,Ze).toISOString()}return{start_time:y.toISOString(),end_time:b}}function mn({eventItem:d,dateInput:e,startTimeInput:i,endTimeInput:r,attachments:n,isRecurring:a,recurrenceFrequency:c,recurrenceInterval:u,recurringDays:y,recurrenceEndDate:b,hasEndDate:o,monthlyType:t}){const s=!d.id,f={...d.meta_data??{}};d.category&&(f.category=d.category);const g=jr(),x=g?yr(g.stores.currentUser):void 0;if(s){const _=g?yr(g.stores.userOrganizations):void 0,M=x?.displayName||x?.username,m=x?.id;M&&!f.submitted_by_name&&(f.submitted_by_name=M),m&&!f.submitted_by_user_id&&(f.submitted_by_user_id=m);const h=_?Array.from(_):[];h.length&&!f.submitted_by_organizations&&(f.submitted_by_organizations=h),f.submitted_at||(f.submitted_at=new Date().toISOString())}else{const _=x?.displayName||x?.username;_&&(f.edited_by_name=_),x?.id&&(f.edited_by_user_id=x.id),f.edited_at=new Date().toISOString()}const I=Object.keys(f).length?f:void 0,E={title:d.title,description:d.description,location:d.location,is_public:d.is_public??!0,event_type:d.event_type,meta_data:I,attachments:n.length>0?n:null};if(d.event_type!=="calendar_event")return{...E,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const B=e?Jt(e,"yyyy-MM-dd",new Date):new Date;let U,P;if(d.is_all_day){const _=Pt(B,Ze);U=_.toISOString(),P=_.toISOString()}else{const _=new Date(B.getTime()),M=new Date(B.getTime()),m=i?Ur(_,i):B,h=r?Ur(M,r):B;U=Pt(m,Ze).toISOString(),P=Pt(h,Ze).toISOString()}const L={...E,start_time:U,end_time:P,is_all_day:d.is_all_day};if(a&&L.start_time){if(c==="weekly"&&y.length>0){const M=Sr(y),m=xs(L.start_time,L.end_time,M);L.start_time=m.start_time,L.end_time=m.end_time}if(c==="daily"||c==="yearly"||c==="weekly"&&y.length>0||c==="monthly"){const{recurrence_rule:M,recurrence_end_date:m}=Er({frequency:c,interval:u,recurringDays:c==="weekly"?Sr(y):[],recurrenceEndDate:b,hasEndDate:o,monthlyType:t,startTime:L.start_time});L.recurrence_rule=M,L.recurrence_end_date=m}else L.recurrence_rule=void 0,L.recurrence_end_date=void 0}else L.recurrence_rule=void 0,L.recurrence_end_date=void 0;return L}async function Es({id:d,...e}){const i=mn(e);return d?(e.eventItem.bishop_approval==="NO"&&Object.assign(i,{bishop_approval:null,bishop_approval_at:null,bishop_approval_by_user_id:null,first_counselor_approval:null,first_counselor_approval_at:null,first_counselor_approval_by_user_id:null,second_counselor_approval:null,second_counselor_approval_at:null,second_counselor_approval_by_user_id:null}),{action:"update",event:await Ot(d,i)}):{action:"create",event:await Nr(i)}}async function Ds(d){await qr(d)}function ks({event:d,newDate:e}){const i=d.start_time?new Date(d.start_time):new Date,r=d.end_time?new Date(d.end_time):new Date,[n,a,c]=e.split("-").map(Number),u=new Date(i);u.setFullYear(n,a-1,c);const y=new Date(r);return y.setFullYear(n,a-1,c),{...d,id:void 0,title:`CLONED - ${d.title}`,start_time:u.toISOString(),end_time:y.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function As(d,e,i){const r=await $t(d);if(!r)throw new Error("Event not found");const n=r.recurrence_exceptions||[];n.includes(e)||n.push(e);const a=r.recurrence_overrides||{};a[e]={title:i.title,description:i.description,location:i.location,start_time:i.start_time,end_time:i.end_time,is_all_day:i.is_all_day,meta_data:i.meta_data},await Ot(d,{recurrence_exceptions:n,recurrence_overrides:a})}async function Ts(d,e,i){const r=await $t(d);if(!r||!r.recurrence_rule||!r.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:n,generateRecurrenceRule:a}=await gr(async()=>{const{parseRecurrenceRule:U,generateRecurrenceRule:P}=await Promise.resolve().then(()=>br);return{parseRecurrenceRule:U,generateRecurrenceRule:P}},void 0,import.meta.url),c=n(r.recurrence_rule,r.recurrence_end_date);if(!c)throw new Error("Failed to parse recurrence rule");const u=He(new Date(r.start_time),"yyyy-MM-dd"),y=Jt(e,"yyyy-MM-dd",new Date),b=Jt(u,"yyyy-MM-dd",new Date);if(y<=b)return await Ot(d,i),d;const o=Ht(y,-1),t=He(o,"yyyy-MM-dd"),{recurrence_rule:s,recurrence_end_date:f}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:t,hasEndDate:!0,monthlyType:c.monthlyType,startTime:r.start_time});await Ot(d,{recurrence_rule:s,recurrence_end_date:f});const g=c.hasEndDate?c.recurrenceEndDate:"",{recurrence_rule:x,recurrence_end_date:I}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:g,hasEndDate:c.hasEndDate,monthlyType:c.monthlyType,startTime:i.start_time||r.start_time}),E={...i,recurrence_rule:x,recurrence_end_date:I};return(await Nr(E))?.id||0}async function Is(d,e){const i=await $t(d);if(!i)throw new Error("Event not found");const r={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:i.start_time,end_time:i.end_time,recurrence_rule:i.recurrence_rule,recurrence_end_date:i.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await Ot(d,r)}async function Ms(d,e){const i=await $t(d);if(!i)throw new Error("Event not found");const r=i.recurrence_exceptions||[];r.includes(e)||r.push(e);const n=i.recurrence_overrides||{};n[e]&&delete n[e],await Ot(d,{recurrence_exceptions:r,recurrence_overrides:n})}async function Rs(d,e){const i=await $t(d);if(!i||!i.recurrence_rule||!i.start_time)throw new Error("Event not found or is not recurring");const r=Jt(e,"yyyy-MM-dd",new Date),n=Ht(r,-1),a=He(n,"yyyy-MM-dd"),{parseRecurrenceRule:c}=await gr(async()=>{const{parseRecurrenceRule:t}=await Promise.resolve().then(()=>br);return{parseRecurrenceRule:t}},void 0,import.meta.url),u=c(i.recurrence_rule,i.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:y}=await gr(async()=>{const{generateRecurrenceRule:t}=await Promise.resolve().then(()=>br);return{generateRecurrenceRule:t}},void 0,import.meta.url),{recurrence_rule:b,recurrence_end_date:o}=y({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:i.start_time});await Ot(d,{recurrence_rule:b,recurrence_end_date:o})}async function Cs(d){await qr(d)}function Fs(){return{saveEvent:Es,deleteEventById:Ds,cloneEventForDate:ks,buildEventPayload:mn,saveSingleInstance:As,saveFutureInstances:Ts,saveAllInstances:Is,deleteSingleInstance:Ms,deleteFutureInstances:Rs,deleteAllInstances:Cs}}var Ps=se('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Os=se('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Us=se("<!> <!>",1),Ss=se('<div class="alert alert-info small mb-0 d-flex align-items-start gap-2"><i class="bi bi-info-circle mt-1"></i> <span>All submissions require bishopric approval before they appear on the public calendar.</span></div>'),Ls=se('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),zs=se("<span>Save</span>"),Hs=se("<span>Create</span>"),Bs=se('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),qs=se('<button class="btn btn-primary position-relative"><!> <!></button>'),Ns=se('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <!></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div> <!></div> <!> <!>',1);function Io(d,e){st(e,!1);const i=()=>mr(x,"$userOrganizations",n),r=()=>mr(I,"$validationErrors",n),[n,a]=zr(),c=de(),u=de(),y=de();let b=he(e,"name",8,""),o=he(e,"drawerId",8,""),t=he(e,"eventItem",12,Gn),s=he(e,"canDelete",8,!0),f=he(e,"canCreate",8,!0);const{actions:{reload:g}}=Br(),{stores:{userOrganizations:x}}=jr(),{validationErrors:I,validate:E,getErrorMessages:B,clearErrors:U}=ss(),{parseRecurrenceRule:P}=tn(),{uploadAttachment:L,removeAttachment:_,updateAttachmentName:M,validateFile:m}=_s(),{saveEvent:h,deleteEventById:w,cloneEventForDate:k,buildEventPayload:T,saveSingleInstance:C,saveFutureInstances:D,saveAllInstances:F,deleteSingleInstance:p,deleteFutureInstances:v,deleteAllInstances:Y}=Fs();let A=de(!1),R=de(!1),Q=de(!1),q=de("weekly"),$=de(1),N=de([]),O=de(""),re=de(!0),oe=de("date"),ue=de([]),ve=de(!1),me=de(!1),_e=de(void 0),Me=de(void 0),ke=de(!1),j=de(null),te=de(!1),G=de(null),ie=de(0),ne=de({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),Z=de({message:"",type:"info"}),X=de(""),ae=de(""),pe=de(""),ye=de({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"}),fe=de(!1);const we=(le,K)=>le.length===K.length&&le.every((Ee,Ce)=>Ee===K[Ce]),Se=()=>{const le=`[data-bs-target="#${o()}"]`,K=document.querySelector(le);K&&K.click()},Ae=(le,K=0,Ee="info")=>{dr(Z,l(Z).message=le),dr(Z,l(Z).type=Ee),K&&setTimeout(()=>{dr(Z,l(Z).message="")},K)},xe=async le=>{const K=le.detail;if(!K)return;const Ee=m(K);if(!Ee.valid){Ae(Ee.error??"Invalid file selected",7e3,"danger");return}H(R,!0);try{const Ce=await L(K,l(c)??"temp",wt=>Ae(wt));if(!Ce.success||!Ce.attachment)throw new Error(Ce.error??"Upload failed");H(ue,[...l(ue),Ce.attachment]),H(ve,!0),Ae("File uploaded!",3e3,"success")}catch(Ce){console.error("File upload failed:",Ce),Ae("Failed to upload file. Please try again.",7e3,"danger")}finally{H(R,!1)}},Ge=le=>{const{attachment:K,newName:Ee}=le.detail;H(ue,M(l(ue),K.id,Ee)),H(ve,!0),Ae("Attachment name updated!",3e3,"success")},Te=async le=>{const K=le.detail;if(K){H(R,!0);try{if(!await _(K))throw new Error("Failed to remove attachment");H(ue,l(ue).filter(Ce=>Ce.id!==K.id)),H(ve,!0),Ae("Attachment removed!",3e3,"success")}catch(Ee){console.error("Failed to remove attachment:",Ee),Ae("Failed to remove attachment. Please try again.",7e3,"danger")}finally{H(R,!1)}}},Oe=async()=>{if(!l(c)){Ae("ID is not defined",0,"danger");return}try{await w(l(c)),await g(),xt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{H(A,!1),H(ne,{...t(),id:l(c)}),Ae("Event Deleted",3e3,"success"),Se()},800)}catch(le){xt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{H(A,!1),console.error("Delete failed:",le),Ae("Failed to delete event. Please try again.",7e3,"danger")},800)}},$e=()=>!!t().recurrence_rule,We=async()=>{const le=l(c)||t().meta_data?.recurring_parent_id;if(le&&l(me)&&l(Me)&&l(_e)){if(H(G,null),H(te,!0),await new Promise(K=>{const Ee=setInterval(()=>{l(te)||(clearInterval(Ee),K())},50)}),!l(G))return;H(A,!0);try{l(G)==="single"?await p(le,l(_e)):l(G)==="future"?await v(le,l(_e)):l(G)==="all"&&await Y(le),await g(),xt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{H(A,!1),H(ne,{...t(),id:l(c)}),Ae("Event Deleted",3e3,"success"),Se()},800)}catch(K){xt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{H(A,!1),console.error("Delete failed:",K),Ae("Failed to delete event. Please try again.",7e3,"danger")},800)}}else H(A,!0),Zn({title:"Delete Confirmation",message:$e()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:K=>{K?Oe():H(A,!1)}})},Le=le=>{if(l(c))try{const K=k({event:t(),newDate:le});xt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),Ae("Event cloned. Review and click Create to save.",5e3,"success"),t(K),H(X,K.start_time?He(new Date(K.start_time),"yyyy-MM-dd"):""),H(ae,K.start_time?He(new Date(K.start_time),"HH:mm"):""),H(pe,K.end_time?He(new Date(K.end_time),"HH:mm"):""),H(ue,[]),H(Q,!1),H(N,[]),H(O,""),H(re,!0),H(ve,!0),H(ie,void 0),H(ne,{...K}),H(ye,{dateInput:l(X),startTimeInput:l(ae),endTimeInput:l(pe),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(K){console.error("Clone failed:",K),Ae("Failed to clone event. Please try again.",7e3,"danger")}},Ue=()=>{as({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:l(X),callback:(le,K)=>{le&&K&&Le(K)}})},Ke=async()=>{if(l(c)&&!l(y)){Ae("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await E({title:t().title,event_type:t().event_type,category:t().category??"",description:t().description,location:t().location,is_all_day:t().is_all_day,dateInput:l(X),startTimeInput:l(ae),endTimeInput:l(pe),isRecurring:l(Q),recurrenceFrequency:l(q),recurringDays:l(Q)?l(N):[],recurrenceEndDate:l(Q)?l(O):void 0,hasEndDate:l(re)})){const Ee=B();Ee.length&&Ae(Ee.join(". ")+".  Please address accordingly.",0,"danger");return}const K=l(c)||t().meta_data?.recurring_parent_id;if(K&&l(me)&&l(Me)&&l(_e)){if(H(j,null),H(ke,!0),await new Promise(Ce=>{const wt=setInterval(()=>{l(ke)||(clearInterval(wt),Ce())},100)}),!l(j)||l(A))return;Ae("Saving ..."),H(A,!0);const Ee=T({eventItem:t(),dateInput:l(X),startTimeInput:l(ae),endTimeInput:l(pe),attachments:l(ue),isRecurring:l(u)&&l(Q),recurrenceFrequency:l(q),recurrenceInterval:l($),recurringDays:l(Q)?l(N):[],recurrenceEndDate:l(Q)?l(O):"",hasEndDate:l(re),monthlyType:l(oe)});try{let Ce;l(j)==="single"?await C(K,l(_e),Ee):l(j)==="future"?Ce=await D(K,l(_e),Ee):l(j)==="all"&&await F(K,Ee),await g(),await Mn(),xt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${t().title}`,1),H(A,!1),Ce&&t({...t(),id:Ce}),t(t().attachments=l(ue),!0),H(ne,{...t(),id:Ce||K}),H(ve,!1),Ae("Saved",3e3,"success"),Se()}catch(Ce){xt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${t().title}`,1),setTimeout(()=>{H(A,!1),console.error("Save failed:",Ce),Ae("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(l(A))return;Ae("Saving ..."),H(A,!0);try{const Ee=await h({id:l(c),eventItem:t(),dateInput:l(X),startTimeInput:l(ae),endTimeInput:l(pe),attachments:l(ue),isRecurring:l(u)&&l(Q),recurrenceFrequency:l(q),recurrenceInterval:l($),recurringDays:l(Q)?l(N):[],recurrenceEndDate:l(Q)?l(O):"",hasEndDate:l(re),monthlyType:l(oe)});Ee.event&&t({...t(),...Ee.event}),t(t().attachments=l(ue),!0),await g(),xt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${t().title}`,1),setTimeout(()=>{H(A,!1),H(ne,{...t(),id:l(c)}),H(ve,!1),Ae("Saved",3e3,"success"),Se()},800)}catch(Ee){xt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${t().title}`,1),setTimeout(()=>{H(A,!1),console.error("Save failed:",Ee),Ae("Failed to save event. Please try again.",7e3,"danger")},800)}}};Re(()=>V(t()),()=>{H(c,t().id)}),Re(()=>V(t()),()=>{H(u,t().event_type==="calendar_event")}),Re(()=>(l(u),l(Q),l(N),l(O)),()=>{!l(u)&&(l(Q)||l(N).length>0||l(O))&&(H(Q,!1),H(q,"weekly"),H($,1),H(N,[]),H(O,""),H(re,!0),H(oe,"date"))}),Re(()=>(V(t()),l(ie),l(ne),l(ve),l(X),l(ae),l(pe),l(Q),l(q),l($),l(N),l(O),l(re),l(oe)),()=>{if(t()?.id!==l(ie)||t()?.start_time!==l(ne).start_time||t()?.meta_data?.recurring_instance_index!==l(ne).meta_data?.recurring_instance_index){H(A,!0);const le=l(ve),K=t();setTimeout(()=>{const Ee=K.event_type==="calendar_event";if(H(X,Ee&&K.start_time?He(new Date(K.start_time),"yyyy-MM-dd"):""),H(ae,Ee&&K.start_time?He(new Date(K.start_time),"HH:mm"):""),H(pe,Ee&&K.end_time?He(new Date(K.end_time),"HH:mm"):""),le||H(ue,K.attachments?[...K.attachments]:[]),K.meta_data?.recurring_instance&&K.start_time?(H(Me,K.recurrence_rule),H(me,!0),H(_e,He(new Date(K.start_time),"yyyy-MM-dd"))):(H(Me,void 0),H(me,!1),H(_e,void 0)),K.recurrence_rule){const Ce=P(K.recurrence_rule,K.recurrence_end_date);Ce?(H(Q,!0),H(q,Ce.frequency),H($,Ce.interval),H(N,Ce.recurringDays),H(O,Ce.recurrenceEndDate),H(re,Ce.hasEndDate),H(oe,Ce.monthlyType)):(H(Q,!1),H(q,"weekly"),H($,1),H(N,[]),H(O,""),H(re,!0),H(oe,"date"))}else H(Q,!1),H(q,"weekly"),H($,1),H(N,[]),H(O,""),H(re,!0),H(oe,"date");H(ie,K.id),H(ne,{...K}),H(A,!1),H(ve,!1),U(),H(ye,{dateInput:l(X),startTimeInput:l(ae),endTimeInput:l(pe),isRecurring:l(Q),recurrenceFrequency:l(q),recurrenceInterval:l($),recurringDays:[...l(N)],recurrenceEndDate:l(O),hasEndDate:l(re),monthlyType:l(oe)})},200)}}),Re(()=>(l(ne),V(t()),l(ue),l(X),l(ye),l(ae),l(pe),l(Q),l(q),l($),l(N),l(O),l(re),l(oe)),()=>{H(y,l(ne).title!==t().title||l(ne).start_time!==t().start_time||l(ne).end_time!==t().end_time||l(ne).description!==t().description||l(ne).location!==t().location||l(ne).is_public!==t().is_public||l(ne).category!==t().category||l(ne).is_all_day!==t().is_all_day||JSON.stringify(l(ue))!==JSON.stringify(t().attachments||[])||l(ne).recurrence_rule!==t().recurrence_rule||l(ne).recurrence_end_date!==t().recurrence_end_date||l(X)!==l(ye).dateInput||l(ae)!==l(ye).startTimeInput||l(pe)!==l(ye).endTimeInput||l(Q)!==l(ye).isRecurring||l(q)!==l(ye).recurrenceFrequency||l($)!==l(ye).recurrenceInterval||!we(l(N),l(ye).recurringDays)||l(O)!==l(ye).recurrenceEndDate||l(re)!==l(ye).hasEndDate||l(oe)!==l(ye).monthlyType)}),Re(()=>(i(),Qe),()=>{H(fe,i().has(Qe.Bishopric))}),Ut(),ct();var dt=Ns(),at=je(dt),bt=z(at);{var Mt=le=>{var K=Ps();ee(le,K)};ce(bt,le=>{V(t()),l(c),J(()=>t().recurrence_rule&&l(c))&&le(Mt)})}var Bt=W(bt,2),it=z(Bt),ut=W(z(it),2);{var Dt=le=>{var K=Os();ge(()=>K.disabled=l(A)||l(R)),De("click",K,Ue),ee(le,K)};ce(ut,le=>{l(c)&&le(Dt)})}S(it);var Rt=W(it,2);{let le=Ct(()=>l(A)||l(R));Ti(Rt,{get disabled(){return l(le)},get name(){return b()},get validationErrors(){return r()},get title(){return t().title},set title(K){t(t().title=K,!0)},get eventType(){return t().event_type},set eventType(K){t(t().event_type=K,!0)},get category(){return t().category},set category(K){t(t().category=K,!0)},get isPublic(){return t().is_public},set isPublic(K){t(t().is_public=K,!0)},get description(){return t().description},set description(K){t(t().description=K,!0)},$$legacy:!0})}S(Bt);var qt=W(Bt,2);{var _t=le=>{var K=Us(),Ee=je(K);{let wt=Ct(()=>l(A)||l(R));Pi(Ee,{get disabled(){return l(wt)},get name(){return b()},get validationErrors(){return r()},get dateInput(){return l(X)},set dateInput(ze){H(X,ze)},get startTimeInput(){return l(ae)},set startTimeInput(ze){H(ae,ze)},get endTimeInput(){return l(pe)},set endTimeInput(ze){H(pe,ze)},get isAllDay(){return t().is_all_day},set isAllDay(ze){t(t().is_all_day=ze,!0)},$$legacy:!0})}var Ce=W(Ee,2);{let wt=Ct(()=>l(A)||l(R));qi(Ce,{get disabled(){return l(wt)},get name(){return b()},get validationErrors(){return r()},get isRecurring(){return l(Q)},set isRecurring(ze){H(Q,ze)},get recurrenceFrequency(){return l(q)},set recurrenceFrequency(ze){H(q,ze)},get recurrenceInterval(){return l($)},set recurrenceInterval(ze){H($,ze)},get recurringDays(){return l(N)},set recurringDays(ze){H(N,ze)},get recurrenceEndDate(){return l(O)},set recurrenceEndDate(ze){H(O,ze)},get monthlyType(){return l(oe)},set monthlyType(ze){H(oe,ze)},get dateInput(){return l(X)},set dateInput(ze){H(X,ze)},$$legacy:!0})}ee(le,K)};ce(qt,le=>{l(u)&&le(_t)})}var ft=W(qt,2);{let le=Ct(()=>l(A)||l(R));Xi(ft,{get attachments(){return l(ue)},get uploadingFile(){return l(R)},get disabled(){return l(le)},$$events:{upload:xe,edit:Ge,remove:Te}})}var Ar=W(ft,2);{let le=Ct(()=>l(A)||l(R)),K=Ct(()=>`${b()}-location`);Yi(Ar,{get disabled(){return l(le)},get name(){return l(K)},get value(){return t().location},set value(Ee){t(t().location=Ee,!0)},$$legacy:!0})}var Tr=W(Ar,2);{var hn=le=>{var K=Ss();ee(le,K)};ce(Tr,le=>{l(fe)||le(hn)})}var ir=W(Tr,2),sr=z(ir),pn=z(sr);{var yn=le=>{var K=Ls();ge(()=>K.disabled=l(A)||l(R)),De("click",K,We),ee(le,K)};ce(pn,le=>{(l(c)||l(me))&&s()&&le(yn)})}S(sr);var Ir=W(sr,2),or=z(Ir),gn=W(or,2);{var bn=le=>{var K=qs(),Ee=z(K);{var Ce=vt=>{var Nt=zs();ee(vt,Nt)},wt=vt=>{var Nt=Hs();ee(vt,Nt)};ce(Ee,vt=>{l(c)||l(me)?vt(Ce):vt(wt,!1)})}var ze=W(Ee,2);{var Tn=vt=>{var Nt=Bs();ee(vt,Nt)};ce(ze,vt=>{l(y)&&vt(Tn)})}S(K),ge(()=>K.disabled=l(A)||l(R)),De("click",K,Ke),ee(le,K)};ce(gn,le=>{(l(c)||l(me)||f())&&le(bn)})}S(Ir),S(ir);var lr=W(ir,2),jt=z(lr),_n=z(jt,!0);S(jt);var cr=W(jt,2);let Mr;var wn=z(cr);Gr(wn,{size:"xs"}),S(cr),S(lr);var xn=W(lr,2);{var En=le=>{{let K=Ct(()=>l(A)||l(R));Ln(le,{get disabled(){return l(K)},get reloadEvents(){return g},get eventItem(){return t()},set eventItem(Ee){t(Ee)},$$legacy:!0})}};ce(xn,le=>{l(fe)&&le(En)})}S(at);var Rr=W(at,2);{var Dn=le=>{Ji(le,{get eventTitle(){return V(t()),J(()=>t().title)},get occurrenceDate(){return l(_e)},callback:K=>{H(j,K),H(ke,!1)}})};ce(Rr,le=>{l(ke)&&l(_e)&&le(Dn)})}var kn=W(Rr,2);{var An=le=>{ts(le,{get eventTitle(){return V(t()),J(()=>t().title)},get occurrenceDate(){return l(_e)},callback:K=>{H(G,K),H(te,!1)}})};ce(kn,le=>{l(te)&&l(_e)&&le(An)})}ge(()=>{or.disabled=l(A)||l(R),rt(jt,1,`fw-lighter fst-italic text-${l(Z),J(()=>l(Z).type)??""}`),be(_n,(l(Z),J(()=>l(Z).message))),Mr=rt(cr,1,"",null,Mr,{"d-none":!l(A)})}),De("click",or,Se),ee(d,dt),ot(),a()}const Lr={RES:[Qe.ReliefSociety],ELQ:[Qe.EldersQuorum],YOU:[Qe.YoungWomen,Qe.YoungMen],YOW:[Qe.YoungWomen],YWP:[Qe.YoungWomen],YWR:[Qe.YoungWomen],YWD:[Qe.YoungWomen],YOM:[Qe.YoungMen],YMD:[Qe.YoungMen],YMT:[Qe.YoungMen],YMP:[Qe.YoungMen],PRI:[Qe.Primary],PRN:[Qe.Primary],PRS:[Qe.Primary],PRC:[Qe.Primary],PRV:[Qe.Primary],SUS:[Qe.SundaySchool]},Ys=d=>{const e=new Set,i=d.meta_data?.submitted_by_organizations;if(i?.length)return i.forEach(n=>e.add(n)),e;const r=d.meta_data?.category;return r&&Lr[r]&&Lr[r].forEach(n=>e.add(n)),e},Mo=(d,e)=>{if(!d)return!1;const{currentUserId:i,isPrivileged:r,canEditOwnOrgEvents:n,userOrganizations:a}=e;if(r)return!0;const c=d.meta_data?.submitted_by_user_id;if(i&&typeof c=="number"&&c===i)return!0;if(!n)return!1;const u=Ys(d);if(!u.size)return!1;for(const y of u)if(a.has(y))return!0;return!1};var Ws=se('<span class="text-muted">•</span>'),Qs=se("<span> </span> <!>",1),$s=se('<span class="text-muted">•</span>'),js=se('<em class="small fw-lighter svelte-1bpzga2"><!></em> <!>',1),Gs=se('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),Ks=se('<div class="small text-muted posted-meta svelte-1bpzga2">Posted <!> <!></div>'),Vs=se('<div class="small text-muted posted-meta svelte-1bpzga2">Last edited <!> <!></div>'),Xs=se('<div class="small svelte-1bpzga2"><!> <!> <!></div>'),Zs=se('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),Js=se('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),eo=se('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),to=se('<div class="details-container svelte-1bpzga2"><!> <!></div>'),ro=se('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),no=se('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"><!></div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function Ro(d,e){st(e,!1);const i=de(),r=de(),n=de(),a=de(),c=de(),u=de(),y=de(),b=de(),o=de();let t=he(e,"item",8),s=he(e,"showDetails",12,!1),f=he(e,"searchQuery",8,"");const g=R=>R<1024?R+" B":R<1024*1024?(R/1024).toFixed(1)+" KB":(R/(1024*1024)).toFixed(1)+" MB",x=R=>R.startsWith("image/"),I=R=>{window.open(R,"_blank")},E=R=>{if(!R)return"";try{return He(Yt(R),"MMM d, yyyy 'at' h:mm a")}catch{return""}},B=()=>{l(r)&&s(!s())},U=R=>{l(r)&&(R.key==="Enter"||R.key===" ")&&B()};Re(()=>V(t()),()=>{H(i,t().attachments&&t().attachments.length>0?t().attachments.find(R=>x(R.type)):void 0)}),Re(()=>V(t()),()=>{H(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Re(()=>V(t()),()=>{H(n,t().meta_data?.submitted_at??t().created_at)}),Re(()=>l(n),()=>{H(a,E(l(n)))}),Re(()=>V(t()),()=>{H(c,t().meta_data?.submitted_by_name)}),Re(()=>(l(a),l(c)),()=>{H(u,!!(l(a)||l(c)))}),Re(()=>V(t()),()=>{H(y,E(t().meta_data?.edited_at))}),Re(()=>V(t()),()=>{H(b,t().meta_data?.edited_by_name)}),Re(()=>(l(y),l(b)),()=>{H(o,!!(l(y)||l(b)))}),Ut(),ct();var P=no(),L=z(P),_=z(L),M=z(_),m=z(M);Lt(m,()=>(V(kt),V(t()),V(f()),J(()=>kt(t().title||"",f())))),S(M);var h=W(M,2),w=z(h);{var k=R=>{var Q=Qs(),q=je(Q),$=z(q,!0);S(q);var N=W(q,2);{var O=re=>{var oe=Ws();ee(re,oe)};ce(N,re=>{V(t()),J(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&re(O)})}ge((re,oe)=>{rt(q,1,`badge rounded-pill bg-color-${re??""}`,"svelte-1bpzga2"),be($,oe)},[()=>(V(At),V(t()),J(()=>At(t()?.meta_data?.category)?.color_number)),()=>(V(At),V(t()),J(()=>At(t()?.meta_data?.category)?.label))]),ee(R,Q)};ce(w,R=>{V(t()),J(()=>t()?.meta_data?.category)&&R(k)})}var T=W(w,2);{var C=R=>{var Q=js(),q=je(Q),$=z(q);Lt($,()=>(V(kt),V(t()),V(f()),J(()=>kt(t().location,f())))),S(q);var N=W(q,2);{var O=re=>{var oe=$s();ee(re,oe)};ce(N,re=>{V(t()),J(()=>t().description||t().attachments&&t().attachments.length>0)&&re(O)})}ee(R,Q)};ce(T,R=>{V(t()),J(()=>t().location)&&R(C)})}var D=W(T,2);{var F=R=>{var Q=Gs(),q=z(Q);{var $=O=>{var re=Je("Hide");ee(O,re)},N=O=>{var re=Je("Show");ee(O,re)};ce(q,O=>{s()?O($):O(N,!1)})}nt(),S(Q),ee(R,Q)};ce(D,R=>{V(t()),J(()=>t().description||t().attachments&&t().attachments.length>0)&&R(F)})}S(h);var p=W(h,2);{var v=R=>{var Q=to(),q=z(Q);{var $=re=>{var oe=Xs(),ue=z(oe);Lt(ue,()=>(V(Vt),V(t()),V(f()),J(()=>Vt(t().description,f()))));var ve=W(ue,2);{var me=ke=>{var j=Ks(),te=W(z(j));{var G=Z=>{var X=Je();ge(()=>be(X,l(a))),ee(Z,X)};ce(te,Z=>{l(a)&&Z(G)})}var ie=W(te,2);{var ne=Z=>{var X=Wt(),ae=je(X);{var pe=fe=>{var we=Je();ge(()=>be(we,`by ${l(c)??""}`)),ee(fe,we)},ye=fe=>{var we=Je();ge(()=>be(we,`by ${l(c)??""}`)),ee(fe,we)};ce(ae,fe=>{l(a)?fe(pe):fe(ye,!1)})}ee(Z,X)};ce(ie,Z=>{l(c)&&Z(ne)})}S(j),ee(ke,j)};ce(ve,ke=>{l(u)&&ke(me)})}var _e=W(ve,2);{var Me=ke=>{var j=Vs(),te=W(z(j));{var G=Z=>{var X=Je();ge(()=>be(X,l(y))),ee(Z,X)};ce(te,Z=>{l(y)&&Z(G)})}var ie=W(te,2);{var ne=Z=>{var X=Je();ge(()=>be(X,`by ${l(b)??""}`)),ee(Z,X)};ce(ie,Z=>{l(b)&&Z(ne)})}S(j),ee(ke,j)};ce(_e,ke=>{l(o)&&ke(Me)})}S(oe),ee(re,oe)};ce(q,re=>{V(t()),J(()=>t().description)&&re($)})}var N=W(q,2);{var O=re=>{var oe=eo(),ue=W(z(oe),2);Qt(ue,5,()=>(V(t()),J(()=>t().attachments)),ve=>ve.id,(ve,me)=>{var _e=Wt(),Me=je(_e);{var ke=te=>{var G=Zs(),ie=z(G),ne=z(ie);S(ie);var Z=W(ie,2),X=z(Z),ae=z(X,!0);S(X),S(Z),S(G),ge(()=>{Ie(ie,"title",`Open ${l(me),J(()=>l(me).name)??""}`),Ie(ne,"src",(l(me),J(()=>l(me).url))),Ie(ne,"alt",(l(me),J(()=>l(me).name))),be(ae,(l(me),J(()=>l(me).name)))}),De("click",ie,Xt(()=>I(l(me).url))),ee(te,G)},j=te=>{var G=Js(),ie=W(z(G),2),ne=z(ie,!0);S(ie);var Z=W(ie,2),X=z(Z);S(Z),S(G),ge(ae=>{Ie(G,"title",`Open ${l(me),J(()=>l(me).name)??""}`),be(ne,(l(me),J(()=>l(me).name))),be(X,`(${ae??""})`)},[()=>(l(me),J(()=>g(l(me).size)))]),De("click",G,Xt(()=>I(l(me).url))),ee(te,G)};ce(Me,te=>{l(me),J(()=>x(l(me).type))?te(ke):te(j,!1)})}ee(ve,_e)}),S(ue),S(oe),ee(re,oe)};ce(N,re=>{V(t()),J(()=>t().attachments&&t().attachments.length>0)&&re(O)})}S(Q),ee(R,Q)};ce(p,R=>{s()&&R(v)})}S(_);var Y=W(_,2);{var A=R=>{var Q=ro(),q=z(Q);S(Q),ge(()=>{Ie(q,"src",(l(i),J(()=>l(i).url))),Ie(q,"alt",(l(i),J(()=>l(i).name)))}),ee(R,Q)};ce(Y,R=>{l(i)&&R(A)})}S(L),S(P),ge(()=>Yr(P,l(r)?"cursor: pointer;":"")),De("keydown",P,U),De("click",P,B),ee(d,P),ot()}export{Io as A,Ao as E,To as a,Ro as b,Mo as c,Jt as p};
