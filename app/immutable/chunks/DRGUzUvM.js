import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{t as ge,j as Zr,k as Kr,K as na,bb as aa,L as Vr,Y as ia,ac as sa,b1 as oa,a_ as la,N as ca,G as Xt,p as et,aj as Le,D as W,E as he,w as ee,ak as Ut,c as Y,s as Q,r as N,u as V,g as d,a as tt,f as ze,F as Je,i as nr,am as ua,R as Ht,as as yr,z as da}from"./DVz9v3yu.js";import{p as ve,i as fe,s as _e,e as we,b as tr,a as gn,c as Xr,m as fa,u as va}from"./9VgG7Dnw.js";import{b as Jr,d as ma,f as re,a as J,c as kr,t as ar}from"./BMBpHE4F.js";import{e as qt,i as Cr}from"./BoUt-3Zs.js";import{d as _n,s as De,b as ir,r as $e}from"./BpnRQ7BG.js";import{t as Ze,x as Be,y as Rr,E as ha,F as pa,G as ya,H as ga,k as xt,D as bn,I as _a,C as ba,l as wn,z as wa,J as en,K as xa,L as tn,M as Da,s as mt,p as Dt,f as Me,N as rn,Q as Ne,c as je,h as ka,R as Ea}from"./Bt1Or0Rf.js";import{s as sr}from"./CdEA5IGF.js";import{i as at}from"./B41JjjA1.js";import{R as Te}from"./Cqyarj3a.js";import{S as xn}from"./BWeC1-iU.js";import{b as ft,a as Fr,c as gr}from"./DSlOdaIK.js";import{b as Wt}from"./BfcxZoyz.js";import{b as Et}from"./DGrLfHTH.js";import{w as Ot,g as nn,d as Rt,c as Ta,o as Aa}from"./CxzQr61Z.js";import{t as wt}from"./r7-tBYgy.js";import{s as Ia,i as Ma}from"./BuPv3n4F.js";import{c as Ca}from"./o3sAeHs0.js";import{c as Ra,a as ot,e as an,f as Fa,h as Oa,V as Sa}from"./BvzMQ0uj.js";import{_ as Er}from"./CmsKOCeN.js";function Dn(i,e,n=!1,r=!1,t=!1){var a=i,c="";ge(()=>{var u=na;if(c===(c=e()??"")){Zr&&Kr();return}if(u.nodes!==null&&(aa(u.nodes.start,u.nodes.end),u.nodes=null),c!==""){if(Zr){Vr.data;for(var y=Kr(),b=y;y!==null&&(y.nodeType!==ia||y.data!=="");)b=y,y=sa(y);if(y===null)throw oa(),la;Jr(Vr,b),a=ca(y);return}var s=c+"";n?s=`<svg>${s}</svg>`:r&&(s=`<math>${s}</math>`);var o=ma(s);if((n||r)&&(o=Xt(o)),Jr(Xt(o),o.lastChild),n||r)for(;Xt(o);)a.before(Xt(o));else a.before(o)}})}function Pt(i,e){const n=Ze(i);return isNaN(e)?Be(i,NaN):(e&&n.setDate(n.getDate()+e),n)}function Qt(i,e){const n=e*7;return Pt(i,n)}function Ft(i,e){const n=Rr(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,t=Ze(i),a=t.getDay(),c=(a<r?-7:0)+6-(a-r);return t.setDate(t.getDate()+c),t.setHours(23,59,59,999),t}function Pa(){return Object.assign({},Rr())}function Ua(i){let n=Ze(i).getDay();return n===0&&(n=7),n}function Na(i,e){const n=e instanceof Date?Be(e,0):new e(0);return n.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),n.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),n}const Ya=10;class kn{subPriority=0;validate(e,n){return!0}}class La extends kn{constructor(e,n,r,t,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=t,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Ha extends kn{priority=Ya;subPriority=-1;set(e,n){return n.timestampIsSet?e:Be(e,Na(e,Date))}}class Ee{run(e,n,r,t){const a=this.parse(e,n,r,t);return a?{setter:new La(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class za extends Ee{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Se={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ut={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Pe(i,e){return i&&{value:e(i.value),rest:i.rest}}function Re(i,e){const n=e.match(i);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function dt(i,e){const n=e.match(i);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,t=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,c=n[5]?parseInt(n[5],10):0;return{value:r*(t*ha+a*pa+c*ya),rest:e.slice(n[0].length)}}function En(i){return Re(Se.anyDigitsSigned,i)}function Fe(i,e){switch(i){case 1:return Re(Se.singleDigit,e);case 2:return Re(Se.twoDigits,e);case 3:return Re(Se.threeDigits,e);case 4:return Re(Se.fourDigits,e);default:return Re(new RegExp("^\\d{1,"+i+"}"),e)}}function or(i,e){switch(i){case 1:return Re(Se.singleDigitSigned,e);case 2:return Re(Se.twoDigitsSigned,e);case 3:return Re(Se.threeDigitsSigned,e);case 4:return Re(Se.fourDigitsSigned,e);default:return Re(new RegExp("^-?\\d{1,"+i+"}"),e)}}function Or(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Tn(i,e){const n=e>0,r=n?e:1-e;let t;if(r<=50)t=i||100;else{const a=r+50,c=Math.trunc(a/100)*100,u=i>=a%100;t=i+c-(u?100:0)}return n?t:1-t}function An(i){return i%400===0||i%4===0&&i%100!==0}class Wa extends Ee{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return Pe(Fe(4,e),t);case"yo":return Pe(r.ordinalNumber(e,{unit:"year"}),t);default:return Pe(Fe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const t=e.getFullYear();if(r.isTwoDigitYear){const c=Tn(r.year,t);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class qa extends Ee{priority=130;parse(e,n,r){const t=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Pe(Fe(4,e),t);case"Yo":return Pe(r.ordinalNumber(e,{unit:"year"}),t);default:return Pe(Fe(n.length,e),t)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,t){const a=ga(e,t);if(r.isTwoDigitYear){const u=Tn(r.year,a);return e.setFullYear(u,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}const c=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(c,0,t.firstWeekContainsDate),e.setHours(0,0,0,0),xt(e,t)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Ba extends Ee{priority=130;parse(e,n){return or(n==="R"?4:n.length,e)}set(e,n,r){const t=Be(e,0);return t.setFullYear(r,0,4),t.setHours(0,0,0,0),bn(t)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class $a extends Ee{priority=130;parse(e,n){return or(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Qa extends Ee{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Fe(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class ja extends Ee{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Fe(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Ga extends Ee{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"M":return Pe(Re(Se.month,e),t);case"MM":return Pe(Fe(2,e),t);case"Mo":return Pe(r.ordinalNumber(e,{unit:"month"}),t);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Za extends Ee{priority=110;parse(e,n,r){const t=a=>a-1;switch(n){case"L":return Pe(Re(Se.month,e),t);case"LL":return Pe(Fe(2,e),t);case"Lo":return Pe(r.ordinalNumber(e,{unit:"month"}),t);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Ka(i,e,n){const r=Ze(i),t=_a(r,n)-e;return r.setDate(r.getDate()-t*7),r}class Va extends Ee{priority=100;parse(e,n,r){switch(n){case"w":return Re(Se.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,t){return xt(Ka(e,r,t),t)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Xa(i,e){const n=Ze(i),r=ba(n)-e;return n.setDate(n.getDate()-r*7),n}class Ja extends Ee{priority=100;parse(e,n,r){switch(n){case"I":return Re(Se.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return bn(Xa(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ei=[31,28,31,30,31,30,31,31,30,31,30,31],ti=[31,29,31,30,31,30,31,31,30,31,30,31];class ri extends Ee{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return Re(Se.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Fe(n.length,e)}}validate(e,n){const r=e.getFullYear(),t=An(r),a=e.getMonth();return t?n>=1&&n<=ti[a]:n>=1&&n<=ei[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class ni extends Ee{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return Re(Se.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Fe(n.length,e)}}validate(e,n){const r=e.getFullYear();return An(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function Sr(i,e,n){const r=Rr(),t=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ze(i),c=a.getDay(),y=(e%7+7)%7,b=7-t,s=e<0||e>6?e-(c+b)%7:(y+b)%7-(c+b)%7;return Pt(a,s)}class ai extends Ee{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Sr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class ii extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return Pe(Fe(n.length,e),a);case"eo":return Pe(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Sr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class si extends Ee{priority=90;parse(e,n,r,t){const a=c=>{const u=Math.floor((c-1)/7)*7;return(c+t.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return Pe(Fe(n.length,e),a);case"co":return Pe(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,t){return e=Sr(e,r,t),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function oi(i,e){const n=Ze(i),r=Ua(n),t=e-r;return Pt(n,t)}class li extends Ee{priority=90;parse(e,n,r){const t=a=>a===0?7:a;switch(n){case"i":case"ii":return Fe(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Pe(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiii":return Pe(r.day(e,{width:"narrow",context:"formatting"}),t);case"iiiiii":return Pe(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t);case"iiii":default:return Pe(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),t)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=oi(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class ci extends Ee{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Or(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class ui extends Ee{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Or(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class di extends Ee{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(Or(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class fi extends Ee{priority=70;parse(e,n,r){switch(n){case"h":return Re(Se.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const t=e.getHours()>=12;return t&&r<12?e.setHours(r+12,0,0,0):!t&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class vi extends Ee{priority=70;parse(e,n,r){switch(n){case"H":return Re(Se.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class mi extends Ee{priority=70;parse(e,n,r){switch(n){case"K":return Re(Se.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class hi extends Ee{priority=70;parse(e,n,r){switch(n){case"k":return Re(Se.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Fe(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const t=r<=24?r%24:r;return e.setHours(t,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class pi extends Ee{priority=60;parse(e,n,r){switch(n){case"m":return Re(Se.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class yi extends Ee{priority=50;parse(e,n,r){switch(n){case"s":return Re(Se.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Fe(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class gi extends Ee{priority=30;parse(e,n){const r=t=>Math.trunc(t*Math.pow(10,-n.length+3));return Pe(Fe(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class _i extends Ee{priority=10;parse(e,n){switch(n){case"X":return dt(ut.basicOptionalMinutes,e);case"XX":return dt(ut.basic,e);case"XXXX":return dt(ut.basicOptionalSeconds,e);case"XXXXX":return dt(ut.extendedOptionalSeconds,e);case"XXX":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Be(e,e.getTime()-wn(e)-r)}incompatibleTokens=["t","T","x"]}class bi extends Ee{priority=10;parse(e,n){switch(n){case"x":return dt(ut.basicOptionalMinutes,e);case"xx":return dt(ut.basic,e);case"xxxx":return dt(ut.basicOptionalSeconds,e);case"xxxxx":return dt(ut.extendedOptionalSeconds,e);case"xxx":default:return dt(ut.extended,e)}}set(e,n,r){return n.timestampIsSet?e:Be(e,e.getTime()-wn(e)-r)}incompatibleTokens=["t","T","X"]}class wi extends Ee{priority=40;parse(e){return En(e)}set(e,n,r){return[Be(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class xi extends Ee{priority=20;parse(e){return En(e)}set(e,n,r){return[Be(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Di={G:new za,y:new Wa,Y:new qa,R:new Ba,u:new $a,Q:new Qa,q:new ja,M:new Ga,L:new Za,w:new Va,I:new Ja,d:new ri,D:new ni,E:new ai,e:new ii,c:new si,i:new li,a:new ci,b:new ui,B:new di,h:new fi,H:new vi,K:new mi,k:new hi,m:new pi,s:new yi,S:new gi,X:new _i,x:new bi,t:new wi,T:new xi},ki=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ei=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ti=/^'([^]*?)'?$/,Ai=/''/g,Ii=/\S/,Mi=/[a-zA-Z]/;function lr(i,e,n,r){const t=Pa(),a=r?.locale??t.locale??wa,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0;if(e==="")return i===""?Ze(n):Be(n,NaN);const y={firstWeekContainsDate:c,weekStartsOn:u,locale:a},b=[new Ha],s=e.match(Ei).map(E=>{const M=E[0];if(M in en){const w=en[M];return w(E,a.formatLong)}return E}).join("").match(ki),o=[];for(let E of s){!r?.useAdditionalWeekYearTokens&&xa(E)&&tn(E,e,i),!r?.useAdditionalDayOfYearTokens&&Da(E)&&tn(E,e,i);const M=E[0],w=Di[M];if(w){const{incompatibleTokens:S}=w;if(Array.isArray(S)){const I=o.find(U=>S.includes(U.token)||U.token===M);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${E}\` at the same time`)}else if(w.incompatibleTokens==="*"&&o.length>0)throw new RangeError(`The format string mustn't contain \`${E}\` and any other token at the same time`);o.push({token:M,fullToken:E});const R=w.run(i,E,a.match,y);if(!R)return Be(n,NaN);b.push(R.setter),i=R.rest}else{if(M.match(Mi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");if(E==="''"?E="'":M==="'"&&(E=Ci(E)),i.indexOf(E)===0)i=i.slice(E.length);else return Be(n,NaN)}}if(i.length>0&&Ii.test(i))return Be(n,NaN);const l=b.map(E=>E.priority).sort((E,M)=>M-E).filter((E,M,w)=>w.indexOf(E)===M).map(E=>b.filter(M=>M.priority===E).sort((M,w)=>w.subPriority-M.subPriority)).map(E=>E[0]);let v=Ze(n);if(isNaN(v.getTime()))return Be(n,NaN);const g={};for(const E of l){if(!E.validate(v,y))return Be(n,NaN);const M=E.set(v,g,y);Array.isArray(M)?(v=M[0],Object.assign(g,M[1])):v=M}return Be(n,v)}function Ci(i){return i.match(Ti)[1].replace(Ai,"'")}function Jt(i,e){const n=+Ze(i),[r,t]=[+Ze(e.start),+Ze(e.end)].sort((a,c)=>a-c);return n>=r&&n<=t}function Ri(i,e){const n=Ze(i);return n.setHours(e),n}function Fi(i,e){const n=Ze(i);return n.setMinutes(e),n}function Oi(i,e){const n=Yi(e);return"formatToParts"in n?Pi(n,i):Ui(n,i)}const Si={year:0,month:1,day:2,hour:3,minute:4,second:5};function Pi(i,e){try{const n=i.formatToParts(e),r=[];for(let t=0;t<n.length;t++){const a=Si[n[t].type];a!==void 0&&(r[a]=parseInt(n[t].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function Ui(i,e){const n=i.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const _r={},sn=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Ni=sn==="06/25/2014, 00:00:00"||sn==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function Yi(i){return _r[i]||(_r[i]=Ni?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),_r[i]}function Pr(i,e,n,r,t,a,c){const u=new Date(0);return u.setUTCFullYear(i,e,n),u.setUTCHours(r,t,a,c),u}const on=36e5,Li=6e4,br={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Ur(i,e,n){if(!i)return 0;let r=br.timezoneZ.exec(i);if(r)return 0;let t,a;if(r=br.timezoneHH.exec(i),r)return t=parseInt(r[1],10),ln(t)?-(t*on):NaN;if(r=br.timezoneHHMM.exec(i),r){t=parseInt(r[2],10);const c=parseInt(r[3],10);return ln(t,c)?(a=Math.abs(t)*on+c*Li,r[1]==="+"?-a:a):NaN}if(Wi(i)){e=new Date(e||Date.now());const c=n?e:Hi(e),u=Tr(c,i);return-(n?u:zi(e,u,i))}return NaN}function Hi(i){return Pr(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}function Tr(i,e){const n=Oi(i,e),r=Pr(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let t=i.getTime();const a=t%1e3;return t-=a>=0?a:1e3+a,r-t}function zi(i,e,n){let t=i.getTime()-e;const a=Tr(new Date(t),n);if(e===a)return e;t-=a-e;const c=Tr(new Date(t),n);return a===c?a:Math.max(a,c)}function ln(i,e){return-23<=i&&i<=23&&(e==null||0<=e&&e<=59)}const cn={};function Wi(i){if(cn[i])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:i}),cn[i]=!0,!0}catch{return!1}}function un(i){const e=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()));return e.setUTCFullYear(i.getFullYear()),+i-+e}const In=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,wr=36e5,dn=6e4,qi=2,Qe={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:In};function Ar(i,e={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(i===null)return new Date(NaN);const n=e.additionalDigits==null?qi:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]")return new Date(i.getTime());if(typeof i=="number"||Object.prototype.toString.call(i)==="[object Number]")return new Date(i);if(Object.prototype.toString.call(i)!=="[object String]")return new Date(NaN);const r=Bi(i),{year:t,restDateString:a}=$i(r.date,n),c=Qi(a,t);if(c===null||isNaN(c.getTime()))return new Date(NaN);if(c){const u=c.getTime();let y=0,b;if(r.time&&(y=ji(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||e.timeZone){if(b=Ur(r.timeZone||e.timeZone,new Date(u+y)),isNaN(b))return new Date(NaN)}else b=un(new Date(u+y)),b=un(new Date(u+y+b));return new Date(u+y+b)}else return new Date(NaN)}function Bi(i){const e={};let n=Qe.dateTimePattern.exec(i),r;if(n?(e.date=n[1],r=n[3]):(n=Qe.datePattern.exec(i),n?(e.date=n[1],r=n[2]):(e.date=null,r=i)),r){const t=Qe.timeZone.exec(r);t?(e.time=r.replace(t[1],""),e.timeZone=t[1].trim()):e.time=r}return e}function $i(i,e){if(i){const n=Qe.YYY[e],r=Qe.YYYYY[e];let t=Qe.YYYY.exec(i)||r.exec(i);if(t){const a=t[1];return{year:parseInt(a,10),restDateString:i.slice(a.length)}}if(t=Qe.YY.exec(i)||n.exec(i),t){const a=t[1];return{year:parseInt(a,10)*100,restDateString:i.slice(a.length)}}}return{year:null}}function Qi(i,e){if(e===null)return null;let n,r,t;if(!i||!i.length)return n=new Date(0),n.setUTCFullYear(e),n;let a=Qe.MM.exec(i);if(a)return n=new Date(0),r=parseInt(a[1],10)-1,vn(e,r)?(n.setUTCFullYear(e,r),n):new Date(NaN);if(a=Qe.DDD.exec(i),a){n=new Date(0);const c=parseInt(a[1],10);return Ki(e,c)?(n.setUTCFullYear(e,0,c),n):new Date(NaN)}if(a=Qe.MMDD.exec(i),a){n=new Date(0),r=parseInt(a[1],10)-1;const c=parseInt(a[2],10);return vn(e,r,c)?(n.setUTCFullYear(e,r,c),n):new Date(NaN)}if(a=Qe.Www.exec(i),a)return t=parseInt(a[1],10)-1,mn(t)?fn(e,t):new Date(NaN);if(a=Qe.WwwD.exec(i),a){t=parseInt(a[1],10)-1;const c=parseInt(a[2],10)-1;return mn(t,c)?fn(e,t,c):new Date(NaN)}return null}function ji(i){let e,n,r=Qe.HH.exec(i);if(r)return e=parseFloat(r[1].replace(",",".")),xr(e)?e%24*wr:NaN;if(r=Qe.HHMM.exec(i),r)return e=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),xr(e,n)?e%24*wr+n*dn:NaN;if(r=Qe.HHMMSS.exec(i),r){e=parseInt(r[1],10),n=parseInt(r[2],10);const t=parseFloat(r[3].replace(",","."));return xr(e,n,t)?e%24*wr+n*dn+t*1e3:NaN}return null}function fn(i,e,n){e=e||0,n=n||0;const r=new Date(0);r.setUTCFullYear(i,0,4);const t=r.getUTCDay()||7,a=e*7+n+1-t;return r.setUTCDate(r.getUTCDate()+a),r}const Gi=[31,28,31,30,31,30,31,31,30,31,30,31],Zi=[31,29,31,30,31,30,31,31,30,31,30,31];function Mn(i){return i%400===0||i%4===0&&i%100!==0}function vn(i,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;const r=Mn(i);if(r&&n>Zi[e]||!r&&n>Gi[e])return!1}return!0}function Ki(i,e){if(e<1)return!1;const n=Mn(i);return!(n&&e>366||!n&&e>365)}function mn(i,e){return!(i<0||i>52||e!=null&&(e<0||e>6))}function xr(i,e,n){return!(i<0||i>=25||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}function vt(i,e,n){i=Ar(i,n);const r=Ur(e,i,!0),t=new Date(i.getTime()-r),a=new Date(0);return a.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),a.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),a}function Tt(i,e,n){if(typeof i=="string"&&!i.match(In))return Ar(i,{...n,timeZone:e});i=Ar(i,n);const r=Pr(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()).getTime(),t=Ur(e,new Date(r));return new Date(r+t)}const Ir=Ot([]);let lt=null;async function Nt(){return lt||(lt=(async()=>{const{data:i,error:e}=await mt.from("calendar_events").select("*").order("start_time",{ascending:!0});if(e)throw lt=null,e;const n=i||[];return Ir.set(n),setTimeout(()=>{lt=null},100),n})(),lt)}async function Yt(i){let e=nn(Ir);return e.length||(await Nt(),e=nn(Ir)),e.find(n=>n.id===i)}async function Nr(i){const{data:e,error:n}=await mt.from("calendar_events").insert([i]).select();if(n)throw n;return lt=null,await Nt(),e?e[0]:void 0}async function At(i,e){const{data:n,error:r}=await mt.from("calendar_events").update(e).eq("id",i).select();if(r)throw r;return lt=null,await Nt(),n?n[0]:void 0}async function Yr(i){const e=await Yt(i),{error:n}=await mt.from("calendar_events").delete().eq("id",i);if(n)throw n;e?.attachments&&e.attachments.length>0&&await Hr(e.attachments),lt=null,await Nt()}async function Vi(i=new Date){const e=i.toISOString(),{data:n,error:r}=await mt.from("calendar_events").select("*").lt("start_time",e).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const t=[],a=[];for(const u of n){if(u.recurrence_rule&&(!u.recurrence_end_date||u.recurrence_end_date&&new Date(u.recurrence_end_date)>=i)){a.push(u);continue}t.push(u)}let c=0;if(t.length>0){const u=t.map(y=>y.id).filter(y=>y!==void 0);if(u.length>0){const{data:y,error:b}=await mt.from("calendar_events").delete().in("id",u).select("id");if(b)throw b;c=y?.length??0;for(const s of t)s.attachments&&s.attachments.length>0&&await Hr(s.attachments)}}return lt=null,await Nt(),{deleted:c,skipped:a.length}}async function Cn(i,e){const n=i.name.split(".").pop()||"bin",r=e||"temp",a=`${crypto.randomUUID()}.${n}`,c=`${r}/${a}`,{error:u}=await mt.storage.from("event-attachments").upload(c,i,{cacheControl:"3600",upsert:!1});if(u)throw u;const{data:{publicUrl:y}}=mt.storage.from("event-attachments").getPublicUrl(c);return{id:crypto.randomUUID(),name:i.name,url:y,type:i.type,size:i.size,uploadedAt:new Date().toISOString()}}async function Rn(i){const{error:e}=await mt.storage.from("event-attachments").remove([i]);if(e)throw e}function Lr(i){const e=i.match(/event-attachments\/(.+)$/);return e?e[1]:""}async function Hr(i){if(!i||i.length===0)return;const e=i.map(n=>Lr(n.url)).filter(n=>n);if(e.length>0){const{error:n}=await mt.storage.from("event-attachments").remove(e);if(n)throw n}}const wl=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Nr,deleteCalendarEvent:Yr,deleteEventAttachment:Rn,deleteEventAttachments:Hr,deletePastCalendarEvents:Vi,extractStoragePath:Lr,getAllCalendarEvents:Nt,getCalendarEvent:Yt,updateCalendarEvent:At,uploadEventAttachment:Cn},Symbol.toStringTag,{value:"Module"})),Xi={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21}},cr=Object.values(Xi).sort((i,e)=>i.sort_index-e.sort_index),kt=i=>i?cr.find(e=>e.key===i):void 0;let jt=null;const Ji=()=>{const i=Ot(!1),e=Ot([]),n=Ot([]),r=Ot(""),t=Ot(!1),a=Rt([n],([S])=>{const R=new Date,I=Ft(Qt(R,3),{weekStartsOn:1}),U=S.filter(_=>_?.meta_data?.category?.length).filter(_=>{if(_.event_type==="calendar_event"){const O=_.start_time?Dt(_.start_time):null;return O?Jt(O,{start:R,end:I}):!1}return!0}).map(_=>cr.find(O=>O.key===_.meta_data?.category)).filter(_=>_!==void 0);return Array.from(new Set(U))}),c=Rt([r],([S])=>cr.find(R=>R.key===S)),u=Rt([n,r],([S,R])=>S.filter(I=>I.event_type==="calendar_event").filter(I=>{const U=I?.meta_data;return R&&U?U?.category===R:!0}).filter(I=>{const U=I.start_time?Dt(I.start_time):null,_=Ia();return U?Ma(U,_)||U.getTime()>=_.getTime():!1})),y=Rt([n,r],([S,R])=>S.filter(I=>I.event_type==="announcement").filter(I=>{const U=I?.meta_data;return R&&U?U?.category===R:!0})),b=Rt([u],([S])=>S.filter(R=>{const I=R.start_time?Dt(R.start_time):null;return I?Jt(I,{start:xt(new Date,{weekStartsOn:1}),end:Ft(new Date,{weekStartsOn:1})}):!1})),s=()=>{const S=xt(new Date,{weekStartsOn:1}),R=Ft(new Date,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(R,"MMM d").toUpperCase()}`},o=Rt([u],([S])=>{const R=Qt(xt(new Date,{weekStartsOn:1}),1),I=Ft(R,{weekStartsOn:1});return S.filter(U=>{const _=U.start_time?Dt(U.start_time):null;return _?Jt(_,{start:R,end:I}):!1})}),l=()=>{const S=Qt(xt(new Date,{weekStartsOn:1}),1),R=Ft(S,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(R,"MMM d").toUpperCase()}`},v=Rt([u],([S])=>{const R=Qt(xt(new Date,{weekStartsOn:1}),2),I=Ft(R,{weekStartsOn:1});return S.filter(U=>{const _=U.start_time?Dt(U.start_time):null;return _?Jt(_,{start:R,end:I}):!1})}),g=()=>{const S=Qt(xt(new Date,{weekStartsOn:1}),2),R=Ft(S,{weekStartsOn:1});return`${Me(S,"MMM d").toUpperCase()} – ${Me(R,"MMM d").toUpperCase()}`},E=S=>{const R=[],I=new Date,U=new Date;U.setFullYear(I.getFullYear()+1);for(const _ of S)if(_.recurrence_rule&&_.start_time&&_.end_time)try{const O=Te.fromString(_.recurrence_rule),h=_.recurrence_end_date?O.all():O.between(I,U,!0),p=new Date(_.start_time),x=new Date(_.end_time).getTime()-p.getTime(),D=vt(p,Ne),C=D.getHours(),T=D.getMinutes(),A=D.getSeconds(),m=D.getMilliseconds(),f=_.recurrence_exceptions||[],P=_.recurrence_overrides||{};h.forEach((F,L)=>{const j=vt(F,Ne),B=new Date(j);B.setHours(C,T,A,m);const Z=Tt(B,Ne),z=Z,H=new Date(Z.getTime()+x),q=Me(F,"yyyy-MM-dd"),G=P[q];if(f.includes(q)&&!G)return;const $={..._,id:void 0,start_time:z.toISOString(),end_time:H.toISOString(),meta_data:{category:_.meta_data?.category||"",..._.meta_data,recurring_instance:!0,recurring_parent_id:_.id,recurring_instance_index:L}};G&&(G.title!==void 0&&($.title=G.title),G.description!==void 0&&($.description=G.description),G.location!==void 0&&($.location=G.location),G.start_time!==void 0&&($.start_time=G.start_time),G.end_time!==void 0&&($.end_time=G.end_time),G.is_all_day!==void 0&&($.is_all_day=G.is_all_day),G.meta_data!==void 0&&($.meta_data={...$.meta_data,...G.meta_data})),R.push($)})}catch(O){console.error("Failed to expand recurring event:",_.id,O),R.push(_)}else R.push(_);return R},M=S=>S.length?E(S).map(I=>({...I,start_time:I?.start_time?rn(I.start_time):void 0,end_time:I.end_time?rn(I.end_time):void 0})):[];return jt={stores:{ready:i,data:e,dbData:n,announcements:y,calendarEvents:u,calendarEventsThisWeek:b,calendarEventsNextWeek:o,calendarEventsNextNextWeek:v,currentCategories:a,categoryFilter:r,currentCategoryFilter:c,weeksExpanded:t},actions:{reload:async()=>{i.set(!1);const S=await Nt();n.set(M(S)),i.set(!0)},calendarEventsThisWeekLabel:s,calendarEventsNextWeekLabel:l,calendarEventsNextNextWeekLabel:g}},jt},Fn=()=>jt?.stores&&Object.keys(jt.stores).length>0?jt:Ji();var es=re('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),ts=re('<span class="d-block text-uppercase small fw-semibold svelte-1rksp2z">All Day</span>'),rs=re('<span class="d-block small svelte-1rksp2z"> </span>'),ns=re('<span class="text-muted">•</span>'),as=re("<span> </span> <!>",1),is=re('<span class="text-muted">•</span>'),ss=re('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),os=re('<span class="text-muted">•</span>'),ls=re('<span class="text-muted small svelte-1rksp2z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),cs=re('<span class="text-muted">•</span>'),us=re('<em class="small fw-lighter svelte-1rksp2z"> </em> <!>',1),ds=re('<em class="small fw-lighter text-decoration-underline svelte-1rksp2z"><!> details</em>'),fs=re('<div class="small svelte-1rksp2z"><!></div>'),vs=re('<div class="attachment-image-container svelte-1rksp2z"><button type="button" class="attachment-image-button svelte-1rksp2z"><img class="attachment-image svelte-1rksp2z"/></button> <div class="attachment-image-label svelte-1rksp2z"><small class="text-muted"> </small></div></div>'),ms=re('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),hs=re('<div class="mt-1 svelte-1rksp2z"><div class="fw-semibold small mb-1 svelte-1rksp2z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),ps=re('<div class="details-container svelte-1rksp2z"><!> <!></div>'),ys=re('<div class="event-thumbnail-container svelte-1rksp2z"><img class="event-thumbnail svelte-1rksp2z"/></div>'),gs=re('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1rksp2z"><div class="d-flex align-items-center gap-2"><div class="fw-bold svelte-1rksp2z"> </div></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function xl(i,e){et(e,!1);const n=he(),r=he();let t=ve(e,"item",8),a=ve(e,"showDetails",12,!1),c=ve(e,"showDate",8,!0);const u=q=>{if(!q)return"";const G=Dt(q),$=vt(G,Ne);return Me($,"h:mm aa")},y=q=>{if(!q)return"";const G=Dt(q),$=vt(G,Ne);return Me($,"EEE")},b=q=>{if(!q)return"";const G=Dt(q),$=vt(G,Ne);return Me($,"MMM, dd")},s=()=>{d(r)&&a(!a())},o=q=>{d(r)&&(q.key==="Enter"||q.key===" ")&&s()},l=q=>q<1024?q+" B":q<1024*1024?(q/1024).toFixed(1)+" KB":(q/(1024*1024)).toFixed(1)+" MB",v=q=>q.startsWith("image/"),g=q=>{window.open(q,"_blank")},E=q=>{try{const $=Te.fromString(q).origOptions,X=$.interval||1,ie=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=["","1st","2nd","3rd","4th","5th"];if($.freq===Te.DAILY)return X===1?"Repeats daily":`Repeats every ${X} days`;if($.freq===Te.WEEKLY){if($.byweekday){const se=(Array.isArray($.byweekday)?$.byweekday:[$.byweekday]).map(ne=>{const le=typeof ne=="number"?ne:ne.weekday,oe=le===6?0:le+1;return ie[oe]});return X===1?se.length===1?`Repeats every ${se[0]}`:`Repeats on ${se.join(", ")}`:`Repeats every ${X} weeks on ${se.join(", ")}`}return X===1?"Repeats weekly":`Repeats every ${X} weeks`}if($.freq===Te.MONTHLY){if($.byweekday){const se=(Array.isArray($.byweekday)?$.byweekday:[$.byweekday])[0];if(se&&typeof se=="object"&&"n"in se&&"weekday"in se){const ne=se.weekday,le=ne===6?0:ne+1,oe=se.n,ue=ce[oe]||`${oe}th`;return X===1?`Repeats on the ${ue} ${ie[le]} of the month`:`Repeats on the ${ue} ${ie[le]} every ${X} months`}}if($.bymonthday){const te=Array.isArray($.bymonthday)?$.bymonthday[0]:$.bymonthday,se=te===1?"st":te===2?"nd":te===3?"rd":"th";return X===1?`Repeats on the ${te}${se} of the month`:`Repeats on the ${te}${se} every ${X} months`}return X===1?"Repeats monthly":`Repeats every ${X} months`}if($.freq===Te.YEARLY){if($.bymonth&&$.bymonthday){const te=["","January","February","March","April","May","June","July","August","September","October","November","December"],se=Array.isArray($.bymonth)?$.bymonth[0]:$.bymonth,ne=Array.isArray($.bymonthday)?$.bymonthday[0]:$.bymonthday,le=ne===1?"st":ne===2?"nd":ne===3?"rd":"th";return X===1?`Repeats every ${te[se]} ${ne}${le}`:`Repeats every ${X} years on ${te[se]} ${ne}${le}`}return X===1?"Repeats yearly":`Repeats every ${X} years`}return"Repeats"}catch{return"Repeats"}};let M=he("");Le(()=>ee(c()),()=>{W(M,c()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Le(()=>ee(t()),()=>{W(n,t().attachments?.find(q=>v(q.type)))}),Le(()=>ee(t()),()=>{W(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Ut(),at();var w=gs(),S=Y(w);{var R=q=>{var G=es(),$=Y(G),X=Y($,!0);N($);var ie=Q($,2),ce=Y(ie),te=Y(ce,!0);N(ce),N(ie),N(G),ge((se,ne)=>{_e(X,se),_e(te,ne)},[()=>(ee(t()),V(()=>y(t().start_time))),()=>(ee(t()),V(()=>b(t().start_time)))]),J(q,G)};fe(S,q=>{c()&&q(R)})}var I=Q(S,2),U=Y(I),_=Y(U),O=Y(_),h=Y(O,!0);N(O),N(_);var p=Q(_,2);{var k=q=>{var G=ts();J(q,G)},x=q=>{var G=rs(),$=Y(G);N(G),ge((X,ie)=>_e($,`${X??""} to ${ie??""}`),[()=>(ee(t()),V(()=>u(t().start_time))),()=>(ee(t()),V(()=>u(t().end_time)))]),J(q,G)};fe(p,q=>{ee(t()),V(()=>t().is_all_day)?q(k):q(x,!1)})}var D=Q(p,2),C=Y(D);{var T=q=>{var G=as(),$=ze(G),X=Y($,!0);N($);var ie=Q($,2);{var ce=te=>{var se=ns();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge((te,se)=>{je($,1,`badge rounded-pill bg-color-${te??""}`,"svelte-1rksp2z"),_e(X,se)},[()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.color_number)),()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.label))]),J(q,G)};fe(C,q=>{ee(t()),V(()=>t()?.meta_data?.category)&&q(T)})}var A=Q(C,2);{var m=q=>{var G=ss(),$=ze(G),X=Q(Y($));N($);var ie=Q($,2);{var ce=te=>{var se=is();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge(te=>_e(X,` ${te??""}`),[()=>(ee(t()),V(()=>E(t().recurrence_rule)))]),J(q,G)},f=q=>{var G=kr(),$=ze(G);{var X=ie=>{var ce=ls(),te=Q(ze(ce),2);{var se=ne=>{var le=os();J(ne,le)};fe(te,ne=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&ne(se)})}J(ie,ce)};fe($,ie=>{ee(t()),V(()=>t()?.meta_data?.recurring_instance)&&ie(X)},!0)}J(q,G)};fe(A,q=>{ee(t()),V(()=>t().recurrence_rule)?q(m):q(f,!1)})}var P=Q(A,2);{var F=q=>{var G=us(),$=ze(G),X=Y($,!0);N($);var ie=Q($,2);{var ce=te=>{var se=cs();J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&te(ce)})}ge(()=>_e(X,(ee(t()),V(()=>t().location)))),J(q,G)};fe(P,q=>{ee(t()),V(()=>t().location)&&q(F)})}var L=Q(P,2);{var j=q=>{var G=ds(),$=Y(G);{var X=ce=>{var te=ar("Hide");J(ce,te)},ie=ce=>{var te=ar("Show");J(ce,te)};fe($,ce=>{a()?ce(X):ce(ie,!1)})}Je(),N(G),J(q,G)};fe(L,q=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&q(j)})}N(D);var B=Q(D,2);{var Z=q=>{var G=ps(),$=Y(G);{var X=te=>{var se=fs(),ne=Y(se);Dn(ne,()=>(ee(t()),V(()=>t().description))),N(se),J(te,se)};fe($,te=>{ee(t()),V(()=>t().description)&&te(X)})}var ie=Q($,2);{var ce=te=>{var se=hs(),ne=Q(Y(se),2);qt(ne,5,()=>(ee(t()),V(()=>t().attachments)),le=>le.id,(le,oe)=>{var ue=kr(),pe=ze(ue);{var me=ye=>{var de=vs(),be=Y(de),xe=Y(be);N(be);var Ce=Q(be,2),We=Y(Ce),it=Y(We,!0);N(We),N(Ce),N(de),ge(()=>{De(be,"title",`Open ${d(oe),V(()=>d(oe).name)??""}`),De(xe,"src",(d(oe),V(()=>d(oe).url))),De(xe,"alt",(d(oe),V(()=>d(oe).name))),_e(it,(d(oe),V(()=>d(oe).name)))}),we("click",be,sr(()=>g(d(oe).url))),J(ye,de)},Ie=ye=>{var de=ms(),be=Q(Y(de),2),xe=Y(be,!0);N(be);var Ce=Q(be,2),We=Y(Ce);N(Ce),N(de),ge(it=>{De(de,"title",`Open ${d(oe),V(()=>d(oe).name)??""}`),_e(xe,(d(oe),V(()=>d(oe).name))),_e(We,`(${it??""})`)},[()=>(d(oe),V(()=>l(d(oe).size)))]),we("click",de,sr(()=>g(d(oe).url))),J(ye,de)};fe(pe,ye=>{d(oe),V(()=>v(d(oe).type))?ye(me):ye(Ie,!1)})}J(le,ue)}),N(ne),N(se),J(te,se)};fe(ie,te=>{ee(t()),V(()=>t().attachments&&t().attachments.length>0)&&te(ce)})}N(G),J(q,G)};fe(B,q=>{a()&&q(Z)})}N(U);var z=Q(U,2);{var H=q=>{var G=ys(),$=Y(G);N(G),ge(()=>{De($,"src",(d(n),V(()=>d(n).url))),De($,"alt",(d(n),V(()=>d(n).name)))}),J(q,G)};fe(z,q=>{d(n)&&q(H)})}N(I),N(w),ge(()=>{je(w,1,ka(d(M)),"svelte-1rksp2z"),_n(w,d(r)?"cursor: pointer;":""),_e(h,(ee(t()),V(()=>t().title)))}),we("keydown",w,o),we("click",w,s),J(i,w),tt()}var _s=re("<option> </option>"),bs=re('<select class="form-select form-select-sm" aria-label="Small select example"><option>All</option><!></select>'),ws=re('<div class="small d-block text-muted">Filter:</div> <div><!></div>',1),xs=re('<div class="announcement-and-event-filters d-inline"><div><!> <button class="btn btn-sm btn-outline-secondary"><i></i></button></div></div>');function Dl(i,e){et(e,!1);const n=()=>tr(b,"$weeksExpanded",a),r=()=>tr(u,"$currentCategories",a),t=()=>tr(y,"$categoryFilter",a),[a,c]=gn(),{stores:{currentCategories:u,categoryFilter:y,weeksExpanded:b}}=Fn();let s=!0;function o(){Xr(b,!n())}at();var l=xs(),v=Y(l);je(v,1,"d-flex gap-2",null,{},{"align-items-center":s,"justify-content-end":s,"justify-content-between":!s});var g=Y(v);{var E=S=>{var R=ws(),I=Q(ze(R),2),U=Y(I);{var _=O=>{var h=bs();ge(()=>{t(),nr(()=>{r()})});var p=Y(h);p.value=p.__value="";var k=Q(p);qt(k,1,r,Cr,(x,D)=>{var C=_s(),T=Y(C,!0);N(C);var A={};ge(()=>{_e(T,d(D).label),A!==(A=d(D).key)&&(C.value=(C.__value=d(D).key)??"")}),J(x,C)}),N(h),ir(h,t,x=>Xr(y,x)),J(O,h)};fe(U,O=>{O(_)})}N(I),J(S,R)};fe(g,S=>{r().length&&S(E)})}var M=Q(g,2),w=Y(M);N(M),N(v),N(l),ge(()=>{De(M,"title",n()?"Collapse all weeks":"Expand all weeks"),je(w,1,`bi ${n()?"bi-chevron-up":"bi-chevron-down"}`)}),we("click",M,o),J(i,l),tt(),c()}var Ds=re('<div class="invalid-feedback d-block"> </div>'),ks=re("<option> </option>"),Es=re('<div class="invalid-feedback d-block"> </div>'),Ts=re('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Event title. i.e. Ward Conference, Ward BBQ Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Category*</div> <select class="form-select" aria-label="Select Category"></select></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Add details about the event. Supports basic HTML formatting.</small></div></div>');function As(i,e){et(e,!1);const n=he(),r=he();let t=ve(e,"title",12,""),a=ve(e,"eventType",12,"calendar_event"),c=ve(e,"category",12,""),u=ve(e,"isPublic",12,!0),y=ve(e,"description",12,""),b=ve(e,"disabled",8,!1),s=ve(e,"name",8,"event"),o=ve(e,"validationErrors",24,()=>({})),l=he(),v=he();function g(){d(l)?.focus()}function E(){d(v)?.focus()}Le(()=>ee(o()),()=>{W(n,!!o().title)}),Le(()=>ee(o()),()=>{W(r,!!o().description)}),Ut();var M={focusTitle:g,focusDescription:E};at();var w=Ts(),S=Y(w),R=Q(Y(S),2);$e(R);let I;Et(R,B=>W(l,B),()=>d(l));var U=Q(R,2);{var _=B=>{var Z=Ds(),z=Y(Z,!0);N(Z),ge(()=>_e(z,(ee(o()),V(()=>o().title)))),J(B,Z)};fe(U,B=>{ee(o()),V(()=>o().title)&&B(_)})}Je(2),N(S);var O=Q(S,2),h=Q(Y(O),2);ge(()=>{a(),nr(()=>{b()})});var p=Y(h);p.value=p.__value="calendar_event";var k=Q(p);k.value=k.__value="announcement",N(h),N(O);var x=Q(O,2),D=Q(Y(x),2);ge(()=>{c(),nr(()=>{b()})}),qt(D,5,()=>cr,Cr,(B,Z)=>{var z=ks(),H=Y(z,!0);N(z);var q={};ge(()=>{_e(H,(d(Z),V(()=>d(Z).label))),q!==(q=(d(Z),V(()=>d(Z).key)))&&(z.value=(z.__value=(d(Z),V(()=>d(Z).key)))??"")}),J(B,z)}),N(D),N(x);var C=Q(x,2),T=Q(Y(C),2),A=Y(T);$e(A);var m=Q(A,2);N(T),Je(2),N(C);var f=Q(C,2),P=Q(Y(f),2);ua(P);let F;Et(P,B=>W(v,B),()=>d(v));var L=Q(P,2);{var j=B=>{var Z=Es(),z=Y(Z,!0);N(Z),ge(()=>_e(z,(ee(o()),V(()=>o().description)))),J(B,Z)};fe(L,B=>{ee(o()),V(()=>o().description)&&B(j)})}return Je(2),N(f),N(w),ge(()=>{De(R,"name",`${s()??""}-title`),I=je(R,1,"form-control",null,I,{"is-invalid":d(n)}),R.disabled=b(),h.disabled=b(),D.disabled=b(),De(A,"id",`${s()??""}-is-public`),A.disabled=b(),De(m,"for",`${s()??""}-is-public`),De(P,"name",`${s()??""}-description`),F=je(P,1,"form-control",null,F,{"is-invalid":d(r)}),P.disabled=b()}),we("focus",R,()=>d(l).select()),ft(R,t),ir(h,a),ir(D,c),Fr(A,u),we("focus",P,()=>d(v).select()),ft(P,y),J(i,w),Wt(e,"focusTitle",g),Wt(e,"focusDescription",E),tt(M)}var Is=re('<div class="invalid-feedback d-block"> </div>'),Ms=re('<div class="invalid-feedback d-block"> </div>'),Cs=re('<div class="invalid-feedback d-block"> </div>'),Rs=re('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),Fs=re('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function Os(i,e){et(e,!1);const n=he(),r=he(),t=he();let a=ve(e,"dateInput",12,""),c=ve(e,"startTimeInput",12,""),u=ve(e,"endTimeInput",12,""),y=ve(e,"isAllDay",12,!1),b=ve(e,"disabled",8,!1),s=ve(e,"name",8,"event"),o=ve(e,"validationErrors",24,()=>({})),l=he(),v=he(),g=he();function E(){d(l)?.focus()}function M(){d(v)?.focus()}function w(){d(g)?.focus()}Le(()=>ee(o()),()=>{W(n,!!o().dateInput)}),Le(()=>ee(o()),()=>{W(r,!!o().startTimeInput)}),Le(()=>ee(o()),()=>{W(t,!!o().endTimeInput)}),Ut();var S={focusDate:E,focusStartTime:M,focusEndTime:w};at();var R=Fs(),I=Y(R),U=Q(Y(I),2);$e(U);let _;Et(U,A=>W(l,A),()=>d(l));var O=Q(U,2);{var h=A=>{var m=Is(),f=Y(m,!0);N(m),ge(()=>_e(f,(ee(o()),V(()=>o().dateInput)))),J(A,m)};fe(O,A=>{ee(o()),V(()=>o().dateInput)&&A(h)})}N(I);var p=Q(I,2),k=Y(p),x=Y(k);$e(x);var D=Q(x,2);N(k),N(p);var C=Q(p,2);{var T=A=>{var m=Rs(),f=Y(m),P=Q(Y(f),2);$e(P),De(P,"step",900);let F;Et(P,G=>W(v,G),()=>d(v));var L=Q(P,2);{var j=G=>{var $=Ms(),X=Y($,!0);N($),ge(()=>_e(X,(ee(o()),V(()=>o().startTimeInput)))),J(G,$)};fe(L,G=>{ee(o()),V(()=>o().startTimeInput)&&G(j)})}N(f);var B=Q(f,2),Z=Q(Y(B),2);$e(Z),De(Z,"step",900);let z;Et(Z,G=>W(g,G),()=>d(g));var H=Q(Z,2);{var q=G=>{var $=Cs(),X=Y($,!0);N($),ge(()=>_e(X,(ee(o()),V(()=>o().endTimeInput)))),J(G,$)};fe(H,G=>{ee(o()),V(()=>o().endTimeInput)&&G(q)})}N(B),N(m),ge(()=>{De(P,"name",`${s()??""}-start-time`),F=je(P,1,"form-control",null,F,{"is-invalid":d(r)}),P.disabled=b(),De(Z,"name",`${s()??""}-end-time`),z=je(Z,1,"form-control",null,z,{"is-invalid":d(t)}),Z.disabled=b()}),we("focus",P,()=>d(v).select()),ft(P,c),we("focus",Z,()=>d(g).select()),ft(Z,u),J(A,m)};fe(C,A=>{y()||A(T)})}return N(R),ge(()=>{De(U,"name",`${s()??""}-date`),_=je(U,1,"form-control",null,_,{"is-invalid":d(n)}),U.disabled=b(),De(x,"id",`${s()??""}-all-day-check`),x.disabled=b(),De(D,"for",`${s()??""}-all-day-check`)}),we("focus",U,()=>d(l).select()),ft(U,a),Fr(x,y),J(i,R),Wt(e,"focusDate",E),Wt(e,"focusStartTime",M),Wt(e,"focusEndTime",w),tt(S)}var Ss=re('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),Ps=re('<div class="invalid-feedback d-block"> </div>'),Us=re('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Ns=re('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),Ys=re('<div class="invalid-feedback d-block"> </div>'),Ls=re('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),Hs=re('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function zs(i,e){et(e,!1);const n=[],r=[];let t=ve(e,"isRecurring",12,!1),a=ve(e,"recurrenceFrequency",12,"weekly"),c=ve(e,"recurrenceInterval",12,1),u=ve(e,"recurringDays",28,()=>[]),y=ve(e,"recurrenceEndDate",12,""),b=ve(e,"monthlyType",12,"date"),s=ve(e,"dateInput",8,""),o=ve(e,"disabled",8,!1),l=ve(e,"name",8,"event"),v=ve(e,"validationErrors",24,()=>({}));const g=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function E(O){if(!O)return"Same weekday of the month";try{const h=new Date(O),p=Me(h,"EEEE"),k=Math.ceil(h.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][k]} ${p} of the month`}catch{return"Same weekday of the month"}}function M(O){if(!O)return 1;try{return O.split("-").map(Number)[2]}catch{return 1}}at();var w=Hs(),S=Y(w),R=Y(S);$e(R);var I=Q(R,2);N(S);var U=Q(S,2);{var _=O=>{var h=Ls(),p=Y(h),k=Q(Y(p),2),x=Q(Y(k),2),D=Y(x);$e(D),N(x);var C=Q(x,2),T=Y(C);ge(()=>{a(),nr(()=>{o(),c()})});var A=Y(T),m=Y(A,!0);N(A),A.value=A.__value="daily";var f=Q(A),P=Y(f,!0);N(f),f.value=f.__value="weekly";var F=Q(f),L=Y(F,!0);N(F),F.value=F.__value="monthly";var j=Q(F),B=Y(j,!0);N(j),j.value=j.__value="yearly",N(T),N(C),N(k),N(p);var Z=Q(p,2);{var z=se=>{var ne=Us(),le=Q(Y(ne),2);qt(le,5,()=>g,Cr,(pe,me)=>{var Ie=Ss(),ye=Y(Ie);$e(ye);var de,be=Q(ye,2),xe=Y(be,!0);N(be),N(Ie),ge(()=>{De(ye,"id",`${l()??""}-day-${d(me),V(()=>d(me).value)??""}`),ye.disabled=o(),de!==(de=(d(me),V(()=>d(me).value)))&&(ye.value=(ye.__value=(d(me),V(()=>d(me).value)))??""),De(be,"for",`${l()??""}-day-${d(me),V(()=>d(me).value)??""}`),_e(xe,(d(me),V(()=>d(me).label)))}),gr(n,[],ye,()=>(d(me),V(()=>d(me).value),u()),u),J(pe,Ie)}),N(le);var oe=Q(le,2);{var ue=pe=>{var me=Ps(),Ie=Y(me,!0);N(me),ge(()=>_e(Ie,(ee(v()),V(()=>v().recurringDays)))),J(pe,me)};fe(oe,pe=>{ee(v()),V(()=>v().recurringDays)&&pe(ue)})}Je(2),N(ne),J(se,ne)};fe(Z,se=>{a()==="weekly"&&se(z)})}var H=Q(Z,2);{var q=se=>{var ne=Ns(),le=Q(Y(ne),2),oe=Y(le),ue=Y(oe);$e(ue),ue.value=ue.__value="date";var pe=Q(ue,2),me=Y(pe);N(pe),N(oe);var Ie=Q(oe,2),ye=Y(Ie);$e(ye),ye.value=ye.__value="weekday";var de=Q(ye,2),be=Y(de);N(de),N(Ie),N(le),N(ne),ge((xe,Ce)=>{De(ue,"id",`${l()??""}-monthly-date`),ue.disabled=o(),De(pe,"for",`${l()??""}-monthly-date`),_e(me,`On day ${xe??""} of the month`),De(ye,"id",`${l()??""}-monthly-weekday`),ye.disabled=o(),De(de,"for",`${l()??""}-monthly-weekday`),_e(be,`On the ${Ce??""}`)},[()=>(ee(s()),V(()=>M(s()))),()=>(ee(s()),V(()=>E(s())))]),gr(r,[],ue,b,b),gr(r,[],ye,b,b),J(se,ne)};fe(H,se=>{a()==="monthly"&&se(q)})}var G=Q(H,2),$=Y(G),X=Q($,2);$e(X);let ie;var ce=Q(X,2);{var te=se=>{var ne=Ys(),le=Y(ne,!0);N(ne),ge(()=>_e(le,(ee(v()),V(()=>v().recurrenceEndDate)))),J(se,ne)};fe(ce,se=>{ee(v()),V(()=>v().recurrenceEndDate)&&se(te)})}Je(2),N(G),N(h),ge(()=>{D.disabled=o(),T.disabled=o(),_e(m,c()===1?"day":"days"),_e(P,c()===1?"week":"weeks"),_e(L,c()===1?"month":"months"),_e(B,c()===1?"year":"years"),De($,"for",`${l()??""}-recurrence-end-date`),ie=je(X,1,"form-control",null,ie,{"is-invalid":!!v().recurrenceEndDate}),De(X,"id",`${l()??""}-recurrence-end-date`),X.disabled=o()}),ft(D,c),ir(T,a),ft(X,y),J(O,h)};fe(U,O=>{t()&&O(_)})}N(w),ge(()=>{De(R,"id",`${l()??""}-is-recurring`),R.disabled=o(),De(I,"for",`${l()??""}-is-recurring`)}),Fr(R,t),J(i,w),tt()}var Ws=re('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Where the event takes place. i.e. Cultural Hall, Stake Center</small></div>');function qs(i,e){et(e,!1);let n=ve(e,"value",12,""),r=ve(e,"disabled",8,!1),t=ve(e,"name",8,"location"),a=he();function c(){d(a)?.focus()}var u={focus:c},y=Ws(),b=Q(Y(y),2);return $e(b),Et(b,s=>W(a,s),()=>d(a)),Je(2),N(y),ge(()=>{De(b,"name",t()),b.disabled=r()}),we("focus",b,()=>d(a).select()),ft(b,n),J(i,y),Wt(e,"focus",c),tt(u)}var Bs=re('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),$s=re('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Qs=re('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),js=re('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Gs=re('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),Zs=re('<div class="d-flex flex-column gap-2 mb-2"></div>'),Ks=re('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Select a file to automatically upload (Max 5MB). Supports: images, PDFs</small></div></div>');function Vs(i,e){et(e,!1);let n=ve(e,"attachments",24,()=>[]),r=ve(e,"disabled",8,!1),t=ve(e,"uploadingFile",8,!1);const a=Ta();let c=he(),u=he(null),y=he("");const b=O=>{if(O===0)return"0 Bytes";const h=1024,p=["Bytes","KB","MB"],k=Math.floor(Math.log(O)/Math.log(h));return Math.round(O/Math.pow(h,k)*100)/100+" "+p[k]},s=O=>{const h=O.target;h.files&&h.files[0]&&(a("upload",h.files[0]),h.value="")},o=O=>{W(u,O.id),W(y,O.name)},l=O=>{d(y).trim()&&d(y)!==O.name&&a("edit",{attachment:O,newName:d(y).trim()}),W(u,null),W(y,"")},v=()=>{W(u,null),W(y,"")},g=O=>{a("remove",O)};at();var E=Ks(),M=Q(Y(E),2);{var w=O=>{var h=Zs();qt(h,5,n,p=>p.id,(p,k)=>{var x=Gs(),D=Y(x),C=Y(D);{var T=F=>{var L=Bs(),j=ze(L);$e(j);var B=Q(j,2),Z=Y(B,!0);N(B),ge(z=>{j.disabled=r(),_e(Z,z)},[()=>(d(k),V(()=>b(d(k).size)))]),ft(j,()=>d(y),z=>W(y,z)),we("keydown",j,z=>{z.key==="Enter"&&l(d(k)),z.key==="Escape"&&v()}),J(F,L)},A=F=>{var L=$s(),j=ze(L),B=Y(j,!0);N(j);var Z=Q(j,2),z=Y(Z,!0);N(Z),ge(H=>{_e(B,(d(k),V(()=>d(k).name))),_e(z,H)},[()=>(d(k),V(()=>b(d(k).size)))]),J(F,L)};fe(C,F=>{d(u),d(k),V(()=>d(u)===d(k).id)?F(T):F(A,!1)})}N(D);var m=Q(D,2);{var f=F=>{var L=Qs(),j=ze(L),B=Q(j,2);ge(()=>{j.disabled=r(),B.disabled=r()}),we("click",j,()=>l(d(k))),we("click",B,v),J(F,L)},P=F=>{var L=js(),j=ze(L),B=Q(j,2);ge(()=>{j.disabled=r(),B.disabled=r()}),we("click",j,()=>o(d(k))),we("click",B,()=>g(d(k))),J(F,L)};fe(m,F=>{d(u),d(k),V(()=>d(u)===d(k).id)?F(f):F(P,!1)})}N(x),J(p,x)}),N(h),J(O,h)};fe(M,O=>{ee(n()),V(()=>n().length>0)&&O(w)})}var S=Q(M,2),R=Y(S),I=Y(R);Et(I,O=>W(c,O),()=>d(c));var U=Q(I,2);{var _=O=>{xn(O,{size:"sm"})};fe(U,O=>{t()&&O(_)})}N(R),Je(2),N(S),N(E),ge(()=>I.disabled=r()||t()),we("change",I,s),J(i,E),tt()}var Xs=re('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Js(i,e){et(e,!1);const n=he();let r=ve(e,"eventTitle",8),t=ve(e,"occurrenceDate",8),a=ve(e,"callback",8);function c(x){a()(x)}function u(){a()(null)}Le(()=>(ee(t()),Me),()=>{W(n,(()=>{try{const[x,D,C]=t().split("-").map(Number),T=new Date(x,D-1,C);return Me(T,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Ut(),at();var y=Xs(),b=Y(y),s=Y(b),o=Y(s),l=Q(Y(o),2);N(o);var v=Q(o,2),g=Y(v),E=Y(g),M=Y(E);N(E),Je(),N(g);var w=Q(g,4),S=Y(w),R=Q(Y(S),2),I=Y(R,!0);N(R),N(S);var U=Q(S,2),_=Q(Y(U),2),O=Y(_);N(_),N(U);var h=Q(U,2);N(w),N(v);var p=Q(v,2),k=Y(p);N(p),N(s),N(b),N(y),ge(()=>{_e(M,`"${r()??""}"`),_e(I,d(n)),_e(O,`From ${d(n)??""} onwards`)}),we("click",l,u),we("click",S,()=>c("single")),we("click",U,()=>c("future")),we("click",h,()=>c("all")),we("click",k,u),J(i,y),tt()}var eo=re('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function to(i,e){et(e,!1);const n=he();let r=ve(e,"eventTitle",8),t=ve(e,"occurrenceDate",8),a=ve(e,"callback",8);function c(x){a()(x)}function u(){a()(null)}Le(()=>(ee(t()),Me),()=>{W(n,(()=>{try{const[x,D,C]=t().split("-").map(Number),T=new Date(x,D-1,C);return Me(T,"EEEE, MMMM d, yyyy")}catch{return t()}})())}),Ut(),at();var y=eo(),b=Y(y),s=Y(b),o=Y(s),l=Q(Y(o),2);N(o);var v=Q(o,2),g=Y(v),E=Y(g),M=Y(E);N(E),Je(),N(g);var w=Q(g,4),S=Y(w),R=Q(Y(S),2),I=Y(R,!0);N(R),N(S);var U=Q(S,2),_=Q(Y(U),2),O=Y(_);N(_),N(U);var h=Q(U,2);N(w),N(v);var p=Q(v,2),k=Y(p);N(p),N(s),N(b),N(y),ge(()=>{_e(M,`"${r()??""}"`),_e(I,d(n)),_e(O,`From ${d(n)??""} onwards`)}),we("click",l,u),we("click",S,()=>c("single")),we("click",U,()=>c("future")),we("click",h,()=>c("all")),we("click",k,u),J(i,y),tt()}var ro=re('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function no(i,e){et(e,!1);let n=ve(e,"title",8,"Clone Event"),r=ve(e,"message",8,"Select a date for the cloned event:"),t=ve(e,"confirmButtonLabel",8,"Clone"),a=ve(e,"confirmButtonCSS",8,"btn-primary"),c=ve(e,"rejectButtonLabel",8,"Cancel"),u=ve(e,"rejectButtonCSS",8,"btn-secondary"),y=ve(e,"defaultDate",8,void 0),b=ve(e,"callback",8,()=>{}),s=he(),o=he(y()||Me(new Date,"yyyy-MM-dd")),l=!1,v;Aa(()=>{const m=window.bootstrap.Modal;new m(d(s)).show(),d(s).addEventListener("hidden.bs.modal",()=>{l?b()(!0,v):b()(!1)})});function g(){l=!0,v=d(o),window.bootstrap.Modal.getInstance(d(s)).hide()}function E(){l=!1,window.bootstrap.Modal.getInstance(d(s)).hide()}at();var M=ro(),w=Y(M),S=Y(w),R=Y(S),I=Y(R),U=Y(I,!0);N(I),Je(2),N(R);var _=Q(R,2),O=Y(_),h=Y(O,!0);N(O);var p=Q(O,2),k=Q(Y(p),2);$e(k),N(p),N(_);var x=Q(_,2),D=Y(x),C=Y(D,!0);N(D);var T=Q(D,2),A=Y(T,!0);N(T),N(x),N(S),N(w),N(M),Et(M,m=>W(s,m),()=>d(s)),ge(()=>{_e(U,n()),_e(h,r()),je(D,1,`btn ${u()??""}`),_e(C,c()),je(T,1,`btn ${a()??""}`),_e(A,t())}),ft(k,()=>d(o),m=>W(o,m)),we("click",D,E),we("click",T,g),J(i,M),tt()}let er;function ao(i){if(typeof document>"u")return;const e=document.createElement("div");document.body.appendChild(e);const n={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};i.title&&(n.title=i.title),i.message&&(n.message=i.message),i.confirmButtonLabel&&(n.confirmButtonLabel=i.confirmButtonLabel),i.confirmButtonCSS&&(n.confirmButtonCSS=i.confirmButtonCSS),i.rejectButtonLabel&&(n.rejectButtonLabel=i.rejectButtonLabel),i.rejectButtonCSS&&(n.rejectButtonCSS=i.rejectButtonCSS),i.defaultDate&&(n.defaultDate=i.defaultDate),n.callback=(r,t)=>{console.log("Clone confirm result:",r,t),er&&(va(er),er=void 0),e.remove(),i.callback&&typeof i.callback=="function"&&i.callback(r,t)},er=fa(no,{target:e,props:n})}const io=Ra().shape({title:ot().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:ot().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),category:ot().required("Category is required"),description:ot().nullable().max(1e4,"Description is too long"),location:ot().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:ot().when("event_type",{is:"calendar_event",then:i=>i.required("Date is required"),otherwise:i=>i.nullable()}),startTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("Start time is required"),otherwise:i=>i.nullable()}),endTimeInput:ot().when(["event_type","is_all_day"],{is:(i,e)=>i==="calendar_event"&&!e,then:i=>i.required("End time is required"),otherwise:i=>i.nullable()}),isRecurring:an(),recurrenceFrequency:ot().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:Fa().of(Oa().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(i,e)=>i&&e==="weekly",then:i=>i.min(1,"Select at least one day for weekly recurring events").required(),otherwise:i=>i.nullable()}),hasEndDate:an(),recurrenceEndDate:ot().when(["isRecurring","hasEndDate"],{is:(i,e)=>i&&e,then:i=>i.required("End date is required").test("is-future","End date must be in the future",function(e){if(!e)return!1;const n=new Date(e),r=new Date;return r.setHours(0,0,0,0),n>=r}),otherwise:i=>i.nullable()})});function so(){const i=Ot({});async function e(t){try{return await io.validate(t,{abortEarly:!1}),i.set({}),!0}catch(a){if(a instanceof Sa){const c={};return a.inner.forEach(u=>{u.path&&(c[u.path]=u.message)}),i.set(c),!1}return!1}}function n(){i.set({})}function r(){return Object.values(i).filter(a=>a.length>0)}return{validationErrors:i,validate:e,clearErrors:n,getErrorMessages:r}}function zr(i){const{frequency:e,interval:n,recurringDays:r,recurrenceEndDate:t,hasEndDate:a,monthlyType:c,startTime:u}=i,y={0:Te.SU,1:Te.MO,2:Te.TU,3:Te.WE,4:Te.TH,5:Te.FR,6:Te.SA},b={daily:Te.DAILY,weekly:Te.WEEKLY,monthly:Te.MONTHLY,yearly:Te.YEARLY},s=new Date(u),o=vt(s,Ne),l=new Date(o);l.setHours(12,0,0,0);const v=Tt(l,Ne),g={freq:b[e],interval:n,dtstart:v};if(a&&t){const M=new Date(`${t}T23:59:59.999`),w=Tt(M,Ne);g.until=w}if(e==="weekly"&&r.length>0)g.byweekday=r.map(M=>y[M]);else if(e==="monthly")if(c==="date")g.bymonthday=[l.getDate()];else{const M=Math.ceil(l.getDate()/7),w=l.getDay(),S=[Te.SU,Te.MO,Te.TU,Te.WE,Te.TH,Te.FR,Te.SA];g.byweekday=[S[w].nth(M)]}else e==="yearly"&&(g.bymonth=[l.getMonth()+1],g.bymonthday=[l.getDate()]);return{recurrence_rule:new Te(g).toString(),recurrence_end_date:a&&t?g.until.toISOString():void 0}}function On(i,e){try{const r=Te.fromString(i).origOptions,t={6:0,0:1,1:2,2:3,3:4,4:5,5:6},a={[Te.DAILY]:"daily",[Te.WEEKLY]:"weekly",[Te.MONTHLY]:"monthly",[Te.YEARLY]:"yearly"},c=(r.freq!==void 0?a[r.freq]:null)||"weekly",u=r.interval||1;let y=[],b="date";r.byweekday&&c==="weekly"&&(y=(Array.isArray(r.byweekday)?r.byweekday:[r.byweekday]).map(l=>{const v=typeof l=="number"?l:l.weekday;return t[v]})),c==="monthly"&&(r.bymonthday&&Array.isArray(r.bymonthday)&&r.bymonthday.length>0?b="date":r.byweekday&&(b="weekday"));let s="",o=!1;if(e){o=!0;const l=vt(new Date(e),Ne);s=Me(l,"yyyy-MM-dd")}else if(r.until){o=!0;const l=vt(r.until,Ne);s=Me(l,"yyyy-MM-dd")}return{frequency:c,interval:u,recurringDays:y,recurrenceEndDate:s,hasEndDate:o,monthlyType:b}}catch(n){return console.error("Failed to parse recurrence rule:",n),null}}function Sn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function Pn(){return{generateRecurrenceRule:zr,parseRecurrenceRule:On,clearRecurrence:Sn}}const Mr=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Sn,generateRecurrenceRule:zr,parseRecurrenceRule:On,useRecurrenceLogic:Pn},Symbol.toStringTag,{value:"Module"}));function oo(i,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in i)){var t=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(i,r,t.get?t:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(i)}function Un(i,e){return new Promise(function(n,r){let t;return lo(i).then(function(a){try{return t=a,n(new Blob([e.slice(0,2),t,e.slice(2)],{type:"image/jpeg"}))}catch(c){return r(c)}},r)})}const lo=i=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:t}})=>{const a=new DataView(t);let c=0;if(a.getUint16(c)!==65496)return n("not a valid JPEG");for(c+=2;;){const u=a.getUint16(c);if(u===65498)break;const y=a.getUint16(c+2);if(u===65505&&a.getUint32(c+4)===1165519206){const b=c+10;let s;switch(a.getUint16(b)){case 18761:s=!0;break;case 19789:s=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(b+2,s)!==42)return n("TIFF header contains invalid version");const o=a.getUint32(b+4,s),l=b+o+2+12*a.getUint16(b+o,s);for(let v=b+o+2;v<l;v+=12)if(a.getUint16(v,s)==274){if(a.getUint16(v+2,s)!==3)return n("Orientation data type is invalid");if(a.getUint32(v+4,s)!==1)return n("Orientation data count is invalid");a.setUint16(v+8,1,s);break}return e(t.slice(c,c+2+y))}c+=2+y}return e(new Blob)}),r.readAsArrayBuffer(i)});var ur={},co={get exports(){return ur},set exports(i){ur=i}};(function(i){var e,n,r={};co.exports=r,r.parse=function(t,a){for(var c=r.bin.readUshort,u=r.bin.readUint,y=0,b={},s=new Uint8Array(t),o=s.length-4;u(s,o)!=101010256;)o--;y=o,y+=4;var l=c(s,y+=4);c(s,y+=2);var v=u(s,y+=2),g=u(s,y+=4);y+=4,y=g;for(var E=0;E<l;E++){u(s,y),y+=4,y+=4,y+=4,u(s,y+=4),v=u(s,y+=4);var M=u(s,y+=4),w=c(s,y+=4),S=c(s,y+2),R=c(s,y+4);y+=6;var I=u(s,y+=8);y+=4,y+=w+S+R,r._readLocal(s,I,b,v,M,a)}return b},r._readLocal=function(t,a,c,u,y,b){var s=r.bin.readUshort,o=r.bin.readUint;o(t,a),s(t,a+=4),s(t,a+=2);var l=s(t,a+=2);o(t,a+=2),o(t,a+=4),a+=4;var v=s(t,a+=8),g=s(t,a+=2);a+=2;var E=r.bin.readUTF8(t,a,v);if(a+=v,a+=g,b)c[E]={size:y,csize:u};else{var M=new Uint8Array(t.buffer,a);if(l==0)c[E]=new Uint8Array(M.buffer.slice(a,a+u));else{if(l!=8)throw"unknown compression method: "+l;var w=new Uint8Array(y);r.inflateRaw(M,w),c[E]=w}}},r.inflateRaw=function(t,a){return r.F.inflate(t,a)},r.inflate=function(t,a){return t[0],t[1],r.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),a)},r.deflate=function(t,a){a==null&&(a={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*t.length));u[c]=120,u[c+1]=156,c+=2,c=r.F.deflateRaw(t,u,c,a.level);var y=r.adler(t,0,t.length);return u[c+0]=y>>>24&255,u[c+1]=y>>>16&255,u[c+2]=y>>>8&255,u[c+3]=y>>>0&255,new Uint8Array(u.buffer,0,c+4)},r.deflateRaw=function(t,a){a==null&&(a={level:6});var c=new Uint8Array(50+Math.floor(1.1*t.length)),u=r.F.deflateRaw(t,c,u,a.level);return new Uint8Array(c.buffer,0,u)},r.encode=function(t,a){a==null&&(a=!1);var c=0,u=r.bin.writeUint,y=r.bin.writeUshort,b={};for(var s in t){var o=!r._noNeed(s)&&!a,l=t[s],v=r.crc.crc(l,0,l.length);b[s]={cpr:o,usize:l.length,crc:v,file:o?r.deflateRaw(l):l}}for(var s in b)c+=b[s].file.length+30+46+2*r.bin.sizeUTF8(s);c+=22;var g=new Uint8Array(c),E=0,M=[];for(var s in b){var w=b[s];M.push(E),E=r._writeHeader(g,E,s,w,0)}var S=0,R=E;for(var s in b)w=b[s],M.push(E),E=r._writeHeader(g,E,s,w,1,M[S++]);var I=E-R;return u(g,E,101010256),E+=4,y(g,E+=4,S),y(g,E+=2,S),u(g,E+=2,I),u(g,E+=4,R),E+=4,E+=2,g.buffer},r._noNeed=function(t){var a=t.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(t,a,c,u,y,b){var s=r.bin.writeUint,o=r.bin.writeUshort,l=u.file;return s(t,a,y==0?67324752:33639248),a+=4,y==1&&(a+=2),o(t,a,20),o(t,a+=2,0),o(t,a+=2,u.cpr?8:0),s(t,a+=2,0),s(t,a+=4,u.crc),s(t,a+=4,l.length),s(t,a+=4,u.usize),o(t,a+=4,r.bin.sizeUTF8(c)),o(t,a+=2,0),a+=2,y==1&&(a+=2,a+=2,s(t,a+=6,b),a+=4),a+=r.bin.writeUTF8(t,a,c),y==0&&(t.set(l,a),a+=l.length),a},r.crc={table:function(){for(var t=new Uint32Array(256),a=0;a<256;a++){for(var c=a,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;t[a]=c}return t}(),update:function(t,a,c,u){for(var y=0;y<u;y++)t=r.crc.table[255&(t^a[c+y])]^t>>>8;return t},crc:function(t,a,c){return 4294967295^r.crc.update(4294967295,t,a,c)}},r.adler=function(t,a,c){for(var u=1,y=0,b=a,s=a+c;b<s;){for(var o=Math.min(b+5552,s);b<o;)y+=u+=t[b++];u%=65521,y%=65521}return y<<16|u},r.bin={readUshort:function(t,a){return t[a]|t[a+1]<<8},writeUshort:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255},readUint:function(t,a){return 16777216*t[a+3]+(t[a+2]<<16|t[a+1]<<8|t[a])},writeUint:function(t,a,c){t[a]=255&c,t[a+1]=c>>8&255,t[a+2]=c>>16&255,t[a+3]=c>>24&255},readASCII:function(t,a,c){for(var u="",y=0;y<c;y++)u+=String.fromCharCode(t[a+y]);return u},writeASCII:function(t,a,c){for(var u=0;u<c.length;u++)t[a+u]=c.charCodeAt(u)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,a,c){for(var u,y="",b=0;b<c;b++)y+="%"+r.bin.pad(t[a+b].toString(16));try{u=decodeURIComponent(y)}catch{return r.bin.readASCII(t,a,c)}return u},writeUTF8:function(t,a,c){for(var u=c.length,y=0,b=0;b<u;b++){var s=c.charCodeAt(b);if(!(4294967168&s))t[a+y]=s,y++;else if(!(4294965248&s))t[a+y]=192|s>>6,t[a+y+1]=128|s>>0&63,y+=2;else if(!(4294901760&s))t[a+y]=224|s>>12,t[a+y+1]=128|s>>6&63,t[a+y+2]=128|s>>0&63,y+=3;else{if(4292870144&s)throw"e";t[a+y]=240|s>>18,t[a+y+1]=128|s>>12&63,t[a+y+2]=128|s>>6&63,t[a+y+3]=128|s>>0&63,y+=4}}return y},sizeUTF8:function(t){for(var a=t.length,c=0,u=0;u<a;u++){var y=t.charCodeAt(u);if(!(4294967168&y))c++;else if(!(4294965248&y))c+=2;else if(!(4294901760&y))c+=3;else{if(4292870144&y)throw"e";c+=4}}return c}},r.F={},r.F.deflateRaw=function(t,a,c,u){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],b=r.F.U,s=r.F._goodIndex;r.F._hash;var o=r.F._putsE,l=0,v=c<<3,g=0,E=t.length;if(u==0){for(;l<E;)o(a,v,l+(x=Math.min(65535,E-l))==E?1:0),v=r.F._copyExact(t,l,x,a,v+8),l+=x;return v>>>3}var M=b.lits,w=b.strt,S=b.prev,R=0,I=0,U=0,_=0,O=0,h=0;for(E>2&&(w[h=r.F._hash(t,0)]=0),l=0;l<E;l++){if(O=h,l+1<E-2){h=r.F._hash(t,l+1);var p=l+1&32767;S[p]=w[h],w[h]=p}if(g<=l){(R>14e3||I>26697)&&E-l>100&&(g<l&&(M[R]=l-g,R+=2,g=l),v=r.F._writeBlock(l==E-1||g==E?1:0,M,R,_,t,U,l-U,a,v),R=I=_=0,U=l);var k=0;l<E-2&&(k=r.F._bestMatch(t,l,S,O,Math.min(y[2],E-l),y[3]));var x=k>>>16,D=65535&k;if(k!=0){D=65535&k;var C=s(x=k>>>16,b.of0);b.lhst[257+C]++;var T=s(D,b.df0);b.dhst[T]++,_+=b.exb[C]+b.dxb[T],M[R]=x<<23|l-g,M[R+1]=D<<16|C<<8|T,R+=2,g=l+x}else b.lhst[t[l]]++;I++}}for(U==l&&t.length!=0||(g<l&&(M[R]=l-g,R+=2,g=l),v=r.F._writeBlock(1,M,R,_,t,U,l-U,a,v),R=0,I=0,R=I=_=0,U=l);7&v;)v++;return v>>>3},r.F._bestMatch=function(t,a,c,u,y,b){var s=32767&a,o=c[s],l=s-o+32768&32767;if(o==s||u!=r.F._hash(t,a-l))return 0;for(var v=0,g=0,E=Math.min(32767,a);l<=E&&--b!=0&&o!=s;){if(v==0||t[a+v]==t[a+v-l]){var M=r.F._howLong(t,a,l);if(M>v){if(g=l,(v=M)>=y)break;l+2<M&&(M=l+2);for(var w=0,S=0;S<M-2;S++){var R=a-l+S+32768&32767,I=R-c[R]+32768&32767;I>w&&(w=I,o=R)}}}l+=(s=o)-(o=c[s])+32768&32767}return v<<16|g},r.F._howLong=function(t,a,c){if(t[a]!=t[a-c]||t[a+1]!=t[a+1-c]||t[a+2]!=t[a+2-c])return 0;var u=a,y=Math.min(t.length,a+258);for(a+=3;a<y&&t[a]==t[a-c];)a++;return a-u},r.F._hash=function(t,a){return(t[a]<<8|t[a+1])+(t[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(t,a,c,u,y,b,s,o,l){var v,g,E,M,w,S,R,I,U,_=r.F.U,O=r.F._putsF,h=r.F._putsE;_.lhst[256]++,g=(v=r.F.getTrees())[0],E=v[1],M=v[2],w=v[3],S=v[4],R=v[5],I=v[6],U=v[7];var p=32+(l+3&7?8-(l+3&7):0)+(s<<3),k=u+r.F.contSize(_.fltree,_.lhst)+r.F.contSize(_.fdtree,_.dhst),x=u+r.F.contSize(_.ltree,_.lhst)+r.F.contSize(_.dtree,_.dhst);x+=14+3*R+r.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var D=0;D<286;D++)_.lhst[D]=0;for(D=0;D<30;D++)_.dhst[D]=0;for(D=0;D<19;D++)_.ihst[D]=0;var C=p<k&&p<x?0:k<x?1:2;if(O(o,l,t),O(o,l+1,C),l+=3,C==0){for(;7&l;)l++;l=r.F._copyExact(y,b,s,o,l)}else{var T,A;if(C==1&&(T=_.fltree,A=_.fdtree),C==2){r.F.makeCodes(_.ltree,g),r.F.revCodes(_.ltree,g),r.F.makeCodes(_.dtree,E),r.F.revCodes(_.dtree,E),r.F.makeCodes(_.itree,M),r.F.revCodes(_.itree,M),T=_.ltree,A=_.dtree,h(o,l,w-257),h(o,l+=5,S-1),h(o,l+=5,R-4),l+=4;for(var m=0;m<R;m++)h(o,l+3*m,_.itree[1+(_.ordr[m]<<1)]);l+=3*R,l=r.F._codeTiny(I,_.itree,o,l),l=r.F._codeTiny(U,_.itree,o,l)}for(var f=b,P=0;P<c;P+=2){for(var F=a[P],L=F>>>23,j=f+(8388607&F);f<j;)l=r.F._writeLit(y[f++],T,o,l);if(L!=0){var B=a[P+1],Z=B>>16,z=B>>8&255,H=255&B;h(o,l=r.F._writeLit(257+z,T,o,l),L-_.of0[z]),l+=_.exb[z],O(o,l=r.F._writeLit(H,A,o,l),Z-_.df0[H]),l+=_.dxb[H],f+=L}}l=r.F._writeLit(256,T,o,l)}return l},r.F._copyExact=function(t,a,c,u,y){var b=y>>>3;return u[b]=c,u[b+1]=c>>>8,u[b+2]=255-u[b],u[b+3]=255-u[b+1],b+=4,u.set(new Uint8Array(t.buffer,a,c),b),y+(c+4<<3)},r.F.getTrees=function(){for(var t=r.F.U,a=r.F._hufTree(t.lhst,t.ltree,15),c=r.F._hufTree(t.dhst,t.dtree,15),u=[],y=r.F._lenCodes(t.ltree,u),b=[],s=r.F._lenCodes(t.dtree,b),o=0;o<u.length;o+=2)t.ihst[u[o]]++;for(o=0;o<b.length;o+=2)t.ihst[b[o]]++;for(var l=r.F._hufTree(t.ihst,t.itree,7),v=19;v>4&&t.itree[1+(t.ordr[v-1]<<1)]==0;)v--;return[a,c,l,y,s,v,u,b]},r.F.getSecond=function(t){for(var a=[],c=0;c<t.length;c+=2)a.push(t[c+1]);return a},r.F.nonZero=function(t){for(var a="",c=0;c<t.length;c+=2)t[c+1]!=0&&(a+=(c>>1)+",");return a},r.F.contSize=function(t,a){for(var c=0,u=0;u<a.length;u++)c+=a[u]*t[1+(u<<1)];return c},r.F._codeTiny=function(t,a,c,u){for(var y=0;y<t.length;y+=2){var b=t[y],s=t[y+1];u=r.F._writeLit(b,a,c,u);var o=b==16?2:b==17?3:7;b>15&&(r.F._putsE(c,u,s,o),u+=o)}return u},r.F._lenCodes=function(t,a){for(var c=t.length;c!=2&&t[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var y=t[u+1],b=u+3<c?t[u+3]:-1,s=u+5<c?t[u+5]:-1,o=u==0?-1:t[u-1];if(y==0&&b==y&&s==y){for(var l=u+5;l+2<c&&t[l+2]==y;)l+=2;(v=Math.min(l+1-u>>>1,138))<11?a.push(17,v-3):a.push(18,v-11),u+=2*v-2}else if(y==o&&b==y&&s==y){for(l=u+5;l+2<c&&t[l+2]==y;)l+=2;var v=Math.min(l+1-u>>>1,6);a.push(16,v-3),u+=2*v-2}else a.push(y,0)}return c>>>1},r.F._hufTree=function(t,a,c){var u=[],y=t.length,b=a.length,s=0;for(s=0;s<b;s+=2)a[s]=0,a[s+1]=0;for(s=0;s<y;s++)t[s]!=0&&u.push({lit:s,f:t[s]});var o=u.length,l=u.slice(0);if(o==0)return 0;if(o==1){var v=u[0].lit;return l=v==0?1:0,a[1+(v<<1)]=1,a[1+(l<<1)]=1,1}u.sort(function(I,U){return I.f-U.f});var g=u[0],E=u[1],M=0,w=1,S=2;for(u[0]={lit:-1,f:g.f+E.f,l:g,r:E,d:0};w!=o-1;)g=M!=w&&(S==o||u[M].f<u[S].f)?u[M++]:u[S++],E=M!=w&&(S==o||u[M].f<u[S].f)?u[M++]:u[S++],u[w++]={lit:-1,f:g.f+E.f,l:g,r:E};var R=r.F.setDepth(u[w-1],0);for(R>c&&(r.F.restrictDepth(l,c,R),R=c),s=0;s<o;s++)a[1+(l[s].lit<<1)]=l[s].d;return R},r.F.setDepth=function(t,a){return t.lit!=-1?(t.d=a,a):Math.max(r.F.setDepth(t.l,a+1),r.F.setDepth(t.r,a+1))},r.F.restrictDepth=function(t,a,c){var u=0,y=1<<c-a,b=0;for(t.sort(function(o,l){return l.d==o.d?o.f-l.f:l.d-o.d}),u=0;u<t.length&&t[u].d>a;u++){var s=t[u].d;t[u].d=a,b+=y-(1<<c-s)}for(b>>>=c-a;b>0;)(s=t[u].d)<a?(t[u].d++,b-=1<<a-s-1):u++;for(;u>=0;u--)t[u].d==a&&b<0&&(t[u].d--,b++);b!=0&&console.log("debt left")},r.F._goodIndex=function(t,a){var c=0;return a[16|c]<=t&&(c|=16),a[8|c]<=t&&(c|=8),a[4|c]<=t&&(c|=4),a[2|c]<=t&&(c|=2),a[1|c]<=t&&(c|=1),c},r.F._writeLit=function(t,a,c,u){return r.F._putsF(c,u,a[t<<1]),u+a[1+(t<<1)]},r.F.inflate=function(t,a){var c=Uint8Array;if(t[0]==3&&t[1]==0)return a||new c(0);var u=r.F,y=u._bitsF,b=u._bitsE,s=u._decodeTiny,o=u.makeCodes,l=u.codes2map,v=u._get17,g=u.U,E=a==null;E&&(a=new c(t.length>>>2<<3));for(var M,w,S=0,R=0,I=0,U=0,_=0,O=0,h=0,p=0,k=0;S==0;)if(S=y(t,k,1),R=y(t,k+1,2),k+=3,R!=0){if(E&&(a=r.F._check(a,p+(1<<17))),R==1&&(M=g.flmap,w=g.fdmap,O=511,h=31),R==2){I=b(t,k,5)+257,U=b(t,k+5,5)+1,_=b(t,k+10,4)+4,k+=14;for(var x=0;x<38;x+=2)g.itree[x]=0,g.itree[x+1]=0;var D=1;for(x=0;x<_;x++){var C=b(t,k+3*x,3);g.itree[1+(g.ordr[x]<<1)]=C,C>D&&(D=C)}k+=3*_,o(g.itree,D),l(g.itree,D,g.imap),M=g.lmap,w=g.dmap,k=s(g.imap,(1<<D)-1,I+U,t,k,g.ttree);var T=u._copyOut(g.ttree,0,I,g.ltree);O=(1<<T)-1;var A=u._copyOut(g.ttree,I,U,g.dtree);h=(1<<A)-1,o(g.ltree,T),l(g.ltree,T,M),o(g.dtree,A),l(g.dtree,A,w)}for(;;){var m=M[v(t,k)&O];k+=15&m;var f=m>>>4;if(!(f>>>8))a[p++]=f;else{if(f==256)break;var P=p+f-254;if(f>264){var F=g.ldef[f-257];P=p+(F>>>3)+b(t,k,7&F),k+=7&F}var L=w[v(t,k)&h];k+=15&L;var j=L>>>4,B=g.ddef[j],Z=(B>>>4)+y(t,k,15&B);for(k+=15&B,E&&(a=r.F._check(a,p+(1<<17)));p<P;)a[p]=a[p++-Z],a[p]=a[p++-Z],a[p]=a[p++-Z],a[p]=a[p++-Z];p=P}}}else{7&k&&(k+=8-(7&k));var z=4+(k>>>3),H=t[z-4]|t[z-3]<<8;E&&(a=r.F._check(a,p+H)),a.set(new c(t.buffer,t.byteOffset+z,H),p),k=z+H<<3,p+=H}return a.length==p?a:a.slice(0,p)},r.F._check=function(t,a){var c=t.length;if(a<=c)return t;var u=new Uint8Array(Math.max(c<<1,a));return u.set(t,0),u},r.F._decodeTiny=function(t,a,c,u,y,b){for(var s=r.F._bitsE,o=r.F._get17,l=0;l<c;){var v=t[o(u,y)&a];y+=15&v;var g=v>>>4;if(g<=15)b[l]=g,l++;else{var E=0,M=0;g==16?(M=3+s(u,y,2),y+=2,E=b[l-1]):g==17?(M=3+s(u,y,3),y+=3):g==18&&(M=11+s(u,y,7),y+=7);for(var w=l+M;l<w;)b[l]=E,l++}}return y},r.F._copyOut=function(t,a,c,u){for(var y=0,b=0,s=u.length>>>1;b<c;){var o=t[b+a];u[b<<1]=0,u[1+(b<<1)]=o,o>y&&(y=o),b++}for(;b<s;)u[b<<1]=0,u[1+(b<<1)]=0,b++;return y},r.F.makeCodes=function(t,a){for(var c,u,y,b,s=r.F.U,o=t.length,l=s.bl_count,v=0;v<=a;v++)l[v]=0;for(v=1;v<o;v+=2)l[t[v]]++;var g=s.next_code;for(c=0,l[0]=0,u=1;u<=a;u++)c=c+l[u-1]<<1,g[u]=c;for(y=0;y<o;y+=2)(b=t[y+1])!=0&&(t[y]=g[b],g[b]++)},r.F.codes2map=function(t,a,c){for(var u=t.length,y=r.F.U.rev15,b=0;b<u;b+=2)if(t[b+1]!=0)for(var s=b>>1,o=t[b+1],l=s<<4|o,v=a-o,g=t[b]<<v,E=g+(1<<v);g!=E;)c[y[g]>>>15-a]=l,g++},r.F.revCodes=function(t,a){for(var c=r.F.U.rev15,u=15-a,y=0;y<t.length;y+=2){var b=t[y]<<a-t[y+1];t[y]=c[b]>>>u}},r.F._putsE=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8},r.F._putsF=function(t,a,c){c<<=7&a;var u=a>>>3;t[u]|=c,t[u+1]|=c>>>8,t[u+2]|=c>>>16},r.F._bitsE=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8)>>>(7&a)&(1<<c)-1},r.F._bitsF=function(t,a,c){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)&(1<<c)-1},r.F._get17=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(t,a){return(t[a>>>3]|t[1+(a>>>3)]<<8|t[2+(a>>>3)]<<16|t[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=r.F.U,a=0;a<32768;a++){var c=a;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,t.rev15[a]=(c>>>16|c<<16)>>>17}function u(y,b,s){for(;b--!=0;)y.push(0,s)}for(a=0;a<32;a++)t.ldef[a]=t.of0[a]<<3|t.exb[a],t.ddef[a]=t.df0[a]<<4|t.dxb[a];u(t.fltree,144,8),u(t.fltree,112,9),u(t.fltree,24,7),u(t.fltree,8,8),r.F.makeCodes(t.fltree,9),r.F.codes2map(t.fltree,9,t.flmap),r.F.revCodes(t.fltree,9),u(t.fdtree,32,5),r.F.makeCodes(t.fdtree,5),r.F.codes2map(t.fdtree,5,t.fdmap),r.F.revCodes(t.fdtree,5),u(t.itree,19,0),u(t.ltree,286,0),u(t.dtree,30,0),u(t.ttree,320,0)}()})();var uo=oo({__proto__:null,default:ur},[ur]);const nt=function(){var i={nextZero(s,o){for(;s[o]!=0;)o++;return o},readUshort:(s,o)=>s[o]<<8|s[o+1],writeUshort(s,o,l){s[o]=l>>8&255,s[o+1]=255&l},readUint:(s,o)=>16777216*s[o]+(s[o+1]<<16|s[o+2]<<8|s[o+3]),writeUint(s,o,l){s[o]=l>>24&255,s[o+1]=l>>16&255,s[o+2]=l>>8&255,s[o+3]=255&l},readASCII(s,o,l){let v="";for(let g=0;g<l;g++)v+=String.fromCharCode(s[o+g]);return v},writeASCII(s,o,l){for(let v=0;v<l.length;v++)s[o+v]=l.charCodeAt(v)},readBytes(s,o,l){const v=[];for(let g=0;g<l;g++)v.push(s[o+g]);return v},pad:s=>s.length<2?`0${s}`:s,readUTF8(s,o,l){let v,g="";for(let E=0;E<l;E++)g+=`%${i.pad(s[o+E].toString(16))}`;try{v=decodeURIComponent(g)}catch{return i.readASCII(s,o,l)}return v}};function e(s,o,l,v){const g=o*l,E=a(v),M=Math.ceil(o*E/8),w=new Uint8Array(4*g),S=new Uint32Array(w.buffer),{ctype:R}=v,{depth:I}=v,U=i.readUshort;if(R==6){const F=g<<2;if(I==8)for(var _=0;_<F;_+=4)w[_]=s[_],w[_+1]=s[_+1],w[_+2]=s[_+2],w[_+3]=s[_+3];if(I==16)for(_=0;_<F;_++)w[_]=s[_<<1]}else if(R==2){const F=v.tabs.tRNS;if(F==null){if(I==8)for(_=0;_<g;_++){var O=3*_;S[_]=255<<24|s[O+2]<<16|s[O+1]<<8|s[O]}if(I==16)for(_=0;_<g;_++)O=6*_,S[_]=255<<24|s[O+4]<<16|s[O+2]<<8|s[O]}else{var h=F[0];const L=F[1],j=F[2];if(I==8)for(_=0;_<g;_++){var p=_<<2;O=3*_,S[_]=255<<24|s[O+2]<<16|s[O+1]<<8|s[O],s[O]==h&&s[O+1]==L&&s[O+2]==j&&(w[p+3]=0)}if(I==16)for(_=0;_<g;_++)p=_<<2,O=6*_,S[_]=255<<24|s[O+4]<<16|s[O+2]<<8|s[O],U(s,O)==h&&U(s,O+2)==L&&U(s,O+4)==j&&(w[p+3]=0)}}else if(R==3){const F=v.tabs.PLTE,L=v.tabs.tRNS,j=L?L.length:0;if(I==1)for(var k=0;k<l;k++){var x=k*M,D=k*o;for(_=0;_<o;_++){p=D+_<<2;var C=3*(T=s[x+(_>>3)]>>7-((7&_)<<0)&1);w[p]=F[C],w[p+1]=F[C+1],w[p+2]=F[C+2],w[p+3]=T<j?L[T]:255}}if(I==2)for(k=0;k<l;k++)for(x=k*M,D=k*o,_=0;_<o;_++)p=D+_<<2,C=3*(T=s[x+(_>>2)]>>6-((3&_)<<1)&3),w[p]=F[C],w[p+1]=F[C+1],w[p+2]=F[C+2],w[p+3]=T<j?L[T]:255;if(I==4)for(k=0;k<l;k++)for(x=k*M,D=k*o,_=0;_<o;_++)p=D+_<<2,C=3*(T=s[x+(_>>1)]>>4-((1&_)<<2)&15),w[p]=F[C],w[p+1]=F[C+1],w[p+2]=F[C+2],w[p+3]=T<j?L[T]:255;if(I==8)for(_=0;_<g;_++){var T;p=_<<2,C=3*(T=s[_]),w[p]=F[C],w[p+1]=F[C+1],w[p+2]=F[C+2],w[p+3]=T<j?L[T]:255}}else if(R==4){if(I==8)for(_=0;_<g;_++){p=_<<2;var A=s[m=_<<1];w[p]=A,w[p+1]=A,w[p+2]=A,w[p+3]=s[m+1]}if(I==16)for(_=0;_<g;_++){var m;p=_<<2,A=s[m=_<<2],w[p]=A,w[p+1]=A,w[p+2]=A,w[p+3]=s[m+2]}}else if(R==0)for(h=v.tabs.tRNS?v.tabs.tRNS:-1,k=0;k<l;k++){const F=k*M,L=k*o;if(I==1)for(var f=0;f<o;f++){var P=(A=255*(s[F+(f>>>3)]>>>7-(7&f)&1))==255*h?0:255;S[L+f]=P<<24|A<<16|A<<8|A}else if(I==2)for(f=0;f<o;f++)P=(A=85*(s[F+(f>>>2)]>>>6-((3&f)<<1)&3))==85*h?0:255,S[L+f]=P<<24|A<<16|A<<8|A;else if(I==4)for(f=0;f<o;f++)P=(A=17*(s[F+(f>>>1)]>>>4-((1&f)<<2)&15))==17*h?0:255,S[L+f]=P<<24|A<<16|A<<8|A;else if(I==8)for(f=0;f<o;f++)P=(A=s[F+f])==h?0:255,S[L+f]=P<<24|A<<16|A<<8|A;else if(I==16)for(f=0;f<o;f++)A=s[F+(f<<1)],P=U(s,F+(f<<1))==h?0:255,S[L+f]=P<<24|A<<16|A<<8|A}return w}function n(s,o,l,v){const g=a(s),E=Math.ceil(l*g/8),M=new Uint8Array((E+1+s.interlace)*v);return o=s.tabs.CgBI?t(o,M):r(o,M),s.interlace==0?o=c(o,s,0,l,v):s.interlace==1&&(o=function(S,R){const I=R.width,U=R.height,_=a(R),O=_>>3,h=Math.ceil(I*_/8),p=new Uint8Array(U*h);let k=0;const x=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],T=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const f=C[A],P=T[A];let F=0,L=0,j=x[A];for(;j<U;)j+=f,L++;let B=D[A];for(;B<I;)B+=P,F++;const Z=Math.ceil(F*_/8);c(S,R,k,F,L);let z=0,H=x[A];for(;H<U;){let q=D[A],G=k+z*Z<<3;for(;q<I;){var m;if(_==1&&(m=(m=S[G>>3])>>7-(7&G)&1,p[H*h+(q>>3)]|=m<<7-((7&q)<<0)),_==2&&(m=(m=S[G>>3])>>6-(7&G)&3,p[H*h+(q>>2)]|=m<<6-((3&q)<<1)),_==4&&(m=(m=S[G>>3])>>4-(7&G)&15,p[H*h+(q>>1)]|=m<<4-((1&q)<<2)),_>=8){const $=H*h+q*O;for(let X=0;X<O;X++)p[$+X]=S[(G>>3)+X]}G+=_,q+=P}z++,H+=f}F*L!=0&&(k+=L*(1+Z)),A+=1}return p}(o,s)),o}function r(s,o){return t(new Uint8Array(s.buffer,2,s.length-6),o)}var t=function(){const s={H:{}};return s.H.N=function(o,l){const v=Uint8Array;let g,E,M=0,w=0,S=0,R=0,I=0,U=0,_=0,O=0,h=0;if(o[0]==3&&o[1]==0)return l||new v(0);const p=s.H,k=p.b,x=p.e,D=p.R,C=p.n,T=p.A,A=p.Z,m=p.m,f=l==null;for(f&&(l=new v(o.length>>>2<<5));M==0;)if(M=k(o,h,1),w=k(o,h+1,2),h+=3,w!=0){if(f&&(l=s.H.W(l,O+(1<<17))),w==1&&(g=m.J,E=m.h,U=511,_=31),w==2){S=x(o,h,5)+257,R=x(o,h+5,5)+1,I=x(o,h+10,4)+4,h+=14;let F=1;for(var P=0;P<38;P+=2)m.Q[P]=0,m.Q[P+1]=0;for(P=0;P<I;P++){const B=x(o,h+3*P,3);m.Q[1+(m.X[P]<<1)]=B,B>F&&(F=B)}h+=3*I,C(m.Q,F),T(m.Q,F,m.u),g=m.w,E=m.d,h=D(m.u,(1<<F)-1,S+R,o,h,m.v);const L=p.V(m.v,0,S,m.C);U=(1<<L)-1;const j=p.V(m.v,S,R,m.D);_=(1<<j)-1,C(m.C,L),T(m.C,L,g),C(m.D,j),T(m.D,j,E)}for(;;){const F=g[A(o,h)&U];h+=15&F;const L=F>>>4;if(!(L>>>8))l[O++]=L;else{if(L==256)break;{let j=O+L-254;if(L>264){const q=m.q[L-257];j=O+(q>>>3)+x(o,h,7&q),h+=7&q}const B=E[A(o,h)&_];h+=15&B;const Z=B>>>4,z=m.c[Z],H=(z>>>4)+k(o,h,15&z);for(h+=15&z;O<j;)l[O]=l[O++-H],l[O]=l[O++-H],l[O]=l[O++-H],l[O]=l[O++-H];O=j}}}}else{7&h&&(h+=8-(7&h));const F=4+(h>>>3),L=o[F-4]|o[F-3]<<8;f&&(l=s.H.W(l,O+L)),l.set(new v(o.buffer,o.byteOffset+F,L),O),h=F+L<<3,O+=L}return l.length==O?l:l.slice(0,O)},s.H.W=function(o,l){const v=o.length;if(l<=v)return o;const g=new Uint8Array(v<<1);return g.set(o,0),g},s.H.R=function(o,l,v,g,E,M){const w=s.H.e,S=s.H.Z;let R=0;for(;R<v;){const I=o[S(g,E)&l];E+=15&I;const U=I>>>4;if(U<=15)M[R]=U,R++;else{let _=0,O=0;U==16?(O=3+w(g,E,2),E+=2,_=M[R-1]):U==17?(O=3+w(g,E,3),E+=3):U==18&&(O=11+w(g,E,7),E+=7);const h=R+O;for(;R<h;)M[R]=_,R++}}return E},s.H.V=function(o,l,v,g){let E=0,M=0;const w=g.length>>>1;for(;M<v;){const S=o[M+l];g[M<<1]=0,g[1+(M<<1)]=S,S>E&&(E=S),M++}for(;M<w;)g[M<<1]=0,g[1+(M<<1)]=0,M++;return E},s.H.n=function(o,l){const v=s.H.m,g=o.length;let E,M,w,S;const R=v.j;for(var I=0;I<=l;I++)R[I]=0;for(I=1;I<g;I+=2)R[o[I]]++;const U=v.K;for(E=0,R[0]=0,M=1;M<=l;M++)E=E+R[M-1]<<1,U[M]=E;for(w=0;w<g;w+=2)S=o[w+1],S!=0&&(o[w]=U[S],U[S]++)},s.H.A=function(o,l,v){const g=o.length,E=s.H.m.r;for(let M=0;M<g;M+=2)if(o[M+1]!=0){const w=M>>1,S=o[M+1],R=w<<4|S,I=l-S;let U=o[M]<<I;const _=U+(1<<I);for(;U!=_;)v[E[U]>>>15-l]=R,U++}},s.H.l=function(o,l){const v=s.H.m.r,g=15-l;for(let E=0;E<o.length;E+=2){const M=o[E]<<l-o[E+1];o[E]=v[M]>>>g}},s.H.M=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8},s.H.I=function(o,l,v){v<<=7&l;const g=l>>>3;o[g]|=v,o[g+1]|=v>>>8,o[g+2]|=v>>>16},s.H.e=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8)>>>(7&l)&(1<<v)-1},s.H.b=function(o,l,v){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)&(1<<v)-1},s.H.Z=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16)>>>(7&l)},s.H.i=function(o,l){return(o[l>>>3]|o[1+(l>>>3)]<<8|o[2+(l>>>3)]<<16|o[3+(l>>>3)]<<24)>>>(7&l)},s.H.m=function(){const o=Uint16Array,l=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new l(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new l(286),Y:new l(30),a:new l(19),t:new l(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=s.H.m;for(var l=0;l<32768;l++){let g=l;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,o.r[l]=(g>>>16|g<<16)>>>17}function v(g,E,M){for(;E--!=0;)g.push(0,M)}for(l=0;l<32;l++)o.q[l]=o.S[l]<<3|o.T[l],o.c[l]=o.p[l]<<4|o.z[l];v(o._,144,8),v(o._,112,9),v(o._,24,7),v(o._,8,8),s.H.n(o._,9),s.H.A(o._,9,o.J),s.H.l(o._,9),v(o.$,32,5),s.H.n(o.$,5),s.H.A(o.$,5,o.h),s.H.l(o.$,5),v(o.Q,19,0),v(o.C,286,0),v(o.D,30,0),v(o.v,320,0)}(),s.H.N}();function a(s){return[1,null,3,1,2,null,4][s.ctype]*s.depth}function c(s,o,l,v,g){let E=a(o);const M=Math.ceil(v*E/8);let w,S;E=Math.ceil(E/8);let R=s[l],I=0;if(R>1&&(s[l]=[0,0,1][R-2]),R==3)for(I=E;I<M;I++)s[I+1]=s[I+1]+(s[I+1-E]>>>1)&255;for(let U=0;U<g;U++)if(w=l+U*M,S=w+U+1,R=s[S-1],I=0,R==0)for(;I<M;I++)s[w+I]=s[S+I];else if(R==1){for(;I<E;I++)s[w+I]=s[S+I];for(;I<M;I++)s[w+I]=s[S+I]+s[w+I-E]}else if(R==2)for(;I<M;I++)s[w+I]=s[S+I]+s[w+I-M];else if(R==3){for(;I<E;I++)s[w+I]=s[S+I]+(s[w+I-M]>>>1);for(;I<M;I++)s[w+I]=s[S+I]+(s[w+I-M]+s[w+I-E]>>>1)}else{for(;I<E;I++)s[w+I]=s[S+I]+u(0,s[w+I-M],0);for(;I<M;I++)s[w+I]=s[S+I]+u(s[w+I-E],s[w+I-M],s[w+I-E-M])}return s}function u(s,o,l){const v=s+o-l,g=v-s,E=v-o,M=v-l;return g*g<=E*E&&g*g<=M*M?s:E*E<=M*M?o:l}function y(s,o,l){l.width=i.readUint(s,o),o+=4,l.height=i.readUint(s,o),o+=4,l.depth=s[o],o++,l.ctype=s[o],o++,l.compress=s[o],o++,l.filter=s[o],o++,l.interlace=s[o],o++}function b(s,o,l,v,g,E,M,w,S){const R=Math.min(o,g),I=Math.min(l,E);let U=0,_=0;for(let A=0;A<I;A++)for(let m=0;m<R;m++)if(M>=0&&w>=0?(U=A*o+m<<2,_=(w+A)*g+M+m<<2):(U=(-w+A)*o-M+m<<2,_=A*g+m<<2),S==0)v[_]=s[U],v[_+1]=s[U+1],v[_+2]=s[U+2],v[_+3]=s[U+3];else if(S==1){var O=s[U+3]*.00392156862745098,h=s[U]*O,p=s[U+1]*O,k=s[U+2]*O,x=v[_+3]*(1/255),D=v[_]*x,C=v[_+1]*x,T=v[_+2]*x;const f=1-O,P=O+x*f,F=P==0?0:1/P;v[_+3]=255*P,v[_+0]=(h+D*f)*F,v[_+1]=(p+C*f)*F,v[_+2]=(k+T*f)*F}else if(S==2)O=s[U+3],h=s[U],p=s[U+1],k=s[U+2],x=v[_+3],D=v[_],C=v[_+1],T=v[_+2],O==x&&h==D&&p==C&&k==T?(v[_]=0,v[_+1]=0,v[_+2]=0,v[_+3]=0):(v[_]=h,v[_+1]=p,v[_+2]=k,v[_+3]=O);else if(S==3){if(O=s[U+3],h=s[U],p=s[U+1],k=s[U+2],x=v[_+3],D=v[_],C=v[_+1],T=v[_+2],O==x&&h==D&&p==C&&k==T)continue;if(O<220&&x>20)return!1}return!0}return{decode:function(o){const l=new Uint8Array(o);let v=8;const g=i,E=g.readUshort,M=g.readUint,w={tabs:{},frames:[]},S=new Uint8Array(l.length);let R,I=0,U=0;const _=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(l[O]!=_[O])throw"The input is not a PNG file!";for(;v<l.length;){const A=g.readUint(l,v);v+=4;const m=g.readASCII(l,v,4);if(v+=4,m=="IHDR")y(l,v,w);else if(m=="iCCP"){for(var h=v;l[h]!=0;)h++;g.readASCII(l,v,h-v),l[h+1];const f=l.slice(h+2,v+A);let P=null;try{P=r(f)}catch{P=t(f)}w.tabs[m]=P}else if(m=="CgBI")w.tabs[m]=l.slice(v,v+4);else if(m=="IDAT"){for(O=0;O<A;O++)S[I+O]=l[v+O];I+=A}else if(m=="acTL")w.tabs[m]={num_frames:M(l,v),num_plays:M(l,v+4)},R=new Uint8Array(l.length);else if(m=="fcTL"){U!=0&&((T=w.frames[w.frames.length-1]).data=n(w,R.slice(0,U),T.rect.width,T.rect.height),U=0);const f={x:M(l,v+12),y:M(l,v+16),width:M(l,v+4),height:M(l,v+8)};let P=E(l,v+22);P=E(l,v+20)/(P==0?100:P);const F={rect:f,delay:Math.round(1e3*P),dispose:l[v+24],blend:l[v+25]};w.frames.push(F)}else if(m=="fdAT"){for(O=0;O<A-4;O++)R[U+O]=l[v+O+4];U+=A-4}else if(m=="pHYs")w.tabs[m]=[g.readUint(l,v),g.readUint(l,v+4),l[v+8]];else if(m=="cHRM")for(w.tabs[m]=[],O=0;O<8;O++)w.tabs[m].push(g.readUint(l,v+4*O));else if(m=="tEXt"||m=="zTXt"){w.tabs[m]==null&&(w.tabs[m]={});var p=g.nextZero(l,v),k=g.readASCII(l,v,p-v),x=v+A-p-1;if(m=="tEXt")C=g.readASCII(l,p+1,x);else{var D=r(l.slice(p+2,p+2+x));C=g.readUTF8(D,0,D.length)}w.tabs[m][k]=C}else if(m=="iTXt"){w.tabs[m]==null&&(w.tabs[m]={}),p=0,h=v,p=g.nextZero(l,h),k=g.readASCII(l,h,p-h);const f=l[h=p+1];var C;l[h+1],h+=2,p=g.nextZero(l,h),g.readASCII(l,h,p-h),h=p+1,p=g.nextZero(l,h),g.readUTF8(l,h,p-h),x=A-((h=p+1)-v),f==0?C=g.readUTF8(l,h,x):(D=r(l.slice(h,h+x)),C=g.readUTF8(D,0,D.length)),w.tabs[m][k]=C}else if(m=="PLTE")w.tabs[m]=g.readBytes(l,v,A);else if(m=="hIST"){const f=w.tabs.PLTE.length/3;for(w.tabs[m]=[],O=0;O<f;O++)w.tabs[m].push(E(l,v+2*O))}else if(m=="tRNS")w.ctype==3?w.tabs[m]=g.readBytes(l,v,A):w.ctype==0?w.tabs[m]=E(l,v):w.ctype==2&&(w.tabs[m]=[E(l,v),E(l,v+2),E(l,v+4)]);else if(m=="gAMA")w.tabs[m]=g.readUint(l,v)/1e5;else if(m=="sRGB")w.tabs[m]=l[v];else if(m=="bKGD")w.ctype==0||w.ctype==4?w.tabs[m]=[E(l,v)]:w.ctype==2||w.ctype==6?w.tabs[m]=[E(l,v),E(l,v+2),E(l,v+4)]:w.ctype==3&&(w.tabs[m]=l[v]);else if(m=="IEND")break;v+=A,g.readUint(l,v),v+=4}var T;return U!=0&&((T=w.frames[w.frames.length-1]).data=n(w,R.slice(0,U),T.rect.width,T.rect.height)),w.data=n(w,S,w.width,w.height),delete w.compress,delete w.interlace,delete w.filter,w},toRGBA8:function(o){const l=o.width,v=o.height;if(o.tabs.acTL==null)return[e(o.data,l,v,o).buffer];const g=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const E=l*v*4,M=new Uint8Array(E),w=new Uint8Array(E),S=new Uint8Array(E);for(let I=0;I<o.frames.length;I++){const U=o.frames[I],_=U.rect.x,O=U.rect.y,h=U.rect.width,p=U.rect.height,k=e(U.data,h,p,o);if(I!=0)for(var R=0;R<E;R++)S[R]=M[R];if(U.blend==0?b(k,h,p,M,l,v,_,O,0):U.blend==1&&b(k,h,p,M,l,v,_,O,1),g.push(M.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)b(w,h,p,M,l,v,_,O,0);else if(U.dispose==2)for(R=0;R<E;R++)M[R]=S[R]}}return g},_paeth:u,_copyTile:b,_bin:i}}();(function(){const{_copyTile:i}=nt,{_bin:e}=nt,n=nt._paeth;var r={table:function(){const h=new Uint32Array(256);for(let p=0;p<256;p++){let k=p;for(let x=0;x<8;x++)1&k?k=3988292384^k>>>1:k>>>=1;h[p]=k}return h}(),update(h,p,k,x){for(let D=0;D<x;D++)h=r.table[255&(h^p[k+D])]^h>>>8;return h},crc:(h,p,k)=>4294967295^r.update(4294967295,h,p,k)};function t(h,p,k,x){p[k]+=h[0]*x>>4,p[k+1]+=h[1]*x>>4,p[k+2]+=h[2]*x>>4,p[k+3]+=h[3]*x>>4}function a(h){return Math.max(0,Math.min(255,h))}function c(h,p){const k=h[0]-p[0],x=h[1]-p[1],D=h[2]-p[2],C=h[3]-p[3];return k*k+x*x+D*D+C*C}function u(h,p,k,x,D,C,T){T==null&&(T=1);const A=x.length,m=[];for(var f=0;f<A;f++){const H=x[f];m.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(f=0;f<A;f++){let H=4294967295;for(var P=0,F=0;F<A;F++){var L=c(m[f],m[F]);F!=f&&L<H&&(H=L,P=F)}}const j=new Uint32Array(D.buffer),B=new Int16Array(p*k*4),Z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(f=0;f<Z.length;f++)Z[f]=255*((Z[f]+.5)/16-.5);for(let H=0;H<k;H++)for(let q=0;q<p;q++){var z;f=4*(H*p+q),T!=2?z=[a(h[f]+B[f]),a(h[f+1]+B[f+1]),a(h[f+2]+B[f+2]),a(h[f+3]+B[f+3])]:(L=Z[4*(3&H)+(3&q)],z=[a(h[f]+L),a(h[f+1]+L),a(h[f+2]+L),a(h[f+3]+L)]),P=0;let G=16777215;for(F=0;F<A;F++){const ie=c(z,m[F]);ie<G&&(G=ie,P=F)}const $=m[P],X=[z[0]-$[0],z[1]-$[1],z[2]-$[2],z[3]-$[3]];T==1&&(q!=p-1&&t(X,B,f+4,7),H!=k-1&&(q!=0&&t(X,B,f+4*p-4,3),t(X,B,f+4*p,5),q!=p-1&&t(X,B,f+4*p+4,1))),C[f>>2]=P,j[f>>2]=x[P]}}function y(h,p,k,x,D){D==null&&(D={});const{crc:C}=r,T=e.writeUint,A=e.writeUshort,m=e.writeASCII;let f=8;const P=h.frames.length>1;let F,L=!1,j=33+(P?20:0);if(D.sRGB!=null&&(j+=13),D.pHYs!=null&&(j+=21),D.iCCP!=null&&(F=pako.deflate(D.iCCP),j+=21+F.length+4),h.ctype==3){for(var B=h.plte.length,Z=0;Z<B;Z++)h.plte[Z]>>>24!=255&&(L=!0);j+=8+3*B+4+(L?8+1*B+4:0)}for(var z=0;z<h.frames.length;z++)P&&(j+=38),j+=($=h.frames[z]).cimg.length+12,z!=0&&(j+=4);j+=12;const H=new Uint8Array(j),q=[137,80,78,71,13,10,26,10];for(Z=0;Z<8;Z++)H[Z]=q[Z];if(T(H,f,13),f+=4,m(H,f,"IHDR"),f+=4,T(H,f,p),f+=4,T(H,f,k),f+=4,H[f]=h.depth,f++,H[f]=h.ctype,f++,H[f]=0,f++,H[f]=0,f++,H[f]=0,f++,T(H,f,C(H,f-17,17)),f+=4,D.sRGB!=null&&(T(H,f,1),f+=4,m(H,f,"sRGB"),f+=4,H[f]=D.sRGB,f++,T(H,f,C(H,f-5,5)),f+=4),D.iCCP!=null){const X=13+F.length;T(H,f,X),f+=4,m(H,f,"iCCP"),f+=4,m(H,f,"ICC profile"),f+=11,f+=2,H.set(F,f),f+=F.length,T(H,f,C(H,f-(X+4),X+4)),f+=4}if(D.pHYs!=null&&(T(H,f,9),f+=4,m(H,f,"pHYs"),f+=4,T(H,f,D.pHYs[0]),f+=4,T(H,f,D.pHYs[1]),f+=4,H[f]=D.pHYs[2],f++,T(H,f,C(H,f-13,13)),f+=4),P&&(T(H,f,8),f+=4,m(H,f,"acTL"),f+=4,T(H,f,h.frames.length),f+=4,T(H,f,D.loop!=null?D.loop:0),f+=4,T(H,f,C(H,f-12,12)),f+=4),h.ctype==3){for(T(H,f,3*(B=h.plte.length)),f+=4,m(H,f,"PLTE"),f+=4,Z=0;Z<B;Z++){const X=3*Z,ie=h.plte[Z],ce=255&ie,te=ie>>>8&255,se=ie>>>16&255;H[f+X+0]=ce,H[f+X+1]=te,H[f+X+2]=se}if(f+=3*B,T(H,f,C(H,f-3*B-4,3*B+4)),f+=4,L){for(T(H,f,B),f+=4,m(H,f,"tRNS"),f+=4,Z=0;Z<B;Z++)H[f+Z]=h.plte[Z]>>>24&255;f+=B,T(H,f,C(H,f-B-4,B+4)),f+=4}}let G=0;for(z=0;z<h.frames.length;z++){var $=h.frames[z];P&&(T(H,f,26),f+=4,m(H,f,"fcTL"),f+=4,T(H,f,G++),f+=4,T(H,f,$.rect.width),f+=4,T(H,f,$.rect.height),f+=4,T(H,f,$.rect.x),f+=4,T(H,f,$.rect.y),f+=4,A(H,f,x[z]),f+=2,A(H,f,1e3),f+=2,H[f]=$.dispose,f++,H[f]=$.blend,f++,T(H,f,C(H,f-30,30)),f+=4);const X=$.cimg;T(H,f,(B=X.length)+(z==0?0:4)),f+=4;const ie=f;m(H,f,z==0?"IDAT":"fdAT"),f+=4,z!=0&&(T(H,f,G++),f+=4),H.set(X,f),f+=B,T(H,f,C(H,ie,f-ie)),f+=4}return T(H,f,0),f+=4,m(H,f,"IEND"),f+=4,T(H,f,C(H,f-4,4)),f+=4,H.buffer}function b(h,p,k){for(let x=0;x<h.frames.length;x++){const D=h.frames[x];D.rect.width;const C=D.rect.height,T=new Uint8Array(C*D.bpl+C);D.cimg=v(D.img,C,D.bpp,D.bpl,T,p,k)}}function s(h,p,k,x,D){const C=D[0],T=D[1],A=D[2],m=D[3],f=D[4],P=D[5];let F=6,L=8,j=255;for(var B=0;B<h.length;B++){const oe=new Uint8Array(h[B]);for(var Z=oe.length,z=0;z<Z;z+=4)j&=oe[z+3]}const H=j!=255,q=function(ue,pe,me,Ie,ye,de){const be=[];for(var xe=0;xe<ue.length;xe++){const Ye=new Uint8Array(ue[xe]),Ke=new Uint32Array(Ye.buffer);var Ce;let qe=0,Ve=0,Xe=pe,pt=me,It=Ie?1:0;if(xe!=0){const Bt=de||Ie||xe==1||be[xe-2].dispose!=0?1:2;let $t=0,Gt=1e9;for(let Mt=0;Mt<Bt;Mt++){var We=new Uint8Array(ue[xe-1-Mt]);const Zt=new Uint32Array(ue[xe-1-Mt]);let st=pe,rt=me,yt=-1,gt=-1;for(let _t=0;_t<me;_t++)for(let bt=0;bt<pe;bt++)Ke[Ue=_t*pe+bt]!=Zt[Ue]&&(bt<st&&(st=bt),bt>yt&&(yt=bt),_t<rt&&(rt=_t),_t>gt&&(gt=_t));yt==-1&&(st=rt=yt=gt=0),ye&&((1&st)==1&&st--,(1&rt)==1&&rt--);const Lt=(yt-st+1)*(gt-rt+1);Lt<Gt&&(Gt=Lt,$t=Mt,qe=st,Ve=rt,Xe=yt-st+1,pt=gt-rt+1)}We=new Uint8Array(ue[xe-1-$t]),$t==1&&(be[xe-1].dispose=2),Ce=new Uint8Array(Xe*pt*4),i(We,pe,me,Ce,Xe,pt,-qe,-Ve,0),It=i(Ye,pe,me,Ce,Xe,pt,-qe,-Ve,3)?1:0,It==1?l(Ye,pe,me,Ce,{x:qe,y:Ve,width:Xe,height:pt}):i(Ye,pe,me,Ce,Xe,pt,-qe,-Ve,0)}else Ce=Ye.slice(0);be.push({rect:{x:qe,y:Ve,width:Xe,height:pt},img:Ce,blend:It,dispose:0})}if(Ie)for(xe=0;xe<be.length;xe++){if((ht=be[xe]).blend==1)continue;const Ye=ht.rect,Ke=be[xe-1].rect,qe=Math.min(Ye.x,Ke.x),Ve=Math.min(Ye.y,Ke.y),Xe={x:qe,y:Ve,width:Math.max(Ye.x+Ye.width,Ke.x+Ke.width)-qe,height:Math.max(Ye.y+Ye.height,Ke.y+Ke.height)-Ve};be[xe-1].dispose=1,xe-1!=0&&o(ue,pe,me,be,xe-1,Xe,ye),o(ue,pe,me,be,xe,Xe,ye)}let it=0;if(ue.length!=1)for(var Ue=0;Ue<be.length;Ue++){var ht;it+=(ht=be[Ue]).rect.width*ht.rect.height}return be}(h,p,k,C,T,A),G={},$=[],X=[];if(x!=0){const oe=[];for(z=0;z<q.length;z++)oe.push(q[z].img.buffer);const ue=function(ye){let de=0;for(var be=0;be<ye.length;be++)de+=ye[be].byteLength;const xe=new Uint8Array(de);let Ce=0;for(be=0;be<ye.length;be++){const We=new Uint8Array(ye[be]),it=We.length;for(let Ue=0;Ue<it;Ue+=4){let ht=We[Ue],Ye=We[Ue+1],Ke=We[Ue+2];const qe=We[Ue+3];qe==0&&(ht=Ye=Ke=0),xe[Ce+Ue]=ht,xe[Ce+Ue+1]=Ye,xe[Ce+Ue+2]=Ke,xe[Ce+Ue+3]=qe}Ce+=it}return xe.buffer}(oe),pe=E(ue,x);for(z=0;z<pe.plte.length;z++)$.push(pe.plte[z].est.rgba);let me=0;for(z=0;z<q.length;z++){const Ie=(ce=q[z]).img.length;var ie=new Uint8Array(pe.inds.buffer,me>>2,Ie>>2);X.push(ie);const ye=new Uint8Array(pe.abuf,me,Ie);P&&u(ce.img,ce.rect.width,ce.rect.height,$,ye,ie),ce.img.set(ye),me+=Ie}}else for(B=0;B<q.length;B++){var ce=q[B];const oe=new Uint32Array(ce.img.buffer);var te=ce.rect.width;for(Z=oe.length,ie=new Uint8Array(Z),X.push(ie),z=0;z<Z;z++){const ue=oe[z];if(z!=0&&ue==oe[z-1])ie[z]=ie[z-1];else if(z>te&&ue==oe[z-te])ie[z]=ie[z-te];else{let pe=G[ue];if(pe==null&&(G[ue]=pe=$.length,$.push(ue),$.length>=300))break;ie[z]=pe}}}const se=$.length;for(se<=256&&f==0&&(L=se<=2?1:se<=4?2:se<=16?4:8,L=Math.max(L,m)),B=0;B<q.length;B++){(ce=q[B]).rect.x,ce.rect.y,te=ce.rect.width;const oe=ce.rect.height;let ue=ce.img;new Uint32Array(ue.buffer);let pe=4*te,me=4;if(se<=256&&f==0){pe=Math.ceil(L*te/8);var ne=new Uint8Array(pe*oe);const Ie=X[B];for(let ye=0;ye<oe;ye++){z=ye*pe;const de=ye*te;if(L==8)for(var le=0;le<te;le++)ne[z+le]=Ie[de+le];else if(L==4)for(le=0;le<te;le++)ne[z+(le>>1)]|=Ie[de+le]<<4-4*(1&le);else if(L==2)for(le=0;le<te;le++)ne[z+(le>>2)]|=Ie[de+le]<<6-2*(3&le);else if(L==1)for(le=0;le<te;le++)ne[z+(le>>3)]|=Ie[de+le]<<7-1*(7&le)}ue=ne,F=3,me=1}else if(H==0&&q.length==1){ne=new Uint8Array(te*oe*3);const Ie=te*oe;for(z=0;z<Ie;z++){const ye=3*z,de=4*z;ne[ye]=ue[de],ne[ye+1]=ue[de+1],ne[ye+2]=ue[de+2]}ue=ne,F=2,me=3,pe=3*te}ce.img=ue,ce.bpl=pe,ce.bpp=me}return{ctype:F,depth:L,plte:$,frames:q}}function o(h,p,k,x,D,C,T){const A=Uint8Array,m=Uint32Array,f=new A(h[D-1]),P=new m(h[D-1]),F=D+1<h.length?new A(h[D+1]):null,L=new A(h[D]),j=new m(L.buffer);let B=p,Z=k,z=-1,H=-1;for(let G=0;G<C.height;G++)for(let $=0;$<C.width;$++){const X=C.x+$,ie=C.y+G,ce=ie*p+X,te=j[ce];te==0||x[D-1].dispose==0&&P[ce]==te&&(F==null||F[4*ce+3]!=0)||(X<B&&(B=X),X>z&&(z=X),ie<Z&&(Z=ie),ie>H&&(H=ie))}z==-1&&(B=Z=z=H=0),T&&((1&B)==1&&B--,(1&Z)==1&&Z--),C={x:B,y:Z,width:z-B+1,height:H-Z+1};const q=x[D];q.rect=C,q.blend=1,q.img=new Uint8Array(C.width*C.height*4),x[D-1].dispose==0?(i(f,p,k,q.img,C.width,C.height,-C.x,-C.y,0),l(L,p,k,q.img,C)):i(L,p,k,q.img,C.width,C.height,-C.x,-C.y,0)}function l(h,p,k,x,D){i(h,p,k,x,D.width,D.height,-D.x,-D.y,2)}function v(h,p,k,x,D,C,T){const A=[];let m,f=[0,1,2,3,4];C!=-1?f=[C]:(p*x>5e5||k==1)&&(f=[0]),T&&(m={level:0});const P=uo;for(var F=0;F<f.length;F++){for(let B=0;B<p;B++)g(D,h,B,x,k,f[F]);A.push(P.deflate(D,m))}let L,j=1e9;for(F=0;F<A.length;F++)A[F].length<j&&(L=F,j=A[F].length);return A[L]}function g(h,p,k,x,D,C){const T=k*x;let A=T+k;if(h[A]=C,A++,C==0)if(x<500)for(var m=0;m<x;m++)h[A+m]=p[T+m];else h.set(new Uint8Array(p.buffer,T,x),A);else if(C==1){for(m=0;m<D;m++)h[A+m]=p[T+m];for(m=D;m<x;m++)h[A+m]=p[T+m]-p[T+m-D]+256&255}else if(k==0){for(m=0;m<D;m++)h[A+m]=p[T+m];if(C==2)for(m=D;m<x;m++)h[A+m]=p[T+m];if(C==3)for(m=D;m<x;m++)h[A+m]=p[T+m]-(p[T+m-D]>>1)+256&255;if(C==4)for(m=D;m<x;m++)h[A+m]=p[T+m]-n(p[T+m-D],0,0)+256&255}else{if(C==2)for(m=0;m<x;m++)h[A+m]=p[T+m]+256-p[T+m-x]&255;if(C==3){for(m=0;m<D;m++)h[A+m]=p[T+m]+256-(p[T+m-x]>>1)&255;for(m=D;m<x;m++)h[A+m]=p[T+m]+256-(p[T+m-x]+p[T+m-D]>>1)&255}if(C==4){for(m=0;m<D;m++)h[A+m]=p[T+m]+256-n(0,p[T+m-x],0)&255;for(m=D;m<x;m++)h[A+m]=p[T+m]+256-n(p[T+m-D],p[T+m-x],p[T+m-D-x])&255}}}function E(h,p){const k=new Uint8Array(h),x=k.slice(0),D=new Uint32Array(x.buffer),C=M(x,p),T=C[0],A=C[1],m=k.length,f=new Uint8Array(m>>2);let P;if(k.length<2e7)for(var F=0;F<m;F+=4)P=w(T,L=k[F]*(1/255),j=k[F+1]*(1/255),B=k[F+2]*(1/255),Z=k[F+3]*(1/255)),f[F>>2]=P.ind,D[F>>2]=P.est.rgba;else for(F=0;F<m;F+=4){var L=k[F]*.00392156862745098,j=k[F+1]*(1/255),B=k[F+2]*(1/255),Z=k[F+3]*(1/255);for(P=T;P.left;)P=S(P.est,L,j,B,Z)<=0?P.left:P.right;f[F>>2]=P.ind,D[F>>2]=P.est.rgba}return{abuf:x.buffer,inds:f,plte:A}}function M(h,p,k){k==null&&(k=1e-4);const x=new Uint32Array(h.buffer),D={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};D.bst=U(h,D.i0,D.i1),D.est=_(D.bst);const C=[D];for(;C.length<p;){let A=0,m=0;for(var T=0;T<C.length;T++)C[T].est.L>A&&(A=C[T].est.L,m=T);if(A<k)break;const f=C[m],P=R(h,x,f.i0,f.i1,f.est.e,f.est.eMq255);if(f.i0>=P||f.i1<=P){f.est.L=0;continue}const F={i0:f.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};F.bst=U(h,F.i0,F.i1),F.est=_(F.bst);const L={i0:P,i1:f.i1,bst:null,est:null,tdst:0,left:null,right:null};for(L.bst={R:[],m:[],N:f.bst.N-F.bst.N},T=0;T<16;T++)L.bst.R[T]=f.bst.R[T]-F.bst.R[T];for(T=0;T<4;T++)L.bst.m[T]=f.bst.m[T]-F.bst.m[T];L.est=_(L.bst),f.left=F,f.right=L,C[m]=F,C.push(L)}for(C.sort((A,m)=>m.bst.N-A.bst.N),T=0;T<C.length;T++)C[T].ind=T;return[D,C]}function w(h,p,k,x,D){if(h.left==null)return h.tdst=function(F,L,j,B,Z){const z=L-F[0],H=j-F[1],q=B-F[2],G=Z-F[3];return z*z+H*H+q*q+G*G}(h.est.q,p,k,x,D),h;const C=S(h.est,p,k,x,D);let T=h.left,A=h.right;C>0&&(T=h.right,A=h.left);const m=w(T,p,k,x,D);if(m.tdst<=C*C)return m;const f=w(A,p,k,x,D);return f.tdst<m.tdst?f:m}function S(h,p,k,x,D){const{e:C}=h;return C[0]*p+C[1]*k+C[2]*x+C[3]*D-h.eMq}function R(h,p,k,x,D,C){for(x-=4;k<x;){for(;I(h,k,D)<=C;)k+=4;for(;I(h,x,D)>C;)x-=4;if(k>=x)break;const T=p[k>>2];p[k>>2]=p[x>>2],p[x>>2]=T,k+=4,x-=4}for(;I(h,k,D)>C;)k-=4;return k+4}function I(h,p,k){return h[p]*k[0]+h[p+1]*k[1]+h[p+2]*k[2]+h[p+3]*k[3]}function U(h,p,k){const x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=[0,0,0,0],C=k-p>>2;for(let T=p;T<k;T+=4){const A=h[T]*.00392156862745098,m=h[T+1]*(1/255),f=h[T+2]*(1/255),P=h[T+3]*(1/255);D[0]+=A,D[1]+=m,D[2]+=f,D[3]+=P,x[0]+=A*A,x[1]+=A*m,x[2]+=A*f,x[3]+=A*P,x[5]+=m*m,x[6]+=m*f,x[7]+=m*P,x[10]+=f*f,x[11]+=f*P,x[15]+=P*P}return x[4]=x[1],x[8]=x[2],x[9]=x[6],x[12]=x[3],x[13]=x[7],x[14]=x[11],{R:x,m:D,N:C}}function _(h){const{R:p}=h,{m:k}=h,{N:x}=h,D=k[0],C=k[1],T=k[2],A=k[3],m=x==0?0:1/x,f=[p[0]-D*D*m,p[1]-D*C*m,p[2]-D*T*m,p[3]-D*A*m,p[4]-C*D*m,p[5]-C*C*m,p[6]-C*T*m,p[7]-C*A*m,p[8]-T*D*m,p[9]-T*C*m,p[10]-T*T*m,p[11]-T*A*m,p[12]-A*D*m,p[13]-A*C*m,p[14]-A*T*m,p[15]-A*A*m],P=f,F=O;let L=[Math.random(),Math.random(),Math.random(),Math.random()],j=0,B=0;if(x!=0)for(let z=0;z<16&&(L=F.multVec(P,L),B=Math.sqrt(F.dot(L,L)),L=F.sml(1/B,L),!(z!=0&&Math.abs(B-j)<1e-9));z++)j=B;const Z=[D*m,C*m,T*m,A*m];return{Cov:f,q:Z,e:L,L:j,eMq255:F.dot(F.sml(255,Z),L),eMq:F.dot(L,Z),rgba:(Math.round(255*Z[3])<<24|Math.round(255*Z[2])<<16|Math.round(255*Z[1])<<8|Math.round(255*Z[0])<<0)>>>0}}var O={multVec:(h,p)=>[h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],h[4]*p[0]+h[5]*p[1]+h[6]*p[2]+h[7]*p[3],h[8]*p[0]+h[9]*p[1]+h[10]*p[2]+h[11]*p[3],h[12]*p[0]+h[13]*p[1]+h[14]*p[2]+h[15]*p[3]],dot:(h,p)=>h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3],sml:(h,p)=>[h*p[0],h*p[1],h*p[2],h*p[3]]};nt.encode=function(p,k,x,D,C,T,A){D==null&&(D=0),A==null&&(A=!1);const m=s(p,k,x,D,[!1,!1,!1,0,A,!1]);return b(m,-1),y(m,k,x,C,T)},nt.encodeLL=function(p,k,x,D,C,T,A,m){const f={ctype:0+(D==1?0:2)+(C==0?0:4),depth:T,frames:[]},P=(D+C)*T,F=P*k;for(let L=0;L<p.length;L++)f.frames.push({rect:{x:0,y:0,width:k,height:x},img:new Uint8Array(p[L]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(F/8)});return b(f,0,!0),y(f,k,x,A,m)},nt.encode.compress=s,nt.encode.dither=u,nt.quantize=E,nt.quantize.getKDtree=M,nt.quantize.getNearest=w})();const Nn={toArrayBuffer(i,e){const n=i.width,r=i.height,t=n<<2,a=i.getContext("2d").getImageData(0,0,n,r),c=new Uint32Array(a.data.buffer),u=(32*n+31)/32<<2,y=u*r,b=122+y,s=new ArrayBuffer(b),o=new DataView(s),l=1<<20;let v,g,E,M,w=l,S=0,R=0,I=0;function U(h){o.setUint16(R,h,!0),R+=2}function _(h){o.setUint32(R,h,!0),R+=4}function O(h){R+=h}U(19778),_(b),O(4),_(122),_(108),_(n),_(-r>>>0),U(1),U(32),_(3),_(y),_(2835),_(2835),O(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function h(){for(;S<r&&w>0;){for(M=122+S*u,v=0;v<t;)w--,g=c[I++],E=g>>>24,o.setUint32(M+v,g<<8|E),v+=4;S++}I<c.length?(w=l,setTimeout(h,Nn._dly)):e(s)}()},toBlob(i,e){this.toArrayBuffer(i,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Ge={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},fo={[Ge.CHROME]:16384,[Ge.FIREFOX]:11180,[Ge.DESKTOP_SAFARI]:16384,[Ge.IE]:8192,[Ge.IOS]:4096,[Ge.ETC]:8192};const Wr=typeof window<"u",Yn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dr=Wr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),vo=(Wr||Yn)&&(dr&&dr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Ln=(Wr||Yn)&&(dr&&dr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function qr(i,e,n=Date.now()){return new Promise(r=>{const t=i.split(","),a=t[0].match(/:(.*?);/)[1],c=globalThis.atob(t[1]);let u=c.length;const y=new Uint8Array(u);for(;u--;)y[u]=c.charCodeAt(u);const b=new Blob([y],{type:a});b.name=e,b.lastModified=n,r(b)})}function Hn(i){return new Promise((e,n)=>{const r=new Ln;r.onload=()=>e(r.result),r.onerror=t=>n(t),r.readAsDataURL(i)})}function zn(i){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=t=>n(t),r.src=i})}function St(){if(St.cachedResult!==void 0)return St.cachedResult;let i=Ge.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?i=Ge.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?i=Ge.IOS:/Safari/i.test(e)?i=Ge.DESKTOP_SAFARI:/Firefox/i.test(e)?i=Ge.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(i=Ge.IE),St.cachedResult=i,St.cachedResult}function Wn(i,e){const n=St(),r=fo[n];let t=i,a=e,c=t*a;const u=t>a?a/t:t/a;for(;c>r*r;){const y=(r+t)/2,b=(r+a)/2;y<b?(a=b,t=b*u):(a=y*u,t=y),c=t*a}return{width:t,height:a}}function mr(i,e){let n,r;try{if(n=new OffscreenCanvas(i,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=i,n.height=e,[n,r]}function qn(i,e){const{width:n,height:r}=Wn(i.width,i.height),[t,a]=mr(n,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,t.width,t.height)),a.drawImage(i,0,0,t.width,t.height),t}function rr(){return rr.cachedResult!==void 0||(rr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),rr.cachedResult}function fr(i,e={}){return new Promise(function(n,r){let t,a;var c=function(){try{return a=qn(t,e.fileType||i.type),n([t,a])}catch(y){return r(y)}},u=function(y){try{var b=function(s){try{throw s}catch(o){return r(o)}};try{let s;return Hn(i).then(function(o){try{return s=o,zn(s).then(function(l){try{return t=l,function(){try{return c()}catch(v){return r(v)}}()}catch(v){return b(v)}},b)}catch(l){return b(l)}},b)}catch(s){b(s)}}catch(s){return r(s)}};try{if(rr()||[Ge.DESKTOP_SAFARI,Ge.MOBILE_SAFARI].includes(St()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(i).then(function(y){try{return t=y,c()}catch{return u()}},u)}catch{u()}})}function vr(i,e,n,r,t=1){return new Promise(function(a,c){let u;if(e==="image/png"){let b,s,o;return b=i.getContext("2d"),{data:s}=b.getImageData(0,0,i.width,i.height),o=nt.encode([s.buffer],i.width,i.height,4096*t),u=new Blob([o],{type:e}),u.name=n,u.lastModified=r,y.call(this)}{let b=function(){return y.call(this)};if(e==="image/bmp")return new Promise(s=>Nn.toBlob(i,s)).then(function(s){try{return u=s,u.name=n,u.lastModified=r,b.call(this)}catch(o){return c(o)}}.bind(this),c);{let s=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&i instanceof OffscreenCanvas)return i.convertToBlob({type:e,quality:t}).then(function(o){try{return u=o,u.name=n,u.lastModified=r,s.call(this)}catch(l){return c(l)}}.bind(this),c);{let o;return o=i.toDataURL(e,t),qr(o,n,r).then(function(l){try{return u=l,s.call(this)}catch(v){return c(v)}}.bind(this),c)}}}function y(){return a(u)}})}function ct(i){i.width=0,i.height=0}function zt(){return new Promise(function(i,e){let n,r,t,a;return zt.cachedResult!==void 0?i(zt.cachedResult):qr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return n=c,fr(n).then(function(u){try{return r=u[1],vr(r,n.type,n.name,n.lastModified).then(function(y){try{return t=y,ct(r),fr(t).then(function(b){try{return a=b[0],zt.cachedResult=a.width===1&&a.height===2,i(zt.cachedResult)}catch(s){return e(s)}},e)}catch(b){return e(b)}},e)}catch(y){return e(y)}},e)}catch(u){return e(u)}},e)})}function Bn(i){return new Promise((e,n)=>{const r=new Ln;r.onload=t=>{const a=new DataView(t.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const c=a.byteLength;let u=2;for(;u<c;){if(a.getUint16(u+2,!1)<=8)return e(-1);const y=a.getUint16(u,!1);if(u+=2,y==65505){if(a.getUint32(u+=2,!1)!=1165519206)return e(-1);const b=a.getUint16(u+=6,!1)==18761;u+=a.getUint32(u+4,b);const s=a.getUint16(u,b);u+=2;for(let o=0;o<s;o++)if(a.getUint16(u+12*o,b)==274)return e(a.getUint16(u+12*o+8,b))}else{if((65280&y)!=65280)break;u+=a.getUint16(u,!1)}}return e(-1)},r.onerror=t=>n(t),r.readAsArrayBuffer(i)})}function $n(i,e){const{width:n}=i,{height:r}=i,{maxWidthOrHeight:t}=e;let a,c=i;return isFinite(t)&&(n>t||r>t)&&([c,a]=mr(n,r),n>r?(c.width=t,c.height=r/n*t):(c.width=n/r*t,c.height=t),a.drawImage(i,0,0,c.width,c.height),ct(i)),c}function Qn(i,e){const{width:n}=i,{height:r}=i,[t,a]=mr(n,r);switch(e>4&&e<9?(t.width=r,t.height=n):(t.width=n,t.height=r),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(i,0,0,n,r),ct(i),t}function hn(i,e,n=0){return new Promise(function(r,t){let a,c,u,y,b,s,o,l,v,g,E,M,w,S,R,I,U,_,O,h;function p(x=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=x,e.onProgress(Math.min(a,100))}function k(x){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(x,a),100),e.onProgress(a)}return a=n,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,p(),fr(i,e).then(function(x){try{return[,y]=x,p(),b=$n(y,e),p(),new Promise(function(D,C){var T;if(!(T=e.exifOrientation))return Bn(i).then(function(m){try{return T=m,A.call(this)}catch(f){return C(f)}}.bind(this),C);function A(){return D(T)}return A.call(this)}).then(function(D){try{return s=D,p(),zt().then(function(C){try{return o=C?b:Qn(b,s),p(),l=e.initialQuality||1,v=e.fileType||i.type,vr(o,v,i.name,i.lastModified,l).then(function(T){try{{let m=function(){if(c--&&(R>u||R>w)){let P,F;return P=h?.95*O.width:O.width,F=h?.95*O.height:O.height,[U,_]=mr(P,F),_.drawImage(O,0,0,P,F),l*=v==="image/png"?.85:.95,vr(U,v,i.name,i.lastModified,l).then(function(L){try{return I=L,ct(O),O=U,R=I.size,k(Math.min(99,Math.floor((S-R)/(S-u)*100))),m}catch(j){return t(j)}},t)}return[1]},f=function(){return ct(O),ct(U),ct(b),ct(o),ct(y),k(100),r(I)};if(g=T,p(),E=g.size>u,M=g.size>i.size,!E&&!M)return k(100),r(g);var A;return w=i.size,S=g.size,R=S,O=o,h=!e.alwaysKeepResolution&&E,(A=function(P){for(;P;){if(P.then)return void P.then(A,t);try{if(P.pop){if(P.length)return P.pop()?f.call(this):P;P=m}else P=P.call(this)}catch(F){return t(F)}}}.bind(this))(m)}}catch(m){return t(m)}}.bind(this),t)}catch(T){return t(T)}}.bind(this),t)}catch(C){return t(C)}}.bind(this),t)}catch(D){return t(D)}}.bind(this),t)})}const mo=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Dr;function ho(i,e){return new Promise((n,r)=>{Dr||(Dr=function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))}(mo));const t=new Worker(Dr);t.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)t.terminate();else if(c.data.progress===void 0){if(c.data.error)return r(new Error(c.data.error)),void t.terminate();n(c.data.file),t.terminate()}else e.onProgress(c.data.progress)}),t.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),t.terminate()}),t.postMessage({file:i,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function He(i,e){return new Promise(function(n,r){let t,a,c,u,y,b;if(t={...e},c=0,{onProgress:u}=t,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof t.useWebWorker!="boolean"||t.useWebWorker,delete t.useWebWorker,t.onProgress=v=>{c=v,typeof u=="function"&&u(c)},!(i instanceof Blob||i instanceof vo))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(i.type))return r(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||b)return hn(i,t).then(function(v){try{return a=v,l.call(this)}catch(g){return r(g)}}.bind(this),r);var s=function(){try{return l.call(this)}catch(v){return r(v)}}.bind(this),o=function(v){try{return hn(i,t).then(function(g){try{return a=g,s()}catch(E){return r(E)}},r)}catch(g){return r(g)}};try{return t.libURL=t.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ho(i,t).then(function(v){try{return a=v,s()}catch{return o()}},o)}catch{o()}function l(){try{a.name=i.name,a.lastModified=i.lastModified}catch{}try{t.preserveExif&&i.type==="image/jpeg"&&(!t.fileType||t.fileType&&t.fileType===i.type)&&(a=Un(i,a))}catch{}return n(a)}})}He.getDataUrlFromFile=Hn,He.getFilefromDataUrl=qr,He.loadImage=zn,He.drawImageInCanvas=qn,He.drawFileInCanvas=fr,He.canvasToFile=vr,He.getExifOrientation=Bn,He.handleMaxWidthOrHeight=$n,He.followExifOrientation=Qn,He.cleanupCanvasMemory=ct,He.isAutoOrientationInBrowser=zt,He.approximateBelowMaximumCanvasSizeOfBrowser=Wn,He.copyExifWithoutOrientation=Un,He.getBrowserName=St,He.version="2.0.2";const po={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function yo(i,e,n={},r){const t={...po,...n};try{let a=i;if(i.type.startsWith("image/")&&i.size>t.compressionThresholdMB*1024*1024){r?.("Compressing image...");try{const y=await He(i,{maxSizeMB:t.maxSizeMB,maxWidthOrHeight:t.maxWidthOrHeight,initialQuality:t.initialQuality,useWebWorker:t.useWebWorker});a=y;const b=(i.size/(1024*1024)).toFixed(2),s=(y.size/(1024*1024)).toFixed(2),o=((1-y.size/i.size)*100).toFixed(0);console.log(`Image compressed: ${b}MB → ${s}MB (${o}% smaller)`)}catch(y){console.warn("Image compression failed, uploading original:",y)}}return r?.("Uploading file..."),{success:!0,attachment:await Cn(a,e)}}catch(a){return console.error("File upload failed:",a),{success:!1,error:a instanceof Error?a.message:"Upload failed"}}}async function go(i){try{const e=Lr(i.url);return await Rn(e),!0}catch(e){return console.error("Failed to remove attachment:",e),!1}}function _o(i,e,n){return i.map(r=>r.id===e?{...r,name:n}:r)}function bo(i,e=5){const n=i.type.startsWith("image/"),r=e*1024*1024;if(!n&&i.size>r){const t=(i.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${e}MB (selected file is ${t}MB)`}}return{valid:!0}}function wo(i){return{uploadAttachment:(e,n,r)=>yo(e,n,i,r),removeAttachment:go,updateAttachmentName:_o,validateFile:bo}}function pn(i,e){const[n,r]=e.split(":").map(Number);let t=Ri(i,n);return t=Fi(t,r),t}function yn(i){return Array.from(new Set(i)).sort((e,n)=>e-n)}function xo(i,e){if(e.includes(i))return 0;const n=e.find(r=>r>i);return n!==void 0?n-i:7-i+e[0]}function Do(i,e,n){const r=new Date(i),t=vt(r,Ne),a=t.getDay(),c=xo(a,n);if(c===0)return{start_time:i,end_time:e};const u=Pt(t,c),y=Tt(u,Ne);let b=e;if(e){const s=vt(new Date(e),Ne),o=Pt(s,c);b=Tt(o,Ne).toISOString()}return{start_time:y.toISOString(),end_time:b}}function jn({eventItem:i,dateInput:e,startTimeInput:n,endTimeInput:r,attachments:t,isRecurring:a,recurrenceFrequency:c,recurrenceInterval:u,recurringDays:y,recurrenceEndDate:b,hasEndDate:s,monthlyType:o}){const l=i.category?{category:i.category}:void 0,v={title:i.title,description:i.description,location:i.location,is_public:i.is_public??!0,event_type:i.event_type,meta_data:l,attachments:t.length>0?t:null};if(i.event_type!=="calendar_event")return{...v,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const g=e?lr(e,"yyyy-MM-dd",new Date):new Date;let E,M;if(i.is_all_day){const S=Tt(g,Ne);E=S.toISOString(),M=S.toISOString()}else{const S=new Date(g.getTime()),R=new Date(g.getTime()),I=n?pn(S,n):g,U=r?pn(R,r):g;E=Tt(I,Ne).toISOString(),M=Tt(U,Ne).toISOString()}const w={...v,start_time:E,end_time:M,is_all_day:i.is_all_day};if(a&&w.start_time){if(c==="weekly"&&y.length>0){const R=yn(y),I=Do(w.start_time,w.end_time,R);w.start_time=I.start_time,w.end_time=I.end_time}if(c==="daily"||c==="yearly"||c==="weekly"&&y.length>0||c==="monthly"){const{recurrence_rule:R,recurrence_end_date:I}=zr({frequency:c,interval:u,recurringDays:c==="weekly"?yn(y):[],recurrenceEndDate:b,hasEndDate:s,monthlyType:o,startTime:w.start_time});w.recurrence_rule=R,w.recurrence_end_date=I}else w.recurrence_rule=void 0,w.recurrence_end_date=void 0}else w.recurrence_rule=void 0,w.recurrence_end_date=void 0;return w}async function ko({id:i,...e}){const n=jn(e);return i?{action:"update",event:await At(i,n)}:{action:"create",event:await Nr(n)}}async function Eo(i){await Yr(i)}function To({event:i,newDate:e}){const n=i.start_time?new Date(i.start_time):new Date,r=i.end_time?new Date(i.end_time):new Date,[t,a,c]=e.split("-").map(Number),u=new Date(n);u.setFullYear(t,a-1,c);const y=new Date(r);return y.setFullYear(t,a-1,c),{...i,id:void 0,title:`CLONED - ${i.title}`,start_time:u.toISOString(),end_time:y.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function Ao(i,e,n){const r=await Yt(i);if(!r)throw new Error("Event not found");const t=r.recurrence_exceptions||[];t.includes(e)||t.push(e);const a=r.recurrence_overrides||{};a[e]={title:n.title,description:n.description,location:n.location,start_time:n.start_time,end_time:n.end_time,is_all_day:n.is_all_day,meta_data:n.meta_data},await At(i,{recurrence_exceptions:t,recurrence_overrides:a})}async function Io(i,e,n){const r=await Yt(i);if(!r||!r.recurrence_rule||!r.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:t,generateRecurrenceRule:a}=await Er(async()=>{const{parseRecurrenceRule:R,generateRecurrenceRule:I}=await Promise.resolve().then(()=>Mr);return{parseRecurrenceRule:R,generateRecurrenceRule:I}},void 0,import.meta.url),c=t(r.recurrence_rule,r.recurrence_end_date);if(!c)throw new Error("Failed to parse recurrence rule");const u=Me(new Date(r.start_time),"yyyy-MM-dd"),y=lr(e,"yyyy-MM-dd",new Date),b=lr(u,"yyyy-MM-dd",new Date);if(y<=b)return await At(i,n),i;const s=Pt(y,-1),o=Me(s,"yyyy-MM-dd"),{recurrence_rule:l,recurrence_end_date:v}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:o,hasEndDate:!0,monthlyType:c.monthlyType,startTime:r.start_time});await At(i,{recurrence_rule:l,recurrence_end_date:v});const g=c.hasEndDate?c.recurrenceEndDate:"",{recurrence_rule:E,recurrence_end_date:M}=a({frequency:c.frequency,interval:c.interval,recurringDays:c.recurringDays,recurrenceEndDate:g,hasEndDate:c.hasEndDate,monthlyType:c.monthlyType,startTime:n.start_time||r.start_time}),w={...n,recurrence_rule:E,recurrence_end_date:M};return(await Nr(w))?.id||0}async function Mo(i,e){const n=await Yt(i);if(!n)throw new Error("Event not found");const r={title:e.title,description:e.description,location:e.location,event_type:e.event_type,meta_data:e.meta_data,attachments:e.attachments,is_all_day:e.is_all_day,start_time:n.start_time,end_time:n.end_time,recurrence_rule:n.recurrence_rule,recurrence_end_date:n.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await At(i,r)}async function Co(i,e){const n=await Yt(i);if(!n)throw new Error("Event not found");const r=n.recurrence_exceptions||[];r.includes(e)||r.push(e);const t=n.recurrence_overrides||{};t[e]&&delete t[e],await At(i,{recurrence_exceptions:r,recurrence_overrides:t})}async function Ro(i,e){const n=await Yt(i);if(!n||!n.recurrence_rule||!n.start_time)throw new Error("Event not found or is not recurring");const r=lr(e,"yyyy-MM-dd",new Date),t=Pt(r,-1),a=Me(t,"yyyy-MM-dd"),{parseRecurrenceRule:c}=await Er(async()=>{const{parseRecurrenceRule:o}=await Promise.resolve().then(()=>Mr);return{parseRecurrenceRule:o}},void 0,import.meta.url),u=c(n.recurrence_rule,n.recurrence_end_date);if(!u)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:y}=await Er(async()=>{const{generateRecurrenceRule:o}=await Promise.resolve().then(()=>Mr);return{generateRecurrenceRule:o}},void 0,import.meta.url),{recurrence_rule:b,recurrence_end_date:s}=y({frequency:u.frequency,interval:u.interval,recurringDays:u.recurringDays,recurrenceEndDate:a,hasEndDate:!0,monthlyType:u.monthlyType,startTime:n.start_time});await At(i,{recurrence_rule:b,recurrence_end_date:s})}async function Fo(i){await Yr(i)}function Oo(){return{saveEvent:ko,deleteEventById:Eo,cloneEventForDate:To,buildEventPayload:jn,saveSingleInstance:Ao,saveFutureInstances:Io,saveAllInstances:Mo,deleteSingleInstance:Co,deleteFutureInstances:Ro,deleteAllInstances:Fo}}var So=re('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Po=re('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Uo=re("<!> <!>",1),No=re('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Yo=re("<span>Save</span>"),Lo=re("<span>Create</span>"),Ho=re('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),zo=re('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <button class="btn btn-primary position-relative"><!> <!></button></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div></div> <!> <!>',1);function kl(i,e){et(e,!1);const n=()=>tr(l,"$validationErrors",r),[r,t]=gn(),a=he(),c=he(),u=he();let y=ve(e,"name",8,""),b=ve(e,"drawerId",8,""),s=ve(e,"eventItem",12,Ea);const{actions:{reload:o}}=Fn(),{validationErrors:l,validate:v,getErrorMessages:g,clearErrors:E}=so(),{parseRecurrenceRule:M}=Pn(),{uploadAttachment:w,removeAttachment:S,updateAttachmentName:R,validateFile:I}=wo(),{saveEvent:U,deleteEventById:_,cloneEventForDate:O,buildEventPayload:h,saveSingleInstance:p,saveFutureInstances:k,saveAllInstances:x,deleteSingleInstance:D,deleteFutureInstances:C,deleteAllInstances:T}=Oo();let A=he(!1),m=he(!1),f=he(!1),P=he("weekly"),F=he(1),L=he([]),j=he(""),B=he(!0),Z=he("date"),z=he([]),H=he(!1),q=he(!1),G=he(void 0),$=he(void 0),X=he(!1),ie=he(null),ce=he(!1),te=he(null),se=he(0),ne=he({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),le=he({message:"",type:"info"}),oe=he(""),ue=he(""),pe=he(""),me=he({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"});const Ie=(ae,K)=>ae.length===K.length&&ae.every((ke,Ae)=>ke===K[Ae]),ye=()=>{const ae=`[data-bs-target="#${b()}"]`,K=document.querySelector(ae);K&&K.click()},de=(ae,K=0,ke="info")=>{yr(le,d(le).message=ae),yr(le,d(le).type=ke),K&&setTimeout(()=>{yr(le,d(le).message="")},K)},be=async ae=>{const K=ae.detail;if(!K)return;const ke=I(K);if(!ke.valid){de(ke.error??"Invalid file selected",7e3,"danger");return}W(m,!0);try{const Ae=await w(K,d(a)??"temp",Ct=>de(Ct));if(!Ae.success||!Ae.attachment)throw new Error(Ae.error??"Upload failed");W(z,[...d(z),Ae.attachment]),W(H,!0),de("File uploaded!",3e3,"success")}catch(Ae){console.error("File upload failed:",Ae),de("Failed to upload file. Please try again.",7e3,"danger")}finally{W(m,!1)}},xe=ae=>{const{attachment:K,newName:ke}=ae.detail;W(z,R(d(z),K.id,ke)),W(H,!0),de("Attachment name updated!",3e3,"success")},Ce=async ae=>{const K=ae.detail;if(K){W(m,!0);try{if(!await S(K))throw new Error("Failed to remove attachment");W(z,d(z).filter(Ae=>Ae.id!==K.id)),W(H,!0),de("Attachment removed!",3e3,"success")}catch(ke){console.error("Failed to remove attachment:",ke),de("Failed to remove attachment. Please try again.",7e3,"danger")}finally{W(m,!1)}}},We=async()=>{if(!d(a)){de("ID is not defined",0,"danger");return}try{await _(d(a)),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{W(A,!1),W(ne,{...s(),id:d(a)}),de("Event Deleted",3e3,"success"),ye()},800)}catch(ae){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{W(A,!1),console.error("Delete failed:",ae),de("Failed to delete event. Please try again.",7e3,"danger")},800)}},it=()=>!!s().recurrence_rule,Ue=async()=>{const ae=d(a)||s().meta_data?.recurring_parent_id;if(ae&&d(q)&&d($)&&d(G)){if(W(te,null),W(ce,!0),await new Promise(K=>{const ke=setInterval(()=>{d(ce)||(clearInterval(ke),K())},50)}),!d(te))return;W(A,!0);try{d(te)==="single"?await D(ae,d(G)):d(te)==="future"?await C(ae,d(G)):d(te)==="all"&&await T(ae),await o(),wt("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{W(A,!1),W(ne,{...s(),id:d(a)}),de("Event Deleted",3e3,"success"),ye()},800)}catch(K){wt("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{W(A,!1),console.error("Delete failed:",K),de("Failed to delete event. Please try again.",7e3,"danger")},800)}}else W(A,!0),Ca({title:"Delete Confirmation",message:it()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:K=>{K?We():W(A,!1)}})},ht=ae=>{if(d(a))try{const K=O({event:s(),newDate:ae});wt("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),de("Event cloned. Review and click Create to save.",5e3,"success"),s(K),W(oe,K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),W(ue,K.start_time?Me(new Date(K.start_time),"HH:mm"):""),W(pe,K.end_time?Me(new Date(K.end_time),"HH:mm"):""),W(z,[]),W(f,!1),W(L,[]),W(j,""),W(B,!0),W(H,!0),W(se,void 0),W(ne,{...K}),W(me,{dateInput:d(oe),startTimeInput:d(ue),endTimeInput:d(pe),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(K){console.error("Clone failed:",K),de("Failed to clone event. Please try again.",7e3,"danger")}},Ye=()=>{ao({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:d(oe),callback:(ae,K)=>{ae&&K&&ht(K)}})},Ke=async()=>{if(d(a)&&!d(u)){de("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await v({title:s().title,event_type:s().event_type,category:s().category??"",description:s().description,location:s().location,is_all_day:s().is_all_day,dateInput:d(oe),startTimeInput:d(ue),endTimeInput:d(pe),isRecurring:d(f),recurrenceFrequency:d(P),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(j):void 0,hasEndDate:d(B)})){const ke=g();ke.length&&de(ke.join(". ")+".  Please address accordingly.",0,"danger");return}const K=d(a)||s().meta_data?.recurring_parent_id;if(K&&d(q)&&d($)&&d(G)){if(W(ie,null),W(X,!0),await new Promise(Ae=>{const Ct=setInterval(()=>{d(X)||(clearInterval(Ct),Ae())},100)}),!d(ie)||d(A))return;de("Saving ..."),W(A,!0);const ke=h({eventItem:s(),dateInput:d(oe),startTimeInput:d(ue),endTimeInput:d(pe),attachments:d(z),isRecurring:d(c)&&d(f),recurrenceFrequency:d(P),recurrenceInterval:d(F),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(j):"",hasEndDate:d(B),monthlyType:d(Z)});try{let Ae;d(ie)==="single"?await p(K,d(G),ke):d(ie)==="future"?Ae=await k(K,d(G),ke):d(ie)==="all"&&await x(K,ke),await o(),await da(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),W(A,!1),Ae&&s({...s(),id:Ae}),s(s().attachments=d(z),!0),W(ne,{...s(),id:Ae||K}),W(H,!1),de("Saved",3e3,"success"),ye()}catch(Ae){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{W(A,!1),console.error("Save failed:",Ae),de("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(d(A))return;de("Saving ..."),W(A,!0);try{const ke=await U({id:d(a),eventItem:s(),dateInput:d(oe),startTimeInput:d(ue),endTimeInput:d(pe),attachments:d(z),isRecurring:d(c)&&d(f),recurrenceFrequency:d(P),recurrenceInterval:d(F),recurringDays:d(f)?d(L):[],recurrenceEndDate:d(f)?d(j):"",hasEndDate:d(B),monthlyType:d(Z)});ke.event&&s({...s(),...ke.event}),s(s().attachments=d(z),!0),await o(),wt("set_calendar_event_success","interaction",`Set Calendar Event Successful ${s().title}`,1),setTimeout(()=>{W(A,!1),W(ne,{...s(),id:d(a)}),W(H,!1),de("Saved",3e3,"success"),ye()},800)}catch(ke){wt("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${s().title}`,1),setTimeout(()=>{W(A,!1),console.error("Save failed:",ke),de("Failed to save event. Please try again.",7e3,"danger")},800)}}};Le(()=>ee(s()),()=>{W(a,s().id)}),Le(()=>ee(s()),()=>{W(c,s().event_type==="calendar_event")}),Le(()=>(d(c),d(f),d(L),d(j)),()=>{!d(c)&&(d(f)||d(L).length>0||d(j))&&(W(f,!1),W(P,"weekly"),W(F,1),W(L,[]),W(j,""),W(B,!0),W(Z,"date"))}),Le(()=>(ee(s()),d(se),d(ne),d(H),d(oe),d(ue),d(pe),d(f),d(P),d(F),d(L),d(j),d(B),d(Z)),()=>{if(s()?.id!==d(se)||s()?.start_time!==d(ne).start_time||s()?.meta_data?.recurring_instance_index!==d(ne).meta_data?.recurring_instance_index){W(A,!0);const ae=d(H),K=s();setTimeout(()=>{const ke=K.event_type==="calendar_event";if(W(oe,ke&&K.start_time?Me(new Date(K.start_time),"yyyy-MM-dd"):""),W(ue,ke&&K.start_time?Me(new Date(K.start_time),"HH:mm"):""),W(pe,ke&&K.end_time?Me(new Date(K.end_time),"HH:mm"):""),ae||W(z,K.attachments?[...K.attachments]:[]),K.meta_data?.recurring_instance&&K.start_time?(W($,K.recurrence_rule),W(q,!0),W(G,Me(new Date(K.start_time),"yyyy-MM-dd"))):(W($,void 0),W(q,!1),W(G,void 0)),K.recurrence_rule){const Ae=M(K.recurrence_rule,K.recurrence_end_date);Ae?(W(f,!0),W(P,Ae.frequency),W(F,Ae.interval),W(L,Ae.recurringDays),W(j,Ae.recurrenceEndDate),W(B,Ae.hasEndDate),W(Z,Ae.monthlyType)):(W(f,!1),W(P,"weekly"),W(F,1),W(L,[]),W(j,""),W(B,!0),W(Z,"date"))}else W(f,!1),W(P,"weekly"),W(F,1),W(L,[]),W(j,""),W(B,!0),W(Z,"date");W(se,K.id),W(ne,{...K}),W(A,!1),W(H,!1),E(),W(me,{dateInput:d(oe),startTimeInput:d(ue),endTimeInput:d(pe),isRecurring:d(f),recurrenceFrequency:d(P),recurrenceInterval:d(F),recurringDays:[...d(L)],recurrenceEndDate:d(j),hasEndDate:d(B),monthlyType:d(Z)})},200)}}),Le(()=>(d(ne),ee(s()),d(z),d(oe),d(me),d(ue),d(pe),d(f),d(P),d(F),d(L),d(j),d(B),d(Z)),()=>{W(u,d(ne).title!==s().title||d(ne).start_time!==s().start_time||d(ne).end_time!==s().end_time||d(ne).description!==s().description||d(ne).location!==s().location||d(ne).is_public!==s().is_public||d(ne).category!==s().category||d(ne).is_all_day!==s().is_all_day||JSON.stringify(d(z))!==JSON.stringify(s().attachments||[])||d(ne).recurrence_rule!==s().recurrence_rule||d(ne).recurrence_end_date!==s().recurrence_end_date||d(oe)!==d(me).dateInput||d(ue)!==d(me).startTimeInput||d(pe)!==d(me).endTimeInput||d(f)!==d(me).isRecurring||d(P)!==d(me).recurrenceFrequency||d(F)!==d(me).recurrenceInterval||!Ie(d(L),d(me).recurringDays)||d(j)!==d(me).recurrenceEndDate||d(B)!==d(me).hasEndDate||d(Z)!==d(me).monthlyType)}),Ut(),at();var qe=zo(),Ve=ze(qe),Xe=Y(Ve);{var pt=ae=>{var K=So();J(ae,K)};fe(Xe,ae=>{ee(s()),d(a),V(()=>s().recurrence_rule&&d(a))&&ae(pt)})}var It=Q(Xe,2),Bt=Y(It),$t=Q(Y(Bt),2);{var Gt=ae=>{var K=Po();ge(()=>K.disabled=d(A)||d(m)),we("click",K,Ye),J(ae,K)};fe($t,ae=>{d(a)&&ae(Gt)})}N(Bt);var Mt=Q(Bt,2);{let ae=Ht(()=>d(A)||d(m));As(Mt,{get disabled(){return d(ae)},get name(){return y()},get validationErrors(){return n()},get title(){return s().title},set title(K){s(s().title=K,!0)},get eventType(){return s().event_type},set eventType(K){s(s().event_type=K,!0)},get category(){return s().category},set category(K){s(s().category=K,!0)},get isPublic(){return s().is_public},set isPublic(K){s(s().is_public=K,!0)},get description(){return s().description},set description(K){s(s().description=K,!0)},$$legacy:!0})}N(It);var Zt=Q(It,2);{var st=ae=>{var K=Uo(),ke=ze(K);{let Ct=Ht(()=>d(A)||d(m));Os(ke,{get disabled(){return d(Ct)},get name(){return y()},get validationErrors(){return n()},get dateInput(){return d(oe)},set dateInput(Oe){W(oe,Oe)},get startTimeInput(){return d(ue)},set startTimeInput(Oe){W(ue,Oe)},get endTimeInput(){return d(pe)},set endTimeInput(Oe){W(pe,Oe)},get isAllDay(){return s().is_all_day},set isAllDay(Oe){s(s().is_all_day=Oe,!0)},$$legacy:!0})}var Ae=Q(ke,2);{let Ct=Ht(()=>d(A)||d(m));zs(Ae,{get disabled(){return d(Ct)},get name(){return y()},get validationErrors(){return n()},get isRecurring(){return d(f)},set isRecurring(Oe){W(f,Oe)},get recurrenceFrequency(){return d(P)},set recurrenceFrequency(Oe){W(P,Oe)},get recurrenceInterval(){return d(F)},set recurrenceInterval(Oe){W(F,Oe)},get recurringDays(){return d(L)},set recurringDays(Oe){W(L,Oe)},get recurrenceEndDate(){return d(j)},set recurrenceEndDate(Oe){W(j,Oe)},get monthlyType(){return d(Z)},set monthlyType(Oe){W(Z,Oe)},get dateInput(){return d(oe)},set dateInput(Oe){W(oe,Oe)},$$legacy:!0})}J(ae,K)};fe(Zt,ae=>{d(c)&&ae(st)})}var rt=Q(Zt,2);{let ae=Ht(()=>d(A)||d(m));Vs(rt,{get attachments(){return d(z)},get uploadingFile(){return d(m)},get disabled(){return d(ae)},$$events:{upload:be,edit:xe,remove:Ce}})}var yt=Q(rt,2);{let ae=Ht(()=>d(A)||d(m)),K=Ht(()=>`${y()}-location`);qs(yt,{get disabled(){return d(ae)},get name(){return d(K)},get value(){return s().location},set value(ke){s(s().location=ke,!0)},$$legacy:!0})}var gt=Q(yt,2),Lt=Y(gt),_t=Y(Lt);{var bt=ae=>{var K=No();ge(()=>K.disabled=d(A)||d(m)),we("click",K,Ue),J(ae,K)};fe(_t,ae=>{(d(a)||d(q))&&ae(bt)})}N(Lt);var Br=Q(Lt,2),hr=Y(Br),Kt=Q(hr,2),$r=Y(Kt);{var Gn=ae=>{var K=Yo();J(ae,K)},Zn=ae=>{var K=Lo();J(ae,K)};fe($r,ae=>{d(a)||d(q)?ae(Gn):ae(Zn,!1)})}var Kn=Q($r,2);{var Vn=ae=>{var K=Ho();J(ae,K)};fe(Kn,ae=>{d(u)&&ae(Vn)})}N(Kt),N(Br),N(gt);var Qr=Q(gt,2),Vt=Y(Qr),Xn=Y(Vt,!0);N(Vt);var pr=Q(Vt,2);let jr;var Jn=Y(pr);xn(Jn,{size:"xs"}),N(pr),N(Qr),N(Ve);var Gr=Q(Ve,2);{var ea=ae=>{Js(ae,{get eventTitle(){return ee(s()),V(()=>s().title)},get occurrenceDate(){return d(G)},callback:K=>{W(ie,K),W(X,!1)}})};fe(Gr,ae=>{d(X)&&d(G)&&ae(ea)})}var ta=Q(Gr,2);{var ra=ae=>{to(ae,{get eventTitle(){return ee(s()),V(()=>s().title)},get occurrenceDate(){return d(G)},callback:K=>{W(te,K),W(ce,!1)}})};fe(ta,ae=>{d(ce)&&d(G)&&ae(ra)})}ge(()=>{hr.disabled=d(A)||d(m),Kt.disabled=d(A)||d(m),je(Vt,1,`fw-lighter fst-italic text-${d(le),V(()=>d(le).type)??""}`),_e(Xn,(d(le),V(()=>d(le).message))),jr=je(pr,1,"",null,jr,{"d-none":!d(A)})}),we("click",hr,ye),we("click",Kt,Ke),J(i,qe),tt(),t()}var Wo=re('<span class="text-muted">•</span>'),qo=re("<span> </span> <!>",1),Bo=re('<span class="text-muted">•</span>'),$o=re('<em class="small fw-lighter svelte-1bpzga2"> </em> <!>',1),Qo=re('<em class="small fw-lighter text-decoration-underline svelte-1bpzga2"><!> details</em>'),jo=re('<div class="small svelte-1bpzga2"><!></div>'),Go=re('<div class="attachment-image-container svelte-1bpzga2"><button type="button" class="attachment-image-button svelte-1bpzga2"><img class="attachment-image svelte-1bpzga2"/></button> <div class="attachment-image-label svelte-1bpzga2"><small class="text-muted"> </small></div></div>'),Zo=re('<button type="button" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Ko=re('<div class="mt-1 svelte-1bpzga2"><div class="fw-semibold small mb-1 svelte-1bpzga2">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Vo=re('<div class="details-container svelte-1bpzga2"><!> <!></div>'),Xo=re('<div class="announcement-thumbnail-container svelte-1bpzga2"><img class="announcement-thumbnail svelte-1bpzga2"/></div>'),Jo=re('<div role="button" tabindex="0" class="d-flex flex-column gap-1 svelte-1bpzga2"><div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-1bpzga2"><div class="fw-bold svelte-1bpzga2"> </div> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!></div> <!></div> <!></div></div>');function El(i,e){et(e,!1);const n=he(),r=he();let t=ve(e,"item",8),a=ve(e,"showDetails",12,!1);const c=x=>x<1024?x+" B":x<1024*1024?(x/1024).toFixed(1)+" KB":(x/(1024*1024)).toFixed(1)+" MB",u=x=>x.startsWith("image/"),y=x=>{window.open(x,"_blank")},b=()=>{d(r)&&a(!a())},s=x=>{d(r)&&(x.key==="Enter"||x.key===" ")&&b()};Le(()=>ee(t()),()=>{W(n,t().attachments&&t().attachments.length>0?t().attachments.find(x=>u(x.type)):void 0)}),Le(()=>ee(t()),()=>{W(r,!!(t().description||t().attachments&&t().attachments.length>0))}),Ut(),at();var o=Jo(),l=Y(o),v=Y(l),g=Y(v),E=Y(g,!0);N(g);var M=Q(g,2),w=Y(M);{var S=x=>{var D=qo(),C=ze(D),T=Y(C,!0);N(C);var A=Q(C,2);{var m=f=>{var P=Wo();J(f,P)};fe(A,f=>{ee(t()),V(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&f(m)})}ge((f,P)=>{je(C,1,`badge rounded-pill bg-color-${f??""}`,"svelte-1bpzga2"),_e(T,P)},[()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.color_number)),()=>(ee(kt),ee(t()),V(()=>kt(t()?.meta_data?.category)?.label))]),J(x,D)};fe(w,x=>{ee(t()),V(()=>t()?.meta_data?.category)&&x(S)})}var R=Q(w,2);{var I=x=>{var D=$o(),C=ze(D),T=Y(C,!0);N(C);var A=Q(C,2);{var m=f=>{var P=Bo();J(f,P)};fe(A,f=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&f(m)})}ge(()=>_e(T,(ee(t()),V(()=>t().location)))),J(x,D)};fe(R,x=>{ee(t()),V(()=>t().location)&&x(I)})}var U=Q(R,2);{var _=x=>{var D=Qo(),C=Y(D);{var T=m=>{var f=ar("Hide");J(m,f)},A=m=>{var f=ar("Show");J(m,f)};fe(C,m=>{a()?m(T):m(A,!1)})}Je(),N(D),J(x,D)};fe(U,x=>{ee(t()),V(()=>t().description||t().attachments&&t().attachments.length>0)&&x(_)})}N(M);var O=Q(M,2);{var h=x=>{var D=Vo(),C=Y(D);{var T=f=>{var P=jo(),F=Y(P);Dn(F,()=>(ee(t()),V(()=>t().description))),N(P),J(f,P)};fe(C,f=>{ee(t()),V(()=>t().description)&&f(T)})}var A=Q(C,2);{var m=f=>{var P=Ko(),F=Q(Y(P),2);qt(F,5,()=>(ee(t()),V(()=>t().attachments)),L=>L.id,(L,j)=>{var B=kr(),Z=ze(B);{var z=q=>{var G=Go(),$=Y(G),X=Y($);N($);var ie=Q($,2),ce=Y(ie),te=Y(ce,!0);N(ce),N(ie),N(G),ge(()=>{De($,"title",`Open ${d(j),V(()=>d(j).name)??""}`),De(X,"src",(d(j),V(()=>d(j).url))),De(X,"alt",(d(j),V(()=>d(j).name))),_e(te,(d(j),V(()=>d(j).name)))}),we("click",$,sr(()=>y(d(j).url))),J(q,G)},H=q=>{var G=Zo(),$=Q(Y(G),2),X=Y($,!0);N($);var ie=Q($,2),ce=Y(ie);N(ie),N(G),ge(te=>{De(G,"title",`Open ${d(j),V(()=>d(j).name)??""}`),_e(X,(d(j),V(()=>d(j).name))),_e(ce,`(${te??""})`)},[()=>(d(j),V(()=>c(d(j).size)))]),we("click",G,sr(()=>y(d(j).url))),J(q,G)};fe(Z,q=>{d(j),V(()=>u(d(j).type))?q(z):q(H,!1)})}J(L,B)}),N(F),N(P),J(f,P)};fe(A,f=>{ee(t()),V(()=>t().attachments&&t().attachments.length>0)&&f(m)})}N(D),J(x,D)};fe(O,x=>{a()&&x(h)})}N(v);var p=Q(v,2);{var k=x=>{var D=Xo(),C=Y(D);N(D),ge(()=>{De(C,"src",(d(n),V(()=>d(n).url))),De(C,"alt",(d(n),V(()=>d(n).name)))}),J(x,D)};fe(p,x=>{d(n)&&x(k)})}N(l),N(o),ge(()=>{_n(o,d(r)?"cursor: pointer;":""),_e(E,(ee(t()),V(()=>t().title)))}),we("keydown",o,s),we("click",o,b),J(i,o),tt()}export{kl as A,xl as E,Dl as a,El as b,Qt as c,Vi as d,Ft as e,Pt as f,Fn as g,wl as h,lr as p};
