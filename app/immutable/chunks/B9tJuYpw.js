const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{B as A,h as Lt,d as Ft,K as jn,bc as $n,L as Ht,Y as zn,ac as Bn,b1 as qn,a_ as Zn,N as Kn,G as ot,p as cn,ah as q,n as H,ai as un,c as p,r as _,a as dn,m as a,E as M,as as Gn,f as nt,u as x,D as b,s as N,ap as Qn,R as Qe,F as it}from"./SWWSvUpQ.js";import{b as jt,d as Vn,f as k,a as Y,c as Jn}from"./D8ekX_8E.js";import{_ as Xn}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{g as $t,w as je,r as fn,d as Fe,o as ea,a as ta}from"./WW5OsAH7.js";import{p as pe,i as U,e as be,s as re,a as na,b as aa}from"./CU3XCoqN.js";import{e as mn,i as ra}from"./YJAcq9su.js";import{s as yt}from"./CZEGeSDP.js";import{t as wt,a as E,e as _n,p as $e,z as Ge,i as Te,C as zt,A as xt,f as Ce,D as sa,j as Dt}from"./BggCUw-N.js";import{i as vn}from"./Bgyk9asy.js";import{S as Ve}from"./BxsXghKR.js";import{v as Bt,D as qt}from"./Cp-Frmvs.js";import{b as oa}from"./CvxMDV_e.js";import{b as ia}from"./Cc3l00Qu.js";import{f as la}from"./BtiIexZO.js";import{R as ca}from"./B-Zk1QFs.js";import{e as He}from"./OsbcKH67.js";import{a as ua}from"./M_92pMZb.js";import{s as da,i as fa}from"./DNJy41K2.js";function Qr(e,t,n=!1,r=!1,o=!1){var s=e,d="";A(()=>{var f=jn;if(d===(d=t()??"")){Lt&&Ft();return}if(f.nodes!==null&&($n(f.nodes.start,f.nodes.end),f.nodes=null),d!==""){if(Lt){Ht.data;for(var y=Ft(),D=y;y!==null&&(y.nodeType!==zn||y.data!=="");)D=y,y=Bn(y);if(y===null)throw qn(),Zn;jt(Ht,D),s=Kn(y);return}var I=d+"";n?I=`<svg>${I}</svg>`:r&&(I=`<math>${I}</math>`);var T=Vn(I);if((n||r)&&(T=ot(T)),jt(ot(T),T.lastChild),n||r)for(;ot(T);)s.before(ot(T));else s.before(T)}})}function tt(e,t){const n=t*7;return ua(e,n)}function lt(e,t){const n=+wt(e),[r,o]=[+wt(t.start),+wt(t.end)].sort((s,d)=>s-d);return n>=r&&n<=o}function ma(e,t){const n=ha(t);return"formatToParts"in n?va(n,e):pa(n,e)}const _a={year:0,month:1,day:2,hour:3,minute:4,second:5};function va(e,t){try{const n=e.formatToParts(t),r=[];for(let o=0;o<n.length;o++){const s=_a[n[o].type];s!==void 0&&(r[s]=parseInt(n[o].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function pa(e,t){const n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const St={},Zt=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),ba=Zt==="06/25/2014, 00:00:00"||Zt==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function ha(e){return St[e]||(St[e]=ba?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),St[e]}function Et(e,t,n,r,o,s,d){const f=new Date(0);return f.setUTCFullYear(e,t,n),f.setUTCHours(r,o,s,d),f}const Kt=36e5,ga=6e4,Yt={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Pt(e,t,n){if(!e)return 0;let r=Yt.timezoneZ.exec(e);if(r)return 0;let o,s;if(r=Yt.timezoneHH.exec(e),r)return o=parseInt(r[1],10),Gt(o)?-(o*Kt):NaN;if(r=Yt.timezoneHHMM.exec(e),r){o=parseInt(r[2],10);const d=parseInt(r[3],10);return Gt(o,d)?(s=Math.abs(o)*Kt+d*ga,r[1]==="+"?-s:s):NaN}if(xa(e)){t=new Date(t||Date.now());const d=n?t:ya(t),f=Mt(d,e);return-(n?f:wa(t,f,e))}return NaN}function ya(e){return Et(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Mt(e,t){const n=ma(e,t),r=Et(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let o=e.getTime();const s=o%1e3;return o-=s>=0?s:1e3+s,r-o}function wa(e,t,n){let o=e.getTime()-t;const s=Mt(new Date(o),n);if(t===s)return t;o-=s-t;const d=Mt(new Date(o),n);return s===d?s:Math.max(s,d)}function Gt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Qt={};function xa(e){if(Qt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Qt[e]=!0,!0}catch{return!1}}function Vt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const pn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,kt=36e5,Jt=6e4,Da=2,K={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:pn};function Ot(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const n=t.additionalDigits==null?Da:Number(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const r=Sa(e),{year:o,restDateString:s}=Ya(r.date,n),d=ka(s,o);if(d===null||isNaN(d.getTime()))return new Date(NaN);if(d){const f=d.getTime();let y=0,D;if(r.time&&(y=Ta(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||t.timeZone){if(D=Pt(r.timeZone||t.timeZone,new Date(f+y)),isNaN(D))return new Date(NaN)}else D=Vt(new Date(f+y)),D=Vt(new Date(f+y+D));return new Date(f+y+D)}else return new Date(NaN)}function Sa(e){const t={};let n=K.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=K.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){const o=K.timeZone.exec(r);o?(t.time=r.replace(o[1],""),t.timeZone=o[1].trim()):t.time=r}return t}function Ya(e,t){if(e){const n=K.YYY[t],r=K.YYYYY[t];let o=K.YYYY.exec(e)||r.exec(e);if(o){const s=o[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(o=K.YY.exec(e)||n.exec(e),o){const s=o[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}}return{year:null}}function ka(e,t){if(t===null)return null;let n,r,o;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let s=K.MM.exec(e);if(s)return n=new Date(0),r=parseInt(s[1],10)-1,en(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(s=K.DDD.exec(e),s){n=new Date(0);const d=parseInt(s[1],10);return Oa(t,d)?(n.setUTCFullYear(t,0,d),n):new Date(NaN)}if(s=K.MMDD.exec(e),s){n=new Date(0),r=parseInt(s[1],10)-1;const d=parseInt(s[2],10);return en(t,r,d)?(n.setUTCFullYear(t,r,d),n):new Date(NaN)}if(s=K.Www.exec(e),s)return o=parseInt(s[1],10)-1,tn(o)?Xt(t,o):new Date(NaN);if(s=K.WwwD.exec(e),s){o=parseInt(s[1],10)-1;const d=parseInt(s[2],10)-1;return tn(o,d)?Xt(t,o,d):new Date(NaN)}return null}function Ta(e){let t,n,r=K.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),Tt(t)?t%24*kt:NaN;if(r=K.HHMM.exec(e),r)return t=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),Tt(t,n)?t%24*kt+n*Jt:NaN;if(r=K.HHMMSS.exec(e),r){t=parseInt(r[1],10),n=parseInt(r[2],10);const o=parseFloat(r[3].replace(",","."));return Tt(t,n,o)?t%24*kt+n*Jt+o*1e3:NaN}return null}function Xt(e,t,n){t=t||0,n=n||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const o=r.getUTCDay()||7,s=t*7+n+1-o;return r.setUTCDate(r.getUTCDate()+s),r}const Ca=[31,28,31,30,31,30,31,31,30,31,30,31],Ma=[31,29,31,30,31,30,31,31,30,31,30,31];function bn(e){return e%400===0||e%4===0&&e%100!==0}function en(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;const r=bn(e);if(r&&n>Ma[t]||!r&&n>Ca[t])return!1}return!0}function Oa(e,t){if(t<1)return!1;const n=bn(e);return!(n&&t>366||!n&&t>365)}function tn(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Tt(e,t,n){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function nn(e,t,n){e=Ot(e,n);const r=Pt(t,e,!0),o=new Date(e.getTime()-r),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}function Na(e,t,n){if(typeof e=="string"&&!e.match(pn))return Ot(e,{...n,timeZone:t});e=Ot(e,n);const r=Et(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),o=Pt(t,new Date(r));return new Date(r+o)}const Nt=je([]);let ue=null;async function Me(){return ue||(ue=(async()=>{const{data:e,error:t}=await E.from("calendar_events").select("*").order("start_time",{ascending:!0});if(t)throw ue=null,t;const n=e||[];return Nt.set(n),setTimeout(()=>{ue=null},100),n})(),ue)}async function hn(e){let t=$t(Nt);return t.length||(await Me(),t=$t(Nt)),t.find(n=>n.id===e)}async function Ia(e){const{data:t,error:n}=await E.from("calendar_events").insert([e]).select();if(n)throw n;return ue=null,await Me(),t?t[0]:void 0}async function Ea(e){const{data:t,error:n}=await E.from("calendar_events").insert(e).select();if(n)throw n;return ue=null,await Me(),t??[]}async function ct(e,t){const{data:n,error:r}=await E.from("calendar_events").update(t).eq("id",e).select();if(r)throw r;return ue=null,await Me(),n?n[0]:void 0}async function Pa(e){const t=await hn(e),{error:n}=await E.from("calendar_events").delete().eq("id",e);if(n)throw n;t?.attachments&&t.attachments.length>0&&await Ut(t.attachments),ue=null,await Me()}const Ua={bishop:{approval:"bishop_approval",timestamp:"bishop_approval_at",userId:"bishop_approval_by_user_id"},first_counselor:{approval:"first_counselor_approval",timestamp:"first_counselor_approval_at",userId:"first_counselor_approval_by_user_id"},second_counselor:{approval:"second_counselor_approval",timestamp:"second_counselor_approval_at",userId:"second_counselor_approval_by_user_id"}};async function gn(e,t,n,r){const o=Ua[t],s=n?new Date().toISOString():null;return ct(e,{[o.approval]:n,[o.timestamp]:s,[o.userId]:n?r??null:null})}async function yn(e){return ct(e,{is_published:!0})}async function wn(e){return ct(e,{is_published:!1})}async function Aa(e=new Date){const t=e.toISOString(),{data:n,error:r}=await E.from("calendar_events").select("*").lt("start_time",t).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const o=[],s=[];for(const f of n){if(f.recurrence_rule&&(!f.recurrence_end_date||f.recurrence_end_date&&new Date(f.recurrence_end_date)>=e)){s.push(f);continue}o.push(f)}let d=0;if(o.length>0){const f=o.map(y=>y.id).filter(y=>y!==void 0);if(f.length>0){const{data:y,error:D}=await E.from("calendar_events").delete().in("id",f).select("id");if(D)throw D;d=y?.length??0;for(const I of o)I.attachments&&I.attachments.length>0&&await Ut(I.attachments)}}return ue=null,await Me(),{deleted:d,skipped:s.length}}async function Ra(e,t){const n=e.name.split(".").pop()||"bin",r=t||"temp",s=`${crypto.randomUUID()}.${n}`,d=`${r}/${s}`,{error:f}=await E.storage.from("event-attachments").upload(d,e,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:{publicUrl:y}}=E.storage.from("event-attachments").getPublicUrl(d);return{id:crypto.randomUUID(),name:e.name,url:y,type:e.type,size:e.size,uploadedAt:new Date().toISOString()}}async function Wa(e){const{error:t}=await E.storage.from("event-attachments").remove([e]);if(t)throw t}function xn(e){const t=e.match(/event-attachments\/(.+)$/);return t?t[1]:""}async function Ut(e){if(!e||e.length===0)return;const t=e.map(n=>xn(n.url)).filter(n=>n);if(t.length>0){const{error:n}=await E.storage.from("event-attachments").remove(t);if(n)throw n}}const Vr=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Ia,createCalendarEvents:Ea,deleteCalendarEvent:Pa,deleteEventAttachment:Wa,deleteEventAttachments:Ut,deletePastCalendarEvents:Aa,extractStoragePath:xn,getAllCalendarEvents:Me,getCalendarEvent:hn,publishCalendarEvent:yn,unpublishCalendarEvent:wn,updateBishopricApproval:gn,updateCalendarEvent:ct,uploadEventAttachment:Ra},Symbol.toStringTag,{value:"Module"})),La={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},stakeReliefSociety:{label:"Stake | Relief Society",key:"SRS",sort_index:.1,color_number:5},stakeEldersQuorum:{label:"Stake | Elders Quorum",key:"SEQ",sort_index:.2,color_number:6},stakeYouth:{label:"Stake | Youth",key:"SYO",sort_index:.25,color_number:7},stakeYoungWomen:{label:"Stake | Young Women",key:"SYW",sort_index:.3,color_number:8},stakeYoungMen:{label:"Stake | Young Men",key:"SYM",sort_index:.4,color_number:12},stakePrimary:{label:"Stake | Primary",key:"SPR",sort_index:.5,color_number:16},stakeSundaySchool:{label:"Stake | Sunday School",key:"SSS",sort_index:.6,color_number:21},stakeYsa:{label:"Stake | YSA",key:"SYA",sort_index:.7,color_number:22},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21},ysa:{label:"YSA",key:"YSA",sort_index:18,color_number:22}},It=Object.values(La).sort((e,t)=>e.sort_index-t.sort_index),Jr=e=>e?It.find(t=>t.key===e):void 0,Fa=["STK","SRS","SEQ","SYO","SYW","SYM","SPR","SSS","SYA"],Ha=["WRD","RES","ELQ","YOU","YOW","YWP","YWR","YWD","YOM","YMD","YMT","YMP","PRI","PRN","PRS","PRC","PRV","SUS","YSA"],ja={STK:Fa,WRD:Ha,YOU:["YOU","YOW","YWP","YWR","YWD","YOM","YMD","YMT","YMP"],YOM:["YOM","YMD","YMT","YMP"],YOW:["YOW","YWP","YWR","YWD"]},$a=e=>{if(!e)return[];const t=e.trim();if(!t)return[];const n=ja[t]??[t];return Array.from(new Set(n))},an=(e,t)=>t?e?$a(t).includes(e):!1:!0,rn={bishop:"Bishop",first_counselor:"1st Counselor",second_counselor:"2nd Counselor"},At=e=>{let t=0;return e.bishop_approval==="YES"&&t++,e.first_counselor_approval==="YES"&&t++,e.second_counselor_approval==="YES"&&t++,t},za=e=>At(e)>0,Ba=e=>e.is_published?"published":At(e)>0?"approved":e.bishop_approval==="NO"||e.first_counselor_approval==="NO"||e.second_counselor_approval==="NO"?"needs_review":"pending";let at=null;const qa=e=>e.replace(/<[^>]*>/g,"").toLowerCase(),sn=(e,t)=>{if(!t.trim())return!0;const n=t.toLowerCase(),r=(e.title||"").toLowerCase(),o=qa(e.description||""),s=(e.location||"").toLowerCase();return r.includes(n)||o.includes(n)||s.includes(n)},Xr=(e,t)=>{if(!t.trim()||!e)return on(e||"");const n=on(e),r=new RegExp(`(${Dn(t)})`,"gi");return n.replace(r,"<mark>$1</mark>")},es=(e,t)=>{if(!t.trim()||!e)return e||"";const n=new RegExp(`(${Dn(t)})`,"gi");return e.replace(/(<[^>]*>)|([^<]+)/g,(r,o,s)=>o||(s?s.replace(n,"<mark>$1</mark>"):r))},on=e=>{const t=typeof document<"u"?document.createElement("div"):null;return t?(t.textContent=e,t.innerHTML):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Dn=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Za=_n()??null,Ka=fn(!1),Ct=Za?.stores.authenticated??Ka,Ga=()=>{const e=je(!1),t=je([]),n=je([]),r=je(""),o=je(""),s=je(!1),d=(v,g)=>!(!v.is_published||!g&&v.is_public===!1),f=Fe([n,Ct],([v,g])=>{const C=new Date,R=He(tt(C,3),{weekStartsOn:1}),l=new Set(v.filter(m=>m?.meta_data?.organization?.length).filter(m=>d(m,g)).filter(m=>{if(m.event_type==="calendar_event"){const W=m.start_time?$e(m.start_time):null;return W?lt(W,{start:C,end:R}):!1}return!0}).map(m=>m.meta_data?.organization).filter(m=>m));return Array.from(l).map(m=>It.find(W=>W.key===m)).filter(m=>m!==void 0)}),y=Fe([r],([v])=>It.find(g=>g.key===v)),D=Fe([n,r,o,Ct],([v,g,C,R])=>v.filter(l=>l.event_type==="calendar_event").filter(l=>{const m=l?.meta_data;return g&&m?an(m?.organization,g):!0}).filter(l=>sn(l,C)).filter(l=>d(l,R)).filter(l=>{const m=l.start_time?$e(l.start_time):null,W=da();return m?fa(m,W)||m.getTime()>=W.getTime():!1})),I=Fe([n,r,o,Ct],([v,g,C,R])=>v.filter(l=>l.event_type==="announcement").filter(l=>{const m=l?.meta_data;return g&&m?an(m?.organization,g):!0}).filter(l=>sn(l,C)).filter(l=>d(l,R))),T=Fe([D],([v])=>v.filter(g=>{const C=g.start_time?$e(g.start_time):null;return C?lt(C,{start:Ge(new Date,{weekStartsOn:1}),end:He(new Date,{weekStartsOn:1})}):!1})),G=()=>{const v=Ge(new Date,{weekStartsOn:1}),g=He(new Date,{weekStartsOn:1});return`${Te(v,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},de=Fe([D],([v])=>{const g=tt(Ge(new Date,{weekStartsOn:1}),1),C=He(g,{weekStartsOn:1});return v.filter(R=>{const l=R.start_time?$e(R.start_time):null;return l?lt(l,{start:g,end:C}):!1})}),fe=()=>{const v=tt(Ge(new Date,{weekStartsOn:1}),1),g=He(v,{weekStartsOn:1});return`${Te(v,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},he=Fe([D],([v])=>{const g=tt(Ge(new Date,{weekStartsOn:1}),2),C=He(g,{weekStartsOn:1});return v.filter(R=>{const l=R.start_time?$e(R.start_time):null;return l?lt(l,{start:g,end:C}):!1})}),Oe=()=>{const v=tt(Ge(new Date,{weekStartsOn:1}),2),g=He(v,{weekStartsOn:1});return`${Te(v,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},ze=v=>{const g=[],C=new Date,R=new Date;R.setFullYear(C.getFullYear()+1);for(const l of v)if(l.recurrence_rule&&l.start_time&&l.end_time)try{const m=ca.fromString(l.recurrence_rule),W=l.recurrence_end_date?m.all():m.between(C,R,!0),Ne=new Date(l.start_time),me=new Date(l.end_time).getTime()-Ne.getTime(),Q=nn(Ne,xt),Z=Q.getHours(),oe=Q.getMinutes(),Ie=Q.getSeconds(),Ee=Q.getMilliseconds(),ye=l.recurrence_exceptions||[],S=l.recurrence_overrides||{};W.forEach((V,Pe)=>{const we=nn(V,xt),O=new Date(we);O.setHours(Z,oe,Ie,Ee);const ie=Na(O,xt),Se=ie,qe=new Date(ie.getTime()+me),Ye=Te(V,"yyyy-MM-dd"),P=S[Ye];if(ye.includes(Ye)&&!P)return;const j={...l,id:void 0,start_time:Se.toISOString(),end_time:qe.toISOString(),meta_data:{...l.meta_data,recurring_instance:!0,recurring_parent_id:l.id,recurring_instance_index:Pe}};P&&(P.title!==void 0&&(j.title=P.title),P.description!==void 0&&(j.description=P.description),P.location!==void 0&&(j.location=P.location),P.start_time!==void 0&&(j.start_time=P.start_time),P.end_time!==void 0&&(j.end_time=P.end_time),P.is_all_day!==void 0&&(j.is_all_day=P.is_all_day),P.meta_data!==void 0&&(j.meta_data={...j.meta_data,...P.meta_data})),g.push(j)})}catch(m){console.error("Failed to expand recurring event:",l.id,m),g.push(l)}else g.push(l);return g},Be=v=>v.length?ze(v).map(C=>({...C,start_time:C?.start_time?zt(C.start_time):void 0,end_time:C.end_time?zt(C.end_time):void 0})):[];return at={stores:{ready:e,data:t,dbData:n,announcements:I,calendarEvents:D,calendarEventsThisWeek:T,calendarEventsNextWeek:de,calendarEventsNextNextWeek:he,currentOrganizations:f,organizationFilter:r,searchQuery:o,currentOrganizationFilter:y,weeksExpanded:s},actions:{reload:async()=>{e.set(!1);const v=await Me();n.set(Be(v)),e.set(!0)},calendarEventsThisWeekLabel:G,calendarEventsNextWeekLabel:fe,calendarEventsNextNextWeekLabel:Oe}},at},ts=()=>at?.stores&&Object.keys(at.stores).length>0?at:Ga();var Qa=k('<div class="d-flex justify-content-center py-3"><!></div>'),Va=k('<div class="text-muted text-center py-3 small">No messages yet</div>'),Ja=k('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"><div> </div> <div> </div></div>'),Xa=k('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"> </div>'),er=k('<i class="bi bi-trash"></i>'),tr=k('<button type="button" class="btn btn-link btn-sm text-danger p-0 mt-1 delete-btn d-block ms-auto svelte-12d50yj" title="Delete message"><!></button>'),nr=k('<div><div><div class="message-text svelte-12d50yj"> </div> <!> <!></div></div>'),ar=k('<i class="bi bi-send"></i>'),rr=k('<div class="messages-container svelte-12d50yj"><!></div> <div class="input-area d-flex gap-2 pt-2 svelte-12d50yj"><textarea class="form-control svelte-12d50yj" rows="2" placeholder="Type a message..."></textarea> <button type="button" class="btn btn-primary btn-sm align-self-end" title="Send message"><!></button></div>',1),sr=k("<div><!></div>");function ln(e,t){cn(t,!1);let n=pe(t,"comments",24,()=>[]),r=pe(t,"currentUserId",8),o=pe(t,"onSend",8),s=pe(t,"onDelete",8),d=pe(t,"loading",8,!1),f=pe(t,"disabled",8,!1),y=pe(t,"fullHeight",8,!1),D=M(""),I=M(!1),T=M(null),G=M();function de(){a(G)&&requestAnimationFrame(()=>{Gn(G,a(G).scrollTop=a(G).scrollHeight)})}function fe(l){try{return la($e(l),{addSuffix:!0})}catch{return""}}function he(l){return l.user_id===r()}async function Oe(){const l=a(D).trim();if(!(!l||a(I)||f())){b(I,!0);try{await o()(l),b(D,""),de()}catch(m){console.error("Failed to send message:",m)}finally{b(I,!1)}}}async function ze(l){if(!(a(T)||f())){b(T,l);try{await s()(l)}catch(m){console.error("Failed to delete message:",m)}finally{b(T,null)}}}function Be(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),Oe())}q(()=>H(n()),()=>{n().length&&de()}),un(),vn();var c=sr();let v;var g=p(c);{var C=l=>{var m=Qa(),W=p(m);Ve(W,{size:"sm"}),_(m),Y(l,m)},R=l=>{var m=rr(),W=nt(m),Ne=p(W);{var ge=S=>{var V=Va();Y(S,V)},me=S=>{var V=Jn(),Pe=nt(V);mn(Pe,1,n,we=>we.id,(we,O)=>{const ie=Qe(()=>(a(O),x(()=>he(a(O)))));var Se=nr();let qe;var Ye=p(Se);let P;var j=p(Ye),ut=p(j,!0);_(j);var Je=N(j,2);{var Ue=J=>{var L=Ja(),xe=p(L),Re=p(xe,!0);_(xe);var Ze=N(xe,2),se=p(Ze,!0);_(Ze),_(L),A(ke=>{re(Re,(a(O),x(()=>a(O).user_display_name))),re(se,ke)},[()=>(a(O),x(()=>fe(a(O).created_at)))]),Y(J,L)},Ae=J=>{var L=Xa(),xe=p(L,!0);_(L),A(Re=>re(xe,Re),[()=>(a(O),x(()=>fe(a(O).created_at)))]),Y(J,L)};U(Je,J=>{a(ie)?J(Ae,!1):J(Ue)})}var rt=N(Je,2);{var dt=J=>{var L=tr(),xe=p(L);{var Re=se=>{Ve(se,{size:"xs"})},Ze=se=>{var ke=er();Y(se,ke)};U(xe,se=>{a(T),a(O),x(()=>a(T)===a(O).id)?se(Re):se(Ze,!1)})}_(L),A(()=>L.disabled=(a(T),a(O),x(()=>a(T)===a(O).id))),be("click",L,()=>ze(a(O).id)),Y(J,L)};U(rt,J=>{a(ie)&&J(dt)})}_(Ye),_(Se),A(()=>{qe=Ce(Se,1,"d-flex mb-2",null,qe,{"justify-content-end":a(ie),"justify-content-start":!a(ie)}),P=Ce(Ye,1,"message-bubble svelte-12d50yj",null,P,{own:a(ie),other:!a(ie)}),re(ut,(a(O),x(()=>a(O).message)))}),Y(we,Se)}),Y(S,V)};U(Ne,S=>{H(n()),x(()=>n().length===0)?S(ge):S(me,!1)})}_(W),ia(W,S=>b(G,S),()=>a(G));var Q=N(W,2),Z=p(Q);Qn(Z);var oe=N(Z,2),Ie=p(oe);{var Ee=S=>{Ve(S,{size:"xs"})},ye=S=>{var V=ar();Y(S,V)};U(Ie,S=>{a(I)?S(Ee):S(ye,!1)})}_(oe),_(Q),A(S=>{Z.disabled=f()||a(I),oe.disabled=S},[()=>(H(f()),a(I),a(D),x(()=>f()||a(I)||!a(D).trim()))]),oa(Z,()=>a(D),S=>b(D,S)),be("keydown",Z,Be),be("click",oe,Oe),Y(l,m)};U(g,l=>{d()?l(C):l(R,!1)})}_(c),A(()=>v=Ce(c,1,"chat-thread d-flex flex-column svelte-12d50yj",null,v,{"chat-thread-full":y()})),Y(e,c),dn()}async function or(e){const{data:t,error:n}=await E.from("event_bishopric_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(n)throw n;return t??[]}async function ir(e,t,n,r){const{data:o,error:s}=await E.from("event_bishopric_comments").insert([{event_id:e,user_id:t,user_display_name:n,message:r}]).select().single();if(s)throw s;return o}async function lr(e){const{error:t}=await E.from("event_bishopric_comments").delete().eq("id",e);if(t)throw t}async function cr(e){const{data:t,error:n}=await E.from("event_submitter_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(n)throw n;return t??[]}async function ur(e,t,n,r){const{data:o,error:s}=await E.from("event_submitter_comments").insert([{event_id:e,user_id:t,user_display_name:n,message:r}]).select().single();if(s)throw s;return o}async function dr(e){const{error:t}=await E.from("event_submitter_comments").delete().eq("id",e);if(t)throw t}var fr=k("<span> </span>"),mr=k('<div class="alert alert-info mb-0" role="alert">Save this event or announcement before requesting bishopric approvals.</div>'),_r=k('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),vr=k('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),pr=k('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Bishopric Discussion</span> <small class="text-muted">Private notes between bishopric members</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!> <div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Submitter</span> <small class="text-muted"> </small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),br=k('<small class="text-muted"> </small>'),hr=k("<span><!></span>"),gr=k('<div class="decision-buttons d-grid gap-2 gap-md-3 svelte-jfsv9u"><button type="button"><i class="bi bi-check-circle-fill"></i> <div><div class="action-label svelte-jfsv9u">Approve</div> <small class="text-muted">Vote to approve</small></div></button> <button type="button"><i class="bi bi-pencil-square"></i> <div><div class="action-label svelte-jfsv9u">Request Changes</div> <small class="text-muted">Ask submitter to revise</small></div></button> <button type="button"><i class="bi bi-hourglass-split"></i> <div><div class="action-label svelte-jfsv9u">Mark Pending</div> <small class="text-muted">No decision yet</small></div></button> <!></div>'),yr=k("<span> </span>"),wr=k('<div class="list-group-item"><div class="d-flex flex-column gap-2"><div><div class="fw-semibold"> </div> <!></div> <div><!></div></div></div>'),xr=k('<i class="bi bi-globe-americas"></i>'),Dr=k('<button type="button" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center gap-2"><!> Unpublish</button>'),Sr=k('<i class="bi bi-globe"></i>'),Yr=k('<small class="text-muted text-center">At least one approval required to publish</small>'),kr=k('<button type="button" class="btn btn-success w-100 d-flex align-items-center justify-content-center gap-2"><!> Publish to Ward</button> <!>',1),Tr=k('<div class="card-footer text-danger small"> </div>'),Cr=k('<!> <div class="card"><div class="list-group list-group-flush"></div> <div class="publish-section d-flex flex-column gap-2 p-3 svelte-jfsv9u"><div class="d-flex justify-content-between align-items-center"><span class="text-muted small fw-semibold"> </span></div> <!></div> <!></div>',1),Mr=k('<div class="d-flex flex-column gap-3"><div class="d-flex flex-wrap align-items-center justify-content-between gap-2"><h3 class="h5 mb-0">Bishopric Approval</h3> <!></div> <!></div>');function ns(e,t){cn(t,!1);const n=()=>na(W,"$currentUserStore",r),[r,o]=aa(),s=M(),d=M(),f=M(),y=M(),D=M(),I=M(),T=M(),G=M(),de=M(),fe=M(),he=M(),Oe=M(),ze=M(),Be=M();let c=pe(t,"eventItem",12),v=pe(t,"disabled",8,!1),g=pe(t,"reloadEvents",8,null);const C={bishop:"bishopric-bishop",first_counselor:"bishopric-first-counselor",second_counselor:"bishopric-second-counselor"},R={pending:{text:"Pending Approval",class:"bg-warning-subtle text-warning-emphasis"},approved:{text:"Approved",class:"bg-success-subtle text-success-emphasis"},needs_review:{text:"Needs Review",class:"bg-info-subtle text-info-emphasis"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis"}},l=_n()??null,m=fn(sa),W=l?.stores.currentUser??m,Ne=["bishop","first_counselor","second_counselor"];let ge=M(""),me=M(null),Q=M(!1),Z=M([]),oe=M(!1),Ie=!1;const Ee=`bishopric-chat-${Bt()}`;let ye=M(null),S=M([]),V=M(!1),Pe=!1;const we=`submitter-chat-${Bt()}`;let O=null;ea(async()=>{typeof window<"u"&&(O=(await Xn(()=>import("./DO0djbQe.js").then(u=>u.o),__vite__mapDeps([0,1]),import.meta.url)).default)});function ie(){if(!O)return;const i=document.getElementById(Ee);if(!i)return;O.getOrCreateInstance(i).show()}function Se(){if(!O)return;const i=document.getElementById(we);if(!i)return;O.getOrCreateInstance(i).show()}function qe(i){const u=C[i];return a(s)?.roles?.includes(u)??!1}function Ye(i){if(!i)return null;try{return Te($e(i),"MMM d, yyyy 'at' h:mm a")}catch(u){return console.error("Failed to format timestamp",u),null}}async function P(){typeof g()=="function"&&await g()()}async function j(i,u){if(c()?.id){b(ge,""),b(me,i);try{const w=await gn(c().id,i,u,a(s)?.id);w&&c({...c(),bishop_approval:w.bishop_approval,first_counselor_approval:w.first_counselor_approval,second_counselor_approval:w.second_counselor_approval,bishop_approval_at:w.bishop_approval_at,first_counselor_approval_at:w.first_counselor_approval_at,second_counselor_approval_at:w.second_counselor_approval_at,bishop_approval_by_user_id:w.bishop_approval_by_user_id,first_counselor_approval_by_user_id:w.first_counselor_approval_by_user_id,second_counselor_approval_by_user_id:w.second_counselor_approval_by_user_id,is_published:w.is_published}),await P()}catch(w){console.error("Failed to update approval",w),b(ge,"Unable to update approval. Please try again.")}finally{b(me,null)}}}async function ut(i){await j(i,null)}async function Je(){if(c()?.id){b(ge,""),b(Q,!0);try{const i=a(I)?await wn(c().id):await yn(c().id);i&&c({...c(),is_published:i.is_published}),await P()}catch(i){console.error("Failed to update publish status",i),b(ge,"Unable to update publish status. Please try again.")}finally{b(Q,!1)}}}let Ue=null,Ae=null;function rt(){b(Z,[]),Ie=!1,b(oe,!1),b(S,[]),Pe=!1,b(V,!1)}ta(()=>{J(),se()});function dt(i){const u=i??c()?.id??null;if(Ue||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&E.realtime.setAuth(w),Ue=E.channel(`bishopric-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_bishopric_comments",filter:`event_id=eq.${u}`},()=>{L(u)}).subscribe()}function J(){Ue&&(E.removeChannel(Ue),Ue=null)}async function L(i){const u=i??c()?.id??null;if(u){Ie||b(oe,!0);try{const w=await or(u);u===(c()?.id??null)&&(b(Z,w),Ie=!0)}catch(w){console.error("Failed to load bishopric comments:",w)}finally{u===(c()?.id??null)&&b(oe,!1)}}}async function xe(i){if(!c()?.id||!a(s)?.id)return;const u=a(s).displayName||a(s).username||"Unknown";await ir(c().id,a(s).id,u,i),await L()}async function Re(i){await lr(i),await L()}function Ze(i){const u=i??c()?.id??null;if(Ae||!u)return;const w=typeof window<"u"?localStorage.getItem("authToken"):null;w&&E.realtime.setAuth(w),Ae=E.channel(`submitter-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${u}`},()=>{ke(u)}).subscribe()}function se(){Ae&&(E.removeChannel(Ae),Ae=null)}async function ke(i){const u=i??c()?.id??null;if(u){Pe||b(V,!0);try{const w=await cr(u);u===(c()?.id??null)&&(b(S,w),Pe=!0)}catch(w){console.error("Failed to load submitter comments:",w)}finally{u===(c()?.id??null)&&b(V,!1)}}}async function Sn(i){if(!c()?.id||!a(s)?.id)return;const u=a(s).displayName||a(s).username||"Unknown";await ur(c().id,a(s).id,u,i),await ke()}async function Yn(i){await dr(i),await ke()}function kn(i){return i==="YES"?{text:"Approved",class:"bg-success-subtle text-success-emphasis"}:i==="NO"?{text:"Requested Changes",class:"bg-info-subtle text-info-emphasis"}:{text:"No Input Yet",class:"bg-secondary-subtle text-secondary-emphasis"}}const ft="btn btn-sm action-btn w-100 text-start d-flex align-items-center gap-2";function Tn(i){return`${ft} ${i==="YES"?"btn-success text-white":"btn-outline-success"}`}function Cn(i){return`${ft} ${i==="NO"?"btn-info text-dark":"btn-outline-info"}`}function Mn(i){const u=i==null;return`${ft} ${u?"btn-secondary text-white":"btn-outline-secondary"}`}q(()=>n(),()=>{b(s,n())}),q(()=>H(c()),()=>{b(d,Ba(c()))}),q(()=>a(d),()=>{b(f,R[a(d)])}),q(()=>H(c()),()=>{b(y,At(c()))}),q(()=>H(c()),()=>{b(D,za(c()))}),q(()=>H(c()),()=>{b(I,c()?.is_published??!1)}),q(()=>H(c()),()=>{b(T,{bishop:c()?.bishop_approval,first_counselor:c()?.first_counselor_approval,second_counselor:c()?.second_counselor_approval})}),q(()=>H(c()),()=>{b(G,{bishop:c()?.bishop_approval_at,first_counselor:c()?.first_counselor_approval_at,second_counselor:c()?.second_counselor_approval_at})}),q(()=>a(s),()=>{b(de,a(s)?.roles?.includes("bishopric-bishop")??!1)}),q(()=>a(s),()=>{b(fe,a(s)?.roles?.includes("bishopric-first-counselor")??!1)}),q(()=>a(s),()=>{b(he,a(s)?.roles?.includes("bishopric-second-counselor")??!1)}),q(()=>(a(de),a(fe),a(he)),()=>{b(Oe,a(de)||a(fe)||a(he))}),q(()=>(a(de),a(fe),a(he)),()=>{b(ze,a(de)?Ne:Ne.filter(i=>i==="bishop"||i==="first_counselor"&&a(fe)||i==="second_counselor"&&a(he)))}),q(()=>(H(c()),a(ye)),()=>{const i=c()?.id??null;i&&i!==a(ye)?(b(ye,i),rt(),J(),se(),L(i),ke(i),dt(i),Ze(i)):!i&&a(ye)!==null&&(b(ye,null),rt(),J(),se())}),q(()=>H(c()),()=>{b(Be,c()?.meta_data?.submitted_by_name??"Submitter")}),un(),vn();var mt=Mr(),_t=p(mt),On=N(p(_t),2);{var Nn=i=>{var u=fr(),w=p(u,!0);_(u),A(()=>{Ce(u,1,(a(f),x(()=>`badge ${a(f).class}`)),"svelte-jfsv9u"),re(w,(a(f),x(()=>a(f).text)))}),Y(i,u)};U(On,i=>{H(c()),x(()=>c()?.id)&&i(Nn)})}_(_t);var In=N(_t,2);{var En=i=>{var u=mr();Y(i,u)},Pn=i=>{var u=Cr(),w=nt(u);{var Un=$=>{var h=pr(),F=nt(h),le=p(F),_e=N(p(le),4),X=p(_e);{var We=B=>{var ae=_r(),Le=p(ae,!0);_(ae),A(()=>re(Le,(a(Z),x(()=>a(Z).length)))),Y(B,ae)};U(X,B=>{a(Z),x(()=>a(Z).length>0)&&B(We)})}it(2),_(_e),_(le),_(F);var Ke=N(F,2);{let B=Qe(()=>(H(c()),x(()=>c()?.title||"Event")));qt(Ke,{get id(){return Ee},subtitle:"Discussion",get title(){return a(B)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(ae,Le)=>{{let De=Qe(()=>(a(s),x(()=>a(s)?.id??-1)));ln(ae,{get comments(){return a(Z)},get currentUserId(){return a(De)},onSend:xe,onDelete:Re,get loading(){return a(oe)},fullHeight:!0,get disabled(){return v()}})}},$$slots:{default:!0}})}var z=N(Ke,2),ce=p(z),Xe=N(p(ce),2),st=N(p(Xe),2),ht=p(st,!0);_(st),_(Xe);var te=N(Xe,2),ee=p(te);{var ne=B=>{var ae=vr(),Le=p(ae,!0);_(ae),A(()=>re(Le,(a(S),x(()=>a(S).length)))),Y(B,ae)};U(ee,B=>{a(S),x(()=>a(S).length>0)&&B(ne)})}it(2),_(te),_(ce),_(z);var ve=N(z,2);{let B=Qe(()=>(H(c()),x(()=>c()?.title||"Event")));qt(ve,{get id(){return we},subtitle:"Discussion with Submitter",get title(){return a(B)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(ae,Le)=>{{let De=Qe(()=>(a(s),x(()=>a(s)?.id??-1)));ln(ae,{get comments(){return a(S)},get currentUserId(){return a(De)},onSend:Sn,onDelete:Yn,get loading(){return a(V)},fullHeight:!0,get disabled(){return v()}})}},$$slots:{default:!0}})}A(()=>{yt(le,"aria-controls",Ee),yt(ce,"aria-controls",we),re(ht,a(Be))}),be("click",le,ie),be("click",ce,Se),Y($,h)};U(w,$=>{a(Oe)&&$(Un)})}var Rt=N(w,2),vt=p(Rt);mn(vt,5,()=>a(ze),ra,($,h)=>{var F=wr(),le=p(F),_e=p(le),X=p(_e),We=p(X,!0);_(X);var Ke=N(X,2);{var z=te=>{var ee=br(),ne=p(ee,!0);_(ee),A(ve=>re(ne,ve),[()=>(a(G),a(h),x(()=>Ye(a(G)[a(h)])))]),Y(te,ee)};U(Ke,te=>{a(G),a(h),x(()=>a(G)[a(h)])&&te(z)})}_(_e);var ce=N(_e,2),Xe=p(ce);{var st=te=>{var ee=gr(),ne=p(ee),ve=N(ne,2),B=N(ve,2),ae=N(B,2);{var Le=De=>{var et=hr(),gt=p(et);Ve(gt,{size:"xs"}),_(et),Y(De,et)};U(ae,De=>{a(me)===a(h)&&De(Le)})}_(ee),A((De,et,gt)=>{Ce(ne,1,De,"svelte-jfsv9u"),ne.disabled=v()||a(me)===a(h),Ce(ve,1,et,"svelte-jfsv9u"),ve.disabled=v()||a(me)===a(h),Ce(B,1,gt,"svelte-jfsv9u"),B.disabled=v()||a(me)===a(h)},[()=>Dt((a(T),a(h),x(()=>Tn(a(T)[a(h)])))),()=>Dt((a(T),a(h),x(()=>Cn(a(T)[a(h)])))),()=>Dt((a(T),a(h),x(()=>Mn(a(T)[a(h)]))))]),be("click",ne,()=>j(a(h),"YES")),be("click",ve,()=>j(a(h),"NO")),be("click",B,()=>ut(a(h))),Y(te,ee)},ht=te=>{const ee=Qe(()=>(a(T),a(h),x(()=>kn(a(T)[a(h)]))));var ne=yr(),ve=p(ne,!0);_(ne),A(()=>{Ce(ne,1,(H(a(ee)),x(()=>`badge ${a(ee).class}`)),"svelte-jfsv9u"),re(ve,(H(a(ee)),x(()=>a(ee).text)))}),Y(te,ne)};U(Xe,te=>{a(h),x(()=>qe(a(h)))?te(st):te(ht,!1)})}_(ce),_(le),_(F),A(()=>re(We,(H(rn),a(h),x(()=>rn[a(h)])))),Y($,F)}),_(vt);var pt=N(vt,2),bt=p(pt),Wt=p(bt),An=p(Wt);_(Wt),_(bt);var Rn=N(bt,2);{var Wn=$=>{var h=Dr(),F=p(h);{var le=X=>{Ve(X,{size:"xs"})},_e=X=>{var We=xr();Y(X,We)};U(F,X=>{a(Q)?X(le):X(_e,!1)})}it(),_(h),A(()=>h.disabled=v()||a(Q)),be("click",h,Je),Y($,h)},Ln=$=>{var h=kr(),F=nt(h),le=p(F);{var _e=z=>{Ve(z,{size:"xs"})},X=z=>{var ce=Sr();Y(z,ce)};U(le,z=>{a(Q)?z(_e):z(X,!1)})}it(),_(F);var We=N(F,2);{var Ke=z=>{var ce=Yr();Y(z,ce)};U(We,z=>{a(D)||z(Ke)})}A(()=>{F.disabled=v()||a(Q)||!a(D),yt(F,"title",a(D)?"":"At least one approval required to publish")}),be("click",F,Je),Y($,h)};U(Rn,$=>{a(I)?$(Wn):$(Ln,!1)})}_(pt);var Fn=N(pt,2);{var Hn=$=>{var h=Tr(),F=p(h,!0);_(h),A(()=>re(F,a(ge))),Y($,h)};U(Fn,$=>{a(ge)&&$(Hn)})}_(Rt),A(()=>re(An,`Approvals: ${a(y)??""} of 3`)),Y(i,u)};U(In,i=>{H(c()),x(()=>!c()?.id)?i(En):i(Pn,!1)})}_(mt),Y(e,mt),dn(),o()}export{ns as B,La as C,It as D,Ba as a,Jr as b,Ea as c,Xr as d,tt as e,Na as f,ts as g,Qr as h,Aa as i,At as j,es as k,xn as l,an as m,Wa as n,Pa as o,hn as p,ct as q,Ia as r,cr as s,nn as t,Ra as u,ln as v,dr as w,ur as x,Vr as y};
