import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as _e,t as Z,a as fe,s,c as a,r as t,ai as K,D as B,g as e,E as W,aj as Oe,u as D,i as aa,as as at,R as rt,f as oe,w as E,an as Ke,ao as Ve,F as st}from"./CPOcesE7.js";import{s as x,p as te,i as J,b as he,e as Ae,a as Qe,k as Gt}from"./opPvMm1W.js";import{f as I,a as y,t as nt,c as we}from"./YsHTGu5k.js";import{s as ie,r as Et,b as ra,e as yt}from"./B678cWRA.js";import{i as ge}from"./C2Q_9cr2.js";import{W as ye,S as Ee,c as Be,b as Ze,t as ke,v as na,w as sa,B as oa,l as Lt,C as Ut,E as $t,f as le,F as ia,G as la}from"./BsRP2LKs.js";import{w as qe,g as At,d as be,o as bt,a as ca}from"./DHXte27T.js";import{e as Me,i as Ce}from"./DAwrR-3T.js";import{b as da}from"./DLuN8Kcu.js";import{v as jt,D as Pt}from"./COaApZh_.js";import{b as Nt,a as ua}from"./QDlYjqxz.js";import{c as va,d as ma,a as Jt,V as _a}from"./Bai7YTd4.js";import{g as fa}from"./BWA40My1.js";import{p as ve}from"./BWjn87HK.js";import{S as Qt}from"./BOka-lUv.js";import{b as ga}from"./C34nsrD6.js";import{e as pa}from"./DA0iFnz8.js";var ya=I('<div class="card"><div class="card-header">Ward Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Chapel Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small">Hours</li> <li class="list-group-item"><span class="d-block fw-lighter"><strong>Sacrament</strong> </span> <span class="d-block fw-lighter"><strong>2nd Hour</strong> </span></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function Hn(o,n){_e(n,!1),ge();var r=ya(),d=s(a(r),2),v=s(a(d),2),m=a(v),_=a(m),f=s(_,2),$=s(f,2);t(m),t(v);var T=s(v,4),h=a(T),p=s(a(h));t(h);var c=s(h,2),M=s(a(c));t(c),t(T);var R=s(T,2),P=a(R);t(R);var b=s(R,2),S=a(b),u=s(S),g=a(u,!0);t(u),t(b);var i=s(b,2),l=a(i);t(i);var O=s(i,2),k=a(O),w=s(k),C=a(w,!0);t(w),t(O),t(d),t(r),Z((q,j)=>{ie(m,"href",ye.chapel.mapLink),x(_,`${ye.chapel.address.street??""}, ${ye.chapel.address.city??""}`),x(f,` ${ye.chapel.address.state??""}
				${ye.chapel.address.zip??""}`),x($,` ${ye.chapel.address.country??""}`),x(p,`:
				${ye.meetingTimes.sacrament.start??""} to
				${ye.meetingTimes.sacrament.end??""}`),x(M,`:
				${ye.meetingTimes.secondHour.start??""} to
				${ye.meetingTimes.secondHour.end??""}`),x(P,`${ye.contacts.executiveSecretary.purpose??""}:`),x(S,`${ye.contacts.executiveSecretary.name??""} | `),ie(u,"href",`sms:${q??""}`),x(g,ye.contacts.executiveSecretary.phone),x(l,`${ye.contacts.bishop.purpose??""}:`),x(k,`${ye.contacts.bishop.name??""} | `),ie(w,"href",`sms:${j??""}`),x(C,ye.contacts.bishop.phone)},[()=>ye.contacts.executiveSecretary.phone.replace(/-/g,""),()=>ye.contacts.bishop.phone.replace(/-/g,"")]),y(o,r),fe()}var ba=I('<div class="card"><div class="card-header">Stake Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function Xn(o,n){_e(n,!1),ge();var r=ba(),d=s(a(r),2),v=s(a(d),2),m=a(v),_=a(m),f=s(_,2),$=s(f,2);t(m),t(v);var T=s(v,2),h=a(T);t(T);var p=s(T,2),c=a(p),M=s(c),R=a(M,!0);t(M),t(p);var P=s(p,2),b=a(P);t(P);var S=s(P,2),u=a(S),g=s(u),i=a(g,!0);t(g),t(S),t(d),t(r),Z((l,O)=>{ie(m,"href",Ee.building.mapLink),x(_,`${Ee.building.address.street},`),x(f,` ${Ee.building.address.city}, ${Ee.building.address.state}
				${Ee.building.address.zip}`),x($,` ${Ee.building.address.country}`),x(h,`${Ee.contacts.templeRecommend.purpose}:`),x(c,`${Ee.contacts.templeRecommend.name} | `),ie(M,"href",`sms:${l??""}`),x(R,Ee.contacts.templeRecommend.phone),x(b,`${Ee.contacts.president.purpose}:`),x(u,`${Ee.contacts.president.name} | `),ie(g,"href",`sms:${O??""}`),x(i,Ee.contacts.president.phone)},[()=>Ee.contacts.templeRecommend.phone.replace(/-/g,""),()=>Ee.contacts.president.phone.replace(/-/g,"")]),y(o,r),fe()}var ha=I('<div class="card"><div class="card-header"> </div> <div class="card-body"><figure class="text-center"><blockquote class="blockquote"><p> </p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title"> </cite></figcaption></figure></div></div>');function zn(o,n){_e(n,!1),ge();var r=ha(),d=a(r),v=a(d);t(d);var m=s(d,2),_=a(m),f=a(_),$=a(f),T=a($,!0);t($),t(f);var h=s(f,2),p=a(h),c=a(p,!0);t(p),t(h),t(_),t(m),t(r),Z(()=>{x(v,`Ward Theme ${ye.theme.year??""}`),x(T,ye.theme.scripture.text),x(c,ye.theme.scripture.reference)}),y(o,r),fe()}var wa=I('<small class="fw-lighter text-muted"> </small>'),xa=I('<div class="invalid-feedback d-block"> </div>'),ka=I('<div class="d-flex flex-column gap-1"><label> </label> <!> <input type="number" min="0" max="999"/> <!></div>');function dt(o,n){let r=te(n,"count",12,0),d=te(n,"label",8,"Count"),v=te(n,"description",8,""),m=te(n,"error",8,"");var _=ka(),f=a(_),$=a(f,!0);t(f);var T=s(f,2);{var h=P=>{var b=wa(),S=a(b,!0);t(b),Z(()=>x(S,v())),y(P,b)};J(T,P=>{v()&&P(h)})}var p=s(T,2);Et(p);let c;var M=s(p,2);{var R=P=>{var b=xa(),S=a(b,!0);t(b),Z(()=>x(S,m())),y(P,b)};J(M,P=>{m()&&P(R)})}t(_),Z(()=>{ie(f,"for",d()),x($,d()),ie(p,"id",d()),c=Be(p,1,"form-control",null,c,{"is-invalid":!!m()})}),Nt(p,r),y(o,_)}const Vt=qe([]);let Dt=!1;async function Bt(){if(Dt)return At(Vt);Dt=!0;try{const{data:o,error:n}=await Ze.from("temple_challenge_entries").select("*");if(n)throw console.error("[API] Get temple entries failed:",n),new Error(`Failed to load entries: ${n.message}`);const r=o||[];return Vt.set(r),setTimeout(()=>Dt=!1,800),r}catch(o){throw Dt=!1,console.error("[API] Unexpected error fetching temple entries:",o),o}}async function $a(o){try{const{data:n,error:r}=await Ze.from("temple_challenge_entries").insert([o]).select();if(r)throw console.error("[API] Create temple entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await Bt(),console.log("[API] Temple entry created successfully"),n?n[0]:void 0}catch(n){throw console.error("[API] Unexpected error creating temple entry:",n),n}}async function Da(o,n){const{data:r,error:d}=await Ze.from("temple_challenge_entries").update(n).eq("id",o).select();if(d)throw d;return await Bt(),r?r[0]:void 0}async function Ma(o){const{error:n}=await Ze.from("temple_challenge_entries").delete().eq("id",o);if(n)throw n;await Bt()}function Sa(o,n,r){return o.filter(d=>d.date>=n&&d.date<=r)}function Ta(o){return o.reduce((n,r)=>n+(r.baptism_ordinances_count??0)+(r.confirmation_ordinances_count??0)+(r.initiatory_ordinances_count??0)+(r.endowment_ordinances_count??0)+(r.sealing_ordinances_count??0),0)}function Ea(o){return o.reduce((n,r)=>n+(r.prepared_names_count??0),0)}let gt=null;const Ba=()=>{const o=qe(!1),n=qe(!1),r=qe([]),d=be([r],([b])=>{const S=b.reduce((g,i)=>{const l=new Date(i.date),O=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;return(g[O]||=[]).push(i),g},{}),u=Object.entries(S).sort(([g],[i])=>new Date(i).getTime()-new Date(g).getTime()).map(([g,i])=>[g,i.sort((l,O)=>new Date(O.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(u)}),v=be([r],([b])=>{const S=b.reduce((g,i)=>((g[i.date]||=[]).push(i),g),{}),u=Object.entries(S).sort(([g],[i])=>new Date(i).getTime()-new Date(g).getTime()).map(([g,i])=>[g,i.sort((l,O)=>new Date(O.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(u)}),m=be([r],([b])=>{const S=b.reduce((g,i)=>{const O=`${new Date(i.date).getFullYear()}`;return(g[O]||=[]).push(i),g},{}),u=Object.entries(S).sort(([g],[i])=>parseInt(i)-parseInt(g)).map(([g,i])=>[g,i.sort((l,O)=>new Date(O.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(u)}),_=be(r,b=>b.reduce((S,u)=>({baptism_ordinances_count:S.baptism_ordinances_count+(u.baptism_ordinances_count??0),confirmation_ordinances_count:S.confirmation_ordinances_count+(u.confirmation_ordinances_count??0),initiatory_ordinances_count:S.initiatory_ordinances_count+(u.initiatory_ordinances_count??0),endowment_ordinances_count:S.endowment_ordinances_count+(u.endowment_ordinances_count??0),sealing_ordinances_count:S.sealing_ordinances_count+(u.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),f=be(v,b=>{const S={};for(const[u,g]of Object.entries(b))S[u]=g.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:u,created_at:i.created_at||l.created_at}),{});return S}),$=be(d,b=>{const S={};for(const[u,g]of Object.entries(b))S[u]=g.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:i.date||l.date,created_at:i.created_at||l.created_at}),{});return S}),T=be(m,b=>{const S={};for(const[u,g]of Object.entries(b))S[u]=g.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:i.date||l.date,created_at:i.created_at||l.created_at}),{});return S}),h=be(r,b=>b.reduce((S,u)=>S+(u.baptism_ordinances_count??0)+(u.confirmation_ordinances_count??0)+(u.initiatory_ordinances_count??0)+(u.endowment_ordinances_count??0)+(u.sealing_ordinances_count??0),0)),p=be(r,b=>b.reduce((S,u)=>S+(u.prepared_names_count??0),0));return gt={stores:{ready:o,loading:n,data:r,groupedByDate:v,groupedByMonth:d,groupedByYear:m,detailTotals:_,detailTotalsByDay:f,detailTotalsByMonth:$,detailTotalsByYear:T,totalOrdinancesPerformed:h,totalNamesPrepared:p},actions:{reload:async()=>{const b=await Bt();b?.length&&r.set(b)},apiCreate:async b=>{await $a(b)},apiUpdate:async(b,S)=>{await Da(b,S)},apiDelete:async b=>{await Ma(b)}}},gt},Ct=()=>gt?.stores&&Object.keys(gt.stores).length>0?gt:Ba(),ut=o=>ma().required(`${o} is required`).integer(`${o} must be a whole number`).min(0,`${o} cannot be negative`).max(999,`${o} cannot exceed 999`),Ca=va().shape({date:Jt().required("Date is required"),entry_type:Jt().required("Activity type is required"),prepared_names_count:ut("Name preparation count"),baptism_ordinances_count:ut("Baptism count"),confirmation_ordinances_count:ut("Confirmation count"),initiatory_ordinances_count:ut("Initiatory count"),endowment_ordinances_count:ut("Endowment count"),sealing_ordinances_count:ut("Sealing count")});function Oa(){const o=qe({});async function n(d){try{return await Ca.validate(d,{abortEarly:!1}),o.set({}),!0}catch(v){if(v instanceof _a){const m={};return v.inner.forEach(_=>{_.path&&(m[_.path]=_.message)}),o.set(m),!1}return!1}}function r(){o.set({})}return{validationErrors:o,validate:n,clearErrors:r}}function Kn(o){return ke(o).getDay()===0}function Tt(o,n){const r=ke(o),d=ke(n),v=r.getTime()-d.getTime();return v<0?-1:v>0?1:v}function Ra(o){return na(o,Date.now())}function Ia(o,n){const r=ke(o),d=ke(n),v=r.getFullYear()-d.getFullYear(),m=r.getMonth()-d.getMonth();return v*12+m}function ja(o){return n=>{const d=(o?Math[o]:Math.trunc)(n);return d===0?0:d}}function Pa(o,n){return+ke(o)-+ke(n)}function Aa(o){const n=ke(o);return n.setHours(23,59,59,999),n}function Na(o){const n=ke(o),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Fa(o){const n=ke(o);return+Aa(n)==+Na(n)}function Wa(o,n){const r=ke(o),d=ke(n),v=Tt(r,d),m=Math.abs(Ia(r,d));let _;if(m<1)_=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-v*m);let f=Tt(r,d)===-v;Fa(ke(o))&&m===1&&Tt(o,d)===1&&(f=!1),_=v*(m-Number(f))}return _===0?0:_}function qa(o,n,r){const d=Pa(o,n)/1e3;return ja(r?.roundingMethod)(d)}function Ya(o){return pa(o,{weekStartsOn:1})}function Ga(o,n,r){const d=sa(),v=r?.locale??d.locale??oa,m=2520,_=Tt(o,n);if(isNaN(_))throw new RangeError("Invalid time value");const f=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:_});let $,T;_>0?($=ke(n),T=ke(o)):($=ke(o),T=ke(n));const h=qa(T,$),p=(Lt(T)-Lt($))/1e3,c=Math.round((h-p)/60);let M;if(c<2)return r?.includeSeconds?h<5?v.formatDistance("lessThanXSeconds",5,f):h<10?v.formatDistance("lessThanXSeconds",10,f):h<20?v.formatDistance("lessThanXSeconds",20,f):h<40?v.formatDistance("halfAMinute",0,f):h<60?v.formatDistance("lessThanXMinutes",1,f):v.formatDistance("xMinutes",1,f):c===0?v.formatDistance("lessThanXMinutes",1,f):v.formatDistance("xMinutes",c,f);if(c<45)return v.formatDistance("xMinutes",c,f);if(c<90)return v.formatDistance("aboutXHours",1,f);if(c<Ut){const R=Math.round(c/60);return v.formatDistance("aboutXHours",R,f)}else{if(c<m)return v.formatDistance("xDays",1,f);if(c<$t){const R=Math.round(c/Ut);return v.formatDistance("xDays",R,f)}else if(c<$t*2)return M=Math.round(c/$t),v.formatDistance("aboutXMonths",M,f)}if(M=Wa(T,$),M<12){const R=Math.round(c/$t);return v.formatDistance("xMonths",R,f)}else{const R=M%12,P=Math.trunc(M/12);return R<3?v.formatDistance("aboutXYears",P,f):R<9?v.formatDistance("overXYears",P,f):v.formatDistance("almostXYears",P+1,f)}}function Ht(o,n){return Ga(o,Ra(o),n)}function La(o){return ke(o).getFullYear()}var Ua=I('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),Ja=I('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),Va=I('<div class="invalid-feedback d-block"> </div>'),Ha=I("<option> </option>"),Xa=I('<div class="invalid-feedback d-block"> </div>'),za=I('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" required/> <!></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select></select> <!></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function Ka(o,n){_e(n,!1);const r=()=>he(c,"$validationErrors",d),[d,v]=Qe(),m=W();let _=te(n,"drawerId",8,""),f=te(n,"minDate",8,null),$=te(n,"maxDate",8,null);const{stores:{loading:T},actions:{apiCreate:h,reload:p}}=Ct(),{validationErrors:c,validate:M,clearErrors:R}=Oa(),P=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function b(){const U=le(new Date,"yyyy-MM-dd");return!f()||!$()||U>=f()&&U<=$()?U:U<f()?f():$()}const S={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:b(),approved:!0};let u=W({...S}),g=W({message:"",type:null});const i=()=>{B(u,{...S,date:b()}),B(g,{message:"",type:null}),R();const U=`[data-bs-target="#${_()}"]`,X=document.querySelector(U);X&&X.click()},l=()=>{window.location.reload()},O=()=>{w()},k=()=>{B(g,{message:"",type:null})},w=async()=>{if(await M(e(u)))try{Gt(T,!0),B(g,{message:"",type:null}),await h({prepared_names_count:e(u).prepared_names_count,baptism_ordinances_count:e(u).baptism_ordinances_count,confirmation_ordinances_count:e(u).confirmation_ordinances_count,initiatory_ordinances_count:e(u).initiatory_ordinances_count,endowment_ordinances_count:e(u).endowment_ordinances_count,sealing_ordinances_count:e(u).sealing_ordinances_count,entry_type:e(u).entry_type,date:e(u).date,created_at:new Date().toISOString(),approved:!0}),await p(),i()}catch(X){console.error("[WardGoalEntryForm] Submission failed:",X),X instanceof Error?X.message.includes("expired")||X.message.includes("JWT")?B(g,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):X.message.includes("fetch")||X.message.includes("network")?B(g,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):B(g,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):B(g,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{Gt(T,!1)}};K(()=>e(u),()=>{B(m,(e(u).prepared_names_count||0)+(e(u).baptism_ordinances_count||0)+(e(u).confirmation_ordinances_count||0)+(e(u).initiatory_ordinances_count||0)+(e(u).endowment_ordinances_count||0)+(e(u).sealing_ordinances_count||0))}),Oe(),ge();var C=za(),q=a(C);{var j=U=>{var X=Ja(),xe=a(X),Ge=s(a(xe),2),Re=a(Ge),pe=a(Re);{var Le=Pe=>{var Xe=nt("⚠️ Session Issue");y(Pe,Xe)},Ue=Pe=>{var Xe=we(),vt=oe(Xe);{var mt=Je=>{var Q=nt("⚠️ Connection Problem");y(Je,Q)},kt=Je=>{var Q=nt("⚠️ Something Went Wrong");y(Je,Q)};J(vt,Je=>{e(g),D(()=>e(g).type==="network")?Je(mt):Je(kt,!1)},!0)}y(Pe,Xe)};J(pe,Pe=>{e(g),D(()=>e(g).type==="expired")?Pe(Le):Pe(Ue,!1)})}t(Re);var We=s(Re,2),lt=a(We,!0);t(We);var ct=s(We,2),tt=a(ct);{var wt=Pe=>{var Xe=Ua();Ae("click",Xe,O),y(Pe,Xe)};J(tt,Pe=>{e(g),D(()=>e(g).type==="network")&&Pe(wt)})}var xt=s(tt,2);t(ct),t(Ge);var It=s(Ge,2);t(xe),t(X),Z(()=>{x(lt,(e(g),D(()=>e(g).message))),Be(xt,1,`btn btn-${e(g),D(()=>e(g).type==="network"?"secondary":"primary")??""}`)}),Ae("click",xt,l),Ae("click",It,k),y(U,X)};J(q,U=>{e(g),D(()=>e(g).type)&&U(j)})}var N=s(q,4),Y=s(a(N),2),G=a(Y);{var z=U=>{var X=nt();Z(()=>x(X,`Select a date within the goal period (${f()??""} to ${$()??""})`)),y(U,X)},ee=U=>{var X=nt("When was this activity done?");y(U,X)};J(G,U=>{f()&&$()?U(z):U(ee,!1)})}t(Y);var A=s(Y,2);Et(A);let F;var L=s(A,2);{var ae=U=>{var X=Va(),xe=a(X,!0);t(X),Z(()=>x(xe,(r(),D(()=>r().date)))),y(U,X)};J(L,U=>{r(),D(()=>r().date)&&U(ae)})}t(N);var se=s(N,2),V=s(a(se),4);Z(()=>{e(u),aa(()=>{r()})});let H;Me(V,5,()=>P,Ce,(U,X)=>{var xe=Ha(),Ge=a(xe,!0);t(xe);var Re={};Z(()=>{x(Ge,e(X)),Re!==(Re=e(X))&&(xe.value=(xe.__value=e(X))??"")}),y(U,xe)}),t(V);var re=s(V,2);{var ce=U=>{var X=Xa(),xe=a(X,!0);t(X),Z(()=>x(xe,(r(),D(()=>r().entry_type)))),y(U,X)};J(re,U=>{r(),D(()=>r().entry_type)&&U(ce)})}t(se);var ne=s(se,2);{let U=rt(()=>(r(),D(()=>r().prepared_names_count||"")));dt(ne,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get error(){return e(U)},get count(){return e(u).prepared_names_count},set count(X){at(u,e(u).prepared_names_count=X)},$$legacy:!0})}var de=s(ne,2);{let U=rt(()=>(r(),D(()=>r().baptism_ordinances_count||"")));dt(de,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get error(){return e(U)},get count(){return e(u).baptism_ordinances_count},set count(X){at(u,e(u).baptism_ordinances_count=X)},$$legacy:!0})}var me=s(de,2);{let U=rt(()=>(r(),D(()=>r().confirmation_ordinances_count||"")));dt(me,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get error(){return e(U)},get count(){return e(u).confirmation_ordinances_count},set count(X){at(u,e(u).confirmation_ordinances_count=X)},$$legacy:!0})}var $e=s(me,2);{let U=rt(()=>(r(),D(()=>r().initiatory_ordinances_count||"")));dt($e,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get error(){return e(U)},get count(){return e(u).initiatory_ordinances_count},set count(X){at(u,e(u).initiatory_ordinances_count=X)},$$legacy:!0})}var De=s($e,2);{let U=rt(()=>(r(),D(()=>r().endowment_ordinances_count||"")));dt(De,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get error(){return e(U)},get count(){return e(u).endowment_ordinances_count},set count(X){at(u,e(u).endowment_ordinances_count=X)},$$legacy:!0})}var Se=s(De,2);{let U=rt(()=>(r(),D(()=>r().sealing_ordinances_count||"")));dt(Se,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get error(){return e(U)},get count(){return e(u).sealing_ordinances_count},set count(X){at(u,e(u).sealing_ordinances_count=X)},$$legacy:!0})}var Te=s(Se,2),Ne=s(a(Te),2),He=a(Ne,!0);t(Ne),t(Te);var et=s(Te,2),Fe=a(et),Ye=s(Fe,2);t(et),t(C),Z(()=>{F=Be(A,1,"form-control",null,F,{"is-invalid":r().date}),ie(A,"min",f()),ie(A,"max",$()),H=Be(V,1,"form-select form-control-sm",null,H,{"is-invalid":r().entry_type}),x(He,e(m))}),Nt(A,()=>e(u).date,U=>at(u,e(u).date=U)),ra(V,()=>e(u).entry_type,U=>at(u,e(u).entry_type=U)),Ae("click",Fe,i),Ae("click",Ye,w),y(o,C),fe(),v()}var Qa=I('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),Za=I('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),er=I('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function Ot(o,n){_e(n,!1);let r=te(n,"entry",8),d=te(n,"showSubmittedData",8,!1),v=te(n,"showType",8,!1);ge();var m=er(),_=a(m);{var f=N=>{var Y=Qa(),G=a(Y),z=a(G,!0);t(G),t(Y),Z(()=>x(z,(E(r()),D(()=>r()?.entry_type)))),y(N,Y)};J(_,N=>{v()&&N(f)})}var $=s(_,2),T=s(a($),2),h=a(T,!0);t(T),t($);var p=s($,2),c=s(a(p),2),M=a(c,!0);t(c),t(p);var R=s(p,2),P=s(a(R),2),b=a(P,!0);t(P),t(R);var S=s(R,2),u=s(a(S),2),g=a(u,!0);t(u),t(S);var i=s(S,2),l=s(a(i),2),O=a(l,!0);t(l),t(i);var k=s(i,2),w=s(a(k),2),C=a(w,!0);t(w),t(k);var q=s(k,2);{var j=N=>{var Y=Za(),G=s(a(Y),2),z=a(G),ee=a(z,!0);t(z);var A=s(z,2),F=a(A,!0);t(A),t(G),t(Y),Z((L,ae)=>{x(ee,L),x(F,ae)},[()=>(E(Ht),E(r()),D(()=>Ht(new Date(r().created_at),{addSuffix:!0}))),()=>(E(le),E(r()),D(()=>le(new Date(r().created_at),"MMMM d, yyyy 'at' h:mm a")))]),y(N,Y)};J(q,N=>{E(d()),E(r()),D(()=>d()&&r()?.created_at)&&N(j)})}t(m),Z(()=>{x(h,(E(r()),D(()=>r()?.prepared_names_count))),x(M,(E(r()),D(()=>r()?.baptism_ordinances_count))),x(b,(E(r()),D(()=>r()?.confirmation_ordinances_count))),x(g,(E(r()),D(()=>r()?.initiatory_ordinances_count))),x(O,(E(r()),D(()=>r()?.endowment_ordinances_count))),x(C,(E(r()),D(()=>r()?.sealing_ordinances_count)))}),y(o,m),fe()}var tr=I('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function ar(o,n){_e(n,!1);const r=W();let d=te(n,"entry",8),v=te(n,"date",8);K(()=>E(d()),()=>{B(r,d().baptism_ordinances_count+d().confirmation_ordinances_count+d().initiatory_ordinances_count+d().endowment_ordinances_count+d().sealing_ordinances_count)}),Oe(),ge();var m=tr(),_=oe(m),f=a(_),$=a(f,!0);t(f);var T=s(f,2);t(_);var h=s(_,2),p=a(h),c=a(p),M=a(c);Ot(M,{get entry(){return d()}});var R=s(M,2),P=a(R),b=s(a(P),2),S=a(b,!0);t(b),t(P),t(R),t(c),t(p),t(h),Z((u,g)=>{x($,u),x(T,` ${g??""}`),x(S,e(r))},[()=>(E(le),E(ve),E(v()),D(()=>le(ve(v(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(E(le),E(ve),E(v()),D(()=>le(ve(v(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),y(o,m),fe()}var rr=I('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function nr(o,n){_e(n,!1);let r=te(n,"entry",8),d=te(n,"date",8),v=W(0);K(()=>E(r()),()=>{B(v,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Oe(),ge();var m=rr(),_=oe(m),f=a(_),$=a(f,!0);t(f);var T=s(f,2);t(_);var h=s(_,2),p=a(h),c=a(p),M=a(c);Ot(M,{get entry(){return r()}});var R=s(M,2),P=a(R),b=s(a(P),2),S=a(b,!0);t(b),t(P),t(R),t(c),t(p),t(h),Z((u,g)=>{x($,u),x(T,` ${g??""}`),x(S,e(v))},[()=>(E(le),E(ve),E(d()),D(()=>le(ve(d(),"yyyy-MM",new Date),"yyyy"))),()=>(E(le),E(ve),E(d()),D(()=>le(ve(d(),"yyyy-MM",new Date),"MMMM")))]),y(o,m),fe()}var sr=I('<div> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function or(o,n){_e(n,!1);let r=te(n,"entry",8),d=te(n,"date",8),v=W(0);K(()=>E(r()),()=>{B(v,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Oe(),ge();var m=sr(),_=oe(m),f=a(_,!0);t(_);var $=s(_,2),T=a($),h=a(T),p=a(h);Ot(p,{get entry(){return r()}});var c=s(p,2),M=a(c),R=s(a(M),2),P=a(R,!0);t(R),t(M),t(c),t(h),t(T),t($),Z(()=>{x(f,d()),x(P,e(v))}),y(o,m),fe()}var ir=I('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),lr=I('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function cr(o,n){_e(n,!1);let r=te(n,"entries",8),d=te(n,"date",8);ge();var v=lr(),m=oe(v),_=a(m),f=a(_,!0);t(_);var $=s(_,2);t(m);var T=s(m,2);Me(T,5,r,Ce,(h,p)=>{var c=ir(),M=a(c),R=a(M);Ot(R,{get entry(){return e(p)},showSubmittedData:!0,showType:!0}),t(M),t(c),y(h,c)}),t(T),Z((h,p)=>{x(f,h),x($,` ${p??""}`)},[()=>(E(le),E(ve),E(d()),D(()=>le(ve(d(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(E(le),E(ve),E(d()),D(()=>le(ve(d(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),y(o,v),fe()}var dr=I('<div class="d-flex flex-column gap-3"><!></div>'),ur=I('<div class="d-flex flex-column gap-3"></div>'),vr=I('<div class="d-flex flex-column gap-3"></div>'),mr=I('<div class="d-flex flex-column gap-3"></div>'),_r=I('<div class="d-flex flex-column gap-3"><!> <!> <!> <!> <!></div>');function fr(o,n){_e(n,!1);const r=()=>he(h,"$groupedByDate",_),d=()=>he(p,"$detailTotalsByDay",_),v=()=>he(c,"$detailTotalsByMonth",_),m=()=>he(M,"$detailTotalsByYear",_),[_,f]=Qe(),$=W(),{stores:{data:T,groupedByDate:h,detailTotalsByDay:p,detailTotalsByMonth:c,detailTotalsByYear:M},actions:{reload:R}}=Ct();let P=te(n,"query",8,""),b=W([]),S=W([]);const u=T.subscribe(j=>{B(b,j),B(S,[...j])});function g(j){return j?j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const i=j=>{let N=[...e(b)];return j&&(N=N.filter(Y=>Y?.entry_type?Y?.entry_type?.trim().toLowerCase().match(e($).trim().toLowerCase()):!1)),N};bt(R),ca(u);let l=W("by-month");const O=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"},{key:"By Year",value:"by-year"}];K(()=>E(P()),()=>{B($,g(P()?.trim().toLowerCase()))}),K(()=>(E(P()),e(S)),()=>{P()?B(b,i(P())):B(b,[...e(S)])}),Oe(),ge();var k=we(),w=oe(k);{var C=j=>{var N=_r(),Y=a(N);Qt(Y,{get options(){return O},helperText:"",label:"Filter",disabled:!1,get value(){return e(l)},set value(V){B(l,V)},$$legacy:!0});var G=s(Y,2);{var z=V=>{var H=we(),re=oe(H);Me(re,1,()=>(r(),D(()=>Object.entries(r()))),Ce,(ce,ne)=>{var de=Ke(()=>Ve(e(ne),2));let me=()=>e(de)[0],$e=()=>e(de)[1];var De=dr(),Se=a(De);cr(Se,{get date(){return me()},get entries(){return $e()}}),t(De),y(ce,De)}),y(V,H)};J(G,V=>{e(l)==="by-submission"&&V(z)})}var ee=s(G,2);{var A=V=>{var H=ur();Me(H,5,()=>(d(),D(()=>Object.entries(d()))),Ce,(re,ce)=>{var ne=Ke(()=>Ve(e(ce),2));let de=()=>e(ne)[0],me=()=>e(ne)[1];ar(re,{get date(){return de()},get entry(){return me()}})}),t(H),y(V,H)};J(ee,V=>{e(l)==="by-day"&&V(A)})}var F=s(ee,2);{var L=V=>{var H=vr();Me(H,5,()=>(v(),D(()=>Object.entries(v()))),Ce,(re,ce)=>{var ne=Ke(()=>Ve(e(ce),2));let de=()=>e(ne)[0],me=()=>e(ne)[1];nr(re,{get date(){return de()},get entry(){return me()}})}),t(H),y(V,H)};J(F,V=>{e(l)==="by-month"&&V(L)})}var ae=s(F,2);{var se=V=>{var H=mr();Me(H,5,()=>(m(),D(()=>Object.entries(m()))),Ce,(re,ce)=>{var ne=Ke(()=>Ve(e(ce),2));let de=()=>e(ne)[0],me=()=>e(ne)[1];or(re,{get date(){return de()},get entry(){return me()}})}),t(H),y(V,H)};J(ae,V=>{e(l)==="by-year"&&V(se)})}t(N),y(j,N)},q=j=>{var N=nt("No Data Found");y(j,N)};J(w,j=>{e(b),D(()=>e(b)?.length)?j(C):j(q,!1)})}y(o,k),fe(),f()}var gr=I('<span class="d-flex justify-content-end">0</span>'),pr=I('<span class="d-flex justify-content-end">0</span>'),yr=I('<span class="d-flex justify-content-end"> </span>'),br=I('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),hr=I('<span class="d-flex justify-content-end"> </span>'),wr=I('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),xr=I('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function kr(o,n){_e(n,!1);const r=()=>he(b,"$entries",v),d=()=>he(S,"$loading",v),[v,m]=Qe(),_=W(),f=W(),$=W(),T=W(),h=W(),p=W();let c=te(n,"goal",8),M=te(n,"drawerId",8),R=te(n,"onSubmitClick",8),P=te(n,"onViewResultsClick",8);const{stores:{data:b,loading:S}}=Ct();function u(Q,ue){const[Ie,je,ze]=Q.split("-").map(Number),[ot,it,_t]=ue.split("-").map(Number),ft=new Date(Ie,je-1,ze),Zt=new Date(ot,it-1,_t),ea=ft.toLocaleDateString("en-US",{month:"short"}),ta=Zt.toLocaleDateString("en-US",{month:"short"});return`${ea} to ${ta}`}function g(Q){return Q.toLocaleString("en-US")}function i(Q){return Q!==null?g(Q):"--"}K(()=>(r(),E(c())),()=>{B(_,Sa(r(),c().start_date,c().end_date))}),K(()=>e(_),()=>{B(f,Ta(e(_)))}),K(()=>e(_),()=>{B($,Ea(e(_)))}),K(()=>E(c()),()=>{B(T,u(c().start_date,c().end_date))}),K(()=>(E(c()),e(f)),()=>{B(h,c().temple_ordinances_goal&&c().temple_ordinances_goal>0?Math.round(e(f)/c().temple_ordinances_goal*100):null)}),K(()=>(E(c()),e($)),()=>{B(p,c().names_prepared_goal&&c().names_prepared_goal>0?Math.round(e($)/c().names_prepared_goal*100):null)}),Oe(),ge();var l=xr(),O=a(l),k=a(O),w=s(k),C=a(w);t(w),t(O);var q=s(O,2),j=a(q),N=a(j),Y=a(N),G=s(a(Y)),z=a(G),ee=s(a(z)),A=a(ee),F=a(A,!0);t(A),t(ee);var L=s(ee),ae=a(L);{var se=Q=>{var ue=gr();y(Q,ue)};J(ae,Q=>{d()||Q(se)})}t(L),t(z);var V=s(z),H=s(a(V)),re=a(H),ce=a(re,!0);t(re),t(H);var ne=s(H),de=a(ne);{var me=Q=>{var ue=pr();y(Q,ue)};J(de,Q=>{d()||Q(me)})}t(ne),t(V);var $e=s(V),De=a($e);let Se;var Te=s(De);let Ne;var He=a(Te),et=a(He,!0);t(He),t(Te);var Fe=s(Te);let Ye;var U=a(Fe);{var X=Q=>{var ue=yr(),Ie=a(ue,!0);t(ue),Z(je=>x(Ie,je),[()=>(e(f),D(()=>g(e(f))))]),y(Q,ue)};J(U,Q=>{d()||Q(X)})}t(Fe),t($e);var xe=s($e);{var Ge=Q=>{var ue=br(),Ie=a(ue),je=a(Ie),ze=a(je),ot=a(ze);t(ze);var it=s(ze,2),_t=a(it);t(it),t(je),t(Ie),t(ue),Z(ft=>{yt(ot,`width: ${ft??""}%`),ie(ot,"aria-valuenow",e(h)),x(_t,`${e(h)??""}%`)},[()=>(e(h),D(()=>Math.min(e(h),100)))]),y(Q,ue)};J(xe,Q=>{e(h),E(c()),D(()=>e(h)!==null&&c().temple_ordinances_goal)&&Q(Ge)})}var Re=s(xe),pe=a(Re);let Le;var Ue=s(pe);let We;var lt=a(Ue),ct=a(lt,!0);t(lt),t(Ue);var tt=s(Ue);let wt;var xt=a(tt);{var It=Q=>{var ue=hr(),Ie=a(ue,!0);t(ue),Z(je=>x(Ie,je),[()=>(e($),D(()=>g(e($))))]),y(Q,ue)};J(xt,Q=>{d()||Q(It)})}t(tt),t(Re);var Pe=s(Re);{var Xe=Q=>{var ue=wr(),Ie=a(ue),je=a(Ie),ze=a(je),ot=a(ze);t(ze);var it=s(ze,2),_t=a(it);t(it),t(je),t(Ie),t(ue),Z(ft=>{yt(ot,`width: ${ft??""}%`),ie(ot,"aria-valuenow",e(p)),x(_t,`${e(h)??""}%`)},[()=>(e(p),D(()=>Math.min(e(p),100)))]),y(Q,ue)};J(Pe,Q=>{e(p),E(c()),D(()=>e(p)!==null&&c().names_prepared_goal)&&Q(Xe)})}t(G),t(Y),t(N);var vt=s(N,2),mt=a(vt);t(vt);var kt=s(vt,2),Je=a(kt);t(kt),t(j),t(q),t(l),Z((Q,ue,Ie,je)=>{x(k,`Ward Mission Goal ${E(c()),D(()=>c().year)??""} `),x(C,`(${e(T)??""})`),x(F,Q),x(ce,ue),Se=Be(De,1,"",null,Se,{"border-bottom-0":e(h)!==null&&c().temple_ordinances_goal}),Ne=Be(Te,1,"",null,Ne,{"border-bottom-0":e(h)!==null&&c().temple_ordinances_goal}),x(et,Ie),Ye=Be(Fe,1,"",null,Ye,{"border-bottom-0":e(h)!==null&&c().temple_ordinances_goal}),Le=Be(pe,1,"",null,Le,{"border-bottom-0":e(p)!==null&&c().names_prepared_goal}),We=Be(Ue,1,"",null,We,{"border-bottom-0":e(p)!==null&&c().names_prepared_goal}),x(ct,je),wt=Be(tt,1,"",null,wt,{"border-bottom-0":e(p)!==null&&c().names_prepared_goal}),ie(mt,"data-bs-target",`#${M()??""}`),ie(mt,"aria-controls",M()),ie(Je,"data-bs-target",`#${M()??""}`),ie(Je,"aria-controls",M())},[()=>(E(c()),D(()=>i(c().baptisms_goal))),()=>(E(c()),D(()=>i(c().family_sealings_goal))),()=>(E(c()),D(()=>i(c().temple_ordinances_goal))),()=>(E(c()),D(()=>i(c().names_prepared_goal)))]),Ae("click",mt,function(...Q){R()?.apply(this,Q)}),Ae("click",Je,function(...Q){P()?.apply(this,Q)}),y(o,l),fe(),m()}var $r=I("<!> <!>",1),Dr=I('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),Mr=I('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),Sr=I('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),Tr=I('<div class="col-12"><!> <!></div>'),Er=I('<div class="row g-3"></div>'),Br=I("<!> <!>",1);function Qn(o,n){_e(n,!1);const r=()=>he(P,"$activeGoals",m),d=()=>he(S,"$currentGoalPeriod",m),v=()=>he(b,"$goalsLoading",m),[m,_]=Qe(),f=W(),$=W();let T=W("form"),h=jt(),p=W("end"),c=W(),M=W(!1);const{actions:{reload:R}}=Ct(),{stores:{activeGoals:P,loading:b,currentGoalPeriod:S},actions:{reload:u}}=fa();let g=W(null);function i(){B(T,"form")}function l(){B(T,"results")}bt(async()=>{await Promise.all([u(),R()]);const j=new URLSearchParams(window.location.search);B(g,j.get("log-temple-activity"))}),K(()=>(e(g),e(c),e(M)),()=>{e(g)&&e(g)==="yes"&&e(c)&&!e(M)&&(e(c).click(),B(M,!0))}),K(()=>e(T),()=>{B(p,e(T)==="form"?"end":"start")}),K(()=>e(T),()=>{B(f,e(T)==="form"?"Temple Activity":"Temple Activity Results")}),K(()=>r(),()=>{B($,(()=>{const j=new Date().toISOString().split("T")[0];return r().filter(N=>N.start_date<=j&&N.end_date>=j)})())}),Oe(),ge();var O=Br(),k=oe(O);Pt(k,{get placement(){return e(p)},get title(){return e(f)},get id(){return h},children:(j,N)=>{var Y=$r(),G=oe(Y);{var z=F=>{{let L=rt(()=>(d(),D(()=>d()?.start_date))),ae=rt(()=>(d(),D(()=>d()?.end_date)));Ka(F,{get drawerId(){return h},get minDate(){return e(L)},get maxDate(){return e(ae)}})}};J(G,F=>{e(T)==="form"&&F(z)})}var ee=s(G,2);{var A=F=>{fr(F,{})};J(ee,F=>{e(T)==="results"&&F(A)})}y(j,Y)},$$slots:{default:!0}});var w=s(k,2);{var C=j=>{var N=Dr();y(j,N)},q=j=>{var N=we(),Y=oe(N);{var G=ee=>{var A=Mr();y(ee,A)},z=ee=>{var A=Er();Me(A,5,()=>e($),F=>F.id,(F,L)=>{var ae=Tr(),se=a(ae);kr(se,{get goal(){return e(L)},get drawerId(){return h},onSubmitClick:i,onViewResultsClick:l});var V=s(se,2);{var H=re=>{var ce=Sr();da(ce,ne=>B(c,ne),()=>e(c)),Z(()=>{ie(ce,"data-bs-target",`#${h??""}`),ie(ce,"aria-controls",h)}),Ae("click",ce,i),y(re,ce)};J(V,re=>{e(L),e($),D(()=>e(L)===e($)[0])&&re(H)})}t(ae),y(F,ae)}),t(A),y(ee,A)};J(Y,ee=>{e($),D(()=>e($).length===0)?ee(G):ee(z,!1)},!0)}y(j,N)};J(w,j=>{v()?j(C):j(q,!1)})}y(o,O),fe(),_()}const Xt=qe([]),zt=qe([]);let Mt=!1,St=!1;async function Cr(){if(Mt)return At(Xt);Mt=!0;try{const{data:o,error:n}=await Ze.from("bom_reading_schedule").select("*").order("day_number",{ascending:!0});if(n)throw console.error("[API] Get BOM reading schedule failed:",n),new Error(`Failed to load reading schedule: ${n.message}`);const r=o||[];return Xt.set(r),setTimeout(()=>Mt=!1,800),r}catch(o){throw Mt=!1,console.error("[API] Unexpected error fetching BOM reading schedule:",o),o}}async function Rt(){if(St)return At(zt);St=!0;try{const{data:o,error:n}=await Ze.from("bom_reading_entries").select("*").order("created_at",{ascending:!1});if(n)throw console.error("[API] Get BOM reading entries failed:",n),new Error(`Failed to load reading entries: ${n.message}`);const r=o||[];return zt.set(r),setTimeout(()=>St=!1,800),r}catch(o){throw St=!1,console.error("[API] Unexpected error fetching BOM reading entries:",o),o}}async function Or(o){try{const{data:n,error:r}=await Ze.from("bom_reading_entries").insert([o]).select();if(r)throw console.error("[API] Create BOM reading entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.code==="23503"?new Error("Invalid chapter reference"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await Rt(),console.log("[API] BOM reading entry created successfully"),n?n[0]:void 0}catch(n){throw console.error("[API] Unexpected error creating BOM reading entry:",n),n}}async function Rr(o,n){try{const{data:r,error:d}=await Ze.from("bom_reading_entries").update(n).eq("id",o).select();if(d)throw console.error("[API] Update BOM reading entry failed:",d),new Error(`Failed to update entry: ${d.message}`);return await Rt(),console.log("[API] BOM reading entry updated successfully"),r?r[0]:void 0}catch(r){throw console.error("[API] Unexpected error updating BOM reading entry:",r),r}}async function Ir(o){try{const{error:n}=await Ze.from("bom_reading_entries").delete().eq("id",o);if(n)throw console.error("[API] Delete BOM reading entry failed:",n),new Error(`Failed to delete entry: ${n.message}`);await Rt(),console.log("[API] BOM reading entry deleted successfully")}catch(n){throw console.error("[API] Unexpected error deleting BOM reading entry:",n),n}}function jr(o){const n=new Map;return o.forEach(r=>{const d=n.get(r.chapter_ref)||0;n.set(r.chapter_ref,d+1)}),n}let pt=null;const Pr=()=>{const o=qe(!1),n=qe(!1),r=qe([]),d=qe([]),v=be(d,i=>jr(i)),m=be(r,i=>{const l=new Date().toISOString().split("T")[0];return i.find(O=>O.date===l)||null}),_=be([r,v],([i,l])=>{const O=new Date().toISOString().split("T")[0];return i.map(k=>({chapter_ref:k.chapter_ref,day_number:k.day_number,date:k.date,book_name:k.book_name,chapter_number:k.chapter_number,read_count:l.get(k.chapter_ref)||0,is_today:k.date===O,is_past:k.date<O,is_future:k.date>O}))}),f=be(r,i=>i.length),$=be(v,i=>{let l=0;return i.forEach(O=>{O>0&&l++}),l}),T=be([f,$],([i,l])=>i>0?Math.round(l/i*100):0),h=be(d,i=>{const l={};i.forEach(k=>{l[k.date]||(l[k.date]=[]),l[k.date].push(k)}),Object.keys(l).forEach(k=>{l[k].sort((w,C)=>new Date(C.created_at??"").getTime()-new Date(w.created_at??"").getTime())});const O=Object.entries(l).sort(([k],[w])=>new Date(w).getTime()-new Date(k).getTime());return Object.fromEntries(O)}),p=be(d,i=>{const l={};i.forEach(k=>{const w=new Date(k.date),C=La(w),q=ia(w),j=`${C}-W${q.toString().padStart(2,"0")}`;l[j]||(l[j]=[]),l[j].push(k)}),Object.keys(l).forEach(k=>{l[k].sort((w,C)=>new Date(C.created_at??"").getTime()-new Date(w.created_at??"").getTime())});const O=Object.entries(l).sort(([k],[w])=>w.localeCompare(k));return Object.fromEntries(O)}),c=be(d,i=>{const l={};i.forEach(k=>{const w=k.date.substring(0,7);l[w]||(l[w]=[]),l[w].push(k)}),Object.keys(l).forEach(k=>{l[k].sort((w,C)=>new Date(C.created_at??"").getTime()-new Date(w.created_at??"").getTime())});const O=Object.entries(l).sort(([k],[w])=>w.localeCompare(k));return Object.fromEntries(O)}),M=be(h,i=>{const l={};return Object.entries(i).forEach(([O,k])=>{const w=new Set(k.map(C=>C.chapter_ref));l[O]={period:O,totalReadings:k.length,uniqueChapters:w.size,chapterRefs:w}}),l}),R=be(p,i=>{const l={};return Object.entries(i).forEach(([O,k])=>{const w=new Set(k.map(C=>C.chapter_ref));l[O]={period:O,totalReadings:k.length,uniqueChapters:w.size,chapterRefs:w}}),l}),P=be(c,i=>{const l={};return Object.entries(i).forEach(([O,k])=>{const w=new Set(k.map(C=>C.chapter_ref));l[O]={period:O,totalReadings:k.length,uniqueChapters:w.size,chapterRefs:w}}),l}),b=async()=>{n.set(!0);try{const[i,l]=await Promise.all([Cr(),Rt()]);r.set(i),d.set(l),o.set(!0)}catch(i){console.error("[State] Failed to reload BOM reading data:",i),o.set(!0)}finally{n.set(!1)}};return pt={stores:{ready:o,loading:n,schedule:r,entries:d,progressByChapter:v,todaysReading:m,chapterProgress:_,totalChapters:f,chaptersReadByAnyone:$,overallProgress:T,groupedByDate:h,groupedByWeek:p,groupedByMonth:c,aggregatedByDate:M,aggregatedByWeek:R,aggregatedByMonth:P},actions:{reload:b,apiCreate:async i=>{const l=await Or(i);return await b(),l},apiUpdate:async(i,l)=>{await Rr(i,l),await b()},apiDelete:async i=>{await Ir(i),await b()}}},pt},ht=()=>pt?.stores&&Object.keys(pt.stores).length>0?pt:Pr(),Ft="bom_reading_submissions",Wt="bom_reading_entry_ids";function qt(){if(typeof localStorage>"u")return new Set;try{const o=localStorage.getItem(Ft);if(!o)return new Set;const n=JSON.parse(o);return new Set(Array.isArray(n)?n:[])}catch(o){return console.error("[ReadingTracker] Error reading from localStorage:",o),new Set}}function Ar(o){return qt().has(o)}function Nr(o){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const n=qt();n.add(o),localStorage.setItem(Ft,JSON.stringify([...n]))}catch(n){console.error("[ReadingTracker] Error writing to localStorage:",n)}}function Yt(){if(typeof localStorage>"u")return{};try{const o=localStorage.getItem(Wt);if(!o)return{};const n=JSON.parse(o);return typeof n=="object"&&n!==null?n:{}}catch(o){return console.error("[ReadingTracker] Error reading entry IDs from localStorage:",o),{}}}function Fr(o){return Yt()[o]??null}function Wr(o,n){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const r=Yt();r[o]=n,localStorage.setItem(Wt,JSON.stringify(r))}catch(r){console.error("[ReadingTracker] Error storing entry ID:",r)}}function qr(o){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const n=qt();n.delete(o),localStorage.setItem(Ft,JSON.stringify([...n]));const r=Yt();delete r[o],localStorage.setItem(Wt,JSON.stringify(r))}catch(n){console.error("[ReadingTracker] Error writing to localStorage:",n)}}var Yr=I('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>'),Gr=I('<i class="bi bi-check-circle-fill me-1"></i> Undo',1),Lr=I('<i class="bi bi-check-circle me-1"></i> Read',1),Ur=I('<div class="alert alert-danger alert-sm mt-2 mb-0 svelte-18cjesl" role="alert"><i class="bi bi-exclamation-triangle-fill me-1"></i> </div>'),Jr=I('<div class="bom-reading-entry-form svelte-18cjesl"><div class="d-flex align-items-center gap-2 gap-md-3"><button type="button"><!></button></div> <!></div>');function Vr(o,n){_e(n,!1);const r=()=>he(f,"$loading",d),[d,v]=Qe();let m=te(n,"chapterRef",8),_=te(n,"onSuccess",8,void 0);const{stores:{loading:f},actions:{apiCreate:$,apiDelete:T}}=ht();let h=W(!1),p=W(""),c=W(!1),M=W(null);bt(()=>{B(c,Ar(m()))});async function R(){if(e(c)){B(p,"You have already marked this chapter as read");return}try{B(h,!0),B(p,"");const w={date:new Date().toISOString().split("T")[0],chapter_ref:m()},C=await $(w);C&&C.id&&(Nr(m()),Wr(m(),C.id),B(c,!0),_()&&_()())}catch(w){B(p,w instanceof Error?w.message:"Failed to save reading"),console.error("[BomReadingEntryForm] Error:",w)}finally{B(h,!1)}}async function P(){const w=Fr(m());if(!w){B(p,"Cannot undo - entry ID not found");return}try{B(h,!0),B(p,""),await T(w),qr(m()),B(c,!1),_()&&_()()}catch(C){B(p,C instanceof Error?C.message:"Failed to undo"),console.error("[BomReadingEntryForm] Undo error:",C)}finally{B(h,!1)}}K(()=>(e(p),e(M)),()=>{e(p)&&(e(M)&&clearTimeout(e(M)),B(M,setTimeout(()=>{B(p,""),B(M,null)},1e3)))}),Oe(),ge();var b=Jr(),S=a(b),u=a(S),g=a(u);{var i=w=>{var C=Yr();y(w,C)},l=w=>{var C=we(),q=oe(C);{var j=Y=>{var G=Gr();st(),y(Y,G)},N=Y=>{var G=Lr();st(),y(Y,G)};J(q,Y=>{e(c)?Y(j):Y(N,!1)},!0)}y(w,C)};J(g,w=>{e(h)?w(i):w(l,!1)})}t(u),t(S);var O=s(S,2);{var k=w=>{var C=Ur(),q=s(a(C));t(C),Z(()=>x(q,` ${e(p)??""}`)),y(w,C)};J(O,w=>{e(p)&&w(k)})}t(b),Z(()=>{Be(u,1,`btn btn-sm ${e(c)?"btn-outline-danger":"btn-primary"}`,"svelte-18cjesl"),u.disabled=e(h)||r(),ie(u,"title",e(c)?"Undo marking this chapter as read":"Mark this chapter as read")}),Ae("click",u,function(...w){(e(c)?P:R)?.apply(this,w)}),y(o,b),fe(),v()}var Hr=I('<span class="badge bg-info text-dark svelte-x251hv"><i class="bi bi-calendar-day"></i> Today</span>'),Xr=I('<i class="bi bi-check-circle"></i> ',1),zr=I('<i class="bi bi-circle"></i> 0',1),Kr=I('<div><div class="card-body p-2"><div class="d-flex align-items-baseline gap-2 flex-wrap mb-2"><small class="text-muted"> </small> <span> </span> <!></div> <div class="d-flex align-items-center justify-content-between gap-2"><small class="text-muted"> </small> <div class="d-flex align-items-center gap-2 flex-shrink-0"><span><!></span> <!></div></div></div></div>');function Kt(o,n){_e(n,!1);const r=W(),d=W(),v=W();let m=te(n,"progress",8);const _=!1;K(()=>E(m()),()=>{B(r,le(ve(m().date,"yyyy-MM-dd",new Date),"MMM d, yyyy (EEE)"))}),K(()=>E(m()),()=>{B(d,m().is_today?"border-primary border-2":m().is_past?"past-reading":"")}),K(()=>E(m()),()=>{B(v,m().read_count>0?"bg-success":"bg-secondary")}),Oe();var f={compact:_};ge();var $=Kr(),T=a($),h=a(T),p=a(h),c=a(p);t(p);var M=s(p,2),R=a(M,!0);t(M);var P=s(M,2);{var b=q=>{var j=Hr();y(q,j)};J(P,q=>{E(m()),D(()=>m().is_today)&&q(b)})}t(h);var S=s(h,2),u=a(S),g=a(u,!0);t(u);var i=s(u,2),l=a(i),O=a(l);{var k=q=>{var j=Xr(),N=s(oe(j));Z(()=>x(N,` ${E(m()),D(()=>m().read_count)??""}`)),y(q,j)},w=q=>{var j=zr();st(),y(q,j)};J(O,q=>{E(m()),D(()=>m().read_count>0)?q(k):q(w,!1)})}t(l);var C=s(l,2);return Vr(C,{get chapterRef(){return E(m()),D(()=>m().chapter_ref)}}),t(i),t(S),t(T),t($),Z(()=>{Be($,1,`card bom-day-card ${e(d)??""} mb-2`,"svelte-x251hv"),x(c,`Day ${E(m()),D(()=>m().day_number)??""}`),Be(M,1,`fw-semibold ${E(m()),D(()=>m().is_today?"text-primary":"")??""}`,"svelte-x251hv"),x(R,(E(m()),D(()=>m().chapter_ref))),x(g,e(r)),Be(l,1,`badge ${e(v)??""}`,"svelte-x251hv")}),y(o,$),ga(n,"compact",_),fe(f)}var Qr=I('<div class="alert alert-warning" role="alert"><i class="bi bi-exclamation-triangle me-2"></i> No readings found for the selected filter.</div>'),Zr=I('<div class="book-group mb-4 svelte-nbte28"><h4 class="border-bottom pb-2 mb-3 svelte-nbte28"><i class="bi bi-book me-2"></i> <span class="badge bg-secondary ms-2"> </span></h4> <!></div>'),en=I("<div><!></div>"),tn=I('<div class="text-center mt-4"><button class="btn btn-outline-primary"><!></button></div>'),an=I('<div class="text-center mt-2"><p class="text-muted mb-0"><i class="bi bi-info-circle me-1"></i> </p></div>'),rn=I('<div class="bom-reading-schedule svelte-nbte28"><div class="card mb-3"><div class="card-body"><div class="d-flex flex-column gap-3"><div><label for="search" class="form-label fw-bold">Search</label> <div class="input-group"><span class="input-group-text"><i class="bi bi-search"></i></span> <input type="text" class="form-control" id="search" placeholder="Search chapters or books..."/></div></div> <div><div class="form-check"><input class="form-check-input" type="checkbox" id="groupByBook"/> <label class="form-check-label" for="groupByBook">Group by Book</label></div></div></div></div></div> <div class="reading-list svelte-nbte28"><!></div> <!> <!></div>');function nn(o,n){_e(n,!1);const r=()=>he($,"$chapterProgress",v),d=()=>he(T,"$todaysReading",v),[v,m]=Qe(),_=W(),f=W(),{stores:{chapterProgress:$,todaysReading:T}}=ht();let h=W(""),p=W(!1),c=W(!1);function M(A,F,L){let ae=A;if(L||(ae=ae.filter(se=>!se.is_future)),F){const se=F.toLowerCase();ae=ae.filter(V=>V.chapter_ref.toLowerCase().includes(se)||V.book_name.toLowerCase().includes(se))}return ae}function R(A){const F={};return A.forEach(L=>{F[L.book_name]||(F[L.book_name]=[]),F[L.book_name].push(L)}),F}bt(()=>{d()&&setTimeout(()=>{const A=document.getElementById("today-reading");A&&A.scrollIntoView({behavior:"smooth",block:"center"})},500)}),K(()=>(r(),e(h),e(c)),()=>{B(_,M(r(),e(h),e(c)))}),K(()=>(e(p),e(_)),()=>{B(f,e(p)?R(e(_)):null)}),Oe(),ge();var P=rn(),b=a(P),S=a(b),u=a(S),g=a(u),i=s(a(g),2),l=s(a(i),2);Et(l),t(i),t(g);var O=s(g,2),k=a(O),w=a(k);Et(w),st(2),t(k),t(O),t(u),t(S),t(b);var C=s(b,2),q=a(C);{var j=A=>{var F=Qr();y(A,F)},N=A=>{var F=we(),L=oe(F);{var ae=V=>{var H=we(),re=oe(H);Me(re,1,()=>(e(f),D(()=>Object.entries(e(f)))),Ce,(ce,ne)=>{var de=Ke(()=>Ve(e(ne),2));let me=()=>e(de)[0],$e=()=>e(de)[1];var De=Zr(),Se=a(De),Te=s(a(Se)),Ne=s(Te),He=a(Ne);t(Ne),t(Se);var et=s(Se,2);Me(et,1,$e,Ce,(Fe,Ye)=>{Kt(Fe,{get progress(){return e(Ye)},compact:!0})}),t(De),Z(()=>{x(Te,` ${me()??""} `),x(He,`${$e(),D(()=>$e().length)??""} days`)}),y(ce,De)}),y(V,H)},se=V=>{var H=we(),re=oe(H);Me(re,1,()=>e(_),Ce,(ce,ne)=>{var de=en(),me=a(de);Kt(me,{get progress(){return e(ne)}}),t(de),Z(()=>ie(de,"id",(e(ne),D(()=>e(ne).is_today?"today-reading":void 0)))),y(ce,de)}),y(V,H)};J(L,V=>{e(f)?V(ae):V(se,!1)},!0)}y(A,F)};J(q,A=>{e(_),D(()=>e(_).length===0)?A(j):A(N,!1)})}t(C);var Y=s(C,2);{var G=A=>{var F=tn(),L=a(F),ae=a(L);{var se=H=>{var re=nt("Hide Future Chapters");y(H,re)},V=H=>{var re=nt("Show Future Chapters");y(H,re)};J(ae,H=>{e(c)?H(se):H(V,!1)})}t(L),t(F),Ae("click",L,()=>B(c,!e(c))),y(A,F)};J(Y,A=>{e(h)||A(G)})}var z=s(Y,2);{var ee=A=>{var F=an(),L=a(F),ae=s(a(L));t(L),t(F),Z(()=>x(ae,` Showing ${e(_),D(()=>e(_).length)??""} reading days`)),y(A,F)};J(z,A=>{e(_),D(()=>e(_).length>20)&&A(ee)})}t(P),Nt(l,()=>e(h),A=>B(h,A)),ua(w,()=>e(p),A=>B(p,A)),y(o,P),fe(),m()}var sn=I('<span class="badge bg-primary ms-1"> </span>'),on=I('<span class="badge bg-secondary me-1 mb-1"> <!></span>'),ln=I('<li class="list-group-item"><div class="small"><strong>Chapters read:</strong> <div class="mt-1"></div></div></li>'),cn=I('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Reading Submissions:</span> <strong> </strong></div> <div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong> </strong></div></li> <!></ul></div></div>');function dn(o,n){_e(n,!1);const r=W(),d=W();let v=te(n,"entries",8),m=te(n,"date",8);K(()=>E(v()),()=>{B(r,v().reduce((k,w)=>(k[w.chapter_ref]=(k[w.chapter_ref]||0)+1,k),{}))}),K(()=>e(r),()=>{B(d,Object.keys(e(r)).sort())}),Oe(),ge();var _=cn(),f=a(_),$=a(f),T=a($),h=a(T,!0);t(T);var p=s(T,3),c=a(p,!0);t(p),t($);var M=s($,2),R=a(M),P=a(R),b=s(a(P),2),S=a(b,!0);t(b),t(P);var u=s(P,2),g=s(a(u),2),i=a(g,!0);t(g),t(u),t(R);var l=s(R,2);{var O=k=>{var w=ln(),C=a(w),q=s(a(C),2);Me(q,5,()=>e(d),Ce,(j,N)=>{var Y=on(),G=a(Y),z=s(G);{var ee=A=>{var F=sn(),L=a(F,!0);t(F),Z(()=>x(L,(e(r),e(N),D(()=>e(r)[e(N)])))),y(A,F)};J(z,A=>{e(r),e(N),D(()=>e(r)[e(N)]>1)&&A(ee)})}t(Y),Z(()=>x(G,`${e(N)??""} `)),y(j,Y)}),t(q),t(C),t(w),y(k,w)};J(l,k=>{e(d),D(()=>e(d).length>0)&&k(O)})}t(M),t(f),t(_),Z((k,w)=>{x(h,k),x(c,w),x(S,(E(v()),D(()=>v().length))),x(i,(e(d),D(()=>e(d).length)))},[()=>(E(le),E(ve),E(m()),D(()=>le(ve(m(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(E(le),E(ve),E(m()),D(()=>le(ve(m(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),y(o,_),fe()}var un=I('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div></li></ul></div></div>');function vn(o,n){_e(n,!1);let r=te(n,"date",8),d=te(n,"aggregate",8);ge();var v=un(),m=a(v),_=a(m),f=a(_),$=a(f,!0);t(f);var T=s(f,3),h=a(T,!0);t(T),t(_);var p=s(_,2),c=a(p),M=a(c),R=s(a(M),2),P=a(R,!0);t(R),t(M),t(c);var b=s(c,2),S=a(b),u=s(a(S),2),g=a(u,!0);t(u),t(S),t(b),t(p),t(m),t(v),Z((i,l)=>{x($,i),x(h,l),x(P,(E(d()),D(()=>d().totalReadings))),x(g,(E(d()),D(()=>d().uniqueChapters)))},[()=>(E(le),E(ve),E(r()),D(()=>le(ve(r(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(E(le),E(ve),E(r()),D(()=>le(ve(r(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),y(o,v),fe()}var mn=I('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function _n(o,n){_e(n,!1);const r=W(),d=W(),v=W(),m=W(),_=W(),f=W(),$=W(),T=W(),h=W(),p=W();let c=te(n,"week",8),M=te(n,"aggregate",8);K(()=>(e(r),e(d),E(c())),()=>{(F=>{var L=Ve(F,2);B(r,L[0]),B(d,L[1])})(c().split("-W"))}),K(()=>e(d),()=>{B(v,parseInt(e(d),10))}),K(()=>e(r),()=>{B(m,parseInt(e(r),10))}),K(()=>e(m),()=>{B(_,new Date(e(m),0,1))}),K(()=>(e(_),e(v)),()=>{B(f,la(new Date(e(_).getTime()+(e(v)-1)*7*24*60*60*1e3)))}),K(()=>e(f),()=>{B($,Ya(e(f)))}),K(()=>(e(v),e(m)),()=>{B(T,`Week ${e(v)} of ${e(m)}`)}),K(()=>(e(f),e($)),()=>{B(h,`${le(e(f),"MMM d")} - ${le(e($),"MMM d, yyyy")}`)}),K(()=>E(M()),()=>{B(p,Math.round(M().uniqueChapters/244*100))}),Oe(),ge();var R=mn(),P=a(R),b=a(P),S=a(b),u=a(S,!0);t(S);var g=s(S,3),i=a(g,!0);t(g),t(b);var l=s(b,2),O=a(l),k=a(O),w=s(a(k),2),C=a(w,!0);t(w),t(k),t(O);var q=s(O,2),j=a(q),N=s(a(j),2),Y=a(N,!0);t(N),t(j);var G=s(j,2),z=a(G);t(G);var ee=s(G,2),A=a(ee);t(ee),t(q),t(l),t(P),t(R),Z(()=>{x(u,e(T)),x(i,e(h)),x(C,(E(M()),D(()=>M().totalReadings))),x(Y,(E(M()),D(()=>M().uniqueChapters))),yt(z,`width: ${e(p)??""}%`),ie(z,"aria-valuenow",e(p)),x(A,`${e(p)??""}% of all BOM chapters`)}),y(o,R),fe()}var fn=I('<div class="mb-3"><div class="card"><div class="card-header"><strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function gn(o,n){_e(n,!1);const r=W();let d=te(n,"month",8),v=te(n,"aggregate",8);K(()=>E(v()),()=>{B(r,Math.round(v().uniqueChapters/244*100))}),Oe(),ge();var m=fn(),_=a(m),f=a(_),$=a(f),T=a($,!0);t($),t(f);var h=s(f,2),p=a(h),c=a(p),M=s(a(c),2),R=a(M,!0);t(M),t(c),t(p);var P=s(p,2),b=a(P),S=s(a(b),2),u=a(S,!0);t(S),t(b);var g=s(b,2),i=a(g);t(g);var l=s(g,2),O=a(l);t(l),t(P),t(h),t(_),t(m),Z(k=>{x(T,k),x(R,(E(v()),D(()=>v().totalReadings))),x(u,(E(v()),D(()=>v().uniqueChapters))),yt(i,`width: ${e(r)??""}%`),ie(i,"aria-valuenow",e(r)),x(O,`${e(r)??""}% of all BOM chapters`)},[()=>(E(le),E(ve),E(d()),D(()=>le(ve(d(),"yyyy-MM",new Date),"MMMM yyyy")))]),y(o,m),fe()}var pn=I('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),yn=I('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),bn=I('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),hn=I('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),wn=I('<div class="bom-submissions"><div class="mb-3"><!></div> <div class="submissions-list svelte-1qt8gnu"><!></div></div>');function xn(o,n){_e(n,!1);const r=()=>he($,"$groupedByDate",_),d=()=>he(T,"$aggregatedByDate",_),v=()=>he(h,"$aggregatedByWeek",_),m=()=>he(p,"$aggregatedByMonth",_),[_,f]=Qe(),{stores:{groupedByDate:$,aggregatedByDate:T,aggregatedByWeek:h,aggregatedByMonth:p}}=ht();let c=W("by-day");ge();var M=wn(),R=a(M),P=a(R);Qt(P,{options:[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Week",value:"by-week"},{key:"By Month",value:"by-month"}],label:"View",disabled:!1,get value(){return e(c)},set value(i){B(c,i)},$$legacy:!0}),t(R);var b=s(R,2),S=a(b);{var u=i=>{var l=we(),O=oe(l);{var k=C=>{var q=pn();y(C,q)},w=C=>{var q=we(),j=oe(q);Me(j,1,()=>Object.entries(r()),Ce,(N,Y)=>{var G=Ke(()=>Ve(e(Y),2));let z=()=>e(G)[0],ee=()=>e(G)[1];dn(N,{get date(){return z()},get entries(){return ee()}})}),y(C,q)};J(O,C=>{Object.keys(r()).length===0?C(k):C(w,!1)})}y(i,l)},g=i=>{var l=we(),O=oe(l);{var k=C=>{var q=we(),j=oe(q);{var N=G=>{var z=yn();y(G,z)},Y=G=>{var z=we(),ee=oe(z);Me(ee,1,()=>Object.entries(d()),Ce,(A,F)=>{var L=Ke(()=>Ve(e(F),2));let ae=()=>e(L)[0],se=()=>e(L)[1];vn(A,{get date(){return ae()},get aggregate(){return se()}})}),y(G,z)};J(j,G=>{Object.keys(d()).length===0?G(N):G(Y,!1)})}y(C,q)},w=C=>{var q=we(),j=oe(q);{var N=G=>{var z=we(),ee=oe(z);{var A=L=>{var ae=bn();y(L,ae)},F=L=>{var ae=we(),se=oe(ae);Me(se,1,()=>Object.entries(v()),Ce,(V,H)=>{var re=Ke(()=>Ve(e(H),2));let ce=()=>e(re)[0],ne=()=>e(re)[1];_n(V,{get week(){return ce()},get aggregate(){return ne()}})}),y(L,ae)};J(ee,L=>{Object.keys(v()).length===0?L(A):L(F,!1)})}y(G,z)},Y=G=>{var z=we(),ee=oe(z);{var A=F=>{var L=we(),ae=oe(L);{var se=H=>{var re=hn();y(H,re)},V=H=>{var re=we(),ce=oe(re);Me(ce,1,()=>Object.entries(m()),Ce,(ne,de)=>{var me=Ke(()=>Ve(e(de),2));let $e=()=>e(me)[0],De=()=>e(me)[1];gn(ne,{get month(){return $e()},get aggregate(){return De()}})}),y(H,re)};J(ae,H=>{Object.keys(m()).length===0?H(se):H(V,!1)})}y(F,L)};J(ee,F=>{e(c)==="by-month"&&F(A)},!0)}y(G,z)};J(j,G=>{e(c)==="by-week"?G(N):G(Y,!1)},!0)}y(C,q)};J(O,C=>{e(c)==="by-day"?C(k):C(w,!1)},!0)}y(i,l)};J(S,i=>{e(c)==="by-submission"?i(u):i(g,!1)})}t(b),t(M),y(o,M),fe(),f()}var kn=I(`<div class="card"><div class="card-header"><div class="d-flex align-items-center gap-2"><span class="fw-600 svelte-8saayj">Book of Mormon Challenge</span></div></div> <div class="card-body"><div class="d-flex flex-column gap-3"><div><div class="d-flex justify-content-between align-items-center mb-2"><h5 class="mb-0">Overall Completion</h5> <span class="badge bg-primary fs-5"> </span></div> <div class="progress mb-2" style="height: 10px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <p class="text-muted mb-0"> </p></div> <div class="row g-3"><div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-calendar3 fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Days Remaining</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-book fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">BOM Chapters</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-check-circle fs-1 text-success mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Chapters Read</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-people fs-1 text-warning mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Reading Submissions</p></div></div></div></div> <div class="alert alert-info mb-0" role="alert"><div class="d-flex gap-2"><i class="bi bi-info-circle"></i> <div>This progress shows how many chapters have been read by <strong>anyone</strong> in the ward.
						Each person can mark chapters as read anonymously.</div></div></div> <div class="d-flex flex-column gap-2"><div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Join the Challenge</button></div> <div class="d-block"><button class="btn btn-sm btn-outline-primary w-100" type="button" data-bs-toggle="offcanvas">Record Your Reading</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div></div>`);function $n(o,n){_e(n,!1);const r=()=>he(S,"$chapterProgress",v),d=()=>he(u,"$entries",v),[v,m]=Qe(),_=W(),f=W(),$=W(),T=W(),h=W(),p=W(),c=W();let M=te(n,"scheduleDrawerId",8),R=te(n,"submissionsDrawerId",8),P=te(n,"onJoinClick",8),b=te(n,"onRecordClick",8);const{stores:{chapterProgress:S,entries:u}}=ht();function g(pe){return pe.toLocaleString("en-US")}K(()=>r(),()=>{B(_,r().filter(pe=>pe.book_name!=="Review"))}),K(()=>e(_),()=>{B(f,Array.from(new Set(e(_).map(pe=>pe.chapter_ref))))}),K(()=>e(f),()=>{B($,e(f).length)}),K(()=>(e(f),e(_)),()=>{B(T,e(f).filter(pe=>e(_).find(Le=>Le.chapter_ref===pe&&Le.read_count>0)).length)}),K(()=>d(),()=>{B(h,d().length)}),K(()=>(e($),e(T)),()=>{B(p,e($)>0?Math.round(e(T)/e($)*100):0)}),K(()=>{},()=>{B(c,(()=>{const pe=new Date,Ue=new Date(pe.getFullYear(),11,31).getTime()-pe.getTime(),We=Math.ceil(Ue/(1e3*60*60*24));return We>0?We:0})())}),Oe(),ge();var i=kn(),l=s(a(i),2),O=a(l),k=a(O),w=a(k),C=s(a(w),2),q=a(C);t(C),t(w);var j=s(w,2),N=a(j);t(j);var Y=s(j,2),G=a(Y);t(Y),t(k);var z=s(k,2),ee=a(z),A=a(ee),F=a(A),L=s(a(F),2),ae=a(L,!0);t(L),st(2),t(F),t(A),t(ee);var se=s(ee,2),V=a(se),H=a(V),re=s(a(H),2),ce=a(re,!0);t(re),st(2),t(H),t(V),t(se);var ne=s(se,2),de=a(ne),me=a(de),$e=s(a(me),2),De=a($e);t($e),st(2),t(me),t(de),t(ne);var Se=s(ne,2),Te=a(Se),Ne=a(Te),He=s(a(Ne),2),et=a(He,!0);t(He),st(2),t(Ne),t(Te),t(Se),t(z);var Fe=s(z,4),Ye=a(Fe),U=a(Ye);t(Ye);var X=s(Ye,2),xe=a(X);t(X);var Ge=s(X,2),Re=a(Ge);t(Ge),t(Fe),t(O),t(l),t(i),Z((pe,Le,Ue,We,lt,ct,tt)=>{x(q,`${e(p)??""}%`),yt(N,`width: ${e(p)??""}%`),ie(N,"aria-valuenow",e(p)),x(G,`${pe??""} of ${Le??""} chapters read by at
					least one person`),x(ae,Ue),x(ce,We),x(De,`${lt??""} / ${ct??""}`),x(et,tt),ie(U,"data-bs-target",`#${M()??""}`),ie(U,"aria-controls",M()),ie(xe,"data-bs-target",`#${M()??""}`),ie(xe,"aria-controls",M()),ie(Re,"data-bs-target",`#${R()??""}`),ie(Re,"aria-controls",R())},[()=>(e(T),D(()=>g(e(T)))),()=>(e($),D(()=>g(e($)))),()=>(e(c),D(()=>g(e(c)))),()=>(e($),D(()=>g(e($)))),()=>(e(T),D(()=>g(e(T)))),()=>(e($),D(()=>g(e($)))),()=>(e(h),D(()=>g(e(h))))]),Ae("click",U,function(...pe){P()?.apply(this,pe)}),Ae("click",xe,function(...pe){b()?.apply(this,pe)}),y(o,i),fe(),m()}var Dn=I('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading reading challenge...</span></div></div>'),Mn=I(`<div class="alert alert-info mb-3" role="alert"><h5 class="alert-heading"><i class="bi bi-info-circle me-2"></i>How to Join the Challenge</h5> <p class="mb-2">Our ward is reading the Book of Mormon together! Here's how to participate:</p> <ol class="mb-2"><li>Read any chapter from the Book of Mormon</li> <li>Click the "Read" button next to the chapter you completed</li> <li>Your reading is tracked anonymously to show ward progress</li></ol> <p class="mb-0"><strong>Remember:</strong> You don't have to follow the schedule exactly! Read ahead, catch
					up, or go at your own pace. The goal is to show that our ward is moving forward in reading the
					Book of Mormon together.</p></div>`),Sn=I("<!> <!>",1),Tn=I("<!> <!> <!>",1);function Zn(o,n){_e(n,!1);const r=()=>he($,"$loading",v),d=()=>he(T,"$ready",v),[v,m]=Qe(),_=jt(),f=jt(),{stores:{loading:$,ready:T},actions:{reload:h}}=ht();let p=W(!1);function c(){B(p,!0)}function M(){B(p,!1)}bt(async()=>{await h()}),ge();var R=we(),P=oe(R);{var b=u=>{var g=Dn();y(u,g)},S=u=>{var g=Tn(),i=oe(g);$n(i,{get scheduleDrawerId(){return _},get submissionsDrawerId(){return f},onJoinClick:c,onRecordClick:M});var l=s(i,2);Pt(l,{get id(){return _},title:"2026 Book of Mormon Reading Challenge",placement:"end",children:(k,w)=>{var C=Sn(),q=oe(C);{var j=Y=>{var G=Mn();y(Y,G)};J(q,Y=>{e(p)&&Y(j)})}var N=s(q,2);nn(N,{}),y(k,C)},$$slots:{default:!0}});var O=s(l,2);Pt(O,{get id(){return f},title:"Reading Submissions",placement:"start",children:(k,w)=>{xn(k,{})},$$slots:{default:!0}}),y(u,g)};J(P,u=>{r()&&!d()?u(b):u(S,!1)})}y(o,R),fe(),m()}export{Zn as B,Xn as S,zn as W,Qn as a,Hn as b,Kn as i};
