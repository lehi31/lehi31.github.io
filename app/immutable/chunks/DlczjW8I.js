const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BmjvMspZ.js","./NZTpNUN0.js","./69_IOA4Y.js","./DIeogL5L.js","./DVz9v3yu.js","./DxLPEELx.js","./BMBpHE4F.js","./CxzQr61Z.js","./BoUt-3Zs.js","./Zte9W7v2.js","./nNGA7-yB.js","./BWaOrR6H.js","./BUApaBEI.js","./CdEA5IGF.js","./B41JjjA1.js","./o20ij3IV.js","./Ct0CT-jp.js","../assets/Spinner.DTjfhZ6-.css","./DSlOdaIK.js","./BfcxZoyz.js","./DGrLfHTH.js","./r7-tBYgy.js","./C5uofNW2.js","../assets/confirm.ChDpDKXb.css","./Ccm4kzzT.js","./CmsKOCeN.js","./rN9Z-W37.js","../assets/AnnouncementWidgetItem.CWeg1mPe.css"])))=>i.map(i=>d[i]);
import{_ as oa}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{o as Ne}from"./CxzQr61Z.js";import{p as Ce,aj as N,ak as je,f as X,g as t,a as Pe,E as m,s as f,D as c,c as s,r as a,u,t as z,R as xt,an as ia,w as it,ao as la}from"./DVz9v3yu.js";import{p as ca,i as g,a as Le,b as Y,e as J,s as mt}from"./DxLPEELx.js";import{e as jt,i as va}from"./BoUt-3Zs.js";import{f as l,a as r,c as be,t as wt}from"./BMBpHE4F.js";import{s as Z}from"./Zte9W7v2.js";import{k as lt,l as Oe,m as da,t as ua,g as Re,p as H,f as h,P as Mt,c as pe}from"./nNGA7-yB.js";import{i as qe}from"./B41JjjA1.js";import{g as He,A as Qe,c as ye,e as Ct,a as _a,E as ma,b as fa}from"./BmjvMspZ.js";import{S as Fe}from"./Ct0CT-jp.js";import{v as Ue,D as Ke}from"./CiEVd2ZP.js";import{s as ga}from"./rN9Z-W37.js";function Te(ct,C,$){const v=lt(ct,$),D=lt(C,$),vt=+v-Oe(v),G=+D-Oe(D);return Math.round((vt-G)/da)}function We(ct){const C=ua(ct);return C.setDate(1),C.setHours(0,0,0,0),C}var pa=l('<button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Add event"><i class="bi bi-plus"></i></button>'),ya=l('<div class="event-actions svelte-i4p9jq"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit event"><i class="bi bi-pencil-square"></i></button></div>'),ba=l('<div class="daily-event-row svelte-i4p9jq"><div class="event-content svelte-i4p9jq"><!></div> <!></div>'),Ea=l('<li class="list-group-item py-3"><div class="d-flex flex-column flex-md-row gap-3"><div class="event-date-column d-flex flex-column align-items-start text-nowrap svelte-i4p9jq"><strong> </strong> <small class="text-muted"> </small></div> <div class="d-flex flex-column gap-3 flex-grow-1"></div></div></li>'),ha=l('<li class="list-group-item py-3 text-muted">No events scheduled this week.</li>'),ka=l('<li class="list-group-item list-group-item-light text-uppercase small fw-lighter p-0"><button><span class="d-flex align-items-center gap-2"><i></i> <span class="text-muted"> </span></span> <span> </span></button></li> <!>',1),xa=l('<li class="list-group-item bg-secondary text-white fw-semibold"> </li> <!>',1),wa=l('<ul class="list-group list-group-flush border-top-0"></ul>'),Ma=l('<div class="card-body text-muted small"><!></div>'),$a=l('<button class="btn btn-outline-secondary btn-sm">Reset</button>'),Aa=l('<div class="d-flex gap-2"><button class="btn btn-primary btn-sm">More</button> <button class="btn btn-outline-primary btn-sm">All</button></div>'),Sa=l('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <!></div>'),Da=l("<!> <!>",1),Ia=l('<div class="card-body text-muted small"><!></div>'),Oa=l('<div class="card"><div class="card-header"><div class="d-flex justify-content-between align-items-center"><span>Events</span> <div class="d-flex align-items-center gap-2"><!> <!></div></div></div> <!></div>'),Ta=l('<div class="d-flex flex-column gap-4"><!></div>'),Wa=l("<!> <!>",1);function sn(ct,C){Ce(C,!1);const $=()=>Y(Yt,"$weeksExpanded",dt),v=()=>Y(U,"$searchQuery",dt),D=()=>Y(Jt,"$calendarEvents",dt),vt=()=>Y(Rt,"$currentUserHasPermission",dt),G=()=>Y(qt,"$ready",dt),[dt,ft]=Le(),gt=m(),Pt=m(),Lt=m(),$t=m(),j=m(),Q=m(),tt=m(),F=m(),ut=m(),{stores:{currentUserHasPermission:Rt}}=Re(),{stores:{ready:qt,calendarEvents:Jt,weeksExpanded:Yt,searchQuery:U},actions:{reload:Zt}}=He(),At={title:"Event",description:"",location:"",event_type:"calendar_event",is_public:!0};let K=ca(C,"formId",24,Ue),pt=m(!1),Ht=m(""),St=m({...At});const Qt=8,k=8;let b=m(Qt),P=m(!1);const _t=ga();let et=m({});function Ft(e){return e===t(Pt)||e===t(Lt)}function Gt(e){const n=t(et)[e]??Ft(e);c(et,{...t(et),[e]:!n})}const te=e=>{const n=new Map;for(const i of e){if(!i.start_time)continue;const o=H(i.start_time);if(Number.isNaN(o.getTime()))continue;const d=lt(o,{weekStartsOn:1}),E=Ct(o,{weekStartsOn:1}),T=h(d,"yyyy-MM-dd"),bt=`${h(d,"MMM d")} – ${h(E,"MMM d")}`;let V=n.get(T);V||(V={key:T,label:bt,days:new Map},n.set(T,V));const p=h(o,"yyyy-MM-dd");let y=V.days.get(p);y||(y={key:p,displayDay:h(o,"EEE"),displayDate:h(o,"MMM d"),events:[]},V.days.set(p,y)),y.events.push(i)}const _=i=>{const o=h(i,"yyyy-MM-dd");n.has(o)||n.set(o,{key:o,label:`${h(i,"MMM d")} – ${h(Ct(i,{weekStartsOn:1}),"MMM d")}`,days:new Map})},x=Array.from(n.values());if(x.length){const i=x.reduce((E,T)=>T.key>E?T.key:E,x[0].key),o=H(i);let d=lt(new Date,{weekStartsOn:1});if(d>o)_(d);else for(;d<=o;)_(d),d=ye(d,1)}return Array.from(n.values()).sort((i,o)=>i.key<o.key?-1:i.key>o.key?1:0).map(i=>({key:i.key,label:i.label,days:Array.from(i.days.values()).sort((o,d)=>o.key<d.key?-1:o.key>d.key?1:0).map(o=>({...o,events:o.events.slice().sort((d,E)=>{const T=d.is_all_day?0:1,bt=E.is_all_day?0:1;if(T!==bt)return T-bt;const V=d.start_time?H(d.start_time).getTime():Number.MAX_SAFE_INTEGER,p=E.start_time?H(E.start_time).getTime():Number.MAX_SAFE_INTEGER;return V-p})}))}))};function ee(){c(b,t(b)+k)}function A(){c(b,520),c(P,!0)}function S(){c(b,Qt),c(P,!1)}Ne(async()=>{c(pt,vt()(Mt.CreateEvents)||vt()(Mt.EditOwnOrgEvents)||vt()(Mt.EditAllEvents)),await Zt()});const at=async e=>{if(c(Ht,"Item Form"),e?.meta_data?.recurring_instance&&e?.meta_data?.recurring_parent_id){const{getCalendarEvent:n}=await oa(async()=>{const{getCalendarEvent:x}=await import("./BmjvMspZ.js").then(i=>i.h);return{getCalendarEvent:x}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url),_=await n(e.meta_data.recurring_parent_id);if(_){c(St,{..._,category:_?.meta_data?.category,start_time:e.start_time,end_time:e.end_time,meta_data:{..._.meta_data,recurring_instance:!0,recurring_parent_id:e.meta_data.recurring_parent_id,recurring_instance_index:e.meta_data.recurring_instance_index}});return}}c(St,{...e,category:e?.meta_data?.category})};N(()=>t(b),()=>{c(gt,ye(_t,t(b)))}),N(()=>lt,()=>{c(Pt,h(lt(_t,{weekStartsOn:1}),"yyyy-MM-dd"))}),N(()=>lt,()=>{c(Lt,h(ye(lt(_t,{weekStartsOn:1}),1),"yyyy-MM-dd"))}),N(()=>($(),v(),t(et)),()=>{c($t,e=>$()||v()?!0:t(et)[e]!==void 0?t(et)[e]:Ft(e))}),N(()=>(D(),H),()=>{c(j,(D()??[]).filter(e=>e.start_time?H(e.start_time)>=_t:!1))}),N(()=>(v(),t(j),t(gt)),()=>{c(Q,v()?t(j):t(j).filter(e=>H(e.start_time)<=t(gt)))}),N(()=>t(Q),()=>{c(tt,te(t(Q)))}),N(()=>(v(),t(j),t(Q)),()=>{c(F,!v()&&t(j).length>t(Q).length)}),N(()=>(t(tt),h),()=>{c(ut,t(tt).reduce((e,n)=>{const _=H(n.key),x=Ct(_,{weekStartsOn:1}),i=h(x,"yyyy-MM"),o=h(x,"MMMM yyyy");return e[i]||(e[i]={label:o,weeks:[]}),e[i].weeks.push(n),e},{}))}),je(),qe();var yt=Wa(),nt=X(yt);Ke(nt,{get title(){return t(Ht)},get id(){return K()},children:(e,n)=>{Qe(e,{get eventItem(){return t(St)},get drawerId(){return K()},name:"event-item-form"})},$$slots:{default:!0}});var I=f(nt,2);{var L=e=>{var n=Oa(),_=s(n),x=s(_),i=f(s(x),2),o=s(i);_a(o,{});var d=f(o,2);{var E=p=>{var y=pa();z(()=>{Z(y,"data-bs-target",`#${K()??""}`),Z(y,"aria-controls",K())}),J("click",y,()=>at({...At,event_type:"calendar_event",start_time:new Date().toISOString(),end_time:new Date().toISOString(),is_all_day:!0})),r(p,y)};g(d,p=>{t(pt)&&p(E)})}a(i),a(x),a(_);var T=f(_,2);{var bt=p=>{var y=Da(),Ut=X(y);{var ae=R=>{var W=wa();jt(W,5,()=>(t(ut),u(()=>Object.entries(t(ut)))),([B,Et])=>B,(B,Et)=>{var It=ia(()=>la(t(Et),2));let w=()=>t(It)[1];var rt=xa(),q=X(rt),ot=s(q,!0);a(q);var Kt=f(q,2);jt(Kt,1,()=>(w(),u(()=>w().weeks)),Ot=>Ot.key,(Ot,M)=>{const Ee=xt(()=>(it(H),t(M),u(()=>H(t(M).key)))),Vt=xt(()=>(it(Ct),it(t(Ee)),u(()=>Ct(t(Ee),{weekStartsOn:1})))),he=xt(()=>(it(We),it(t(Vt)),u(()=>We(t(Vt))))),Ve=xt(()=>(it(Te),it(t(Vt)),it(t(he)),u(()=>Te(t(Vt),t(he),{weekStartsOn:1})+1))),se=xt(()=>(t($t),t(M),u(()=>t($t)(t(M).key)))),Bt=xt(()=>(t(M),u(()=>t(M).days.reduce((Wt,Xt)=>Wt+Xt.events.length,0))));var ke=ka(),re=X(ke),Tt=s(re);let xe;var oe=s(Tt),we=s(oe),Me=f(we,2),Be=s(Me);a(Me),a(oe);var ie=f(oe,2);let $e;var Xe=s(ie,!0);a(ie),a(Tt),a(re);var ze=f(re,2);{var Je=Wt=>{var Xt=be(),Ye=X(Xt);{var Ze=ht=>{var zt=be(),ta=X(zt);jt(ta,1,()=>(t(M),u(()=>t(M).days)),le=>le.key,(le,kt)=>{var ce=Ea(),Ae=s(ce),ve=s(Ae),de=s(ve),ea=s(de,!0);a(de);var Se=f(de,2),aa=s(Se,!0);a(Se),a(ve);var De=f(ve,2);jt(De,5,()=>(t(kt),u(()=>t(kt).events)),Nt=>Nt.id??`${Nt.start_time}-${Nt.meta_data?.recurring_instance_index??0}`,(Nt,Ie)=>{var ue=ba(),_e=s(ue),na=s(_e);ma(na,{get item(){return t(Ie)},showDate:!1,get searchQuery(){return v()}}),a(_e);var sa=f(_e,2);{var ra=me=>{var fe=ya(),ge=s(fe);a(fe),z(()=>{Z(ge,"data-bs-target",`#${K()??""}`),Z(ge,"aria-controls",K())}),J("click",ge,()=>at(t(Ie))),r(me,fe)};g(sa,me=>{t(pt)&&me(ra)})}a(ue),r(Nt,ue)}),a(De),a(Ae),a(ce),z(()=>{mt(ea,(t(kt),u(()=>t(kt).displayDay))),mt(aa,(t(kt),u(()=>t(kt).displayDate)))}),r(le,ce)}),r(ht,zt)},Ge=ht=>{var zt=ha();r(ht,zt)};g(Ye,ht=>{t(M),u(()=>t(M).days.length)?ht(Ze):ht(Ge,!1)})}r(Wt,Xt)};g(ze,Wt=>{t(se)&&Wt(Je)})}z(()=>{xe=pe(Tt,1,"week-header w-100 d-flex justify-content-between align-items-center border-0 bg-transparent p-2 text-start svelte-i4p9jq",null,xe,{"text-muted":t(Bt)===0}),Z(Tt,"title",t(se)?"Click to collapse week":"Click to expand week"),pe(we,1,`bi ${t(se)?"bi-chevron-up":"bi-chevron-down"}`),mt(Be,`Week ${t(Ve)??""} [${t(Bt)??""} Event${t(Bt)===1?"":"s"}]`),$e=pe(ie,1,"",null,$e,{"opacity-50":t(Bt)===0}),mt(Xe,(t(M),u(()=>t(M).label)))}),J("click",Tt,()=>Gt(t(M).key)),r(Ot,ke)}),z(()=>mt(ot,(w(),u(()=>w().label)))),r(B,rt)}),a(W),r(R,W)},ne=R=>{var W=Ma(),B=s(W);{var Et=w=>{var rt=wt("No events match your search.");r(w,rt)},It=w=>{var rt=wt("There are no upcoming events this month.");r(w,rt)};g(B,w=>{v()?w(Et):w(It,!1)})}a(W),r(R,W)};g(Ut,R=>{t(tt),u(()=>t(tt).length)?R(ae):R(ne,!1)})}var st=f(Ut,2);{var Dt=R=>{var W=Sa(),B=s(W),Et=s(B);a(B);var It=f(B,2);{var w=q=>{var ot=$a();J("click",ot,S),r(q,ot)},rt=q=>{var ot=Aa(),Kt=s(ot),Ot=f(Kt,2);a(ot),J("click",Kt,ee),J("click",Ot,A),r(q,ot)};g(It,q=>{t(P)?q(w):q(rt,!1)})}a(W),z(()=>mt(Et,`Showing ${t(Q),u(()=>t(Q).length)??""} of ${t(j),u(()=>t(j).length)??""} future events`)),r(R,W)};g(st,R=>{(t(F)||t(P))&&R(Dt)})}r(p,y)},V=p=>{var y=Ia(),Ut=s(y);{var ae=st=>{var Dt=wt("No events match your search.");r(st,Dt)},ne=st=>{var Dt=wt("There are no upcoming events scheduled.");r(st,Dt)};g(Ut,st=>{v()?st(ae):st(ne,!1)})}a(y),r(p,y)};g(T,p=>{D(),u(()=>D()?.length)?p(bt):p(V,!1)})}a(n),r(e,n)},O=e=>{var n=Ta(),_=s(n);Fe(_,{}),a(n),r(e,n)};g(I,e=>{G()?e(L):e(O,!1)})}r(ct,yt),Pe(),ft()}var Na=l('<button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Add announcement"><i class="bi bi-plus"></i></button>'),Ca=l('<div class="announcement-actions svelte-1axao39"><button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" aria-label="Edit announcement"><i class="bi bi-pencil-square"></i></button></div>'),ja=l('<li class="list-group-item py-2"><div class="announcement-row svelte-1axao39"><div class="announcement-content svelte-1axao39"><!></div> <!></div></li>'),Pa=l('<div class="card-footer d-flex align-items-center justify-content-between"><small> </small> <button class="btn btn-primary btn-sm">More</button></div>'),La=l('<ul class="list-group list-group-flush border-top-0"></ul> <!>',1),Ra=l('<div class="card-body text-muted small"><!></div>'),qa=l('<div class="card"><div class="card-header"><div class="d-flex justify-content-between align-items-center"><span>Announcements</span> <!></div></div> <!></div>'),Ha=l('<div class="d-flex flex-column gap-4"><!></div>'),Qa=l("<!> <!>",1);function rn(ct,C){Ce(C,!1);const $=()=>Y(j,"$searchQuery",G),v=()=>Y($t,"$announcements",G),D=()=>Y(Pt,"$currentUserHasPermission",G),vt=()=>Y(Lt,"$ready",G),[G,dt]=Le(),ft=m(),gt=m(),{stores:{currentUserHasPermission:Pt}}=Re(),{stores:{ready:Lt,announcements:$t,searchQuery:j},actions:{reload:Q}}=He(),tt={title:"Announcement",description:"",location:"",event_type:"announcement",is_public:!0},F=Ue();let ut=m(!1),Rt=m(""),qt=m({...tt});const Jt=5,Yt=5;let U=m(Jt);function Zt(){c(U,t(U)+Yt)}Ne(async()=>{c(ut,D()(Mt.CreateEvents)||D()(Mt.EditOwnOrgEvents)||D()(Mt.EditAllEvents)),await Q()});const At=k=>{c(Rt,"Announcement Form"),c(qt,{...k,category:k?.meta_data?.category})};N(()=>($(),v(),t(U)),()=>{c(ft,$()?v()??[]:(v()??[]).slice(0,t(U)))}),N(()=>($(),v(),t(U)),()=>{c(gt,!$()&&(v()?.length??0)>t(U))}),je(),qe();var K=Qa(),pt=X(K);Ke(pt,{get title(){return t(Rt)},get id(){return F},children:(k,b)=>{Qe(k,{get eventItem(){return t(qt)},get drawerId(){return F},name:"announcement-item-form"})},$$slots:{default:!0}});var Ht=f(pt,2);{var St=k=>{var b=qa(),P=s(b),_t=s(P),et=f(s(_t),2);{var Ft=A=>{var S=Na();z(()=>{Z(S,"data-bs-target",`#${F??""}`),Z(S,"aria-controls",F)}),J("click",S,()=>At({...tt,event_type:"calendar_event",start_time:new Date().toISOString(),end_time:new Date().toISOString(),is_all_day:!0})),r(A,S)};g(et,A=>{t(ut)&&A(Ft)})}a(_t),a(P);var Gt=f(P,2);{var te=A=>{var S=La(),at=X(S);jt(at,5,()=>t(ft),va,(I,L)=>{var O=ja(),e=s(O),n=s(e),_=s(n);fa(_,{get item(){return t(L)},get searchQuery(){return $()}}),a(n);var x=f(n,2);{var i=o=>{var d=Ca(),E=s(d);a(d),z(()=>{Z(E,"data-bs-target",`#${F??""}`),Z(E,"aria-controls",F)}),J("click",E,()=>At(t(L))),r(o,d)};g(x,o=>{t(ut)&&o(i)})}a(e),a(O),r(I,O)}),a(at);var yt=f(at,2);{var nt=I=>{var L=Pa(),O=s(L),e=s(O);a(O);var n=f(O,2);a(L),z(()=>mt(e,`Showing ${t(U)??""} of ${v(),u(()=>v()?.length??0)??""}`)),J("click",n,Zt),r(I,L)};g(yt,I=>{t(gt)&&I(nt)})}r(A,S)},ee=A=>{var S=be(),at=X(S);{var yt=nt=>{var I=Ra(),L=s(I);{var O=n=>{var _=wt("No announcements match your search.");r(n,_)},e=n=>{var _=wt("There are no announcements yet.");r(n,_)};g(L,n=>{$()?n(O):n(e,!1)})}a(I),r(nt,I)};g(at,nt=>{v(),u(()=>v()?.length===0)&&nt(yt)},!0)}r(A,S)};g(Gt,A=>{t(ft),u(()=>t(ft).length)?A(te):A(ee,!1)})}a(b),r(k,b)},Qt=k=>{var b=Ha(),P=s(b);Fe(P,{}),a(b),r(k,b)};g(Ht,k=>{vt()?k(St):k(Qt,!1)})}r(ct,K),Pe(),dt()}export{rn as A,sn as E,Te as d,We as s};
