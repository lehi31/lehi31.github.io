const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{B as A,h as Lt,d as Ht,K as $n,bc as zn,L as jt,Y as Bn,ac as qn,b1 as Zn,a_ as Kn,N as Gn,G as it,p as un,ah as q,n as H,ai as dn,c as v,r as p,a as fn,m as a,E as C,as as Qn,f as at,u as w,D as b,s as I,ap as Vn,R as Ve,F as lt}from"./SWWSvUpQ.js";import{b as $t,d as Jn,f as Y,a as S,c as Xn}from"./D8ekX_8E.js";import{_ as ea}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{g as zt,w as je,r as mn,d as Le,o as ta,a as na}from"./WW5OsAH7.js";import{p as _e,i as U,e as ve,s as se,a as aa,b as ra}from"./CU3XCoqN.js";import{e as pn,i as sa}from"./YJAcq9su.js";import{s as wt}from"./h5yPuqEw.js";import{t as xt,a as E,e as _n,p as $e,z as Qe,i as Te,F as Bt,A as Dt,f as Ce,b as oa,h as ia,G as la,j as St}from"./CpBQByPR.js";import{i as vn}from"./Bgyk9asy.js";import{S as Je}from"./BkhfVKlj.js";import{v as qt,D as Zt}from"./DqFrpDF4.js";import{b as ca}from"./CvxMDV_e.js";import{b as ua}from"./Cc3l00Qu.js";import{f as da}from"./DG7soIoS.js";import{R as fa}from"./CrScDWWM.js";import{e as He}from"./CcoMiQA1.js";import{a as ma}from"./BMIVoN_G.js";import{s as pa,i as _a}from"./CX8HKnIi.js";function ns(e,t,n=!1,r=!1,o=!1){var s=e,d="";A(()=>{var f=$n;if(d===(d=t()??"")){Lt&&Ht();return}if(f.nodes!==null&&(zn(f.nodes.start,f.nodes.end),f.nodes=null),d!==""){if(Lt){jt.data;for(var y=Ht(),x=y;y!==null&&(y.nodeType!==Bn||y.data!=="");)x=y,y=qn(y);if(y===null)throw Zn(),Kn;$t(jt,x),s=Gn(y);return}var N=d+"";n?N=`<svg>${N}</svg>`:r&&(N=`<math>${N}</math>`);var k=Jn(N);if((n||r)&&(k=it(k)),$t(it(k),k.lastChild),n||r)for(;it(k);)s.before(it(k));else s.before(k)}})}function nt(e,t){const n=t*7;return ma(e,n)}function ct(e,t){const n=+xt(e),[r,o]=[+xt(t.start),+xt(t.end)].sort((s,d)=>s-d);return n>=r&&n<=o}function va(e,t){const n=wa(t);return"formatToParts"in n?ha(n,e):ga(n,e)}const ba={year:0,month:1,day:2,hour:3,minute:4,second:5};function ha(e,t){try{const n=e.formatToParts(t),r=[];for(let o=0;o<n.length;o++){const s=ba[n[o].type];s!==void 0&&(r[s]=parseInt(n[o].value,10))}return r}catch(n){if(n instanceof RangeError)return[NaN];throw n}}function ga(e,t){const n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const Yt={},Kt=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),ya=Kt==="06/25/2014, 00:00:00"||Kt==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";function wa(e){return Yt[e]||(Yt[e]=ya?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Yt[e]}function Pt(e,t,n,r,o,s,d){const f=new Date(0);return f.setUTCFullYear(e,t,n),f.setUTCHours(r,o,s,d),f}const Gt=36e5,xa=6e4,kt={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Ut(e,t,n){if(!e)return 0;let r=kt.timezoneZ.exec(e);if(r)return 0;let o,s;if(r=kt.timezoneHH.exec(e),r)return o=parseInt(r[1],10),Qt(o)?-(o*Gt):NaN;if(r=kt.timezoneHHMM.exec(e),r){o=parseInt(r[2],10);const d=parseInt(r[3],10);return Qt(o,d)?(s=Math.abs(o)*Gt+d*xa,r[1]==="+"?-s:s):NaN}if(Ya(e)){t=new Date(t||Date.now());const d=n?t:Da(t),f=Nt(d,e);return-(n?f:Sa(t,f,e))}return NaN}function Da(e){return Pt(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Nt(e,t){const n=va(e,t),r=Pt(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let o=e.getTime();const s=o%1e3;return o-=s>=0?s:1e3+s,r-o}function Sa(e,t,n){let o=e.getTime()-t;const s=Nt(new Date(o),n);if(t===s)return t;o-=s-t;const d=Nt(new Date(o),n);return s===d?s:Math.max(s,d)}function Qt(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}const Vt={};function Ya(e){if(Vt[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Vt[e]=!0,!0}catch{return!1}}function Jt(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const bn=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Tt=36e5,Xt=6e4,ka=2,G={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:bn};function Mt(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);const n=t.additionalDigits==null?ka:Number(t.additionalDigits);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);const r=Ta(e),{year:o,restDateString:s}=Ca(r.date,n),d=Oa(s,o);if(d===null||isNaN(d.getTime()))return new Date(NaN);if(d){const f=d.getTime();let y=0,x;if(r.time&&(y=Na(r.time),y===null||isNaN(y)))return new Date(NaN);if(r.timeZone||t.timeZone){if(x=Ut(r.timeZone||t.timeZone,new Date(f+y)),isNaN(x))return new Date(NaN)}else x=Jt(new Date(f+y)),x=Jt(new Date(f+y+x));return new Date(f+y+x)}else return new Date(NaN)}function Ta(e){const t={};let n=G.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=G.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){const o=G.timeZone.exec(r);o?(t.time=r.replace(o[1],""),t.timeZone=o[1].trim()):t.time=r}return t}function Ca(e,t){if(e){const n=G.YYY[t],r=G.YYYYY[t];let o=G.YYYY.exec(e)||r.exec(e);if(o){const s=o[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(o=G.YY.exec(e)||n.exec(e),o){const s=o[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}}return{year:null}}function Oa(e,t){if(t===null)return null;let n,r,o;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let s=G.MM.exec(e);if(s)return n=new Date(0),r=parseInt(s[1],10)-1,tn(t,r)?(n.setUTCFullYear(t,r),n):new Date(NaN);if(s=G.DDD.exec(e),s){n=new Date(0);const d=parseInt(s[1],10);return Ea(t,d)?(n.setUTCFullYear(t,0,d),n):new Date(NaN)}if(s=G.MMDD.exec(e),s){n=new Date(0),r=parseInt(s[1],10)-1;const d=parseInt(s[2],10);return tn(t,r,d)?(n.setUTCFullYear(t,r,d),n):new Date(NaN)}if(s=G.Www.exec(e),s)return o=parseInt(s[1],10)-1,nn(o)?en(t,o):new Date(NaN);if(s=G.WwwD.exec(e),s){o=parseInt(s[1],10)-1;const d=parseInt(s[2],10)-1;return nn(o,d)?en(t,o,d):new Date(NaN)}return null}function Na(e){let t,n,r=G.HH.exec(e);if(r)return t=parseFloat(r[1].replace(",",".")),Ct(t)?t%24*Tt:NaN;if(r=G.HHMM.exec(e),r)return t=parseInt(r[1],10),n=parseFloat(r[2].replace(",",".")),Ct(t,n)?t%24*Tt+n*Xt:NaN;if(r=G.HHMMSS.exec(e),r){t=parseInt(r[1],10),n=parseInt(r[2],10);const o=parseFloat(r[3].replace(",","."));return Ct(t,n,o)?t%24*Tt+n*Xt+o*1e3:NaN}return null}function en(e,t,n){t=t||0,n=n||0;const r=new Date(0);r.setUTCFullYear(e,0,4);const o=r.getUTCDay()||7,s=t*7+n+1-o;return r.setUTCDate(r.getUTCDate()+s),r}const Ma=[31,28,31,30,31,30,31,31,30,31,30,31],Ia=[31,29,31,30,31,30,31,31,30,31,30,31];function hn(e){return e%400===0||e%4===0&&e%100!==0}function tn(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;const r=hn(e);if(r&&n>Ia[t]||!r&&n>Ma[t])return!1}return!0}function Ea(e,t){if(t<1)return!1;const n=hn(e);return!(n&&t>366||!n&&t>365)}function nn(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function Ct(e,t,n){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function an(e,t,n){e=Mt(e,n);const r=Ut(t,e,!0),o=new Date(e.getTime()-r),s=new Date(0);return s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),s}function Pa(e,t,n){if(typeof e=="string"&&!e.match(bn))return Mt(e,{...n,timeZone:t});e=Mt(e,n);const r=Pt(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),o=Ut(t,new Date(r));return new Date(r+o)}const It=je([]);let de=null;async function Oe(){return de||(de=(async()=>{const{data:e,error:t}=await E.from("calendar_events").select("*").order("start_time",{ascending:!0});if(t)throw de=null,t;const n=e||[];return It.set(n),setTimeout(()=>{de=null},100),n})(),de)}async function gn(e){let t=zt(It);return t.length||(await Oe(),t=zt(It)),t.find(n=>n.id===e)}async function Ua(e){const{data:t,error:n}=await E.from("calendar_events").insert([e]).select();if(n)throw n;return de=null,await Oe(),t?t[0]:void 0}async function Aa(e){const{data:t,error:n}=await E.from("calendar_events").insert(e).select();if(n)throw n;return de=null,await Oe(),t??[]}async function ut(e,t){const{data:n,error:r}=await E.from("calendar_events").update(t).eq("id",e).select();if(r)throw r;return de=null,await Oe(),n?n[0]:void 0}async function Ra(e){const t=await gn(e),{error:n}=await E.from("calendar_events").delete().eq("id",e);if(n)throw n;t?.attachments&&t.attachments.length>0&&await At(t.attachments),de=null,await Oe()}const Wa={bishop:{approval:"bishop_approval",timestamp:"bishop_approval_at",userId:"bishop_approval_by_user_id"},first_counselor:{approval:"first_counselor_approval",timestamp:"first_counselor_approval_at",userId:"first_counselor_approval_by_user_id"},second_counselor:{approval:"second_counselor_approval",timestamp:"second_counselor_approval_at",userId:"second_counselor_approval_by_user_id"}};async function yn(e,t,n,r){const o=Wa[t],s=n?new Date().toISOString():null;return ut(e,{[o.approval]:n,[o.timestamp]:s,[o.userId]:n?r??null:null})}async function wn(e){return ut(e,{is_published:!0})}async function xn(e){return ut(e,{is_published:!1})}async function Fa(e=new Date){const t=e.toISOString(),{data:n,error:r}=await E.from("calendar_events").select("*").lt("start_time",t).eq("event_type","calendar_event");if(r)throw r;if(!n||n.length===0)return{deleted:0,skipped:0};const o=[],s=[];for(const f of n){if(f.recurrence_rule&&(!f.recurrence_end_date||f.recurrence_end_date&&new Date(f.recurrence_end_date)>=e)){s.push(f);continue}o.push(f)}let d=0;if(o.length>0){const f=o.map(y=>y.id).filter(y=>y!==void 0);if(f.length>0){const{data:y,error:x}=await E.from("calendar_events").delete().in("id",f).select("id");if(x)throw x;d=y?.length??0;for(const N of o)N.attachments&&N.attachments.length>0&&await At(N.attachments)}}return de=null,await Oe(),{deleted:d,skipped:s.length}}async function La(e,t){const n=e.name.split(".").pop()||"bin",r=t||"temp",s=`${crypto.randomUUID()}.${n}`,d=`${r}/${s}`,{error:f}=await E.storage.from("event-attachments").upload(d,e,{cacheControl:"3600",upsert:!1});if(f)throw f;const{data:{publicUrl:y}}=E.storage.from("event-attachments").getPublicUrl(d);return{id:crypto.randomUUID(),name:e.name,url:y,type:e.type,size:e.size,uploadedAt:new Date().toISOString()}}async function Ha(e){const{error:t}=await E.storage.from("event-attachments").remove([e]);if(t)throw t}function Dn(e){const t=e.match(/event-attachments\/(.+)$/);return t?t[1]:""}async function At(e){if(!e||e.length===0)return;const t=e.map(n=>Dn(n.url)).filter(n=>n);if(t.length>0){const{error:n}=await E.storage.from("event-attachments").remove(t);if(n)throw n}}const as=Object.freeze(Object.defineProperty({__proto__:null,createCalendarEvent:Ua,createCalendarEvents:Aa,deleteCalendarEvent:Ra,deleteEventAttachment:Ha,deleteEventAttachments:At,deletePastCalendarEvents:Fa,extractStoragePath:Dn,getAllCalendarEvents:Oe,getCalendarEvent:gn,publishCalendarEvent:wn,unpublishCalendarEvent:xn,updateBishopricApproval:yn,updateCalendarEvent:ut,uploadEventAttachment:La},Symbol.toStringTag,{value:"Module"})),ja={all:{label:"All",key:"",sort_index:0,color_number:0},public:{label:"Public",key:"PUB",sort_index:0,color_number:1},church:{label:"Church",key:"CHU",sort_index:0,color_number:2},stake:{label:"Stake",key:"STK",sort_index:0,color_number:3},stakeReliefSociety:{label:"Stake | Relief Society",key:"SRS",sort_index:.1,color_number:5},stakeEldersQuorum:{label:"Stake | Elders Quorum",key:"SEQ",sort_index:.2,color_number:6},stakeYouth:{label:"Stake | Youth",key:"SYO",sort_index:.25,color_number:7},stakeYoungWomen:{label:"Stake | Young Women",key:"SYW",sort_index:.3,color_number:8},stakeYoungMen:{label:"Stake | Young Men",key:"SYM",sort_index:.4,color_number:12},stakePrimary:{label:"Stake | Primary",key:"SPR",sort_index:.5,color_number:16},stakeSundaySchool:{label:"Stake | Sunday School",key:"SSS",sort_index:.6,color_number:21},stakeYsa:{label:"Stake | YSA",key:"SYA",sort_index:.7,color_number:22},ward:{label:"Ward",key:"WRD",sort_index:1,color_number:4},reliefSociety:{label:"Relief Society",key:"RES",sort_index:2,color_number:5},eldersQuorum:{label:"Elders Quorum",key:"ELQ",sort_index:3,color_number:6},youth:{label:"Youth",key:"YOU",sort_index:4,color_number:7},youngWomen:{label:"Young Women",key:"YOW",sort_index:4,color_number:8},youngWomenPearls:{label:"Young Women | Pearls",key:"YWP",sort_index:5,color_number:9},youngWomenRubies:{label:"Young Women | Rubies",key:"YWR",sort_index:6,color_number:10},youngWomenDiamonds:{label:"Young Women | Diamonds",key:"YWD",sort_index:7,color_number:11},aaronicPriesthood:{label:"Young Men",key:"YOM",sort_index:8,color_number:12},aaronicPriesthoodDeacons:{label:"Young Men | Deacons",key:"YMD",sort_index:9,color_number:13},aaronicPriesthoodTeachers:{label:"Young Men | Teachers",key:"YMT",sort_index:10,color_number:14},aaronicPriesthoodPriests:{label:"Young Men | Priests",key:"YMP",sort_index:11,color_number:15},primary:{label:"Primary",key:"PRI",sort_index:12,color_number:16},primaryNursery:{label:"Primary | Nursery",key:"PRN",sort_index:13,color_number:17},primarySunbeams:{label:"Primary | Sunbeams",key:"PRS",sort_index:14,color_number:18},primaryCTR:{label:"Primary | CTR",key:"PRC",sort_index:15,color_number:19},primaryValiant:{label:"Primary | Valiant",key:"PRV",sort_index:16,color_number:20},sundaySchool:{label:"Sunday School",key:"SUS",sort_index:17,color_number:21},ysa:{label:"YSA",key:"YSA",sort_index:18,color_number:22}},Et=Object.values(ja).sort((e,t)=>e.sort_index-t.sort_index),rs=e=>e?Et.find(t=>t.key===e):void 0,$a=["STK","SRS","SEQ","SYO","SYW","SYM","SPR","SSS","SYA"],za=["WRD","RES","ELQ","YOU","YOW","YWP","YWR","YWD","YOM","YMD","YMT","YMP","PRI","PRN","PRS","PRC","PRV","SUS","YSA"],Ba={STK:$a,WRD:za,YOU:["YOU","YOW","YWP","YWR","YWD","YOM","YMD","YMT","YMP"],YOM:["YOM","YMD","YMT","YMP"],YOW:["YOW","YWP","YWR","YWD"]},qa=e=>{if(!e)return[];const t=e.trim();if(!t)return[];const n=Ba[t]??[t];return Array.from(new Set(n))},rn=(e,t)=>t?e?qa(t).includes(e):!1:!0,sn={bishop:"Bishop",first_counselor:"1st Counselor",second_counselor:"2nd Counselor"},Rt=e=>{let t=0;return e.bishop_approval==="YES"&&t++,e.first_counselor_approval==="YES"&&t++,e.second_counselor_approval==="YES"&&t++,t},Za=e=>Rt(e)>0,Ka=e=>e.is_published?"published":Rt(e)>0?"approved":e.bishop_approval==="NO"||e.first_counselor_approval==="NO"||e.second_counselor_approval==="NO"?"needs_review":"pending";let rt=null;const Ga=e=>e.replace(/<[^>]*>/g,"").toLowerCase(),on=(e,t)=>{if(!t.trim())return!0;const n=t.toLowerCase(),r=(e.title||"").toLowerCase(),o=Ga(e.description||""),s=(e.location||"").toLowerCase();return r.includes(n)||o.includes(n)||s.includes(n)},ss=(e,t)=>{if(!t.trim()||!e)return ln(e||"");const n=ln(e),r=new RegExp(`(${Sn(t)})`,"gi");return n.replace(r,"<mark>$1</mark>")},os=(e,t)=>{if(!t.trim()||!e)return e||"";const n=new RegExp(`(${Sn(t)})`,"gi");return e.replace(/(<[^>]*>)|([^<]+)/g,(r,o,s)=>o||(s?s.replace(n,"<mark>$1</mark>"):r))},ln=e=>{const t=typeof document<"u"?document.createElement("div"):null;return t?(t.textContent=e,t.innerHTML):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},Sn=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Qa=_n()??null,Va=mn(!1),Ot=Qa?.stores.authenticated??Va,Ja=()=>{const e=je(!1),t=je([]),n=je([]),r=je(""),o=je(""),s=je(!1),d=(_,g)=>!(!_.is_published||!g&&_.is_public===!1),f=Le([n,Ot],([_,g])=>{const T=new Date,R=He(nt(T,3),{weekStartsOn:1}),l=new Set(_.filter(m=>m?.meta_data?.organization?.length).filter(m=>d(m,g)).filter(m=>{if(m.event_type==="calendar_event"){const W=m.start_time?$e(m.start_time):null;return W?ct(W,{start:T,end:R}):!1}return!0}).map(m=>m.meta_data?.organization).filter(m=>m));return Array.from(l).map(m=>Et.find(W=>W.key===m)).filter(m=>m!==void 0)}),y=Le([r],([_])=>Et.find(g=>g.key===_)),x=Le([n,r,o,Ot],([_,g,T,R])=>_.filter(l=>l.event_type==="calendar_event").filter(l=>{const m=l?.meta_data;return g&&m?rn(m?.organization,g):!0}).filter(l=>on(l,T)).filter(l=>d(l,R)).filter(l=>{const m=l.start_time?$e(l.start_time):null,W=pa();return m?_a(m,W)||m.getTime()>=W.getTime():!1})),N=Le([n,r,o,Ot],([_,g,T,R])=>_.filter(l=>l.event_type==="announcement").filter(l=>{const m=l?.meta_data;return g&&m?rn(m?.organization,g):!0}).filter(l=>on(l,T)).filter(l=>d(l,R))),k=Le([x],([_])=>_.filter(g=>{const T=g.start_time?$e(g.start_time):null;return T?ct(T,{start:Qe(new Date,{weekStartsOn:1}),end:He(new Date,{weekStartsOn:1})}):!1})),Q=()=>{const _=Qe(new Date,{weekStartsOn:1}),g=He(new Date,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},xe=Le([x],([_])=>{const g=nt(Qe(new Date,{weekStartsOn:1}),1),T=He(g,{weekStartsOn:1});return _.filter(R=>{const l=R.start_time?$e(R.start_time):null;return l?ct(l,{start:g,end:T}):!1})}),De=()=>{const _=nt(Qe(new Date,{weekStartsOn:1}),1),g=He(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},Ne=Le([x],([_])=>{const g=nt(Qe(new Date,{weekStartsOn:1}),2),T=He(g,{weekStartsOn:1});return _.filter(R=>{const l=R.start_time?$e(R.start_time):null;return l?ct(l,{start:g,end:T}):!1})}),Me=()=>{const _=nt(Qe(new Date,{weekStartsOn:1}),2),g=He(_,{weekStartsOn:1});return`${Te(_,"MMM d").toUpperCase()} – ${Te(g,"MMM d").toUpperCase()}`},ze=_=>{const g=[],T=new Date,R=new Date;R.setFullYear(T.getFullYear()+1);for(const l of _)if(l.recurrence_rule&&l.start_time&&l.end_time)try{const m=fa.fromString(l.recurrence_rule),W=l.recurrence_end_date?m.all():m.between(T,R,!0),qe=new Date(l.start_time),fe=new Date(l.end_time).getTime()-qe.getTime(),V=an(qe,Dt),Z=V.getHours(),ie=V.getMinutes(),Ie=V.getSeconds(),Ee=V.getMilliseconds(),he=l.recurrence_exceptions||[],D=l.recurrence_overrides||{};W.forEach((J,Pe)=>{const ge=an(J,Dt),M=new Date(ge);M.setHours(Z,ie,Ie,Ee);const le=Pa(M,Dt),Se=le,Ze=new Date(le.getTime()+fe),Ye=Te(J,"yyyy-MM-dd"),P=D[Ye];if(he.includes(Ye)&&!P)return;const j={...l,id:void 0,start_time:Se.toISOString(),end_time:Ze.toISOString(),meta_data:{...l.meta_data,recurring_instance:!0,recurring_parent_id:l.id,recurring_instance_index:Pe}};P&&(P.title!==void 0&&(j.title=P.title),P.description!==void 0&&(j.description=P.description),P.location!==void 0&&(j.location=P.location),P.start_time!==void 0&&(j.start_time=P.start_time),P.end_time!==void 0&&(j.end_time=P.end_time),P.is_all_day!==void 0&&(j.is_all_day=P.is_all_day),P.meta_data!==void 0&&(j.meta_data={...j.meta_data,...P.meta_data})),g.push(j)})}catch(m){console.error("Failed to expand recurring event:",l.id,m),g.push(l)}else g.push(l);return g},Be=_=>_.length?ze(_).map(T=>({...T,start_time:T?.start_time?Bt(T.start_time):void 0,end_time:T.end_time?Bt(T.end_time):void 0})):[];return rt={stores:{ready:e,data:t,dbData:n,announcements:N,calendarEvents:x,calendarEventsThisWeek:k,calendarEventsNextWeek:xe,calendarEventsNextNextWeek:Ne,currentOrganizations:f,organizationFilter:r,searchQuery:o,currentOrganizationFilter:y,weeksExpanded:s},actions:{reload:async()=>{e.set(!1);const _=await Oe();n.set(Be(_)),e.set(!0)},calendarEventsThisWeekLabel:Q,calendarEventsNextWeekLabel:De,calendarEventsNextNextWeekLabel:Me}},rt},is=()=>rt?.stores&&Object.keys(rt.stores).length>0?rt:Ja();var Xa=Y('<div class="d-flex justify-content-center py-3"><!></div>'),er=Y('<div class="text-muted text-center py-3 small">No messages yet</div>'),tr=Y('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"><div> </div> <div> </div></div>'),nr=Y('<div class="message-meta text-muted mt-1 text-end svelte-12d50yj"> </div>'),ar=Y('<i class="bi bi-trash"></i>'),rr=Y('<button type="button" class="btn btn-link btn-sm text-danger p-0 mt-1 delete-btn d-block ms-auto svelte-12d50yj" title="Delete message"><!></button>'),sr=Y('<div><div><div class="message-text svelte-12d50yj"> </div> <!> <!></div></div>'),or=Y('<i class="bi bi-send"></i>'),ir=Y('<div class="messages-container svelte-12d50yj"><!></div> <div class="input-area d-flex gap-2 pt-2 svelte-12d50yj"><textarea class="form-control svelte-12d50yj" rows="2" placeholder="Type a message..."></textarea> <button type="button" class="btn btn-primary btn-sm align-self-end" title="Send message"><!></button></div>',1),lr=Y("<div><!></div>");function cn(e,t){un(t,!1);let n=_e(t,"comments",24,()=>[]),r=_e(t,"currentUserId",8),o=_e(t,"onSend",8),s=_e(t,"onDelete",8),d=_e(t,"loading",8,!1),f=_e(t,"disabled",8,!1),y=_e(t,"fullHeight",8,!1),x=C(""),N=C(!1),k=C(null),Q=C();function xe(){a(Q)&&requestAnimationFrame(()=>{Qn(Q,a(Q).scrollTop=a(Q).scrollHeight)})}function De(l){try{return da($e(l),{addSuffix:!0})}catch{return""}}function Ne(l){return l.user_id===r()}async function Me(){const l=a(x).trim();if(!(!l||a(N)||f())){b(N,!0);try{await o()(l),b(x,""),xe()}catch(m){console.error("Failed to send message:",m)}finally{b(N,!1)}}}async function ze(l){if(!(a(k)||f())){b(k,l);try{await s()(l)}catch(m){console.error("Failed to delete message:",m)}finally{b(k,null)}}}function Be(l){l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),Me())}q(()=>H(n()),()=>{n().length&&xe()}),dn(),vn();var c=lr();let _;var g=v(c);{var T=l=>{var m=Xa(),W=v(m);Je(W,{size:"sm"}),p(m),S(l,m)},R=l=>{var m=ir(),W=at(m),qe=v(W);{var be=D=>{var J=er();S(D,J)},fe=D=>{var J=Xn(),Pe=at(J);pn(Pe,1,n,ge=>ge.id,(ge,M)=>{const le=Ve(()=>(a(M),w(()=>Ne(a(M)))));var Se=sr();let Ze;var Ye=v(Se);let P;var j=v(Ye),dt=v(j,!0);p(j);var Xe=I(j,2);{var Ue=X=>{var F=tr(),ye=v(F),Re=v(ye,!0);p(ye);var Ke=I(ye,2),oe=v(Ke,!0);p(Ke),p(F),A(ke=>{se(Re,(a(M),w(()=>a(M).user_display_name))),se(oe,ke)},[()=>(a(M),w(()=>De(a(M).created_at)))]),S(X,F)},Ae=X=>{var F=nr(),ye=v(F,!0);p(F),A(Re=>se(ye,Re),[()=>(a(M),w(()=>De(a(M).created_at)))]),S(X,F)};U(Xe,X=>{a(le)?X(Ae,!1):X(Ue)})}var st=I(Xe,2);{var ft=X=>{var F=rr(),ye=v(F);{var Re=oe=>{Je(oe,{size:"xs"})},Ke=oe=>{var ke=ar();S(oe,ke)};U(ye,oe=>{a(k),a(M),w(()=>a(k)===a(M).id)?oe(Re):oe(Ke,!1)})}p(F),A(()=>F.disabled=(a(k),a(M),w(()=>a(k)===a(M).id))),ve("click",F,()=>ze(a(M).id)),S(X,F)};U(st,X=>{a(le)&&X(ft)})}p(Ye),p(Se),A(()=>{Ze=Ce(Se,1,"d-flex mb-2",null,Ze,{"justify-content-end":a(le),"justify-content-start":!a(le)}),P=Ce(Ye,1,"message-bubble svelte-12d50yj",null,P,{own:a(le),other:!a(le)}),se(dt,(a(M),w(()=>a(M).message)))}),S(ge,Se)}),S(D,J)};U(qe,D=>{H(n()),w(()=>n().length===0)?D(be):D(fe,!1)})}p(W),ua(W,D=>b(Q,D),()=>a(Q));var V=I(W,2),Z=v(V);Vn(Z);var ie=I(Z,2),Ie=v(ie);{var Ee=D=>{Je(D,{size:"xs"})},he=D=>{var J=or();S(D,J)};U(Ie,D=>{a(N)?D(Ee):D(he,!1)})}p(ie),p(V),A(D=>{Z.disabled=f()||a(N),ie.disabled=D},[()=>(H(f()),a(N),a(x),w(()=>f()||a(N)||!a(x).trim()))]),ca(Z,()=>a(x),D=>b(x,D)),ve("keydown",Z,Be),ve("click",ie,Me),S(l,m)};U(g,l=>{d()?l(T):l(R,!1)})}p(c),A(()=>_=Ce(c,1,"chat-thread d-flex flex-column svelte-12d50yj",null,_,{"chat-thread-full":y()})),S(e,c),fn()}async function cr(e){const{data:t,error:n}=await E.from("event_bishopric_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(n)throw n;return t??[]}async function ur(e,t,n,r){const{data:o,error:s}=await E.from("event_bishopric_comments").insert([{event_id:e,user_id:t,user_display_name:n,message:r}]).select().single();if(s)throw s;return o}async function dr(e){const{error:t}=await E.from("event_bishopric_comments").delete().eq("id",e);if(t)throw t}async function fr(e){const{data:t,error:n}=await E.from("event_submitter_comments").select("*").eq("event_id",e).order("created_at",{ascending:!0});if(n)throw n;return t??[]}async function mr(e,t,n,r){const{data:o,error:s}=await E.from("event_submitter_comments").insert([{event_id:e,user_id:t,user_display_name:n,message:r}]).select().single();if(s)throw s;return o}async function pr(e){const{error:t}=await E.from("event_submitter_comments").delete().eq("id",e);if(t)throw t}const _r=`${oa}/functions/v1/calendar-approval-reply`;async function Yn(e){if(!(typeof fetch>"u"))try{const t=await fetch(_r,{method:"POST",headers:ia(!0,{useAuthToken:!0}),body:JSON.stringify(e)});t.ok||console.error("Failed to send approval reply notification:",await t.text())}catch(t){console.error("Error sending approval reply notification:",t)}}function vr(e,t,n){return Yn({event_id:e,action:"vote",role:t,status:n})}function br(e,t){return Yn({event_id:e,action:t})}var hr=Y("<span> </span>"),gr=Y('<div class="alert alert-info mb-0" role="alert">Save this event or announcement before requesting bishopric approvals.</div>'),yr=Y('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),wr=Y('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),xr=Y('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Bishopric Discussion</span> <small class="text-muted">Private notes between bishopric members</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!> <div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 chat-toggle svelte-jfsv9u"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Submitter</span> <small class="text-muted"> </small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),Dr=Y('<small class="text-muted"> </small>'),Sr=Y("<span><!></span>"),Yr=Y('<div class="decision-buttons d-grid gap-2 gap-md-3 svelte-jfsv9u"><button type="button"><i class="bi bi-check-circle-fill"></i> <div><div class="action-label svelte-jfsv9u">Approve</div> <small class="text-muted">Vote to approve</small></div></button> <button type="button"><i class="bi bi-pencil-square"></i> <div><div class="action-label svelte-jfsv9u">Request Changes</div> <small class="text-muted">Ask submitter to revise</small></div></button> <button type="button"><i class="bi bi-hourglass-split"></i> <div><div class="action-label svelte-jfsv9u">Mark Pending</div> <small class="text-muted">No decision yet</small></div></button> <!></div>'),kr=Y("<span> </span>"),Tr=Y('<div class="list-group-item"><div class="d-flex flex-column gap-2"><div><div class="fw-semibold"> </div> <!></div> <div><!></div></div></div>'),Cr=Y('<i class="bi bi-globe-americas"></i>'),Or=Y('<button type="button" class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-center gap-2"><!> Unpublish</button>'),Nr=Y('<i class="bi bi-globe"></i>'),Mr=Y('<small class="text-muted text-center">At least one approval required to publish</small>'),Ir=Y('<button type="button" class="btn btn-success w-100 d-flex align-items-center justify-content-center gap-2"><!> Publish to Ward</button> <!>',1),Er=Y('<div class="card-footer text-danger small"> </div>'),Pr=Y('<!> <div class="card"><div class="list-group list-group-flush"></div> <div class="publish-section d-flex flex-column gap-2 p-3 svelte-jfsv9u"><div class="d-flex justify-content-between align-items-center"><span class="text-muted small fw-semibold"> </span></div> <!></div> <!></div>',1),Ur=Y('<div class="d-flex flex-column gap-3"><div class="d-flex flex-wrap align-items-center justify-content-between gap-2"><h3 class="h5 mb-0">Bishopric Approval</h3> <!></div> <!></div>');function ls(e,t){un(t,!1);const n=()=>aa(W,"$currentUserStore",r),[r,o]=ra(),s=C(),d=C(),f=C(),y=C(),x=C(),N=C(),k=C(),Q=C(),xe=C(),De=C(),Ne=C(),Me=C(),ze=C(),Be=C();let c=_e(t,"eventItem",12),_=_e(t,"disabled",8,!1),g=_e(t,"reloadEvents",8,null);const T={bishop:"bishopric-bishop",first_counselor:"bishopric-first-counselor",second_counselor:"bishopric-second-counselor"},R={pending:{text:"Pending Approval",class:"bg-warning-subtle text-warning-emphasis"},approved:{text:"Approved",class:"bg-success-subtle text-success-emphasis"},needs_review:{text:"Needs Review",class:"bg-info-subtle text-info-emphasis"},published:{text:"Published",class:"bg-primary-subtle text-primary-emphasis"}},l=_n()??null,m=mn(la),W=l?.stores.currentUser??m,qe=["bishop","first_counselor","second_counselor"];let be=C(""),fe=C(null),V=C(!1),Z=C([]),ie=C(!1),Ie=!1;const Ee=`bishopric-chat-${qt()}`;let he=C(null),D=C([]),J=C(!1),Pe=!1;const ge=`submitter-chat-${qt()}`;let M=null;ta(async()=>{typeof window<"u"&&(M=(await ea(()=>import("./DO0djbQe.js").then(u=>u.o),__vite__mapDeps([0,1]),import.meta.url)).default)});function le(){if(!M)return;const i=document.getElementById(Ee);if(!i)return;M.getOrCreateInstance(i).show()}function Se(){if(!M)return;const i=document.getElementById(ge);if(!i)return;M.getOrCreateInstance(i).show()}function Ze(i){const u=T[i];return a(s)?.roles?.includes(u)??!1}function Ye(i){if(!i)return null;try{return Te($e(i),"MMM d, yyyy 'at' h:mm a")}catch(u){return console.error("Failed to format timestamp",u),null}}async function P(){typeof g()=="function"&&await g()()}async function j(i,u){const O=c()?.id;if(O!=null){b(be,""),b(fe,i);try{const K=await yn(O,i,u,a(s)?.id);K&&(c({...c(),bishop_approval:K.bishop_approval,first_counselor_approval:K.first_counselor_approval,second_counselor_approval:K.second_counselor_approval,bishop_approval_at:K.bishop_approval_at,first_counselor_approval_at:K.first_counselor_approval_at,second_counselor_approval_at:K.second_counselor_approval_at,bishop_approval_by_user_id:K.bishop_approval_by_user_id,first_counselor_approval_by_user_id:K.first_counselor_approval_by_user_id,second_counselor_approval_by_user_id:K.second_counselor_approval_by_user_id,is_published:K.is_published}),vr(O,i,u)),await P()}catch(K){console.error("Failed to update approval",K),b(be,"Unable to update approval. Please try again.")}finally{b(fe,null)}}}async function dt(i){await j(i,null)}async function Xe(){const i=c()?.id;if(i!=null){b(be,""),b(V,!0);try{const u=a(N)?"unpublished":"published",O=a(N)?await xn(i):await wn(i);O&&(c({...c(),is_published:O.is_published}),br(i,u)),await P()}catch(u){console.error("Failed to update publish status",u),b(be,"Unable to update publish status. Please try again.")}finally{b(V,!1)}}}let Ue=null,Ae=null;function st(){b(Z,[]),Ie=!1,b(ie,!1),b(D,[]),Pe=!1,b(J,!1)}na(()=>{X(),oe()});function ft(i){const u=i??c()?.id??null;if(Ue||!u)return;const O=typeof window<"u"?localStorage.getItem("authToken"):null;O&&E.realtime.setAuth(O),Ue=E.channel(`bishopric-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_bishopric_comments",filter:`event_id=eq.${u}`},()=>{F(u)}).subscribe()}function X(){Ue&&(E.removeChannel(Ue),Ue=null)}async function F(i){const u=i??c()?.id??null;if(u){Ie||b(ie,!0);try{const O=await cr(u);u===(c()?.id??null)&&(b(Z,O),Ie=!0)}catch(O){console.error("Failed to load bishopric comments:",O)}finally{u===(c()?.id??null)&&b(ie,!1)}}}async function ye(i){if(!c()?.id||!a(s)?.id)return;const u=a(s).displayName||a(s).username||"Unknown";await ur(c().id,a(s).id,u,i),await F()}async function Re(i){await dr(i),await F()}function Ke(i){const u=i??c()?.id??null;if(Ae||!u)return;const O=typeof window<"u"?localStorage.getItem("authToken"):null;O&&E.realtime.setAuth(O),Ae=E.channel(`submitter-comments-${u}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${u}`},()=>{ke(u)}).subscribe()}function oe(){Ae&&(E.removeChannel(Ae),Ae=null)}async function ke(i){const u=i??c()?.id??null;if(u){Pe||b(J,!0);try{const O=await fr(u);u===(c()?.id??null)&&(b(D,O),Pe=!0)}catch(O){console.error("Failed to load submitter comments:",O)}finally{u===(c()?.id??null)&&b(J,!1)}}}async function kn(i){if(!c()?.id||!a(s)?.id)return;const u=a(s).displayName||a(s).username||"Unknown";await mr(c().id,a(s).id,u,i),await ke()}async function Tn(i){await pr(i),await ke()}function Cn(i){return i==="YES"?{text:"Approved",class:"bg-success-subtle text-success-emphasis"}:i==="NO"?{text:"Requested Changes",class:"bg-info-subtle text-info-emphasis"}:{text:"No Input Yet",class:"bg-secondary-subtle text-secondary-emphasis"}}const mt="btn btn-sm action-btn w-100 text-start d-flex align-items-center gap-2";function On(i){return`${mt} ${i==="YES"?"btn-success text-white":"btn-outline-success"}`}function Nn(i){return`${mt} ${i==="NO"?"btn-info text-dark":"btn-outline-info"}`}function Mn(i){const u=i==null;return`${mt} ${u?"btn-secondary text-white":"btn-outline-secondary"}`}q(()=>n(),()=>{b(s,n())}),q(()=>H(c()),()=>{b(d,Ka(c()))}),q(()=>a(d),()=>{b(f,R[a(d)])}),q(()=>H(c()),()=>{b(y,Rt(c()))}),q(()=>H(c()),()=>{b(x,Za(c()))}),q(()=>H(c()),()=>{b(N,c()?.is_published??!1)}),q(()=>H(c()),()=>{b(k,{bishop:c()?.bishop_approval,first_counselor:c()?.first_counselor_approval,second_counselor:c()?.second_counselor_approval})}),q(()=>H(c()),()=>{b(Q,{bishop:c()?.bishop_approval_at,first_counselor:c()?.first_counselor_approval_at,second_counselor:c()?.second_counselor_approval_at})}),q(()=>a(s),()=>{b(xe,a(s)?.roles?.includes("bishopric-bishop")??!1)}),q(()=>a(s),()=>{b(De,a(s)?.roles?.includes("bishopric-first-counselor")??!1)}),q(()=>a(s),()=>{b(Ne,a(s)?.roles?.includes("bishopric-second-counselor")??!1)}),q(()=>(a(xe),a(De),a(Ne)),()=>{b(Me,a(xe)||a(De)||a(Ne))}),q(()=>{},()=>{b(ze,qe)}),q(()=>(H(c()),a(he)),()=>{const i=c()?.id??null;i&&i!==a(he)?(b(he,i),st(),X(),oe(),F(i),ke(i),ft(i),Ke(i)):!i&&a(he)!==null&&(b(he,null),st(),X(),oe())}),q(()=>H(c()),()=>{b(Be,c()?.meta_data?.submitted_by_name??"Submitter")}),dn(),vn();var pt=Ur(),_t=v(pt),In=I(v(_t),2);{var En=i=>{var u=hr(),O=v(u,!0);p(u),A(()=>{Ce(u,1,(a(f),w(()=>`badge ${a(f).class}`)),"svelte-jfsv9u"),se(O,(a(f),w(()=>a(f).text)))}),S(i,u)};U(In,i=>{H(c()),w(()=>c()?.id)&&i(En)})}p(_t);var Pn=I(_t,2);{var Un=i=>{var u=gr();S(i,u)},An=i=>{var u=Pr(),O=at(u);{var K=$=>{var h=xr(),L=at(h),ce=v(L),me=I(v(ce),4),ee=v(me);{var We=B=>{var re=yr(),Fe=v(re,!0);p(re),A(()=>se(Fe,(a(Z),w(()=>a(Z).length)))),S(B,re)};U(ee,B=>{a(Z),w(()=>a(Z).length>0)&&B(We)})}lt(2),p(me),p(ce),p(L);var Ge=I(L,2);{let B=Ve(()=>(H(c()),w(()=>c()?.title||"Event")));Zt(Ge,{get id(){return Ee},subtitle:"Discussion",get title(){return a(B)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(re,Fe)=>{{let we=Ve(()=>(a(s),w(()=>a(s)?.id??-1)));cn(re,{get comments(){return a(Z)},get currentUserId(){return a(we)},onSend:ye,onDelete:Re,get loading(){return a(ie)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}var z=I(Ge,2),ue=v(z),et=I(v(ue),2),ot=I(v(et),2),gt=v(ot,!0);p(ot),p(et);var ne=I(et,2),te=v(ne);{var ae=B=>{var re=wr(),Fe=v(re,!0);p(re),A(()=>se(Fe,(a(D),w(()=>a(D).length)))),S(B,re)};U(te,B=>{a(D),w(()=>a(D).length>0)&&B(ae)})}lt(2),p(ne),p(ue),p(z);var pe=I(z,2);{let B=Ve(()=>(H(c()),w(()=>c()?.title||"Event")));Zt(pe,{get id(){return ge},subtitle:"Discussion with Submitter",get title(){return a(B)},className:"chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(re,Fe)=>{{let we=Ve(()=>(a(s),w(()=>a(s)?.id??-1)));cn(re,{get comments(){return a(D)},get currentUserId(){return a(we)},onSend:kn,onDelete:Tn,get loading(){return a(J)},fullHeight:!0,get disabled(){return _()}})}},$$slots:{default:!0}})}A(()=>{wt(ce,"aria-controls",Ee),wt(ue,"aria-controls",ge),se(gt,a(Be))}),ve("click",ce,le),ve("click",ue,Se),S($,h)};U(O,$=>{a(Me)&&$(K)})}var Wt=I(O,2),vt=v(Wt);pn(vt,5,()=>a(ze),sa,($,h)=>{var L=Tr(),ce=v(L),me=v(ce),ee=v(me),We=v(ee,!0);p(ee);var Ge=I(ee,2);{var z=ne=>{var te=Dr(),ae=v(te,!0);p(te),A(pe=>se(ae,pe),[()=>(a(Q),a(h),w(()=>Ye(a(Q)[a(h)])))]),S(ne,te)};U(Ge,ne=>{a(Q),a(h),w(()=>a(Q)[a(h)])&&ne(z)})}p(me);var ue=I(me,2),et=v(ue);{var ot=ne=>{var te=Yr(),ae=v(te),pe=I(ae,2),B=I(pe,2),re=I(B,2);{var Fe=we=>{var tt=Sr(),yt=v(tt);Je(yt,{size:"xs"}),p(tt),S(we,tt)};U(re,we=>{a(fe)===a(h)&&we(Fe)})}p(te),A((we,tt,yt)=>{Ce(ae,1,we,"svelte-jfsv9u"),ae.disabled=_()||a(fe)===a(h),Ce(pe,1,tt,"svelte-jfsv9u"),pe.disabled=_()||a(fe)===a(h),Ce(B,1,yt,"svelte-jfsv9u"),B.disabled=_()||a(fe)===a(h)},[()=>St((a(k),a(h),w(()=>On(a(k)[a(h)])))),()=>St((a(k),a(h),w(()=>Nn(a(k)[a(h)])))),()=>St((a(k),a(h),w(()=>Mn(a(k)[a(h)]))))]),ve("click",ae,()=>j(a(h),"YES")),ve("click",pe,()=>j(a(h),"NO")),ve("click",B,()=>dt(a(h))),S(ne,te)},gt=ne=>{const te=Ve(()=>(a(k),a(h),w(()=>Cn(a(k)[a(h)]))));var ae=kr(),pe=v(ae,!0);p(ae),A(()=>{Ce(ae,1,(H(a(te)),w(()=>`badge ${a(te).class}`)),"svelte-jfsv9u"),se(pe,(H(a(te)),w(()=>a(te).text)))}),S(ne,ae)};U(et,ne=>{a(h),w(()=>Ze(a(h)))?ne(ot):ne(gt,!1)})}p(ue),p(ce),p(L),A(()=>se(We,(H(sn),a(h),w(()=>sn[a(h)])))),S($,L)}),p(vt);var bt=I(vt,2),ht=v(bt),Ft=v(ht),Rn=v(Ft);p(Ft),p(ht);var Wn=I(ht,2);{var Fn=$=>{var h=Or(),L=v(h);{var ce=ee=>{Je(ee,{size:"xs"})},me=ee=>{var We=Cr();S(ee,We)};U(L,ee=>{a(V)?ee(ce):ee(me,!1)})}lt(),p(h),A(()=>h.disabled=_()||a(V)),ve("click",h,Xe),S($,h)},Ln=$=>{var h=Ir(),L=at(h),ce=v(L);{var me=z=>{Je(z,{size:"xs"})},ee=z=>{var ue=Nr();S(z,ue)};U(ce,z=>{a(V)?z(me):z(ee,!1)})}lt(),p(L);var We=I(L,2);{var Ge=z=>{var ue=Mr();S(z,ue)};U(We,z=>{a(x)||z(Ge)})}A(()=>{L.disabled=_()||a(V)||!a(x),wt(L,"title",a(x)?"":"At least one approval required to publish")}),ve("click",L,Xe),S($,h)};U(Wn,$=>{a(N)?$(Fn):$(Ln,!1)})}p(bt);var Hn=I(bt,2);{var jn=$=>{var h=Er(),L=v(h,!0);p(h),A(()=>se(L,a(be))),S($,h)};U(Hn,$=>{a(be)&&$(jn)})}p(Wt),A(()=>se(Rn,`Approvals: ${a(y)??""} of 3`)),S(i,u)};U(Pn,i=>{H(c()),w(()=>!c()?.id)?i(Un):i(An,!1)})}p(pt),S(e,pt),fn(),o()}export{ls as B,ja as C,Et as D,Ka as a,rs as b,Aa as c,ss as d,nt as e,Pa as f,is as g,ns as h,Fa as i,Rt as j,os as k,Dn as l,rn as m,Ha as n,Ra as o,gn as p,ut as q,Ua as r,fr as s,an as t,La as u,cn as v,pr as w,mr as x,as as y};
