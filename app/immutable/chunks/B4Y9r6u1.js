const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DO0djbQe.js","./Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{_ as Lt}from"./CmsKOCeN.js";import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{c as Mr,o as zn,w as Cr,g as un,a as Fr}from"./WW5OsAH7.js";import{p as dt,ah as Be,ai as kt,B as pe,c as L,s as W,a as ut,m as i,E as de,n as J,D as F,u as ee,F as Je,r as P,C as fn,ap as Ur,f as Ve,R as st,as as rn,v as Or}from"./SWWSvUpQ.js";import{p as me,i as he,e as ke,s as xe,m as zr,u as Pr,a as an,b as Br}from"./CU3XCoqN.js";import{f as ve,a as ae,c as sn,t as wt}from"./D8ekX_8E.js";import{b as vn,r as Ke,s as ze,e as Lr}from"./CZEGeSDP.js";import{t as Pn,f as et,i as He,A as Ge,e as Bn,b as Nr,h as Hr,G as qr,O as Ue,a as ln,j as Wr,p as Ot}from"./BggCUw-N.js";import{i as gt}from"./Bgyk9asy.js";import{S as Ln}from"./BxsXghKR.js";import{e as $t,i as Nn}from"./YJAcq9su.js";import{b as ct,a as hn,c as on}from"./CvxMDV_e.js";import{b as St}from"./Dtu51PMB.js";import{b as pt}from"./Cc3l00Qu.js";import{D as Yr,t as yt,f as Et,l as jr,n as $r,u as Qr,o as Hn,p as Ct,q as At,r as qn,b as Mt,g as Vr,s as Kr,B as Gr,v as Zr,w as Xr,x as Jr,h as cn,d as zt,k as Tn}from"./B9tJuYpw.js";import{t as ht}from"./r7-tBYgy.js";import{c as ea}from"./Cnd0P3Nw.js";import{c as ta,a as lt,e as Rn,f as na,d as ra,V as aa}from"./Bai7YTd4.js";import{R as Oe}from"./B-Zk1QFs.js";import{p as Nt}from"./DiFeENSS.js";import{a as Ht}from"./M_92pMZb.js";import{v as ia,D as sa}from"./Cp-Frmvs.js";import{s as Mn}from"./CdEA5IGF.js";function la(g,m){const w=Pn(g);return w.setHours(m),w}function oa(g,m){const w=Pn(g);return w.setMinutes(m),w}var ca=ve('<div class="invalid-feedback d-block"> </div>'),da=ve("<option> </option>"),ua=ve('<div class="invalid-feedback d-block"> </div>'),fa=ve('<div class="invalid-feedback d-block"> </div>'),va=ve(`<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Title*</div> <input type="text" placeholder="" required/> <!> <small class="fw-lighter fst-italic">Displayed publicly on the calendar and announcements page. e.g. Ward Conference, Ward BBQ
			Night</small></div> <div class="d-flex flex-column gap-2"><div>Type*</div> <select class="form-select" aria-label="Select Type"><option>Calendar Event</option><option>Announcement</option></select></div> <div class="d-flex flex-column gap-2"><div>Organization*</div> <select aria-label="Select Organization"></select> <!> <small class="fw-lighter fst-italic">Displayed as a public badge on the event listing.</small></div> <div class="d-flex flex-column gap-2"><div>Visibility</div> <div class="form-check form-switch"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">Public (visible without login)</label></div> <small class="fw-lighter fst-italic">Turn off to restrict this event/announcement to logged-in users only.</small></div> <div class="d-flex flex-column gap-2"><div>Description</div> <textarea rows="4" placeholder="Event description (optional)"></textarea> <!> <small class="fw-lighter fst-italic">Shown publicly when viewers expand the event details. Supports basic HTML formatting.</small></div></div>`);function ma(g,m){dt(m,!1);const w=de(),s=de(),e=de();let n=me(m,"title",12,""),d=me(m,"eventType",12,"calendar_event"),o=me(m,"organization",12,""),_=me(m,"isPublic",12,!0),y=me(m,"description",12,""),a=me(m,"disabled",8,!1),t=me(m,"name",8,"event"),r=me(m,"validationErrors",24,()=>({})),c=de(),l=de();function S(){i(c)?.focus()}function C(){i(l)?.focus()}Be(()=>J(r()),()=>{F(w,!!r().title)}),Be(()=>J(r()),()=>{F(s,!!r().description)}),Be(()=>J(r()),()=>{F(e,!!r().organization)}),kt();var x={focusTitle:S,focusDescription:C};gt();var B=va(),O=L(B),R=W(L(O),2);Ke(R);let z;pt(R,X=>F(c,X),()=>i(c));var p=W(R,2);{var T=X=>{var te=ca(),ie=L(te,!0);P(te),pe(()=>xe(ie,(J(r()),ee(()=>r().title)))),ae(X,te)};he(p,X=>{J(r()),ee(()=>r().title)&&X(T)})}Je(2),P(O);var f=W(O,2),v=W(L(f),2);pe(()=>{d(),fn(()=>{a()})});var b=L(v);b.value=b.__value="calendar_event";var A=W(b);A.value=A.__value="announcement",P(v),P(f);var D=W(f,2),k=W(L(D),2);pe(()=>{o(),fn(()=>{i(e),a()})});let E;$t(k,5,()=>Yr,Nn,(X,te)=>{var ie=da(),ue=L(ie,!0);P(ie);var ye={};pe(()=>{xe(ue,(i(te),ee(()=>i(te).label))),ye!==(ye=(i(te),ee(()=>i(te).key)))&&(ie.value=(ie.__value=(i(te),ee(()=>i(te).key)))??"")}),ae(X,ie)}),P(k);var M=W(k,2);{var h=X=>{var te=ua(),ie=L(te,!0);P(te),pe(()=>xe(ie,(J(r()),ee(()=>r().organization)))),ae(X,te)};he(M,X=>{J(r()),ee(()=>r().organization)&&X(h)})}Je(2),P(D);var u=W(D,2),N=W(L(u),2),I=L(N);Ke(I);var H=W(I,2);P(N),Je(2),P(u);var G=W(u,2),$=W(L(G),2);Ur($);let j;pt($,X=>F(l,X),()=>i(l));var q=W($,2);{var U=X=>{var te=fa(),ie=L(te,!0);P(te),pe(()=>xe(ie,(J(r()),ee(()=>r().description)))),ae(X,te)};he(q,X=>{J(r()),ee(()=>r().description)&&X(U)})}return Je(2),P(G),P(B),pe(()=>{ze(R,"name",`${t()??""}-title`),z=et(R,1,"form-control",null,z,{"is-invalid":i(w)}),R.disabled=a(),v.disabled=a(),E=et(k,1,"form-select",null,E,{"is-invalid":i(e)}),k.disabled=a(),ze(I,"id",`${t()??""}-is-public`),I.disabled=a(),ze(H,"for",`${t()??""}-is-public`),ze($,"name",`${t()??""}-description`),j=et($,1,"form-control",null,j,{"is-invalid":i(s)}),$.disabled=a()}),ke("focus",R,()=>i(c).select()),ct(R,n),vn(v,d),vn(k,o),hn(I,_),ke("focus",$,()=>i(l).select()),ct($,y),ae(g,B),St(m,"focusTitle",S),St(m,"focusDescription",C),ut(x)}var ha=ve('<div class="invalid-feedback d-block"> </div>'),ga=ve('<div class="invalid-feedback d-block"> </div>'),_a=ve('<div class="invalid-feedback d-block"> </div>'),pa=ve('<div class="d-flex flex-column gap-4 ps-4"><div class="d-flex flex-column gap-2"><div>Start time*</div> <input type="time" required/> <!></div> <div class="d-flex flex-column gap-2"><div>End time*</div> <input type="time" required/> <!></div></div>'),ya=ve('<div class="d-flex flex-column gap-4"><div class="d-flex flex-column gap-2"><div>Date*</div> <input type="date" required/> <!></div> <div><div class="form-check d-flex align-items-center gap-2"><input class="form-check-input" type="checkbox"/> <label class="form-check-label">All Day Event</label></div></div> <!></div>');function ba(g,m){dt(m,!1);const w=de(),s=de(),e=de();let n=me(m,"dateInput",12,""),d=me(m,"startTimeInput",12,""),o=me(m,"endTimeInput",12,""),_=me(m,"isAllDay",12,!1),y=me(m,"disabled",8,!1),a=me(m,"name",8,"event"),t=me(m,"validationErrors",24,()=>({})),r=de(),c=de(),l=de();function S(){i(r)?.focus()}function C(){i(c)?.focus()}function x(){i(l)?.focus()}Be(()=>J(t()),()=>{F(w,!!t().dateInput)}),Be(()=>J(t()),()=>{F(s,!!t().startTimeInput)}),Be(()=>J(t()),()=>{F(e,!!t().endTimeInput)}),kt();var B={focusDate:S,focusStartTime:C,focusEndTime:x};gt();var O=ya(),R=L(O),z=W(L(R),2);Ke(z);let p;pt(z,M=>F(r,M),()=>i(r));var T=W(z,2);{var f=M=>{var h=ha(),u=L(h,!0);P(h),pe(()=>xe(u,(J(t()),ee(()=>t().dateInput)))),ae(M,h)};he(T,M=>{J(t()),ee(()=>t().dateInput)&&M(f)})}P(R);var v=W(R,2),b=L(v),A=L(b);Ke(A);var D=W(A,2);P(b),P(v);var k=W(v,2);{var E=M=>{var h=pa(),u=L(h),N=W(L(u),2);Ke(N),ze(N,"step",900);let I;pt(N,te=>F(c,te),()=>i(c));var H=W(N,2);{var G=te=>{var ie=ga(),ue=L(ie,!0);P(ie),pe(()=>xe(ue,(J(t()),ee(()=>t().startTimeInput)))),ae(te,ie)};he(H,te=>{J(t()),ee(()=>t().startTimeInput)&&te(G)})}P(u);var $=W(u,2),j=W(L($),2);Ke(j),ze(j,"step",900);let q;pt(j,te=>F(l,te),()=>i(l));var U=W(j,2);{var X=te=>{var ie=_a(),ue=L(ie,!0);P(ie),pe(()=>xe(ue,(J(t()),ee(()=>t().endTimeInput)))),ae(te,ie)};he(U,te=>{J(t()),ee(()=>t().endTimeInput)&&te(X)})}P($),P(h),pe(()=>{ze(N,"name",`${a()??""}-start-time`),I=et(N,1,"form-control",null,I,{"is-invalid":i(s)}),N.disabled=y(),ze(j,"name",`${a()??""}-end-time`),q=et(j,1,"form-control",null,q,{"is-invalid":i(e)}),j.disabled=y()}),ke("focus",N,()=>i(c).select()),ct(N,d),ke("focus",j,()=>i(l).select()),ct(j,o),ae(M,h)};he(k,M=>{_()||M(E)})}return P(O),pe(()=>{ze(z,"name",`${a()??""}-date`),p=et(z,1,"form-control",null,p,{"is-invalid":i(w)}),z.disabled=y(),ze(A,"id",`${a()??""}-all-day-check`),A.disabled=y(),ze(D,"for",`${a()??""}-all-day-check`)}),ke("focus",z,()=>i(r).select()),ct(z,n),hn(A,_),ae(g,O),St(m,"focusDate",S),St(m,"focusStartTime",C),St(m,"focusEndTime",x),ut(B)}var wa=ve('<div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div>'),xa=ve('<div class="invalid-feedback d-block"> </div>'),Ea=ve('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold">Repeat on these days<span class="text-danger">*</span></div> <div class="d-flex flex-wrap gap-2"></div> <!> <small class="text-muted">Select at least one day when this event repeats</small></div>'),Aa=ve('<div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Monthly recurrence">Monthly recurrence</div> <div class="d-flex flex-column gap-2"><div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div> <div class="form-check"><input class="form-check-input" type="radio"/> <label class="form-check-label"> </label></div></div></div>'),Da=ve('<div class="invalid-feedback d-block"> </div>'),Sa=ve('<div class="d-flex flex-column gap-3 ps-4"><div class="d-flex flex-column gap-2"><div class="form-label fw-semibold" role="group" aria-label="Repeat pattern">Repeat pattern</div> <div class="row g-2 align-items-center"><div class="col-auto"><span class="text-muted">Every</span></div> <div class="col-auto"><input type="number" class="form-control" min="1" max="99" style="width: 80px;"/></div> <div class="col-auto"><select class="form-select"><option> </option><option> </option><option> </option><option> </option></select></div></div></div> <!> <!> <div class="d-flex flex-column gap-2"><label class="form-label fw-semibold">Repeat until<span class="text-danger">*</span></label> <input type="date" required/> <!> <small class="text-muted">The last date this event will occur</small></div></div>'),ka=ve('<div class="d-flex flex-column gap-3"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label fw-semibold">Make this a recurring event</label></div> <!></div>');function Ia(g,m){dt(m,!1);const w=[],s=[];let e=me(m,"isRecurring",12,!1),n=me(m,"recurrenceFrequency",12,"weekly"),d=me(m,"recurrenceInterval",12,1),o=me(m,"recurringDays",28,()=>[]),_=me(m,"recurrenceEndDate",12,""),y=me(m,"monthlyType",12,"date"),a=me(m,"dateInput",8,""),t=me(m,"disabled",8,!1),r=me(m,"name",8,"event"),c=me(m,"validationErrors",24,()=>({}));const l=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];function S(T){if(!T)return"Same weekday of the month";try{const f=new Date(T),v=He(f,"EEEE"),b=Math.ceil(f.getDate()/7);return`${["","1st","2nd","3rd","4th","5th"][b]} ${v} of the month`}catch{return"Same weekday of the month"}}function C(T){if(!T)return 1;try{return T.split("-").map(Number)[2]}catch{return 1}}gt();var x=ka(),B=L(x),O=L(B);Ke(O);var R=W(O,2);P(B);var z=W(B,2);{var p=T=>{var f=Sa(),v=L(f),b=W(L(v),2),A=W(L(b),2),D=L(A);Ke(D),P(A);var k=W(A,2),E=L(k);pe(()=>{n(),fn(()=>{t(),d()})});var M=L(E),h=L(M,!0);P(M),M.value=M.__value="daily";var u=W(M),N=L(u,!0);P(u),u.value=u.__value="weekly";var I=W(u),H=L(I,!0);P(I),I.value=I.__value="monthly";var G=W(I),$=L(G,!0);P(G),G.value=G.__value="yearly",P(E),P(k),P(b),P(v);var j=W(v,2);{var q=Te=>{var Q=Ea(),Z=W(L(Q),2);$t(Z,5,()=>l,Nn,(le,ce)=>{var se=wa(),ne=L(se);Ke(ne);var fe,ge=W(ne,2),oe=L(ge,!0);P(ge),P(se),pe(()=>{ze(ne,"id",`${r()??""}-day-${i(ce),ee(()=>i(ce).value)??""}`),ne.disabled=t(),fe!==(fe=(i(ce),ee(()=>i(ce).value)))&&(ne.value=(ne.__value=(i(ce),ee(()=>i(ce).value)))??""),ze(ge,"for",`${r()??""}-day-${i(ce),ee(()=>i(ce).value)??""}`),xe(oe,(i(ce),ee(()=>i(ce).label)))}),on(w,[],ne,()=>(i(ce),ee(()=>i(ce).value),o()),o),ae(le,se)}),P(Z);var V=W(Z,2);{var re=le=>{var ce=xa(),se=L(ce,!0);P(ce),pe(()=>xe(se,(J(c()),ee(()=>c().recurringDays)))),ae(le,ce)};he(V,le=>{J(c()),ee(()=>c().recurringDays)&&le(re)})}Je(2),P(Q),ae(Te,Q)};he(j,Te=>{n()==="weekly"&&Te(q)})}var U=W(j,2);{var X=Te=>{var Q=Aa(),Z=W(L(Q),2),V=L(Z),re=L(V);Ke(re),re.value=re.__value="date";var le=W(re,2),ce=L(le);P(le),P(V);var se=W(V,2),ne=L(se);Ke(ne),ne.value=ne.__value="weekday";var fe=W(ne,2),ge=L(fe);P(fe),P(se),P(Z),P(Q),pe((oe,_e)=>{ze(re,"id",`${r()??""}-monthly-date`),re.disabled=t(),ze(le,"for",`${r()??""}-monthly-date`),xe(ce,`On day ${oe??""} of the month`),ze(ne,"id",`${r()??""}-monthly-weekday`),ne.disabled=t(),ze(fe,"for",`${r()??""}-monthly-weekday`),xe(ge,`On the ${_e??""}`)},[()=>(J(a()),ee(()=>C(a()))),()=>(J(a()),ee(()=>S(a())))]),on(s,[],re,y,y),on(s,[],ne,y,y),ae(Te,Q)};he(U,Te=>{n()==="monthly"&&Te(X)})}var te=W(U,2),ie=L(te),ue=W(ie,2);Ke(ue);let ye;var Se=W(ue,2);{var De=Te=>{var Q=Da(),Z=L(Q,!0);P(Q),pe(()=>xe(Z,(J(c()),ee(()=>c().recurrenceEndDate)))),ae(Te,Q)};he(Se,Te=>{J(c()),ee(()=>c().recurrenceEndDate)&&Te(De)})}Je(2),P(te),P(f),pe(()=>{D.disabled=t(),E.disabled=t(),xe(h,d()===1?"day":"days"),xe(N,d()===1?"week":"weeks"),xe(H,d()===1?"month":"months"),xe($,d()===1?"year":"years"),ze(ie,"for",`${r()??""}-recurrence-end-date`),ye=et(ue,1,"form-control",null,ye,{"is-invalid":!!c().recurrenceEndDate}),ze(ue,"id",`${r()??""}-recurrence-end-date`),ue.disabled=t()}),ct(D,d),vn(E,n),ct(ue,_),ae(T,f)};he(z,T=>{e()&&T(p)})}P(x),pe(()=>{ze(O,"id",`${r()??""}-is-recurring`),O.disabled=t(),ze(R,"for",`${r()??""}-is-recurring`)}),hn(O,e),ae(g,x),ut()}var Ta=ve('<div class="d-flex flex-column gap-2"><div>Location</div> <input type="text" class="form-control" placeholder="Event location (optional)"/> <small class="fw-lighter fst-italic">Displayed publicly on the event listing. e.g. Cultural Hall, Stake Center</small></div>');function Ra(g,m){dt(m,!1);let w=me(m,"value",12,""),s=me(m,"disabled",8,!1),e=me(m,"name",8,"location"),n=de();function d(){i(n)?.focus()}var o={focus:d},_=Ta(),y=W(L(_),2);return Ke(y),pt(y,a=>F(n,a),()=>i(n)),Je(2),P(_),pe(()=>{ze(y,"name",e()),y.disabled=s()}),ke("focus",y,()=>i(n).select()),ct(y,w),ae(g,_),St(m,"focus",d),ut(o)}var Ma=ve('<input type="text" class="form-control form-control-sm"/> <small class="text-muted"> </small>',1),Ca=ve('<div class="fw-semibold"> </div> <small class="text-muted"> </small>',1),Fa=ve('<button type="button" class="btn btn-sm btn-success" title="Save"><i class="bi bi-check-lg"></i></button> <button type="button" class="btn btn-sm btn-secondary" title="Cancel"><i class="bi bi-x-lg"></i></button>',1),Ua=ve('<button type="button" class="btn btn-sm btn-outline-primary" title="Edit name"><i class="bi bi-pencil"></i></button> <button type="button" class="btn btn-sm btn-outline-danger" title="Delete"><i class="bi bi-trash"></i></button>',1),Oa=ve('<div class="d-flex align-items-center gap-2 p-2 border rounded"><div class="flex-grow-1"><!></div> <!></div>'),za=ve('<div class="d-flex flex-column gap-2 mb-2"></div>'),Pa=ve('<div class="d-flex flex-column gap-2"><div>Attachments</div> <!> <div class="d-flex flex-column gap-2"><div class="d-flex gap-2 align-items-center"><input type="file" class="form-control" accept="image/*,application/pdf"/> <!></div> <small class="fw-lighter fst-italic">Publicly visible in the event details. Max 5MB per file. Supports: images, PDFs</small></div></div>');function Ba(g,m){dt(m,!1);let w=me(m,"attachments",24,()=>[]),s=me(m,"disabled",8,!1),e=me(m,"uploadingFile",8,!1);const n=Mr();let d=de(),o=de(null),_=de("");const y=T=>{if(T===0)return"0 Bytes";const f=1024,v=["Bytes","KB","MB"],b=Math.floor(Math.log(T)/Math.log(f));return Math.round(T/Math.pow(f,b)*100)/100+" "+v[b]},a=T=>{const f=T.target;f.files&&f.files[0]&&(n("upload",f.files[0]),f.value="")},t=T=>{F(o,T.id),F(_,T.name)},r=T=>{i(_).trim()&&i(_)!==T.name&&n("edit",{attachment:T,newName:i(_).trim()}),F(o,null),F(_,"")},c=()=>{F(o,null),F(_,"")},l=T=>{n("remove",T)};gt();var S=Pa(),C=W(L(S),2);{var x=T=>{var f=za();$t(f,5,w,v=>v.id,(v,b)=>{var A=Oa(),D=L(A),k=L(D);{var E=I=>{var H=Ma(),G=Ve(H);Ke(G);var $=W(G,2),j=L($,!0);P($),pe(q=>{G.disabled=s(),xe(j,q)},[()=>(i(b),ee(()=>y(i(b).size)))]),ct(G,()=>i(_),q=>F(_,q)),ke("keydown",G,q=>{q.key==="Enter"&&r(i(b)),q.key==="Escape"&&c()}),ae(I,H)},M=I=>{var H=Ca(),G=Ve(H),$=L(G,!0);P(G);var j=W(G,2),q=L(j,!0);P(j),pe(U=>{xe($,(i(b),ee(()=>i(b).name))),xe(q,U)},[()=>(i(b),ee(()=>y(i(b).size)))]),ae(I,H)};he(k,I=>{i(o),i(b),ee(()=>i(o)===i(b).id)?I(E):I(M,!1)})}P(D);var h=W(D,2);{var u=I=>{var H=Fa(),G=Ve(H),$=W(G,2);pe(()=>{G.disabled=s(),$.disabled=s()}),ke("click",G,()=>r(i(b))),ke("click",$,c),ae(I,H)},N=I=>{var H=Ua(),G=Ve(H),$=W(G,2);pe(()=>{G.disabled=s(),$.disabled=s()}),ke("click",G,()=>t(i(b))),ke("click",$,()=>l(i(b))),ae(I,H)};he(h,I=>{i(o),i(b),ee(()=>i(o)===i(b).id)?I(u):I(N,!1)})}P(A),ae(v,A)}),P(f),ae(T,f)};he(C,T=>{J(w()),ee(()=>w().length>0)&&T(x)})}var B=W(C,2),O=L(B),R=L(O);pt(R,T=>F(d,T),()=>i(d));var z=W(R,2);{var p=T=>{Ln(T,{size:"sm"})};he(z,T=>{e()&&T(p)})}P(O),Je(2),P(B),P(S),pe(()=>R.disabled=s()||e()),ke("change",R,a),ae(g,S),ut()}var La=ve('<div class="modal svelte-xtxevo" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">Edit Recurring Event</h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">How would you like to edit it?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-primary text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">The entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function Na(g,m){dt(m,!1);const w=de();let s=me(m,"eventTitle",8),e=me(m,"occurrenceDate",8),n=me(m,"callback",8);function d(A){n()(A)}function o(){n()(null)}Be(()=>(J(e()),He),()=>{F(w,(()=>{try{const[A,D,k]=e().split("-").map(Number),E=new Date(A,D-1,k);return He(E,"EEEE, MMMM d, yyyy")}catch{return e()}})())}),kt(),gt();var _=La(),y=L(_),a=L(y),t=L(a),r=W(L(t),2);P(t);var c=W(t,2),l=L(c),S=L(l),C=L(S);P(S),Je(),P(l);var x=W(l,4),B=L(x),O=W(L(B),2),R=L(O,!0);P(O),P(B);var z=W(B,2),p=W(L(z),2),T=L(p);P(p),P(z);var f=W(z,2);P(x),P(c);var v=W(c,2),b=L(v);P(v),P(a),P(y),P(_),pe(()=>{xe(C,`"${s()??""}"`),xe(R,i(w)),xe(T,`From ${i(w)??""} onwards`)}),ke("click",r,o),ke("click",B,()=>d("single")),ke("click",z,()=>d("future")),ke("click",f,()=>d("all")),ke("click",b,o),ae(g,_),ut()}var Ha=ve('<div class="modal svelte-gu1ski" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-danger text-white"><h5 class="modal-title">Delete Recurring Event</h5> <button type="button" class="btn-close btn-close-white" aria-label="Close"></button></div> <div class="modal-body"><p class="mb-3"><strong> </strong> is a recurring event.</p> <p class="mb-3">What would you like to delete?</p> <div class="d-flex flex-column gap-2"><button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This occurrence only</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">This and future occurrences</div> <small class="text-muted"> </small></button> <button type="button" class="btn btn-outline-danger text-start p-3"><div class="fw-bold">All occurrences</div> <small class="text-muted">Delete the entire series</small></button></div></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button></div></div></div></div>');function qa(g,m){dt(m,!1);const w=de();let s=me(m,"eventTitle",8),e=me(m,"occurrenceDate",8),n=me(m,"callback",8);function d(A){n()(A)}function o(){n()(null)}Be(()=>(J(e()),He),()=>{F(w,(()=>{try{const[A,D,k]=e().split("-").map(Number),E=new Date(A,D-1,k);return He(E,"EEEE, MMMM d, yyyy")}catch{return e()}})())}),kt(),gt();var _=Ha(),y=L(_),a=L(y),t=L(a),r=W(L(t),2);P(t);var c=W(t,2),l=L(c),S=L(l),C=L(S);P(S),Je(),P(l);var x=W(l,4),B=L(x),O=W(L(B),2),R=L(O,!0);P(O),P(B);var z=W(B,2),p=W(L(z),2),T=L(p);P(p),P(z);var f=W(z,2);P(x),P(c);var v=W(c,2),b=L(v);P(v),P(a),P(y),P(_),pe(()=>{xe(C,`"${s()??""}"`),xe(R,i(w)),xe(T,`From ${i(w)??""} onwards`)}),ke("click",r,o),ke("click",B,()=>d("single")),ke("click",z,()=>d("future")),ke("click",f,()=>d("all")),ke("click",b,o),ae(g,_),ut()}var Wa=ve('<div class="modal fade" tabindex="-1" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><p> </p> <div class="mb-3"><label for="cloneDate" class="form-label">Event Date</label> <input type="date" class="form-control" id="cloneDate"/></div></div> <div class="modal-footer"><button type="button"> </button> <button type="button"> </button></div></div></div></div>');function Ya(g,m){dt(m,!1);let w=me(m,"title",8,"Clone Event"),s=me(m,"message",8,"Select a date for the cloned event:"),e=me(m,"confirmButtonLabel",8,"Clone"),n=me(m,"confirmButtonCSS",8,"btn-primary"),d=me(m,"rejectButtonLabel",8,"Cancel"),o=me(m,"rejectButtonCSS",8,"btn-secondary"),_=me(m,"defaultDate",8,void 0),y=me(m,"callback",8,()=>{}),a=de(),t=de(_()||He(new Date,"yyyy-MM-dd")),r=!1,c;zn(()=>{const h=window.bootstrap.Modal;new h(i(a)).show(),i(a).addEventListener("hidden.bs.modal",()=>{r?y()(!0,c):y()(!1)})});function l(){r=!0,c=i(t),window.bootstrap.Modal.getInstance(i(a)).hide()}function S(){r=!1,window.bootstrap.Modal.getInstance(i(a)).hide()}gt();var C=Wa(),x=L(C),B=L(x),O=L(B),R=L(O),z=L(R,!0);P(R),Je(2),P(O);var p=W(O,2),T=L(p),f=L(T,!0);P(T);var v=W(T,2),b=W(L(v),2);Ke(b),P(v),P(p);var A=W(p,2),D=L(A),k=L(D,!0);P(D);var E=W(D,2),M=L(E,!0);P(E),P(A),P(B),P(x),P(C),pt(C,h=>F(a,h),()=>i(a)),pe(()=>{xe(z,w()),xe(f,s()),et(D,1,`btn ${o()??""}`),xe(k,d()),et(E,1,`btn ${n()??""}`),xe(M,e())}),ct(b,()=>i(t),h=>F(t,h)),ke("click",D,S),ke("click",E,l),ae(g,C),ut()}let Pt;function ja(g){if(typeof document>"u")return;const m=document.createElement("div");document.body.appendChild(m);const w={title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",rejectButtonLabel:"Cancel",rejectButtonCSS:"btn-secondary",callback:()=>{console.log("callback")}};g.title&&(w.title=g.title),g.message&&(w.message=g.message),g.confirmButtonLabel&&(w.confirmButtonLabel=g.confirmButtonLabel),g.confirmButtonCSS&&(w.confirmButtonCSS=g.confirmButtonCSS),g.rejectButtonLabel&&(w.rejectButtonLabel=g.rejectButtonLabel),g.rejectButtonCSS&&(w.rejectButtonCSS=g.rejectButtonCSS),g.defaultDate&&(w.defaultDate=g.defaultDate),w.callback=(s,e)=>{console.log("Clone confirm result:",s,e),Pt&&(Pr(Pt),Pt=void 0),m.remove(),g.callback&&typeof g.callback=="function"&&g.callback(s,e)},Pt=zr(Ya,{target:m,props:w})}const $a=ta().shape({title:lt().required("Title is required").min(3,"Title must be at least 3 characters").max(255,"Title cannot exceed 255 characters"),event_type:lt().oneOf(["calendar_event","announcement"],"Invalid event type").required("Event type is required"),organization:lt().required("Organization is required"),description:lt().nullable().max(1e4,"Description is too long"),location:lt().nullable().max(255,"Location cannot exceed 255 characters"),dateInput:lt().when("event_type",{is:"calendar_event",then:g=>g.required("Date is required"),otherwise:g=>g.nullable()}),startTimeInput:lt().when(["event_type","is_all_day"],{is:(g,m)=>g==="calendar_event"&&!m,then:g=>g.required("Start time is required"),otherwise:g=>g.nullable()}),endTimeInput:lt().when(["event_type","is_all_day"],{is:(g,m)=>g==="calendar_event"&&!m,then:g=>g.required("End time is required"),otherwise:g=>g.nullable()}),isRecurring:Rn(),recurrenceFrequency:lt().oneOf(["daily","weekly","monthly","yearly"]).nullable(),recurringDays:na().of(ra().min(0).max(6)).when(["isRecurring","recurrenceFrequency"],{is:(g,m)=>g&&m==="weekly",then:g=>g.min(1,"Select at least one day for weekly recurring events").required(),otherwise:g=>g.nullable()}),hasEndDate:Rn(),recurrenceEndDate:lt().when(["isRecurring","hasEndDate"],{is:(g,m)=>g&&m,then:g=>g.required("End date is required").test("is-future","End date must be in the future",function(m){if(!m)return!1;const w=new Date(m),s=new Date;return s.setHours(0,0,0,0),w>=s}),otherwise:g=>g.nullable()})});function Qa(){const g=Cr({});async function m(e){try{return await $a.validate(e,{abortEarly:!1}),g.set({}),!0}catch(n){if(n instanceof aa){const d={};return n.inner.forEach(o=>{o.path&&(d[o.path]=o.message)}),g.set(d),!1}return!1}}function w(){g.set({})}function s(){return Object.values(un(g)).filter(n=>n.length>0)}return{validationErrors:g,validate:m,clearErrors:w,getErrorMessages:s}}function gn(g){const{frequency:m,interval:w,recurringDays:s,recurrenceEndDate:e,hasEndDate:n,monthlyType:d,startTime:o}=g,_={0:Oe.SU,1:Oe.MO,2:Oe.TU,3:Oe.WE,4:Oe.TH,5:Oe.FR,6:Oe.SA},y={daily:Oe.DAILY,weekly:Oe.WEEKLY,monthly:Oe.MONTHLY,yearly:Oe.YEARLY},a=new Date(o),t=yt(a,Ge),r=new Date(t);r.setHours(12,0,0,0);const c=Et(r,Ge),l={freq:y[m],interval:w,dtstart:c};if(n&&e){const C=new Date(`${e}T23:59:59.999`),x=Et(C,Ge);l.until=x}if(m==="weekly"&&s.length>0)l.byweekday=s.map(C=>_[C]);else if(m==="monthly")if(d==="date")l.bymonthday=[r.getDate()];else{const C=Math.ceil(r.getDate()/7),x=r.getDay(),B=[Oe.SU,Oe.MO,Oe.TU,Oe.WE,Oe.TH,Oe.FR,Oe.SA];l.byweekday=[B[x].nth(C)]}else m==="yearly"&&(l.bymonth=[r.getMonth()+1],l.bymonthday=[r.getDate()]);return{recurrence_rule:new Oe(l).toString(),recurrence_end_date:n&&e?l.until.toISOString():void 0}}function Wn(g,m){try{const s=Oe.fromString(g).origOptions,e={6:0,0:1,1:2,2:3,3:4,4:5,5:6},n={[Oe.DAILY]:"daily",[Oe.WEEKLY]:"weekly",[Oe.MONTHLY]:"monthly",[Oe.YEARLY]:"yearly"},d=(s.freq!==void 0?n[s.freq]:null)||"weekly",o=s.interval||1;let _=[],y="date";s.byweekday&&d==="weekly"&&(_=(Array.isArray(s.byweekday)?s.byweekday:[s.byweekday]).map(r=>{const c=typeof r=="number"?r:r.weekday;return e[c]})),d==="monthly"&&(s.bymonthday&&Array.isArray(s.bymonthday)&&s.bymonthday.length>0?y="date":s.byweekday&&(y="weekday"));let a="",t=!1;if(m){t=!0;const r=yt(new Date(m),Ge);a=He(r,"yyyy-MM-dd")}else if(s.until){t=!0;const r=yt(s.until,Ge);a=He(r,"yyyy-MM-dd")}return{frequency:d,interval:o,recurringDays:_,recurrenceEndDate:a,hasEndDate:t,monthlyType:y}}catch(w){return console.error("Failed to parse recurrence rule:",w),null}}function Yn(){return{recurrence_rule:void 0,recurrence_end_date:void 0}}function jn(){return{generateRecurrenceRule:gn,parseRecurrenceRule:Wn,clearRecurrence:Yn}}const mn=Object.freeze(Object.defineProperty({__proto__:null,clearRecurrence:Yn,generateRecurrenceRule:gn,parseRecurrenceRule:Wn,useRecurrenceLogic:jn},Symbol.toStringTag,{value:"Module"}));function Va(g,m){return m.forEach(function(w){w&&typeof w!="string"&&!Array.isArray(w)&&Object.keys(w).forEach(function(s){if(s!=="default"&&!(s in g)){var e=Object.getOwnPropertyDescriptor(w,s);Object.defineProperty(g,s,e.get?e:{enumerable:!0,get:function(){return w[s]}})}})}),Object.freeze(g)}function $n(g,m){return new Promise(function(w,s){let e;return Ka(g).then(function(n){try{return e=n,w(new Blob([m.slice(0,2),e,m.slice(2)],{type:"image/jpeg"}))}catch(d){return s(d)}},s)})}const Ka=g=>new Promise((m,w)=>{const s=new FileReader;s.addEventListener("load",({target:{result:e}})=>{const n=new DataView(e);let d=0;if(n.getUint16(d)!==65496)return w("not a valid JPEG");for(d+=2;;){const o=n.getUint16(d);if(o===65498)break;const _=n.getUint16(d+2);if(o===65505&&n.getUint32(d+4)===1165519206){const y=d+10;let a;switch(n.getUint16(y)){case 18761:a=!0;break;case 19789:a=!1;break;default:return w("TIFF header contains invalid endian")}if(n.getUint16(y+2,a)!==42)return w("TIFF header contains invalid version");const t=n.getUint32(y+4,a),r=y+t+2+12*n.getUint16(y+t,a);for(let c=y+t+2;c<r;c+=12)if(n.getUint16(c,a)==274){if(n.getUint16(c+2,a)!==3)return w("Orientation data type is invalid");if(n.getUint32(c+4,a)!==1)return w("Orientation data count is invalid");n.setUint16(c+8,1,a);break}return m(e.slice(d,d+2+_))}d+=2+_}return m(new Blob)}),s.readAsArrayBuffer(g)});var qt={},Ga={get exports(){return qt},set exports(g){qt=g}};(function(g){var m,w,s={};Ga.exports=s,s.parse=function(e,n){for(var d=s.bin.readUshort,o=s.bin.readUint,_=0,y={},a=new Uint8Array(e),t=a.length-4;o(a,t)!=101010256;)t--;_=t,_+=4;var r=d(a,_+=4);d(a,_+=2);var c=o(a,_+=2),l=o(a,_+=4);_+=4,_=l;for(var S=0;S<r;S++){o(a,_),_+=4,_+=4,_+=4,o(a,_+=4),c=o(a,_+=4);var C=o(a,_+=4),x=d(a,_+=4),B=d(a,_+2),O=d(a,_+4);_+=6;var R=o(a,_+=8);_+=4,_+=x+B+O,s._readLocal(a,R,y,c,C,n)}return y},s._readLocal=function(e,n,d,o,_,y){var a=s.bin.readUshort,t=s.bin.readUint;t(e,n),a(e,n+=4),a(e,n+=2);var r=a(e,n+=2);t(e,n+=2),t(e,n+=4),n+=4;var c=a(e,n+=8),l=a(e,n+=2);n+=2;var S=s.bin.readUTF8(e,n,c);if(n+=c,n+=l,y)d[S]={size:_,csize:o};else{var C=new Uint8Array(e.buffer,n);if(r==0)d[S]=new Uint8Array(C.buffer.slice(n,n+o));else{if(r!=8)throw"unknown compression method: "+r;var x=new Uint8Array(_);s.inflateRaw(C,x),d[S]=x}}},s.inflateRaw=function(e,n){return s.F.inflate(e,n)},s.inflate=function(e,n){return e[0],e[1],s.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},s.deflate=function(e,n){n==null&&(n={level:6});var d=0,o=new Uint8Array(50+Math.floor(1.1*e.length));o[d]=120,o[d+1]=156,d+=2,d=s.F.deflateRaw(e,o,d,n.level);var _=s.adler(e,0,e.length);return o[d+0]=_>>>24&255,o[d+1]=_>>>16&255,o[d+2]=_>>>8&255,o[d+3]=_>>>0&255,new Uint8Array(o.buffer,0,d+4)},s.deflateRaw=function(e,n){n==null&&(n={level:6});var d=new Uint8Array(50+Math.floor(1.1*e.length)),o=s.F.deflateRaw(e,d,o,n.level);return new Uint8Array(d.buffer,0,o)},s.encode=function(e,n){n==null&&(n=!1);var d=0,o=s.bin.writeUint,_=s.bin.writeUshort,y={};for(var a in e){var t=!s._noNeed(a)&&!n,r=e[a],c=s.crc.crc(r,0,r.length);y[a]={cpr:t,usize:r.length,crc:c,file:t?s.deflateRaw(r):r}}for(var a in y)d+=y[a].file.length+30+46+2*s.bin.sizeUTF8(a);d+=22;var l=new Uint8Array(d),S=0,C=[];for(var a in y){var x=y[a];C.push(S),S=s._writeHeader(l,S,a,x,0)}var B=0,O=S;for(var a in y)x=y[a],C.push(S),S=s._writeHeader(l,S,a,x,1,C[B++]);var R=S-O;return o(l,S,101010256),S+=4,_(l,S+=4,B),_(l,S+=2,B),o(l,S+=2,R),o(l,S+=4,O),S+=4,S+=2,l.buffer},s._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(n)!=-1},s._writeHeader=function(e,n,d,o,_,y){var a=s.bin.writeUint,t=s.bin.writeUshort,r=o.file;return a(e,n,_==0?67324752:33639248),n+=4,_==1&&(n+=2),t(e,n,20),t(e,n+=2,0),t(e,n+=2,o.cpr?8:0),a(e,n+=2,0),a(e,n+=4,o.crc),a(e,n+=4,r.length),a(e,n+=4,o.usize),t(e,n+=4,s.bin.sizeUTF8(d)),t(e,n+=2,0),n+=2,_==1&&(n+=2,n+=2,a(e,n+=6,y),n+=4),n+=s.bin.writeUTF8(e,n,d),_==0&&(e.set(r,n),n+=r.length),n},s.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var d=n,o=0;o<8;o++)1&d?d=3988292384^d>>>1:d>>>=1;e[n]=d}return e}(),update:function(e,n,d,o){for(var _=0;_<o;_++)e=s.crc.table[255&(e^n[d+_])]^e>>>8;return e},crc:function(e,n,d){return 4294967295^s.crc.update(4294967295,e,n,d)}},s.adler=function(e,n,d){for(var o=1,_=0,y=n,a=n+d;y<a;){for(var t=Math.min(y+5552,a);y<t;)_+=o+=e[y++];o%=65521,_%=65521}return _<<16|o},s.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,d){e[n]=255&d,e[n+1]=d>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,d){e[n]=255&d,e[n+1]=d>>8&255,e[n+2]=d>>16&255,e[n+3]=d>>24&255},readASCII:function(e,n,d){for(var o="",_=0;_<d;_++)o+=String.fromCharCode(e[n+_]);return o},writeASCII:function(e,n,d){for(var o=0;o<d.length;o++)e[n+o]=d.charCodeAt(o)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,d){for(var o,_="",y=0;y<d;y++)_+="%"+s.bin.pad(e[n+y].toString(16));try{o=decodeURIComponent(_)}catch{return s.bin.readASCII(e,n,d)}return o},writeUTF8:function(e,n,d){for(var o=d.length,_=0,y=0;y<o;y++){var a=d.charCodeAt(y);if(!(4294967168&a))e[n+_]=a,_++;else if(!(4294965248&a))e[n+_]=192|a>>6,e[n+_+1]=128|a>>0&63,_+=2;else if(!(4294901760&a))e[n+_]=224|a>>12,e[n+_+1]=128|a>>6&63,e[n+_+2]=128|a>>0&63,_+=3;else{if(4292870144&a)throw"e";e[n+_]=240|a>>18,e[n+_+1]=128|a>>12&63,e[n+_+2]=128|a>>6&63,e[n+_+3]=128|a>>0&63,_+=4}}return _},sizeUTF8:function(e){for(var n=e.length,d=0,o=0;o<n;o++){var _=e.charCodeAt(o);if(!(4294967168&_))d++;else if(!(4294965248&_))d+=2;else if(!(4294901760&_))d+=3;else{if(4292870144&_)throw"e";d+=4}}return d}},s.F={},s.F.deflateRaw=function(e,n,d,o){var _=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],y=s.F.U,a=s.F._goodIndex;s.F._hash;var t=s.F._putsE,r=0,c=d<<3,l=0,S=e.length;if(o==0){for(;r<S;)t(n,c,r+(A=Math.min(65535,S-r))==S?1:0),c=s.F._copyExact(e,r,A,n,c+8),r+=A;return c>>>3}var C=y.lits,x=y.strt,B=y.prev,O=0,R=0,z=0,p=0,T=0,f=0;for(S>2&&(x[f=s.F._hash(e,0)]=0),r=0;r<S;r++){if(T=f,r+1<S-2){f=s.F._hash(e,r+1);var v=r+1&32767;B[v]=x[f],x[f]=v}if(l<=r){(O>14e3||R>26697)&&S-r>100&&(l<r&&(C[O]=r-l,O+=2,l=r),c=s.F._writeBlock(r==S-1||l==S?1:0,C,O,p,e,z,r-z,n,c),O=R=p=0,z=r);var b=0;r<S-2&&(b=s.F._bestMatch(e,r,B,T,Math.min(_[2],S-r),_[3]));var A=b>>>16,D=65535&b;if(b!=0){D=65535&b;var k=a(A=b>>>16,y.of0);y.lhst[257+k]++;var E=a(D,y.df0);y.dhst[E]++,p+=y.exb[k]+y.dxb[E],C[O]=A<<23|r-l,C[O+1]=D<<16|k<<8|E,O+=2,l=r+A}else y.lhst[e[r]]++;R++}}for(z==r&&e.length!=0||(l<r&&(C[O]=r-l,O+=2,l=r),c=s.F._writeBlock(1,C,O,p,e,z,r-z,n,c),O=0,R=0,O=R=p=0,z=r);7&c;)c++;return c>>>3},s.F._bestMatch=function(e,n,d,o,_,y){var a=32767&n,t=d[a],r=a-t+32768&32767;if(t==a||o!=s.F._hash(e,n-r))return 0;for(var c=0,l=0,S=Math.min(32767,n);r<=S&&--y!=0&&t!=a;){if(c==0||e[n+c]==e[n+c-r]){var C=s.F._howLong(e,n,r);if(C>c){if(l=r,(c=C)>=_)break;r+2<C&&(C=r+2);for(var x=0,B=0;B<C-2;B++){var O=n-r+B+32768&32767,R=O-d[O]+32768&32767;R>x&&(x=R,t=O)}}}r+=(a=t)-(t=d[a])+32768&32767}return c<<16|l},s.F._howLong=function(e,n,d){if(e[n]!=e[n-d]||e[n+1]!=e[n+1-d]||e[n+2]!=e[n+2-d])return 0;var o=n,_=Math.min(e.length,n+258);for(n+=3;n<_&&e[n]==e[n-d];)n++;return n-o},s.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(e,n,d,o,_,y,a,t,r){var c,l,S,C,x,B,O,R,z,p=s.F.U,T=s.F._putsF,f=s.F._putsE;p.lhst[256]++,l=(c=s.F.getTrees())[0],S=c[1],C=c[2],x=c[3],B=c[4],O=c[5],R=c[6],z=c[7];var v=32+(r+3&7?8-(r+3&7):0)+(a<<3),b=o+s.F.contSize(p.fltree,p.lhst)+s.F.contSize(p.fdtree,p.dhst),A=o+s.F.contSize(p.ltree,p.lhst)+s.F.contSize(p.dtree,p.dhst);A+=14+3*O+s.F.contSize(p.itree,p.ihst)+(2*p.ihst[16]+3*p.ihst[17]+7*p.ihst[18]);for(var D=0;D<286;D++)p.lhst[D]=0;for(D=0;D<30;D++)p.dhst[D]=0;for(D=0;D<19;D++)p.ihst[D]=0;var k=v<b&&v<A?0:b<A?1:2;if(T(t,r,e),T(t,r+1,k),r+=3,k==0){for(;7&r;)r++;r=s.F._copyExact(_,y,a,t,r)}else{var E,M;if(k==1&&(E=p.fltree,M=p.fdtree),k==2){s.F.makeCodes(p.ltree,l),s.F.revCodes(p.ltree,l),s.F.makeCodes(p.dtree,S),s.F.revCodes(p.dtree,S),s.F.makeCodes(p.itree,C),s.F.revCodes(p.itree,C),E=p.ltree,M=p.dtree,f(t,r,x-257),f(t,r+=5,B-1),f(t,r+=5,O-4),r+=4;for(var h=0;h<O;h++)f(t,r+3*h,p.itree[1+(p.ordr[h]<<1)]);r+=3*O,r=s.F._codeTiny(R,p.itree,t,r),r=s.F._codeTiny(z,p.itree,t,r)}for(var u=y,N=0;N<d;N+=2){for(var I=n[N],H=I>>>23,G=u+(8388607&I);u<G;)r=s.F._writeLit(_[u++],E,t,r);if(H!=0){var $=n[N+1],j=$>>16,q=$>>8&255,U=255&$;f(t,r=s.F._writeLit(257+q,E,t,r),H-p.of0[q]),r+=p.exb[q],T(t,r=s.F._writeLit(U,M,t,r),j-p.df0[U]),r+=p.dxb[U],u+=H}}r=s.F._writeLit(256,E,t,r)}return r},s.F._copyExact=function(e,n,d,o,_){var y=_>>>3;return o[y]=d,o[y+1]=d>>>8,o[y+2]=255-o[y],o[y+3]=255-o[y+1],y+=4,o.set(new Uint8Array(e.buffer,n,d),y),_+(d+4<<3)},s.F.getTrees=function(){for(var e=s.F.U,n=s.F._hufTree(e.lhst,e.ltree,15),d=s.F._hufTree(e.dhst,e.dtree,15),o=[],_=s.F._lenCodes(e.ltree,o),y=[],a=s.F._lenCodes(e.dtree,y),t=0;t<o.length;t+=2)e.ihst[o[t]]++;for(t=0;t<y.length;t+=2)e.ihst[y[t]]++;for(var r=s.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&e.itree[1+(e.ordr[c-1]<<1)]==0;)c--;return[n,d,r,_,a,c,o,y]},s.F.getSecond=function(e){for(var n=[],d=0;d<e.length;d+=2)n.push(e[d+1]);return n},s.F.nonZero=function(e){for(var n="",d=0;d<e.length;d+=2)e[d+1]!=0&&(n+=(d>>1)+",");return n},s.F.contSize=function(e,n){for(var d=0,o=0;o<n.length;o++)d+=n[o]*e[1+(o<<1)];return d},s.F._codeTiny=function(e,n,d,o){for(var _=0;_<e.length;_+=2){var y=e[_],a=e[_+1];o=s.F._writeLit(y,n,d,o);var t=y==16?2:y==17?3:7;y>15&&(s.F._putsE(d,o,a,t),o+=t)}return o},s.F._lenCodes=function(e,n){for(var d=e.length;d!=2&&e[d-1]==0;)d-=2;for(var o=0;o<d;o+=2){var _=e[o+1],y=o+3<d?e[o+3]:-1,a=o+5<d?e[o+5]:-1,t=o==0?-1:e[o-1];if(_==0&&y==_&&a==_){for(var r=o+5;r+2<d&&e[r+2]==_;)r+=2;(c=Math.min(r+1-o>>>1,138))<11?n.push(17,c-3):n.push(18,c-11),o+=2*c-2}else if(_==t&&y==_&&a==_){for(r=o+5;r+2<d&&e[r+2]==_;)r+=2;var c=Math.min(r+1-o>>>1,6);n.push(16,c-3),o+=2*c-2}else n.push(_,0)}return d>>>1},s.F._hufTree=function(e,n,d){var o=[],_=e.length,y=n.length,a=0;for(a=0;a<y;a+=2)n[a]=0,n[a+1]=0;for(a=0;a<_;a++)e[a]!=0&&o.push({lit:a,f:e[a]});var t=o.length,r=o.slice(0);if(t==0)return 0;if(t==1){var c=o[0].lit;return r=c==0?1:0,n[1+(c<<1)]=1,n[1+(r<<1)]=1,1}o.sort(function(R,z){return R.f-z.f});var l=o[0],S=o[1],C=0,x=1,B=2;for(o[0]={lit:-1,f:l.f+S.f,l,r:S,d:0};x!=t-1;)l=C!=x&&(B==t||o[C].f<o[B].f)?o[C++]:o[B++],S=C!=x&&(B==t||o[C].f<o[B].f)?o[C++]:o[B++],o[x++]={lit:-1,f:l.f+S.f,l,r:S};var O=s.F.setDepth(o[x-1],0);for(O>d&&(s.F.restrictDepth(r,d,O),O=d),a=0;a<t;a++)n[1+(r[a].lit<<1)]=r[a].d;return O},s.F.setDepth=function(e,n){return e.lit!=-1?(e.d=n,n):Math.max(s.F.setDepth(e.l,n+1),s.F.setDepth(e.r,n+1))},s.F.restrictDepth=function(e,n,d){var o=0,_=1<<d-n,y=0;for(e.sort(function(t,r){return r.d==t.d?t.f-r.f:r.d-t.d}),o=0;o<e.length&&e[o].d>n;o++){var a=e[o].d;e[o].d=n,y+=_-(1<<d-a)}for(y>>>=d-n;y>0;)(a=e[o].d)<n?(e[o].d++,y-=1<<n-a-1):o++;for(;o>=0;o--)e[o].d==n&&y<0&&(e[o].d--,y++);y!=0&&console.log("debt left")},s.F._goodIndex=function(e,n){var d=0;return n[16|d]<=e&&(d|=16),n[8|d]<=e&&(d|=8),n[4|d]<=e&&(d|=4),n[2|d]<=e&&(d|=2),n[1|d]<=e&&(d|=1),d},s.F._writeLit=function(e,n,d,o){return s.F._putsF(d,o,n[e<<1]),o+n[1+(e<<1)]},s.F.inflate=function(e,n){var d=Uint8Array;if(e[0]==3&&e[1]==0)return n||new d(0);var o=s.F,_=o._bitsF,y=o._bitsE,a=o._decodeTiny,t=o.makeCodes,r=o.codes2map,c=o._get17,l=o.U,S=n==null;S&&(n=new d(e.length>>>2<<3));for(var C,x,B=0,O=0,R=0,z=0,p=0,T=0,f=0,v=0,b=0;B==0;)if(B=_(e,b,1),O=_(e,b+1,2),b+=3,O!=0){if(S&&(n=s.F._check(n,v+(1<<17))),O==1&&(C=l.flmap,x=l.fdmap,T=511,f=31),O==2){R=y(e,b,5)+257,z=y(e,b+5,5)+1,p=y(e,b+10,4)+4,b+=14;for(var A=0;A<38;A+=2)l.itree[A]=0,l.itree[A+1]=0;var D=1;for(A=0;A<p;A++){var k=y(e,b+3*A,3);l.itree[1+(l.ordr[A]<<1)]=k,k>D&&(D=k)}b+=3*p,t(l.itree,D),r(l.itree,D,l.imap),C=l.lmap,x=l.dmap,b=a(l.imap,(1<<D)-1,R+z,e,b,l.ttree);var E=o._copyOut(l.ttree,0,R,l.ltree);T=(1<<E)-1;var M=o._copyOut(l.ttree,R,z,l.dtree);f=(1<<M)-1,t(l.ltree,E),r(l.ltree,E,C),t(l.dtree,M),r(l.dtree,M,x)}for(;;){var h=C[c(e,b)&T];b+=15&h;var u=h>>>4;if(!(u>>>8))n[v++]=u;else{if(u==256)break;var N=v+u-254;if(u>264){var I=l.ldef[u-257];N=v+(I>>>3)+y(e,b,7&I),b+=7&I}var H=x[c(e,b)&f];b+=15&H;var G=H>>>4,$=l.ddef[G],j=($>>>4)+_(e,b,15&$);for(b+=15&$,S&&(n=s.F._check(n,v+(1<<17)));v<N;)n[v]=n[v++-j],n[v]=n[v++-j],n[v]=n[v++-j],n[v]=n[v++-j];v=N}}}else{7&b&&(b+=8-(7&b));var q=4+(b>>>3),U=e[q-4]|e[q-3]<<8;S&&(n=s.F._check(n,v+U)),n.set(new d(e.buffer,e.byteOffset+q,U),v),b=q+U<<3,v+=U}return n.length==v?n:n.slice(0,v)},s.F._check=function(e,n){var d=e.length;if(n<=d)return e;var o=new Uint8Array(Math.max(d<<1,n));return o.set(e,0),o},s.F._decodeTiny=function(e,n,d,o,_,y){for(var a=s.F._bitsE,t=s.F._get17,r=0;r<d;){var c=e[t(o,_)&n];_+=15&c;var l=c>>>4;if(l<=15)y[r]=l,r++;else{var S=0,C=0;l==16?(C=3+a(o,_,2),_+=2,S=y[r-1]):l==17?(C=3+a(o,_,3),_+=3):l==18&&(C=11+a(o,_,7),_+=7);for(var x=r+C;r<x;)y[r]=S,r++}}return _},s.F._copyOut=function(e,n,d,o){for(var _=0,y=0,a=o.length>>>1;y<d;){var t=e[y+n];o[y<<1]=0,o[1+(y<<1)]=t,t>_&&(_=t),y++}for(;y<a;)o[y<<1]=0,o[1+(y<<1)]=0,y++;return _},s.F.makeCodes=function(e,n){for(var d,o,_,y,a=s.F.U,t=e.length,r=a.bl_count,c=0;c<=n;c++)r[c]=0;for(c=1;c<t;c+=2)r[e[c]]++;var l=a.next_code;for(d=0,r[0]=0,o=1;o<=n;o++)d=d+r[o-1]<<1,l[o]=d;for(_=0;_<t;_+=2)(y=e[_+1])!=0&&(e[_]=l[y],l[y]++)},s.F.codes2map=function(e,n,d){for(var o=e.length,_=s.F.U.rev15,y=0;y<o;y+=2)if(e[y+1]!=0)for(var a=y>>1,t=e[y+1],r=a<<4|t,c=n-t,l=e[y]<<c,S=l+(1<<c);l!=S;)d[_[l]>>>15-n]=r,l++},s.F.revCodes=function(e,n){for(var d=s.F.U.rev15,o=15-n,_=0;_<e.length;_+=2){var y=e[_]<<n-e[_+1];e[_]=d[y]>>>o}},s.F._putsE=function(e,n,d){d<<=7&n;var o=n>>>3;e[o]|=d,e[o+1]|=d>>>8},s.F._putsF=function(e,n,d){d<<=7&n;var o=n>>>3;e[o]|=d,e[o+1]|=d>>>8,e[o+2]|=d>>>16},s.F._bitsE=function(e,n,d){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<d)-1},s.F._bitsF=function(e,n,d){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<d)-1},s.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},s.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},s.F.U=(m=Uint16Array,w=Uint32Array,{next_code:new m(16),bl_count:new m(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new m(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new w(32),flmap:new m(512),fltree:[],fdmap:new m(32),fdtree:[],lmap:new m(32768),ltree:[],ttree:[],dmap:new m(32768),dtree:[],imap:new m(512),itree:[],rev15:new m(32768),lhst:new w(286),dhst:new w(30),ihst:new w(19),lits:new w(15e3),strt:new m(65536),prev:new m(32768)}),function(){for(var e=s.F.U,n=0;n<32768;n++){var d=n;d=(4278255360&(d=(4042322160&(d=(3435973836&(d=(2863311530&d)>>>1|(1431655765&d)<<1))>>>2|(858993459&d)<<2))>>>4|(252645135&d)<<4))>>>8|(16711935&d)<<8,e.rev15[n]=(d>>>16|d<<16)>>>17}function o(_,y,a){for(;y--!=0;)_.push(0,a)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];o(e.fltree,144,8),o(e.fltree,112,9),o(e.fltree,24,7),o(e.fltree,8,8),s.F.makeCodes(e.fltree,9),s.F.codes2map(e.fltree,9,e.flmap),s.F.revCodes(e.fltree,9),o(e.fdtree,32,5),s.F.makeCodes(e.fdtree,5),s.F.codes2map(e.fdtree,5,e.fdmap),s.F.revCodes(e.fdtree,5),o(e.itree,19,0),o(e.ltree,286,0),o(e.dtree,30,0),o(e.ttree,320,0)}()})();var Za=Va({__proto__:null,default:qt},[qt]);const tt=function(){var g={nextZero(a,t){for(;a[t]!=0;)t++;return t},readUshort:(a,t)=>a[t]<<8|a[t+1],writeUshort(a,t,r){a[t]=r>>8&255,a[t+1]=255&r},readUint:(a,t)=>16777216*a[t]+(a[t+1]<<16|a[t+2]<<8|a[t+3]),writeUint(a,t,r){a[t]=r>>24&255,a[t+1]=r>>16&255,a[t+2]=r>>8&255,a[t+3]=255&r},readASCII(a,t,r){let c="";for(let l=0;l<r;l++)c+=String.fromCharCode(a[t+l]);return c},writeASCII(a,t,r){for(let c=0;c<r.length;c++)a[t+c]=r.charCodeAt(c)},readBytes(a,t,r){const c=[];for(let l=0;l<r;l++)c.push(a[t+l]);return c},pad:a=>a.length<2?`0${a}`:a,readUTF8(a,t,r){let c,l="";for(let S=0;S<r;S++)l+=`%${g.pad(a[t+S].toString(16))}`;try{c=decodeURIComponent(l)}catch{return g.readASCII(a,t,r)}return c}};function m(a,t,r,c){const l=t*r,S=n(c),C=Math.ceil(t*S/8),x=new Uint8Array(4*l),B=new Uint32Array(x.buffer),{ctype:O}=c,{depth:R}=c,z=g.readUshort;if(O==6){const I=l<<2;if(R==8)for(var p=0;p<I;p+=4)x[p]=a[p],x[p+1]=a[p+1],x[p+2]=a[p+2],x[p+3]=a[p+3];if(R==16)for(p=0;p<I;p++)x[p]=a[p<<1]}else if(O==2){const I=c.tabs.tRNS;if(I==null){if(R==8)for(p=0;p<l;p++){var T=3*p;B[p]=255<<24|a[T+2]<<16|a[T+1]<<8|a[T]}if(R==16)for(p=0;p<l;p++)T=6*p,B[p]=255<<24|a[T+4]<<16|a[T+2]<<8|a[T]}else{var f=I[0];const H=I[1],G=I[2];if(R==8)for(p=0;p<l;p++){var v=p<<2;T=3*p,B[p]=255<<24|a[T+2]<<16|a[T+1]<<8|a[T],a[T]==f&&a[T+1]==H&&a[T+2]==G&&(x[v+3]=0)}if(R==16)for(p=0;p<l;p++)v=p<<2,T=6*p,B[p]=255<<24|a[T+4]<<16|a[T+2]<<8|a[T],z(a,T)==f&&z(a,T+2)==H&&z(a,T+4)==G&&(x[v+3]=0)}}else if(O==3){const I=c.tabs.PLTE,H=c.tabs.tRNS,G=H?H.length:0;if(R==1)for(var b=0;b<r;b++){var A=b*C,D=b*t;for(p=0;p<t;p++){v=D+p<<2;var k=3*(E=a[A+(p>>3)]>>7-((7&p)<<0)&1);x[v]=I[k],x[v+1]=I[k+1],x[v+2]=I[k+2],x[v+3]=E<G?H[E]:255}}if(R==2)for(b=0;b<r;b++)for(A=b*C,D=b*t,p=0;p<t;p++)v=D+p<<2,k=3*(E=a[A+(p>>2)]>>6-((3&p)<<1)&3),x[v]=I[k],x[v+1]=I[k+1],x[v+2]=I[k+2],x[v+3]=E<G?H[E]:255;if(R==4)for(b=0;b<r;b++)for(A=b*C,D=b*t,p=0;p<t;p++)v=D+p<<2,k=3*(E=a[A+(p>>1)]>>4-((1&p)<<2)&15),x[v]=I[k],x[v+1]=I[k+1],x[v+2]=I[k+2],x[v+3]=E<G?H[E]:255;if(R==8)for(p=0;p<l;p++){var E;v=p<<2,k=3*(E=a[p]),x[v]=I[k],x[v+1]=I[k+1],x[v+2]=I[k+2],x[v+3]=E<G?H[E]:255}}else if(O==4){if(R==8)for(p=0;p<l;p++){v=p<<2;var M=a[h=p<<1];x[v]=M,x[v+1]=M,x[v+2]=M,x[v+3]=a[h+1]}if(R==16)for(p=0;p<l;p++){var h;v=p<<2,M=a[h=p<<2],x[v]=M,x[v+1]=M,x[v+2]=M,x[v+3]=a[h+2]}}else if(O==0)for(f=c.tabs.tRNS?c.tabs.tRNS:-1,b=0;b<r;b++){const I=b*C,H=b*t;if(R==1)for(var u=0;u<t;u++){var N=(M=255*(a[I+(u>>>3)]>>>7-(7&u)&1))==255*f?0:255;B[H+u]=N<<24|M<<16|M<<8|M}else if(R==2)for(u=0;u<t;u++)N=(M=85*(a[I+(u>>>2)]>>>6-((3&u)<<1)&3))==85*f?0:255,B[H+u]=N<<24|M<<16|M<<8|M;else if(R==4)for(u=0;u<t;u++)N=(M=17*(a[I+(u>>>1)]>>>4-((1&u)<<2)&15))==17*f?0:255,B[H+u]=N<<24|M<<16|M<<8|M;else if(R==8)for(u=0;u<t;u++)N=(M=a[I+u])==f?0:255,B[H+u]=N<<24|M<<16|M<<8|M;else if(R==16)for(u=0;u<t;u++)M=a[I+(u<<1)],N=z(a,I+(u<<1))==f?0:255,B[H+u]=N<<24|M<<16|M<<8|M}return x}function w(a,t,r,c){const l=n(a),S=Math.ceil(r*l/8),C=new Uint8Array((S+1+a.interlace)*c);return t=a.tabs.CgBI?e(t,C):s(t,C),a.interlace==0?t=d(t,a,0,r,c):a.interlace==1&&(t=function(B,O){const R=O.width,z=O.height,p=n(O),T=p>>3,f=Math.ceil(R*p/8),v=new Uint8Array(z*f);let b=0;const A=[0,0,4,0,2,0,1],D=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],E=[8,8,4,4,2,2,1];let M=0;for(;M<7;){const u=k[M],N=E[M];let I=0,H=0,G=A[M];for(;G<z;)G+=u,H++;let $=D[M];for(;$<R;)$+=N,I++;const j=Math.ceil(I*p/8);d(B,O,b,I,H);let q=0,U=A[M];for(;U<z;){let X=D[M],te=b+q*j<<3;for(;X<R;){var h;if(p==1&&(h=(h=B[te>>3])>>7-(7&te)&1,v[U*f+(X>>3)]|=h<<7-((7&X)<<0)),p==2&&(h=(h=B[te>>3])>>6-(7&te)&3,v[U*f+(X>>2)]|=h<<6-((3&X)<<1)),p==4&&(h=(h=B[te>>3])>>4-(7&te)&15,v[U*f+(X>>1)]|=h<<4-((1&X)<<2)),p>=8){const ie=U*f+X*T;for(let ue=0;ue<T;ue++)v[ie+ue]=B[(te>>3)+ue]}te+=p,X+=N}q++,U+=u}I*H!=0&&(b+=H*(1+j)),M+=1}return v}(t,a)),t}function s(a,t){return e(new Uint8Array(a.buffer,2,a.length-6),t)}var e=function(){const a={H:{}};return a.H.N=function(t,r){const c=Uint8Array;let l,S,C=0,x=0,B=0,O=0,R=0,z=0,p=0,T=0,f=0;if(t[0]==3&&t[1]==0)return r||new c(0);const v=a.H,b=v.b,A=v.e,D=v.R,k=v.n,E=v.A,M=v.Z,h=v.m,u=r==null;for(u&&(r=new c(t.length>>>2<<5));C==0;)if(C=b(t,f,1),x=b(t,f+1,2),f+=3,x!=0){if(u&&(r=a.H.W(r,T+(1<<17))),x==1&&(l=h.J,S=h.h,z=511,p=31),x==2){B=A(t,f,5)+257,O=A(t,f+5,5)+1,R=A(t,f+10,4)+4,f+=14;let I=1;for(var N=0;N<38;N+=2)h.Q[N]=0,h.Q[N+1]=0;for(N=0;N<R;N++){const $=A(t,f+3*N,3);h.Q[1+(h.X[N]<<1)]=$,$>I&&(I=$)}f+=3*R,k(h.Q,I),E(h.Q,I,h.u),l=h.w,S=h.d,f=D(h.u,(1<<I)-1,B+O,t,f,h.v);const H=v.V(h.v,0,B,h.C);z=(1<<H)-1;const G=v.V(h.v,B,O,h.D);p=(1<<G)-1,k(h.C,H),E(h.C,H,l),k(h.D,G),E(h.D,G,S)}for(;;){const I=l[M(t,f)&z];f+=15&I;const H=I>>>4;if(!(H>>>8))r[T++]=H;else{if(H==256)break;{let G=T+H-254;if(H>264){const X=h.q[H-257];G=T+(X>>>3)+A(t,f,7&X),f+=7&X}const $=S[M(t,f)&p];f+=15&$;const j=$>>>4,q=h.c[j],U=(q>>>4)+b(t,f,15&q);for(f+=15&q;T<G;)r[T]=r[T++-U],r[T]=r[T++-U],r[T]=r[T++-U],r[T]=r[T++-U];T=G}}}}else{7&f&&(f+=8-(7&f));const I=4+(f>>>3),H=t[I-4]|t[I-3]<<8;u&&(r=a.H.W(r,T+H)),r.set(new c(t.buffer,t.byteOffset+I,H),T),f=I+H<<3,T+=H}return r.length==T?r:r.slice(0,T)},a.H.W=function(t,r){const c=t.length;if(r<=c)return t;const l=new Uint8Array(c<<1);return l.set(t,0),l},a.H.R=function(t,r,c,l,S,C){const x=a.H.e,B=a.H.Z;let O=0;for(;O<c;){const R=t[B(l,S)&r];S+=15&R;const z=R>>>4;if(z<=15)C[O]=z,O++;else{let p=0,T=0;z==16?(T=3+x(l,S,2),S+=2,p=C[O-1]):z==17?(T=3+x(l,S,3),S+=3):z==18&&(T=11+x(l,S,7),S+=7);const f=O+T;for(;O<f;)C[O]=p,O++}}return S},a.H.V=function(t,r,c,l){let S=0,C=0;const x=l.length>>>1;for(;C<c;){const B=t[C+r];l[C<<1]=0,l[1+(C<<1)]=B,B>S&&(S=B),C++}for(;C<x;)l[C<<1]=0,l[1+(C<<1)]=0,C++;return S},a.H.n=function(t,r){const c=a.H.m,l=t.length;let S,C,x,B;const O=c.j;for(var R=0;R<=r;R++)O[R]=0;for(R=1;R<l;R+=2)O[t[R]]++;const z=c.K;for(S=0,O[0]=0,C=1;C<=r;C++)S=S+O[C-1]<<1,z[C]=S;for(x=0;x<l;x+=2)B=t[x+1],B!=0&&(t[x]=z[B],z[B]++)},a.H.A=function(t,r,c){const l=t.length,S=a.H.m.r;for(let C=0;C<l;C+=2)if(t[C+1]!=0){const x=C>>1,B=t[C+1],O=x<<4|B,R=r-B;let z=t[C]<<R;const p=z+(1<<R);for(;z!=p;)c[S[z]>>>15-r]=O,z++}},a.H.l=function(t,r){const c=a.H.m.r,l=15-r;for(let S=0;S<t.length;S+=2){const C=t[S]<<r-t[S+1];t[S]=c[C]>>>l}},a.H.M=function(t,r,c){c<<=7&r;const l=r>>>3;t[l]|=c,t[l+1]|=c>>>8},a.H.I=function(t,r,c){c<<=7&r;const l=r>>>3;t[l]|=c,t[l+1]|=c>>>8,t[l+2]|=c>>>16},a.H.e=function(t,r,c){return(t[r>>>3]|t[1+(r>>>3)]<<8)>>>(7&r)&(1<<c)-1},a.H.b=function(t,r,c){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16)>>>(7&r)&(1<<c)-1},a.H.Z=function(t,r){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16)>>>(7&r)},a.H.i=function(t,r){return(t[r>>>3]|t[1+(r>>>3)]<<8|t[2+(r>>>3)]<<16|t[3+(r>>>3)]<<24)>>>(7&r)},a.H.m=function(){const t=Uint16Array,r=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new t(65536),g:new t(32768)}}(),function(){const t=a.H.m;for(var r=0;r<32768;r++){let l=r;l=(2863311530&l)>>>1|(1431655765&l)<<1,l=(3435973836&l)>>>2|(858993459&l)<<2,l=(4042322160&l)>>>4|(252645135&l)<<4,l=(4278255360&l)>>>8|(16711935&l)<<8,t.r[r]=(l>>>16|l<<16)>>>17}function c(l,S,C){for(;S--!=0;)l.push(0,C)}for(r=0;r<32;r++)t.q[r]=t.S[r]<<3|t.T[r],t.c[r]=t.p[r]<<4|t.z[r];c(t._,144,8),c(t._,112,9),c(t._,24,7),c(t._,8,8),a.H.n(t._,9),a.H.A(t._,9,t.J),a.H.l(t._,9),c(t.$,32,5),a.H.n(t.$,5),a.H.A(t.$,5,t.h),a.H.l(t.$,5),c(t.Q,19,0),c(t.C,286,0),c(t.D,30,0),c(t.v,320,0)}(),a.H.N}();function n(a){return[1,null,3,1,2,null,4][a.ctype]*a.depth}function d(a,t,r,c,l){let S=n(t);const C=Math.ceil(c*S/8);let x,B;S=Math.ceil(S/8);let O=a[r],R=0;if(O>1&&(a[r]=[0,0,1][O-2]),O==3)for(R=S;R<C;R++)a[R+1]=a[R+1]+(a[R+1-S]>>>1)&255;for(let z=0;z<l;z++)if(x=r+z*C,B=x+z+1,O=a[B-1],R=0,O==0)for(;R<C;R++)a[x+R]=a[B+R];else if(O==1){for(;R<S;R++)a[x+R]=a[B+R];for(;R<C;R++)a[x+R]=a[B+R]+a[x+R-S]}else if(O==2)for(;R<C;R++)a[x+R]=a[B+R]+a[x+R-C];else if(O==3){for(;R<S;R++)a[x+R]=a[B+R]+(a[x+R-C]>>>1);for(;R<C;R++)a[x+R]=a[B+R]+(a[x+R-C]+a[x+R-S]>>>1)}else{for(;R<S;R++)a[x+R]=a[B+R]+o(0,a[x+R-C],0);for(;R<C;R++)a[x+R]=a[B+R]+o(a[x+R-S],a[x+R-C],a[x+R-S-C])}return a}function o(a,t,r){const c=a+t-r,l=c-a,S=c-t,C=c-r;return l*l<=S*S&&l*l<=C*C?a:S*S<=C*C?t:r}function _(a,t,r){r.width=g.readUint(a,t),t+=4,r.height=g.readUint(a,t),t+=4,r.depth=a[t],t++,r.ctype=a[t],t++,r.compress=a[t],t++,r.filter=a[t],t++,r.interlace=a[t],t++}function y(a,t,r,c,l,S,C,x,B){const O=Math.min(t,l),R=Math.min(r,S);let z=0,p=0;for(let M=0;M<R;M++)for(let h=0;h<O;h++)if(C>=0&&x>=0?(z=M*t+h<<2,p=(x+M)*l+C+h<<2):(z=(-x+M)*t-C+h<<2,p=M*l+h<<2),B==0)c[p]=a[z],c[p+1]=a[z+1],c[p+2]=a[z+2],c[p+3]=a[z+3];else if(B==1){var T=a[z+3]*.00392156862745098,f=a[z]*T,v=a[z+1]*T,b=a[z+2]*T,A=c[p+3]*(1/255),D=c[p]*A,k=c[p+1]*A,E=c[p+2]*A;const u=1-T,N=T+A*u,I=N==0?0:1/N;c[p+3]=255*N,c[p+0]=(f+D*u)*I,c[p+1]=(v+k*u)*I,c[p+2]=(b+E*u)*I}else if(B==2)T=a[z+3],f=a[z],v=a[z+1],b=a[z+2],A=c[p+3],D=c[p],k=c[p+1],E=c[p+2],T==A&&f==D&&v==k&&b==E?(c[p]=0,c[p+1]=0,c[p+2]=0,c[p+3]=0):(c[p]=f,c[p+1]=v,c[p+2]=b,c[p+3]=T);else if(B==3){if(T=a[z+3],f=a[z],v=a[z+1],b=a[z+2],A=c[p+3],D=c[p],k=c[p+1],E=c[p+2],T==A&&f==D&&v==k&&b==E)continue;if(T<220&&A>20)return!1}return!0}return{decode:function(t){const r=new Uint8Array(t);let c=8;const l=g,S=l.readUshort,C=l.readUint,x={tabs:{},frames:[]},B=new Uint8Array(r.length);let O,R=0,z=0;const p=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(r[T]!=p[T])throw"The input is not a PNG file!";for(;c<r.length;){const M=l.readUint(r,c);c+=4;const h=l.readASCII(r,c,4);if(c+=4,h=="IHDR")_(r,c,x);else if(h=="iCCP"){for(var f=c;r[f]!=0;)f++;l.readASCII(r,c,f-c),r[f+1];const u=r.slice(f+2,c+M);let N=null;try{N=s(u)}catch{N=e(u)}x.tabs[h]=N}else if(h=="CgBI")x.tabs[h]=r.slice(c,c+4);else if(h=="IDAT"){for(T=0;T<M;T++)B[R+T]=r[c+T];R+=M}else if(h=="acTL")x.tabs[h]={num_frames:C(r,c),num_plays:C(r,c+4)},O=new Uint8Array(r.length);else if(h=="fcTL"){z!=0&&((E=x.frames[x.frames.length-1]).data=w(x,O.slice(0,z),E.rect.width,E.rect.height),z=0);const u={x:C(r,c+12),y:C(r,c+16),width:C(r,c+4),height:C(r,c+8)};let N=S(r,c+22);N=S(r,c+20)/(N==0?100:N);const I={rect:u,delay:Math.round(1e3*N),dispose:r[c+24],blend:r[c+25]};x.frames.push(I)}else if(h=="fdAT"){for(T=0;T<M-4;T++)O[z+T]=r[c+T+4];z+=M-4}else if(h=="pHYs")x.tabs[h]=[l.readUint(r,c),l.readUint(r,c+4),r[c+8]];else if(h=="cHRM")for(x.tabs[h]=[],T=0;T<8;T++)x.tabs[h].push(l.readUint(r,c+4*T));else if(h=="tEXt"||h=="zTXt"){x.tabs[h]==null&&(x.tabs[h]={});var v=l.nextZero(r,c),b=l.readASCII(r,c,v-c),A=c+M-v-1;if(h=="tEXt")k=l.readASCII(r,v+1,A);else{var D=s(r.slice(v+2,v+2+A));k=l.readUTF8(D,0,D.length)}x.tabs[h][b]=k}else if(h=="iTXt"){x.tabs[h]==null&&(x.tabs[h]={}),v=0,f=c,v=l.nextZero(r,f),b=l.readASCII(r,f,v-f);const u=r[f=v+1];var k;r[f+1],f+=2,v=l.nextZero(r,f),l.readASCII(r,f,v-f),f=v+1,v=l.nextZero(r,f),l.readUTF8(r,f,v-f),A=M-((f=v+1)-c),u==0?k=l.readUTF8(r,f,A):(D=s(r.slice(f,f+A)),k=l.readUTF8(D,0,D.length)),x.tabs[h][b]=k}else if(h=="PLTE")x.tabs[h]=l.readBytes(r,c,M);else if(h=="hIST"){const u=x.tabs.PLTE.length/3;for(x.tabs[h]=[],T=0;T<u;T++)x.tabs[h].push(S(r,c+2*T))}else if(h=="tRNS")x.ctype==3?x.tabs[h]=l.readBytes(r,c,M):x.ctype==0?x.tabs[h]=S(r,c):x.ctype==2&&(x.tabs[h]=[S(r,c),S(r,c+2),S(r,c+4)]);else if(h=="gAMA")x.tabs[h]=l.readUint(r,c)/1e5;else if(h=="sRGB")x.tabs[h]=r[c];else if(h=="bKGD")x.ctype==0||x.ctype==4?x.tabs[h]=[S(r,c)]:x.ctype==2||x.ctype==6?x.tabs[h]=[S(r,c),S(r,c+2),S(r,c+4)]:x.ctype==3&&(x.tabs[h]=r[c]);else if(h=="IEND")break;c+=M,l.readUint(r,c),c+=4}var E;return z!=0&&((E=x.frames[x.frames.length-1]).data=w(x,O.slice(0,z),E.rect.width,E.rect.height)),x.data=w(x,B,x.width,x.height),delete x.compress,delete x.interlace,delete x.filter,x},toRGBA8:function(t){const r=t.width,c=t.height;if(t.tabs.acTL==null)return[m(t.data,r,c,t).buffer];const l=[];t.frames[0].data==null&&(t.frames[0].data=t.data);const S=r*c*4,C=new Uint8Array(S),x=new Uint8Array(S),B=new Uint8Array(S);for(let R=0;R<t.frames.length;R++){const z=t.frames[R],p=z.rect.x,T=z.rect.y,f=z.rect.width,v=z.rect.height,b=m(z.data,f,v,t);if(R!=0)for(var O=0;O<S;O++)B[O]=C[O];if(z.blend==0?y(b,f,v,C,r,c,p,T,0):z.blend==1&&y(b,f,v,C,r,c,p,T,1),l.push(C.buffer.slice(0)),z.dispose!=0){if(z.dispose==1)y(x,f,v,C,r,c,p,T,0);else if(z.dispose==2)for(O=0;O<S;O++)C[O]=B[O]}}return l},_paeth:o,_copyTile:y,_bin:g}}();(function(){const{_copyTile:g}=tt,{_bin:m}=tt,w=tt._paeth;var s={table:function(){const f=new Uint32Array(256);for(let v=0;v<256;v++){let b=v;for(let A=0;A<8;A++)1&b?b=3988292384^b>>>1:b>>>=1;f[v]=b}return f}(),update(f,v,b,A){for(let D=0;D<A;D++)f=s.table[255&(f^v[b+D])]^f>>>8;return f},crc:(f,v,b)=>4294967295^s.update(4294967295,f,v,b)};function e(f,v,b,A){v[b]+=f[0]*A>>4,v[b+1]+=f[1]*A>>4,v[b+2]+=f[2]*A>>4,v[b+3]+=f[3]*A>>4}function n(f){return Math.max(0,Math.min(255,f))}function d(f,v){const b=f[0]-v[0],A=f[1]-v[1],D=f[2]-v[2],k=f[3]-v[3];return b*b+A*A+D*D+k*k}function o(f,v,b,A,D,k,E){E==null&&(E=1);const M=A.length,h=[];for(var u=0;u<M;u++){const U=A[u];h.push([U>>>0&255,U>>>8&255,U>>>16&255,U>>>24&255])}for(u=0;u<M;u++){let U=4294967295;for(var N=0,I=0;I<M;I++){var H=d(h[u],h[I]);I!=u&&H<U&&(U=H,N=I)}}const G=new Uint32Array(D.buffer),$=new Int16Array(v*b*4),j=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(u=0;u<j.length;u++)j[u]=255*((j[u]+.5)/16-.5);for(let U=0;U<b;U++)for(let X=0;X<v;X++){var q;u=4*(U*v+X),E!=2?q=[n(f[u]+$[u]),n(f[u+1]+$[u+1]),n(f[u+2]+$[u+2]),n(f[u+3]+$[u+3])]:(H=j[4*(3&U)+(3&X)],q=[n(f[u]+H),n(f[u+1]+H),n(f[u+2]+H),n(f[u+3]+H)]),N=0;let te=16777215;for(I=0;I<M;I++){const ye=d(q,h[I]);ye<te&&(te=ye,N=I)}const ie=h[N],ue=[q[0]-ie[0],q[1]-ie[1],q[2]-ie[2],q[3]-ie[3]];E==1&&(X!=v-1&&e(ue,$,u+4,7),U!=b-1&&(X!=0&&e(ue,$,u+4*v-4,3),e(ue,$,u+4*v,5),X!=v-1&&e(ue,$,u+4*v+4,1))),k[u>>2]=N,G[u>>2]=A[N]}}function _(f,v,b,A,D){D==null&&(D={});const{crc:k}=s,E=m.writeUint,M=m.writeUshort,h=m.writeASCII;let u=8;const N=f.frames.length>1;let I,H=!1,G=33+(N?20:0);if(D.sRGB!=null&&(G+=13),D.pHYs!=null&&(G+=21),D.iCCP!=null&&(I=pako.deflate(D.iCCP),G+=21+I.length+4),f.ctype==3){for(var $=f.plte.length,j=0;j<$;j++)f.plte[j]>>>24!=255&&(H=!0);G+=8+3*$+4+(H?8+1*$+4:0)}for(var q=0;q<f.frames.length;q++)N&&(G+=38),G+=(ie=f.frames[q]).cimg.length+12,q!=0&&(G+=4);G+=12;const U=new Uint8Array(G),X=[137,80,78,71,13,10,26,10];for(j=0;j<8;j++)U[j]=X[j];if(E(U,u,13),u+=4,h(U,u,"IHDR"),u+=4,E(U,u,v),u+=4,E(U,u,b),u+=4,U[u]=f.depth,u++,U[u]=f.ctype,u++,U[u]=0,u++,U[u]=0,u++,U[u]=0,u++,E(U,u,k(U,u-17,17)),u+=4,D.sRGB!=null&&(E(U,u,1),u+=4,h(U,u,"sRGB"),u+=4,U[u]=D.sRGB,u++,E(U,u,k(U,u-5,5)),u+=4),D.iCCP!=null){const ue=13+I.length;E(U,u,ue),u+=4,h(U,u,"iCCP"),u+=4,h(U,u,"ICC profile"),u+=11,u+=2,U.set(I,u),u+=I.length,E(U,u,k(U,u-(ue+4),ue+4)),u+=4}if(D.pHYs!=null&&(E(U,u,9),u+=4,h(U,u,"pHYs"),u+=4,E(U,u,D.pHYs[0]),u+=4,E(U,u,D.pHYs[1]),u+=4,U[u]=D.pHYs[2],u++,E(U,u,k(U,u-13,13)),u+=4),N&&(E(U,u,8),u+=4,h(U,u,"acTL"),u+=4,E(U,u,f.frames.length),u+=4,E(U,u,D.loop!=null?D.loop:0),u+=4,E(U,u,k(U,u-12,12)),u+=4),f.ctype==3){for(E(U,u,3*($=f.plte.length)),u+=4,h(U,u,"PLTE"),u+=4,j=0;j<$;j++){const ue=3*j,ye=f.plte[j],Se=255&ye,De=ye>>>8&255,Te=ye>>>16&255;U[u+ue+0]=Se,U[u+ue+1]=De,U[u+ue+2]=Te}if(u+=3*$,E(U,u,k(U,u-3*$-4,3*$+4)),u+=4,H){for(E(U,u,$),u+=4,h(U,u,"tRNS"),u+=4,j=0;j<$;j++)U[u+j]=f.plte[j]>>>24&255;u+=$,E(U,u,k(U,u-$-4,$+4)),u+=4}}let te=0;for(q=0;q<f.frames.length;q++){var ie=f.frames[q];N&&(E(U,u,26),u+=4,h(U,u,"fcTL"),u+=4,E(U,u,te++),u+=4,E(U,u,ie.rect.width),u+=4,E(U,u,ie.rect.height),u+=4,E(U,u,ie.rect.x),u+=4,E(U,u,ie.rect.y),u+=4,M(U,u,A[q]),u+=2,M(U,u,1e3),u+=2,U[u]=ie.dispose,u++,U[u]=ie.blend,u++,E(U,u,k(U,u-30,30)),u+=4);const ue=ie.cimg;E(U,u,($=ue.length)+(q==0?0:4)),u+=4;const ye=u;h(U,u,q==0?"IDAT":"fdAT"),u+=4,q!=0&&(E(U,u,te++),u+=4),U.set(ue,u),u+=$,E(U,u,k(U,ye,u-ye)),u+=4}return E(U,u,0),u+=4,h(U,u,"IEND"),u+=4,E(U,u,k(U,u-4,4)),u+=4,U.buffer}function y(f,v,b){for(let A=0;A<f.frames.length;A++){const D=f.frames[A];D.rect.width;const k=D.rect.height,E=new Uint8Array(k*D.bpl+k);D.cimg=c(D.img,k,D.bpp,D.bpl,E,v,b)}}function a(f,v,b,A,D){const k=D[0],E=D[1],M=D[2],h=D[3],u=D[4],N=D[5];let I=6,H=8,G=255;for(var $=0;$<f.length;$++){const V=new Uint8Array(f[$]);for(var j=V.length,q=0;q<j;q+=4)G&=V[q+3]}const U=G!=255,X=function(re,le,ce,se,ne,fe){const ge=[];for(var oe=0;oe<re.length;oe++){const Ee=new Uint8Array(re[oe]),Re=new Uint32Array(Ee.buffer);var _e;let qe=0,Ne=0,Pe=le,Me=ce,We=se?1:0;if(oe!=0){const ft=fe||se||oe==1||ge[oe-2].dispose!=0?1:2;let nt=0,rt=1e9;for(let at=0;at<ft;at++){var Ie=new Uint8Array(re[oe-1-at]);const Vt=new Uint32Array(re[oe-1-at]);let it=le,Ze=ce,Ce=-1,bt=-1;for(let vt=0;vt<ce;vt++)for(let mt=0;mt<le;mt++)Re[be=vt*le+mt]!=Vt[be]&&(mt<it&&(it=mt),mt>Ce&&(Ce=mt),vt<Ze&&(Ze=vt),vt>bt&&(bt=vt));Ce==-1&&(it=Ze=Ce=bt=0),ne&&((1&it)==1&&it--,(1&Ze)==1&&Ze--);const Ft=(Ce-it+1)*(bt-Ze+1);Ft<rt&&(rt=Ft,nt=at,qe=it,Ne=Ze,Pe=Ce-it+1,Me=bt-Ze+1)}Ie=new Uint8Array(re[oe-1-nt]),nt==1&&(ge[oe-1].dispose=2),_e=new Uint8Array(Pe*Me*4),g(Ie,le,ce,_e,Pe,Me,-qe,-Ne,0),We=g(Ee,le,ce,_e,Pe,Me,-qe,-Ne,3)?1:0,We==1?r(Ee,le,ce,_e,{x:qe,y:Ne,width:Pe,height:Me}):g(Ee,le,ce,_e,Pe,Me,-qe,-Ne,0)}else _e=Ee.slice(0);ge.push({rect:{x:qe,y:Ne,width:Pe,height:Me},img:_e,blend:We,dispose:0})}if(se)for(oe=0;oe<ge.length;oe++){if((je=ge[oe]).blend==1)continue;const Ee=je.rect,Re=ge[oe-1].rect,qe=Math.min(Ee.x,Re.x),Ne=Math.min(Ee.y,Re.y),Pe={x:qe,y:Ne,width:Math.max(Ee.x+Ee.width,Re.x+Re.width)-qe,height:Math.max(Ee.y+Ee.height,Re.y+Re.height)-Ne};ge[oe-1].dispose=1,oe-1!=0&&t(re,le,ce,ge,oe-1,Pe,ne),t(re,le,ce,ge,oe,Pe,ne)}let Le=0;if(re.length!=1)for(var be=0;be<ge.length;be++){var je;Le+=(je=ge[be]).rect.width*je.rect.height}return ge}(f,v,b,k,E,M),te={},ie=[],ue=[];if(A!=0){const V=[];for(q=0;q<X.length;q++)V.push(X[q].img.buffer);const re=function(ne){let fe=0;for(var ge=0;ge<ne.length;ge++)fe+=ne[ge].byteLength;const oe=new Uint8Array(fe);let _e=0;for(ge=0;ge<ne.length;ge++){const Ie=new Uint8Array(ne[ge]),Le=Ie.length;for(let be=0;be<Le;be+=4){let je=Ie[be],Ee=Ie[be+1],Re=Ie[be+2];const qe=Ie[be+3];qe==0&&(je=Ee=Re=0),oe[_e+be]=je,oe[_e+be+1]=Ee,oe[_e+be+2]=Re,oe[_e+be+3]=qe}_e+=Le}return oe.buffer}(V),le=S(re,A);for(q=0;q<le.plte.length;q++)ie.push(le.plte[q].est.rgba);let ce=0;for(q=0;q<X.length;q++){const se=(Se=X[q]).img.length;var ye=new Uint8Array(le.inds.buffer,ce>>2,se>>2);ue.push(ye);const ne=new Uint8Array(le.abuf,ce,se);N&&o(Se.img,Se.rect.width,Se.rect.height,ie,ne,ye),Se.img.set(ne),ce+=se}}else for($=0;$<X.length;$++){var Se=X[$];const V=new Uint32Array(Se.img.buffer);var De=Se.rect.width;for(j=V.length,ye=new Uint8Array(j),ue.push(ye),q=0;q<j;q++){const re=V[q];if(q!=0&&re==V[q-1])ye[q]=ye[q-1];else if(q>De&&re==V[q-De])ye[q]=ye[q-De];else{let le=te[re];if(le==null&&(te[re]=le=ie.length,ie.push(re),ie.length>=300))break;ye[q]=le}}}const Te=ie.length;for(Te<=256&&u==0&&(H=Te<=2?1:Te<=4?2:Te<=16?4:8,H=Math.max(H,h)),$=0;$<X.length;$++){(Se=X[$]).rect.x,Se.rect.y,De=Se.rect.width;const V=Se.rect.height;let re=Se.img;new Uint32Array(re.buffer);let le=4*De,ce=4;if(Te<=256&&u==0){le=Math.ceil(H*De/8);var Q=new Uint8Array(le*V);const se=ue[$];for(let ne=0;ne<V;ne++){q=ne*le;const fe=ne*De;if(H==8)for(var Z=0;Z<De;Z++)Q[q+Z]=se[fe+Z];else if(H==4)for(Z=0;Z<De;Z++)Q[q+(Z>>1)]|=se[fe+Z]<<4-4*(1&Z);else if(H==2)for(Z=0;Z<De;Z++)Q[q+(Z>>2)]|=se[fe+Z]<<6-2*(3&Z);else if(H==1)for(Z=0;Z<De;Z++)Q[q+(Z>>3)]|=se[fe+Z]<<7-1*(7&Z)}re=Q,I=3,ce=1}else if(U==0&&X.length==1){Q=new Uint8Array(De*V*3);const se=De*V;for(q=0;q<se;q++){const ne=3*q,fe=4*q;Q[ne]=re[fe],Q[ne+1]=re[fe+1],Q[ne+2]=re[fe+2]}re=Q,I=2,ce=3,le=3*De}Se.img=re,Se.bpl=le,Se.bpp=ce}return{ctype:I,depth:H,plte:ie,frames:X}}function t(f,v,b,A,D,k,E){const M=Uint8Array,h=Uint32Array,u=new M(f[D-1]),N=new h(f[D-1]),I=D+1<f.length?new M(f[D+1]):null,H=new M(f[D]),G=new h(H.buffer);let $=v,j=b,q=-1,U=-1;for(let te=0;te<k.height;te++)for(let ie=0;ie<k.width;ie++){const ue=k.x+ie,ye=k.y+te,Se=ye*v+ue,De=G[Se];De==0||A[D-1].dispose==0&&N[Se]==De&&(I==null||I[4*Se+3]!=0)||(ue<$&&($=ue),ue>q&&(q=ue),ye<j&&(j=ye),ye>U&&(U=ye))}q==-1&&($=j=q=U=0),E&&((1&$)==1&&$--,(1&j)==1&&j--),k={x:$,y:j,width:q-$+1,height:U-j+1};const X=A[D];X.rect=k,X.blend=1,X.img=new Uint8Array(k.width*k.height*4),A[D-1].dispose==0?(g(u,v,b,X.img,k.width,k.height,-k.x,-k.y,0),r(H,v,b,X.img,k)):g(H,v,b,X.img,k.width,k.height,-k.x,-k.y,0)}function r(f,v,b,A,D){g(f,v,b,A,D.width,D.height,-D.x,-D.y,2)}function c(f,v,b,A,D,k,E){const M=[];let h,u=[0,1,2,3,4];k!=-1?u=[k]:(v*A>5e5||b==1)&&(u=[0]),E&&(h={level:0});const N=Za;for(var I=0;I<u.length;I++){for(let $=0;$<v;$++)l(D,f,$,A,b,u[I]);M.push(N.deflate(D,h))}let H,G=1e9;for(I=0;I<M.length;I++)M[I].length<G&&(H=I,G=M[I].length);return M[H]}function l(f,v,b,A,D,k){const E=b*A;let M=E+b;if(f[M]=k,M++,k==0)if(A<500)for(var h=0;h<A;h++)f[M+h]=v[E+h];else f.set(new Uint8Array(v.buffer,E,A),M);else if(k==1){for(h=0;h<D;h++)f[M+h]=v[E+h];for(h=D;h<A;h++)f[M+h]=v[E+h]-v[E+h-D]+256&255}else if(b==0){for(h=0;h<D;h++)f[M+h]=v[E+h];if(k==2)for(h=D;h<A;h++)f[M+h]=v[E+h];if(k==3)for(h=D;h<A;h++)f[M+h]=v[E+h]-(v[E+h-D]>>1)+256&255;if(k==4)for(h=D;h<A;h++)f[M+h]=v[E+h]-w(v[E+h-D],0,0)+256&255}else{if(k==2)for(h=0;h<A;h++)f[M+h]=v[E+h]+256-v[E+h-A]&255;if(k==3){for(h=0;h<D;h++)f[M+h]=v[E+h]+256-(v[E+h-A]>>1)&255;for(h=D;h<A;h++)f[M+h]=v[E+h]+256-(v[E+h-A]+v[E+h-D]>>1)&255}if(k==4){for(h=0;h<D;h++)f[M+h]=v[E+h]+256-w(0,v[E+h-A],0)&255;for(h=D;h<A;h++)f[M+h]=v[E+h]+256-w(v[E+h-D],v[E+h-A],v[E+h-D-A])&255}}}function S(f,v){const b=new Uint8Array(f),A=b.slice(0),D=new Uint32Array(A.buffer),k=C(A,v),E=k[0],M=k[1],h=b.length,u=new Uint8Array(h>>2);let N;if(b.length<2e7)for(var I=0;I<h;I+=4)N=x(E,H=b[I]*(1/255),G=b[I+1]*(1/255),$=b[I+2]*(1/255),j=b[I+3]*(1/255)),u[I>>2]=N.ind,D[I>>2]=N.est.rgba;else for(I=0;I<h;I+=4){var H=b[I]*.00392156862745098,G=b[I+1]*(1/255),$=b[I+2]*(1/255),j=b[I+3]*(1/255);for(N=E;N.left;)N=B(N.est,H,G,$,j)<=0?N.left:N.right;u[I>>2]=N.ind,D[I>>2]=N.est.rgba}return{abuf:A.buffer,inds:u,plte:M}}function C(f,v,b){b==null&&(b=1e-4);const A=new Uint32Array(f.buffer),D={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};D.bst=z(f,D.i0,D.i1),D.est=p(D.bst);const k=[D];for(;k.length<v;){let M=0,h=0;for(var E=0;E<k.length;E++)k[E].est.L>M&&(M=k[E].est.L,h=E);if(M<b)break;const u=k[h],N=O(f,A,u.i0,u.i1,u.est.e,u.est.eMq255);if(u.i0>=N||u.i1<=N){u.est.L=0;continue}const I={i0:u.i0,i1:N,bst:null,est:null,tdst:0,left:null,right:null};I.bst=z(f,I.i0,I.i1),I.est=p(I.bst);const H={i0:N,i1:u.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:u.bst.N-I.bst.N},E=0;E<16;E++)H.bst.R[E]=u.bst.R[E]-I.bst.R[E];for(E=0;E<4;E++)H.bst.m[E]=u.bst.m[E]-I.bst.m[E];H.est=p(H.bst),u.left=I,u.right=H,k[h]=I,k.push(H)}for(k.sort((M,h)=>h.bst.N-M.bst.N),E=0;E<k.length;E++)k[E].ind=E;return[D,k]}function x(f,v,b,A,D){if(f.left==null)return f.tdst=function(I,H,G,$,j){const q=H-I[0],U=G-I[1],X=$-I[2],te=j-I[3];return q*q+U*U+X*X+te*te}(f.est.q,v,b,A,D),f;const k=B(f.est,v,b,A,D);let E=f.left,M=f.right;k>0&&(E=f.right,M=f.left);const h=x(E,v,b,A,D);if(h.tdst<=k*k)return h;const u=x(M,v,b,A,D);return u.tdst<h.tdst?u:h}function B(f,v,b,A,D){const{e:k}=f;return k[0]*v+k[1]*b+k[2]*A+k[3]*D-f.eMq}function O(f,v,b,A,D,k){for(A-=4;b<A;){for(;R(f,b,D)<=k;)b+=4;for(;R(f,A,D)>k;)A-=4;if(b>=A)break;const E=v[b>>2];v[b>>2]=v[A>>2],v[A>>2]=E,b+=4,A-=4}for(;R(f,b,D)>k;)b-=4;return b+4}function R(f,v,b){return f[v]*b[0]+f[v+1]*b[1]+f[v+2]*b[2]+f[v+3]*b[3]}function z(f,v,b){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D=[0,0,0,0],k=b-v>>2;for(let E=v;E<b;E+=4){const M=f[E]*.00392156862745098,h=f[E+1]*(1/255),u=f[E+2]*(1/255),N=f[E+3]*(1/255);D[0]+=M,D[1]+=h,D[2]+=u,D[3]+=N,A[0]+=M*M,A[1]+=M*h,A[2]+=M*u,A[3]+=M*N,A[5]+=h*h,A[6]+=h*u,A[7]+=h*N,A[10]+=u*u,A[11]+=u*N,A[15]+=N*N}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:D,N:k}}function p(f){const{R:v}=f,{m:b}=f,{N:A}=f,D=b[0],k=b[1],E=b[2],M=b[3],h=A==0?0:1/A,u=[v[0]-D*D*h,v[1]-D*k*h,v[2]-D*E*h,v[3]-D*M*h,v[4]-k*D*h,v[5]-k*k*h,v[6]-k*E*h,v[7]-k*M*h,v[8]-E*D*h,v[9]-E*k*h,v[10]-E*E*h,v[11]-E*M*h,v[12]-M*D*h,v[13]-M*k*h,v[14]-M*E*h,v[15]-M*M*h],N=u,I=T;let H=[Math.random(),Math.random(),Math.random(),Math.random()],G=0,$=0;if(A!=0)for(let q=0;q<16&&(H=I.multVec(N,H),$=Math.sqrt(I.dot(H,H)),H=I.sml(1/$,H),!(q!=0&&Math.abs($-G)<1e-9));q++)G=$;const j=[D*h,k*h,E*h,M*h];return{Cov:u,q:j,e:H,L:G,eMq255:I.dot(I.sml(255,j),H),eMq:I.dot(H,j),rgba:(Math.round(255*j[3])<<24|Math.round(255*j[2])<<16|Math.round(255*j[1])<<8|Math.round(255*j[0])<<0)>>>0}}var T={multVec:(f,v)=>[f[0]*v[0]+f[1]*v[1]+f[2]*v[2]+f[3]*v[3],f[4]*v[0]+f[5]*v[1]+f[6]*v[2]+f[7]*v[3],f[8]*v[0]+f[9]*v[1]+f[10]*v[2]+f[11]*v[3],f[12]*v[0]+f[13]*v[1]+f[14]*v[2]+f[15]*v[3]],dot:(f,v)=>f[0]*v[0]+f[1]*v[1]+f[2]*v[2]+f[3]*v[3],sml:(f,v)=>[f*v[0],f*v[1],f*v[2],f*v[3]]};tt.encode=function(v,b,A,D,k,E,M){D==null&&(D=0),M==null&&(M=!1);const h=a(v,b,A,D,[!1,!1,!1,0,M,!1]);return y(h,-1),_(h,b,A,k,E)},tt.encodeLL=function(v,b,A,D,k,E,M,h){const u={ctype:0+(D==1?0:2)+(k==0?0:4),depth:E,frames:[]},N=(D+k)*E,I=N*b;for(let H=0;H<v.length;H++)u.frames.push({rect:{x:0,y:0,width:b,height:A},img:new Uint8Array(v[H]),blend:0,dispose:1,bpp:Math.ceil(N/8),bpl:Math.ceil(I/8)});return y(u,0,!0),_(u,b,A,M,h)},tt.encode.compress=a,tt.encode.dither=o,tt.quantize=S,tt.quantize.getKDtree=C,tt.quantize.getNearest=x})();const Qn={toArrayBuffer(g,m){const w=g.width,s=g.height,e=w<<2,n=g.getContext("2d").getImageData(0,0,w,s),d=new Uint32Array(n.data.buffer),o=(32*w+31)/32<<2,_=o*s,y=122+_,a=new ArrayBuffer(y),t=new DataView(a),r=1<<20;let c,l,S,C,x=r,B=0,O=0,R=0;function z(f){t.setUint16(O,f,!0),O+=2}function p(f){t.setUint32(O,f,!0),O+=4}function T(f){O+=f}z(19778),p(y),T(4),p(122),p(108),p(w),p(-s>>>0),z(1),z(32),p(3),p(_),p(2835),p(2835),T(8),p(16711680),p(65280),p(255),p(4278190080),p(1466527264),function f(){for(;B<s&&x>0;){for(C=122+B*o,c=0;c<e;)x--,l=d[R++],S=l>>>24,t.setUint32(C+c,l<<8|S),c+=4;B++}R<d.length?(x=r,setTimeout(f,Qn._dly)):m(a)}()},toBlob(g,m){this.toArrayBuffer(g,w=>{m(new Blob([w],{type:"image/bmp"}))})},_dly:9};var Xe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Xa={[Xe.CHROME]:16384,[Xe.FIREFOX]:11180,[Xe.DESKTOP_SAFARI]:16384,[Xe.IE]:8192,[Xe.IOS]:4096,[Xe.ETC]:8192};const _n=typeof window<"u",Vn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Wt=_n&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Ja=(_n||Vn)&&(Wt&&Wt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Kn=(_n||Vn)&&(Wt&&Wt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function pn(g,m,w=Date.now()){return new Promise(s=>{const e=g.split(","),n=e[0].match(/:(.*?);/)[1],d=globalThis.atob(e[1]);let o=d.length;const _=new Uint8Array(o);for(;o--;)_[o]=d.charCodeAt(o);const y=new Blob([_],{type:n});y.name=m,y.lastModified=w,s(y)})}function Gn(g){return new Promise((m,w)=>{const s=new Kn;s.onload=()=>m(s.result),s.onerror=e=>w(e),s.readAsDataURL(g)})}function Zn(g){return new Promise((m,w)=>{const s=new Image;s.onload=()=>m(s),s.onerror=e=>w(e),s.src=g})}function xt(){if(xt.cachedResult!==void 0)return xt.cachedResult;let g=Xe.ETC;const{userAgent:m}=navigator;return/Chrom(e|ium)/i.test(m)?g=Xe.CHROME:/iP(ad|od|hone)/i.test(m)&&/WebKit/i.test(m)?g=Xe.IOS:/Safari/i.test(m)?g=Xe.DESKTOP_SAFARI:/Firefox/i.test(m)?g=Xe.FIREFOX:(/MSIE/i.test(m)||document.documentMode)&&(g=Xe.IE),xt.cachedResult=g,xt.cachedResult}function Xn(g,m){const w=xt(),s=Xa[w];let e=g,n=m,d=e*n;const o=e>n?n/e:e/n;for(;d>s*s;){const _=(s+e)/2,y=(s+n)/2;_<y?(n=y,e=y*o):(n=_*o,e=_),d=e*n}return{width:e,height:n}}function Qt(g,m){let w,s;try{if(w=new OffscreenCanvas(g,m),s=w.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{w=document.createElement("canvas"),s=w.getContext("2d")}return w.width=g,w.height=m,[w,s]}function Jn(g,m){const{width:w,height:s}=Xn(g.width,g.height),[e,n]=Qt(w,s);return m&&/jpe?g/.test(m)&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height)),n.drawImage(g,0,0,e.width,e.height),e}function Bt(){return Bt.cachedResult!==void 0||(Bt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Bt.cachedResult}function Yt(g,m={}){return new Promise(function(w,s){let e,n;var d=function(){try{return n=Jn(e,m.fileType||g.type),w([e,n])}catch(_){return s(_)}},o=function(_){try{var y=function(a){try{throw a}catch(t){return s(t)}};try{let a;return Gn(g).then(function(t){try{return a=t,Zn(a).then(function(r){try{return e=r,function(){try{return d()}catch(c){return s(c)}}()}catch(c){return y(c)}},y)}catch(r){return y(r)}},y)}catch(a){y(a)}}catch(a){return s(a)}};try{if(Bt()||[Xe.DESKTOP_SAFARI,Xe.MOBILE_SAFARI].includes(xt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(g).then(function(_){try{return e=_,d()}catch{return o()}},o)}catch{o()}})}function jt(g,m,w,s,e=1){return new Promise(function(n,d){let o;if(m==="image/png"){let y,a,t;return y=g.getContext("2d"),{data:a}=y.getImageData(0,0,g.width,g.height),t=tt.encode([a.buffer],g.width,g.height,4096*e),o=new Blob([t],{type:m}),o.name=w,o.lastModified=s,_.call(this)}{let y=function(){return _.call(this)};if(m==="image/bmp")return new Promise(a=>Qn.toBlob(g,a)).then(function(a){try{return o=a,o.name=w,o.lastModified=s,y.call(this)}catch(t){return d(t)}}.bind(this),d);{let a=function(){return y.call(this)};if(typeof OffscreenCanvas=="function"&&g instanceof OffscreenCanvas)return g.convertToBlob({type:m,quality:e}).then(function(t){try{return o=t,o.name=w,o.lastModified=s,a.call(this)}catch(r){return d(r)}}.bind(this),d);{let t;return t=g.toDataURL(m,e),pn(t,w,s).then(function(r){try{return o=r,a.call(this)}catch(c){return d(c)}}.bind(this),d)}}}function _(){return n(o)}})}function ot(g){g.width=0,g.height=0}function Dt(){return new Promise(function(g,m){let w,s,e,n;return Dt.cachedResult!==void 0?g(Dt.cachedResult):pn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(d){try{return w=d,Yt(w).then(function(o){try{return s=o[1],jt(s,w.type,w.name,w.lastModified).then(function(_){try{return e=_,ot(s),Yt(e).then(function(y){try{return n=y[0],Dt.cachedResult=n.width===1&&n.height===2,g(Dt.cachedResult)}catch(a){return m(a)}},m)}catch(y){return m(y)}},m)}catch(_){return m(_)}},m)}catch(o){return m(o)}},m)})}function er(g){return new Promise((m,w)=>{const s=new Kn;s.onload=e=>{const n=new DataView(e.target.result);if(n.getUint16(0,!1)!=65496)return m(-2);const d=n.byteLength;let o=2;for(;o<d;){if(n.getUint16(o+2,!1)<=8)return m(-1);const _=n.getUint16(o,!1);if(o+=2,_==65505){if(n.getUint32(o+=2,!1)!=1165519206)return m(-1);const y=n.getUint16(o+=6,!1)==18761;o+=n.getUint32(o+4,y);const a=n.getUint16(o,y);o+=2;for(let t=0;t<a;t++)if(n.getUint16(o+12*t,y)==274)return m(n.getUint16(o+12*t+8,y))}else{if((65280&_)!=65280)break;o+=n.getUint16(o,!1)}}return m(-1)},s.onerror=e=>w(e),s.readAsArrayBuffer(g)})}function tr(g,m){const{width:w}=g,{height:s}=g,{maxWidthOrHeight:e}=m;let n,d=g;return isFinite(e)&&(w>e||s>e)&&([d,n]=Qt(w,s),w>s?(d.width=e,d.height=s/w*e):(d.width=w/s*e,d.height=e),n.drawImage(g,0,0,d.width,d.height),ot(g)),d}function nr(g,m){const{width:w}=g,{height:s}=g,[e,n]=Qt(w,s);switch(m>4&&m<9?(e.width=s,e.height=w):(e.width=w,e.height=s),m){case 2:n.transform(-1,0,0,1,w,0);break;case 3:n.transform(-1,0,0,-1,w,s);break;case 4:n.transform(1,0,0,-1,0,s);break;case 5:n.transform(0,1,1,0,0,0);break;case 6:n.transform(0,1,-1,0,s,0);break;case 7:n.transform(0,-1,-1,0,s,w);break;case 8:n.transform(0,-1,1,0,0,w)}return n.drawImage(g,0,0,w,s),ot(g),e}function Cn(g,m,w=0){return new Promise(function(s,e){let n,d,o,_,y,a,t,r,c,l,S,C,x,B,O,R,z,p,T,f;function v(A=5){if(m.signal&&m.signal.aborted)throw m.signal.reason;n+=A,m.onProgress(Math.min(n,100))}function b(A){if(m.signal&&m.signal.aborted)throw m.signal.reason;n=Math.min(Math.max(A,n),100),m.onProgress(n)}return n=w,d=m.maxIteration||10,o=1024*m.maxSizeMB*1024,v(),Yt(g,m).then(function(A){try{return[,_]=A,v(),y=tr(_,m),v(),new Promise(function(D,k){var E;if(!(E=m.exifOrientation))return er(g).then(function(h){try{return E=h,M.call(this)}catch(u){return k(u)}}.bind(this),k);function M(){return D(E)}return M.call(this)}).then(function(D){try{return a=D,v(),Dt().then(function(k){try{return t=k?y:nr(y,a),v(),r=m.initialQuality||1,c=m.fileType||g.type,jt(t,c,g.name,g.lastModified,r).then(function(E){try{{let h=function(){if(d--&&(O>o||O>x)){let N,I;return N=f?.95*T.width:T.width,I=f?.95*T.height:T.height,[z,p]=Qt(N,I),p.drawImage(T,0,0,N,I),r*=c==="image/png"?.85:.95,jt(z,c,g.name,g.lastModified,r).then(function(H){try{return R=H,ot(T),T=z,O=R.size,b(Math.min(99,Math.floor((B-O)/(B-o)*100))),h}catch(G){return e(G)}},e)}return[1]},u=function(){return ot(T),ot(z),ot(y),ot(t),ot(_),b(100),s(R)};if(l=E,v(),S=l.size>o,C=l.size>g.size,!S&&!C)return b(100),s(l);var M;return x=g.size,B=l.size,O=B,T=t,f=!m.alwaysKeepResolution&&S,(M=function(N){for(;N;){if(N.then)return void N.then(M,e);try{if(N.pop){if(N.length)return N.pop()?u.call(this):N;N=h}else N=N.call(this)}catch(I){return e(I)}}}.bind(this))(h)}}catch(h){return e(h)}}.bind(this),e)}catch(E){return e(E)}}.bind(this),e)}catch(k){return e(k)}}.bind(this),e)}catch(D){return e(D)}}.bind(this),e)})}const ei=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let dn;function ti(g,m){return new Promise((w,s)=>{dn||(dn=function(d){const o=[];return o.push(d),URL.createObjectURL(new Blob(o))}(ei));const e=new Worker(dn);e.addEventListener("message",function(d){if(m.signal&&m.signal.aborted)e.terminate();else if(d.data.progress===void 0){if(d.data.error)return s(new Error(d.data.error)),void e.terminate();w(d.data.file),e.terminate()}else m.onProgress(d.data.progress)}),e.addEventListener("error",s),m.signal&&m.signal.addEventListener("abort",()=>{s(m.signal.reason),e.terminate()}),e.postMessage({file:g,imageCompressionLibUrl:m.libURL,options:{...m,onProgress:void 0,signal:void 0}})})}function $e(g,m){return new Promise(function(w,s){let e,n,d,o,_,y;if(e={...m},d=0,{onProgress:o}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,_=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=c=>{d=c,typeof o=="function"&&o(d)},!(g instanceof Blob||g instanceof Ja))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(g.type))return s(new Error("The file given is not an image"));if(y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!_||typeof Worker!="function"||y)return Cn(g,e).then(function(c){try{return n=c,r.call(this)}catch(l){return s(l)}}.bind(this),s);var a=function(){try{return r.call(this)}catch(c){return s(c)}}.bind(this),t=function(c){try{return Cn(g,e).then(function(l){try{return n=l,a()}catch(S){return s(S)}},s)}catch(l){return s(l)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ti(g,e).then(function(c){try{return n=c,a()}catch{return t()}},t)}catch{t()}function r(){try{n.name=g.name,n.lastModified=g.lastModified}catch{}try{e.preserveExif&&g.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===g.type)&&(n=$n(g,n))}catch{}return w(n)}})}$e.getDataUrlFromFile=Gn,$e.getFilefromDataUrl=pn,$e.loadImage=Zn,$e.drawImageInCanvas=Jn,$e.drawFileInCanvas=Yt,$e.canvasToFile=jt,$e.getExifOrientation=er,$e.handleMaxWidthOrHeight=tr,$e.followExifOrientation=nr,$e.cleanupCanvasMemory=ot,$e.isAutoOrientationInBrowser=Dt,$e.approximateBelowMaximumCanvasSizeOfBrowser=Xn,$e.copyExifWithoutOrientation=$n,$e.getBrowserName=xt,$e.version="2.0.2";const ni={maxSizeMB:.8,maxWidthOrHeight:2400,initialQuality:.9,useWebWorker:!0,compressionThresholdMB:1};async function ri(g,m,w={},s){const e={...ni,...w};try{let n=g;if(g.type.startsWith("image/")&&g.size>e.compressionThresholdMB*1024*1024){s?.("Compressing image...");try{const _=await $e(g,{maxSizeMB:e.maxSizeMB,maxWidthOrHeight:e.maxWidthOrHeight,initialQuality:e.initialQuality,useWebWorker:e.useWebWorker});n=_;const y=(g.size/(1024*1024)).toFixed(2),a=(_.size/(1024*1024)).toFixed(2),t=((1-_.size/g.size)*100).toFixed(0);console.log(`Image compressed: ${y}MB  ${a}MB (${t}% smaller)`)}catch(_){console.warn("Image compression failed, uploading original:",_)}}return s?.("Uploading file..."),{success:!0,attachment:await Qr(n,m)}}catch(n){return console.error("File upload failed:",n),{success:!1,error:n instanceof Error?n.message:"Upload failed"}}}async function ai(g){try{const m=jr(g.url);return await $r(m),!0}catch(m){return console.error("Failed to remove attachment:",m),!1}}function ii(g,m,w){return g.map(s=>s.id===m?{...s,name:w}:s)}function si(g,m=5){const w=g.type.startsWith("image/"),s=m*1024*1024;if(!w&&g.size>s){const e=(g.size/1048576).toFixed(2);return{valid:!1,error:`Non-image files must be under ${m}MB (selected file is ${e}MB)`}}return{valid:!0}}function li(g){return{uploadAttachment:(m,w,s)=>ri(m,w,g,s),removeAttachment:ai,updateAttachmentName:ii,validateFile:si}}function Fn(g,m){const[w,s]=m.split(":").map(Number);let e=la(g,w);return e=oa(e,s),e}function Un(g){return Array.from(new Set(g)).sort((m,w)=>m-w)}function oi(g,m){if(m.includes(g))return 0;const w=m.find(s=>s>g);return w!==void 0?w-g:7-g+m[0]}function ci(g,m,w){const s=new Date(g),e=yt(s,Ge),n=e.getDay(),d=oi(n,w);if(d===0)return{start_time:g,end_time:m};const o=Ht(e,d),_=Et(o,Ge);let y=m;if(m){const a=yt(new Date(m),Ge),t=Ht(a,d);y=Et(t,Ge).toISOString()}return{start_time:_.toISOString(),end_time:y}}function rr({eventItem:g,dateInput:m,startTimeInput:w,endTimeInput:s,attachments:e,isRecurring:n,recurrenceFrequency:d,recurrenceInterval:o,recurringDays:_,recurrenceEndDate:y,hasEndDate:a,monthlyType:t}){const r=!g.id,c={...g.meta_data??{}};if(g.organization){c.organization=g.organization;const p=Mt(g.organization);p?.label&&(c.organization_label=p.label)}const l=Bn(),S=l?un(l.stores.currentUser):void 0;if(r){const p=l?un(l.stores.userOrganizations):void 0,T=S?.displayName||S?.username,f=S?.id;T&&!c.submitted_by_name&&(c.submitted_by_name=T),f&&!c.submitted_by_user_id&&(c.submitted_by_user_id=f);const v=p?Array.from(p):[];v.length&&!c.submitted_by_organizations&&(c.submitted_by_organizations=v),c.submitted_at||(c.submitted_at=new Date().toISOString())}else{const p=S?.displayName||S?.username;p&&(c.edited_by_name=p),S?.id&&(c.edited_by_user_id=S.id),c.edited_at=new Date().toISOString()}const C=Object.keys(c).length?c:void 0,x={title:g.title,description:g.description,location:g.location,is_public:g.is_public??!0,event_type:g.event_type,meta_data:C,attachments:e.length>0?e:null};if(g.event_type!=="calendar_event")return{...x,start_time:void 0,end_time:void 0,is_all_day:void 0,recurrence_rule:void 0,recurrence_end_date:void 0};const B=m?Nt(m,"yyyy-MM-dd",new Date):new Date;let O,R;if(g.is_all_day){const p=Et(B,Ge);O=p.toISOString(),R=p.toISOString()}else{const p=new Date(B.getTime()),T=new Date(B.getTime()),f=w?Fn(p,w):B,v=s?Fn(T,s):B;O=Et(f,Ge).toISOString(),R=Et(v,Ge).toISOString()}const z={...x,start_time:O,end_time:R,is_all_day:g.is_all_day};if(n&&z.start_time){if(d==="weekly"&&_.length>0){const T=Un(_),f=ci(z.start_time,z.end_time,T);z.start_time=f.start_time,z.end_time=f.end_time}if(d==="daily"||d==="yearly"||d==="weekly"&&_.length>0||d==="monthly"){const{recurrence_rule:T,recurrence_end_date:f}=gn({frequency:d,interval:o,recurringDays:d==="weekly"?Un(_):[],recurrenceEndDate:y,hasEndDate:a,monthlyType:t,startTime:z.start_time});z.recurrence_rule=T,z.recurrence_end_date=f}else z.recurrence_rule=void 0,z.recurrence_end_date=void 0}else z.recurrence_rule=void 0,z.recurrence_end_date=void 0;return z}async function di({id:g,...m}){const w=rr(m);return g?(m.eventItem.bishop_approval==="NO"&&Object.assign(w,{bishop_approval:null,bishop_approval_at:null,bishop_approval_by_user_id:null,first_counselor_approval:null,first_counselor_approval_at:null,first_counselor_approval_by_user_id:null,second_counselor_approval:null,second_counselor_approval_at:null,second_counselor_approval_by_user_id:null}),{action:"update",event:await At(g,w)}):{action:"create",event:await qn(w)}}async function ui(g){await Hn(g)}function fi({event:g,newDate:m}){const w=g.start_time?new Date(g.start_time):new Date,s=g.end_time?new Date(g.end_time):new Date,[e,n,d]=m.split("-").map(Number),o=new Date(w);o.setFullYear(e,n-1,d);const _=new Date(s);return _.setFullYear(e,n-1,d),{...g,id:void 0,title:`CLONED - ${g.title}`,start_time:o.toISOString(),end_time:_.toISOString(),attachments:[],recurrence_rule:void 0,recurrence_end_date:void 0}}async function vi(g,m,w){const s=await Ct(g);if(!s)throw new Error("Event not found");const e=s.recurrence_exceptions||[];e.includes(m)||e.push(m);const n=s.recurrence_overrides||{};n[m]={title:w.title,description:w.description,location:w.location,start_time:w.start_time,end_time:w.end_time,is_all_day:w.is_all_day,meta_data:w.meta_data},await At(g,{recurrence_exceptions:e,recurrence_overrides:n})}async function mi(g,m,w){const s=await Ct(g);if(!s||!s.recurrence_rule||!s.start_time)throw new Error("Event not found or is not recurring");const{parseRecurrenceRule:e,generateRecurrenceRule:n}=await Lt(async()=>{const{parseRecurrenceRule:O,generateRecurrenceRule:R}=await Promise.resolve().then(()=>mn);return{parseRecurrenceRule:O,generateRecurrenceRule:R}},void 0,import.meta.url),d=e(s.recurrence_rule,s.recurrence_end_date);if(!d)throw new Error("Failed to parse recurrence rule");const o=He(new Date(s.start_time),"yyyy-MM-dd"),_=Nt(m,"yyyy-MM-dd",new Date),y=Nt(o,"yyyy-MM-dd",new Date);if(_<=y)return await At(g,w),g;const a=Ht(_,-1),t=He(a,"yyyy-MM-dd"),{recurrence_rule:r,recurrence_end_date:c}=n({frequency:d.frequency,interval:d.interval,recurringDays:d.recurringDays,recurrenceEndDate:t,hasEndDate:!0,monthlyType:d.monthlyType,startTime:s.start_time});await At(g,{recurrence_rule:r,recurrence_end_date:c});const l=d.hasEndDate?d.recurrenceEndDate:"",{recurrence_rule:S,recurrence_end_date:C}=n({frequency:d.frequency,interval:d.interval,recurringDays:d.recurringDays,recurrenceEndDate:l,hasEndDate:d.hasEndDate,monthlyType:d.monthlyType,startTime:w.start_time||s.start_time}),x={...w,recurrence_rule:S,recurrence_end_date:C};return(await qn(x))?.id||0}async function hi(g,m){const w=await Ct(g);if(!w)throw new Error("Event not found");const s={title:m.title,description:m.description,location:m.location,event_type:m.event_type,meta_data:m.meta_data,attachments:m.attachments,is_all_day:m.is_all_day,start_time:w.start_time,end_time:w.end_time,recurrence_rule:w.recurrence_rule,recurrence_end_date:w.recurrence_end_date,recurrence_exceptions:[],recurrence_overrides:{}};await At(g,s)}async function gi(g,m){const w=await Ct(g);if(!w)throw new Error("Event not found");const s=w.recurrence_exceptions||[];s.includes(m)||s.push(m);const e=w.recurrence_overrides||{};e[m]&&delete e[m],await At(g,{recurrence_exceptions:s,recurrence_overrides:e})}async function _i(g,m){const w=await Ct(g);if(!w||!w.recurrence_rule||!w.start_time)throw new Error("Event not found or is not recurring");const s=Nt(m,"yyyy-MM-dd",new Date),e=Ht(s,-1),n=He(e,"yyyy-MM-dd"),{parseRecurrenceRule:d}=await Lt(async()=>{const{parseRecurrenceRule:t}=await Promise.resolve().then(()=>mn);return{parseRecurrenceRule:t}},void 0,import.meta.url),o=d(w.recurrence_rule,w.recurrence_end_date);if(!o)throw new Error("Failed to parse recurrence rule");const{generateRecurrenceRule:_}=await Lt(async()=>{const{generateRecurrenceRule:t}=await Promise.resolve().then(()=>mn);return{generateRecurrenceRule:t}},void 0,import.meta.url),{recurrence_rule:y,recurrence_end_date:a}=_({frequency:o.frequency,interval:o.interval,recurringDays:o.recurringDays,recurrenceEndDate:n,hasEndDate:!0,monthlyType:o.monthlyType,startTime:w.start_time});await At(g,{recurrence_rule:y,recurrence_end_date:a})}async function pi(g){await Hn(g)}function yi(){return{saveEvent:di,deleteEventById:ui,cloneEventForDate:fi,buildEventPayload:rr,saveSingleInstance:vi,saveFutureInstances:mi,saveAllInstances:hi,deleteSingleInstance:gi,deleteFutureInstances:_i,deleteAllInstances:pi}}const bi=`${Nr}/functions/v1/calendar-approval-notify`;async function wi(g,m){if(!(!g||typeof fetch>"u"))try{const w=await fetch(bi,{method:"POST",headers:Hr(!0,{useAuthToken:!0}),body:JSON.stringify({event_id:g,reason:m})});if(!w.ok){const s=await w.text();console.error("Failed to send approval notification:",s)}}catch(w){console.error("Error sending approval notification:",w)}}var xi=ve('<div class="alert alert-info d-flex align-items-center gap-2 mb-0" role="alert"><i class="bi bi-arrow-repeat"></i> <div><strong>Recurring Event</strong> <div class="small">Changes to this event will apply to all future occurrences.</div></div></div>'),Ei=ve('<button class="btn btn-primary btn-sm"><i class="bi bi-files"></i> <span class="ms-1">Clone</span></button>'),Ai=ve("<!> <!>",1),Di=ve('<span class="badge bg-secondary-subtle text-secondary-emphasis"> </span>'),Si=ve('<div class="card"><button type="button" class="btn btn-link text-start text-decoration-none d-flex align-items-center gap-3 p-3 w-100 submitter-chat-toggle svelte-1ujj5ue"><i class="bi bi-chat-left-dots"></i> <div class="d-flex flex-column align-items-start"><span class="fw-semibold">Discussion with Bishopric</span> <small class="text-muted">Ask questions or respond to feedback</small></div> <div class="ms-auto d-flex align-items-center gap-2"><!> <i class="bi bi-chevron-right"></i></div></button></div> <!>',1),ki=ve('<div class="alert alert-info small mb-0 d-flex align-items-start gap-2"><i class="bi bi-info-circle mt-1"></i> <span>All submissions require bishopric approval before they appear on the public calendar.</span></div> <!>',1),Ii=ve('<button class="btn btn-danger position-relative"><span>Delete</span></button>'),Ti=ve("<span>Save</span>"),Ri=ve("<span>Create</span>"),Mi=ve('<span class="position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"><span class="visually-hidden">Item not saved</span></span>'),Ci=ve('<button class="btn btn-primary position-relative"><!> <!></button>'),Fi=ve('<div class="d-flex flex-column gap-4"><!> <div class="d-flex flex-column gap-3"><div class="d-flex justify-content-between align-items-center gap-3 flex-wrap"><h2 class="h5 mb-0">Event Details</h2> <!></div> <!></div> <!> <!> <!> <!> <div class="d-flex justify-content-between align-items-center gap-2 flex-row"><div class="d-flex flex-row gap-2"><!></div> <div class="d-flex flex-row gap-2"><button class="btn btn-secondary position-relative">Cancel</button> <!></div></div> <div class="d-flex justify-content-end align-items-center gap-2 flex-row"><small> </small> <span><!></span></div> <!></div> <!> <!>',1);function Ss(g,m){dt(m,!1);const w=()=>an(B,"$userOrganizations",n),s=()=>an(O,"$currentUser",n),e=()=>an(R,"$validationErrors",n),[n,d]=Br(),o=de(),_=de(),y=de(),a=de(),t=de();let r=me(m,"name",8,""),c=me(m,"drawerId",8,""),l=me(m,"eventItem",12,qr),S=me(m,"canDelete",8,!0),C=me(m,"canCreate",8,!0);const{actions:{reload:x}}=Vr(),{stores:{userOrganizations:B,currentUser:O}}=Bn(),{validationErrors:R,validate:z,getErrorMessages:p,clearErrors:T}=Qa(),{parseRecurrenceRule:f}=jn(),{uploadAttachment:v,removeAttachment:b,updateAttachmentName:A,validateFile:D}=li(),{saveEvent:k,deleteEventById:E,cloneEventForDate:M,buildEventPayload:h,saveSingleInstance:u,saveFutureInstances:N,saveAllInstances:I,deleteSingleInstance:H,deleteFutureInstances:G,deleteAllInstances:$}=yi();let j=de(!1),q=de(!1),U=de(!1),X=de("weekly"),te=de(1),ie=de([]),ue=de(""),ye=de(!0),Se=de("date"),De=de([]),Te=de(!1),Q=de(!1),Z=de(void 0),V=de(void 0),re=de(!1),le=de(null),ce=de(!1),se=de(null),ne=de(0),fe=de({title:"",description:"",start_time:"",end_time:"",location:"",is_all_day:!1,event_type:"announcement"}),ge=de({message:"",type:"info"}),oe=de(""),_e=de(""),Ie=de(""),Le=de({dateInput:"",startTimeInput:"",endTimeInput:"",isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"}),be=de(!1);const je=(K,Y)=>K.length===Y.length&&K.every((we,Ae)=>we===Y[Ae]);let Ee=de([]),Re=de(!1),qe=de(!1);const Ne=`submitter-chat-form-${ia()}`;let Pe=de(null),Me=null,We=null;zn(async()=>{typeof window<"u"&&(We=(await Lt(()=>import("./DO0djbQe.js").then(Y=>Y.o),__vite__mapDeps([0,1]),import.meta.url)).default)}),Fr(()=>{rt()});function ft(){if(!We)return;const K=document.getElementById(Ne);if(!K)return;We.getOrCreateInstance(K).show()}function nt(K){const Y=K??l()?.id??null;if(Me||!Y)return;const we=typeof window<"u"?localStorage.getItem("authToken"):null;we&&ln.realtime.setAuth(we),Me=ln.channel(`submitter-comments-form-${Y}`).on("postgres_changes",{event:"*",schema:"public",table:"event_submitter_comments",filter:`event_id=eq.${Y}`},()=>{at(Y)}).subscribe()}function rt(){Me&&(ln.removeChannel(Me),Me=null)}async function at(K){const Y=K??l()?.id??null;if(Y){i(qe)||F(Re,!0);try{const we=await Kr(Y);Y===(l()?.id??null)&&(F(Ee,we),F(qe,!0))}catch(we){console.error("Failed to load submitter comments:",we)}finally{Y===(l()?.id??null)&&F(Re,!1)}}}async function Vt(K){if(!l()?.id||!s()?.id)return;const Y=s().displayName||s().username||"Unknown";await Jr(l().id,s().id,Y,K),await at()}async function it(K){await Xr(K),await at()}const Ze=()=>{const K=`[data-bs-target="#${c()}"]`,Y=document.querySelector(K);Y&&Y.click()},Ce=(K,Y=0,we="info")=>{rn(ge,i(ge).message=K),rn(ge,i(ge).type=we),Y&&setTimeout(()=>{rn(ge,i(ge).message="")},Y)},bt=async K=>{const Y=K.detail;if(!Y)return;const we=D(Y);if(!we.valid){Ce(we.error??"Invalid file selected",7e3,"danger");return}F(q,!0);try{const Ae=await v(Y,i(o)??"temp",Ye=>Ce(Ye));if(!Ae.success||!Ae.attachment)throw new Error(Ae.error??"Upload failed");F(De,[...i(De),Ae.attachment]),F(Te,!0),Ce("File uploaded!",3e3,"success")}catch(Ae){console.error("File upload failed:",Ae),Ce("Failed to upload file. Please try again.",7e3,"danger")}finally{F(q,!1)}},Ft=K=>{const{attachment:Y,newName:we}=K.detail;F(De,A(i(De),Y.id,we)),F(Te,!0),Ce("Attachment name updated!",3e3,"success")},vt=async K=>{const Y=K.detail;if(Y){F(q,!0);try{if(!await b(Y))throw new Error("Failed to remove attachment");F(De,i(De).filter(Ae=>Ae.id!==Y.id)),F(Te,!0),Ce("Attachment removed!",3e3,"success")}catch(we){console.error("Failed to remove attachment:",we),Ce("Failed to remove attachment. Please try again.",7e3,"danger")}finally{F(q,!1)}}},mt=async()=>{if(!i(o)){Ce("ID is not defined",0,"danger");return}try{await E(i(o)),await x(),ht("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{F(j,!1),F(fe,{...l(),id:i(o)}),Ce("Event Deleted",3e3,"success"),Ze()},800)}catch(K){ht("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{F(j,!1),console.error("Delete failed:",K),Ce("Failed to delete event. Please try again.",7e3,"danger")},800)}},ar=()=>!!l().recurrence_rule,ir=async()=>{const K=i(o)||l().meta_data?.recurring_parent_id;if(K&&i(Q)&&i(V)&&i(Z)){if(F(se,null),F(ce,!0),await new Promise(Y=>{const we=setInterval(()=>{i(ce)||(clearInterval(we),Y())},50)}),!i(se))return;F(j,!0);try{i(se)==="single"?await H(K,i(Z)):i(se)==="future"?await G(K,i(Z)):i(se)==="all"&&await $(K),await x(),ht("set_calendar_event_success","interaction","Delete Calendar Event Successful",1),setTimeout(()=>{F(j,!1),F(fe,{...l(),id:i(o)}),Ce("Event Deleted",3e3,"success"),Ze()},800)}catch(Y){ht("set_calendar_event_failed","interaction","Delete Calendar Event Failed",1),setTimeout(()=>{F(j,!1),console.error("Delete failed:",Y),Ce("Failed to delete event. Please try again.",7e3,"danger")},800)}}else F(j,!0),ea({title:"Delete Confirmation",message:ar()?"This recurring event and every occurrence, past and future, will be removed. You won't be able to undo this. Continue?":"Are you sure you want to do this? You won't be able to undo this.",confirmButtonLabel:"Yes",confirmButtonCSS:"btn-danger",callback:Y=>{Y?mt():F(j,!1)}})},sr=K=>{if(i(o))try{const Y=M({event:l(),newDate:K});ht("clone_calendar_event_form_loaded","interaction","Clone Calendar Event Form Loaded",1),Ce("Event cloned. Review and click Create to save.",5e3,"success"),l(Y),F(oe,Y.start_time?He(new Date(Y.start_time),"yyyy-MM-dd"):""),F(_e,Y.start_time?He(new Date(Y.start_time),"HH:mm"):""),F(Ie,Y.end_time?He(new Date(Y.end_time),"HH:mm"):""),F(De,[]),F(U,!1),F(ie,[]),F(ue,""),F(ye,!0),F(Te,!0),F(ne,void 0),F(fe,{...Y}),F(Le,{dateInput:i(oe),startTimeInput:i(_e),endTimeInput:i(Ie),isRecurring:!1,recurrenceFrequency:"weekly",recurrenceInterval:1,recurringDays:[],recurrenceEndDate:"",hasEndDate:!0,monthlyType:"date"})}catch(Y){console.error("Clone failed:",Y),Ce("Failed to clone event. Please try again.",7e3,"danger")}},lr=()=>{ja({title:"Clone Event",message:"Select a date for the cloned event:",confirmButtonLabel:"Clone",confirmButtonCSS:"btn-primary",defaultDate:i(oe),callback:(K,Y)=>{K&&Y&&sr(Y)}})},or=async()=>{if(i(o)&&!i(y)){Ce("Sorry nothing has changed, therefore, there is nothing to save.",7e3);return}if(!await z({title:l().title,event_type:l().event_type,organization:l().organization??"",description:l().description,location:l().location,is_all_day:l().is_all_day,dateInput:i(oe),startTimeInput:i(_e),endTimeInput:i(Ie),isRecurring:i(U),recurrenceFrequency:i(X),recurringDays:i(U)?i(ie):[],recurrenceEndDate:i(U)?i(ue):void 0,hasEndDate:i(ye)})){const we=p();we.length&&Ce(we.join(". ")+".  Please address accordingly.",0,"danger");return}const Y=i(o)||l().meta_data?.recurring_parent_id;if(Y&&i(Q)&&i(V)&&i(Z)){if(F(le,null),F(re,!0),await new Promise(Ae=>{const Ye=setInterval(()=>{i(re)||(clearInterval(Ye),Ae())},100)}),!i(le)||i(j))return;Ce("Saving ..."),F(j,!0);const we=h({eventItem:l(),dateInput:i(oe),startTimeInput:i(_e),endTimeInput:i(Ie),attachments:i(De),isRecurring:i(_)&&i(U),recurrenceFrequency:i(X),recurrenceInterval:i(te),recurringDays:i(U)?i(ie):[],recurrenceEndDate:i(U)?i(ue):"",hasEndDate:i(ye),monthlyType:i(Se)});try{let Ae;i(le)==="single"?await u(Y,i(Z),we):i(le)==="future"?Ae=await N(Y,i(Z),we):i(le)==="all"&&await I(Y,we),await x(),await Or(),ht("set_calendar_event_success","interaction",`Set Calendar Event Successful ${l().title}`,1),F(j,!1),Ae&&l({...l(),id:Ae}),l(l().attachments=i(De),!0),F(fe,{...l(),id:Ae||Y}),F(Te,!1),Ce("Saved",3e3,"success"),Ze()}catch(Ae){ht("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${l().title}`,1),setTimeout(()=>{F(j,!1),console.error("Save failed:",Ae),Ce("Failed to save event. Please try again.",7e3,"danger")},800)}}else{if(i(j))return;Ce("Saving ..."),F(j,!0);const we=!!i(o)&&(l().bishop_approval==="NO"||l().first_counselor_approval==="NO"||l().second_counselor_approval==="NO");try{const Ae=await k({id:i(o),eventItem:l(),dateInput:i(oe),startTimeInput:i(_e),endTimeInput:i(Ie),attachments:i(De),isRecurring:i(_)&&i(U),recurrenceFrequency:i(X),recurrenceInterval:i(te),recurringDays:i(U)?i(ie):[],recurrenceEndDate:i(U)?i(ue):"",hasEndDate:i(ye),monthlyType:i(Se)});let Ye=null;Ae.action==="create"?Ye="created":we&&(Ye="resubmitted"),Ae.event&&l({...l(),...Ae.event}),l(l().attachments=i(De),!0),await x();const Fe=Ae.event?.id??i(o);Ye&&Fe&&wi(Fe,Ye),ht("set_calendar_event_success","interaction",`Set Calendar Event Successful ${l().title}`,1),setTimeout(()=>{F(j,!1),F(fe,{...l(),id:i(o)}),F(Te,!1),Ce("Saved",3e3,"success"),Ze()},800)}catch(Ae){ht("set_calendar_event_failed","interaction",`Set Calendar Event Failed ${l().title}`,1),setTimeout(()=>{F(j,!1),console.error("Save failed:",Ae),Ce("Failed to save event. Please try again.",7e3,"danger")},800)}}};Be(()=>J(l()),()=>{F(o,l().id)}),Be(()=>J(l()),()=>{F(_,l().event_type==="calendar_event")}),Be(()=>(i(_),i(U),i(ie),i(ue)),()=>{!i(_)&&(i(U)||i(ie).length>0||i(ue))&&(F(U,!1),F(X,"weekly"),F(te,1),F(ie,[]),F(ue,""),F(ye,!0),F(Se,"date"))}),Be(()=>(J(l()),i(ne),i(fe),i(Te),i(oe),i(_e),i(Ie),i(U),i(X),i(te),i(ie),i(ue),i(ye),i(Se)),()=>{if(l()?.id!==i(ne)||l()?.start_time!==i(fe).start_time||l()?.meta_data?.recurring_instance_index!==i(fe).meta_data?.recurring_instance_index){F(j,!0);const K=i(Te),Y=l();setTimeout(()=>{const we=Y.event_type==="calendar_event";if(F(oe,we&&Y.start_time?He(new Date(Y.start_time),"yyyy-MM-dd"):""),F(_e,we&&Y.start_time?He(new Date(Y.start_time),"HH:mm"):""),F(Ie,we&&Y.end_time?He(new Date(Y.end_time),"HH:mm"):""),K||F(De,Y.attachments?[...Y.attachments]:[]),Y.meta_data?.recurring_instance&&Y.start_time?(F(V,Y.recurrence_rule),F(Q,!0),F(Z,He(new Date(Y.start_time),"yyyy-MM-dd"))):(F(V,void 0),F(Q,!1),F(Z,void 0)),Y.recurrence_rule){const Ae=f(Y.recurrence_rule,Y.recurrence_end_date);Ae?(F(U,!0),F(X,Ae.frequency),F(te,Ae.interval),F(ie,Ae.recurringDays),F(ue,Ae.recurrenceEndDate),F(ye,Ae.hasEndDate),F(Se,Ae.monthlyType)):(F(U,!1),F(X,"weekly"),F(te,1),F(ie,[]),F(ue,""),F(ye,!0),F(Se,"date"))}else F(U,!1),F(X,"weekly"),F(te,1),F(ie,[]),F(ue,""),F(ye,!0),F(Se,"date");F(ne,Y.id),F(fe,{...Y}),F(j,!1),F(Te,!1),T(),F(Le,{dateInput:i(oe),startTimeInput:i(_e),endTimeInput:i(Ie),isRecurring:i(U),recurrenceFrequency:i(X),recurrenceInterval:i(te),recurringDays:[...i(ie)],recurrenceEndDate:i(ue),hasEndDate:i(ye),monthlyType:i(Se)})},200)}}),Be(()=>(i(fe),J(l()),i(De),i(oe),i(Le),i(_e),i(Ie),i(U),i(X),i(te),i(ie),i(ue),i(ye),i(Se)),()=>{F(y,i(fe).title!==l().title||i(fe).start_time!==l().start_time||i(fe).end_time!==l().end_time||i(fe).description!==l().description||i(fe).location!==l().location||i(fe).is_public!==l().is_public||i(fe).organization!==l().organization||i(fe).is_all_day!==l().is_all_day||JSON.stringify(i(De))!==JSON.stringify(l().attachments||[])||i(fe).recurrence_rule!==l().recurrence_rule||i(fe).recurrence_end_date!==l().recurrence_end_date||i(oe)!==i(Le).dateInput||i(_e)!==i(Le).startTimeInput||i(Ie)!==i(Le).endTimeInput||i(U)!==i(Le).isRecurring||i(X)!==i(Le).recurrenceFrequency||i(te)!==i(Le).recurrenceInterval||!je(i(ie),i(Le).recurringDays)||i(ue)!==i(Le).recurrenceEndDate||i(ye)!==i(Le).hasEndDate||i(Se)!==i(Le).monthlyType)}),Be(()=>(w(),Ue),()=>{F(be,w().has(Ue.Bishopric))}),Be(()=>(J(l()),s()),()=>{F(a,!!l()?.id&&!!s()?.id&&l().meta_data?.submitted_by_user_id===s().id)}),Be(()=>(i(a),i(be)),()=>{F(t,i(a)&&!i(be))}),Be(()=>(i(t),J(l()),i(Pe)),()=>{const K=i(t)?l()?.id??null:null;K&&K!==i(Pe)?(F(Pe,K),F(Ee,[]),F(qe,!1),F(Re,!1),rt(),at(K),nt(K)):!K&&i(Pe)!==null&&(F(Pe,null),F(Ee,[]),F(qe,!1),F(Re,!1),rt())}),kt(),gt();var yn=Fi(),Kt=Ve(yn),bn=L(Kt);{var cr=K=>{var Y=xi();ae(K,Y)};he(bn,K=>{J(l()),i(o),ee(()=>l().recurrence_rule&&i(o))&&K(cr)})}var Gt=W(bn,2),Zt=L(Gt),dr=W(L(Zt),2);{var ur=K=>{var Y=Ei();pe(()=>Y.disabled=i(j)||i(q)),ke("click",Y,lr),ae(K,Y)};he(dr,K=>{i(o)&&K(ur)})}P(Zt);var fr=W(Zt,2);{let K=st(()=>i(j)||i(q));ma(fr,{get disabled(){return i(K)},get name(){return r()},get validationErrors(){return e()},get title(){return l().title},set title(Y){l(l().title=Y,!0)},get eventType(){return l().event_type},set eventType(Y){l(l().event_type=Y,!0)},get organization(){return l().organization},set organization(Y){l(l().organization=Y,!0)},get isPublic(){return l().is_public},set isPublic(Y){l(l().is_public=Y,!0)},get description(){return l().description},set description(Y){l(l().description=Y,!0)},$$legacy:!0})}P(Gt);var wn=W(Gt,2);{var vr=K=>{var Y=Ai(),we=Ve(Y);{let Ye=st(()=>i(j)||i(q));ba(we,{get disabled(){return i(Ye)},get name(){return r()},get validationErrors(){return e()},get dateInput(){return i(oe)},set dateInput(Fe){F(oe,Fe)},get startTimeInput(){return i(_e)},set startTimeInput(Fe){F(_e,Fe)},get endTimeInput(){return i(Ie)},set endTimeInput(Fe){F(Ie,Fe)},get isAllDay(){return l().is_all_day},set isAllDay(Fe){l(l().is_all_day=Fe,!0)},$$legacy:!0})}var Ae=W(we,2);{let Ye=st(()=>i(j)||i(q));Ia(Ae,{get disabled(){return i(Ye)},get name(){return r()},get validationErrors(){return e()},get isRecurring(){return i(U)},set isRecurring(Fe){F(U,Fe)},get recurrenceFrequency(){return i(X)},set recurrenceFrequency(Fe){F(X,Fe)},get recurrenceInterval(){return i(te)},set recurrenceInterval(Fe){F(te,Fe)},get recurringDays(){return i(ie)},set recurringDays(Fe){F(ie,Fe)},get recurrenceEndDate(){return i(ue)},set recurrenceEndDate(Fe){F(ue,Fe)},get monthlyType(){return i(Se)},set monthlyType(Fe){F(Se,Fe)},get dateInput(){return i(oe)},set dateInput(Fe){F(oe,Fe)},$$legacy:!0})}ae(K,Y)};he(wn,K=>{i(_)&&K(vr)})}var xn=W(wn,2);{let K=st(()=>i(j)||i(q));Ba(xn,{get attachments(){return i(De)},get uploadingFile(){return i(q)},get disabled(){return i(K)},$$events:{upload:bt,edit:Ft,remove:vt}})}var En=W(xn,2);{let K=st(()=>i(j)||i(q)),Y=st(()=>`${r()}-location`);Ra(En,{get disabled(){return i(K)},get name(){return i(Y)},get value(){return l().location},set value(we){l(l().location=we,!0)},$$legacy:!0})}var An=W(En,2);{var mr=K=>{var Y=ki(),we=W(Ve(Y),2);{var Ae=Ye=>{var Fe=Si(),It=Ve(Fe),Qe=L(It),_t=W(L(Qe),4),Sr=L(_t);{var kr=Tt=>{var Rt=Di(),In=L(Rt,!0);P(Rt),pe(()=>xe(In,(i(Ee),ee(()=>i(Ee).length)))),ae(Tt,Rt)};he(Sr,Tt=>{i(Ee),ee(()=>i(Ee).length>0)&&Tt(kr)})}Je(2),P(_t),P(Qe),P(It);var Ir=W(It,2);{let Tt=st(()=>(J(l()),ee(()=>l()?.title||"Event")));sa(Ir,{get id(){return Ne},subtitle:"Discussion with Bishopric",get title(){return i(Tt)},className:"submitter-chat-drawer-stacked",bodyClass:"overflow-hidden d-flex flex-column",children:(Rt,In)=>{{let Tr=st(()=>(s(),ee(()=>s()?.id??-1))),Rr=st(()=>i(j)||i(q));Zr(Rt,{get comments(){return i(Ee)},get currentUserId(){return i(Tr)},onSend:Vt,onDelete:it,get loading(){return i(Re)},fullHeight:!0,get disabled(){return i(Rr)}})}},$$slots:{default:!0}})}pe(()=>ze(Qe,"aria-controls",Ne)),ke("click",Qe,ft),ae(Ye,Fe)};he(we,Ye=>{i(t)&&Ye(Ae)})}ae(K,Y)};he(An,K=>{i(be)||K(mr)})}var Xt=W(An,2),Jt=L(Xt),hr=L(Jt);{var gr=K=>{var Y=Ii();pe(()=>Y.disabled=i(j)||i(q)),ke("click",Y,ir),ae(K,Y)};he(hr,K=>{(i(o)||i(Q))&&S()&&K(gr)})}P(Jt);var Dn=W(Jt,2),en=L(Dn),_r=W(en,2);{var pr=K=>{var Y=Ci(),we=L(Y);{var Ae=Qe=>{var _t=Ti();ae(Qe,_t)},Ye=Qe=>{var _t=Ri();ae(Qe,_t)};he(we,Qe=>{i(o)||i(Q)?Qe(Ae):Qe(Ye,!1)})}var Fe=W(we,2);{var It=Qe=>{var _t=Mi();ae(Qe,_t)};he(Fe,Qe=>{i(y)&&Qe(It)})}P(Y),pe(()=>Y.disabled=i(j)||i(q)),ke("click",Y,or),ae(K,Y)};he(_r,K=>{(i(o)||i(Q)||C())&&K(pr)})}P(Dn),P(Xt);var tn=W(Xt,2),Ut=L(tn),yr=L(Ut,!0);P(Ut);var nn=W(Ut,2);let Sn;var br=L(nn);Ln(br,{size:"xs"}),P(nn),P(tn);var wr=W(tn,2);{var xr=K=>{{let Y=st(()=>i(j)||i(q));Gr(K,{get disabled(){return i(Y)},get reloadEvents(){return x},get eventItem(){return l()},set eventItem(we){l(we)},$$legacy:!0})}};he(wr,K=>{i(be)&&K(xr)})}P(Kt);var kn=W(Kt,2);{var Er=K=>{Na(K,{get eventTitle(){return J(l()),ee(()=>l().title)},get occurrenceDate(){return i(Z)},callback:Y=>{F(le,Y),F(re,!1)}})};he(kn,K=>{i(re)&&i(Z)&&K(Er)})}var Ar=W(kn,2);{var Dr=K=>{qa(K,{get eventTitle(){return J(l()),ee(()=>l().title)},get occurrenceDate(){return i(Z)},callback:Y=>{F(se,Y),F(ce,!1)}})};he(Ar,K=>{i(ce)&&i(Z)&&K(Dr)})}pe(()=>{en.disabled=i(j)||i(q),et(Ut,1,`fw-lighter fst-italic text-${i(ge),ee(()=>i(ge).type)??""}`,"svelte-1ujj5ue"),xe(yr,(i(ge),ee(()=>i(ge).message))),Sn=et(nn,1,"",null,Sn,{"d-none":!i(j)})}),ke("click",en,Ze),ae(g,yn),ut(),d()}const On={SRS:[Ue.Stake],SEQ:[Ue.Stake],SYO:[Ue.Stake],SYW:[Ue.Stake],SYM:[Ue.Stake],SPR:[Ue.Stake],SSS:[Ue.Stake],SYA:[Ue.Stake],RES:[Ue.ReliefSociety],ELQ:[Ue.EldersQuorum],YOU:[Ue.YoungWomen,Ue.YoungMen],YOW:[Ue.YoungWomen],YWP:[Ue.YoungWomen],YWR:[Ue.YoungWomen],YWD:[Ue.YoungWomen],YOM:[Ue.YoungMen],YMD:[Ue.YoungMen],YMT:[Ue.YoungMen],YMP:[Ue.YoungMen],PRI:[Ue.Primary],PRN:[Ue.Primary],PRS:[Ue.Primary],PRC:[Ue.Primary],PRV:[Ue.Primary],SUS:[Ue.SundaySchool],YSA:[Ue.Stake]},Ui=g=>{const m=new Set,w=g.meta_data?.submitted_by_organizations;if(w?.length)return w.forEach(e=>m.add(e)),m;const s=g.meta_data?.organization;return s&&On[s]&&On[s].forEach(e=>m.add(e)),m},ks=(g,m)=>{if(!g)return!1;const{currentUserId:w,isPrivileged:s,canEditOwnOrgEvents:e,userOrganizations:n}=m;if(s)return!0;const d=g.meta_data?.submitted_by_user_id;if(w&&typeof d=="number"&&d===w)return!0;if(!e)return!1;const o=Ui(g);if(!o.size)return!1;for(const _ of o)if(n.has(_))return!0;return!1};var Oi=ve('<div style="min-width: 85px !important;"><strong> </strong> <div><small class="d-block"> </small></div></div>'),zi=ve('<span class="d-block text-uppercase small fw-semibold svelte-lx28z">All Day</span>'),Pi=ve('<span class="d-block small svelte-lx28z"> </span>'),Bi=ve('<span class="text-muted"></span>'),Li=ve("<span> </span> <!>",1),Ni=ve('<span class="text-muted"></span>'),Hi=ve('<span class="text-muted small svelte-lx28z"><i class="bi bi-arrow-repeat"></i> </span> <!>',1),qi=ve('<span class="text-muted"></span>'),Wi=ve('<span class="text-muted small svelte-lx28z"><i class="bi bi-arrow-repeat"></i> Recurring event</span> <!>',1),Yi=ve('<span class="text-muted"></span>'),ji=ve('<em class="small fw-lighter svelte-lx28z"><!></em> <!>',1),$i=ve('<em class="small fw-lighter text-decoration-underline svelte-lx28z"><!> details</em>'),Qi=ve('<div class="small svelte-lx28z"><!></div>'),Vi=ve('<div class="attachment-image-container svelte-lx28z"><button type="button" class="attachment-image-button svelte-lx28z"><img class="attachment-image svelte-lx28z"/></button> <div class="attachment-image-label svelte-lx28z"><small class="text-muted"> </small></div></div>'),Ki=ve('<button type="button" class="btn btn-sm btn-primary d-flex align-items-center gap-2"><i class="bi bi-file-pdf"></i> <span class="text-truncate" style="max-width: 150px;"> </span> <small class="text-muted"> </small></button>'),Gi=ve('<div class="mt-1 svelte-lx28z"><div class="fw-semibold small mb-1 svelte-lx28z">Attachments:</div> <div class="d-flex flex-wrap gap-2"></div></div>'),Zi=ve('<div class="small text-muted posted-meta svelte-lx28z">Posted <!> <!></div>'),Xi=ve('<div class="small text-muted posted-meta svelte-lx28z">Last edited <!> <!></div>'),Ji=ve('<div class="details-container svelte-lx28z"><!> <!> <!> <!></div>'),es=ve('<div class="event-thumbnail-container svelte-lx28z"><img class="event-thumbnail svelte-lx28z"/></div>'),ts=ve('<div role="button" tabindex="0"><!> <div class="d-flex gap-1"><div class="d-flex flex-column flex-grow-1 gap-1 svelte-lx28z"><div class="fw-bold svelte-lx28z"><!></div> <!> <div class="flex d-flex align-items-center flex-wrap gap-2"><!> <!> <!> <!></div> <!></div> <!></div></div>');function Is(g,m){dt(m,!1);const w=de(),s=de(),e=de(),n=de(),d=de(),o=de(),_=de(),y=de(),a=de();let t=me(m,"item",8),r=me(m,"showDetails",12,!1),c=me(m,"showDate",8,!0),l=me(m,"searchQuery",8,"");const S=Q=>{if(!Q)return"";const Z=Ot(Q),V=yt(Z,Ge);return He(V,"h:mm aa")},C=Q=>{if(!Q)return"";const Z=Ot(Q),V=yt(Z,Ge);return He(V,"EEE")},x=Q=>{if(!Q)return"";const Z=Ot(Q),V=yt(Z,Ge);return He(V,"MMM, dd")},B=()=>{i(s)&&r(!r())},O=Q=>{i(s)&&(Q.key==="Enter"||Q.key===" ")&&B()},R=Q=>Q<1024?Q+" B":Q<1024*1024?(Q/1024).toFixed(1)+" KB":(Q/(1024*1024)).toFixed(1)+" MB",z=Q=>Q.startsWith("image/"),p=Q=>{window.open(Q,"_blank")},T=Q=>{if(!Q)return"";try{return He(Ot(Q),"MMM d, yyyy 'at' h:mm a")}catch{return""}},f=Q=>{try{const V=Oe.fromString(Q).origOptions,re=V.interval||1,le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ce=["","1st","2nd","3rd","4th","5th"];if(V.freq===Oe.DAILY)return re===1?"Repeats daily":`Repeats every ${re} days`;if(V.freq===Oe.WEEKLY){if(V.byweekday){const ne=(Array.isArray(V.byweekday)?V.byweekday:[V.byweekday]).map(fe=>{const ge=typeof fe=="number"?fe:fe.weekday,oe=ge===6?0:ge+1;return le[oe]});return re===1?ne.length===1?`Repeats every ${ne[0]}`:`Repeats on ${ne.join(", ")}`:`Repeats every ${re} weeks on ${ne.join(", ")}`}return re===1?"Repeats weekly":`Repeats every ${re} weeks`}if(V.freq===Oe.MONTHLY){if(V.byweekday){const ne=(Array.isArray(V.byweekday)?V.byweekday:[V.byweekday])[0];if(ne&&typeof ne=="object"&&"n"in ne&&"weekday"in ne){const fe=ne.weekday,ge=fe===6?0:fe+1,oe=ne.n,_e=ce[oe]||`${oe}th`;return re===1?`Repeats on the ${_e} ${le[ge]} of the month`:`Repeats on the ${_e} ${le[ge]} every ${re} months`}}if(V.bymonthday){const se=Array.isArray(V.bymonthday)?V.bymonthday[0]:V.bymonthday,ne=se===1?"st":se===2?"nd":se===3?"rd":"th";return re===1?`Repeats on the ${se}${ne} of the month`:`Repeats on the ${se}${ne} every ${re} months`}return re===1?"Repeats monthly":`Repeats every ${re} months`}if(V.freq===Oe.YEARLY){if(V.bymonth&&V.bymonthday){const se=["","January","February","March","April","May","June","July","August","September","October","November","December"],ne=Array.isArray(V.bymonth)?V.bymonth[0]:V.bymonth,fe=Array.isArray(V.bymonthday)?V.bymonthday[0]:V.bymonthday,ge=fe===1?"st":fe===2?"nd":fe===3?"rd":"th";return re===1?`Repeats every ${se[ne]} ${fe}${ge}`:`Repeats every ${re} years on ${se[ne]} ${fe}${ge}`}return re===1?"Repeats yearly":`Repeats every ${re} years`}return"Repeats"}catch{return"Repeats"}};let v=de("");Be(()=>J(c()),()=>{F(v,c()?"d-flex flex-sm-column flex-md-row flex-lg-row flex-xl-row gap-1":"d-flex flex-column gap-1")}),Be(()=>J(t()),()=>{F(w,t().attachments?.find(Q=>z(Q.type)))}),Be(()=>J(t()),()=>{F(s,!!(t().description||t().attachments&&t().attachments.length>0))}),Be(()=>J(t()),()=>{F(e,t().meta_data?.submitted_at??t().created_at)}),Be(()=>i(e),()=>{F(n,T(i(e)))}),Be(()=>J(t()),()=>{F(d,t().meta_data?.submitted_by_name)}),Be(()=>(i(n),i(d)),()=>{F(o,!!(i(n)||i(d)))}),Be(()=>J(t()),()=>{F(_,T(t().meta_data?.edited_at))}),Be(()=>J(t()),()=>{F(y,t().meta_data?.edited_by_name)}),Be(()=>(i(_),i(y)),()=>{F(a,!!(i(_)||i(y)))}),kt(),gt();var b=ts(),A=L(b);{var D=Q=>{var Z=Oi(),V=L(Z),re=L(V,!0);P(V);var le=W(V,2),ce=L(le),se=L(ce,!0);P(ce),P(le),P(Z),pe((ne,fe)=>{xe(re,ne),xe(se,fe)},[()=>(J(t()),ee(()=>C(t().start_time))),()=>(J(t()),ee(()=>x(t().start_time)))]),ae(Q,Z)};he(A,Q=>{c()&&Q(D)})}var k=W(A,2),E=L(k),M=L(E),h=L(M);cn(h,()=>(J(zt),J(t()),J(l()),ee(()=>zt(t().title||"",l())))),P(M);var u=W(M,2);{var N=Q=>{var Z=zi();ae(Q,Z)},I=Q=>{var Z=Pi(),V=L(Z);P(Z),pe((re,le)=>xe(V,`${re??""} to ${le??""}`),[()=>(J(t()),ee(()=>S(t().start_time))),()=>(J(t()),ee(()=>S(t().end_time)))]),ae(Q,Z)};he(u,Q=>{J(t()),ee(()=>t().is_all_day)?Q(N):Q(I,!1)})}var H=W(u,2),G=L(H);{var $=Q=>{var Z=Li(),V=Ve(Z),re=L(V,!0);P(V);var le=W(V,2);{var ce=se=>{var ne=Bi();ae(se,ne)};he(le,se=>{J(t()),ee(()=>t().recurrence_rule||t()?.meta_data?.recurring_instance||t().location||t().description||t().attachments&&t().attachments.length>0)&&se(ce)})}pe((se,ne)=>{et(V,1,`badge rounded-pill bg-color-${se??""}`,"svelte-lx28z"),xe(re,ne)},[()=>(J(Mt),J(t()),ee(()=>Mt(t()?.meta_data?.organization)?.color_number)),()=>(J(Mt),J(t()),ee(()=>Mt(t()?.meta_data?.organization)?.label))]),ae(Q,Z)};he(G,Q=>{J(t()),ee(()=>t()?.meta_data?.organization)&&Q($)})}var j=W(G,2);{var q=Q=>{var Z=Hi(),V=Ve(Z),re=W(L(V));P(V);var le=W(V,2);{var ce=se=>{var ne=Ni();ae(se,ne)};he(le,se=>{J(t()),ee(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&se(ce)})}pe(se=>xe(re,` ${se??""}`),[()=>(J(t()),ee(()=>f(t().recurrence_rule)))]),ae(Q,Z)},U=Q=>{var Z=sn(),V=Ve(Z);{var re=le=>{var ce=Wi(),se=W(Ve(ce),2);{var ne=fe=>{var ge=qi();ae(fe,ge)};he(se,fe=>{J(t()),ee(()=>t().location||t().description||t().attachments&&t().attachments.length>0)&&fe(ne)})}ae(le,ce)};he(V,le=>{J(t()),ee(()=>t()?.meta_data?.recurring_instance)&&le(re)},!0)}ae(Q,Z)};he(j,Q=>{J(t()),ee(()=>t().recurrence_rule)?Q(q):Q(U,!1)})}var X=W(j,2);{var te=Q=>{var Z=ji(),V=Ve(Z),re=L(V);cn(re,()=>(J(zt),J(t()),J(l()),ee(()=>zt(t().location,l())))),P(V);var le=W(V,2);{var ce=se=>{var ne=Yi();ae(se,ne)};he(le,se=>{J(t()),ee(()=>t().description||t().attachments&&t().attachments.length>0)&&se(ce)})}ae(Q,Z)};he(X,Q=>{J(t()),ee(()=>t().location)&&Q(te)})}var ie=W(X,2);{var ue=Q=>{var Z=$i(),V=L(Z);{var re=ce=>{var se=wt("Hide");ae(ce,se)},le=ce=>{var se=wt("Show");ae(ce,se)};he(V,ce=>{r()?ce(re):ce(le,!1)})}Je(),P(Z),ae(Q,Z)};he(ie,Q=>{J(t()),ee(()=>t().description||t().attachments&&t().attachments.length>0)&&Q(ue)})}P(H);var ye=W(H,2);{var Se=Q=>{var Z=Ji(),V=L(Z);{var re=oe=>{var _e=Qi(),Ie=L(_e);cn(Ie,()=>(J(Tn),J(t()),J(l()),ee(()=>Tn(t().description,l())))),P(_e),ae(oe,_e)};he(V,oe=>{J(t()),ee(()=>t().description)&&oe(re)})}var le=W(V,2);{var ce=oe=>{var _e=Gi(),Ie=W(L(_e),2);$t(Ie,5,()=>(J(t()),ee(()=>t().attachments)),Le=>Le.id,(Le,be)=>{var je=sn(),Ee=Ve(je);{var Re=Ne=>{var Pe=Vi(),Me=L(Pe),We=L(Me);P(Me);var ft=W(Me,2),nt=L(ft),rt=L(nt,!0);P(nt),P(ft),P(Pe),pe(()=>{ze(Me,"title",`Open ${i(be),ee(()=>i(be).name)??""}`),ze(We,"src",(i(be),ee(()=>i(be).url))),ze(We,"alt",(i(be),ee(()=>i(be).name))),xe(rt,(i(be),ee(()=>i(be).name)))}),ke("click",Me,Mn(()=>p(i(be).url))),ae(Ne,Pe)},qe=Ne=>{var Pe=Ki(),Me=W(L(Pe),2),We=L(Me,!0);P(Me);var ft=W(Me,2),nt=L(ft);P(ft),P(Pe),pe(rt=>{ze(Pe,"title",`Open ${i(be),ee(()=>i(be).name)??""}`),xe(We,(i(be),ee(()=>i(be).name))),xe(nt,`(${rt??""})`)},[()=>(i(be),ee(()=>R(i(be).size)))]),ke("click",Pe,Mn(()=>p(i(be).url))),ae(Ne,Pe)};he(Ee,Ne=>{i(be),ee(()=>z(i(be).type))?Ne(Re):Ne(qe,!1)})}ae(Le,je)}),P(Ie),P(_e),ae(oe,_e)};he(le,oe=>{J(t()),ee(()=>t().attachments&&t().attachments.length>0)&&oe(ce)})}var se=W(le,2);{var ne=oe=>{var _e=Zi(),Ie=W(L(_e));{var Le=Ee=>{var Re=wt();pe(()=>xe(Re,i(n))),ae(Ee,Re)};he(Ie,Ee=>{i(n)&&Ee(Le)})}var be=W(Ie,2);{var je=Ee=>{var Re=sn(),qe=Ve(Re);{var Ne=Me=>{var We=wt();pe(()=>xe(We,`by ${i(d)??""}`)),ae(Me,We)},Pe=Me=>{var We=wt();pe(()=>xe(We,`by ${i(d)??""}`)),ae(Me,We)};he(qe,Me=>{i(n)?Me(Ne):Me(Pe,!1)})}ae(Ee,Re)};he(be,Ee=>{i(d)&&Ee(je)})}P(_e),ae(oe,_e)};he(se,oe=>{i(o)&&oe(ne)})}var fe=W(se,2);{var ge=oe=>{var _e=Xi(),Ie=W(L(_e));{var Le=Ee=>{var Re=wt();pe(()=>xe(Re,i(_))),ae(Ee,Re)};he(Ie,Ee=>{i(_)&&Ee(Le)})}var be=W(Ie,2);{var je=Ee=>{var Re=wt();pe(()=>xe(Re,`by ${i(y)??""}`)),ae(Ee,Re)};he(be,Ee=>{i(y)&&Ee(je)})}P(_e),ae(oe,_e)};he(fe,oe=>{i(a)&&oe(ge)})}P(Z),ae(Q,Z)};he(ye,Q=>{r()&&Q(Se)})}P(E);var De=W(E,2);{var Te=Q=>{var Z=es(),V=L(Z);P(Z),pe(()=>{ze(V,"src",(i(w),ee(()=>i(w).url))),ze(V,"alt",(i(w),ee(()=>i(w).name)))}),ae(Q,Z)};he(De,Q=>{i(w)&&Q(Te)})}P(k),P(b),pe(()=>{et(b,1,Wr(i(v)),"svelte-lx28z"),Lr(b,i(s)?"cursor: pointer;":"")}),ke("keydown",b,O),ke("click",b,B),ae(g,b),ut()}export{Ss as C,Is as E,ks as c};
