import"./NZTpNUN0.js";import"./69_IOA4Y.js";import{p as ge,t as Z,a as fe,s,c as a,r as t,ay as V,a8 as C,g as e,U as Y,az as Ee,u as O,i as ta,aF as Qe,f as oe,E as B,aB as Ge,aC as Fe,I as Pt,aa as et}from"./D6GkHfO-.js";import{s as x,i as H,e as Te}from"./DYmw-k_K.js";import{f as P,a as p,t as Ze,c as he}from"./D8wZRsgK.js";import{s as de,r as Mt,b as aa,d as ut}from"./BzM8VPE5.js";import{i as pe}from"./XlJfi8GN.js";import{W as ye,S as Se,b as Je,t as xe,x as ra,y as na,z as sa,l as At,A as Nt,B as _t,f as ce,c as Re,C as oa,D as ia}from"./vFKQls-f.js";import{w as We,g as Bt,d as be,o as vt,a as la}from"./B8gJkoMb.js";import{e as Me,i as Be}from"./COMoFu8N.js";import{b as ca}from"./RVChvXYJ.js";import{p as ee,u as Ft,s as ze,b as Wt,a as we}from"./C8uFvBRH.js";import{v as St,D as Tt}from"./-fuaGe5u.js";import{b as Jt,a as da}from"./6wL3GoW6.js";import{g as ua}from"./D8sP8cjM.js";import{e as va,p as _e}from"./B7fABcZ1.js";import{S as zt}from"./iFrONd-z.js";import{b as ma}from"./CUNSJrQ4.js";var _a=P('<div class="card"><div class="card-header">Ward Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Chapel Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small">Hours</li> <li class="list-group-item"><span class="d-block fw-lighter"><strong>Sacrament</strong> </span> <span class="d-block fw-lighter"><strong>2nd Hour</strong> </span></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function Nn(o,n){ge(n,!1),pe();var r=_a(),d=s(a(r),2),u=s(a(d),2),_=a(u),m=a(_),g=s(m,2),$=s(g,2);t(_),t(u);var S=s(u,4),b=a(S),f=s(a(b));t(b);var c=s(b,2),M=s(a(c));t(c),t(S);var v=s(S,2),T=a(v);t(v);var w=s(v,2),E=a(w),D=s(E),k=a(D,!0);t(D),t(w);var i=s(w,2),l=a(i);t(i);var I=s(i,2),h=a(I),y=s(h),R=a(y,!0);t(y),t(I),t(d),t(r),Z((U,j)=>{de(_,"href",ye.chapel.mapLink),x(m,`${ye.chapel.address.street??""}, ${ye.chapel.address.city??""}`),x(g,` ${ye.chapel.address.state??""}
				${ye.chapel.address.zip??""}`),x($,` ${ye.chapel.address.country??""}`),x(f,`:
				${ye.meetingTimes.sacrament.start??""} to
				${ye.meetingTimes.sacrament.end??""}`),x(M,`:
				${ye.meetingTimes.secondHour.start??""} to
				${ye.meetingTimes.secondHour.end??""}`),x(T,`${ye.contacts.executiveSecretary.purpose??""}:`),x(E,`${ye.contacts.executiveSecretary.name??""} | `),de(D,"href",`sms:${U??""}`),x(k,ye.contacts.executiveSecretary.phone),x(l,`${ye.contacts.bishop.purpose??""}:`),x(h,`${ye.contacts.bishop.name??""} | `),de(y,"href",`sms:${j??""}`),x(R,ye.contacts.bishop.phone)},[()=>ye.contacts.executiveSecretary.phone.replace(/-/g,""),()=>ye.contacts.bishop.phone.replace(/-/g,"")]),p(o,r),fe()}var ga=P('<div class="card"><div class="card-header">Stake Information</div> <ul class="list-group list-group-flush"><li class="list-group-item text-uppercase fw-lighter fs-x-small">Address</li> <li class="list-group-item"><a target="_blank"> <br/> <br/> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li> <li class="list-group-item text-uppercase fw-lighter fs-x-small"> </li> <li class="list-group-item"> <a target="_blank"> </a></li></ul></div>');function Fn(o,n){ge(n,!1),pe();var r=ga(),d=s(a(r),2),u=s(a(d),2),_=a(u),m=a(_),g=s(m,2),$=s(g,2);t(_),t(u);var S=s(u,2),b=a(S);t(S);var f=s(S,2),c=a(f),M=s(c),v=a(M,!0);t(M),t(f);var T=s(f,2),w=a(T);t(T);var E=s(T,2),D=a(E),k=s(D),i=a(k,!0);t(k),t(E),t(d),t(r),Z((l,I)=>{de(_,"href",Se.building.mapLink),x(m,`${Se.building.address.street},`),x(g,` ${Se.building.address.city}, ${Se.building.address.state}
				${Se.building.address.zip}`),x($,` ${Se.building.address.country}`),x(b,`${Se.contacts.templeRecommend.purpose}:`),x(c,`${Se.contacts.templeRecommend.name} | `),de(M,"href",`sms:${l??""}`),x(v,Se.contacts.templeRecommend.phone),x(w,`${Se.contacts.president.purpose}:`),x(D,`${Se.contacts.president.name} | `),de(k,"href",`sms:${I??""}`),x(i,Se.contacts.president.phone)},[()=>Se.contacts.templeRecommend.phone.replace(/-/g,""),()=>Se.contacts.president.phone.replace(/-/g,"")]),p(o,r),fe()}var fa=P('<div class="card"><div class="card-header"> </div> <div class="card-body"><figure class="text-center"><blockquote class="blockquote"><p> </p></blockquote> <figcaption class="blockquote-footer"><cite title="Source Title"> </cite></figcaption></figure></div></div>');function Wn(o,n){ge(n,!1),pe();var r=fa(),d=a(r),u=a(d);t(d);var _=s(d,2),m=a(_),g=a(m),$=a(g),S=a($,!0);t($),t(g);var b=s(g,2),f=a(b),c=a(f,!0);t(f),t(b),t(m),t(_),t(r),Z(()=>{x(u,`Ward Theme ${ye.theme.year??""}`),x(S,ye.theme.scripture.text),x(c,ye.theme.scripture.reference)}),p(o,r),fe()}var pa=P('<small class="fw-lighter text-muted"> </small>'),ya=P('<div class="d-flex flex-row gap-3 justify-content-between align-items-end"><div><span> </span> <!></div> <div class="d-flex flex-row gap-3 align-items-center"><button class="btn btn-sm btn-primary" aria-label="Decrement count"><i class="bi bi-dash"></i></button> <div class="count-container d-flex justify-content-end svelte-2jbj3e"> </div> <button class="btn btn-sm btn-primary" aria-label="Increment count"><i class="bi bi-plus"></i></button></div></div>');function ot(o,n){let r=ee(n,"count",12,0),d=ee(n,"label",8,"Count"),u=ee(n,"description",8,"");const _=()=>{Ft(r)},m=()=>{r()<=0||Ft(r,-1)};var g=ya(),$=a(g),S=a($),b=a(S,!0);t(S);var f=s(S,2);{var c=D=>{var k=pa(),i=a(k,!0);t(k),Z(()=>x(i,u())),p(D,k)};H(f,D=>{u()&&D(c)})}t($);var M=s($,2),v=a(M),T=s(v,2),w=a(T,!0);t(T);var E=s(T,2);t(M),t(g),Z(()=>{x(b,d()),x(w,r())}),Te("click",v,m),Te("click",E,_),p(o,g)}const Yt=We([]);let gt=!1;async function bt(){if(gt)return Bt(Yt);gt=!0;try{const{data:o,error:n}=await Je.from("temple_challenge_entries").select("*");if(n)throw console.error("[API] Get temple entries failed:",n),new Error(`Failed to load entries: ${n.message}`);const r=o||[];return Yt.set(r),setTimeout(()=>gt=!1,800),r}catch(o){throw gt=!1,console.error("[API] Unexpected error fetching temple entries:",o),o}}async function ba(o){try{const{data:n,error:r}=await Je.from("temple_challenge_entries").insert([o]).select();if(r)throw console.error("[API] Create temple entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await bt(),console.log("[API] Temple entry created successfully"),n?n[0]:void 0}catch(n){throw console.error("[API] Unexpected error creating temple entry:",n),n}}async function ha(o,n){const{data:r,error:d}=await Je.from("temple_challenge_entries").update(n).eq("id",o).select();if(d)throw d;return await bt(),r?r[0]:void 0}async function wa(o){const{error:n}=await Je.from("temple_challenge_entries").delete().eq("id",o);if(n)throw n;await bt()}function xa(o,n,r){return o.filter(d=>d.date>=n&&d.date<=r)}function ka(o){return o.reduce((n,r)=>n+(r.baptism_ordinances_count??0)+(r.confirmation_ordinances_count??0)+(r.initiatory_ordinances_count??0)+(r.endowment_ordinances_count??0)+(r.sealing_ordinances_count??0),0)}function $a(o){return o.reduce((n,r)=>n+(r.prepared_names_count??0),0)}let ct=null;const Da=()=>{const o=We(!1),n=We(!1),r=We([]),d=be([r],([w])=>{const E=w.reduce((k,i)=>{const l=new Date(i.date),I=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;return(k[I]||=[]).push(i),k},{}),D=Object.entries(E).sort(([k],[i])=>new Date(i).getTime()-new Date(k).getTime()).map(([k,i])=>[k,i.sort((l,I)=>new Date(I.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(D)}),u=be([r],([w])=>{const E=w.reduce((k,i)=>((k[i.date]||=[]).push(i),k),{}),D=Object.entries(E).sort(([k],[i])=>new Date(i).getTime()-new Date(k).getTime()).map(([k,i])=>[k,i.sort((l,I)=>new Date(I.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(D)}),_=be([r],([w])=>{const E=w.reduce((k,i)=>{const I=`${new Date(i.date).getFullYear()}`;return(k[I]||=[]).push(i),k},{}),D=Object.entries(E).sort(([k],[i])=>parseInt(i)-parseInt(k)).map(([k,i])=>[k,i.sort((l,I)=>new Date(I.created_at??"").getTime()-new Date(l.created_at??"").getTime())]);return Object.fromEntries(D)}),m=be(r,w=>w.reduce((E,D)=>({baptism_ordinances_count:E.baptism_ordinances_count+(D.baptism_ordinances_count??0),confirmation_ordinances_count:E.confirmation_ordinances_count+(D.confirmation_ordinances_count??0),initiatory_ordinances_count:E.initiatory_ordinances_count+(D.initiatory_ordinances_count??0),endowment_ordinances_count:E.endowment_ordinances_count+(D.endowment_ordinances_count??0),sealing_ordinances_count:E.sealing_ordinances_count+(D.sealing_ordinances_count??0)}),{baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0})),g=be(u,w=>{const E={};for(const[D,k]of Object.entries(w))E[D]=k.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:D,created_at:i.created_at||l.created_at}),{});return E}),$=be(d,w=>{const E={};for(const[D,k]of Object.entries(w))E[D]=k.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:i.date||l.date,created_at:i.created_at||l.created_at}),{});return E}),S=be(_,w=>{const E={};for(const[D,k]of Object.entries(w))E[D]=k.reduce((i,l)=>({...i,entry_type:i.entry_type,prepared_names_count:(i.prepared_names_count??0)+(l.prepared_names_count??0),baptism_ordinances_count:(i.baptism_ordinances_count??0)+(l.baptism_ordinances_count??0),confirmation_ordinances_count:(i.confirmation_ordinances_count??0)+(l.confirmation_ordinances_count??0),initiatory_ordinances_count:(i.initiatory_ordinances_count??0)+(l.initiatory_ordinances_count??0),endowment_ordinances_count:(i.endowment_ordinances_count??0)+(l.endowment_ordinances_count??0),sealing_ordinances_count:(i.sealing_ordinances_count??0)+(l.sealing_ordinances_count??0),date:i.date||l.date,created_at:i.created_at||l.created_at}),{});return E}),b=be(r,w=>w.reduce((E,D)=>E+(D.baptism_ordinances_count??0)+(D.confirmation_ordinances_count??0)+(D.initiatory_ordinances_count??0)+(D.endowment_ordinances_count??0)+(D.sealing_ordinances_count??0),0)),f=be(r,w=>w.reduce((E,D)=>E+(D.prepared_names_count??0),0));return ct={stores:{ready:o,loading:n,data:r,groupedByDate:u,groupedByMonth:d,groupedByYear:_,detailTotals:m,detailTotalsByDay:g,detailTotalsByMonth:$,detailTotalsByYear:S,totalOrdinancesPerformed:b,totalNamesPrepared:f},actions:{reload:async()=>{const w=await bt();w?.length&&r.set(w)},apiCreate:async w=>{await ba(w)},apiUpdate:async(w,E)=>{await ha(w,E)},apiDelete:async w=>{await wa(w)}}},ct},ht=()=>ct?.stores&&Object.keys(ct.stores).length>0?ct:Da();function Yn(o){return xe(o).getDay()===0}function yt(o,n){const r=xe(o),d=xe(n),u=r.getTime()-d.getTime();return u<0?-1:u>0?1:u}function Ma(o){return ra(o,Date.now())}function Sa(o,n){const r=xe(o),d=xe(n),u=r.getFullYear()-d.getFullYear(),_=r.getMonth()-d.getMonth();return u*12+_}function Ta(o){return n=>{const d=(o?Math[o]:Math.trunc)(n);return d===0?0:d}}function Ba(o,n){return+xe(o)-+xe(n)}function Ea(o){const n=xe(o);return n.setHours(23,59,59,999),n}function Ca(o){const n=xe(o),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Oa(o){const n=xe(o);return+Ea(n)==+Ca(n)}function Ia(o,n){const r=xe(o),d=xe(n),u=yt(r,d),_=Math.abs(Sa(r,d));let m;if(_<1)m=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-u*_);let g=yt(r,d)===-u;Oa(xe(o))&&_===1&&yt(o,d)===1&&(g=!1),m=u*(_-Number(g))}return m===0?0:m}function Ra(o,n,r){const d=Ba(o,n)/1e3;return Ta(r?.roundingMethod)(d)}function ja(o){return va(o,{weekStartsOn:1})}function Pa(o,n,r){const d=na(),u=r?.locale??d.locale??sa,_=2520,m=yt(o,n);if(isNaN(m))throw new RangeError("Invalid time value");const g=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:m});let $,S;m>0?($=xe(n),S=xe(o)):($=xe(o),S=xe(n));const b=Ra(S,$),f=(At(S)-At($))/1e3,c=Math.round((b-f)/60);let M;if(c<2)return r?.includeSeconds?b<5?u.formatDistance("lessThanXSeconds",5,g):b<10?u.formatDistance("lessThanXSeconds",10,g):b<20?u.formatDistance("lessThanXSeconds",20,g):b<40?u.formatDistance("halfAMinute",0,g):b<60?u.formatDistance("lessThanXMinutes",1,g):u.formatDistance("xMinutes",1,g):c===0?u.formatDistance("lessThanXMinutes",1,g):u.formatDistance("xMinutes",c,g);if(c<45)return u.formatDistance("xMinutes",c,g);if(c<90)return u.formatDistance("aboutXHours",1,g);if(c<Nt){const v=Math.round(c/60);return u.formatDistance("aboutXHours",v,g)}else{if(c<_)return u.formatDistance("xDays",1,g);if(c<_t){const v=Math.round(c/Nt);return u.formatDistance("xDays",v,g)}else if(c<_t*2)return M=Math.round(c/_t),u.formatDistance("aboutXMonths",M,g)}if(M=Ia(S,$),M<12){const v=Math.round(c/_t);return u.formatDistance("xMonths",v,g)}else{const v=M%12,T=Math.trunc(M/12);return v<3?u.formatDistance("aboutXYears",T,g):v<9?u.formatDistance("overXYears",T,g):u.formatDistance("almostXYears",T+1,g)}}function qt(o,n){return Pa(o,Ma(o),n)}function Aa(o){return xe(o).getFullYear()}var Na=P('<button class="btn btn-primary"><i class="bi bi-arrow-clockwise"></i> Try Again</button>'),Fa=P('<div class="alert alert-warning alert-dismissible" role="alert"><div class="d-flex align-items-start gap-3"><i class="bi bi-exclamation-triangle-fill fs-4"></i> <div class="flex-grow-1"><h5 class="alert-heading mb-2"><!></h5> <p class="mb-3"> </p> <div class="d-flex gap-2"><!> <button><i class="bi bi-arrow-clockwise"></i> Reload App</button></div></div> <button type="button" class="btn-close" aria-label="Close"></button></div></div>'),Wa=P("<option> </option>"),Ya=P('<div class="d-flex flex-column gap-3"><!> <div class="d-flex flex-column gap-2">Log your temple activity here.</div> <div class="d-flex flex-column gap-2"><div>Date</div> <small class="fw-lighter text-muted"><!></small> <input type="date" class="form-control" id="endDate" required/></div> <div class="d-flex flex-column gap-2"><div>Activity Type</div> <small class="fw-lighter text-muted">What kind of temple activity was this?</small> <select class="form-select form-control-sm"></select></div> <!> <!> <!> <!> <!> <!> <div class="d-flex justify-content-between border-1 border-top pt-3 mt-4"><span class="fw-bolder">Total:</span> <span class="fw-bolder" style="margin-right: 47px"> </span></div> <div class="d-flex justify-content-between"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary">Submit</button></div></div>');function qa(o,n){ge(n,!1);const[r,d]=ze(),u=Y();let _=ee(n,"drawerId",8,""),m=ee(n,"minDate",8,null),g=ee(n,"maxDate",8,null);const{stores:{loading:$},actions:{apiCreate:S,reload:b}}=ht(),f=["Personal","Family","Ward - Youth Temple Baptism","Ward - Temple Activity","Stake - Tuesday Temple Night"];function c(){const A=ce(new Date,"yyyy-MM-dd");return!m()||!g()||A>=m()&&A<=g()?A:A<m()?m():g()}const M={prepared_names_count:0,baptism_ordinances_count:0,confirmation_ordinances_count:0,initiatory_ordinances_count:0,endowment_ordinances_count:0,sealing_ordinances_count:0,entry_type:"Personal",date:c(),approved:!0};let v=Y({...M}),T=Y({message:"",type:null});const w=()=>{C(v,{...M,date:c()}),C(T,{message:"",type:null});const A=`[data-bs-target="#${_()}"]`,ne=document.querySelector(A);ne&&ne.click()},E=()=>{window.location.reload()},D=()=>{i()},k=()=>{C(T,{message:"",type:null})},i=async()=>{try{Wt($,!0),C(T,{message:"",type:null}),await S({prepared_names_count:e(v).prepared_names_count,baptism_ordinances_count:e(v).baptism_ordinances_count,confirmation_ordinances_count:e(v).confirmation_ordinances_count,initiatory_ordinances_count:e(v).initiatory_ordinances_count,endowment_ordinances_count:e(v).endowment_ordinances_count,sealing_ordinances_count:e(v).sealing_ordinances_count,entry_type:e(v).entry_type,date:e(v).date,created_at:new Date().toISOString(),approved:!0}),await b(),w()}catch(A){console.error("[WardGoalEntryForm] Submission failed:",A),A instanceof Error?A.message.includes("expired")||A.message.includes("JWT")?C(T,{type:"expired",message:"Your session has encountered a problem. Click the button below to refresh the app and try again."}):A.message.includes("fetch")||A.message.includes("network")?C(T,{type:"network",message:"Unable to save your entry. Please check your internet connection."}):C(T,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."}):C(T,{type:"general",message:"We couldn't save your entry. Try reloading the app to fix the issue."})}finally{Wt($,!1)}};V(()=>e(v),()=>{C(u,e(v).prepared_names_count+e(v).baptism_ordinances_count+e(v).confirmation_ordinances_count+e(v).initiatory_ordinances_count+e(v).endowment_ordinances_count+e(v).sealing_ordinances_count)}),Ee(),pe();var l=Ya(),I=a(l);{var h=A=>{var ne=Fa(),ve=a(ne),ke=s(a(ve),2),$e=a(ke),je=a($e);{var Ye=se=>{var De=Ze("⚠️ Session Issue");p(se,De)},tt=se=>{var De=he(),Ae=oe(De);{var qe=Ne=>{var Le=Ze("⚠️ Connection Problem");p(Ne,Le)},st=Ne=>{var Le=Ze("⚠️ Something Went Wrong");p(Ne,Le)};H(Ae,Ne=>{e(T),O(()=>e(T).type==="network")?Ne(qe):Ne(st,!1)},!0)}p(se,De)};H(je,se=>{e(T),O(()=>e(T).type==="expired")?se(Ye):se(tt,!1)})}t($e);var Ie=s($e,2),Pe=a(Ie,!0);t(Ie);var He=s(Ie,2),Xe=a(He);{var Ve=se=>{var De=Na();Te("click",De,D),p(se,De)};H(Xe,se=>{e(T),O(()=>e(T).type==="network")&&se(Ve)})}var at=s(Xe,2);t(He),t(ke);var Ke=s(ke,2);t(ve),t(ne),Z(()=>{x(Pe,(e(T),O(()=>e(T).message))),Re(at,1,`btn btn-${e(T),O(()=>e(T).type==="network"?"secondary":"primary")??""}`)}),Te("click",at,E),Te("click",Ke,k),p(A,ne)};H(I,A=>{e(T),O(()=>e(T).type)&&A(h)})}var y=s(I,4),R=s(a(y),2),U=a(R);{var j=A=>{var ne=Ze();Z(()=>x(ne,`Select a date within the goal period (${m()??""} to ${g()??""})`)),p(A,ne)},W=A=>{var ne=Ze("When was this activity done?");p(A,ne)};H(U,A=>{m()&&g()?A(j):A(W,!1)})}t(R);var q=s(R,2);Mt(q),t(y);var L=s(y,2),X=s(a(L),4);Z(()=>{e(v),ta(()=>{})}),Me(X,5,()=>f,Be,(A,ne)=>{var ve=Wa(),ke=a(ve,!0);t(ve);var $e={};Z(()=>{x(ke,e(ne)),$e!==($e=e(ne))&&(ve.value=(ve.__value=e(ne))??"")}),p(A,ve)}),t(X),t(L);var K=s(L,2);ot(K,{label:"Temple Name Preparation Count",description:"Number of names you were able to prepare for temple ordinances",get count(){return e(v).prepared_names_count},set count(A){Qe(v,e(v).prepared_names_count=A)},$$legacy:!0});var N=s(K,2);ot(N,{label:"Temple Baptism Ordinances Count",description:"Number of Temple Baptism Ordinances you participated in",get count(){return e(v).baptism_ordinances_count},set count(A){Qe(v,e(v).baptism_ordinances_count=A)},$$legacy:!0});var F=s(N,2);ot(F,{label:"Temple Confirmation Ordinances Count",description:"Number of Temple Confirmation Ordinances you participated in",get count(){return e(v).confirmation_ordinances_count},set count(A){Qe(v,e(v).confirmation_ordinances_count=A)},$$legacy:!0});var G=s(F,2);ot(G,{label:"Temple Initiatory Ordinances Count",description:"Number of Temple Initiatory Ordinances you did OR participated in the Temple",get count(){return e(v).initiatory_ordinances_count},set count(A){Qe(v,e(v).initiatory_ordinances_count=A)},$$legacy:!0});var Q=s(G,2);ot(Q,{label:"Temple Endowment Ordinances Count",description:"Number of Temple Endowment Ordinances you did OR participated in the Temple",get count(){return e(v).endowment_ordinances_count},set count(A){Qe(v,e(v).endowment_ordinances_count=A)},$$legacy:!0});var ie=s(Q,2);ot(ie,{label:"Temple Sealing Ordinances Count",description:"Number of Temple Sealing Ordinances you did OR participated in the Temple",get count(){return e(v).sealing_ordinances_count},set count(A){Qe(v,e(v).sealing_ordinances_count=A)},$$legacy:!0});var z=s(ie,2),J=s(a(z),2),ae=a(J,!0);t(J),t(z);var le=s(z,2),re=a(le),ue=s(re,2);t(le),t(l),Z(()=>{de(q,"min",m()),de(q,"max",g()),x(ae,e(u))}),Jt(q,()=>e(v).date,A=>Qe(v,e(v).date=A)),aa(X,()=>e(v).entry_type,A=>Qe(v,e(v).entry_type=A)),Te("click",re,w),Te("click",ue,i),p(o,l),fe(),d()}var La=P('<small class="d-flex justify-content-start"><span class="fw-bolder"> </span></small>'),Ua=P('<small class="d-flex justify-content-between"><span class="fw-lighter">Submitted</span> <span class="d-flex flex-column"><span class="fw-bolder d-flex justify-content-end"> </span> <span class="fw-lighter fs-x-small"> </span></span></small>'),Ga=P('<div class="d-flex flex-column gap-2"><!> <small class="d-flex justify-content-between"><span class="fw-lighter">Names Prepared Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Baptism Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Confirmation Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Initiatory Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Endowment Count</span> <span class="fw-bolder"> </span></small> <small class="d-flex justify-content-between"><span class="fw-lighter">Sealing Count</span> <span class="fw-bolder"> </span></small> <!></div>');function wt(o,n){ge(n,!1);let r=ee(n,"entry",8),d=ee(n,"showSubmittedData",8,!1),u=ee(n,"showType",8,!1);pe();var _=Ga(),m=a(_);{var g=W=>{var q=La(),L=a(q),X=a(L,!0);t(L),t(q),Z(()=>x(X,(B(r()),O(()=>r()?.entry_type)))),p(W,q)};H(m,W=>{u()&&W(g)})}var $=s(m,2),S=s(a($),2),b=a(S,!0);t(S),t($);var f=s($,2),c=s(a(f),2),M=a(c,!0);t(c),t(f);var v=s(f,2),T=s(a(v),2),w=a(T,!0);t(T),t(v);var E=s(v,2),D=s(a(E),2),k=a(D,!0);t(D),t(E);var i=s(E,2),l=s(a(i),2),I=a(l,!0);t(l),t(i);var h=s(i,2),y=s(a(h),2),R=a(y,!0);t(y),t(h);var U=s(h,2);{var j=W=>{var q=Ua(),L=s(a(q),2),X=a(L),K=a(X,!0);t(X);var N=s(X,2),F=a(N,!0);t(N),t(L),t(q),Z((G,Q)=>{x(K,G),x(F,Q)},[()=>(B(qt),B(r()),O(()=>qt(new Date(r().created_at),{addSuffix:!0}))),()=>(B(ce),B(r()),O(()=>ce(new Date(r().created_at),"MMMM d, yyyy 'at' h:mm a")))]),p(W,q)};H(U,W=>{B(d()),B(r()),O(()=>d()&&r()?.created_at)&&W(j)})}t(_),Z(()=>{x(b,(B(r()),O(()=>r()?.prepared_names_count))),x(M,(B(r()),O(()=>r()?.baptism_ordinances_count))),x(w,(B(r()),O(()=>r()?.confirmation_ordinances_count))),x(k,(B(r()),O(()=>r()?.initiatory_ordinances_count))),x(I,(B(r()),O(()=>r()?.endowment_ordinances_count))),x(R,(B(r()),O(()=>r()?.sealing_ordinances_count)))}),p(o,_),fe()}var Ja=P('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function za(o,n){ge(n,!1);const r=Y();let d=ee(n,"entry",8),u=ee(n,"date",8);V(()=>B(d()),()=>{C(r,d().baptism_ordinances_count+d().confirmation_ordinances_count+d().initiatory_ordinances_count+d().endowment_ordinances_count+d().sealing_ordinances_count)}),Ee(),pe();var _=Ja(),m=oe(_),g=a(m),$=a(g,!0);t(g);var S=s(g,2);t(m);var b=s(m,2),f=a(b),c=a(f),M=a(c);wt(M,{get entry(){return d()}});var v=s(M,2),T=a(v),w=s(a(T),2),E=a(w,!0);t(w),t(T),t(v),t(c),t(f),t(b),Z((D,k)=>{x($,D),x(S,` ${k??""}`),x(E,e(r))},[()=>(B(ce),B(_e),B(u()),O(()=>ce(_e(u(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(ce),B(_e),B(u()),O(()=>ce(_e(u(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(o,_),fe()}var Ha=P('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Xa(o,n){ge(n,!1);let r=ee(n,"entry",8),d=ee(n,"date",8),u=Y(0);V(()=>B(r()),()=>{C(u,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Ee(),pe();var _=Ha(),m=oe(_),g=a(m),$=a(g,!0);t(g);var S=s(g,2);t(m);var b=s(m,2),f=a(b),c=a(f),M=a(c);wt(M,{get entry(){return r()}});var v=s(M,2),T=a(v),w=s(a(T),2),E=a(w,!0);t(w),t(T),t(v),t(c),t(f),t(b),Z((D,k)=>{x($,D),x(S,` ${k??""}`),x(E,e(u))},[()=>(B(ce),B(_e),B(d()),O(()=>ce(_e(d(),"yyyy-MM",new Date),"yyyy"))),()=>(B(ce),B(_e),B(d()),O(()=>ce(_e(d(),"yyyy-MM",new Date),"MMMM")))]),p(o,_),fe()}var Va=P('<div> </div> <ul class="list-group"><li class="list-group-item"><div class="d-flex flex-column gap-2"><!> <div class="d-flex flex-column gap-2"><small class="d-flex justify-content-between"><span class="fw-bolder">Total</span> <span class="fw-bolder"> </span></small></div></div></li></ul>',1);function Ka(o,n){ge(n,!1);let r=ee(n,"entry",8),d=ee(n,"date",8),u=Y(0);V(()=>B(r()),()=>{C(u,r().baptism_ordinances_count+r().confirmation_ordinances_count+r().initiatory_ordinances_count+r().endowment_ordinances_count+r().sealing_ordinances_count)}),Ee(),pe();var _=Va(),m=oe(_),g=a(m,!0);t(m);var $=s(m,2),S=a($),b=a(S),f=a(b);wt(f,{get entry(){return r()}});var c=s(f,2),M=a(c),v=s(a(M),2),T=a(v,!0);t(v),t(M),t(c),t(b),t(S),t($),Z(()=>{x(g,d()),x(T,e(u))}),p(o,_),fe()}var Qa=P('<li class="list-group-item"><div class="d-flex flex-column gap-2"><!></div></li>'),Za=P('<div><small class="text-muted"> </small><br/> </div> <ul class="list-group"></ul>',1);function er(o,n){ge(n,!1);let r=ee(n,"entries",8),d=ee(n,"date",8);pe();var u=Za(),_=oe(u),m=a(_),g=a(m,!0);t(m);var $=s(m,2);t(_);var S=s(_,2);Me(S,5,r,Be,(b,f)=>{var c=Qa(),M=a(c),v=a(M);wt(v,{get entry(){return e(f)},showSubmittedData:!0,showType:!0}),t(M),t(c),p(b,c)}),t(S),Z((b,f)=>{x(g,b),x($,` ${f??""}`)},[()=>(B(ce),B(_e),B(d()),O(()=>ce(_e(d(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(ce),B(_e),B(d()),O(()=>ce(_e(d(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(o,u),fe()}var tr=P('<div class="d-flex flex-column gap-3"><!></div>'),ar=P('<div class="d-flex flex-column gap-3"></div>'),rr=P('<div class="d-flex flex-column gap-3"></div>'),nr=P('<div class="d-flex flex-column gap-3"></div>'),sr=P('<div class="d-flex flex-column gap-3"><!> <!> <!> <!> <!></div>');function or(o,n){ge(n,!1);const r=()=>we(b,"$groupedByDate",m),d=()=>we(f,"$detailTotalsByDay",m),u=()=>we(c,"$detailTotalsByMonth",m),_=()=>we(M,"$detailTotalsByYear",m),[m,g]=ze(),$=Y(),{stores:{data:S,groupedByDate:b,detailTotalsByDay:f,detailTotalsByMonth:c,detailTotalsByYear:M},actions:{reload:v}}=ht();let T=ee(n,"query",8,""),w=Y([]),E=Y([]);const D=S.subscribe(j=>{C(w,j),C(E,[...j])});function k(j){return j?j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):""}const i=j=>{let W=[...e(w)];return j&&(W=W.filter(q=>q?.entry_type?q?.entry_type?.trim().toLowerCase().match(e($).trim().toLowerCase()):!1)),W};vt(v),la(D);let l=Y("by-month");const I=[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Month",value:"by-month"},{key:"By Year",value:"by-year"}];V(()=>B(T()),()=>{C($,k(T()?.trim().toLowerCase()))}),V(()=>(B(T()),e(E)),()=>{T()?C(w,i(T())):C(w,[...e(E)])}),Ee(),pe();var h=he(),y=oe(h);{var R=j=>{var W=sr(),q=a(W);zt(q,{get options(){return I},helperText:"",label:"Filter",disabled:!1,get value(){return e(l)},set value(z){C(l,z)},$$legacy:!0});var L=s(q,2);{var X=z=>{var J=he(),ae=oe(J);Me(ae,1,()=>(r(),O(()=>Object.entries(r()))),Be,(le,re)=>{var ue=Ge(()=>Fe(e(re),2));let A=()=>e(ue)[0],ne=()=>e(ue)[1];var ve=tr(),ke=a(ve);er(ke,{get date(){return A()},get entries(){return ne()}}),t(ve),p(le,ve)}),p(z,J)};H(L,z=>{e(l)==="by-submission"&&z(X)})}var K=s(L,2);{var N=z=>{var J=ar();Me(J,5,()=>(d(),O(()=>Object.entries(d()))),Be,(ae,le)=>{var re=Ge(()=>Fe(e(le),2));let ue=()=>e(re)[0],A=()=>e(re)[1];za(ae,{get date(){return ue()},get entry(){return A()}})}),t(J),p(z,J)};H(K,z=>{e(l)==="by-day"&&z(N)})}var F=s(K,2);{var G=z=>{var J=rr();Me(J,5,()=>(u(),O(()=>Object.entries(u()))),Be,(ae,le)=>{var re=Ge(()=>Fe(e(le),2));let ue=()=>e(re)[0],A=()=>e(re)[1];Xa(ae,{get date(){return ue()},get entry(){return A()}})}),t(J),p(z,J)};H(F,z=>{e(l)==="by-month"&&z(G)})}var Q=s(F,2);{var ie=z=>{var J=nr();Me(J,5,()=>(_(),O(()=>Object.entries(_()))),Be,(ae,le)=>{var re=Ge(()=>Fe(e(le),2));let ue=()=>e(re)[0],A=()=>e(re)[1];Ka(ae,{get date(){return ue()},get entry(){return A()}})}),t(J),p(z,J)};H(Q,z=>{e(l)==="by-year"&&z(ie)})}t(W),p(j,W)},U=j=>{var W=Ze("No Data Found");p(j,W)};H(y,j=>{e(w),O(()=>e(w)?.length)?j(R):j(U,!1)})}p(o,h),fe(),g()}var ir=P('<span class="d-flex justify-content-end">0</span>'),lr=P('<span class="d-flex justify-content-end">0</span>'),cr=P('<span class="d-flex justify-content-end"> </span>'),dr=P('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),ur=P('<span class="d-flex justify-content-end"> </span>'),vr=P('<tr><td colspan="3" class="pt-0 pb-2"><div class="d-flex align-items-center gap-2"><div class="progress flex-grow-1" style="height: 6px;"><div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted" style="font-size: 0.75rem;"> </small></div></td></tr>'),mr=P('<div class="card"><div class="card-header svelte-kypz17"> <span class="text-muted fw-light"> </span></div> <div class="card-body"><div class="d-flex flex-column gap-2"><div class="table-responsive"><table class="table"><thead><tr><th scope="col"></th><th scope="col"><span class="d-flex justify-content-end">Goal</span></th><th scope="col"><span class="d-flex justify-content-end">Actual</span></th></tr></thead><tbody><tr><td><span class="fw-lighter">Baptisms</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Family Sealing</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><tr><td><span class="fw-lighter">Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!><tr><td><span class="fw-lighter">Names Prepared for Temple Ordinances</span></td><td><span class="d-flex justify-content-end"> </span></td><td><!></td></tr><!></tbody></table></div> <div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Submit your temple activity</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div>');function _r(o,n){ge(n,!1);const r=()=>we(w,"$entries",u),d=()=>we(E,"$loading",u),[u,_]=ze(),m=Y(),g=Y(),$=Y(),S=Y(),b=Y(),f=Y();let c=ee(n,"goal",8),M=ee(n,"drawerId",8),v=ee(n,"onSubmitClick",8),T=ee(n,"onViewResultsClick",8);const{stores:{data:w,loading:E}}=ht();function D(te,me){const[Ce,Oe,Ue]=te.split("-").map(Number),[rt,nt,it]=me.split("-").map(Number),lt=new Date(Ce,Oe-1,Ue),Qt=new Date(rt,nt-1,it),Zt=lt.toLocaleDateString("en-US",{month:"short"}),ea=Qt.toLocaleDateString("en-US",{month:"short"});return`${Zt} to ${ea}`}function k(te){return te.toLocaleString("en-US")}function i(te){return te!==null?k(te):"--"}V(()=>(r(),B(c())),()=>{C(m,xa(r(),c().start_date,c().end_date))}),V(()=>e(m),()=>{C(g,ka(e(m)))}),V(()=>e(m),()=>{C($,$a(e(m)))}),V(()=>B(c()),()=>{C(S,D(c().start_date,c().end_date))}),V(()=>(B(c()),e(g)),()=>{C(b,c().temple_ordinances_goal&&c().temple_ordinances_goal>0?Math.round(e(g)/c().temple_ordinances_goal*100):null)}),V(()=>(B(c()),e($)),()=>{C(f,c().names_prepared_goal&&c().names_prepared_goal>0?Math.round(e($)/c().names_prepared_goal*100):null)}),Ee(),pe();var l=mr(),I=a(l),h=a(I),y=s(h),R=a(y);t(y),t(I);var U=s(I,2),j=a(U),W=a(j),q=a(W),L=s(a(q)),X=a(L),K=s(a(X)),N=a(K),F=a(N,!0);t(N),t(K);var G=s(K),Q=a(G);{var ie=te=>{var me=ir();p(te,me)};H(Q,te=>{d()||te(ie)})}t(G),t(X);var z=s(X),J=s(a(z)),ae=a(J),le=a(ae,!0);t(ae),t(J);var re=s(J),ue=a(re);{var A=te=>{var me=lr();p(te,me)};H(ue,te=>{d()||te(A)})}t(re),t(z);var ne=s(z),ve=a(ne);let ke;var $e=s(ve);let je;var Ye=a($e),tt=a(Ye,!0);t(Ye),t($e);var Ie=s($e);let Pe;var He=a(Ie);{var Xe=te=>{var me=cr(),Ce=a(me,!0);t(me),Z(Oe=>x(Ce,Oe),[()=>(e(g),O(()=>k(e(g))))]),p(te,me)};H(He,te=>{d()||te(Xe)})}t(Ie),t(ne);var Ve=s(ne);{var at=te=>{var me=dr(),Ce=a(me),Oe=a(Ce),Ue=a(Oe),rt=a(Ue);t(Ue);var nt=s(Ue,2),it=a(nt);t(nt),t(Oe),t(Ce),t(me),Z(lt=>{ut(rt,`width: ${lt??""}%`),de(rt,"aria-valuenow",e(b)),x(it,`${e(b)??""}%`)},[()=>(e(b),O(()=>Math.min(e(b),100)))]),p(te,me)};H(Ve,te=>{e(b),B(c()),O(()=>e(b)!==null&&c().temple_ordinances_goal)&&te(at)})}var Ke=s(Ve),se=a(Ke);let De;var Ae=s(se);let qe;var st=a(Ae),Ne=a(st,!0);t(st),t(Ae);var Le=s(Ae);let Rt;var Ht=a(Le);{var Xt=te=>{var me=ur(),Ce=a(me,!0);t(me),Z(Oe=>x(Ce,Oe),[()=>(e($),O(()=>k(e($))))]),p(te,me)};H(Ht,te=>{d()||te(Xt)})}t(Le),t(Ke);var Vt=s(Ke);{var Kt=te=>{var me=vr(),Ce=a(me),Oe=a(Ce),Ue=a(Oe),rt=a(Ue);t(Ue);var nt=s(Ue,2),it=a(nt);t(nt),t(Oe),t(Ce),t(me),Z(lt=>{ut(rt,`width: ${lt??""}%`),de(rt,"aria-valuenow",e(f)),x(it,`${e(b)??""}%`)},[()=>(e(f),O(()=>Math.min(e(f),100)))]),p(te,me)};H(Vt,te=>{e(f),B(c()),O(()=>e(f)!==null&&c().names_prepared_goal)&&te(Kt)})}t(L),t(q),t(W);var kt=s(W,2),$t=a(kt);t(kt);var jt=s(kt,2),Dt=a(jt);t(jt),t(j),t(U),t(l),Z((te,me,Ce,Oe)=>{x(h,`Ward Mission Goal ${B(c()),O(()=>c().year)??""} `),x(R,`(${e(S)??""})`),x(F,te),x(le,me),ke=Re(ve,1,"",null,ke,{"border-bottom-0":e(b)!==null&&c().temple_ordinances_goal}),je=Re($e,1,"",null,je,{"border-bottom-0":e(b)!==null&&c().temple_ordinances_goal}),x(tt,Ce),Pe=Re(Ie,1,"",null,Pe,{"border-bottom-0":e(b)!==null&&c().temple_ordinances_goal}),De=Re(se,1,"",null,De,{"border-bottom-0":e(f)!==null&&c().names_prepared_goal}),qe=Re(Ae,1,"",null,qe,{"border-bottom-0":e(f)!==null&&c().names_prepared_goal}),x(Ne,Oe),Rt=Re(Le,1,"",null,Rt,{"border-bottom-0":e(f)!==null&&c().names_prepared_goal}),de($t,"data-bs-target",`#${M()??""}`),de($t,"aria-controls",M()),de(Dt,"data-bs-target",`#${M()??""}`),de(Dt,"aria-controls",M())},[()=>(B(c()),O(()=>i(c().baptisms_goal))),()=>(B(c()),O(()=>i(c().family_sealings_goal))),()=>(B(c()),O(()=>i(c().temple_ordinances_goal))),()=>(B(c()),O(()=>i(c().names_prepared_goal)))]),Te("click",$t,function(...te){v()?.apply(this,te)}),Te("click",Dt,function(...te){T()?.apply(this,te)}),p(o,l),fe(),_()}var gr=P("<!> <!>",1),fr=P('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading goals...</span></div></div>'),pr=P('<div class="alert alert-info" role="alert"><h5 class="alert-heading">No Goals Configured</h5> <p class="mb-0">No ward mission goals have been configured yet. Please contact an admin to set up goals.</p></div>'),yr=P('<button style="display: none;" data-bs-toggle="offcanvas" aria-label="Goal Details"></button>'),br=P('<div class="col-12"><!> <!></div>'),hr=P('<div class="row g-3"></div>'),wr=P("<!> <!>",1);function qn(o,n){ge(n,!1);const r=()=>we(T,"$activeGoals",_),d=()=>we(E,"$currentGoalPeriod",_),u=()=>we(w,"$goalsLoading",_),[_,m]=ze(),g=Y(),$=Y();let S=Y("form"),b=St(),f=Y("end"),c=Y(),M=Y(!1);const{actions:{reload:v}}=ht(),{stores:{activeGoals:T,loading:w,currentGoalPeriod:E},actions:{reload:D}}=ua();let k=Y(null);function i(){C(S,"form")}function l(){C(S,"results")}vt(async()=>{await Promise.all([D(),v()]);const j=new URLSearchParams(window.location.search);C(k,j.get("log-temple-activity"))}),V(()=>(e(k),e(c),e(M)),()=>{e(k)&&e(k)==="yes"&&e(c)&&!e(M)&&(e(c).click(),C(M,!0))}),V(()=>e(S),()=>{C(f,e(S)==="form"?"end":"start")}),V(()=>e(S),()=>{C(g,e(S)==="form"?"Temple Activity":"Temple Activity Results")}),V(()=>r(),()=>{C($,(()=>{const j=new Date().toISOString().split("T")[0];return r().filter(W=>W.start_date<=j&&W.end_date>=j)})())}),Ee(),pe();var I=wr(),h=oe(I);Tt(h,{get placement(){return e(f)},get title(){return e(g)},get id(){return b},children:(j,W)=>{var q=gr(),L=oe(q);{var X=F=>{{let G=Pt(()=>(d(),O(()=>d()?.start_date))),Q=Pt(()=>(d(),O(()=>d()?.end_date)));qa(F,{get drawerId(){return b},get minDate(){return e(G)},get maxDate(){return e(Q)}})}};H(L,F=>{e(S)==="form"&&F(X)})}var K=s(L,2);{var N=F=>{or(F,{})};H(K,F=>{e(S)==="results"&&F(N)})}p(j,q)},$$slots:{default:!0}});var y=s(h,2);{var R=j=>{var W=fr();p(j,W)},U=j=>{var W=he(),q=oe(W);{var L=K=>{var N=pr();p(K,N)},X=K=>{var N=hr();Me(N,5,()=>e($),F=>F.id,(F,G)=>{var Q=br(),ie=a(Q);_r(ie,{get goal(){return e(G)},get drawerId(){return b},onSubmitClick:i,onViewResultsClick:l});var z=s(ie,2);{var J=ae=>{var le=yr();ca(le,re=>C(c,re),()=>e(c)),Z(()=>{de(le,"data-bs-target",`#${b??""}`),de(le,"aria-controls",b)}),Te("click",le,i),p(ae,le)};H(z,ae=>{e(G),e($),O(()=>e(G)===e($)[0])&&ae(J)})}t(Q),p(F,Q)}),t(N),p(K,N)};H(q,K=>{e($),O(()=>e($).length===0)?K(L):K(X,!1)},!0)}p(j,W)};H(y,j=>{u()?j(R):j(U,!1)})}p(o,I),fe(),m()}const Lt=We([]),Ut=We([]);let ft=!1,pt=!1;async function xr(){if(ft)return Bt(Lt);ft=!0;try{const{data:o,error:n}=await Je.from("bom_reading_schedule").select("*").order("day_number",{ascending:!0});if(n)throw console.error("[API] Get BOM reading schedule failed:",n),new Error(`Failed to load reading schedule: ${n.message}`);const r=o||[];return Lt.set(r),setTimeout(()=>ft=!1,800),r}catch(o){throw ft=!1,console.error("[API] Unexpected error fetching BOM reading schedule:",o),o}}async function xt(){if(pt)return Bt(Ut);pt=!0;try{const{data:o,error:n}=await Je.from("bom_reading_entries").select("*").order("created_at",{ascending:!1});if(n)throw console.error("[API] Get BOM reading entries failed:",n),new Error(`Failed to load reading entries: ${n.message}`);const r=o||[];return Ut.set(r),setTimeout(()=>pt=!1,800),r}catch(o){throw pt=!1,console.error("[API] Unexpected error fetching BOM reading entries:",o),o}}async function kr(o){try{const{data:n,error:r}=await Je.from("bom_reading_entries").insert([o]).select();if(r)throw console.error("[API] Create BOM reading entry failed:",r),r.message.includes("JWT")?new Error("Authentication error - please try reloading the page"):r.code==="42501"?new Error("Permission denied - please check your authentication"):r.code==="23505"?new Error("This entry already exists"):r.code==="23503"?new Error("Invalid chapter reference"):r.message.includes("fetch")||r.message.includes("Failed to fetch")?new Error("Network error - please check your connection and try again"):new Error(`Failed to save entry: ${r.message}`);return await xt(),console.log("[API] BOM reading entry created successfully"),n?n[0]:void 0}catch(n){throw console.error("[API] Unexpected error creating BOM reading entry:",n),n}}async function $r(o,n){try{const{data:r,error:d}=await Je.from("bom_reading_entries").update(n).eq("id",o).select();if(d)throw console.error("[API] Update BOM reading entry failed:",d),new Error(`Failed to update entry: ${d.message}`);return await xt(),console.log("[API] BOM reading entry updated successfully"),r?r[0]:void 0}catch(r){throw console.error("[API] Unexpected error updating BOM reading entry:",r),r}}async function Dr(o){try{const{error:n}=await Je.from("bom_reading_entries").delete().eq("id",o);if(n)throw console.error("[API] Delete BOM reading entry failed:",n),new Error(`Failed to delete entry: ${n.message}`);await xt(),console.log("[API] BOM reading entry deleted successfully")}catch(n){throw console.error("[API] Unexpected error deleting BOM reading entry:",n),n}}function Mr(o){const n=new Map;return o.forEach(r=>{const d=n.get(r.chapter_ref)||0;n.set(r.chapter_ref,d+1)}),n}let dt=null;const Sr=()=>{const o=We(!1),n=We(!1),r=We([]),d=We([]),u=be(d,i=>Mr(i)),_=be(r,i=>{const l=new Date().toISOString().split("T")[0];return i.find(I=>I.date===l)||null}),m=be([r,u],([i,l])=>{const I=new Date().toISOString().split("T")[0];return i.map(h=>({chapter_ref:h.chapter_ref,day_number:h.day_number,date:h.date,book_name:h.book_name,chapter_number:h.chapter_number,read_count:l.get(h.chapter_ref)||0,is_today:h.date===I,is_past:h.date<I,is_future:h.date>I}))}),g=be(r,i=>i.length),$=be(u,i=>{let l=0;return i.forEach(I=>{I>0&&l++}),l}),S=be([g,$],([i,l])=>i>0?Math.round(l/i*100):0),b=be(d,i=>{const l={};i.forEach(h=>{l[h.date]||(l[h.date]=[]),l[h.date].push(h)}),Object.keys(l).forEach(h=>{l[h].sort((y,R)=>new Date(R.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const I=Object.entries(l).sort(([h],[y])=>new Date(y).getTime()-new Date(h).getTime());return Object.fromEntries(I)}),f=be(d,i=>{const l={};i.forEach(h=>{const y=new Date(h.date),R=Aa(y),U=oa(y),j=`${R}-W${U.toString().padStart(2,"0")}`;l[j]||(l[j]=[]),l[j].push(h)}),Object.keys(l).forEach(h=>{l[h].sort((y,R)=>new Date(R.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const I=Object.entries(l).sort(([h],[y])=>y.localeCompare(h));return Object.fromEntries(I)}),c=be(d,i=>{const l={};i.forEach(h=>{const y=h.date.substring(0,7);l[y]||(l[y]=[]),l[y].push(h)}),Object.keys(l).forEach(h=>{l[h].sort((y,R)=>new Date(R.created_at??"").getTime()-new Date(y.created_at??"").getTime())});const I=Object.entries(l).sort(([h],[y])=>y.localeCompare(h));return Object.fromEntries(I)}),M=be(b,i=>{const l={};return Object.entries(i).forEach(([I,h])=>{const y=new Set(h.map(R=>R.chapter_ref));l[I]={period:I,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),l}),v=be(f,i=>{const l={};return Object.entries(i).forEach(([I,h])=>{const y=new Set(h.map(R=>R.chapter_ref));l[I]={period:I,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),l}),T=be(c,i=>{const l={};return Object.entries(i).forEach(([I,h])=>{const y=new Set(h.map(R=>R.chapter_ref));l[I]={period:I,totalReadings:h.length,uniqueChapters:y.size,chapterRefs:y}}),l}),w=async()=>{n.set(!0);try{const[i,l]=await Promise.all([xr(),xt()]);r.set(i),d.set(l),o.set(!0)}catch(i){console.error("[State] Failed to reload BOM reading data:",i),o.set(!0)}finally{n.set(!1)}};return dt={stores:{ready:o,loading:n,schedule:r,entries:d,progressByChapter:u,todaysReading:_,chapterProgress:m,totalChapters:g,chaptersReadByAnyone:$,overallProgress:S,groupedByDate:b,groupedByWeek:f,groupedByMonth:c,aggregatedByDate:M,aggregatedByWeek:v,aggregatedByMonth:T},actions:{reload:w,apiCreate:async i=>{const l=await kr(i);return await w(),l},apiUpdate:async(i,l)=>{await $r(i,l),await w()},apiDelete:async i=>{await Dr(i),await w()}}},dt},mt=()=>dt?.stores&&Object.keys(dt.stores).length>0?dt:Sr(),Et="bom_reading_submissions",Ct="bom_reading_entry_ids";function Ot(){if(typeof localStorage>"u")return new Set;try{const o=localStorage.getItem(Et);if(!o)return new Set;const n=JSON.parse(o);return new Set(Array.isArray(n)?n:[])}catch(o){return console.error("[ReadingTracker] Error reading from localStorage:",o),new Set}}function Tr(o){return Ot().has(o)}function Br(o){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const n=Ot();n.add(o),localStorage.setItem(Et,JSON.stringify([...n]))}catch(n){console.error("[ReadingTracker] Error writing to localStorage:",n)}}function It(){if(typeof localStorage>"u")return{};try{const o=localStorage.getItem(Ct);if(!o)return{};const n=JSON.parse(o);return typeof n=="object"&&n!==null?n:{}}catch(o){return console.error("[ReadingTracker] Error reading entry IDs from localStorage:",o),{}}}function Er(o){return It()[o]??null}function Cr(o,n){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const r=It();r[o]=n,localStorage.setItem(Ct,JSON.stringify(r))}catch(r){console.error("[ReadingTracker] Error storing entry ID:",r)}}function Or(o){if(typeof localStorage>"u"){console.warn("[ReadingTracker] localStorage not available");return}try{const n=Ot();n.delete(o),localStorage.setItem(Et,JSON.stringify([...n]));const r=It();delete r[o],localStorage.setItem(Ct,JSON.stringify(r))}catch(n){console.error("[ReadingTracker] Error writing to localStorage:",n)}}var Ir=P('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>'),Rr=P('<i class="bi bi-check-circle-fill me-1"></i> Undo',1),jr=P('<i class="bi bi-check-circle me-1"></i> Read',1),Pr=P('<div class="alert alert-danger alert-sm mt-2 mb-0 svelte-18cjesl" role="alert"><i class="bi bi-exclamation-triangle-fill me-1"></i> </div>'),Ar=P('<div class="bom-reading-entry-form svelte-18cjesl"><div class="d-flex align-items-center gap-2 gap-md-3"><button type="button"><!></button></div> <!></div>');function Nr(o,n){ge(n,!1);const r=()=>we(g,"$loading",d),[d,u]=ze();let _=ee(n,"chapterRef",8),m=ee(n,"onSuccess",8,void 0);const{stores:{loading:g},actions:{apiCreate:$,apiDelete:S}}=mt();let b=Y(!1),f=Y(""),c=Y(!1),M=Y(null);vt(()=>{C(c,Tr(_()))});async function v(){if(e(c)){C(f,"You have already marked this chapter as read");return}try{C(b,!0),C(f,"");const y={date:new Date().toISOString().split("T")[0],chapter_ref:_()},R=await $(y);R&&R.id&&(Br(_()),Cr(_(),R.id),C(c,!0),m()&&m()())}catch(y){C(f,y instanceof Error?y.message:"Failed to save reading"),console.error("[BomReadingEntryForm] Error:",y)}finally{C(b,!1)}}async function T(){const y=Er(_());if(!y){C(f,"Cannot undo - entry ID not found");return}try{C(b,!0),C(f,""),await S(y),Or(_()),C(c,!1),m()&&m()()}catch(R){C(f,R instanceof Error?R.message:"Failed to undo"),console.error("[BomReadingEntryForm] Undo error:",R)}finally{C(b,!1)}}V(()=>(e(f),e(M)),()=>{e(f)&&(e(M)&&clearTimeout(e(M)),C(M,setTimeout(()=>{C(f,""),C(M,null)},1e3)))}),Ee(),pe();var w=Ar(),E=a(w),D=a(E),k=a(D);{var i=y=>{var R=Ir();p(y,R)},l=y=>{var R=he(),U=oe(R);{var j=q=>{var L=Rr();et(),p(q,L)},W=q=>{var L=jr();et(),p(q,L)};H(U,q=>{e(c)?q(j):q(W,!1)},!0)}p(y,R)};H(k,y=>{e(b)?y(i):y(l,!1)})}t(D),t(E);var I=s(E,2);{var h=y=>{var R=Pr(),U=s(a(R));t(R),Z(()=>x(U,` ${e(f)??""}`)),p(y,R)};H(I,y=>{e(f)&&y(h)})}t(w),Z(()=>{Re(D,1,`btn btn-sm ${e(c)?"btn-outline-danger":"btn-primary"}`,"svelte-18cjesl"),D.disabled=e(b)||r(),de(D,"title",e(c)?"Undo marking this chapter as read":"Mark this chapter as read")}),Te("click",D,function(...y){(e(c)?T:v)?.apply(this,y)}),p(o,w),fe(),u()}var Fr=P('<span class="badge bg-info text-dark svelte-x251hv"><i class="bi bi-calendar-day"></i> Today</span>'),Wr=P('<i class="bi bi-check-circle"></i> ',1),Yr=P('<i class="bi bi-circle"></i> 0',1),qr=P('<div><div class="card-body p-2"><div class="d-flex align-items-baseline gap-2 flex-wrap mb-2"><small class="text-muted"> </small> <span> </span> <!></div> <div class="d-flex align-items-center justify-content-between gap-2"><small class="text-muted"> </small> <div class="d-flex align-items-center gap-2 flex-shrink-0"><span><!></span> <!></div></div></div></div>');function Gt(o,n){ge(n,!1);const r=Y(),d=Y(),u=Y();let _=ee(n,"progress",8);const m=!1;V(()=>B(_()),()=>{C(r,ce(_e(_().date,"yyyy-MM-dd",new Date),"MMM d, yyyy (EEE)"))}),V(()=>B(_()),()=>{C(d,_().is_today?"border-primary border-2":_().is_past?"past-reading":"")}),V(()=>B(_()),()=>{C(u,_().read_count>0?"bg-success":"bg-secondary")}),Ee();var g={compact:m};pe();var $=qr(),S=a($),b=a(S),f=a(b),c=a(f);t(f);var M=s(f,2),v=a(M,!0);t(M);var T=s(M,2);{var w=U=>{var j=Fr();p(U,j)};H(T,U=>{B(_()),O(()=>_().is_today)&&U(w)})}t(b);var E=s(b,2),D=a(E),k=a(D,!0);t(D);var i=s(D,2),l=a(i),I=a(l);{var h=U=>{var j=Wr(),W=s(oe(j));Z(()=>x(W,` ${B(_()),O(()=>_().read_count)??""}`)),p(U,j)},y=U=>{var j=Yr();et(),p(U,j)};H(I,U=>{B(_()),O(()=>_().read_count>0)?U(h):U(y,!1)})}t(l);var R=s(l,2);return Nr(R,{get chapterRef(){return B(_()),O(()=>_().chapter_ref)}}),t(i),t(E),t(S),t($),Z(()=>{Re($,1,`card bom-day-card ${e(d)??""} mb-2`,"svelte-x251hv"),x(c,`Day ${B(_()),O(()=>_().day_number)??""}`),Re(M,1,`fw-semibold ${B(_()),O(()=>_().is_today?"text-primary":"")??""}`,"svelte-x251hv"),x(v,(B(_()),O(()=>_().chapter_ref))),x(k,e(r)),Re(l,1,`badge ${e(u)??""}`,"svelte-x251hv")}),p(o,$),ma(n,"compact",m),fe(g)}var Lr=P('<div class="alert alert-warning" role="alert"><i class="bi bi-exclamation-triangle me-2"></i> No readings found for the selected filter.</div>'),Ur=P('<div class="book-group mb-4 svelte-nbte28"><h4 class="border-bottom pb-2 mb-3 svelte-nbte28"><i class="bi bi-book me-2"></i> <span class="badge bg-secondary ms-2"> </span></h4> <!></div>'),Gr=P("<div><!></div>"),Jr=P('<div class="text-center mt-4"><button class="btn btn-outline-primary"><!></button></div>'),zr=P('<div class="text-center mt-2"><p class="text-muted mb-0"><i class="bi bi-info-circle me-1"></i> </p></div>'),Hr=P('<div class="bom-reading-schedule svelte-nbte28"><div class="card mb-3"><div class="card-body"><div class="d-flex flex-column gap-3"><div><label for="search" class="form-label fw-bold">Search</label> <div class="input-group"><span class="input-group-text"><i class="bi bi-search"></i></span> <input type="text" class="form-control" id="search" placeholder="Search chapters or books..."/></div></div> <div><div class="form-check"><input class="form-check-input" type="checkbox" id="groupByBook"/> <label class="form-check-label" for="groupByBook">Group by Book</label></div></div></div></div></div> <div class="reading-list svelte-nbte28"><!></div> <!> <!></div>');function Xr(o,n){ge(n,!1);const r=()=>we($,"$chapterProgress",u),d=()=>we(S,"$todaysReading",u),[u,_]=ze(),m=Y(),g=Y(),{stores:{chapterProgress:$,todaysReading:S}}=mt();let b=Y(""),f=Y(!1),c=Y(!1);function M(N,F,G){let Q=N;if(G||(Q=Q.filter(ie=>!ie.is_future)),F){const ie=F.toLowerCase();Q=Q.filter(z=>z.chapter_ref.toLowerCase().includes(ie)||z.book_name.toLowerCase().includes(ie))}return Q}function v(N){const F={};return N.forEach(G=>{F[G.book_name]||(F[G.book_name]=[]),F[G.book_name].push(G)}),F}vt(()=>{d()&&setTimeout(()=>{const N=document.getElementById("today-reading");N&&N.scrollIntoView({behavior:"smooth",block:"center"})},500)}),V(()=>(r(),e(b),e(c)),()=>{C(m,M(r(),e(b),e(c)))}),V(()=>(e(f),e(m)),()=>{C(g,e(f)?v(e(m)):null)}),Ee(),pe();var T=Hr(),w=a(T),E=a(w),D=a(E),k=a(D),i=s(a(k),2),l=s(a(i),2);Mt(l),t(i),t(k);var I=s(k,2),h=a(I),y=a(h);Mt(y),et(2),t(h),t(I),t(D),t(E),t(w);var R=s(w,2),U=a(R);{var j=N=>{var F=Lr();p(N,F)},W=N=>{var F=he(),G=oe(F);{var Q=z=>{var J=he(),ae=oe(J);Me(ae,1,()=>(e(g),O(()=>Object.entries(e(g)))),Be,(le,re)=>{var ue=Ge(()=>Fe(e(re),2));let A=()=>e(ue)[0],ne=()=>e(ue)[1];var ve=Ur(),ke=a(ve),$e=s(a(ke)),je=s($e),Ye=a(je);t(je),t(ke);var tt=s(ke,2);Me(tt,1,ne,Be,(Ie,Pe)=>{Gt(Ie,{get progress(){return e(Pe)},compact:!0})}),t(ve),Z(()=>{x($e,` ${A()??""} `),x(Ye,`${ne(),O(()=>ne().length)??""} days`)}),p(le,ve)}),p(z,J)},ie=z=>{var J=he(),ae=oe(J);Me(ae,1,()=>e(m),Be,(le,re)=>{var ue=Gr(),A=a(ue);Gt(A,{get progress(){return e(re)}}),t(ue),Z(()=>de(ue,"id",(e(re),O(()=>e(re).is_today?"today-reading":void 0)))),p(le,ue)}),p(z,J)};H(G,z=>{e(g)?z(Q):z(ie,!1)},!0)}p(N,F)};H(U,N=>{e(m),O(()=>e(m).length===0)?N(j):N(W,!1)})}t(R);var q=s(R,2);{var L=N=>{var F=Jr(),G=a(F),Q=a(G);{var ie=J=>{var ae=Ze("Hide Future Chapters");p(J,ae)},z=J=>{var ae=Ze("Show Future Chapters");p(J,ae)};H(Q,J=>{e(c)?J(ie):J(z,!1)})}t(G),t(F),Te("click",G,()=>C(c,!e(c))),p(N,F)};H(q,N=>{e(b)||N(L)})}var X=s(q,2);{var K=N=>{var F=zr(),G=a(F),Q=s(a(G));t(G),t(F),Z(()=>x(Q,` Showing ${e(m),O(()=>e(m).length)??""} reading days`)),p(N,F)};H(X,N=>{e(m),O(()=>e(m).length>20)&&N(K)})}t(T),Jt(l,()=>e(b),N=>C(b,N)),da(y,()=>e(f),N=>C(f,N)),p(o,T),fe(),_()}var Vr=P('<span class="badge bg-primary ms-1"> </span>'),Kr=P('<span class="badge bg-secondary me-1 mb-1"> <!></span>'),Qr=P('<li class="list-group-item"><div class="small"><strong>Chapters read:</strong> <div class="mt-1"></div></div></li>'),Zr=P('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Reading Submissions:</span> <strong> </strong></div> <div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong> </strong></div></li> <!></ul></div></div>');function en(o,n){ge(n,!1);const r=Y(),d=Y();let u=ee(n,"entries",8),_=ee(n,"date",8);V(()=>B(u()),()=>{C(r,u().reduce((h,y)=>(h[y.chapter_ref]=(h[y.chapter_ref]||0)+1,h),{}))}),V(()=>e(r),()=>{C(d,Object.keys(e(r)).sort())}),Ee(),pe();var m=Zr(),g=a(m),$=a(g),S=a($),b=a(S,!0);t(S);var f=s(S,3),c=a(f,!0);t(f),t($);var M=s($,2),v=a(M),T=a(v),w=s(a(T),2),E=a(w,!0);t(w),t(T);var D=s(T,2),k=s(a(D),2),i=a(k,!0);t(k),t(D),t(v);var l=s(v,2);{var I=h=>{var y=Qr(),R=a(y),U=s(a(R),2);Me(U,5,()=>e(d),Be,(j,W)=>{var q=Kr(),L=a(q),X=s(L);{var K=N=>{var F=Vr(),G=a(F,!0);t(F),Z(()=>x(G,(e(r),e(W),O(()=>e(r)[e(W)])))),p(N,F)};H(X,N=>{e(r),e(W),O(()=>e(r)[e(W)]>1)&&N(K)})}t(q),Z(()=>x(L,`${e(W)??""} `)),p(j,q)}),t(U),t(R),t(y),p(h,y)};H(l,h=>{e(d),O(()=>e(d).length>0)&&h(I)})}t(M),t(g),t(m),Z((h,y)=>{x(b,h),x(c,y),x(E,(B(u()),O(()=>u().length))),x(i,(e(d),O(()=>e(d).length)))},[()=>(B(ce),B(_e),B(_()),O(()=>ce(_e(_(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(ce),B(_e),B(_()),O(()=>ce(_e(_(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(o,m),fe()}var tn=P('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div></li></ul></div></div>');function an(o,n){ge(n,!1);let r=ee(n,"date",8),d=ee(n,"aggregate",8);pe();var u=tn(),_=a(u),m=a(_),g=a(m),$=a(g,!0);t(g);var S=s(g,3),b=a(S,!0);t(S),t(m);var f=s(m,2),c=a(f),M=a(c),v=s(a(M),2),T=a(v,!0);t(v),t(M),t(c);var w=s(c,2),E=a(w),D=s(a(E),2),k=a(D,!0);t(D),t(E),t(w),t(f),t(_),t(u),Z((i,l)=>{x($,i),x(b,l),x(T,(B(d()),O(()=>d().totalReadings))),x(k,(B(d()),O(()=>d().uniqueChapters)))},[()=>(B(ce),B(_e),B(r()),O(()=>ce(_e(r(),"yyyy-MM-dd",new Date),"yyyy"))),()=>(B(ce),B(_e),B(r()),O(()=>ce(_e(r(),"yyyy-MM-dd",new Date),"MMM dd, EEEE")))]),p(o,u),fe()}var rn=P('<div class="mb-3"><div class="card"><div class="card-header"><small class="text-muted"> </small><br/> <strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function nn(o,n){ge(n,!1);const r=Y(),d=Y(),u=Y(),_=Y(),m=Y(),g=Y(),$=Y(),S=Y(),b=Y(),f=Y();let c=ee(n,"week",8),M=ee(n,"aggregate",8);V(()=>(e(r),e(d),B(c())),()=>{(F=>{var G=Fe(F,2);C(r,G[0]),C(d,G[1])})(c().split("-W"))}),V(()=>e(d),()=>{C(u,parseInt(e(d),10))}),V(()=>e(r),()=>{C(_,parseInt(e(r),10))}),V(()=>e(_),()=>{C(m,new Date(e(_),0,1))}),V(()=>(e(m),e(u)),()=>{C(g,ia(new Date(e(m).getTime()+(e(u)-1)*7*24*60*60*1e3)))}),V(()=>e(g),()=>{C($,ja(e(g)))}),V(()=>(e(u),e(_)),()=>{C(S,`Week ${e(u)} of ${e(_)}`)}),V(()=>(e(g),e($)),()=>{C(b,`${ce(e(g),"MMM d")} - ${ce(e($),"MMM d, yyyy")}`)}),V(()=>B(M()),()=>{C(f,Math.round(M().uniqueChapters/244*100))}),Ee(),pe();var v=rn(),T=a(v),w=a(T),E=a(w),D=a(E,!0);t(E);var k=s(E,3),i=a(k,!0);t(k),t(w);var l=s(w,2),I=a(l),h=a(I),y=s(a(h),2),R=a(y,!0);t(y),t(h),t(I);var U=s(I,2),j=a(U),W=s(a(j),2),q=a(W,!0);t(W),t(j);var L=s(j,2),X=a(L);t(L);var K=s(L,2),N=a(K);t(K),t(U),t(l),t(T),t(v),Z(()=>{x(D,e(S)),x(i,e(b)),x(R,(B(M()),O(()=>M().totalReadings))),x(q,(B(M()),O(()=>M().uniqueChapters))),ut(X,`width: ${e(f)??""}%`),de(X,"aria-valuenow",e(f)),x(N,`${e(f)??""}% of all BOM chapters`)}),p(o,v),fe()}var sn=P('<div class="mb-3"><div class="card"><div class="card-header"><strong> </strong></div> <ul class="list-group list-group-flush"><li class="list-group-item"><div class="d-flex justify-content-between align-items-center"><span class="text-muted">Reading Submissions:</span> <strong class="fs-5"> </strong></div></li> <li class="list-group-item"><div class="d-flex justify-content-between align-items-center mb-2"><span class="text-muted">Unique Chapters:</span> <strong class="fs-5"> </strong></div> <div class="progress" style="height: 8px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <small class="text-muted"> </small></li></ul></div></div>');function on(o,n){ge(n,!1);const r=Y();let d=ee(n,"month",8),u=ee(n,"aggregate",8);V(()=>B(u()),()=>{C(r,Math.round(u().uniqueChapters/244*100))}),Ee(),pe();var _=sn(),m=a(_),g=a(m),$=a(g),S=a($,!0);t($),t(g);var b=s(g,2),f=a(b),c=a(f),M=s(a(c),2),v=a(M,!0);t(M),t(c),t(f);var T=s(f,2),w=a(T),E=s(a(w),2),D=a(E,!0);t(E),t(w);var k=s(w,2),i=a(k);t(k);var l=s(k,2),I=a(l);t(l),t(T),t(b),t(m),t(_),Z(h=>{x(S,h),x(v,(B(u()),O(()=>u().totalReadings))),x(D,(B(u()),O(()=>u().uniqueChapters))),ut(i,`width: ${e(r)??""}%`),de(i,"aria-valuenow",e(r)),x(I,`${e(r)??""}% of all BOM chapters`)},[()=>(B(ce),B(_e),B(d()),O(()=>ce(_e(d(),"yyyy-MM",new Date),"MMMM yyyy")))]),p(o,_),fe()}var ln=P('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),cn=P('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),dn=P('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),un=P('<div class="alert alert-info" role="alert"><i class="bi bi-info-circle me-2"></i> No reading submissions yet. Be the first to start reading!</div>'),vn=P('<div class="bom-submissions"><div class="mb-3"><!></div> <div class="submissions-list svelte-1qt8gnu"><!></div></div>');function mn(o,n){ge(n,!1);const r=()=>we($,"$groupedByDate",m),d=()=>we(S,"$aggregatedByDate",m),u=()=>we(b,"$aggregatedByWeek",m),_=()=>we(f,"$aggregatedByMonth",m),[m,g]=ze(),{stores:{groupedByDate:$,aggregatedByDate:S,aggregatedByWeek:b,aggregatedByMonth:f}}=mt();let c=Y("by-day");pe();var M=vn(),v=a(M),T=a(v);zt(T,{options:[{key:"By Submission",value:"by-submission"},{key:"By Day",value:"by-day"},{key:"By Week",value:"by-week"},{key:"By Month",value:"by-month"}],label:"View",disabled:!1,get value(){return e(c)},set value(i){C(c,i)},$$legacy:!0}),t(v);var w=s(v,2),E=a(w);{var D=i=>{var l=he(),I=oe(l);{var h=R=>{var U=ln();p(R,U)},y=R=>{var U=he(),j=oe(U);Me(j,1,()=>Object.entries(r()),Be,(W,q)=>{var L=Ge(()=>Fe(e(q),2));let X=()=>e(L)[0],K=()=>e(L)[1];en(W,{get date(){return X()},get entries(){return K()}})}),p(R,U)};H(I,R=>{Object.keys(r()).length===0?R(h):R(y,!1)})}p(i,l)},k=i=>{var l=he(),I=oe(l);{var h=R=>{var U=he(),j=oe(U);{var W=L=>{var X=cn();p(L,X)},q=L=>{var X=he(),K=oe(X);Me(K,1,()=>Object.entries(d()),Be,(N,F)=>{var G=Ge(()=>Fe(e(F),2));let Q=()=>e(G)[0],ie=()=>e(G)[1];an(N,{get date(){return Q()},get aggregate(){return ie()}})}),p(L,X)};H(j,L=>{Object.keys(d()).length===0?L(W):L(q,!1)})}p(R,U)},y=R=>{var U=he(),j=oe(U);{var W=L=>{var X=he(),K=oe(X);{var N=G=>{var Q=dn();p(G,Q)},F=G=>{var Q=he(),ie=oe(Q);Me(ie,1,()=>Object.entries(u()),Be,(z,J)=>{var ae=Ge(()=>Fe(e(J),2));let le=()=>e(ae)[0],re=()=>e(ae)[1];nn(z,{get week(){return le()},get aggregate(){return re()}})}),p(G,Q)};H(K,G=>{Object.keys(u()).length===0?G(N):G(F,!1)})}p(L,X)},q=L=>{var X=he(),K=oe(X);{var N=F=>{var G=he(),Q=oe(G);{var ie=J=>{var ae=un();p(J,ae)},z=J=>{var ae=he(),le=oe(ae);Me(le,1,()=>Object.entries(_()),Be,(re,ue)=>{var A=Ge(()=>Fe(e(ue),2));let ne=()=>e(A)[0],ve=()=>e(A)[1];on(re,{get month(){return ne()},get aggregate(){return ve()}})}),p(J,ae)};H(Q,J=>{Object.keys(_()).length===0?J(ie):J(z,!1)})}p(F,G)};H(K,F=>{e(c)==="by-month"&&F(N)},!0)}p(L,X)};H(j,L=>{e(c)==="by-week"?L(W):L(q,!1)},!0)}p(R,U)};H(I,R=>{e(c)==="by-day"?R(h):R(y,!1)},!0)}p(i,l)};H(E,i=>{e(c)==="by-submission"?i(D):i(k,!1)})}t(w),t(M),p(o,M),fe(),g()}var _n=P(`<div class="card"><div class="card-header"><div class="d-flex align-items-center gap-2"><span class="fw-600 svelte-8saayj">Book of Mormon Challenge</span></div></div> <div class="card-body"><div class="d-flex flex-column gap-3"><div><div class="d-flex justify-content-between align-items-center mb-2"><h5 class="mb-0">Overall Completion</h5> <span class="badge bg-primary fs-5"> </span></div> <div class="progress mb-2" style="height: 10px;"><div class="progress-bar bg-success" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <p class="text-muted mb-0"> </p></div> <div class="row g-3"><div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-calendar3 fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Days Remaining</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-book fs-1 text-primary mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">BOM Chapters</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-check-circle fs-1 text-success mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Chapters Read</p></div></div></div> <div class="col-6"><div class="card border"><div class="card-body text-center p-3"><i class="bi bi-people fs-1 text-warning mb-2"></i> <h2 class="mb-1"> </h2> <p class="text-muted mb-0">Reading Submissions</p></div></div></div></div> <div class="alert alert-info mb-0" role="alert"><div class="d-flex gap-2"><i class="bi bi-info-circle"></i> <div>This progress shows how many chapters have been read by <strong>anyone</strong> in the ward.
						Each person can mark chapters as read anonymously.</div></div></div> <div class="d-flex flex-column gap-2"><div class="d-block"><button class="btn btn-sm btn-primary w-100" type="button" data-bs-toggle="offcanvas">Join the Challenge</button></div> <div class="d-block"><button class="btn btn-sm btn-outline-primary w-100" type="button" data-bs-toggle="offcanvas">Record Your Reading</button></div> <div class="d-block"><button class="btn btn-sm btn-link w-100" type="button" data-bs-toggle="offcanvas">See all submissions</button></div></div></div></div></div>`);function gn(o,n){ge(n,!1);const r=()=>we(E,"$chapterProgress",u),d=()=>we(D,"$entries",u),[u,_]=ze(),m=Y(),g=Y(),$=Y(),S=Y(),b=Y(),f=Y(),c=Y();let M=ee(n,"scheduleDrawerId",8),v=ee(n,"submissionsDrawerId",8),T=ee(n,"onJoinClick",8),w=ee(n,"onRecordClick",8);const{stores:{chapterProgress:E,entries:D}}=mt();function k(se){return se.toLocaleString("en-US")}V(()=>r(),()=>{C(m,r().filter(se=>se.book_name!=="Review"))}),V(()=>e(m),()=>{C(g,Array.from(new Set(e(m).map(se=>se.chapter_ref))))}),V(()=>e(g),()=>{C($,e(g).length)}),V(()=>(e(g),e(m)),()=>{C(S,e(g).filter(se=>e(m).find(De=>De.chapter_ref===se&&De.read_count>0)).length)}),V(()=>d(),()=>{C(b,d().length)}),V(()=>(e($),e(S)),()=>{C(f,e($)>0?Math.round(e(S)/e($)*100):0)}),V(()=>{},()=>{C(c,(()=>{const se=new Date,Ae=new Date(se.getFullYear(),11,31).getTime()-se.getTime(),qe=Math.ceil(Ae/(1e3*60*60*24));return qe>0?qe:0})())}),Ee(),pe();var i=_n(),l=s(a(i),2),I=a(l),h=a(I),y=a(h),R=s(a(y),2),U=a(R);t(R),t(y);var j=s(y,2),W=a(j);t(j);var q=s(j,2),L=a(q);t(q),t(h);var X=s(h,2),K=a(X),N=a(K),F=a(N),G=s(a(F),2),Q=a(G,!0);t(G),et(2),t(F),t(N),t(K);var ie=s(K,2),z=a(ie),J=a(z),ae=s(a(J),2),le=a(ae,!0);t(ae),et(2),t(J),t(z),t(ie);var re=s(ie,2),ue=a(re),A=a(ue),ne=s(a(A),2),ve=a(ne);t(ne),et(2),t(A),t(ue),t(re);var ke=s(re,2),$e=a(ke),je=a($e),Ye=s(a(je),2),tt=a(Ye,!0);t(Ye),et(2),t(je),t($e),t(ke),t(X);var Ie=s(X,4),Pe=a(Ie),He=a(Pe);t(Pe);var Xe=s(Pe,2),Ve=a(Xe);t(Xe);var at=s(Xe,2),Ke=a(at);t(at),t(Ie),t(I),t(l),t(i),Z((se,De,Ae,qe,st,Ne,Le)=>{x(U,`${e(f)??""}%`),ut(W,`width: ${e(f)??""}%`),de(W,"aria-valuenow",e(f)),x(L,`${se??""} of ${De??""} chapters read by at
					least one person`),x(Q,Ae),x(le,qe),x(ve,`${st??""} / ${Ne??""}`),x(tt,Le),de(He,"data-bs-target",`#${M()??""}`),de(He,"aria-controls",M()),de(Ve,"data-bs-target",`#${M()??""}`),de(Ve,"aria-controls",M()),de(Ke,"data-bs-target",`#${v()??""}`),de(Ke,"aria-controls",v())},[()=>(e(S),O(()=>k(e(S)))),()=>(e($),O(()=>k(e($)))),()=>(e(c),O(()=>k(e(c)))),()=>(e($),O(()=>k(e($)))),()=>(e(S),O(()=>k(e(S)))),()=>(e($),O(()=>k(e($)))),()=>(e(b),O(()=>k(e(b))))]),Te("click",He,function(...se){T()?.apply(this,se)}),Te("click",Ve,function(...se){w()?.apply(this,se)}),p(o,i),fe(),_()}var fn=P('<div class="text-center py-5"><div class="spinner-border" role="status"><span class="visually-hidden">Loading reading challenge...</span></div></div>'),pn=P(`<div class="alert alert-info mb-3" role="alert"><h5 class="alert-heading"><i class="bi bi-info-circle me-2"></i>How to Join the Challenge</h5> <p class="mb-2">Our ward is reading the Book of Mormon together! Here's how to participate:</p> <ol class="mb-2"><li>Read any chapter from the Book of Mormon</li> <li>Click the "Read" button next to the chapter you completed</li> <li>Your reading is tracked anonymously to show ward progress</li></ol> <p class="mb-0"><strong>Remember:</strong> You don't have to follow the schedule exactly! Read ahead, catch
					up, or go at your own pace. The goal is to show that our ward is moving forward in reading the
					Book of Mormon together.</p></div>`),yn=P("<!> <!>",1),bn=P("<!> <!> <!>",1);function Ln(o,n){ge(n,!1);const r=()=>we($,"$loading",u),d=()=>we(S,"$ready",u),[u,_]=ze(),m=St(),g=St(),{stores:{loading:$,ready:S},actions:{reload:b}}=mt();let f=Y(!1);function c(){C(f,!0)}function M(){C(f,!1)}vt(async()=>{await b()}),pe();var v=he(),T=oe(v);{var w=D=>{var k=fn();p(D,k)},E=D=>{var k=bn(),i=oe(k);gn(i,{get scheduleDrawerId(){return m},get submissionsDrawerId(){return g},onJoinClick:c,onRecordClick:M});var l=s(i,2);Tt(l,{get id(){return m},title:"2026 Book of Mormon Reading Challenge",placement:"end",children:(h,y)=>{var R=yn(),U=oe(R);{var j=q=>{var L=pn();p(q,L)};H(U,q=>{e(f)&&q(j)})}var W=s(U,2);Xr(W,{}),p(h,R)},$$slots:{default:!0}});var I=s(l,2);Tt(I,{get id(){return g},title:"Reading Submissions",placement:"start",children:(h,y)=>{mn(h,{})},$$slots:{default:!0}}),p(D,k)};H(T,D=>{r()&&!d()?D(w):D(E,!1)})}p(o,v),fe(),_()}export{Ln as B,Fn as S,Wn as W,qn as a,Nn as b,Yn as i};
